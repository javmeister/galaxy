var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});(self.webpackChunkvelorum=self.webpackChunkvelorum||[]).push([[736],{7734:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Vx:()=>update,kX:()=>Tween});var a,Easing={Linear:{None:function(amount){return amount}},Quadratic:{In:function(amount){return amount*amount},Out:function(amount){return amount*(2-amount)},InOut:function(amount){return(amount*=2)<1?.5*amount*amount:-.5*(--amount*(amount-2)-1)}},Cubic:{In:function(amount){return amount*amount*amount},Out:function(amount){return--amount*amount*amount+1},InOut:function(amount){return(amount*=2)<1?.5*amount*amount*amount:.5*((amount-=2)*amount*amount+2)}},Quartic:{In:function(amount){return amount*amount*amount*amount},Out:function(amount){return 1- --amount*amount*amount*amount},InOut:function(amount){return(amount*=2)<1?.5*amount*amount*amount*amount:-.5*((amount-=2)*amount*amount*amount-2)}},Quintic:{In:function(amount){return amount*amount*amount*amount*amount},Out:function(amount){return--amount*amount*amount*amount*amount+1},InOut:function(amount){return(amount*=2)<1?.5*amount*amount*amount*amount*amount:.5*((amount-=2)*amount*amount*amount*amount+2)}},Sinusoidal:{In:function(amount){return 1-Math.cos(amount*Math.PI/2)},Out:function(amount){return Math.sin(amount*Math.PI/2)},InOut:function(amount){return.5*(1-Math.cos(Math.PI*amount))}},Exponential:{In:function(amount){return 0===amount?0:Math.pow(1024,amount-1)},Out:function(amount){return 1===amount?1:1-Math.pow(2,-10*amount)},InOut:function(amount){return 0===amount?0:1===amount?1:(amount*=2)<1?.5*Math.pow(1024,amount-1):.5*(2-Math.pow(2,-10*(amount-1)))}},Circular:{In:function(amount){return 1-Math.sqrt(1-amount*amount)},Out:function(amount){return Math.sqrt(1- --amount*amount)},InOut:function(amount){return(amount*=2)<1?-.5*(Math.sqrt(1-amount*amount)-1):.5*(Math.sqrt(1-(amount-=2)*amount)+1)}},Elastic:{In:function(amount){return 0===amount?0:1===amount?1:-Math.pow(2,10*(amount-1))*Math.sin(5*(amount-1.1)*Math.PI)},Out:function(amount){return 0===amount?0:1===amount?1:Math.pow(2,-10*amount)*Math.sin(5*(amount-.1)*Math.PI)+1},InOut:function(amount){return 0===amount?0:1===amount?1:(amount*=2)<1?-.5*Math.pow(2,10*(amount-1))*Math.sin(5*(amount-1.1)*Math.PI):.5*Math.pow(2,-10*(amount-1))*Math.sin(5*(amount-1.1)*Math.PI)+1}},Back:{In:function(amount){var s=1.70158;return amount*amount*((s+1)*amount-s)},Out:function(amount){var s=1.70158;return--amount*amount*((s+1)*amount+s)+1},InOut:function(amount){var s=2.5949095;return(amount*=2)<1?amount*amount*((s+1)*amount-s)*.5:.5*((amount-=2)*amount*((s+1)*amount+s)+2)}},Bounce:{In:function(amount){return 1-Easing.Bounce.Out(1-amount)},Out:function(amount){return amount<1/2.75?7.5625*amount*amount:amount<2/2.75?7.5625*(amount-=1.5/2.75)*amount+.75:amount<2.5/2.75?7.5625*(amount-=2.25/2.75)*amount+.9375:7.5625*(amount-=2.625/2.75)*amount+.984375},InOut:function(amount){return amount<.5?.5*Easing.Bounce.In(2*amount):.5*Easing.Bounce.Out(2*amount-1)+.5}}},now$1=typeof self>"u"&&typeof process<"u"&&process.hrtime?__name(function(){var time=process.hrtime();return 1e3*time[0]+time[1]/1e6},"now"):typeof self<"u"&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:__name(function(){return(new Date).getTime()},"now"),Group=function(){function Group2(){this._tweens={},this._tweensAddedDuringUpdate={}}return __name(Group2,"Group"),Group2.prototype.getAll=function(){var _this=this;return Object.keys(this._tweens).map(function(tweenId){return _this._tweens[tweenId]})},Group2.prototype.removeAll=function(){this._tweens={}},Group2.prototype.add=function(tween){this._tweens[tween.getId()]=tween,this._tweensAddedDuringUpdate[tween.getId()]=tween},Group2.prototype.remove=function(tween){delete this._tweens[tween.getId()],delete this._tweensAddedDuringUpdate[tween.getId()]},Group2.prototype.update=function(time,preserve){void 0===time&&(time=now$1()),void 0===preserve&&(preserve=!1);var tweenIds=Object.keys(this._tweens);if(0===tweenIds.length)return!1;for(;tweenIds.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<tweenIds.length;i++){var tween=this._tweens[tweenIds[i]];tween&&!1===tween.update(time,!preserve)&&!preserve&&delete this._tweens[tweenIds[i]]}tweenIds=Object.keys(this._tweensAddedDuringUpdate)}return!0},Group2}(),Interpolation={Linear:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=Interpolation.Utils.Linear;return k<0?fn(v[0],v[1],f):k>1?fn(v[m],v[m-1],m-f):fn(v[i],v[i+1>m?m:i+1],f-i)},Bezier:function(v,k){for(var b=0,n=v.length-1,pw=Math.pow,bn=Interpolation.Utils.Bernstein,i=0;i<=n;i++)b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i);return b},CatmullRom:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=Interpolation.Utils.CatmullRom;return v[0]===v[m]?(k<0&&(i=Math.floor(f=m*(1+k))),fn(v[(i-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m],f-i)):k<0?v[0]-(fn(v[0],v[0],v[1],v[1],-f)-v[0]):k>1?v[m]-(fn(v[m],v[m],v[m-1],v[m-1],f-m)-v[m]):fn(v[i?i-1:0],v[i],v[m<i+1?m:i+1],v[m<i+2?m:i+2],f-i)},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0},Bernstein:function(n,i){var fc=Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i)},Factorial:(a=[1],function(n){var s=1;if(a[n])return a[n];for(var i=n;i>1;i--)s*=i;return a[n]=s,s}),CatmullRom:function(p0,p1,p2,p3,t){var v0=.5*(p2-p0),v1=.5*(p3-p1),t2=t*t;return(2*p1-2*p2+v0+v1)*(t*t2)+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}}},Sequence=function(){function Sequence2(){}return __name(Sequence2,"Sequence"),Sequence2.nextId=function(){return Sequence2._nextId++},Sequence2._nextId=0,Sequence2}(),mainGroup=new Group,Tween=function(){function Tween2(_object,_group){void 0===_group&&(_group=mainGroup),this._object=_object,this._group=_group,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return __name(Tween2,"Tween"),Tween2.prototype.getId=function(){return this._id},Tween2.prototype.isPlaying=function(){return this._isPlaying},Tween2.prototype.isPaused=function(){return this._isPaused},Tween2.prototype.to=function(properties,duration){return this._valuesEnd=Object.create(properties),void 0!==duration&&(this._duration=duration),this},Tween2.prototype.duration=function(d){return this._duration=d,this},Tween2.prototype.start=function(time){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var property in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(property),this._valuesStart[property]=this._valuesStartRepeat[property];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==time?"string"==typeof time?now$1()+parseFloat(time):time:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},Tween2.prototype._setupProperties=function(_object,_valuesStart,_valuesEnd,_valuesStartRepeat){for(var property in _valuesEnd){var startValue=_object[property],startValueIsArray=Array.isArray(startValue),propType=startValueIsArray?"array":typeof startValue,isInterpolationList=!startValueIsArray&&Array.isArray(_valuesEnd[property]);if("undefined"!==propType&&"function"!==propType){if(isInterpolationList){var endValues=_valuesEnd[property];if(0===endValues.length)continue;endValues=endValues.map(this._handleRelativeValue.bind(this,startValue)),_valuesEnd[property]=[startValue].concat(endValues)}if("object"!==propType&&!startValueIsArray||!startValue||isInterpolationList)typeof _valuesStart[property]>"u"&&(_valuesStart[property]=startValue),startValueIsArray||(_valuesStart[property]*=1),_valuesStartRepeat[property]=isInterpolationList?_valuesEnd[property].slice().reverse():_valuesStart[property]||0;else{for(var prop in _valuesStart[property]=startValueIsArray?[]:{},startValue)_valuesStart[property][prop]=startValue[prop];_valuesStartRepeat[property]=startValueIsArray?[]:{},this._setupProperties(startValue,_valuesStart[property],_valuesEnd[property],_valuesStartRepeat[property])}}}},Tween2.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},Tween2.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},Tween2.prototype.pause=function(time){return void 0===time&&(time=now$1()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=time,this._group&&this._group.remove(this)),this},Tween2.prototype.resume=function(time){return void 0===time&&(time=now$1()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=time-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},Tween2.prototype.stopChainedTweens=function(){for(var i=0,numChainedTweens=this._chainedTweens.length;i<numChainedTweens;i++)this._chainedTweens[i].stop();return this},Tween2.prototype.group=function(group){return this._group=group,this},Tween2.prototype.delay=function(amount){return this._delayTime=amount,this},Tween2.prototype.repeat=function(times){return this._initialRepeat=times,this._repeat=times,this},Tween2.prototype.repeatDelay=function(amount){return this._repeatDelayTime=amount,this},Tween2.prototype.yoyo=function(yoyo){return this._yoyo=yoyo,this},Tween2.prototype.easing=function(easingFunction){return this._easingFunction=easingFunction,this},Tween2.prototype.interpolation=function(interpolationFunction){return this._interpolationFunction=interpolationFunction,this},Tween2.prototype.chain=function(){for(var tweens=[],_i=0;_i<arguments.length;_i++)tweens[_i]=arguments[_i];return this._chainedTweens=tweens,this},Tween2.prototype.onStart=function(callback){return this._onStartCallback=callback,this},Tween2.prototype.onUpdate=function(callback){return this._onUpdateCallback=callback,this},Tween2.prototype.onRepeat=function(callback){return this._onRepeatCallback=callback,this},Tween2.prototype.onComplete=function(callback){return this._onCompleteCallback=callback,this},Tween2.prototype.onStop=function(callback){return this._onStopCallback=callback,this},Tween2.prototype.update=function(time,autoStart){if(void 0===time&&(time=now$1()),void 0===autoStart&&(autoStart=!0),this._isPaused)return!0;var property,elapsed;if(!this._goToEnd&&!this._isPlaying){if(time>this._startTime+this._duration)return!1;autoStart&&this.start(time)}if(this._goToEnd=!1,time<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),elapsed=(time-this._startTime)/this._duration;var value=this._easingFunction(elapsed=0===this._duration||elapsed>1?1:elapsed);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,value),this._onUpdateCallback&&this._onUpdateCallback(this._object,elapsed),1===elapsed){if(this._repeat>0){for(property in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)!this._yoyo&&"string"==typeof this._valuesEnd[property]&&(this._valuesStartRepeat[property]=this._valuesStartRepeat[property]+parseFloat(this._valuesEnd[property])),this._yoyo&&this._swapEndStartRepeatValues(property),this._valuesStart[property]=this._valuesStartRepeat[property];return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?time+this._repeatDelayTime:time+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var i=0,numChainedTweens=this._chainedTweens.length;i<numChainedTweens;i++)this._chainedTweens[i].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},Tween2.prototype._updateProperties=function(_object,_valuesStart,_valuesEnd,value){for(var property in _valuesEnd)if(void 0!==_valuesStart[property]){var start=_valuesStart[property]||0,end=_valuesEnd[property],startIsArray=Array.isArray(_object[property]),endIsArray=Array.isArray(end);!startIsArray&&endIsArray?_object[property]=this._interpolationFunction(end,value):"object"==typeof end&&end?this._updateProperties(_object[property],start,end,value):"number"==typeof(end=this._handleRelativeValue(start,end))&&(_object[property]=start+(end-start)*value)}},Tween2.prototype._handleRelativeValue=function(start,end){return"string"!=typeof end?end:"+"===end.charAt(0)||"-"===end.charAt(0)?start+parseFloat(end):parseFloat(end)},Tween2.prototype._swapEndStartRepeatValues=function(property){var tmp=this._valuesStartRepeat[property],endValue=this._valuesEnd[property];this._valuesStartRepeat[property]="string"==typeof endValue?this._valuesStartRepeat[property]+parseFloat(endValue):this._valuesEnd[property],this._valuesEnd[property]=tmp},Tween2}(),TWEEN=mainGroup,update=(TWEEN.getAll.bind(TWEEN),TWEEN.removeAll.bind(TWEEN),TWEEN.add.bind(TWEEN),TWEEN.remove.bind(TWEEN),TWEEN.update.bind(TWEEN))},9500:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>CameraControls});const ACTION=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function isPerspectiveCamera(camera){return camera.isPerspectiveCamera}function isOrthographicCamera(camera){return camera.isOrthographicCamera}__name(isPerspectiveCamera,"isPerspectiveCamera"),__name(isOrthographicCamera,"isOrthographicCamera");const PI_2=2*Math.PI,PI_HALF=Math.PI/2,EPSILON=1e-5;function approxZero(number,error=EPSILON){return Math.abs(number)<error}function approxEquals(a,b,error=EPSILON){return approxZero(a-b,error)}function roundToStep(value,step){return Math.round(value/step)*step}function infinityToMaxNumber(value){return isFinite(value)?value:value<0?-Number.MAX_VALUE:Number.MAX_VALUE}function maxNumberToInfinity(value){return Math.abs(value)<Number.MAX_VALUE?value:value*(1/0)}function extractClientCoordFromEvent(pointers,out){out.set(0,0),pointers.forEach(pointer=>{out.x+=pointer.clientX,out.y+=pointer.clientY}),out.x/=pointers.length,out.y/=pointers.length}function notSupportedInOrthographicCamera(camera,message){return!!isOrthographicCamera(camera)&&(console.warn(`${message} is not supported in OrthographicCamera`),!0)}function quatInvertCompat(target){return target.invert?target.invert():target.inverse(),target}__name(approxZero,"approxZero"),__name(approxEquals,"approxEquals"),__name(roundToStep,"roundToStep"),__name(infinityToMaxNumber,"infinityToMaxNumber"),__name(maxNumberToInfinity,"maxNumberToInfinity"),__name(extractClientCoordFromEvent,"extractClientCoordFromEvent"),__name(notSupportedInOrthographicCamera,"notSupportedInOrthographicCamera"),__name(quatInvertCompat,"quatInvertCompat");class EventDispatcher{constructor(){this._listeners={}}addEventListener(type,listener){const listeners=this._listeners;void 0===listeners[type]&&(listeners[type]=[]),-1===listeners[type].indexOf(listener)&&listeners[type].push(listener)}hasEventListener(type,listener){const listeners=this._listeners;return void 0!==listeners[type]&&-1!==listeners[type].indexOf(listener)}removeEventListener(type,listener){const listenerArray=this._listeners[type];if(void 0!==listenerArray){const index=listenerArray.indexOf(listener);-1!==index&&listenerArray.splice(index,1)}}removeAllEventListeners(type){type?Array.isArray(this._listeners[type])&&(this._listeners[type].length=0):this._listeners={}}dispatchEvent(event){const listenerArray=this._listeners[event.type];if(void 0!==listenerArray){event.target=this;const array=listenerArray.slice(0);for(let i=0,l=array.length;i<l;i++)array[i].call(this,event)}}}__name(EventDispatcher,"EventDispatcher");const isBrowser=typeof window<"u",isMac=isBrowser&&/Mac/.test(navigator.platform),isPointerEventsNotSupported=!(isBrowser&&"PointerEvent"in window);let THREE,_ORIGIN,_AXIS_Y,_AXIS_Z,_v2,_v3A,_v3B,_v3C,_xColumn,_yColumn,_zColumn,_deltaTarget,_deltaOffset,_sphericalA,_sphericalB,_box3A,_box3B,_sphere,_quaternionA,_quaternionB,_rotationMatrix,_raycaster;class CameraControls extends EventDispatcher{static install(libs){THREE=libs.THREE,_ORIGIN=Object.freeze(new THREE.Vector3(0,0,0)),_AXIS_Y=Object.freeze(new THREE.Vector3(0,1,0)),_AXIS_Z=Object.freeze(new THREE.Vector3(0,0,1)),_v2=new THREE.Vector2,_v3A=new THREE.Vector3,_v3B=new THREE.Vector3,_v3C=new THREE.Vector3,_xColumn=new THREE.Vector3,_yColumn=new THREE.Vector3,_zColumn=new THREE.Vector3,_deltaTarget=new THREE.Vector3,_deltaOffset=new THREE.Vector3,_sphericalA=new THREE.Spherical,_sphericalB=new THREE.Spherical,_box3A=new THREE.Box3,_box3B=new THREE.Box3,_sphere=new THREE.Sphere,_quaternionA=new THREE.Quaternion,_quaternionB=new THREE.Quaternion,_rotationMatrix=new THREE.Matrix4,_raycaster=new THREE.Raycaster}static get ACTION(){return ACTION}constructor(camera,domElement){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=0,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.dampingFactor=.05,this.draggingDampingFactor=.25,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=ACTION.NONE,this._viewport=null,this._affectOffset=!1,this._dollyControlAmount=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._activePointers=[],this._truckInternal=(deltaX,deltaY,dragToOffset)=>{if(isPerspectiveCamera(this._camera)){const offset=_v3A.copy(this._camera.position).sub(this._target),fov=this._camera.getEffectiveFOV()*THREE.MathUtils.DEG2RAD,targetDistance=offset.length()*Math.tan(.5*fov),truckX=this.truckSpeed*deltaX*targetDistance/this._elementRect.height,pedestalY=this.truckSpeed*deltaY*targetDistance/this._elementRect.height;this.verticalDragToForward?(dragToOffset?this.setFocalOffset(this._focalOffsetEnd.x+truckX,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(truckX,0,!0),this.forward(-pedestalY,!0)):dragToOffset?this.setFocalOffset(this._focalOffsetEnd.x+truckX,this._focalOffsetEnd.y+pedestalY,this._focalOffsetEnd.z,!0):this.truck(truckX,pedestalY,!0)}else if(isOrthographicCamera(this._camera)){const camera2=this._camera,truckX=deltaX*(camera2.right-camera2.left)/camera2.zoom/this._elementRect.width,pedestalY=deltaY*(camera2.top-camera2.bottom)/camera2.zoom/this._elementRect.height;dragToOffset?this.setFocalOffset(this._focalOffsetEnd.x+truckX,this._focalOffsetEnd.y+pedestalY,this._focalOffsetEnd.z,!0):this.truck(truckX,pedestalY,!0)}},this._rotateInternal=(deltaX,deltaY)=>{this.rotate(PI_2*this.azimuthRotateSpeed*deltaX/this._elementRect.height,PI_2*this.polarRotateSpeed*deltaY/this._elementRect.height,!0)},this._dollyInternal=(delta,x,y)=>{const dollyScale=Math.pow(.95,-delta*this.dollySpeed),distance=this._sphericalEnd.radius*dollyScale,prevRadius=this._sphericalEnd.radius,signedPrevRadius=prevRadius*(delta>=0?-1:1);this.dollyTo(distance),this.infinityDolly&&(distance<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(_v3A),this._targetEnd.add(_v3A.normalize().multiplyScalar(signedPrevRadius)),this._target.add(_v3A.normalize().multiplyScalar(signedPrevRadius))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-prevRadius,this.infinityDolly&&(distance<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=signedPrevRadius),this._dollyControlCoord.set(x,y))},this._zoomInternal=(delta,x,y)=>{const zoomScale=Math.pow(.95,delta*this.dollySpeed),prevZoom=this._zoomEnd;this.zoomTo(this._zoom*zoomScale),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-prevZoom,this._dollyControlCoord.set(x,y))},typeof THREE>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=camera,this._yAxisUpSpace=(new THREE.Quaternion).setFromUnitVectors(this._camera.up,_AXIS_Y),this._yAxisUpSpaceInverse=quatInvertCompat(this._yAxisUpSpace.clone()),this._state=ACTION.NONE,this._target=new THREE.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new THREE.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new THREE.Spherical).setFromVector3(_v3A.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this._updateNearPlaneCorners(),this._boundary=new THREE.Box3(new THREE.Vector3(-1/0,-1/0,-1/0),new THREE.Vector3(1/0,1/0,1/0)),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new THREE.Vector2,this.mouseButtons={left:ACTION.ROTATE,middle:ACTION.DOLLY,right:ACTION.TRUCK,wheel:isPerspectiveCamera(this._camera)?ACTION.DOLLY:isOrthographicCamera(this._camera)?ACTION.ZOOM:ACTION.NONE},this.touches={one:ACTION.TOUCH_ROTATE,two:isPerspectiveCamera(this._camera)?ACTION.TOUCH_DOLLY_TRUCK:isOrthographicCamera(this._camera)?ACTION.TOUCH_ZOOM_TRUCK:ACTION.NONE,three:ACTION.TOUCH_TRUCK};const dragStartPosition=new THREE.Vector2,lastDragPosition=new THREE.Vector2,dollyStart=new THREE.Vector2,onPointerDown=__name(event=>{this._enabled&&this._domElement&&(this._activePointers.push({pointerId:event.pointerId,clientX:event.clientX,clientY:event.clientY,deltaX:0,deltaY:0}),this._domElement.ownerDocument.removeEventListener("pointermove",onPointerMove,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",onPointerUp),this._domElement.ownerDocument.addEventListener("pointermove",onPointerMove,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",onPointerUp),startDragging(event))},"onPointerDown"),onMouseDown=__name(event=>{this._enabled&&this._domElement&&(this._activePointers.push({pointerId:0,clientX:event.clientX,clientY:event.clientY,deltaX:0,deltaY:0}),this._domElement.ownerDocument.removeEventListener("mousemove",onMouseMove),this._domElement.ownerDocument.removeEventListener("mouseup",onMouseUp),this._domElement.ownerDocument.addEventListener("mousemove",onMouseMove),this._domElement.ownerDocument.addEventListener("mouseup",onMouseUp),startDragging(event))},"onMouseDown"),onTouchStart=__name(event=>{!this._enabled||!this._domElement||(event.preventDefault(),Array.prototype.forEach.call(event.changedTouches,touch=>{this._activePointers.push({pointerId:touch.identifier,clientX:touch.clientX,clientY:touch.clientY,deltaX:0,deltaY:0})}),this._domElement.ownerDocument.removeEventListener("touchmove",onTouchMove,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",onTouchEnd),this._domElement.ownerDocument.addEventListener("touchmove",onTouchMove,{passive:!1}),this._domElement.ownerDocument.addEventListener("touchend",onTouchEnd),startDragging(event))},"onTouchStart"),onPointerMove=__name(event=>{event.cancelable&&event.preventDefault();const pointer=this._findPointerById(event.pointerId);if(pointer){if(pointer.clientX=event.clientX,pointer.clientY=event.clientY,pointer.deltaX=event.movementX,pointer.deltaY=event.movementY,"touch"===event.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=0,1==(1&event.buttons)&&(this._state=this._state|this.mouseButtons.left),4==(4&event.buttons)&&(this._state=this._state|this.mouseButtons.middle),2==(2&event.buttons)&&(this._state=this._state|this.mouseButtons.right);dragging()}},"onPointerMove"),onMouseMove=__name(event=>{const pointer=this._findPointerById(0);pointer&&(pointer.clientX=event.clientX,pointer.clientY=event.clientY,pointer.deltaX=event.movementX,pointer.deltaY=event.movementY,this._state=0,1==(1&event.buttons)&&(this._state=this._state|this.mouseButtons.left),4==(4&event.buttons)&&(this._state=this._state|this.mouseButtons.middle),2==(2&event.buttons)&&(this._state=this._state|this.mouseButtons.right),dragging())},"onMouseMove"),onTouchMove=__name(event=>{event.cancelable&&event.preventDefault(),Array.prototype.forEach.call(event.changedTouches,touch=>{const pointer=this._findPointerById(touch.identifier);pointer&&(pointer.clientX=touch.clientX,pointer.clientY=touch.clientY)}),dragging()},"onTouchMove"),onPointerUp=__name(event=>{const pointer=this._findPointerById(event.pointerId);if(pointer&&this._activePointers.splice(this._activePointers.indexOf(pointer),1),"touch"===event.pointerType)switch(this._activePointers.length){case 0:this._state=ACTION.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=ACTION.NONE;endDragging()},"onPointerUp"),onMouseUp=__name(()=>{const pointer=this._findPointerById(0);pointer&&this._activePointers.splice(this._activePointers.indexOf(pointer),1),this._state=ACTION.NONE,endDragging()},"onMouseUp"),onTouchEnd=__name(event=>{switch(Array.prototype.forEach.call(event.changedTouches,touch=>{const pointer=this._findPointerById(touch.identifier);pointer&&this._activePointers.splice(this._activePointers.indexOf(pointer),1)}),this._activePointers.length){case 0:this._state=ACTION.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}endDragging()},"onTouchEnd");let lastScrollTimeStamp=-1;const onMouseWheel=__name(event=>{if(!this._enabled||this.mouseButtons.wheel===ACTION.NONE)return;if(event.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ACTION.ROTATE||this.mouseButtons.wheel===ACTION.TRUCK){const now=performance.now();lastScrollTimeStamp-now<1e3&&this._getClientRect(this._elementRect),lastScrollTimeStamp=now}const deltaYFactor=isMac?-1:-3,delta=1===event.deltaMode?event.deltaY/deltaYFactor:event.deltaY/(10*deltaYFactor),x=this.dollyToCursor?(event.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,y=this.dollyToCursor?(event.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case ACTION.ROTATE:this._rotateInternal(event.deltaX,event.deltaY);break;case ACTION.TRUCK:this._truckInternal(event.deltaX,event.deltaY,!1);break;case ACTION.OFFSET:this._truckInternal(event.deltaX,event.deltaY,!0);break;case ACTION.DOLLY:this._dollyInternal(-delta,x,y);break;case ACTION.ZOOM:this._zoomInternal(-delta,x,y)}this.dispatchEvent({type:"control"})},"onMouseWheel"),onContextMenu=__name(event=>{this._enabled&&event.preventDefault()},"onContextMenu"),startDragging=__name(event=>{if(this._enabled){if(extractClientCoordFromEvent(this._activePointers,_v2),this._getClientRect(this._elementRect),dragStartPosition.copy(_v2),lastDragPosition.copy(_v2),this._activePointers.length>=2){const dx=_v2.x-this._activePointers[1].clientX,dy=_v2.y-this._activePointers[1].clientY,distance=Math.sqrt(dx*dx+dy*dy);dollyStart.set(0,distance),lastDragPosition.set(.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),.5*(this._activePointers[0].clientY+this._activePointers[1].clientY))}if("touches"in event||"pointerType"in event&&"touch"===event.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=0,1==(1&event.buttons)&&(this._state=this._state|this.mouseButtons.left),4==(4&event.buttons)&&(this._state=this._state|this.mouseButtons.middle),2==(2&event.buttons)&&(this._state=this._state|this.mouseButtons.right);this.dispatchEvent({type:"controlstart"})}},"startDragging"),dragging=__name(()=>{if(!this._enabled)return;extractClientCoordFromEvent(this._activePointers,_v2);const isPointerLockActive=this._domElement&&document.pointerLockElement===this._domElement,deltaX=isPointerLockActive?-this._activePointers[0].deltaX:lastDragPosition.x-_v2.x,deltaY=isPointerLockActive?-this._activePointers[0].deltaY:lastDragPosition.y-_v2.y;if(lastDragPosition.copy(_v2),((this._state&ACTION.ROTATE)===ACTION.ROTATE||(this._state&ACTION.TOUCH_ROTATE)===ACTION.TOUCH_ROTATE||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&this._rotateInternal(deltaX,deltaY),(this._state&ACTION.DOLLY)===ACTION.DOLLY||(this._state&ACTION.ZOOM)===ACTION.ZOOM){const dollyX=this.dollyToCursor?(dragStartPosition.x-this._elementRect.x)/this._elementRect.width*2-1:0,dollyY=this.dollyToCursor?(dragStartPosition.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ACTION.DOLLY)===ACTION.DOLLY?this._dollyInternal(.125*deltaY,dollyX,dollyY):this._zoomInternal(.125*deltaY,dollyX,dollyY)}if((this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_ZOOM)===ACTION.TOUCH_ZOOM||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE){const dx=_v2.x-this._activePointers[1].clientX,dy=_v2.y-this._activePointers[1].clientY,distance=Math.sqrt(dx*dx+dy*dy),dollyDelta=dollyStart.y-distance;dollyStart.set(0,distance);const dollyX=this.dollyToCursor?(lastDragPosition.x-this._elementRect.x)/this._elementRect.width*2-1:0,dollyY=this.dollyToCursor?(lastDragPosition.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET?this._dollyInternal(.125*dollyDelta,dollyX,dollyY):this._zoomInternal(.125*dollyDelta,dollyX,dollyY)}((this._state&ACTION.TRUCK)===ACTION.TRUCK||(this._state&ACTION.TOUCH_TRUCK)===ACTION.TOUCH_TRUCK||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK)&&this._truckInternal(deltaX,deltaY,!1),((this._state&ACTION.OFFSET)===ACTION.OFFSET||(this._state&ACTION.TOUCH_OFFSET)===ACTION.TOUCH_OFFSET||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET)&&this._truckInternal(deltaX,deltaY,!0),this.dispatchEvent({type:"control"})},"dragging"),endDragging=__name(()=>{extractClientCoordFromEvent(this._activePointers,_v2),lastDragPosition.copy(_v2),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",onPointerMove,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",onPointerUp),this._domElement.ownerDocument.removeEventListener("touchmove",onTouchMove,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",onTouchEnd),this.dispatchEvent({type:"controlend"}))},"endDragging");this._addAllEventListeners=domElement2=>{this._domElement=domElement2,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",onPointerDown),isPointerEventsNotSupported&&this._domElement.addEventListener("mousedown",onMouseDown),isPointerEventsNotSupported&&this._domElement.addEventListener("touchstart",onTouchStart),this._domElement.addEventListener("pointercancel",onPointerUp),this._domElement.addEventListener("wheel",onMouseWheel,{passive:!1}),this._domElement.addEventListener("contextmenu",onContextMenu)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.removeEventListener("pointerdown",onPointerDown),this._domElement.removeEventListener("mousedown",onMouseDown),this._domElement.removeEventListener("touchstart",onTouchStart),this._domElement.removeEventListener("pointercancel",onPointerUp),this._domElement.removeEventListener("wheel",onMouseWheel,{passive:!1}),this._domElement.removeEventListener("contextmenu",onContextMenu),this._domElement.ownerDocument.removeEventListener("pointermove",onPointerMove,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",onMouseMove),this._domElement.ownerDocument.removeEventListener("touchmove",onTouchMove,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",onPointerUp),this._domElement.ownerDocument.removeEventListener("mouseup",onMouseUp),this._domElement.ownerDocument.removeEventListener("touchend",onTouchEnd))},this.cancel=()=>{this._state!==ACTION.NONE&&(this._state=ACTION.NONE,this._activePointers.length=0,endDragging())},domElement&&this.connect(domElement),this.update(0)}get camera(){return this._camera}set camera(camera){this._camera=camera,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(enabled){this._domElement&&(this._enabled=enabled,enabled?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(distance){this._spherical.radius===distance&&this._sphericalEnd.radius===distance||(this._spherical.radius=distance,this._sphericalEnd.radius=distance,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(azimuthAngle){this._spherical.theta===azimuthAngle&&this._sphericalEnd.theta===azimuthAngle||(this._spherical.theta=azimuthAngle,this._sphericalEnd.theta=azimuthAngle,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(polarAngle){this._spherical.phi===polarAngle&&this._sphericalEnd.phi===polarAngle||(this._spherical.phi=polarAngle,this._sphericalEnd.phi=polarAngle,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(boundaryEnclosesCamera){this._boundaryEnclosesCamera=boundaryEnclosesCamera,this._needsUpdate=!0}addEventListener(type,listener){super.addEventListener(type,listener)}removeEventListener(type,listener){super.removeEventListener(type,listener)}rotate(azimuthAngle,polarAngle,enableTransition=!1){return this.rotateTo(this._sphericalEnd.theta+azimuthAngle,this._sphericalEnd.phi+polarAngle,enableTransition)}rotateAzimuthTo(azimuthAngle,enableTransition=!1){return this.rotateTo(azimuthAngle,this._sphericalEnd.phi,enableTransition)}rotatePolarTo(polarAngle,enableTransition=!1){return this.rotateTo(this._sphericalEnd.theta,polarAngle,enableTransition)}rotateTo(azimuthAngle,polarAngle,enableTransition=!1){const theta=THREE.MathUtils.clamp(azimuthAngle,this.minAzimuthAngle,this.maxAzimuthAngle),phi=THREE.MathUtils.clamp(polarAngle,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=theta,this._sphericalEnd.phi=phi,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,enableTransition||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const resolveImmediately=!enableTransition||approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(resolveImmediately)}dolly(distance,enableTransition=!1){return this.dollyTo(this._sphericalEnd.radius-distance,enableTransition)}dollyTo(distance,enableTransition=!1){const lastRadius=this._sphericalEnd.radius,newRadius=THREE.MathUtils.clamp(distance,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){const maxDistanceByCollisionTest=this._collisionTest(),isCollided=approxEquals(maxDistanceByCollisionTest,this._spherical.radius);if(!(lastRadius>newRadius)&&isCollided)return Promise.resolve();this._sphericalEnd.radius=Math.min(newRadius,maxDistanceByCollisionTest)}else this._sphericalEnd.radius=newRadius;this._needsUpdate=!0,enableTransition||(this._spherical.radius=this._sphericalEnd.radius);const resolveImmediately=!enableTransition||approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(resolveImmediately)}zoom(zoomStep,enableTransition=!1){return this.zoomTo(this._zoomEnd+zoomStep,enableTransition)}zoomTo(zoom,enableTransition=!1){this._zoomEnd=THREE.MathUtils.clamp(zoom,this.minZoom,this.maxZoom),this._needsUpdate=!0,enableTransition||(this._zoom=this._zoomEnd);const resolveImmediately=!enableTransition||approxEquals(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(resolveImmediately)}pan(x,y,enableTransition=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(x,y,enableTransition)}truck(x,y,enableTransition=!1){this._camera.updateMatrix(),_xColumn.setFromMatrixColumn(this._camera.matrix,0),_yColumn.setFromMatrixColumn(this._camera.matrix,1),_xColumn.multiplyScalar(x),_yColumn.multiplyScalar(-y);const offset=_v3A.copy(_xColumn).add(_yColumn),to=_v3B.copy(this._targetEnd).add(offset);return this.moveTo(to.x,to.y,to.z,enableTransition)}forward(distance,enableTransition=!1){_v3A.setFromMatrixColumn(this._camera.matrix,0),_v3A.crossVectors(this._camera.up,_v3A),_v3A.multiplyScalar(distance);const to=_v3B.copy(this._targetEnd).add(_v3A);return this.moveTo(to.x,to.y,to.z,enableTransition)}moveTo(x,y,z,enableTransition=!1){const offset=_v3A.set(x,y,z).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,offset,this.boundaryFriction),this._needsUpdate=!0,enableTransition||this._target.copy(this._targetEnd);const resolveImmediately=!enableTransition||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(resolveImmediately)}fitToBox(box3OrObject,enableTransition,{cover=!1,paddingLeft=0,paddingRight=0,paddingBottom=0,paddingTop=0}={}){const promises=[],aabb=box3OrObject.isBox3?_box3A.copy(box3OrObject):_box3A.setFromObject(box3OrObject);aabb.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const theta=roundToStep(this._sphericalEnd.theta,PI_HALF),phi=roundToStep(this._sphericalEnd.phi,PI_HALF);promises.push(this.rotateTo(theta,phi,enableTransition));const normal=_v3A.setFromSpherical(this._sphericalEnd).normalize(),rotation=_quaternionA.setFromUnitVectors(normal,_AXIS_Z),viewFromPolar=approxEquals(Math.abs(normal.y),1);viewFromPolar&&rotation.multiply(_quaternionB.setFromAxisAngle(_AXIS_Y,theta)),rotation.multiply(this._yAxisUpSpaceInverse);const bb=_box3B.makeEmpty();_v3B.copy(aabb.min).applyQuaternion(rotation),bb.expandByPoint(_v3B),_v3B.copy(aabb.min).setX(aabb.max.x).applyQuaternion(rotation),bb.expandByPoint(_v3B),_v3B.copy(aabb.min).setY(aabb.max.y).applyQuaternion(rotation),bb.expandByPoint(_v3B),_v3B.copy(aabb.max).setZ(aabb.min.z).applyQuaternion(rotation),bb.expandByPoint(_v3B),_v3B.copy(aabb.min).setZ(aabb.max.z).applyQuaternion(rotation),bb.expandByPoint(_v3B),_v3B.copy(aabb.max).setY(aabb.min.y).applyQuaternion(rotation),bb.expandByPoint(_v3B),_v3B.copy(aabb.max).setX(aabb.min.x).applyQuaternion(rotation),bb.expandByPoint(_v3B),_v3B.copy(aabb.max).applyQuaternion(rotation),bb.expandByPoint(_v3B),bb.min.x-=paddingLeft,bb.min.y-=paddingBottom,bb.max.x+=paddingRight,bb.max.y+=paddingTop,rotation.setFromUnitVectors(_AXIS_Z,normal),viewFromPolar&&rotation.premultiply(_quaternionB.invert()),rotation.premultiply(this._yAxisUpSpace);const bbSize=bb.getSize(_v3A),center=bb.getCenter(_v3B).applyQuaternion(rotation);if(isPerspectiveCamera(this._camera)){const distance=this.getDistanceToFitBox(bbSize.x,bbSize.y,bbSize.z,cover);promises.push(this.moveTo(center.x,center.y,center.z,enableTransition)),promises.push(this.dollyTo(distance,enableTransition)),promises.push(this.setFocalOffset(0,0,0,enableTransition))}else if(isOrthographicCamera(this._camera)){const camera=this._camera,width=camera.right-camera.left,height=camera.top-camera.bottom,zoom=cover?Math.max(width/bbSize.x,height/bbSize.y):Math.min(width/bbSize.x,height/bbSize.y);promises.push(this.moveTo(center.x,center.y,center.z,enableTransition)),promises.push(this.zoomTo(zoom,enableTransition)),promises.push(this.setFocalOffset(0,0,0,enableTransition))}return Promise.all(promises)}fitToSphere(sphereOrMesh,enableTransition){const promises=[],boundingSphere=sphereOrMesh instanceof THREE.Sphere?_sphere.copy(sphereOrMesh):createBoundingSphere(sphereOrMesh,_sphere);if(promises.push(this.moveTo(boundingSphere.center.x,boundingSphere.center.y,boundingSphere.center.z,enableTransition)),isPerspectiveCamera(this._camera)){const distanceToFit=this.getDistanceToFitSphere(boundingSphere.radius);promises.push(this.dollyTo(distanceToFit,enableTransition))}else if(isOrthographicCamera(this._camera)){const diameter=2*boundingSphere.radius,zoom=Math.min((this._camera.right-this._camera.left)/diameter,(this._camera.top-this._camera.bottom)/diameter);promises.push(this.zoomTo(zoom,enableTransition))}return promises.push(this.setFocalOffset(0,0,0,enableTransition)),Promise.all(promises)}setLookAt(positionX,positionY,positionZ,targetX,targetY,targetZ,enableTransition=!1){const target=_v3B.set(targetX,targetY,targetZ),position=_v3A.set(positionX,positionY,positionZ);this._targetEnd.copy(target),this._sphericalEnd.setFromVector3(position.sub(target).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,enableTransition||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const resolveImmediately=!enableTransition||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold)&&approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(resolveImmediately)}lerpLookAt(positionAX,positionAY,positionAZ,targetAX,targetAY,targetAZ,positionBX,positionBY,positionBZ,targetBX,targetBY,targetBZ,t,enableTransition=!1){const targetA=_v3A.set(targetAX,targetAY,targetAZ),positionA=_v3B.set(positionAX,positionAY,positionAZ);_sphericalA.setFromVector3(positionA.sub(targetA).applyQuaternion(this._yAxisUpSpace));const targetB=_v3C.set(targetBX,targetBY,targetBZ),positionB=_v3B.set(positionBX,positionBY,positionBZ);_sphericalB.setFromVector3(positionB.sub(targetB).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(targetA.lerp(targetB,t)),this._sphericalEnd.set(_sphericalA.radius+(_sphericalB.radius-_sphericalA.radius)*t,_sphericalA.phi+(_sphericalB.phi-_sphericalA.phi)*t,_sphericalA.theta+(_sphericalB.theta-_sphericalA.theta)*t),this.normalizeRotations(),this._needsUpdate=!0,enableTransition||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const resolveImmediately=!enableTransition||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold)&&approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(resolveImmediately)}setPosition(positionX,positionY,positionZ,enableTransition=!1){return this.setLookAt(positionX,positionY,positionZ,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,enableTransition)}setTarget(targetX,targetY,targetZ,enableTransition=!1){const pos=this.getPosition(_v3A),promise=this.setLookAt(pos.x,pos.y,pos.z,targetX,targetY,targetZ,enableTransition);return this._sphericalEnd.phi=THREE.MathUtils.clamp(this.polarAngle,this.minPolarAngle,this.maxPolarAngle),promise}setFocalOffset(x,y,z,enableTransition=!1){this._focalOffsetEnd.set(x,y,z),this._needsUpdate=!0,enableTransition||this._focalOffset.copy(this._focalOffsetEnd),this._affectOffset=!approxZero(x)||!approxZero(y)||!approxZero(z);const resolveImmediately=!enableTransition||approxEquals(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&approxEquals(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&approxEquals(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(resolveImmediately)}setOrbitPoint(targetX,targetY,targetZ){this._camera.updateMatrixWorld(),_xColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),_yColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),_zColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const position=_v3A.set(targetX,targetY,targetZ),distance=position.distanceTo(this._camera.position),cameraToPoint=position.sub(this._camera.position);_xColumn.multiplyScalar(cameraToPoint.x),_yColumn.multiplyScalar(cameraToPoint.y),_zColumn.multiplyScalar(cameraToPoint.z),_v3A.copy(_xColumn).add(_yColumn).add(_zColumn),_v3A.z=_v3A.z+distance,this.dollyTo(distance,!1),this.setFocalOffset(-_v3A.x,_v3A.y,-_v3A.z,!1),this.moveTo(targetX,targetY,targetZ,!1)}setBoundary(box3){if(!box3)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(box3),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(viewportOrX,y,width,height){null!==viewportOrX?(this._viewport=this._viewport||new THREE.Vector4,"number"==typeof viewportOrX?this._viewport.set(viewportOrX,y,width,height):this._viewport.copy(viewportOrX)):this._viewport=null}getDistanceToFitBox(width,height,depth,cover=!1){if(notSupportedInOrthographicCamera(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const boundingRectAspect=width/height,fov=this._camera.getEffectiveFOV()*THREE.MathUtils.DEG2RAD,aspect=this._camera.aspect;return.5*((cover?boundingRectAspect>aspect:boundingRectAspect<aspect)?height:width/aspect)/Math.tan(.5*fov)+.5*depth}getDistanceToFitSphere(radius){if(notSupportedInOrthographicCamera(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const vFOV=this._camera.getEffectiveFOV()*THREE.MathUtils.DEG2RAD,hFOV=2*Math.atan(Math.tan(.5*vFOV)*this._camera.aspect);return radius/Math.sin(.5*(1<this._camera.aspect?vFOV:hFOV))}getTarget(out){return(out&&out.isVector3?out:new THREE.Vector3).copy(this._targetEnd)}getPosition(out){return(out&&out.isVector3?out:new THREE.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(out){return(out&&out.isVector3?out:new THREE.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%PI_2,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=PI_2),this._spherical.theta+=PI_2*Math.round((this._sphericalEnd.theta-this._spherical.theta)/PI_2)}reset(enableTransition=!1){const promises=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,enableTransition),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,enableTransition),this.zoomTo(this._zoom0,enableTransition)];return Promise.all(promises)}saveState(){this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,_AXIS_Y),quatInvertCompat(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}update(delta){const lerpRatio=Math.min((this._state===ACTION.NONE?this.dampingFactor:this.draggingDampingFactor)*delta*60,1),deltaTheta=this._sphericalEnd.theta-this._spherical.theta,deltaPhi=this._sphericalEnd.phi-this._spherical.phi,deltaRadius=this._sphericalEnd.radius-this._spherical.radius,deltaTarget=_deltaTarget.subVectors(this._targetEnd,this._target),deltaOffset=_deltaOffset.subVectors(this._focalOffsetEnd,this._focalOffset);if(approxZero(deltaTheta)&&approxZero(deltaPhi)&&approxZero(deltaRadius)&&approxZero(deltaTarget.x)&&approxZero(deltaTarget.y)&&approxZero(deltaTarget.z)&&approxZero(deltaOffset.x)&&approxZero(deltaOffset.y)&&approxZero(deltaOffset.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)):(this._spherical.set(this._spherical.radius+deltaRadius*lerpRatio,this._spherical.phi+deltaPhi*lerpRatio,this._spherical.theta+deltaTheta*lerpRatio),this._target.add(deltaTarget.multiplyScalar(lerpRatio)),this._focalOffset.add(deltaOffset.multiplyScalar(lerpRatio)),this._needsUpdate=!0),0!==this._dollyControlAmount){if(isPerspectiveCamera(this._camera)){const camera=this._camera,cameraDirection=_v3A.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),planeX=_v3B.copy(cameraDirection).cross(camera.up).normalize();0===planeX.lengthSq()&&(planeX.x=1);const planeY=_v3C.crossVectors(planeX,cameraDirection),worldToScreen=this._sphericalEnd.radius*Math.tan(camera.getEffectiveFOV()*THREE.MathUtils.DEG2RAD*.5),lerpRatio2=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,cursor=_v3A.copy(this._targetEnd).add(planeX.multiplyScalar(this._dollyControlCoord.x*worldToScreen*camera.aspect)).add(planeY.multiplyScalar(this._dollyControlCoord.y*worldToScreen));this._targetEnd.lerp(cursor,lerpRatio2)}else if(isOrthographicCamera(this._camera)){const camera=this._camera,worldCursorPosition=_v3A.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(camera.near+camera.far)/(camera.near-camera.far)).unproject(camera),quaternion=_v3B.set(0,0,-1).applyQuaternion(camera.quaternion),cursor=_v3C.copy(worldCursorPosition).add(quaternion.multiplyScalar(-worldCursorPosition.dot(camera.up))),lerpRatio2=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom,cameraDirection=_v3A.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),prevPlaneConstant=this._targetEnd.dot(cameraDirection);this._targetEnd.lerp(cursor,lerpRatio2);const newPlaneConstant=this._targetEnd.dot(cameraDirection),pullBack=cameraDirection.multiplyScalar(newPlaneConstant-prevPlaneConstant);this._targetEnd.sub(pullBack)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}const deltaZoom=this._zoomEnd-this._zoom;this._zoom+=deltaZoom*lerpRatio,this._camera.zoom!==this._zoom&&(approxZero(deltaZoom)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const maxDistance=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,maxDistance),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),this._affectOffset&&(this._camera.updateMatrixWorld(),_xColumn.setFromMatrixColumn(this._camera.matrix,0),_yColumn.setFromMatrixColumn(this._camera.matrix,1),_zColumn.setFromMatrixColumn(this._camera.matrix,2),_xColumn.multiplyScalar(this._focalOffset.x),_yColumn.multiplyScalar(-this._focalOffset.y),_zColumn.multiplyScalar(this._focalOffset.z),_v3A.copy(_xColumn).add(_yColumn).add(_zColumn),this._camera.position.add(_v3A)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),_v3A.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const updated=this._needsUpdate;return updated&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):updated?(this.dispatchEvent({type:"update"}),approxZero(deltaTheta,this.restThreshold)&&approxZero(deltaPhi,this.restThreshold)&&approxZero(deltaRadius,this.restThreshold)&&approxZero(deltaTarget.x,this.restThreshold)&&approxZero(deltaTarget.y,this.restThreshold)&&approxZero(deltaTarget.z,this.restThreshold)&&approxZero(deltaOffset.x,this.restThreshold)&&approxZero(deltaOffset.y,this.restThreshold)&&approxZero(deltaOffset.z,this.restThreshold)&&approxZero(deltaZoom,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!updated&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=updated,this._needsUpdate=!1,updated}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:infinityToMaxNumber(this.maxDistance),minZoom:this.minZoom,maxZoom:infinityToMaxNumber(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:infinityToMaxNumber(this.maxPolarAngle),minAzimuthAngle:infinityToMaxNumber(this.minAzimuthAngle),maxAzimuthAngle:infinityToMaxNumber(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:_v3A.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(json,enableTransition=!1){const obj=JSON.parse(json),position=_v3A.fromArray(obj.position);this.enabled=obj.enabled,this.minDistance=obj.minDistance,this.maxDistance=maxNumberToInfinity(obj.maxDistance),this.minZoom=obj.minZoom,this.maxZoom=maxNumberToInfinity(obj.maxZoom),this.minPolarAngle=obj.minPolarAngle,this.maxPolarAngle=maxNumberToInfinity(obj.maxPolarAngle),this.minAzimuthAngle=maxNumberToInfinity(obj.minAzimuthAngle),this.maxAzimuthAngle=maxNumberToInfinity(obj.maxAzimuthAngle),this.dampingFactor=obj.dampingFactor,this.draggingDampingFactor=obj.draggingDampingFactor,this.dollySpeed=obj.dollySpeed,this.truckSpeed=obj.truckSpeed,this.dollyToCursor=obj.dollyToCursor,this.verticalDragToForward=obj.verticalDragToForward,this._target0.fromArray(obj.target0),this._position0.fromArray(obj.position0),this._zoom0=obj.zoom0,this._focalOffset0.fromArray(obj.focalOffset0),this.moveTo(obj.target[0],obj.target[1],obj.target[2],enableTransition),_sphericalA.setFromVector3(position.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(_sphericalA.theta,_sphericalA.phi,enableTransition),this.zoomTo(obj.zoom,enableTransition),this.setFocalOffset(obj.focalOffset[0],obj.focalOffset[1],obj.focalOffset[2],enableTransition),this._needsUpdate=!0}connect(domElement){this._domElement?console.warn("camera-controls is already connected."):(domElement.setAttribute("data-camera-controls-version","1.38.1"),this._addAllEventListeners(domElement))}disconnect(){this._removeAllEventListeners(),this._domElement=void 0}dispose(){this.disconnect(),this._domElement&&"setAttribute"in this._domElement&&this._domElement.removeAttribute("data-camera-controls-version")}_findPointerById(pointerId){let pointer=null;return this._activePointers.some(activePointer=>activePointer.pointerId===pointerId&&(pointer=activePointer,!0)),pointer}_encloseToBoundary(position,offset,friction){const offsetLength2=offset.lengthSq();if(0===offsetLength2)return position;const newTarget=_v3B.copy(offset).add(position),deltaClampedTarget=this._boundary.clampPoint(newTarget,_v3C).sub(newTarget),deltaClampedTargetLength2=deltaClampedTarget.lengthSq();if(0===deltaClampedTargetLength2)return position.add(offset);if(deltaClampedTargetLength2===offsetLength2)return position;if(0===friction)return position.add(offset).add(deltaClampedTarget);{const offsetFactor=1+friction*deltaClampedTargetLength2/offset.dot(deltaClampedTarget);return position.add(_v3B.copy(offset).multiplyScalar(offsetFactor)).add(deltaClampedTarget.multiplyScalar(1-friction))}}_updateNearPlaneCorners(){if(isPerspectiveCamera(this._camera)){const camera=this._camera,near=camera.near,fov=camera.getEffectiveFOV()*THREE.MathUtils.DEG2RAD,heightHalf=Math.tan(.5*fov)*near,widthHalf=heightHalf*camera.aspect;this._nearPlaneCorners[0].set(-widthHalf,-heightHalf,0),this._nearPlaneCorners[1].set(widthHalf,-heightHalf,0),this._nearPlaneCorners[2].set(widthHalf,heightHalf,0),this._nearPlaneCorners[3].set(-widthHalf,heightHalf,0)}else if(isOrthographicCamera(this._camera)){const camera=this._camera,zoomInv=1/camera.zoom,left=camera.left*zoomInv,right=camera.right*zoomInv,top=camera.top*zoomInv,bottom=camera.bottom*zoomInv;this._nearPlaneCorners[0].set(left,top,0),this._nearPlaneCorners[1].set(right,top,0),this._nearPlaneCorners[2].set(right,bottom,0),this._nearPlaneCorners[3].set(left,bottom,0)}}_collisionTest(){let distance=1/0;if(!(this.colliderMeshes.length>=1)||notSupportedInOrthographicCamera(this._camera,"_collisionTest"))return distance;const direction=_v3A.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);_rotationMatrix.lookAt(_ORIGIN,direction,this._camera.up);for(let i=0;i<4;i++){const nearPlaneCorner=_v3B.copy(this._nearPlaneCorners[i]);nearPlaneCorner.applyMatrix4(_rotationMatrix);const origin=_v3C.addVectors(this._target,nearPlaneCorner);_raycaster.set(origin,direction),_raycaster.far=this._spherical.radius+1;const intersects=_raycaster.intersectObjects(this.colliderMeshes);0!==intersects.length&&intersects[0].distance<distance&&(distance=intersects[0].distance)}return distance}_getClientRect(target){if(!this._domElement)return;const rect=this._domElement.getBoundingClientRect();return target.x=rect.left,target.y=rect.top,this._viewport?(target.x+=this._viewport.x,target.y+=rect.height-this._viewport.w-this._viewport.y,target.width=this._viewport.z,target.height=this._viewport.w):(target.width=rect.width,target.height=rect.height),target}_createOnRestPromise(resolveImmediately){return resolveImmediately?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(resolve=>{const onResolve=__name(()=>{this.removeEventListener("rest",onResolve),resolve()},"onResolve");this.addEventListener("rest",onResolve)}))}_addAllEventListeners(_domElement){}_removeAllEventListeners(){}}function createBoundingSphere(object3d,out){const boundingSphere=out,center=boundingSphere.center;_box3A.makeEmpty(),object3d.traverseVisible(object=>{object.isMesh&&_box3A.expandByObject(object)}),_box3A.getCenter(center);let maxRadiusSq=0;return object3d.traverseVisible(object=>{if(!object.isMesh)return;const mesh=object,geometry=mesh.geometry.clone();if(geometry.applyMatrix4(mesh.matrixWorld),geometry.isBufferGeometry){const position=geometry.attributes.position;for(let i=0,l=position.count;i<l;i++)_v3A.fromBufferAttribute(position,i),maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(_v3A))}else{const position=geometry.attributes.position,vector=new THREE.Vector3;for(let i=0,l=position.count;i<l;i++)vector.fromBufferAttribute(position,i),maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(vector))}}),boundingSphere.radius=Math.sqrt(maxRadiusSq),boundingSphere}__name(CameraControls,"CameraControls"),__name(createBoundingSphere,"createBoundingSphere")},1135:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>BehaviorSubject});var _Subject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7579);class BehaviorSubject extends _Subject__WEBPACK_IMPORTED_MODULE_0__.x{constructor(_value){super(),this._value=_value}get value(){return this.getValue()}_subscribe(subscriber){const subscription=super._subscribe(subscriber);return!subscription.closed&&subscriber.next(this._value),subscription}getValue(){const{hasError,thrownError,_value}=this;if(hasError)throw thrownError;return this._throwIfClosed(),_value}next(value){super.next(this._value=value)}}__name(BehaviorSubject,"BehaviorSubject")},9751:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>Observable2});var _Subscriber__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(930),_Subscription__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(727),_symbol_observable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8822),_util_pipe__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9635),_config__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2416),_util_isFunction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(576),_util_errorContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2806);let Observable2=(()=>{class Observable3{constructor(subscribe){subscribe&&(this._subscribe=subscribe)}lift(operator){const observable=new Observable3;return observable.source=this,observable.operator=operator,observable}subscribe(observerOrNext,error,complete){const subscriber=isSubscriber(observerOrNext)?observerOrNext:new _Subscriber__WEBPACK_IMPORTED_MODULE_0__.Hp(observerOrNext,error,complete);return(0,_util_errorContext__WEBPACK_IMPORTED_MODULE_1__.x)(()=>{const{operator,source}=this;subscriber.add(operator?operator.call(subscriber,source):source?this._subscribe(subscriber):this._trySubscribe(subscriber))}),subscriber}_trySubscribe(sink){try{return this._subscribe(sink)}catch(err){sink.error(err)}}forEach(next,promiseCtor){return new(promiseCtor=getPromiseCtor(promiseCtor))((resolve,reject)=>{const subscriber=new _Subscriber__WEBPACK_IMPORTED_MODULE_0__.Hp({next:value=>{try{next(value)}catch(err){reject(err),subscriber.unsubscribe()}},error:reject,complete:resolve});this.subscribe(subscriber)})}_subscribe(subscriber){var _a;return null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber)}[_symbol_observable__WEBPACK_IMPORTED_MODULE_2__.L](){return this}pipe(...operations){return(0,_util_pipe__WEBPACK_IMPORTED_MODULE_3__.U)(operations)(this)}toPromise(promiseCtor){return new(promiseCtor=getPromiseCtor(promiseCtor))((resolve,reject)=>{let value;this.subscribe(x=>value=x,err=>reject(err),()=>resolve(value))})}}return __name(Observable3,"Observable"),Observable3.create=subscribe=>new Observable3(subscribe),Observable3})();function getPromiseCtor(promiseCtor){var _a;return null!==(_a=promiseCtor??_config__WEBPACK_IMPORTED_MODULE_4__.config.Promise)&&void 0!==_a?_a:Promise}function isObserver(value){return value&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.m)(value.next)&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.m)(value.error)&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.m)(value.complete)}function isSubscriber(value){return value&&value instanceof _Subscriber__WEBPACK_IMPORTED_MODULE_0__.Lv||isObserver(value)&&(0,_Subscription__WEBPACK_IMPORTED_MODULE_6__.Nn)(value)}__name(getPromiseCtor,"getPromiseCtor"),__name(isObserver,"isObserver"),__name(isSubscriber,"isSubscriber")},4707:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>ReplaySubject});var _Subject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7579),_scheduler_dateTimestampProvider__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6063);class ReplaySubject extends _Subject__WEBPACK_IMPORTED_MODULE_0__.x{constructor(_bufferSize=1/0,_windowTime=1/0,_timestampProvider=_scheduler_dateTimestampProvider__WEBPACK_IMPORTED_MODULE_1__.l){super(),this._bufferSize=_bufferSize,this._windowTime=_windowTime,this._timestampProvider=_timestampProvider,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=_windowTime===1/0,this._bufferSize=Math.max(1,_bufferSize),this._windowTime=Math.max(1,_windowTime)}next(value){const{isStopped,_buffer,_infiniteTimeWindow,_timestampProvider,_windowTime}=this;isStopped||(_buffer.push(value),!_infiniteTimeWindow&&_buffer.push(_timestampProvider.now()+_windowTime)),this._trimBuffer(),super.next(value)}_subscribe(subscriber){this._throwIfClosed(),this._trimBuffer();const subscription=this._innerSubscribe(subscriber),{_infiniteTimeWindow,_buffer}=this,copy=_buffer.slice();for(let i=0;i<copy.length&&!subscriber.closed;i+=_infiniteTimeWindow?1:2)subscriber.next(copy[i]);return this._checkFinalizedStatuses(subscriber),subscription}_trimBuffer(){const{_bufferSize,_timestampProvider,_buffer,_infiniteTimeWindow}=this,adjustedBufferSize=(_infiniteTimeWindow?1:2)*_bufferSize;if(_bufferSize<1/0&&adjustedBufferSize<_buffer.length&&_buffer.splice(0,_buffer.length-adjustedBufferSize),!_infiniteTimeWindow){const now=_timestampProvider.now();let last=0;for(let i=1;i<_buffer.length&&_buffer[i]<=now;i+=2)last=i;last&&_buffer.splice(0,last+1)}}}__name(ReplaySubject,"ReplaySubject")},7579:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>Subject});var Observable2=__webpack_require__(9751),Subscription=__webpack_require__(727);const ObjectUnsubscribedError=(0,__webpack_require__(3888).d)(_super=>__name(function(){_super(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"},"ObjectUnsubscribedErrorImpl"));var arrRemove=__webpack_require__(8737),errorContext=__webpack_require__(2806);let Subject=(()=>{class Subject2 extends Observable2.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(operator){const subject=new AnonymousSubject(this,this);return subject.operator=operator,subject}_throwIfClosed(){if(this.closed)throw new ObjectUnsubscribedError}next(value){(0,errorContext.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const observer of this.currentObservers)observer.next(value)}})}error(err){(0,errorContext.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=err;const{observers}=this;for(;observers.length;)observers.shift().error(err)}})}complete(){(0,errorContext.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers}=this;for(;observers.length;)observers.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var _a;return(null===(_a=this.observers)||void 0===_a?void 0:_a.length)>0}_trySubscribe(subscriber){return this._throwIfClosed(),super._trySubscribe(subscriber)}_subscribe(subscriber){return this._throwIfClosed(),this._checkFinalizedStatuses(subscriber),this._innerSubscribe(subscriber)}_innerSubscribe(subscriber){const{hasError,isStopped,observers}=this;return hasError||isStopped?Subscription.Lc:(this.currentObservers=null,observers.push(subscriber),new Subscription.w0(()=>{this.currentObservers=null,(0,arrRemove.P)(observers,subscriber)}))}_checkFinalizedStatuses(subscriber){const{hasError,thrownError,isStopped}=this;hasError?subscriber.error(thrownError):isStopped&&subscriber.complete()}asObservable(){const observable=new Observable2.y;return observable.source=this,observable}}return __name(Subject2,"Subject"),Subject2.create=(destination,source)=>new AnonymousSubject(destination,source),Subject2})();class AnonymousSubject extends Subject{constructor(destination,source){super(),this.destination=destination,this.source=source}next(value){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.next)||void 0===_b||_b.call(_a,value)}error(err){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.error)||void 0===_b||_b.call(_a,err)}complete(){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.complete)||void 0===_b||_b.call(_a)}_subscribe(subscriber){var _a,_b;return null!==(_b=null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber))&&void 0!==_b?_b:Subscription.Lc}}__name(AnonymousSubject,"AnonymousSubject")},930:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Hp:()=>SafeSubscriber,Lv:()=>Subscriber});var isFunction=__webpack_require__(576),Subscription=__webpack_require__(727),config=__webpack_require__(2416),reportUnhandledError=__webpack_require__(7849),noop=__webpack_require__(5032);const COMPLETE_NOTIFICATION=createNotification("C",void 0,void 0);function errorNotification(error){return createNotification("E",void 0,error)}function nextNotification(value){return createNotification("N",value,void 0)}function createNotification(kind,value,error){return{kind,value,error}}__name(errorNotification,"errorNotification"),__name(nextNotification,"nextNotification"),__name(createNotification,"createNotification");var timeoutProvider=__webpack_require__(3410),errorContext=__webpack_require__(2806);class Subscriber extends Subscription.w0{constructor(destination){super(),this.isStopped=!1,destination?(this.destination=destination,(0,Subscription.Nn)(destination)&&destination.add(this)):this.destination=EMPTY_OBSERVER}static create(next,error,complete){return new SafeSubscriber(next,error,complete)}next(value){this.isStopped?handleStoppedNotification(nextNotification(value),this):this._next(value)}error(err){this.isStopped?handleStoppedNotification(errorNotification(err),this):(this.isStopped=!0,this._error(err))}complete(){this.isStopped?handleStoppedNotification(COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(value){this.destination.next(value)}_error(err){try{this.destination.error(err)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}__name(Subscriber,"Subscriber");const _bind=Function.prototype.bind;function bind(fn,thisArg){return _bind.call(fn,thisArg)}__name(bind,"bind");class ConsumerObserver{constructor(partialObserver){this.partialObserver=partialObserver}next(value){const{partialObserver}=this;if(partialObserver.next)try{partialObserver.next(value)}catch(error){handleUnhandledError(error)}}error(err){const{partialObserver}=this;if(partialObserver.error)try{partialObserver.error(err)}catch(error){handleUnhandledError(error)}else handleUnhandledError(err)}complete(){const{partialObserver}=this;if(partialObserver.complete)try{partialObserver.complete()}catch(error){handleUnhandledError(error)}}}__name(ConsumerObserver,"ConsumerObserver");class SafeSubscriber extends Subscriber{constructor(observerOrNext,error,complete){let partialObserver;if(super(),(0,isFunction.m)(observerOrNext)||!observerOrNext)partialObserver={next:observerOrNext??void 0,error:error??void 0,complete:complete??void 0};else{let context;this&&config.config.useDeprecatedNextContext?(context=Object.create(observerOrNext),context.unsubscribe=()=>this.unsubscribe(),partialObserver={next:observerOrNext.next&&bind(observerOrNext.next,context),error:observerOrNext.error&&bind(observerOrNext.error,context),complete:observerOrNext.complete&&bind(observerOrNext.complete,context)}):partialObserver=observerOrNext}this.destination=new ConsumerObserver(partialObserver)}}function handleUnhandledError(error){config.config.useDeprecatedSynchronousErrorHandling?(0,errorContext.O)(error):(0,reportUnhandledError.h)(error)}function defaultErrorHandler(err){throw err}function handleStoppedNotification(notification,subscriber){const{onStoppedNotification}=config.config;onStoppedNotification&&timeoutProvider.z.setTimeout(()=>onStoppedNotification(notification,subscriber))}__name(SafeSubscriber,"SafeSubscriber"),__name(handleUnhandledError,"handleUnhandledError"),__name(defaultErrorHandler,"defaultErrorHandler"),__name(handleStoppedNotification,"handleStoppedNotification");const EMPTY_OBSERVER={closed:!0,next:noop.Z,error:defaultErrorHandler,complete:noop.Z}},727:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Lc:()=>EMPTY_SUBSCRIPTION,w0:()=>Subscription,Nn:()=>isSubscription});var isFunction=__webpack_require__(576);const UnsubscriptionError=(0,__webpack_require__(3888).d)(_super=>__name(function(errors){_super(this),this.message=errors?`${errors.length} errors occurred during unsubscription:\n${errors.map((err,i)=>`${i+1}) ${err.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=errors},"UnsubscriptionErrorImpl"));var arrRemove=__webpack_require__(8737);class Subscription{constructor(initialTeardown){this.initialTeardown=initialTeardown,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let errors;if(!this.closed){this.closed=!0;const{_parentage}=this;if(_parentage)if(this._parentage=null,Array.isArray(_parentage))for(const parent of _parentage)parent.remove(this);else _parentage.remove(this);const{initialTeardown:initialFinalizer}=this;if((0,isFunction.m)(initialFinalizer))try{initialFinalizer()}catch(e){errors=e instanceof UnsubscriptionError?e.errors:[e]}const{_finalizers}=this;if(_finalizers){this._finalizers=null;for(const finalizer of _finalizers)try{execFinalizer(finalizer)}catch(err){errors=errors??[],err instanceof UnsubscriptionError?errors=[...errors,...err.errors]:errors.push(err)}}if(errors)throw new UnsubscriptionError(errors)}}add(teardown){var _a;if(teardown&&teardown!==this)if(this.closed)execFinalizer(teardown);else{if(teardown instanceof Subscription){if(teardown.closed||teardown._hasParent(this))return;teardown._addParent(this)}(this._finalizers=null!==(_a=this._finalizers)&&void 0!==_a?_a:[]).push(teardown)}}_hasParent(parent){const{_parentage}=this;return _parentage===parent||Array.isArray(_parentage)&&_parentage.includes(parent)}_addParent(parent){const{_parentage}=this;this._parentage=Array.isArray(_parentage)?(_parentage.push(parent),_parentage):_parentage?[_parentage,parent]:parent}_removeParent(parent){const{_parentage}=this;_parentage===parent?this._parentage=null:Array.isArray(_parentage)&&(0,arrRemove.P)(_parentage,parent)}remove(teardown){const{_finalizers}=this;_finalizers&&(0,arrRemove.P)(_finalizers,teardown),teardown instanceof Subscription&&teardown._removeParent(this)}}__name(Subscription,"Subscription"),Subscription.EMPTY=(()=>{const empty=new Subscription;return empty.closed=!0,empty})();const EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(value){return value instanceof Subscription||value&&"closed"in value&&(0,isFunction.m)(value.remove)&&(0,isFunction.m)(value.add)&&(0,isFunction.m)(value.unsubscribe)}function execFinalizer(finalizer){(0,isFunction.m)(finalizer)?finalizer():finalizer.unsubscribe()}__name(isSubscription,"isSubscription"),__name(execFinalizer,"execFinalizer")},2416:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{config:()=>config});const config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3905:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>firstValueFrom});var _util_EmptyError__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6805),_Subscriber__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(930);function firstValueFrom(source,config){const hasConfig="object"==typeof config;return new Promise((resolve,reject)=>{const subscriber=new _Subscriber__WEBPACK_IMPORTED_MODULE_0__.Hp({next:value=>{resolve(value),subscriber.unsubscribe()},error:reject,complete:()=>{hasConfig?resolve(config.defaultValue):reject(new _util_EmptyError__WEBPACK_IMPORTED_MODULE_1__.K)}});source.subscribe(subscriber)})}__name(firstValueFrom,"firstValueFrom")},7272:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>concat});var mergeAll=__webpack_require__(8189);function concatAll(){return(0,mergeAll.J)(1)}__name(concatAll,"concatAll");var util_args=__webpack_require__(3269),from=__webpack_require__(2076);function concat(...args){return concatAll()((0,from.D)(args,(0,util_args.yG)(args)))}__name(concat,"concat")},515:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>EMPTY});const EMPTY=new(__webpack_require__(9751).y)(subscriber=>subscriber.complete());function emptyScheduled(scheduler){return new Observable(subscriber=>scheduler.schedule(()=>subscriber.complete()))}__name(function empty(scheduler){return scheduler?emptyScheduled(scheduler):EMPTY},"empty"),__name(emptyScheduled,"emptyScheduled")},2076:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>from});var innerFrom=__webpack_require__(8421),executeSchedule=__webpack_require__(9672),lift=__webpack_require__(4482),OperatorSubscriber=__webpack_require__(5403);function observeOn(scheduler,delay=0){return(0,lift.e)((source,subscriber)=>{source.subscribe((0,OperatorSubscriber.x)(subscriber,value=>(0,executeSchedule.f)(subscriber,scheduler,()=>subscriber.next(value),delay),()=>(0,executeSchedule.f)(subscriber,scheduler,()=>subscriber.complete(),delay),err=>(0,executeSchedule.f)(subscriber,scheduler,()=>subscriber.error(err),delay)))})}function subscribeOn(scheduler,delay=0){return(0,lift.e)((source,subscriber)=>{subscriber.add(scheduler.schedule(()=>source.subscribe(subscriber),delay))})}function scheduleObservable(input,scheduler){return(0,innerFrom.Xf)(input).pipe(subscribeOn(scheduler),observeOn(scheduler))}function schedulePromise(input,scheduler){return(0,innerFrom.Xf)(input).pipe(subscribeOn(scheduler),observeOn(scheduler))}__name(observeOn,"observeOn"),__name(subscribeOn,"subscribeOn"),__name(scheduleObservable,"scheduleObservable"),__name(schedulePromise,"schedulePromise");var Observable2=__webpack_require__(9751);function scheduleArray(input,scheduler){return new Observable2.y(subscriber=>{let i=0;return scheduler.schedule(function(){i===input.length?subscriber.complete():(subscriber.next(input[i++]),subscriber.closed||this.schedule())})})}__name(scheduleArray,"scheduleArray");var symbol_iterator=__webpack_require__(2202),isFunction=__webpack_require__(576);function scheduleIterable(input,scheduler){return new Observable2.y(subscriber=>{let iterator;return(0,executeSchedule.f)(subscriber,scheduler,()=>{iterator=input[symbol_iterator.h](),(0,executeSchedule.f)(subscriber,scheduler,()=>{let value,done;try{({value,done}=iterator.next())}catch(err){return void subscriber.error(err)}done?subscriber.complete():subscriber.next(value)},0,!0)}),()=>(0,isFunction.m)(iterator?.return)&&iterator.return()})}function scheduleAsyncIterable(input,scheduler){if(!input)throw new Error("Iterable cannot be null");return new Observable2.y(subscriber=>{(0,executeSchedule.f)(subscriber,scheduler,()=>{const iterator=input[Symbol.asyncIterator]();(0,executeSchedule.f)(subscriber,scheduler,()=>{iterator.next().then(result=>{result.done?subscriber.complete():subscriber.next(result.value)})},0,!0)})})}__name(scheduleIterable,"scheduleIterable"),__name(scheduleAsyncIterable,"scheduleAsyncIterable");var isInteropObservable=__webpack_require__(3670),isPromise=__webpack_require__(8239),isArrayLike=__webpack_require__(1144),isIterable=__webpack_require__(6495),isAsyncIterable=__webpack_require__(2206),throwUnobservableError=__webpack_require__(4532),isReadableStreamLike=__webpack_require__(3260);function scheduleReadableStreamLike(input,scheduler){return scheduleAsyncIterable((0,isReadableStreamLike.Q)(input),scheduler)}function scheduled(input,scheduler){if(null!=input){if((0,isInteropObservable.c)(input))return scheduleObservable(input,scheduler);if((0,isArrayLike.z)(input))return scheduleArray(input,scheduler);if((0,isPromise.t)(input))return schedulePromise(input,scheduler);if((0,isAsyncIterable.D)(input))return scheduleAsyncIterable(input,scheduler);if((0,isIterable.T)(input))return scheduleIterable(input,scheduler);if((0,isReadableStreamLike.L)(input))return scheduleReadableStreamLike(input,scheduler)}throw(0,throwUnobservableError.z)(input)}function from(input,scheduler){return scheduler?scheduled(input,scheduler):(0,innerFrom.Xf)(input)}__name(scheduleReadableStreamLike,"scheduleReadableStreamLike"),__name(scheduled,"scheduled"),__name(from,"from")},8421:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Xf:()=>innerFrom});var tslib__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(655),_util_isArrayLike__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1144),_util_isPromise__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8239),_Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9751),_util_isInteropObservable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3670),_util_isAsyncIterable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2206),_util_throwUnobservableError__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4532),_util_isIterable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6495),_util_isReadableStreamLike__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3260),_util_isFunction__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(576),_util_reportUnhandledError__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7849),_symbol_observable__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8822);function innerFrom(input){if(input instanceof _Observable__WEBPACK_IMPORTED_MODULE_0__.y)return input;if(null!=input){if((0,_util_isInteropObservable__WEBPACK_IMPORTED_MODULE_1__.c)(input))return fromInteropObservable(input);if((0,_util_isArrayLike__WEBPACK_IMPORTED_MODULE_2__.z)(input))return fromArrayLike(input);if((0,_util_isPromise__WEBPACK_IMPORTED_MODULE_3__.t)(input))return fromPromise(input);if((0,_util_isAsyncIterable__WEBPACK_IMPORTED_MODULE_4__.D)(input))return fromAsyncIterable(input);if((0,_util_isIterable__WEBPACK_IMPORTED_MODULE_5__.T)(input))return fromIterable(input);if((0,_util_isReadableStreamLike__WEBPACK_IMPORTED_MODULE_6__.L)(input))return fromReadableStreamLike(input)}throw(0,_util_throwUnobservableError__WEBPACK_IMPORTED_MODULE_7__.z)(input)}function fromInteropObservable(obj){return new _Observable__WEBPACK_IMPORTED_MODULE_0__.y(subscriber=>{const obs=obj[_symbol_observable__WEBPACK_IMPORTED_MODULE_8__.L]();if((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_9__.m)(obs.subscribe))return obs.subscribe(subscriber);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike(array){return new _Observable__WEBPACK_IMPORTED_MODULE_0__.y(subscriber=>{for(let i=0;i<array.length&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.complete()})}function fromPromise(promise){return new _Observable__WEBPACK_IMPORTED_MODULE_0__.y(subscriber=>{promise.then(value=>{subscriber.closed||(subscriber.next(value),subscriber.complete())},err=>subscriber.error(err)).then(null,_util_reportUnhandledError__WEBPACK_IMPORTED_MODULE_10__.h)})}function fromIterable(iterable){return new _Observable__WEBPACK_IMPORTED_MODULE_0__.y(subscriber=>{for(const value of iterable)if(subscriber.next(value),subscriber.closed)return;subscriber.complete()})}function fromAsyncIterable(asyncIterable){return new _Observable__WEBPACK_IMPORTED_MODULE_0__.y(subscriber=>{process2(asyncIterable,subscriber).catch(err=>subscriber.error(err))})}function fromReadableStreamLike(readableStream){return fromAsyncIterable((0,_util_isReadableStreamLike__WEBPACK_IMPORTED_MODULE_6__.Q)(readableStream))}function process2(asyncIterable,subscriber){var asyncIterable_1,asyncIterable_1_1,e_1,_a;return(0,tslib__WEBPACK_IMPORTED_MODULE_11__.mG)(this,void 0,void 0,function*(){try{for(asyncIterable_1=(0,tslib__WEBPACK_IMPORTED_MODULE_11__.KL)(asyncIterable);!(asyncIterable_1_1=yield asyncIterable_1.next()).done;)if(subscriber.next(asyncIterable_1_1.value),subscriber.closed)return}catch(e_1_1){e_1={error:e_1_1}}finally{try{asyncIterable_1_1&&!asyncIterable_1_1.done&&(_a=asyncIterable_1.return)&&(yield _a.call(asyncIterable_1))}finally{if(e_1)throw e_1.error}}subscriber.complete()})}__name(innerFrom,"innerFrom"),__name(fromInteropObservable,"fromInteropObservable"),__name(fromArrayLike,"fromArrayLike"),__name(fromPromise,"fromPromise"),__name(fromIterable,"fromIterable"),__name(fromAsyncIterable,"fromAsyncIterable"),__name(fromReadableStreamLike,"fromReadableStreamLike"),__name(process2,"process")},6451:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>merge});var _operators_mergeAll__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8189),_innerFrom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8421),_empty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(515),_util_args__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3269),_from__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2076);function merge(...args){const scheduler=(0,_util_args__WEBPACK_IMPORTED_MODULE_0__.yG)(args),concurrent=(0,_util_args__WEBPACK_IMPORTED_MODULE_0__._6)(args,1/0),sources=args;return sources.length?1===sources.length?(0,_innerFrom__WEBPACK_IMPORTED_MODULE_2__.Xf)(sources[0]):(0,_operators_mergeAll__WEBPACK_IMPORTED_MODULE_3__.J)(concurrent)((0,_from__WEBPACK_IMPORTED_MODULE_4__.D)(sources,scheduler)):_empty__WEBPACK_IMPORTED_MODULE_1__.E}__name(merge,"merge")},9646:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{of:()=>of2});var _util_args__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3269),_from__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2076);function of2(...args){const scheduler=(0,_util_args__WEBPACK_IMPORTED_MODULE_0__.yG)(args);return(0,_from__WEBPACK_IMPORTED_MODULE_1__.D)(args,scheduler)}__name(of2,"of")},5403:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>createOperatorSubscriber});var _Subscriber__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(930);function createOperatorSubscriber(destination,onNext,onComplete,onError,onFinalize){return new OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize)}__name(createOperatorSubscriber,"createOperatorSubscriber");class OperatorSubscriber extends _Subscriber__WEBPACK_IMPORTED_MODULE_0__.Lv{constructor(destination,onNext,onComplete,onError,onFinalize,shouldUnsubscribe){super(destination),this.onFinalize=onFinalize,this.shouldUnsubscribe=shouldUnsubscribe,this._next=onNext?function(value){try{onNext(value)}catch(err){destination.error(err)}}:super._next,this._error=onError?function(err){try{onError(err)}catch(err2){destination.error(err2)}finally{this.unsubscribe()}}:super._error,this._complete=onComplete?function(){try{onComplete()}catch(err){destination.error(err)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed}=this;super.unsubscribe(),!closed&&(null===(_a=this.onFinalize)||void 0===_a||_a.call(this))}}}__name(OperatorSubscriber,"OperatorSubscriber")},4351:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>concatMap});var _mergeMap__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5577),_util_isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(576);function concatMap(project,resultSelector){return(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(resultSelector)?(0,_mergeMap__WEBPACK_IMPORTED_MODULE_1__.z)(project,resultSelector,1):(0,_mergeMap__WEBPACK_IMPORTED_MODULE_1__.z)(project,1)}__name(concatMap,"concatMap")},6590:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>defaultIfEmpty});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4482),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5403);function defaultIfEmpty(defaultValue){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.e)((source,subscriber)=>{let hasValue=!1;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.x)(subscriber,value=>{hasValue=!0,subscriber.next(value)},()=>{hasValue||subscriber.next(defaultValue),subscriber.complete()}))})}__name(defaultIfEmpty,"defaultIfEmpty")},9300:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>filter});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4482),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5403);function filter(predicate,thisArg){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.e)((source,subscriber)=>{let index=0;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.x)(subscriber,value=>predicate.call(thisArg,value,index++)&&subscriber.next(value)))})}__name(filter,"filter")},590:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>first2});var _util_EmptyError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6805),_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9300),_take__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5698),_defaultIfEmpty__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6590),_throwIfEmpty__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8068),_util_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4671);function first2(predicate,defaultValue){const hasDefaultValue=arguments.length>=2;return source=>source.pipe(predicate?(0,_filter__WEBPACK_IMPORTED_MODULE_0__.h)((v,i)=>predicate(v,i,source)):_util_identity__WEBPACK_IMPORTED_MODULE_1__.y,(0,_take__WEBPACK_IMPORTED_MODULE_2__.q)(1),hasDefaultValue?(0,_defaultIfEmpty__WEBPACK_IMPORTED_MODULE_3__.d)(defaultValue):(0,_throwIfEmpty__WEBPACK_IMPORTED_MODULE_4__.T)(()=>new _util_EmptyError__WEBPACK_IMPORTED_MODULE_5__.K))}__name(first2,"first")},4004:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>map});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4482),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5403);function map(project,thisArg){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.e)((source,subscriber)=>{let index=0;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.x)(subscriber,value=>{subscriber.next(project.call(thisArg,value,index++))}))})}__name(map,"map")},9718:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>mapTo});var _map__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4004);function mapTo(value){return(0,_map__WEBPACK_IMPORTED_MODULE_0__.U)(()=>value)}__name(mapTo,"mapTo")},8189:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>mergeAll});var _mergeMap__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5577),_util_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4671);function mergeAll(concurrent=1/0){return(0,_mergeMap__WEBPACK_IMPORTED_MODULE_0__.z)(_util_identity__WEBPACK_IMPORTED_MODULE_1__.y,concurrent)}__name(mergeAll,"mergeAll")},5577:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>mergeMap});var map=__webpack_require__(4004),innerFrom=__webpack_require__(8421),lift=__webpack_require__(4482),executeSchedule=__webpack_require__(9672),OperatorSubscriber=__webpack_require__(5403);function mergeInternals(source,subscriber,project,concurrent,onBeforeNext,expand,innerSubScheduler,additionalFinalizer){const buffer=[];let active=0,index=0,isComplete=!1;const checkComplete=__name(()=>{isComplete&&!buffer.length&&!active&&subscriber.complete()},"checkComplete"),outerNext=__name(value=>active<concurrent?doInnerSub(value):buffer.push(value),"outerNext"),doInnerSub=__name(value=>{expand&&subscriber.next(value),active++;let innerComplete=!1;(0,innerFrom.Xf)(project(value,index++)).subscribe((0,OperatorSubscriber.x)(subscriber,innerValue=>{onBeforeNext?.(innerValue),expand?outerNext(innerValue):subscriber.next(innerValue)},()=>{innerComplete=!0},void 0,()=>{if(innerComplete)try{for(active--;buffer.length&&active<concurrent;){const bufferedValue=buffer.shift();innerSubScheduler?(0,executeSchedule.f)(subscriber,innerSubScheduler,()=>doInnerSub(bufferedValue)):doInnerSub(bufferedValue)}checkComplete()}catch(err){subscriber.error(err)}}))},"doInnerSub");return source.subscribe((0,OperatorSubscriber.x)(subscriber,outerNext,()=>{isComplete=!0,checkComplete()})),()=>{additionalFinalizer?.()}}__name(mergeInternals,"mergeInternals");var isFunction=__webpack_require__(576);function mergeMap(project,resultSelector,concurrent=1/0){return(0,isFunction.m)(resultSelector)?mergeMap((a,i)=>(0,map.U)((b,ii)=>resultSelector(a,b,i,ii))((0,innerFrom.Xf)(project(a,i))),concurrent):("number"==typeof resultSelector&&(concurrent=resultSelector),(0,lift.e)((source,subscriber)=>mergeInternals(source,subscriber,project,concurrent)))}__name(mergeMap,"mergeMap")},3099:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>share});var _observable_innerFrom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8421),_Subject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7579),_Subscriber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(930),_util_lift__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4482);function share(options={}){const{connector=__name(()=>new _Subject__WEBPACK_IMPORTED_MODULE_0__.x,"connector"),resetOnError=!0,resetOnComplete=!0,resetOnRefCountZero=!0}=options;return wrapperSource=>{let connection,resetConnection,subject,refCount=0,hasCompleted=!1,hasErrored=!1;const cancelReset=__name(()=>{resetConnection?.unsubscribe(),resetConnection=void 0},"cancelReset"),reset=__name(()=>{cancelReset(),connection=subject=void 0,hasCompleted=hasErrored=!1},"reset"),resetAndUnsubscribe=__name(()=>{const conn=connection;reset(),conn?.unsubscribe()},"resetAndUnsubscribe");return(0,_util_lift__WEBPACK_IMPORTED_MODULE_1__.e)((source,subscriber)=>{refCount++,!hasErrored&&!hasCompleted&&cancelReset();const dest=subject=subject??connector();subscriber.add(()=>{refCount--,0===refCount&&!hasErrored&&!hasCompleted&&(resetConnection=handleReset(resetAndUnsubscribe,resetOnRefCountZero))}),dest.subscribe(subscriber),!connection&&refCount>0&&(connection=new _Subscriber__WEBPACK_IMPORTED_MODULE_2__.Hp({next:value=>dest.next(value),error:err=>{hasErrored=!0,cancelReset(),resetConnection=handleReset(reset,resetOnError,err),dest.error(err)},complete:()=>{hasCompleted=!0,cancelReset(),resetConnection=handleReset(reset,resetOnComplete),dest.complete()}}),(0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_3__.Xf)(source).subscribe(connection))})(wrapperSource)}}function handleReset(reset,on,...args){if(!0===on)return void reset();if(!1===on)return;const onSubscriber=new _Subscriber__WEBPACK_IMPORTED_MODULE_2__.Hp({next:()=>{onSubscriber.unsubscribe(),reset()}});return(0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_3__.Xf)(on(...args)).subscribe(onSubscriber)}__name(share,"share"),__name(handleReset,"handleReset")},8675:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>startWith});var _observable_concat__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7272),_util_args__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3269),_util_lift__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4482);function startWith(...values){const scheduler=(0,_util_args__WEBPACK_IMPORTED_MODULE_0__.yG)(values);return(0,_util_lift__WEBPACK_IMPORTED_MODULE_1__.e)((source,subscriber)=>{(scheduler?(0,_observable_concat__WEBPACK_IMPORTED_MODULE_2__.z)(values,source,scheduler):(0,_observable_concat__WEBPACK_IMPORTED_MODULE_2__.z)(values,source)).subscribe(subscriber)})}__name(startWith,"startWith")},3900:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>switchMap});var _observable_innerFrom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8421),_util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4482),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5403);function switchMap(project,resultSelector){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.e)((source,subscriber)=>{let innerSubscriber=null,index=0,isComplete=!1;const checkComplete=__name(()=>isComplete&&!innerSubscriber&&subscriber.complete(),"checkComplete");source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.x)(subscriber,value=>{innerSubscriber?.unsubscribe();let innerIndex=0;const outerIndex=index++;(0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_2__.Xf)(project(value,outerIndex)).subscribe(innerSubscriber=(0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.x)(subscriber,innerValue=>subscriber.next(resultSelector?resultSelector(value,innerValue,outerIndex,innerIndex++):innerValue),()=>{innerSubscriber=null,checkComplete()}))},()=>{isComplete=!0,checkComplete()}))})}__name(switchMap,"switchMap")},5698:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>take});var _observable_empty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(515),_util_lift__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4482),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5403);function take(count){return count<=0?()=>_observable_empty__WEBPACK_IMPORTED_MODULE_0__.E:(0,_util_lift__WEBPACK_IMPORTED_MODULE_1__.e)((source,subscriber)=>{let seen=0;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__.x)(subscriber,value=>{++seen<=count&&(subscriber.next(value),count<=seen&&subscriber.complete())}))})}__name(take,"take")},8068:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>throwIfEmpty});var _util_EmptyError__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6805),_util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4482),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5403);function throwIfEmpty(errorFactory=defaultErrorFactory){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.e)((source,subscriber)=>{let hasValue=!1;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.x)(subscriber,value=>{hasValue=!0,subscriber.next(value)},()=>hasValue?subscriber.complete():subscriber.error(errorFactory())))})}function defaultErrorFactory(){return new _util_EmptyError__WEBPACK_IMPORTED_MODULE_2__.K}__name(throwIfEmpty,"throwIfEmpty"),__name(defaultErrorFactory,"defaultErrorFactory")},6063:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>dateTimestampProvider});const dateTimestampProvider={now:()=>(dateTimestampProvider.delegate||Date).now(),delegate:void 0}},3410:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>timeoutProvider});const timeoutProvider={setTimeout(handler,timeout,...args){const{delegate}=timeoutProvider;return delegate?.setTimeout?delegate.setTimeout(handler,timeout,...args):setTimeout(handler,timeout,...args)},clearTimeout(handle){const{delegate}=timeoutProvider;return(delegate?.clearTimeout||clearTimeout)(handle)},delegate:void 0}},2202:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}__webpack_require__.d(__webpack_exports__,{h:()=>iterator}),__name(getSymbolIterator,"getSymbolIterator");const iterator=getSymbolIterator()},8822:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>observable});const observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>EmptyError});const EmptyError=(0,__webpack_require__(3888).d)(_super=>__name(function(){_super(this),this.name="EmptyError",this.message="no elements in sequence"},"EmptyErrorImpl"))},3269:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_6:()=>popNumber,jO:()=>popResultSelector,yG:()=>popScheduler});var _isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(576),_isScheduler__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3532);function last(arr){return arr[arr.length-1]}function popResultSelector(args){return(0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(last(args))?args.pop():void 0}function popScheduler(args){return(0,_isScheduler__WEBPACK_IMPORTED_MODULE_1__.K)(last(args))?args.pop():void 0}function popNumber(args,defaultValue){return"number"==typeof last(args)?args.pop():defaultValue}__name(last,"last"),__name(popResultSelector,"popResultSelector"),__name(popScheduler,"popScheduler"),__name(popNumber,"popNumber")},4742:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>argsArgArrayOrObject});const{isArray}=Array,{getPrototypeOf,prototype:objectProto,keys:getKeys}=Object;function argsArgArrayOrObject(args){if(1===args.length){const first2=args[0];if(isArray(first2))return{args:first2,keys:null};if(isPOJO(first2)){const keys=getKeys(first2);return{args:keys.map(key=>first2[key]),keys}}}return{args,keys:null}}function isPOJO(obj){return obj&&"object"==typeof obj&&getPrototypeOf(obj)===objectProto}__name(argsArgArrayOrObject,"argsArgArrayOrObject"),__name(isPOJO,"isPOJO")},8737:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function arrRemove(arr,item){if(arr){const index=arr.indexOf(item);0<=index&&arr.splice(index,1)}}__webpack_require__.d(__webpack_exports__,{P:()=>arrRemove}),__name(arrRemove,"arrRemove")},3888:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function createErrorClass(createImpl){const ctorFunc=createImpl(__name(instance=>{Error.call(instance),instance.stack=(new Error).stack},"_super"));return ctorFunc.prototype=Object.create(Error.prototype),ctorFunc.prototype.constructor=ctorFunc,ctorFunc}__webpack_require__.d(__webpack_exports__,{d:()=>createErrorClass}),__name(createErrorClass,"createErrorClass")},1810:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function createObject(keys,values){return keys.reduce((result,key,i)=>(result[key]=values[i],result),{})}__webpack_require__.d(__webpack_exports__,{n:()=>createObject}),__name(createObject,"createObject")},2806:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>captureError,x:()=>errorContext});var _config__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2416);let context=null;function errorContext(cb){if(_config__WEBPACK_IMPORTED_MODULE_0__.config.useDeprecatedSynchronousErrorHandling){const isRoot=!context;if(isRoot&&(context={errorThrown:!1,error:null}),cb(),isRoot){const{errorThrown,error}=context;if(context=null,errorThrown)throw error}}else cb()}function captureError(err){_config__WEBPACK_IMPORTED_MODULE_0__.config.useDeprecatedSynchronousErrorHandling&&context&&(context.errorThrown=!0,context.error=err)}__name(errorContext,"errorContext"),__name(captureError,"captureError")},9672:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function executeSchedule(parentSubscription,scheduler,work,delay=0,repeat=!1){const scheduleSubscription=scheduler.schedule(function(){work(),repeat?parentSubscription.add(this.schedule(null,delay)):this.unsubscribe()},delay);if(parentSubscription.add(scheduleSubscription),!repeat)return scheduleSubscription}__webpack_require__.d(__webpack_exports__,{f:()=>executeSchedule}),__name(executeSchedule,"executeSchedule")},4671:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function identity(x){return x}__webpack_require__.d(__webpack_exports__,{y:()=>identity}),__name(identity,"identity")},1144:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>isArrayLike});const isArrayLike=__name(x=>x&&"number"==typeof x.length&&"function"!=typeof x,"isArrayLike")},2206:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>isAsyncIterable});var _isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(576);function isAsyncIterable(obj){return Symbol.asyncIterator&&(0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(obj?.[Symbol.asyncIterator])}__name(isAsyncIterable,"isAsyncIterable")},576:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isFunction(value){return"function"==typeof value}__webpack_require__.d(__webpack_exports__,{m:()=>isFunction}),__name(isFunction,"isFunction")},3670:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>isInteropObservable});var _symbol_observable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8822),_isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(576);function isInteropObservable(input){return(0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(input[_symbol_observable__WEBPACK_IMPORTED_MODULE_1__.L])}__name(isInteropObservable,"isInteropObservable")},6495:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>isIterable});var _symbol_iterator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2202),_isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(576);function isIterable(input){return(0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(input?.[_symbol_iterator__WEBPACK_IMPORTED_MODULE_1__.h])}__name(isIterable,"isIterable")},8239:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>isPromise});var _isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(576);function isPromise(value){return(0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(value?.then)}__name(isPromise,"isPromise")},3260:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>isReadableStreamLike,Q:()=>readableStreamLikeToAsyncGenerator});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(655),_isFunction__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(576);function readableStreamLikeToAsyncGenerator(readableStream){return(0,tslib__WEBPACK_IMPORTED_MODULE_0__.FC)(this,arguments,__name(function*(){const reader=readableStream.getReader();try{for(;;){const{value,done}=yield(0,tslib__WEBPACK_IMPORTED_MODULE_0__.qq)(reader.read());if(done)return yield(0,tslib__WEBPACK_IMPORTED_MODULE_0__.qq)(void 0);yield yield(0,tslib__WEBPACK_IMPORTED_MODULE_0__.qq)(value)}}finally{reader.releaseLock()}},"readableStreamLikeToAsyncGenerator_1"))}function isReadableStreamLike(obj){return(0,_isFunction__WEBPACK_IMPORTED_MODULE_1__.m)(obj?.getReader)}__name(readableStreamLikeToAsyncGenerator,"readableStreamLikeToAsyncGenerator"),__name(isReadableStreamLike,"isReadableStreamLike")},3532:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>isScheduler});var _isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(576);function isScheduler(value){return value&&(0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(value.schedule)}__name(isScheduler,"isScheduler")},4482:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>hasLift,e:()=>operate});var _isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(576);function hasLift(source){return(0,_isFunction__WEBPACK_IMPORTED_MODULE_0__.m)(source?.lift)}function operate(init){return source=>{if(hasLift(source))return source.lift(function(liftedSource){try{return init(liftedSource,this)}catch(err){this.error(err)}});throw new TypeError("Unable to lift unknown Observable type")}}__name(hasLift,"hasLift"),__name(operate,"operate")},3268:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>mapOneOrManyArgs});var _operators_map__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4004);const{isArray}=Array;function callOrApply(fn,args){return isArray(args)?fn(...args):fn(args)}function mapOneOrManyArgs(fn){return(0,_operators_map__WEBPACK_IMPORTED_MODULE_0__.U)(args=>callOrApply(fn,args))}__name(callOrApply,"callOrApply"),__name(mapOneOrManyArgs,"mapOneOrManyArgs")},5032:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function noop(){}__webpack_require__.d(__webpack_exports__,{Z:()=>noop}),__name(noop,"noop")},9635:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>pipeFromArray,z:()=>pipe});var _identity__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4671);function pipe(...fns){return pipeFromArray(fns)}function pipeFromArray(fns){return 0===fns.length?_identity__WEBPACK_IMPORTED_MODULE_0__.y:1===fns.length?fns[0]:__name(function(input){return fns.reduce((prev,fn)=>fn(prev),input)},"piped")}__name(pipe,"pipe"),__name(pipeFromArray,"pipeFromArray")},7849:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>reportUnhandledError});var _config__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2416),_scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3410);function reportUnhandledError(err){_scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_0__.z.setTimeout(()=>{const{onUnhandledError}=_config__WEBPACK_IMPORTED_MODULE_1__.config;if(!onUnhandledError)throw err;onUnhandledError(err)})}__name(reportUnhandledError,"reportUnhandledError")},4532:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function createInvalidObservableTypeError(input){return new TypeError(`You provided ${null!==input&&"object"==typeof input?"an invalid object":`'${input}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}__webpack_require__.d(__webpack_exports__,{z:()=>createInvalidObservableTypeError}),__name(createInvalidObservableTypeError,"createInvalidObservableTypeError")},766:function(module){var factory;module.exports=(factory=function(){var charMap=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xa2":"cent","\xa3":"pound","\xa4":"currency","\xa5":"yen","\xa9":"(c)","\xaa":"a","\xae":"(r)","\xba":"o","\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xc6":"AE","\xc7":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xde":"TH","\xdf":"ss","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xe6":"ae","\xe7":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xfe":"th","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u010c":"C","\u010d":"c","\u010e":"D","\u010f":"d","\u0110":"DJ","\u0111":"dj","\u0112":"E","\u0113":"e","\u0116":"E","\u0117":"e","\u0118":"e","\u0119":"e","\u011a":"E","\u011b":"e","\u011e":"G","\u011f":"g","\u0122":"G","\u0123":"g","\u0128":"I","\u0129":"i","\u012a":"i","\u012b":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0136":"k","\u0137":"k","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u0141":"L","\u0142":"l","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u014c":"O","\u014d":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","\u0154":"R","\u0155":"r","\u0158":"R","\u0159":"r","\u015a":"S","\u015b":"s","\u015e":"S","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u0164":"T","\u0165":"t","\u0168":"U","\u0169":"u","\u016a":"u","\u016b":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u018f":"E","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01c8":"LJ","\u01c9":"lj","\u01cb":"NJ","\u01cc":"nj","\u0218":"S","\u0219":"s","\u021a":"T","\u021b":"t","\u0259":"e","\u02da":"o","\u0386":"A","\u0388":"E","\u0389":"H","\u038a":"I","\u038c":"O","\u038e":"Y","\u038f":"W","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039a":"K","\u039b":"L","\u039c":"M","\u039d":"N","\u039e":"3","\u039f":"O","\u03a0":"P","\u03a1":"R","\u03a3":"S","\u03a4":"T","\u03a5":"Y","\u03a6":"F","\u03a7":"X","\u03a8":"PS","\u03a9":"W","\u03aa":"I","\u03ab":"Y","\u03ac":"a","\u03ad":"e","\u03ae":"h","\u03af":"i","\u03b0":"y","\u03b1":"a","\u03b2":"b","\u03b3":"g","\u03b4":"d","\u03b5":"e","\u03b6":"z","\u03b7":"h","\u03b8":"8","\u03b9":"i","\u03ba":"k","\u03bb":"l","\u03bc":"m","\u03bd":"n","\u03be":"3","\u03bf":"o","\u03c0":"p","\u03c1":"r","\u03c2":"s","\u03c3":"s","\u03c4":"t","\u03c5":"y","\u03c6":"f","\u03c7":"x","\u03c8":"ps","\u03c9":"w","\u03ca":"i","\u03cb":"y","\u03cc":"o","\u03cd":"y","\u03ce":"w","\u0401":"Yo","\u0402":"DJ","\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0408":"J","\u0409":"LJ","\u040a":"NJ","\u040b":"C","\u040f":"DZ","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041a":"K","\u041b":"L","\u041c":"M","\u041d":"N","\u041e":"O","\u041f":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042a":"U","\u042b":"Y","\u042c":"","\u042d":"E","\u042e":"Yu","\u042f":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044a":"u","\u044b":"y","\u044c":"","\u044d":"e","\u044e":"yu","\u044f":"ya","\u0451":"yo","\u0452":"dj","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0458":"j","\u0459":"lj","\u045a":"nj","\u045b":"c","\u045d":"u","\u045f":"dz","\u0490":"G","\u0491":"g","\u0492":"GH","\u0493":"gh","\u049a":"KH","\u049b":"kh","\u04a2":"NG","\u04a3":"ng","\u04ae":"UE","\u04af":"ue","\u04b0":"U","\u04b1":"u","\u04ba":"H","\u04bb":"h","\u04d8":"AE","\u04d9":"ae","\u04e8":"OE","\u04e9":"oe","\u0531":"A","\u0532":"B","\u0533":"G","\u0534":"D","\u0535":"E","\u0536":"Z","\u0537":"E\'","\u0538":"Y\'","\u0539":"T\'","\u053a":"JH","\u053b":"I","\u053c":"L","\u053d":"X","\u053e":"C\'","\u053f":"K","\u0540":"H","\u0541":"D\'","\u0542":"GH","\u0543":"TW","\u0544":"M","\u0545":"Y","\u0546":"N","\u0547":"SH","\u0549":"CH","\u054a":"P","\u054b":"J","\u054c":"R\'","\u054d":"S","\u054e":"V","\u054f":"T","\u0550":"R","\u0551":"C","\u0553":"P\'","\u0554":"Q\'","\u0555":"O\'\'","\u0556":"F","\u0587":"EV","\u0621":"a","\u0622":"aa","\u0623":"a","\u0624":"u","\u0625":"i","\u0626":"e","\u0627":"a","\u0628":"b","\u0629":"h","\u062a":"t","\u062b":"th","\u062c":"j","\u062d":"h","\u062e":"kh","\u062f":"d","\u0630":"th","\u0631":"r","\u0632":"z","\u0633":"s","\u0634":"sh","\u0635":"s","\u0636":"dh","\u0637":"t","\u0638":"z","\u0639":"a","\u063a":"gh","\u0641":"f","\u0642":"q","\u0643":"k","\u0644":"l","\u0645":"m","\u0646":"n","\u0647":"h","\u0648":"w","\u0649":"a","\u064a":"y","\u064b":"an","\u064c":"on","\u064d":"en","\u064e":"a","\u064f":"u","\u0650":"e","\u0652":"","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u067e":"p","\u0686":"ch","\u0698":"zh","\u06a9":"k","\u06af":"g","\u06cc":"y","\u06f0":"0","\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9","\u0e3f":"baht","\u10d0":"a","\u10d1":"b","\u10d2":"g","\u10d3":"d","\u10d4":"e","\u10d5":"v","\u10d6":"z","\u10d7":"t","\u10d8":"i","\u10d9":"k","\u10da":"l","\u10db":"m","\u10dc":"n","\u10dd":"o","\u10de":"p","\u10df":"zh","\u10e0":"r","\u10e1":"s","\u10e2":"t","\u10e3":"u","\u10e4":"f","\u10e5":"k","\u10e6":"gh","\u10e7":"q","\u10e8":"sh","\u10e9":"ch","\u10ea":"ts","\u10eb":"dz","\u10ec":"ts","\u10ed":"ch","\u10ee":"kh","\u10ef":"j","\u10f0":"h","\u1e62":"S","\u1e63":"s","\u1e80":"W","\u1e81":"w","\u1e82":"W","\u1e83":"w","\u1e84":"W","\u1e85":"w","\u1e9e":"SS","\u1ea0":"A","\u1ea1":"a","\u1ea2":"A","\u1ea3":"a","\u1ea4":"A","\u1ea5":"a","\u1ea6":"A","\u1ea7":"a","\u1ea8":"A","\u1ea9":"a","\u1eaa":"A","\u1eab":"a","\u1eac":"A","\u1ead":"a","\u1eae":"A","\u1eaf":"a","\u1eb0":"A","\u1eb1":"a","\u1eb2":"A","\u1eb3":"a","\u1eb4":"A","\u1eb5":"a","\u1eb6":"A","\u1eb7":"a","\u1eb8":"E","\u1eb9":"e","\u1eba":"E","\u1ebb":"e","\u1ebc":"E","\u1ebd":"e","\u1ebe":"E","\u1ebf":"e","\u1ec0":"E","\u1ec1":"e","\u1ec2":"E","\u1ec3":"e","\u1ec4":"E","\u1ec5":"e","\u1ec6":"E","\u1ec7":"e","\u1ec8":"I","\u1ec9":"i","\u1eca":"I","\u1ecb":"i","\u1ecc":"O","\u1ecd":"o","\u1ece":"O","\u1ecf":"o","\u1ed0":"O","\u1ed1":"o","\u1ed2":"O","\u1ed3":"o","\u1ed4":"O","\u1ed5":"o","\u1ed6":"O","\u1ed7":"o","\u1ed8":"O","\u1ed9":"o","\u1eda":"O","\u1edb":"o","\u1edc":"O","\u1edd":"o","\u1ede":"O","\u1edf":"o","\u1ee0":"O","\u1ee1":"o","\u1ee2":"O","\u1ee3":"o","\u1ee4":"U","\u1ee5":"u","\u1ee6":"U","\u1ee7":"u","\u1ee8":"U","\u1ee9":"u","\u1eea":"U","\u1eeb":"u","\u1eec":"U","\u1eed":"u","\u1eee":"U","\u1eef":"u","\u1ef0":"U","\u1ef1":"u","\u1ef2":"Y","\u1ef3":"y","\u1ef4":"Y","\u1ef5":"y","\u1ef6":"Y","\u1ef7":"y","\u1ef8":"Y","\u1ef9":"y","\u2013":"-","\u2018":"\'","\u2019":"\'","\u201c":"\\"","\u201d":"\\"","\u201e":"\\"","\u2020":"+","\u2022":"*","\u2026":"...","\u20a0":"ecu","\u20a2":"cruzeiro","\u20a3":"french franc","\u20a4":"lira","\u20a5":"mill","\u20a6":"naira","\u20a7":"peseta","\u20a8":"rupee","\u20a9":"won","\u20aa":"new shequel","\u20ab":"dong","\u20ac":"euro","\u20ad":"kip","\u20ae":"tugrik","\u20af":"drachma","\u20b0":"penny","\u20b1":"peso","\u20b2":"guarani","\u20b3":"austral","\u20b4":"hryvnia","\u20b5":"cedi","\u20b8":"kazakhstani tenge","\u20b9":"indian rupee","\u20ba":"turkish lira","\u20bd":"russian ruble","\u20bf":"bitcoin","\u2120":"sm","\u2122":"tm","\u2202":"d","\u2206":"delta","\u2211":"sum","\u221e":"infinity","\u2665":"love","\u5143":"yuan","\u5186":"yen","\ufdfc":"rial","\ufef5":"laa","\ufef7":"laa","\ufef9":"lai","\ufefb":"la"}'),locales=JSON.parse('{"bg":{"\u0419":"Y","\u0426":"Ts","\u0429":"Sht","\u042a":"A","\u042c":"Y","\u0439":"y","\u0446":"ts","\u0449":"sht","\u044a":"a","\u044c":"y"},"de":{"\xc4":"AE","\xe4":"ae","\xd6":"OE","\xf6":"oe","\xdc":"UE","\xfc":"ue","\xdf":"ss","%":"prozent","&":"und","|":"oder","\u2211":"summe","\u221e":"unendlich","\u2665":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","\xa2":"centavos","\xa3":"libras","\xa4":"moneda","\u20a3":"francos","\u2211":"suma","\u221e":"infinito","\u2665":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","\xa2":"centime","\xa3":"livre","\xa4":"devise","\u20a3":"franc","\u2211":"somme","\u221e":"infini","\u2665":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","\xa2":"centavo","\u2211":"soma","\xa3":"libra","\u221e":"infinito","\u2665":"amor"},"uk":{"\u0418":"Y","\u0438":"y","\u0419":"Y","\u0439":"y","\u0426":"Ts","\u0446":"ts","\u0425":"Kh","\u0445":"kh","\u0429":"Shch","\u0449":"shch","\u0413":"H","\u0433":"h"},"vi":{"\u0110":"D","\u0111":"d"},"da":{"\xd8":"OE","\xf8":"oe","\xc5":"AA","\xe5":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"st\xf8rre end"},"nb":{"&":"og","\xc5":"AA","\xc6":"AE","\xd8":"OE","\xe5":"aa","\xe6":"ae","\xf8":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","\xc5":"AA","\xc4":"AE","\xd6":"OE","\xe5":"aa","\xe4":"ae","\xf6":"oe"}}');function replace(string,options){if("string"!=typeof string)throw new Error("slugify: string argument expected");var locale=locales[(options="string"==typeof options?{replacement:options}:options||{}).locale]||{},replacement=void 0===options.replacement?"-":options.replacement,trim=void 0===options.trim||options.trim,slug=string.normalize().split("").reduce(function(result,ch){var appendChar=locale[ch];return void 0===appendChar&&(appendChar=charMap[ch]),void 0===appendChar&&(appendChar=ch),appendChar===replacement&&(appendChar=" "),result+appendChar.replace(options.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return options.strict&&(slug=slug.replace(/[^A-Za-z0-9\s]/g,"")),trim&&(slug=slug.trim()),slug=slug.replace(/\s+/g,replacement),options.lower&&(slug=slug.toLowerCase()),slug}return __name(replace,"replace"),replace.extend=function(customMap){Object.assign(charMap,customMap)},replace})(),module.exports.default=factory()},1870:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{xv:()=>Text2});var three_module=__webpack_require__(6682);function workerBootstrap(){var modules=Object.create(null);function registerModule(ref,callback){var id=ref.id,name=ref.name,dependencies=ref.dependencies;void 0===dependencies&&(dependencies=[]);var init=ref.init;void 0===init&&(init=__name(function(){},"init"));var getTransferables=ref.getTransferables;if(void 0===getTransferables&&(getTransferables=null),!modules[id])try{dependencies=dependencies.map(function(dep){return dep&&dep.isWorkerModule&&(registerModule(dep,function(depResult){if(depResult instanceof Error)throw depResult}),dep=modules[dep.id].value),dep}),init=rehydrate("<"+name+">.init",init),getTransferables&&(getTransferables=rehydrate("<"+name+">.getTransferables",getTransferables));var value=null;"function"==typeof init?value=init.apply(void 0,dependencies):console.error("worker module init function failed to rehydrate"),modules[id]={id,value,getTransferables},callback(value)}catch(err){err&&err.noLog||console.error(err),callback(err)}}function callModule(ref,callback){var ref$1,id=ref.id,args=ref.args;(!modules[id]||"function"!=typeof modules[id].value)&&callback(new Error("Worker module "+id+": not found or its 'init' did not return a function"));try{var result=(ref$1=modules[id]).value.apply(ref$1,args);result&&"function"==typeof result.then?result.then(handleResult,function(rej){return callback(rej instanceof Error?rej:new Error(""+rej))}):handleResult(result)}catch(err){callback(err)}function handleResult(result2){try{var tx=modules[id].getTransferables&&modules[id].getTransferables(result2);(!tx||!Array.isArray(tx)||!tx.length)&&(tx=void 0),callback(result2,tx)}catch(err){console.error(err),callback(err)}}__name(handleResult,"handleResult")}function rehydrate(name,str){var result=void 0;self.troikaDefine=function(r){return result=r};var url=URL.createObjectURL(new Blob(["/** "+name.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+str+"\n)"],{type:"application/javascript"}));try{importScripts(url)}catch(err){console.error(err)}return URL.revokeObjectURL(url),delete self.troikaDefine,result}__name(registerModule,"registerModule"),__name(callModule,"callModule"),__name(rehydrate,"rehydrate"),self.addEventListener("message",function(e){var ref=e.data,messageId=ref.messageId,action=ref.action,data=ref.data;try{"registerModule"===action&&registerModule(data,function(result){result instanceof Error?postMessage({messageId,success:!1,error:result.message}):postMessage({messageId,success:!0,result:{isCallable:"function"==typeof result}})}),"callModule"===action&&callModule(data,function(result,transferables){result instanceof Error?postMessage({messageId,success:!1,error:result.message}):postMessage({messageId,success:!0,result},transferables||void 0)})}catch(err){postMessage({messageId,success:!1,error:err.stack})}})}function defineMainThreadModule(options){var moduleFunc=__name(function(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];return moduleFunc._getInitResult().then(function(initResult){if("function"==typeof initResult)return initResult.apply(void 0,args);throw new Error("Worker module function was called but `init` did not return a callable function")})},"moduleFunc");return moduleFunc._getInitResult=function(){var dependencies=options.dependencies,init=options.init;dependencies=Array.isArray(dependencies)?dependencies.map(function(dep){return dep&&dep._getInitResult?dep._getInitResult():dep}):[];var initPromise=Promise.all(dependencies).then(function(deps){return init.apply(null,deps)});return moduleFunc._getInitResult=function(){return initPromise},initPromise},moduleFunc}__name(workerBootstrap,"workerBootstrap"),__name(defineMainThreadModule,"defineMainThreadModule");var supportsWorkers=__name(function(){var supported=!1;if(typeof window<"u"&&typeof window.document<"u")try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),supported=!0}catch(err){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+err.message+"]")}return supportsWorkers=__name(function(){return supported},"supportsWorkers"),supported},"supportsWorkers"),_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(options){if(!(options&&"function"==typeof options.init||_allowInitAsString))throw new Error("requires `options.init` function");var dependencies=options.dependencies,init=options.init,getTransferables=options.getTransferables,workerId=options.workerId;if(!supportsWorkers())return defineMainThreadModule(options);null==workerId&&(workerId="#default");var id="workerModule"+ ++_workerModuleId,name=options.name||id,registrationPromise=null;function moduleFunc(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];if(!registrationPromise){registrationPromise=callWorker(workerId,"registerModule",moduleFunc.workerModuleData);var unregister=__name(function(){registrationPromise=null,registeredModules[workerId].delete(unregister)},"unregister");(registeredModules[workerId]||(registeredModules[workerId]=new Set)).add(unregister)}return registrationPromise.then(function(ref){if(ref.isCallable)return callWorker(workerId,"callModule",{id,args});throw new Error("Worker module function was called but `init` did not return a callable function")})}return dependencies=dependencies&&dependencies.map(function(dep){return"function"==typeof dep&&!dep.workerModuleData&&(_allowInitAsString=!0,dep=defineWorkerModule({workerId,name:"<"+name+"> function dependency: "+dep.name,init:"function(){return (\n"+stringifyFunction(dep)+"\n)}"}),_allowInitAsString=!1),dep&&dep.workerModuleData&&(dep=dep.workerModuleData),dep}),__name(moduleFunc,"moduleFunc"),moduleFunc.workerModuleData={isWorkerModule:!0,id,name,dependencies,init:stringifyFunction(init),getTransferables:getTransferables&&stringifyFunction(getTransferables)},moduleFunc}function terminateWorker(workerId){registeredModules[workerId]&&registeredModules[workerId].forEach(function(unregister){unregister()}),workers[workerId]&&(workers[workerId].terminate(),delete workers[workerId])}function stringifyFunction(fn){var str=fn.toString();return!/^function/.test(str)&&/^\w+\s*\(/.test(str)&&(str="function "+str),str}function getWorker(workerId){var worker=workers[workerId];if(!worker){var bootstrap=stringifyFunction(workerBootstrap);(worker=workers[workerId]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+workerId.replace(/\*/g,"")+" **/\n\n;("+bootstrap+")()"],{type:"application/javascript"})))).onmessage=function(e){var response=e.data,msgId=response.messageId,callback=openRequests[msgId];if(!callback)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[msgId],callback(response)}}return worker}function callWorker(workerId,action,data){return new Promise(function(resolve,reject){var messageId=++_messageId;openRequests[messageId]=function(response){response.success?resolve(response.result):reject(new Error("Error in worker "+action+" call: "+response.error))},getWorker(workerId).postMessage({messageId,action,data})})}function SDFGenerator(){var exports=function(exports2){function pointOnQuadraticBezier(x0,y0,x1,y1,x2,y2,t,pointOut){var t2=1-t;pointOut.x=t2*t2*x0+2*t2*t*x1+t*t*x2,pointOut.y=t2*t2*y0+2*t2*t*y1+t*t*y2}function pointOnCubicBezier(x0,y0,x1,y1,x2,y2,x3,y3,t,pointOut){var t2=1-t;pointOut.x=t2*t2*t2*x0+3*t2*t2*t*x1+3*t2*t*t*x2+t*t*t*x3,pointOut.y=t2*t2*t2*y0+3*t2*t2*t*y1+3*t2*t*t*y2+t*t*t*y3}function forEachPathCommand(pathString,commandCallback){for(var match,firstX,firstY,prevX,prevY,segmentRE=/([MLQCZ])([^MLQCZ]*)/g;match=segmentRE.exec(pathString);){var args=match[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(v){return parseFloat(v)});switch(match[1]){case"M":prevX=firstX=args[0],prevY=firstY=args[1];break;case"L":(args[0]!==prevX||args[1]!==prevY)&&commandCallback("L",prevX,prevY,prevX=args[0],prevY=args[1]);break;case"Q":commandCallback("Q",prevX,prevY,prevX=args[2],prevY=args[3],args[0],args[1]);break;case"C":commandCallback("C",prevX,prevY,prevX=args[4],prevY=args[5],args[0],args[1],args[2],args[3]);break;case"Z":(prevX!==firstX||prevY!==firstY)&&commandCallback("L",prevX,prevY,firstX,firstY)}}}function pathToLineSegments(pathString,segmentCallback,curvePoints){void 0===curvePoints&&(curvePoints=16);var tempPoint={x:0,y:0};forEachPathCommand(pathString,function(command,startX,startY,endX,endY,ctrl1X,ctrl1Y,ctrl2X,ctrl2Y){switch(command){case"L":segmentCallback(startX,startY,endX,endY);break;case"Q":for(var prevCurveX=startX,prevCurveY=startY,i=1;i<curvePoints;i++)pointOnQuadraticBezier(startX,startY,ctrl1X,ctrl1Y,endX,endY,i/(curvePoints-1),tempPoint),segmentCallback(prevCurveX,prevCurveY,tempPoint.x,tempPoint.y),prevCurveX=tempPoint.x,prevCurveY=tempPoint.y;break;case"C":for(var prevCurveX$1=startX,prevCurveY$1=startY,i$1=1;i$1<curvePoints;i$1++)pointOnCubicBezier(startX,startY,ctrl1X,ctrl1Y,ctrl2X,ctrl2Y,endX,endY,i$1/(curvePoints-1),tempPoint),segmentCallback(prevCurveX$1,prevCurveY$1,tempPoint.x,tempPoint.y),prevCurveX$1=tempPoint.x,prevCurveY$1=tempPoint.y}})}__name(pointOnQuadraticBezier,"pointOnQuadraticBezier"),__name(pointOnCubicBezier,"pointOnCubicBezier"),__name(forEachPathCommand,"forEachPathCommand"),__name(pathToLineSegments,"pathToLineSegments");var viewportQuadVertex="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",copyTexFragment="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",cache=new WeakMap,glContextParams={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function withWebGLContext(glOrCanvas,callback){var gl=glOrCanvas.getContext?glOrCanvas.getContext("webgl",glContextParams):glOrCanvas,wrapper=cache.get(gl);if(!wrapper){let getExtension=function(name){var ext=extensions[name];if(!ext&&!(ext=extensions[name]=gl.getExtension(name)))throw new Error(name+" not supported");return ext},compileShader=function(src,type){var shader=gl.createShader(type);return gl.shaderSource(shader,src),gl.compileShader(shader),shader},withProgram=function(name,vert,frag,func){if(!programs[name]){var attributes={},uniforms={},program=gl.createProgram();gl.attachShader(program,compileShader(vert,gl.VERTEX_SHADER)),gl.attachShader(program,compileShader(frag,gl.FRAGMENT_SHADER)),gl.linkProgram(program),programs[name]={program,transaction:__name(function(func2){gl.useProgram(program),func2({setUniform:__name(function(type,name2){for(var values=[],len=arguments.length-2;len-- >0;)values[len]=arguments[len+2];var uniformLoc=uniforms[name2]||(uniforms[name2]=gl.getUniformLocation(program,name2));gl["uniform"+type].apply(gl,[uniformLoc].concat(values))},"setUniform"),setAttribute:__name(function(name2,size,usage,instancingDivisor,data){var attr=attributes[name2];attr||(attr=attributes[name2]={buf:gl.createBuffer(),loc:gl.getAttribLocation(program,name2),data:null}),gl.bindBuffer(gl.ARRAY_BUFFER,attr.buf),gl.vertexAttribPointer(attr.loc,size,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(attr.loc),isWebGL2?gl.vertexAttribDivisor(attr.loc,instancingDivisor):getExtension("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(attr.loc,instancingDivisor),data!==attr.data&&(gl.bufferData(gl.ARRAY_BUFFER,data,usage),attr.data=data)},"setAttribute")})},"transaction")}}programs[name].transaction(func)},withTexture=function(name,func){textureUnit++;try{gl.activeTexture(gl.TEXTURE0+textureUnit);var texture=textures[name];texture||(texture=textures[name]=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,texture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST)),gl.bindTexture(gl.TEXTURE_2D,texture),func(texture,textureUnit)}finally{textureUnit--}},withTextureFramebuffer=function(texture,textureUnit2,func){var framebuffer=gl.createFramebuffer();framebufferStack.push(framebuffer),gl.bindFramebuffer(gl.FRAMEBUFFER,framebuffer),gl.activeTexture(gl.TEXTURE0+textureUnit2),gl.bindTexture(gl.TEXTURE_2D,texture),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,texture,0);try{func(framebuffer)}finally{gl.deleteFramebuffer(framebuffer),gl.bindFramebuffer(gl.FRAMEBUFFER,framebufferStack[--framebufferStack.length-1]||null)}},handleContextLoss=function(){extensions={},programs={},textures={},textureUnit=-1,framebufferStack.length=0};__name(getExtension,"getExtension"),__name(compileShader,"compileShader"),__name(withProgram,"withProgram"),__name(withTexture,"withTexture"),__name(withTextureFramebuffer,"withTextureFramebuffer"),__name(handleContextLoss,"handleContextLoss");var isWebGL2=typeof WebGL2RenderingContext<"u"&&gl instanceof WebGL2RenderingContext,extensions={},programs={},textures={},textureUnit=-1,framebufferStack=[];gl.canvas.addEventListener("webglcontextlost",function(e){handleContextLoss(),e.preventDefault()},!1),cache.set(gl,wrapper={gl,isWebGL2,getExtension,withProgram,withTexture,withTextureFramebuffer,handleContextLoss})}callback(wrapper)}function renderImageData(glOrCanvas,imageData,x,y,width,height,channels,framebuffer){void 0===channels&&(channels=15),void 0===framebuffer&&(framebuffer=null),withWebGLContext(glOrCanvas,function(ref){var gl=ref.gl,withProgram=ref.withProgram;(0,ref.withTexture)("copy",function(tex,texUnit){gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,width,height,0,gl.RGBA,gl.UNSIGNED_BYTE,imageData),withProgram("copy",viewportQuadVertex,copyTexFragment,function(ref2){var setUniform=ref2.setUniform;(0,ref2.setAttribute)("aUV",2,gl.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),setUniform("1i","image",texUnit),gl.bindFramebuffer(gl.FRAMEBUFFER,framebuffer||null),gl.disable(gl.BLEND),gl.colorMask(8&channels,4&channels,2&channels,1&channels),gl.viewport(x,y,width,height),gl.scissor(x,y,width,height),gl.drawArrays(gl.TRIANGLES,0,3)})})})}function resizeWebGLCanvasWithoutClearing2(canvas,newWidth,newHeight){var width=canvas.width,height=canvas.height;withWebGLContext(canvas,function(ref){var gl=ref.gl,data=new Uint8Array(width*height*4);gl.readPixels(0,0,width,height,gl.RGBA,gl.UNSIGNED_BYTE,data),canvas.width=newWidth,canvas.height=newHeight,renderImageData(gl,data,0,0,width,height)})}__name(withWebGLContext,"withWebGLContext"),__name(renderImageData,"renderImageData"),__name(resizeWebGLCanvasWithoutClearing2,"resizeWebGLCanvasWithoutClearing");var webglUtils=Object.freeze({__proto__:null,withWebGLContext,renderImageData,resizeWebGLCanvasWithoutClearing:resizeWebGLCanvasWithoutClearing2});function generate$2(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent){void 0===sdfExponent&&(sdfExponent=1);var textureData=new Uint8Array(sdfWidth*sdfHeight),viewBoxWidth=viewBox[2]-viewBox[0],viewBoxHeight=viewBox[3]-viewBox[1],segments=[];pathToLineSegments(path,function(x1,y1,x2,y2){segments.push({x1,y1,x2,y2,minX:Math.min(x1,x2),minY:Math.min(y1,y2),maxX:Math.max(x1,x2),maxY:Math.max(y1,y2)})}),segments.sort(function(a,b){return a.maxX-b.maxX});for(var sdfX=0;sdfX<sdfWidth;sdfX++)for(var sdfY=0;sdfY<sdfHeight;sdfY++){var signedDist=findNearestSignedDistance(viewBox[0]+viewBoxWidth*(sdfX+.5)/sdfWidth,viewBox[1]+viewBoxHeight*(sdfY+.5)/sdfHeight),alpha=Math.pow(1-Math.abs(signedDist)/maxDistance,sdfExponent)/2;signedDist<0&&(alpha=1-alpha),alpha=Math.max(0,Math.min(255,Math.round(255*alpha))),textureData[sdfY*sdfWidth+sdfX]=alpha}return textureData;function findNearestSignedDistance(x,y){for(var closestDistSq=1/0,closestDist=1/0,i=segments.length;i--;){var seg=segments[i];if(seg.maxX+closestDist<=x)break;if(x+closestDist>seg.minX&&y-closestDist<seg.maxY&&y+closestDist>seg.minY){var distSq=absSquareDistanceToLineSegment(x,y,seg.x1,seg.y1,seg.x2,seg.y2);distSq<closestDistSq&&(closestDistSq=distSq,closestDist=Math.sqrt(closestDistSq))}}return function isPointInPoly(x,y){for(var winding=0,i=segments.length;i--;){var seg=segments[i];if(seg.maxX<=x)break;seg.y1>y!=seg.y2>y&&x<(seg.x2-seg.x1)*(y-seg.y1)/(seg.y2-seg.y1)+seg.x1&&(winding+=seg.y1<seg.y2?1:-1)}return 0!==winding}(x,y)&&(closestDist=-closestDist),closestDist}}function generateIntoCanvas$2(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,canvas,x,y,channel){void 0===sdfExponent&&(sdfExponent=1),void 0===x&&(x=0),void 0===y&&(y=0),void 0===channel&&(channel=0),generateIntoFramebuffer$1(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,canvas,null,x,y,channel)}function generateIntoFramebuffer$1(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,glOrCanvas,framebuffer,x,y,channel){void 0===sdfExponent&&(sdfExponent=1),void 0===x&&(x=0),void 0===y&&(y=0),void 0===channel&&(channel=0);for(var data=generate$2(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent),rgbaData=new Uint8Array(4*data.length),i=0;i<data.length;i++)rgbaData[4*i+channel]=data[i];renderImageData(glOrCanvas,rgbaData,x,y,sdfWidth,sdfHeight,1<<3-channel,framebuffer)}function absSquareDistanceToLineSegment(x,y,lineX0,lineY0,lineX1,lineY1){var ldx=lineX1-lineX0,ldy=lineY1-lineY0,lengthSq=ldx*ldx+ldy*ldy,t=lengthSq?Math.max(0,Math.min(1,((x-lineX0)*ldx+(y-lineY0)*ldy)/lengthSq)):0,dx=x-(lineX0+t*ldx),dy=y-(lineY0+t*ldy);return dx*dx+dy*dy}__name(generate$2,"generate$2"),__name(generateIntoCanvas$2,"generateIntoCanvas$2"),__name(generateIntoFramebuffer$1,"generateIntoFramebuffer$1"),__name(absSquareDistanceToLineSegment,"absSquareDistanceToLineSegment");var javascript=Object.freeze({__proto__:null,generate:generate$2,generateIntoCanvas:generateIntoCanvas$2,generateIntoFramebuffer:generateIntoFramebuffer$1}),mainVertex="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",mainFragment="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",postFragment="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",viewportUVs=new Float32Array([0,0,2,0,0,2]),implicitContext=null,isTestingSupport=!1,NULL_OBJECT={},supportByCanvas=new WeakMap;function validateSupport(glOrCanvas){if(!isTestingSupport&&!isSupported(glOrCanvas))throw new Error("WebGL generation not supported")}function generate$1(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,glOrCanvas){if(void 0===sdfExponent&&(sdfExponent=1),void 0===glOrCanvas&&(glOrCanvas=null),!glOrCanvas&&!(glOrCanvas=implicitContext)){var canvas="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!canvas)throw new Error("OffscreenCanvas or DOM canvas not supported");glOrCanvas=implicitContext=canvas.getContext("webgl",{depth:!1})}validateSupport(glOrCanvas);var rgbaData=new Uint8Array(sdfWidth*sdfHeight*4);withWebGLContext(glOrCanvas,function(ref){var gl=ref.gl,withTextureFramebuffer=ref.withTextureFramebuffer;(0,ref.withTexture)("readable",function(texture,textureUnit){gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,sdfWidth,sdfHeight,0,gl.RGBA,gl.UNSIGNED_BYTE,null),withTextureFramebuffer(texture,textureUnit,function(framebuffer){generateIntoFramebuffer(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,gl,framebuffer,0,0,0),gl.readPixels(0,0,sdfWidth,sdfHeight,gl.RGBA,gl.UNSIGNED_BYTE,rgbaData)})})});for(var data=new Uint8Array(sdfWidth*sdfHeight),i=0,j=0;i<rgbaData.length;i+=4)data[j++]=rgbaData[i];return data}function generateIntoCanvas$1(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,canvas,x,y,channel){void 0===sdfExponent&&(sdfExponent=1),void 0===x&&(x=0),void 0===y&&(y=0),void 0===channel&&(channel=0),generateIntoFramebuffer(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,canvas,null,x,y,channel)}function generateIntoFramebuffer(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,glOrCanvas,framebuffer,x,y,channel){void 0===sdfExponent&&(sdfExponent=1),void 0===x&&(x=0),void 0===y&&(y=0),void 0===channel&&(channel=0),validateSupport(glOrCanvas);var lineSegmentCoords=[];pathToLineSegments(path,function(x1,y1,x2,y2){lineSegmentCoords.push(x1,y1,x2,y2)}),lineSegmentCoords=new Float32Array(lineSegmentCoords),withWebGLContext(glOrCanvas,function(ref){var gl=ref.gl,isWebGL2=ref.isWebGL2,getExtension=ref.getExtension,withProgram=ref.withProgram,withTextureFramebuffer=ref.withTextureFramebuffer,handleContextLoss=ref.handleContextLoss;if((0,ref.withTexture)("rawDistances",function(intermediateTexture,intermediateTextureUnit){(sdfWidth!==intermediateTexture._lastWidth||sdfHeight!==intermediateTexture._lastHeight)&&gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,intermediateTexture._lastWidth=sdfWidth,intermediateTexture._lastHeight=sdfHeight,0,gl.RGBA,gl.UNSIGNED_BYTE,null),withProgram("main",mainVertex,mainFragment,function(ref2){var setAttribute=ref2.setAttribute,setUniform=ref2.setUniform,instancingExtension=!isWebGL2&&getExtension("ANGLE_instanced_arrays"),blendMinMaxExtension=!isWebGL2&&getExtension("EXT_blend_minmax");setAttribute("aUV",2,gl.STATIC_DRAW,0,viewportUVs),setAttribute("aLineSegment",4,gl.DYNAMIC_DRAW,1,lineSegmentCoords),setUniform.apply(void 0,["4f","uGlyphBounds"].concat(viewBox)),setUniform("1f","uMaxDistance",maxDistance),setUniform("1f","uExponent",sdfExponent),withTextureFramebuffer(intermediateTexture,intermediateTextureUnit,function(framebuffer2){gl.enable(gl.BLEND),gl.colorMask(!0,!0,!0,!0),gl.viewport(0,0,sdfWidth,sdfHeight),gl.scissor(0,0,sdfWidth,sdfHeight),gl.blendFunc(gl.ONE,gl.ONE),gl.blendEquationSeparate(gl.FUNC_ADD,isWebGL2?gl.MAX:blendMinMaxExtension.MAX_EXT),gl.clear(gl.COLOR_BUFFER_BIT),isWebGL2?gl.drawArraysInstanced(gl.TRIANGLES,0,3,lineSegmentCoords.length/4):instancingExtension.drawArraysInstancedANGLE(gl.TRIANGLES,0,3,lineSegmentCoords.length/4)})}),withProgram("post",viewportQuadVertex,postFragment,function(program){program.setAttribute("aUV",2,gl.STATIC_DRAW,0,viewportUVs),program.setUniform("1i","tex",intermediateTextureUnit),gl.bindFramebuffer(gl.FRAMEBUFFER,framebuffer),gl.disable(gl.BLEND),gl.colorMask(0===channel,1===channel,2===channel,3===channel),gl.viewport(x,y,sdfWidth,sdfHeight),gl.scissor(x,y,sdfWidth,sdfHeight),gl.drawArrays(gl.TRIANGLES,0,3)})}),gl.isContextLost())throw handleContextLoss(),new Error("webgl context lost")})}function isSupported(glOrCanvas){var key=glOrCanvas&&glOrCanvas!==implicitContext?glOrCanvas.canvas||glOrCanvas:NULL_OBJECT,supported=supportByCanvas.get(key);if(void 0===supported){isTestingSupport=!0;var failReason=null;try{var expectedResult=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],testResult=generate$1(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,glOrCanvas);(supported=testResult&&expectedResult.length===testResult.length&&testResult.every(function(val,i){return val===expectedResult[i]}))||(failReason="bad trial run results",console.info(expectedResult,testResult))}catch(err){supported=!1,failReason=err.message}failReason&&console.warn("WebGL SDF generation not supported:",failReason),isTestingSupport=!1,supportByCanvas.set(key,supported)}return supported}__name(validateSupport,"validateSupport"),__name(generate$1,"generate$1"),__name(generateIntoCanvas$1,"generateIntoCanvas$1"),__name(generateIntoFramebuffer,"generateIntoFramebuffer"),__name(isSupported,"isSupported");var webgl=Object.freeze({__proto__:null,generate:generate$1,generateIntoCanvas:generateIntoCanvas$1,generateIntoFramebuffer,isSupported});function generate(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent){void 0===maxDistance&&(maxDistance=Math.max(viewBox[2]-viewBox[0],viewBox[3]-viewBox[1])/2),void 0===sdfExponent&&(sdfExponent=1);try{return generate$1.apply(webgl,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),generate$2.apply(javascript,arguments)}}function generateIntoCanvas(sdfWidth,sdfHeight,path,viewBox,maxDistance,sdfExponent,canvas,x,y,channel){void 0===maxDistance&&(maxDistance=Math.max(viewBox[2]-viewBox[0],viewBox[3]-viewBox[1])/2),void 0===sdfExponent&&(sdfExponent=1),void 0===x&&(x=0),void 0===y&&(y=0),void 0===channel&&(channel=0);try{return generateIntoCanvas$1.apply(webgl,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),generateIntoCanvas$2.apply(javascript,arguments)}}return __name(generate,"generate"),__name(generateIntoCanvas,"generateIntoCanvas"),exports2.forEachPathCommand=forEachPathCommand,exports2.generate=generate,exports2.generateIntoCanvas=generateIntoCanvas,exports2.javascript=javascript,exports2.pathToLineSegments=pathToLineSegments,exports2.webgl=webgl,exports2.webglUtils=webglUtils,Object.defineProperty(exports2,"__esModule",{value:!0}),exports2}({});return exports}function bidiFactory(){return function(exports){var DATA={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},TYPES={},TYPES_TO_NAMES={};TYPES.L=1,TYPES_TO_NAMES[1]="L",Object.keys(DATA).forEach(function(type,i){TYPES[type]=1<<i+1,TYPES_TO_NAMES[TYPES[type]]=type}),Object.freeze(TYPES);var ISOLATE_INIT_TYPES=TYPES.LRI|TYPES.RLI|TYPES.FSI,STRONG_TYPES=TYPES.L|TYPES.R|TYPES.AL,NEUTRAL_ISOLATE_TYPES=TYPES.B|TYPES.S|TYPES.WS|TYPES.ON|TYPES.FSI|TYPES.LRI|TYPES.RLI|TYPES.PDI,BN_LIKE_TYPES=TYPES.BN|TYPES.RLE|TYPES.LRE|TYPES.RLO|TYPES.LRO|TYPES.PDF,TRAILING_TYPES=TYPES.S|TYPES.WS|TYPES.B|ISOLATE_INIT_TYPES|TYPES.PDI|BN_LIKE_TYPES,map=null;function parseData(){if(!map){map=new Map;var loop=__name(function(type2){if(DATA.hasOwnProperty(type2)){var lastCode=0;DATA[type2].split(",").forEach(function(range){var ref=range.split("+"),skip=ref[0],step=ref[1];skip=parseInt(skip,36),step=step?parseInt(step,36):0,map.set(lastCode+=skip,TYPES[type2]);for(var i=0;i<step;i++)map.set(++lastCode,TYPES[type2])})}},"loop");for(var type in DATA)loop(type)}}function getBidiCharType(char){return parseData(),map.get(char.codePointAt(0))||TYPES.L}function getBidiCharTypeName(char){return TYPES_TO_NAMES[getBidiCharType(char)]}__name(parseData,"parseData"),__name(getBidiCharType,"getBidiCharType"),__name(getBidiCharTypeName,"getBidiCharTypeName");var openToClose,closeToOpen,canonical,data$1={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function parseCharacterMap(encodedString,includeReverse){var prevPair,lastCode=0,map2=new Map,reverseMap=includeReverse&&new Map;return encodedString.split(",").forEach(__name(function visit(entry){if(-1!==entry.indexOf("+"))for(var i=+entry;i--;)visit(prevPair);else{prevPair=entry;var ref=entry.split(">"),a=ref[0],b=ref[1];a=String.fromCodePoint(lastCode+=parseInt(a,36)),b=String.fromCodePoint(lastCode+=parseInt(b,36)),map2.set(a,b),includeReverse&&reverseMap.set(b,a)}},"visit")),{map:map2,reverseMap}}function parse$1(){if(!openToClose){var ref=parseCharacterMap(data$1.pairs,!0);openToClose=ref.map,closeToOpen=ref.reverseMap,canonical=parseCharacterMap(data$1.canonical,!1).map}}function openingToClosingBracket(char){return parse$1(),openToClose.get(char)||null}function closingToOpeningBracket(char){return parse$1(),closeToOpen.get(char)||null}function getCanonicalBracket(char){return parse$1(),canonical.get(char)||null}__name(parseCharacterMap,"parseCharacterMap"),__name(parse$1,"parse$1"),__name(openingToClosingBracket,"openingToClosingBracket"),__name(closingToOpeningBracket,"closingToOpeningBracket"),__name(getCanonicalBracket,"getCanonicalBracket");var TYPE_L=TYPES.L,TYPE_R=TYPES.R,TYPE_EN=TYPES.EN,TYPE_ES=TYPES.ES,TYPE_ET=TYPES.ET,TYPE_AN=TYPES.AN,TYPE_CS=TYPES.CS,TYPE_B=TYPES.B,TYPE_S=TYPES.S,TYPE_ON=TYPES.ON,TYPE_BN=TYPES.BN,TYPE_NSM=TYPES.NSM,TYPE_AL=TYPES.AL,TYPE_LRO=TYPES.LRO,TYPE_RLO=TYPES.RLO,TYPE_LRE=TYPES.LRE,TYPE_RLE=TYPES.RLE,TYPE_PDF=TYPES.PDF,TYPE_LRI=TYPES.LRI,TYPE_RLI=TYPES.RLI,TYPE_FSI=TYPES.FSI,TYPE_PDI=TYPES.PDI;function getEmbeddingLevels(string,baseDirection){for(var charTypes=new Uint32Array(string.length),i=0;i<string.length;i++)charTypes[i]=getBidiCharType(string[i]);var charTypeCounts=new Map;function changeCharType(i2,type2){var oldType=charTypes[i2];charTypes[i2]=type2,charTypeCounts.set(oldType,charTypeCounts.get(oldType)-1),oldType&NEUTRAL_ISOLATE_TYPES&&charTypeCounts.set(NEUTRAL_ISOLATE_TYPES,charTypeCounts.get(NEUTRAL_ISOLATE_TYPES)-1),charTypeCounts.set(type2,(charTypeCounts.get(type2)||0)+1),type2&NEUTRAL_ISOLATE_TYPES&&charTypeCounts.set(NEUTRAL_ISOLATE_TYPES,(charTypeCounts.get(NEUTRAL_ISOLATE_TYPES)||0)+1)}__name(changeCharType,"changeCharType");for(var embedLevels=new Uint8Array(string.length),isolationPairs=new Map,paragraphs=[],paragraph=null,i$1=0;i$1<string.length;i$1++)paragraph||paragraphs.push(paragraph={start:i$1,end:string.length-1,level:"rtl"===baseDirection?1:"ltr"===baseDirection?0:determineAutoEmbedLevel(i$1,!1)}),charTypes[i$1]&TYPE_B&&(paragraph.end=i$1,paragraph=null);for(var FORMATTING_TYPES=TYPE_RLE|TYPE_LRE|TYPE_RLO|TYPE_LRO|ISOLATE_INIT_TYPES|TYPE_PDI|TYPE_PDF|TYPE_B,nextEven=__name(function(n){return n+(1&n?1:2)},"nextEven"),nextOdd=__name(function(n){return n+(1&n?2:1)},"nextOdd"),paraIdx=0;paraIdx<paragraphs.length;paraIdx++){var statusStack=[{_level:(paragraph=paragraphs[paraIdx]).level,_override:0,_isolate:0}],stackTop=void 0,overflowIsolateCount=0,overflowEmbeddingCount=0,validIsolateCount=0;charTypeCounts.clear();for(var i$2=paragraph.start;i$2<=paragraph.end;i$2++){var charType=charTypes[i$2];if(stackTop=statusStack[statusStack.length-1],charTypeCounts.set(charType,(charTypeCounts.get(charType)||0)+1),charType&NEUTRAL_ISOLATE_TYPES&&charTypeCounts.set(NEUTRAL_ISOLATE_TYPES,(charTypeCounts.get(NEUTRAL_ISOLATE_TYPES)||0)+1),charType&FORMATTING_TYPES)if(charType&(TYPE_RLE|TYPE_LRE)){embedLevels[i$2]=stackTop._level;var level=(charType===TYPE_RLE?nextOdd:nextEven)(stackTop._level);level<=125&&!overflowIsolateCount&&!overflowEmbeddingCount?statusStack.push({_level:level,_override:0,_isolate:0}):overflowIsolateCount||overflowEmbeddingCount++}else if(charType&(TYPE_RLO|TYPE_LRO)){embedLevels[i$2]=stackTop._level;var level$1=(charType===TYPE_RLO?nextOdd:nextEven)(stackTop._level);level$1<=125&&!overflowIsolateCount&&!overflowEmbeddingCount?statusStack.push({_level:level$1,_override:charType&TYPE_RLO?TYPE_R:TYPE_L,_isolate:0}):overflowIsolateCount||overflowEmbeddingCount++}else if(charType&ISOLATE_INIT_TYPES){charType&TYPE_FSI&&(charType=1===determineAutoEmbedLevel(i$2+1,!0)?TYPE_RLI:TYPE_LRI),embedLevels[i$2]=stackTop._level,stackTop._override&&changeCharType(i$2,stackTop._override);var level$2=(charType===TYPE_RLI?nextOdd:nextEven)(stackTop._level);level$2<=125&&0===overflowIsolateCount&&0===overflowEmbeddingCount?(validIsolateCount++,statusStack.push({_level:level$2,_override:0,_isolate:1,_isolInitIndex:i$2})):overflowIsolateCount++}else if(charType&TYPE_PDI){if(overflowIsolateCount>0)overflowIsolateCount--;else if(validIsolateCount>0){for(overflowEmbeddingCount=0;!statusStack[statusStack.length-1]._isolate;)statusStack.pop();var isolInitIndex=statusStack[statusStack.length-1]._isolInitIndex;null!=isolInitIndex&&(isolationPairs.set(isolInitIndex,i$2),isolationPairs.set(i$2,isolInitIndex)),statusStack.pop(),validIsolateCount--}embedLevels[i$2]=(stackTop=statusStack[statusStack.length-1])._level,stackTop._override&&changeCharType(i$2,stackTop._override)}else charType&TYPE_PDF?(0===overflowIsolateCount&&(overflowEmbeddingCount>0?overflowEmbeddingCount--:!stackTop._isolate&&statusStack.length>1&&(statusStack.pop(),stackTop=statusStack[statusStack.length-1])),embedLevels[i$2]=stackTop._level):charType&TYPE_B&&(embedLevels[i$2]=paragraph.level);else embedLevels[i$2]=stackTop._level,stackTop._override&&charType!==TYPE_BN&&changeCharType(i$2,stackTop._override)}for(var levelRuns=[],currentRun=null,i$3=paragraph.start;i$3<=paragraph.end;i$3++){var charType$1=charTypes[i$3];if(!(charType$1&BN_LIKE_TYPES)){var lvl=embedLevels[i$3],isIsolInit=charType$1&ISOLATE_INIT_TYPES,isPDI=charType$1===TYPE_PDI;currentRun&&lvl===currentRun._level?(currentRun._end=i$3,currentRun._endsWithIsolInit=isIsolInit):levelRuns.push(currentRun={_start:i$3,_end:i$3,_level:lvl,_startsWithPDI:isPDI,_endsWithIsolInit:isIsolInit})}}for(var isolatingRunSeqs=[],runIdx=0;runIdx<levelRuns.length;runIdx++){var run=levelRuns[runIdx];if(!run._startsWithPDI||run._startsWithPDI&&!isolationPairs.has(run._start)){for(var seqRuns=[currentRun=run],pdiIndex=void 0;currentRun&&currentRun._endsWithIsolInit&&null!=(pdiIndex=isolationPairs.get(currentRun._end));)for(var i$4=runIdx+1;i$4<levelRuns.length;i$4++)if(levelRuns[i$4]._start===pdiIndex){seqRuns.push(currentRun=levelRuns[i$4]);break}for(var seqIndices=[],i$5=0;i$5<seqRuns.length;i$5++)for(var run$1=seqRuns[i$5],j=run$1._start;j<=run$1._end;j++)seqIndices.push(j);for(var firstLevel=embedLevels[seqIndices[0]],prevLevel=paragraph.level,i$6=seqIndices[0]-1;i$6>=0;i$6--)if(!(charTypes[i$6]&BN_LIKE_TYPES)){prevLevel=embedLevels[i$6];break}var lastIndex=seqIndices[seqIndices.length-1],lastLevel=embedLevels[lastIndex],nextLevel=paragraph.level;if(!(charTypes[lastIndex]&ISOLATE_INIT_TYPES))for(var i$7=lastIndex+1;i$7<=paragraph.end;i$7++)if(!(charTypes[i$7]&BN_LIKE_TYPES)){nextLevel=embedLevels[i$7];break}isolatingRunSeqs.push({_seqIndices:seqIndices,_sosType:Math.max(prevLevel,firstLevel)%2?TYPE_R:TYPE_L,_eosType:Math.max(nextLevel,lastLevel)%2?TYPE_R:TYPE_L})}}for(var seqIdx=0;seqIdx<isolatingRunSeqs.length;seqIdx++){var ref=isolatingRunSeqs[seqIdx],seqIndices$1=ref._seqIndices,sosType=ref._sosType,eosType=ref._eosType;if(charTypeCounts.get(TYPE_NSM))for(var si=0;si<seqIndices$1.length;si++){var i$8=seqIndices$1[si];if(charTypes[i$8]&TYPE_NSM){for(var prevType=sosType,sj=si-1;sj>=0;sj--)if(!(charTypes[seqIndices$1[sj]]&BN_LIKE_TYPES)){prevType=charTypes[seqIndices$1[sj]];break}changeCharType(i$8,prevType&(ISOLATE_INIT_TYPES|TYPE_PDI)?TYPE_ON:prevType)}}if(charTypeCounts.get(TYPE_EN))for(var si$1=0;si$1<seqIndices$1.length;si$1++){var i$9=seqIndices$1[si$1];if(charTypes[i$9]&TYPE_EN)for(var sj$1=si$1-1;sj$1>=-1;sj$1--){var prevCharType=-1===sj$1?sosType:charTypes[seqIndices$1[sj$1]];if(prevCharType&STRONG_TYPES){prevCharType===TYPE_AL&&changeCharType(i$9,TYPE_AN);break}}}if(charTypeCounts.get(TYPE_AL))for(var si$2=0;si$2<seqIndices$1.length;si$2++){var i$10=seqIndices$1[si$2];charTypes[i$10]&TYPE_AL&&changeCharType(i$10,TYPE_R)}if(charTypeCounts.get(TYPE_ES)||charTypeCounts.get(TYPE_CS))for(var si$3=1;si$3<seqIndices$1.length-1;si$3++){var i$11=seqIndices$1[si$3];if(charTypes[i$11]&(TYPE_ES|TYPE_CS)){for(var prevType$1=0,nextType=0,sj$2=si$3-1;sj$2>=0&&(prevType$1=charTypes[seqIndices$1[sj$2]])&BN_LIKE_TYPES;sj$2--);for(var sj$3=si$3+1;sj$3<seqIndices$1.length&&(nextType=charTypes[seqIndices$1[sj$3]])&BN_LIKE_TYPES;sj$3++);prevType$1===nextType&&(charTypes[i$11]===TYPE_ES?prevType$1===TYPE_EN:prevType$1&(TYPE_EN|TYPE_AN))&&changeCharType(i$11,prevType$1)}}if(charTypeCounts.get(TYPE_EN))for(var si$4=0;si$4<seqIndices$1.length;si$4++)if(charTypes[seqIndices$1[si$4]]&TYPE_EN){for(var sj$4=si$4-1;sj$4>=0&&charTypes[seqIndices$1[sj$4]]&(TYPE_ET|BN_LIKE_TYPES);sj$4--)changeCharType(seqIndices$1[sj$4],TYPE_EN);for(var sj$5=si$4+1;sj$5<seqIndices$1.length&&charTypes[seqIndices$1[sj$5]]&(TYPE_ET|BN_LIKE_TYPES);sj$5++)changeCharType(seqIndices$1[sj$5],TYPE_EN)}if(charTypeCounts.get(TYPE_ET)||charTypeCounts.get(TYPE_ES)||charTypeCounts.get(TYPE_CS))for(var si$5=0;si$5<seqIndices$1.length;si$5++){var i$13=seqIndices$1[si$5];if(charTypes[i$13]&(TYPE_ET|TYPE_ES|TYPE_CS)){changeCharType(i$13,TYPE_ON);for(var sj$6=si$5-1;sj$6>=0&&charTypes[seqIndices$1[sj$6]]&BN_LIKE_TYPES;sj$6--)changeCharType(seqIndices$1[sj$6],TYPE_ON);for(var sj$7=si$5+1;sj$7<seqIndices$1.length&&charTypes[seqIndices$1[sj$7]]&BN_LIKE_TYPES;sj$7++)changeCharType(seqIndices$1[sj$7],TYPE_ON)}}if(charTypeCounts.get(TYPE_EN))for(var si$6=0,prevStrongType=sosType;si$6<seqIndices$1.length;si$6++){var i$14=seqIndices$1[si$6],type=charTypes[i$14];type&TYPE_EN?prevStrongType===TYPE_L&&changeCharType(i$14,TYPE_L):type&STRONG_TYPES&&(prevStrongType=type)}if(charTypeCounts.get(NEUTRAL_ISOLATE_TYPES)){for(var R_TYPES_FOR_N_STEPS=TYPE_R|TYPE_EN|TYPE_AN,STRONG_TYPES_FOR_N_STEPS=R_TYPES_FOR_N_STEPS|TYPE_L,bracketPairs=[],openerStack=[],si$7=0;si$7<seqIndices$1.length;si$7++)if(charTypes[seqIndices$1[si$7]]&NEUTRAL_ISOLATE_TYPES){var char=string[seqIndices$1[si$7]],oppositeBracket=void 0;if(null!==openingToClosingBracket(char)){if(!(openerStack.length<63))break;openerStack.push({char,seqIndex:si$7})}else if(null!==(oppositeBracket=closingToOpeningBracket(char)))for(var stackIdx=openerStack.length-1;stackIdx>=0;stackIdx--){var stackChar=openerStack[stackIdx].char;if(stackChar===oppositeBracket||stackChar===closingToOpeningBracket(getCanonicalBracket(char))||openingToClosingBracket(getCanonicalBracket(stackChar))===char){bracketPairs.push([openerStack[stackIdx].seqIndex,si$7]),openerStack.length=stackIdx;break}}}bracketPairs.sort(function(a,b){return a[0]-b[0]});for(var pairIdx=0;pairIdx<bracketPairs.length;pairIdx++){for(var ref$1=bracketPairs[pairIdx],openSeqIdx=ref$1[0],closeSeqIdx=ref$1[1],foundStrongType=!1,useStrongType=0,si$8=openSeqIdx+1;si$8<closeSeqIdx;si$8++){var i$15=seqIndices$1[si$8];if(charTypes[i$15]&STRONG_TYPES_FOR_N_STEPS){foundStrongType=!0;var lr=charTypes[i$15]&R_TYPES_FOR_N_STEPS?TYPE_R:TYPE_L;if(lr===getEmbedDirection(i$15)){useStrongType=lr;break}}}if(foundStrongType&&!useStrongType){useStrongType=sosType;for(var si$9=openSeqIdx-1;si$9>=0;si$9--){var i$16=seqIndices$1[si$9];if(charTypes[i$16]&STRONG_TYPES_FOR_N_STEPS){var lr$1=charTypes[i$16]&R_TYPES_FOR_N_STEPS?TYPE_R:TYPE_L;useStrongType=lr$1!==getEmbedDirection(i$16)?lr$1:getEmbedDirection(i$16);break}}}if(useStrongType){if(charTypes[seqIndices$1[openSeqIdx]]=charTypes[seqIndices$1[closeSeqIdx]]=useStrongType,useStrongType!==getEmbedDirection(seqIndices$1[openSeqIdx]))for(var si$10=openSeqIdx+1;si$10<seqIndices$1.length;si$10++)if(!(charTypes[seqIndices$1[si$10]]&BN_LIKE_TYPES)){getBidiCharType(string[seqIndices$1[si$10]])&TYPE_NSM&&(charTypes[seqIndices$1[si$10]]=useStrongType);break}if(useStrongType!==getEmbedDirection(seqIndices$1[closeSeqIdx]))for(var si$11=closeSeqIdx+1;si$11<seqIndices$1.length;si$11++)if(!(charTypes[seqIndices$1[si$11]]&BN_LIKE_TYPES)){getBidiCharType(string[seqIndices$1[si$11]])&TYPE_NSM&&(charTypes[seqIndices$1[si$11]]=useStrongType);break}}}for(var si$12=0;si$12<seqIndices$1.length;si$12++)if(charTypes[seqIndices$1[si$12]]&NEUTRAL_ISOLATE_TYPES){for(var niRunStart=si$12,niRunEnd=si$12,prevType$2=sosType,si2=si$12-1;si2>=0;si2--){if(!(charTypes[seqIndices$1[si2]]&BN_LIKE_TYPES)){prevType$2=charTypes[seqIndices$1[si2]]&R_TYPES_FOR_N_STEPS?TYPE_R:TYPE_L;break}niRunStart=si2}for(var nextType$1=eosType,si2$1=si$12+1;si2$1<seqIndices$1.length;si2$1++){if(!(charTypes[seqIndices$1[si2$1]]&(NEUTRAL_ISOLATE_TYPES|BN_LIKE_TYPES))){nextType$1=charTypes[seqIndices$1[si2$1]]&R_TYPES_FOR_N_STEPS?TYPE_R:TYPE_L;break}niRunEnd=si2$1}for(var sj$8=niRunStart;sj$8<=niRunEnd;sj$8++)charTypes[seqIndices$1[sj$8]]=prevType$2===nextType$1?prevType$2:getEmbedDirection(seqIndices$1[sj$8]);si$12=niRunEnd}}}for(var i$17=paragraph.start;i$17<=paragraph.end;i$17++){var type$1=charTypes[i$17];if(1&embedLevels[i$17]?type$1&(TYPE_L|TYPE_EN|TYPE_AN)&&embedLevels[i$17]++:type$1&TYPE_R?embedLevels[i$17]++:type$1&(TYPE_AN|TYPE_EN)&&(embedLevels[i$17]+=2),type$1&BN_LIKE_TYPES&&(embedLevels[i$17]=0===i$17?paragraph.level:embedLevels[i$17-1]),i$17===paragraph.end||getBidiCharType(string[i$17])&(TYPE_S|TYPE_B))for(var j$1=i$17;j$1>=0&&getBidiCharType(string[j$1])&TRAILING_TYPES;j$1--)embedLevels[j$1]=paragraph.level}}return{levels:embedLevels,paragraphs};function determineAutoEmbedLevel(start,isFSI){for(var i2=start;i2<string.length;i2++){var charType2=charTypes[i2];if(charType2&(TYPE_R|TYPE_AL))return 1;if(charType2&(TYPE_B|TYPE_L)||isFSI&&charType2===TYPE_PDI)return 0;if(charType2&ISOLATE_INIT_TYPES){var pdi=indexOfMatchingPDI(i2);i2=-1===pdi?string.length:pdi}}return 0}function indexOfMatchingPDI(isolateStart){for(var isolationLevel=1,i2=isolateStart+1;i2<string.length;i2++){var charType2=charTypes[i2];if(charType2&TYPE_B)break;if(charType2&TYPE_PDI){if(0==--isolationLevel)return i2}else charType2&ISOLATE_INIT_TYPES&&isolationLevel++}return-1}function getEmbedDirection(i2){return 1&embedLevels[i2]?TYPE_R:TYPE_L}}__name(getEmbeddingLevels,"getEmbeddingLevels");var mirrorMap,data="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1";function parse(){if(!mirrorMap){var ref=parseCharacterMap(data,!0),map2=ref.map;ref.reverseMap.forEach(function(value,key){map2.set(key,value)}),mirrorMap=map2}}function getMirroredCharacter(char){return parse(),mirrorMap.get(char)||null}function getMirroredCharactersMap(string,embeddingLevels,start,end){var strLen=string.length;start=Math.max(0,null==start?0:+start),end=Math.min(strLen-1,null==end?strLen-1:+end);for(var map2=new Map,i=start;i<=end;i++)if(1&embeddingLevels[i]){var mirror=getMirroredCharacter(string[i]);null!==mirror&&map2.set(i,mirror)}return map2}function getReorderSegments(string,embeddingLevelsResult,start,end){var strLen=string.length;start=Math.max(0,null==start?0:+start),end=Math.min(strLen-1,null==end?strLen-1:+end);var segments=[];return embeddingLevelsResult.paragraphs.forEach(function(paragraph){var lineStart=Math.max(start,paragraph.start),lineEnd=Math.min(end,paragraph.end);if(lineStart<lineEnd){for(var lineLevels=embeddingLevelsResult.levels.slice(lineStart,lineEnd+1),i=lineEnd;i>=lineStart&&getBidiCharType(string[i])&TRAILING_TYPES;i--)lineLevels[i]=paragraph.level;for(var maxLevel=paragraph.level,minOddLevel=1/0,i$1=0;i$1<lineLevels.length;i$1++){var level=lineLevels[i$1];level>maxLevel&&(maxLevel=level),level<minOddLevel&&(minOddLevel=1|level)}for(var lvl=maxLevel;lvl>=minOddLevel;lvl--)for(var i$2=0;i$2<lineLevels.length;i$2++)if(lineLevels[i$2]>=lvl){for(var segStart=i$2;i$2+1<lineLevels.length&&lineLevels[i$2+1]>=lvl;)i$2++;i$2>segStart&&segments.push([segStart+start,i$2+start])}}}),segments}function getReorderedString(string,embedLevelsResult,start,end){var indices=getReorderedIndices(string,embedLevelsResult,start,end),chars=[].concat(string);return indices.forEach(function(charIndex,i){chars[i]=(1&embedLevelsResult.levels[charIndex]?getMirroredCharacter(string[charIndex]):null)||string[charIndex]}),chars.join("")}function getReorderedIndices(string,embedLevelsResult,start,end){for(var segments=getReorderSegments(string,embedLevelsResult,start,end),indices=[],i=0;i<string.length;i++)indices[i]=i;return segments.forEach(function(ref){for(var end2=ref[1],slice=indices.slice(ref[0],end2+1),i2=slice.length;i2--;)indices[end2-i2]=slice[i2]}),indices}return __name(parse,"parse"),__name(getMirroredCharacter,"getMirroredCharacter"),__name(getMirroredCharactersMap,"getMirroredCharactersMap"),__name(getReorderSegments,"getReorderSegments"),__name(getReorderedString,"getReorderedString"),__name(getReorderedIndices,"getReorderedIndices"),exports.closingToOpeningBracket=closingToOpeningBracket,exports.getBidiCharType=getBidiCharType,exports.getBidiCharTypeName=getBidiCharTypeName,exports.getCanonicalBracket=getCanonicalBracket,exports.getEmbeddingLevels=getEmbeddingLevels,exports.getMirroredCharacter=getMirroredCharacter,exports.getMirroredCharactersMap=getMirroredCharactersMap,exports.getReorderSegments=getReorderSegments,exports.getReorderedIndices=getReorderedIndices,exports.getReorderedString=getReorderedString,exports.openingToClosingBracket=openingToClosingBracket,Object.defineProperty(exports,"__esModule",{value:!0}),exports}({})}__name(defineWorkerModule,"defineWorkerModule"),__name(terminateWorker,"terminateWorker"),__name(stringifyFunction,"stringifyFunction"),__name(getWorker,"getWorker"),__name(callWorker,"callWorker"),__name(SDFGenerator,"SDFGenerator"),__name(bidiFactory,"bidiFactory");const bidi=bidiFactory,voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(source){function replace(match,include){let chunk=three_module.WdD[include];return chunk?expandShaderIncludes(chunk):match}return __name(replace,"replace"),source.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,replace)}__name(expandShaderIncludes,"expandShaderIncludes");const _lut=[];for(let i=0;i<256;i++)_lut[i]=(i<16?"0":"")+i.toString(16);function generateUUID(){const d0=4294967295*Math.random()|0,d1=4294967295*Math.random()|0,d2=4294967295*Math.random()|0,d3=4294967295*Math.random()|0;return(_lut[255&d0]+_lut[d0>>8&255]+_lut[d0>>16&255]+_lut[d0>>24&255]+"-"+_lut[255&d1]+_lut[d1>>8&255]+"-"+_lut[d1>>16&15|64]+_lut[d1>>24&255]+"-"+_lut[63&d2|128]+_lut[d2>>8&255]+"-"+_lut[d2>>16&255]+_lut[d2>>24&255]+_lut[255&d3]+_lut[d3>>8&255]+_lut[d3>>16&255]+_lut[d3>>24&255]).toUpperCase()}__name(generateUUID,"generateUUID");const troika_three_utils_esm_assign=Object.assign||function(){let target=arguments[0];for(let i=1,len=arguments.length;i<len;i++){let source=arguments[i];if(source)for(let prop in source)Object.prototype.hasOwnProperty.call(source,prop)&&(target[prop]=source[prop])}return target},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(baseMaterial,options){const optionsKey=getKeyForOptions(options);let ctorsByDerivation=CONSTRUCTOR_CACHE.get(baseMaterial);if(ctorsByDerivation||CONSTRUCTOR_CACHE.set(baseMaterial,ctorsByDerivation=Object.create(null)),ctorsByDerivation[optionsKey])return new ctorsByDerivation[optionsKey];const privateBeforeCompileProp=`_onBeforeCompile${optionsKey}`,onBeforeCompile=__name(function(shaderInfo,renderer){baseMaterial.onBeforeCompile.call(this,shaderInfo,renderer);const cacheKey=this.customProgramCacheKey()+"|"+shaderInfo.vertexShader+"|"+shaderInfo.fragmentShader;let upgradedShaders=SHADER_UPGRADE_CACHE[cacheKey];if(!upgradedShaders){const upgraded=upgradeShaders(this,shaderInfo,options,optionsKey);upgradedShaders=SHADER_UPGRADE_CACHE[cacheKey]=upgraded}shaderInfo.vertexShader=upgradedShaders.vertexShader,shaderInfo.fragmentShader=upgradedShaders.fragmentShader,troika_three_utils_esm_assign(shaderInfo.uniforms,this.uniforms),options.timeUniform&&(shaderInfo.uniforms[options.timeUniform]={get value(){return Date.now()-epoch}}),this[privateBeforeCompileProp]&&this[privateBeforeCompileProp](shaderInfo)},"onBeforeCompile"),DerivedMaterial=__name(function(){return derive(options.chained?baseMaterial:baseMaterial.clone())},"DerivedMaterial"),derive=__name(function(base){const derived=Object.create(base,descriptor);return Object.defineProperty(derived,"baseMaterial",{value:baseMaterial}),Object.defineProperty(derived,"id",{value:materialInstanceId++}),derived.uuid=generateUUID(),derived.uniforms=troika_three_utils_esm_assign({},base.uniforms,options.uniforms),derived.defines=troika_three_utils_esm_assign({},base.defines,options.defines),derived.defines[`TROIKA_DERIVED_MATERIAL_${optionsKey}`]="",derived.extensions=troika_three_utils_esm_assign({},base.extensions,options.extensions),derived._listeners=void 0,derived},"derive"),descriptor={constructor:{value:DerivedMaterial},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return baseMaterial.customProgramCacheKey()+"|"+optionsKey}},onBeforeCompile:{get:()=>onBeforeCompile,set(fn){this[privateBeforeCompileProp]=fn}},copy:{writable:!0,configurable:!0,value:function(source){return baseMaterial.copy.call(this,source),!baseMaterial.isShaderMaterial&&!baseMaterial.isDerivedMaterial&&(troika_three_utils_esm_assign(this.extensions,source.extensions),troika_three_utils_esm_assign(this.defines,source.defines),troika_three_utils_esm_assign(this.uniforms,three_module.rDY.clone(source.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const newBase=new baseMaterial.constructor;return derive(newBase).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let depthMaterial=this._depthMaterial;return depthMaterial||(depthMaterial=this._depthMaterial=createDerivedMaterial(baseMaterial.isDerivedMaterial?baseMaterial.getDepthMaterial():new three_module.lRF({depthPacking:three_module.mSO}),options),depthMaterial.defines.IS_DEPTH_MATERIAL="",depthMaterial.uniforms=this.uniforms),depthMaterial}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let distanceMaterial=this._distanceMaterial;return distanceMaterial||(distanceMaterial=this._distanceMaterial=createDerivedMaterial(baseMaterial.isDerivedMaterial?baseMaterial.getDistanceMaterial():new three_module.Lun,options),distanceMaterial.defines.IS_DISTANCE_MATERIAL="",distanceMaterial.uniforms=this.uniforms),distanceMaterial}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial,_distanceMaterial}=this;_depthMaterial&&_depthMaterial.dispose(),_distanceMaterial&&_distanceMaterial.dispose(),baseMaterial.dispose.call(this)}}};return ctorsByDerivation[optionsKey]=DerivedMaterial,new DerivedMaterial}function upgradeShaders(material,{vertexShader,fragmentShader},options,key){let{vertexDefs:vertexDefs2,vertexMainIntro,vertexMainOutro,vertexTransform:vertexTransform2,fragmentDefs:fragmentDefs2,fragmentMainIntro:fragmentMainIntro2,fragmentMainOutro,fragmentColorTransform,customRewriter,timeUniform}=options;if(vertexDefs2=vertexDefs2||"",vertexMainIntro=vertexMainIntro||"",vertexMainOutro=vertexMainOutro||"",fragmentDefs2=fragmentDefs2||"",fragmentMainIntro2=fragmentMainIntro2||"",fragmentMainOutro=fragmentMainOutro||"",(vertexTransform2||customRewriter)&&(vertexShader=expandShaderIncludes(vertexShader)),(fragmentColorTransform||customRewriter)&&(fragmentShader=expandShaderIncludes(fragmentShader=fragmentShader.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),customRewriter){let res=customRewriter({vertexShader,fragmentShader});vertexShader=res.vertexShader,fragmentShader=res.fragmentShader}if(fragmentColorTransform){let postChunks=[];fragmentShader=fragmentShader.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,match=>(postChunks.push(match),"")),fragmentMainOutro=`${fragmentColorTransform}\n${postChunks.join("\n")}\n${fragmentMainOutro}`}if(timeUniform){const code=`\nuniform float ${timeUniform};\n`;vertexDefs2=code+vertexDefs2,fragmentDefs2=code+fragmentDefs2}return vertexTransform2&&(vertexDefs2=`${vertexDefs2}\nvoid troikaVertexTransform${key}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${vertexTransform2}\n}\n`,vertexMainIntro=`\ntroika_position_${key} = vec3(position);\ntroika_normal_${key} = vec3(normal);\ntroika_uv_${key} = vec2(uv);\ntroikaVertexTransform${key}(troika_position_${key}, troika_normal_${key}, troika_uv_${key});\n${vertexMainIntro}\n`,vertexShader=(vertexShader=`vec3 troika_position_${key};\nvec3 troika_normal_${key};\nvec2 troika_uv_${key};\n${vertexShader}\n`).replace(/\b(position|normal|uv)\b/g,(match,match1,index,fullStr)=>/\battribute\s+vec[23]\s+$/.test(fullStr.substr(0,index))?match1:`troika_${match1}_${key}`),material.map&&material.map.channel>0||(vertexShader=vertexShader.replace(/\bMAP_UV\b/g,`troika_uv_${key}`))),{vertexShader:vertexShader=injectIntoShaderCode(vertexShader,key,vertexDefs2,vertexMainIntro,vertexMainOutro),fragmentShader:fragmentShader=injectIntoShaderCode(fragmentShader,key,fragmentDefs2,fragmentMainIntro2,fragmentMainOutro)}}function injectIntoShaderCode(shaderCode,id,defs,intro,outro){return(intro||outro||defs)&&(shaderCode=shaderCode.replace(voidMainRegExp,`\n${defs}\nvoid troikaOrigMain${id}() {`),shaderCode+=`\nvoid main() {\n  ${intro}\n  troikaOrigMain${id}();\n  ${outro}\n}`),shaderCode}function optionsJsonReplacer(key,value){return"uniforms"===key?void 0:"function"==typeof value?value.toString():value}__name(createDerivedMaterial,"createDerivedMaterial"),__name(upgradeShaders,"upgradeShaders"),__name(injectIntoShaderCode,"injectIntoShaderCode"),__name(optionsJsonReplacer,"optionsJsonReplacer");let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(options){const optionsHash=JSON.stringify(options,optionsJsonReplacer);let id=optionsHashesToIds.get(optionsHash);return null==id&&optionsHashesToIds.set(optionsHash,id=++_idCtr),id}__name(getKeyForOptions,"getKeyForOptions");const MATERIAL_TYPES_TO_SHADERS={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function createBezierMeshMaterial(baseMaterial){return createDerivedMaterial(baseMaterial,{chained:!0,uniforms:{pointA:{value:new Vector3},controlA:{value:new Vector3},controlB:{value:new Vector3},pointB:{value:new Vector3},radius:{value:.01},dashing:{value:new Vector3}},vertexDefs:null,vertexTransform:null,fragmentDefs:null,fragmentMainIntro:null})}__name(function getShadersForMaterial(material){let builtinType=MATERIAL_TYPES_TO_SHADERS[material.type];return builtinType?ShaderLib[builtinType]:material},"getShadersForMaterial"),__name(function getShaderUniformTypes(shader){let match,uniformRE=/\buniform\s+(int|float|vec[234]|mat[34])\s+([A-Za-z_][\w]*)/g,uniforms=Object.create(null);for(;null!==(match=uniformRE.exec(shader));)uniforms[match[2]]=match[1];return uniforms},"getShaderUniformTypes"),__name(function invertMatrix4(srcMatrix,tgtMatrix=new Matrix4){return"function"==typeof tgtMatrix.invert?tgtMatrix.copy(srcMatrix).invert():tgtMatrix.getInverse(srcMatrix),tgtMatrix},"invertMatrix4"),__name(createBezierMeshMaterial,"createBezierMeshMaterial");let geometry=null;const defaultBaseMaterial=new three_module.Wid({color:16777215,side:three_module.ehD});class BezierMesh extends(null){static getGeometry(){return geometry||(geometry=new CylinderGeometry(1,1,1,6,64).translate(0,.5,0))}constructor(){super(BezierMesh.getGeometry(),defaultBaseMaterial),this.pointA=new Vector3,this.controlA=new Vector3,this.controlB=new Vector3,this.pointB=new Vector3,this.radius=.01,this.dashArray=new Vector2,this.dashOffset=0,this.frustumCulled=!1}get material(){let derivedMaterial=this._derivedMaterial;const baseMaterial=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultBaseMaterial.clone());return(!derivedMaterial||derivedMaterial.baseMaterial!==baseMaterial)&&(derivedMaterial=this._derivedMaterial=createBezierMeshMaterial(baseMaterial),baseMaterial.addEventListener("dispose",__name(function onDispose(){baseMaterial.removeEventListener("dispose",onDispose),derivedMaterial.dispose()},"onDispose"))),derivedMaterial}set material(baseMaterial){this._baseMaterial=baseMaterial}get customDepthMaterial(){return this.material.getDepthMaterial()}get customDistanceMaterial(){return this.material.getDistanceMaterial()}onBeforeRender(){const{uniforms}=this.material,{pointA,controlA,controlB,pointB,radius,dashArray,dashOffset}=this;uniforms.pointA.value.copy(pointA),uniforms.controlA.value.copy(controlA),uniforms.controlB.value.copy(controlB),uniforms.pointB.value.copy(pointB),uniforms.radius.value=radius,uniforms.dashing.value.set(dashArray.x,dashArray.y,dashOffset||0)}raycast(){}}function createTypesetter(fontParser,bidi2,config){const{defaultFontURL}=config,fonts=Object.create(null),INF=1/0,DEFAULT_IGNORABLE_CHARS=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,lineBreakingWhiteSpace="[^\\S\\u00A0]",BREAK_AFTER_CHARS=new RegExp(`${lineBreakingWhiteSpace}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function doLoadFont(url,callback){function tryLoad(){const onError=__name(err=>{console.error(`Failure loading font ${url}${url===defaultFontURL?"":"; trying fallback"}`,err),url!==defaultFontURL&&(url=defaultFontURL,tryLoad())},"onError");try{const request=new XMLHttpRequest;request.open("get",url,!0),request.responseType="arraybuffer",request.onload=function(){if(request.status>=400)onError(new Error(request.statusText));else if(request.status>0)try{const fontObj=fontParser(request.response);callback(fontObj)}catch(e){onError(e)}},request.onerror=onError,request.send()}catch(err){onError(err)}}__name(tryLoad,"tryLoad"),tryLoad()}function loadFont(fontUrl,callback){fontUrl||(fontUrl=defaultFontURL);let font=fonts[fontUrl];font?font.pending?font.pending.push(callback):callback(font):(fonts[fontUrl]={pending:[callback]},doLoadFont(fontUrl,fontObj=>{let callbacks=fonts[fontUrl].pending;fonts[fontUrl]=fontObj,callbacks.forEach(cb=>cb(fontObj))}))}function typeset({text="",font=defaultFontURL,sdfGlyphSize=64,fontSize=1,letterSpacing=0,lineHeight="normal",maxWidth=INF,direction,textAlign="left",textIndent=0,whiteSpace="normal",overflowWrap="normal",anchorX=0,anchorY=0,includeCaretPositions=!1,chunkedBoundsSize=8192,colorRanges=null},callback,metricsOnly=!1){const mainStart=now2(),timings={fontLoad:0,typesetting:0};text.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),text=text.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),fontSize=+fontSize,letterSpacing=+letterSpacing,maxWidth=+maxWidth,lineHeight=lineHeight||"normal",textIndent=+textIndent,loadFont(font,fontObj=>{const hasMaxWidth=isFinite(maxWidth);let glyphIds=null,glyphPositions=null,glyphData=null,glyphColors=null,caretPositions=null,visibleBounds=null,chunkedBounds=null,maxLineWidth=0,renderableGlyphCount=0,canWrap="nowrap"!==whiteSpace;const{ascender,descender,unitsPerEm,lineGap,capHeight,xHeight}=fontObj;timings.fontLoad=now2()-mainStart;const typesetStart=now2(),fontSizeMult=fontSize/unitsPerEm;"normal"===lineHeight&&(lineHeight=(ascender-descender+lineGap)/unitsPerEm);const halfLeading=((lineHeight*=fontSize)-(ascender-descender)*fontSizeMult)/2,topBaseline=-(ascender*fontSizeMult+halfLeading),caretHeight=Math.min(lineHeight,(ascender-descender)*fontSizeMult),caretBottomOffset=(ascender+descender)/2*fontSizeMult-caretHeight/2;let lineXOffset=textIndent,currentLine=new TextLine;const lines=[currentLine];fontObj.forEachGlyph(text,fontSize,letterSpacing,(glyphObj,glyphX,charIndex)=>{const char=text.charAt(charIndex),glyphWidth=glyphObj.advanceWidth*fontSizeMult,curLineCount=currentLine.count;let nextLine;if("isEmpty"in glyphObj||(glyphObj.isWhitespace=!!char&&new RegExp(lineBreakingWhiteSpace).test(char),glyphObj.canBreakAfter=!!char&&BREAK_AFTER_CHARS.test(char),glyphObj.isEmpty=glyphObj.xMin===glyphObj.xMax||glyphObj.yMin===glyphObj.yMax||DEFAULT_IGNORABLE_CHARS.test(char)),!glyphObj.isWhitespace&&!glyphObj.isEmpty&&renderableGlyphCount++,canWrap&&hasMaxWidth&&!glyphObj.isWhitespace&&glyphX+glyphWidth+lineXOffset>maxWidth&&curLineCount){if(currentLine.glyphAt(curLineCount-1).glyphObj.canBreakAfter)nextLine=new TextLine,lineXOffset=-glyphX;else for(let i=curLineCount;i--;){if(0===i&&"break-word"===overflowWrap){nextLine=new TextLine,lineXOffset=-glyphX;break}if(currentLine.glyphAt(i).glyphObj.canBreakAfter){nextLine=currentLine.splitAt(i+1);const adjustX=nextLine.glyphAt(0).x;lineXOffset-=adjustX;for(let j=nextLine.count;j--;)nextLine.glyphAt(j).x-=adjustX;break}}nextLine&&(currentLine.isSoftWrapped=!0,currentLine=nextLine,lines.push(currentLine),maxLineWidth=maxWidth)}let fly=currentLine.glyphAt(currentLine.count);fly.glyphObj=glyphObj,fly.x=glyphX+lineXOffset,fly.width=glyphWidth,fly.charIndex=charIndex,"\n"===char&&(currentLine=new TextLine,lines.push(currentLine),lineXOffset=-(glyphX+glyphWidth+letterSpacing*fontSize)+textIndent)}),lines.forEach(line=>{for(let i=line.count;i--;){let{glyphObj,x,width}=line.glyphAt(i);if(!glyphObj.isWhitespace)return line.width=x+width,void(line.width>maxLineWidth&&(maxLineWidth=line.width))}});let anchorXOffset=0,anchorYOffset=0;if(anchorX&&("number"==typeof anchorX?anchorXOffset=-anchorX:"string"==typeof anchorX&&(anchorXOffset=-maxLineWidth*("left"===anchorX?0:"center"===anchorX?.5:"right"===anchorX?1:parsePercent(anchorX)))),anchorY)if("number"==typeof anchorY)anchorYOffset=-anchorY;else if("string"==typeof anchorY){let height=lines.length*lineHeight;anchorYOffset="top"===anchorY?0:"top-baseline"===anchorY?-topBaseline:"top-cap"===anchorY?-topBaseline-capHeight*fontSizeMult:"top-ex"===anchorY?-topBaseline-xHeight*fontSizeMult:"middle"===anchorY?height/2:"bottom"===anchorY?height:"bottom-baseline"===anchorY?height-halfLeading+descender*fontSizeMult:parsePercent(anchorY)*height}if(!metricsOnly){const bidiLevelsResult=bidi2.getEmbeddingLevels(text,direction);glyphIds=new Uint16Array(renderableGlyphCount),glyphPositions=new Float32Array(2*renderableGlyphCount),glyphData={},visibleBounds=[INF,INF,-INF,-INF],chunkedBounds=[];let lineYOffset=topBaseline;includeCaretPositions&&(caretPositions=new Float32Array(3*text.length)),colorRanges&&(glyphColors=new Uint8Array(3*renderableGlyphCount));let chunk,currentColor,renderableGlyphIndex=0,prevCharIndex=-1,colorCharIndex=-1;if(lines.forEach((line,lineIndex)=>{let{count:lineGlyphCount,width:lineWidth}=line;if(lineGlyphCount>0){let trailingWhitespaceCount=0;for(let i=lineGlyphCount;i--&&line.glyphAt(i).glyphObj.isWhitespace;)trailingWhitespaceCount++;let lineXOffset2=0,justifyAdjust=0;if("center"===textAlign)lineXOffset2=(maxLineWidth-lineWidth)/2;else if("right"===textAlign)lineXOffset2=maxLineWidth-lineWidth;else if("justify"===textAlign&&line.isSoftWrapped){let whitespaceCount=0;for(let i=lineGlyphCount-trailingWhitespaceCount;i--;)line.glyphAt(i).glyphObj.isWhitespace&&whitespaceCount++;justifyAdjust=(maxLineWidth-lineWidth)/whitespaceCount}if(justifyAdjust||lineXOffset2){let justifyOffset=0;for(let i=0;i<lineGlyphCount;i++){let glyphInfo=line.glyphAt(i);const glyphObj2=glyphInfo.glyphObj;glyphInfo.x+=lineXOffset2+justifyOffset,0!==justifyAdjust&&glyphObj2.isWhitespace&&i<lineGlyphCount-trailingWhitespaceCount&&(justifyOffset+=justifyAdjust,glyphInfo.width+=justifyAdjust)}}const flips=bidi2.getReorderSegments(text,bidiLevelsResult,line.glyphAt(0).charIndex,line.glyphAt(line.count-1).charIndex);for(let fi=0;fi<flips.length;fi++){const[start,end]=flips[fi];let left=1/0,right=-1/0;for(let i=0;i<lineGlyphCount;i++)if(line.glyphAt(i).charIndex>=start){let startInLine=i,endInLine=i;for(;endInLine<lineGlyphCount;endInLine++){let info=line.glyphAt(endInLine);if(info.charIndex>end)break;endInLine<lineGlyphCount-trailingWhitespaceCount&&(left=Math.min(left,info.x),right=Math.max(right,info.x+info.width))}for(let j=startInLine;j<endInLine;j++){const glyphInfo=line.glyphAt(j);glyphInfo.x=right-(glyphInfo.x+glyphInfo.width-left)}break}}let glyphObj;const setGlyphObj=__name(g=>glyphObj=g,"setGlyphObj");for(let i=0;i<lineGlyphCount;i++){let glyphInfo=line.glyphAt(i);glyphObj=glyphInfo.glyphObj;const glyphId=glyphObj.index,rtl=1&bidiLevelsResult.levels[glyphInfo.charIndex];if(rtl){const mirrored=bidi2.getMirroredCharacter(text[glyphInfo.charIndex]);mirrored&&fontObj.forEachGlyph(mirrored,0,0,setGlyphObj)}if(includeCaretPositions){const{charIndex}=glyphInfo,caretLeft=glyphInfo.x+anchorXOffset,caretRight=glyphInfo.x+glyphInfo.width+anchorXOffset;caretPositions[3*charIndex]=rtl?caretRight:caretLeft,caretPositions[3*charIndex+1]=rtl?caretLeft:caretRight,caretPositions[3*charIndex+2]=lineYOffset+caretBottomOffset+anchorYOffset;const ligCount=charIndex-prevCharIndex;ligCount>1&&fillLigatureCaretPositions(caretPositions,prevCharIndex,ligCount),prevCharIndex=charIndex}if(colorRanges){const{charIndex}=glyphInfo;for(;charIndex>colorCharIndex;)colorCharIndex++,colorRanges.hasOwnProperty(colorCharIndex)&&(currentColor=colorRanges[colorCharIndex])}if(!glyphObj.isWhitespace&&!glyphObj.isEmpty){const idx=renderableGlyphIndex++;glyphData[glyphId]||(glyphData[glyphId]={path:glyphObj.path,pathBounds:[glyphObj.xMin,glyphObj.yMin,glyphObj.xMax,glyphObj.yMax]});const glyphX=glyphInfo.x+anchorXOffset,glyphY=lineYOffset+anchorYOffset;glyphPositions[2*idx]=glyphX,glyphPositions[2*idx+1]=glyphY;const visX0=glyphX+glyphObj.xMin*fontSizeMult,visY0=glyphY+glyphObj.yMin*fontSizeMult,visX1=glyphX+glyphObj.xMax*fontSizeMult,visY1=glyphY+glyphObj.yMax*fontSizeMult;visX0<visibleBounds[0]&&(visibleBounds[0]=visX0),visY0<visibleBounds[1]&&(visibleBounds[1]=visY0),visX1>visibleBounds[2]&&(visibleBounds[2]=visX1),visY1>visibleBounds[3]&&(visibleBounds[3]=visY1),idx%chunkedBoundsSize==0&&(chunk={start:idx,end:idx,rect:[INF,INF,-INF,-INF]},chunkedBounds.push(chunk)),chunk.end++;const chunkRect=chunk.rect;if(visX0<chunkRect[0]&&(chunkRect[0]=visX0),visY0<chunkRect[1]&&(chunkRect[1]=visY0),visX1>chunkRect[2]&&(chunkRect[2]=visX1),visY1>chunkRect[3]&&(chunkRect[3]=visY1),glyphIds[idx]=glyphId,colorRanges){const start=3*idx;glyphColors[start]=currentColor>>16&255,glyphColors[start+1]=currentColor>>8&255,glyphColors[start+2]=255&currentColor}}}}lineYOffset-=lineHeight}),caretPositions){const ligCount=text.length-prevCharIndex;ligCount>1&&fillLigatureCaretPositions(caretPositions,prevCharIndex,ligCount)}}timings.typesetting=now2()-typesetStart,callback({glyphIds,glyphPositions,glyphData,caretPositions,caretHeight,glyphColors,chunkedBounds,fontSize,unitsPerEm,ascender:ascender*fontSizeMult,descender:descender*fontSizeMult,capHeight:capHeight*fontSizeMult,xHeight:xHeight*fontSizeMult,lineHeight,topBaseline,blockBounds:[anchorXOffset,anchorYOffset-lines.length*lineHeight,anchorXOffset+maxLineWidth,anchorYOffset],visibleBounds,timings})})}function measure(args,callback){typeset(args,result=>{const[x0,y0,x1,y1]=result.blockBounds;callback({width:x1-x0,height:y1-y0})},{metricsOnly:!0})}function parsePercent(str){let match=str.match(/^([\d.]+)%$/),pct=match?parseFloat(match[1]):NaN;return isNaN(pct)?0:pct/100}function fillLigatureCaretPositions(caretPositions,ligStartIndex,ligCount){const ligStartX=caretPositions[3*ligStartIndex],ligY=caretPositions[3*ligStartIndex+2],guessedAdvanceX=(caretPositions[3*ligStartIndex+1]-ligStartX)/ligCount;for(let i=0;i<ligCount;i++){const startIndex=3*(ligStartIndex+i);caretPositions[startIndex]=ligStartX+guessedAdvanceX*i,caretPositions[startIndex+1]=ligStartX+guessedAdvanceX*(i+1),caretPositions[startIndex+2]=ligY}}function now2(){return(self.performance||Date).now()}function TextLine(){this.data=[]}__name(doLoadFont,"doLoadFont"),__name(loadFont,"loadFont"),__name(typeset,"typeset"),__name(measure,"measure"),__name(parsePercent,"parsePercent"),__name(fillLigatureCaretPositions,"fillLigatureCaretPositions"),__name(now2,"now"),__name(TextLine,"TextLine");const textLineProps=["glyphObj","x","width","charIndex"];return TextLine.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/textLineProps.length)},glyphAt(i){let fly=TextLine.flyweight;return fly.data=this.data,fly.index=i,fly},splitAt(i){let newLine=new TextLine;return newLine.data=this.data.splice(i*textLineProps.length),newLine}},TextLine.flyweight=textLineProps.reduce((obj,prop,i,all)=>(Object.defineProperty(obj,prop,{get(){return this.data[this.index*textLineProps.length+i]},set(val){this.data[this.index*textLineProps.length+i]=val}}),obj),{data:null,index:0}),{typeset,measure,loadFont}}__name(BezierMesh,"BezierMesh"),__name(createTypesetter,"createTypesetter");const now=__name(()=>(self.performance||Date).now(),"now"),mainThreadGenerator=SDFGenerator();let warned;function generateSDF(width,height,path,viewBox,distance,exponent,canvas,x,y,channel,useWebGL=!0){return useWebGL?generateSDF_GL(width,height,path,viewBox,distance,exponent,canvas,x,y,channel).then(null,err=>(warned||(console.warn("WebGL SDF generation failed, falling back to JS",err),warned=!0),generateSDF_JS_Worker(width,height,path,viewBox,distance,exponent,canvas,x,y,channel))):generateSDF_JS_Worker(width,height,path,viewBox,distance,exponent,canvas,x,y,channel)}__name(generateSDF,"generateSDF");const queue=[];let timer=0;function nextChunk(){const start=now();for(;queue.length&&now()-start<5;)queue.shift()();timer=queue.length?setTimeout(nextChunk,0):0}__name(nextChunk,"nextChunk");const generateSDF_GL=__name((...args)=>new Promise((resolve,reject)=>{queue.push(()=>{const start=now();try{mainThreadGenerator.webgl.generateIntoCanvas(...args),resolve({timing:now()-start})}catch(err){reject(err)}}),timer||(timer=setTimeout(nextChunk,0))}),"generateSDF_GL"),threadCount=4,idleTimeout=2e3,threads={};let callNum=0;function generateSDF_JS_Worker(width,height,path,viewBox,distance,exponent,canvas,x,y,channel){const workerId="TroikaTextSDFGenerator_JS_"+callNum++%threadCount;let thread=threads[workerId];return thread||(thread=threads[workerId]={workerModule:defineWorkerModule({name:workerId,workerId,dependencies:[SDFGenerator,now],init(_createSDFGenerator,now2){const generate=_createSDFGenerator().javascript.generate;return function(...args){const start=now2();return{textureData:generate(...args),timing:now2()-start}}},getTransferables:result=>[result.textureData.buffer]}),requests:0,idleTimer:null}),thread.requests++,clearTimeout(thread.idleTimer),thread.workerModule(width,height,path,viewBox,distance,exponent).then(({textureData,timing})=>{const start=now(),imageData=new Uint8Array(4*textureData.length);for(let i=0;i<textureData.length;i++)imageData[4*i+channel]=textureData[i];return mainThreadGenerator.webglUtils.renderImageData(canvas,imageData,x,y,width,height,1<<3-channel),timing+=now()-start,0==--thread.requests&&(thread.idleTimer=setTimeout(()=>{terminateWorker(workerId)},idleTimeout)),{timing}})}function warmUpSDFCanvas(canvas){canvas._warm||(mainThreadGenerator.webgl.isSupported(canvas),canvas._warm=!0)}__name(generateSDF_JS_Worker,"generateSDF_JS_Worker"),__name(warmUpSDFCanvas,"warmUpSDFCanvas");const resizeWebGLCanvasWithoutClearing=mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing;function typrFactory(){return typeof window>"u"&&(self.window=self),function(r){var e={parse:function(r2){var t2=e._bin,a2=new Uint8Array(r2);if("ttcf"==t2.readASCII(a2,0,4)){var n=4;t2.readUshort(a2,n),t2.readUshort(a2,n+=2);var o=t2.readUint(a2,n+=2);n+=4;for(var s=[],i=0;i<o;i++){var h=t2.readUint(a2,n);n+=4,s.push(e._readFont(a2,h))}return s}return[e._readFont(a2,0)]},_readFont:function(r2,t2){var a2=e._bin,n=t2;a2.readFixed(r2,t2);var o=a2.readUshort(r2,t2+=4);a2.readUshort(r2,t2+=2),a2.readUshort(r2,t2+=2),a2.readUshort(r2,t2+=2),t2+=2;for(var s=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],i={_data:r2,_offset:n},h={},f=0;f<o;f++){var d=a2.readASCII(r2,t2,4);a2.readUint(r2,t2+=4);var u=a2.readUint(r2,t2+=4),l=a2.readUint(r2,t2+=4);t2+=4,h[d]={offset:u,length:l}}for(f=0;f<s.length;f++){var v=s[f];h[v]&&(i[v.trim()]=e[v.trim()].parse(r2,h[v].offset,h[v].length,i))}return i},_tabOffset:function(r2,t2,a2){for(var n=e._bin,o=n.readUshort(r2,a2+4),s=a2+12,i=0;i<o;i++){var h=n.readASCII(r2,s,4);n.readUint(r2,s+=4);var f=n.readUint(r2,s+=4);if(n.readUint(r2,s+=4),s+=4,h==t2)return f}return 0}};e._bin={readFixed:function(r2,e2){return(r2[e2]<<8|r2[e2+1])+(r2[e2+2]<<8|r2[e2+3])/65540},readF2dot14:function(r2,t2){return e._bin.readShort(r2,t2)/16384},readInt:function(r2,t2){return e._bin._view(r2).getInt32(t2)},readInt8:function(r2,t2){return e._bin._view(r2).getInt8(t2)},readShort:function(r2,t2){return e._bin._view(r2).getInt16(t2)},readUshort:function(r2,t2){return e._bin._view(r2).getUint16(t2)},readUshorts:function(r2,t2,a2){for(var n=[],o=0;o<a2;o++)n.push(e._bin.readUshort(r2,t2+2*o));return n},readUint:function(r2,t2){return e._bin._view(r2).getUint32(t2)},readUint64:function(r2,t2){return 4294967296*e._bin.readUint(r2,t2)+e._bin.readUint(r2,t2+4)},readASCII:function(r2,e2,t2){for(var a2="",n=0;n<t2;n++)a2+=String.fromCharCode(r2[e2+n]);return a2},readUnicode:function(r2,e2,t2){for(var a2="",n=0;n<t2;n++){var o=r2[e2++]<<8|r2[e2++];a2+=String.fromCharCode(o)}return a2},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r2,t2,a2){var n=e._bin._tdec;return n&&0==t2&&a2==r2.length?n.decode(r2):e._bin.readASCII(r2,t2,a2)},readBytes:function(r2,e2,t2){for(var a2=[],n=0;n<t2;n++)a2.push(r2[e2+n]);return a2},readASCIIArray:function(r2,e2,t2){for(var a2=[],n=0;n<t2;n++)a2.push(String.fromCharCode(r2[e2+n]));return a2},_view:function(r2){return r2._dataView||(r2._dataView=r2.buffer?new DataView(r2.buffer,r2.byteOffset,r2.byteLength):new DataView(new Uint8Array(r2).buffer))}},e._lctf={},e._lctf.parse=function(r2,t2,a2,n,o){var s=e._bin,i={},h=t2;s.readFixed(r2,t2);var f=s.readUshort(r2,t2+=4),d=s.readUshort(r2,t2+=2),u=s.readUshort(r2,t2+=2);return t2+=2,i.scriptList=e._lctf.readScriptList(r2,h+f),i.featureList=e._lctf.readFeatureList(r2,h+d),i.lookupList=e._lctf.readLookupList(r2,h+u,o),i},e._lctf.readLookupList=function(r2,t2,a2){var n=e._bin,o=t2,s=[],i=n.readUshort(r2,t2);t2+=2;for(var h=0;h<i;h++){var f=n.readUshort(r2,t2);t2+=2;var d=e._lctf.readLookupTable(r2,o+f,a2);s.push(d)}return s},e._lctf.readLookupTable=function(r2,t2,a2){var n=e._bin,o=t2,s={tabs:[]};s.ltype=n.readUshort(r2,t2),s.flag=n.readUshort(r2,t2+=2);var i=n.readUshort(r2,t2+=2);t2+=2;for(var h=s.ltype,f=0;f<i;f++){var d=n.readUshort(r2,t2);t2+=2;var u=a2(r2,h,o+d,s);s.tabs.push(u)}return s},e._lctf.numOfOnes=function(r2){for(var e2=0,t2=0;t2<32;t2++)r2>>>t2&1&&e2++;return e2},e._lctf.readClassDef=function(r2,t2){var a2=e._bin,n=[],o=a2.readUshort(r2,t2);if(t2+=2,1==o){var s=a2.readUshort(r2,t2),i=a2.readUshort(r2,t2+=2);t2+=2;for(var h=0;h<i;h++)n.push(s+h),n.push(s+h),n.push(a2.readUshort(r2,t2)),t2+=2}if(2==o){var f=a2.readUshort(r2,t2);for(t2+=2,h=0;h<f;h++)n.push(a2.readUshort(r2,t2)),n.push(a2.readUshort(r2,t2+=2)),n.push(a2.readUshort(r2,t2+=2)),t2+=2}return n},e._lctf.getInterval=function(r2,e2){for(var t2=0;t2<r2.length;t2+=3)if(r2[t2]<=e2&&e2<=r2[t2+1])return t2;return-1},e._lctf.readCoverage=function(r2,t2){var a2=e._bin,n={};n.fmt=a2.readUshort(r2,t2);var o=a2.readUshort(r2,t2+=2);return t2+=2,1==n.fmt&&(n.tab=a2.readUshorts(r2,t2,o)),2==n.fmt&&(n.tab=a2.readUshorts(r2,t2,3*o)),n},e._lctf.coverageIndex=function(r2,t2){var a2=r2.tab;if(1==r2.fmt)return a2.indexOf(t2);if(2==r2.fmt){var n=e._lctf.getInterval(a2,t2);if(-1!=n)return a2[n+2]+(t2-a2[n])}return-1},e._lctf.readFeatureList=function(r2,t2){var a2=e._bin,n=t2,o=[],s=a2.readUshort(r2,t2);t2+=2;for(var i=0;i<s;i++){var h=a2.readASCII(r2,t2,4),f=a2.readUshort(r2,t2+=4);t2+=2;var d=e._lctf.readFeatureTable(r2,n+f);d.tag=h.trim(),o.push(d)}return o},e._lctf.readFeatureTable=function(r2,t2){var a2=e._bin,n=t2,o={},s=a2.readUshort(r2,t2);t2+=2,s>0&&(o.featureParams=n+s);var i=a2.readUshort(r2,t2);t2+=2,o.tab=[];for(var h=0;h<i;h++)o.tab.push(a2.readUshort(r2,t2+2*h));return o},e._lctf.readScriptList=function(r2,t2){var a2=e._bin,n=t2,o={},s=a2.readUshort(r2,t2);t2+=2;for(var i=0;i<s;i++){var h=a2.readASCII(r2,t2,4),f=a2.readUshort(r2,t2+=4);t2+=2,o[h.trim()]=e._lctf.readScriptTable(r2,n+f)}return o},e._lctf.readScriptTable=function(r2,t2){var a2=e._bin,n=t2,o={},s=a2.readUshort(r2,t2);t2+=2,o.default=e._lctf.readLangSysTable(r2,n+s);var i=a2.readUshort(r2,t2);t2+=2;for(var h=0;h<i;h++){var f=a2.readASCII(r2,t2,4),d=a2.readUshort(r2,t2+=4);t2+=2,o[f.trim()]=e._lctf.readLangSysTable(r2,n+d)}return o},e._lctf.readLangSysTable=function(r2,t2){var a2=e._bin,n={};a2.readUshort(r2,t2),n.reqFeature=a2.readUshort(r2,t2+=2);var o=a2.readUshort(r2,t2+=2);return n.features=a2.readUshorts(r2,t2+=2,o),n},e.CFF={},e.CFF.parse=function(r2,t2,a2){var n=e._bin;r2=new Uint8Array(r2.buffer,t2,a2),t2=0,++t2,++t2,++t2,t2++;var o=[];t2=e.CFF.readIndex(r2,t2,o);for(var s=[],i=0;i<o.length-1;i++)s.push(n.readASCII(r2,t2+o[i],o[i+1]-o[i]));var h=[];t2=e.CFF.readIndex(r2,t2+=o[o.length-1],h);var f=[];for(i=0;i<h.length-1;i++)f.push(e.CFF.readDict(r2,t2+h[i],t2+h[i+1]));var d=f[0],u=[];t2=e.CFF.readIndex(r2,t2+=h[h.length-1],u);var l=[];for(i=0;i<u.length-1;i++)l.push(n.readASCII(r2,t2+u[i],u[i+1]-u[i]));if(e.CFF.readSubrs(r2,t2+=u[u.length-1],d),d.CharStrings){t2=e.CFF.readIndex(r2,t2=d.CharStrings,u=[]);var v=[];for(i=0;i<u.length-1;i++)v.push(n.readBytes(r2,t2+u[i],u[i+1]-u[i]));d.CharStrings=v}if(d.ROS){var c=[];for(t2=e.CFF.readIndex(r2,t2=d.FDArray,c),d.FDArray=[],i=0;i<c.length-1;i++){var p=e.CFF.readDict(r2,t2+c[i],t2+c[i+1]);e.CFF._readFDict(r2,p,l),d.FDArray.push(p)}t2+=c[c.length-1],t2=d.FDSelect,d.FDSelect=[];var U=r2[t2];if(t2++,3!=U)throw U;var g=n.readUshort(r2,t2);for(t2+=2,i=0;i<g+1;i++)d.FDSelect.push(n.readUshort(r2,t2),r2[t2+2]),t2+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r2,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r2,d.charset,d.CharStrings.length)),e.CFF._readFDict(r2,d,l),d},e.CFF._readFDict=function(r2,t2,a2){var n;for(var o in t2.Private&&(t2.Private=e.CFF.readDict(r2,n=t2.Private[1],n+t2.Private[0]),t2.Private.Subrs&&e.CFF.readSubrs(r2,n+t2.Private.Subrs,t2.Private)),t2)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(t2[o]=a2[t2[o]-426+35])},e.CFF.readSubrs=function(r2,t2,a2){var n=e._bin,o=[];t2=e.CFF.readIndex(r2,t2,o);var i=o.length;a2.Bias=i<1240?107:i<33900?1131:32768,a2.Subrs=[];for(var h=0;h<o.length-1;h++)a2.Subrs.push(n.readBytes(r2,t2+o[h],o[h+1]-o[h]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r2,e2){for(var t2=0;t2<r2.charset.length;t2++)if(r2.charset[t2]==e2)return t2;return-1},e.CFF.glyphBySE=function(r2,t2){return t2<0||t2>255?-1:e.CFF.glyphByUnicode(r2,e.CFF.tableSE[t2])},e.CFF.readEncoding=function(r2,t2,a2){var n=[".notdef"],o=r2[t2];if(t2++,0!=o)throw"error: unknown encoding format: "+o;var s=r2[t2];t2++;for(var i=0;i<s;i++)n.push(r2[t2+i]);return n},e.CFF.readCharset=function(r2,t2,a2){var n=e._bin,o=[".notdef"],s=r2[t2];if(t2++,0==s)for(var i=0;i<a2;i++){var h=n.readUshort(r2,t2);t2+=2,o.push(h)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;o.length<a2;){h=n.readUshort(r2,t2),t2+=2;var f=0;for(1==s?(f=r2[t2],t2++):(f=n.readUshort(r2,t2),t2+=2),i=0;i<=f;i++)o.push(h),h++}}return o},e.CFF.readIndex=function(r2,t2,a2){var n=e._bin,o=n.readUshort(r2,t2)+1,s=r2[t2+=2];if(t2++,1==s)for(var i=0;i<o;i++)a2.push(r2[t2+i]);else if(2==s)for(i=0;i<o;i++)a2.push(n.readUshort(r2,t2+2*i));else if(3==s)for(i=0;i<o;i++)a2.push(16777215&n.readUint(r2,t2+3*i-1));else if(1!=o)throw"unsupported offset size: "+s+", count: "+o;return(t2+=o*s)-1},e.CFF.getCharString=function(r2,t2,a2){var n=e._bin,o=r2[t2],s=r2[t2+1],i=1,h=null,f=null;o<=20&&(h=o,i=1),12==o&&(h=100*o+s,i=2),21<=o&&o<=27&&(h=o,i=1),28==o&&(f=n.readShort(r2,t2+1),i=3),29<=o&&o<=31&&(h=o,i=1),32<=o&&o<=246&&(f=o-139,i=1),247<=o&&o<=250&&(f=256*(o-247)+s+108,i=2),251<=o&&o<=254&&(f=256*-(o-251)-s-108,i=2),255==o&&(f=n.readInt(r2,t2+1)/65535,i=5),a2.val=f??"o"+h,a2.size=i},e.CFF.readCharString=function(r2,t2,a2){for(var n=t2+a2,o=e._bin,s=[];t2<n;){var i=r2[t2],h=r2[t2+1],f=1,d=null,u=null;i<=20&&(d=i,f=1),12==i&&(d=100*i+h,f=2),19!=i&&20!=i||(d=i,f=2),21<=i&&i<=27&&(d=i,f=1),28==i&&(u=o.readShort(r2,t2+1),f=3),29<=i&&i<=31&&(d=i,f=1),32<=i&&i<=246&&(u=i-139,f=1),247<=i&&i<=250&&(u=256*(i-247)+h+108,f=2),251<=i&&i<=254&&(u=256*-(i-251)-h-108,f=2),255==i&&(u=o.readInt(r2,t2+1)/65535,f=5),s.push(u??"o"+d),t2+=f}return s},e.CFF.readDict=function(r2,t2,a2){for(var n=e._bin,o={},s=[];t2<a2;){var i=r2[t2],h=r2[t2+1],f=1,d=null,u=null;if(28==i&&(u=n.readShort(r2,t2+1),f=3),29==i&&(u=n.readInt(r2,t2+1),f=5),32<=i&&i<=246&&(u=i-139,f=1),247<=i&&i<=250&&(u=256*(i-247)+h+108,f=2),251<=i&&i<=254&&(u=256*-(i-251)-h-108,f=2),255==i)throw u=n.readInt(r2,t2+1)/65535,f=5,"unknown number";if(30==i){var l=[];for(f=1;;){var v=r2[t2+f];f++;var c=v>>4,p=15&v;if(15!=c&&l.push(c),15!=p&&l.push(p),15==p)break}for(var U="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],S=0;S<l.length;S++)U+=g[l[S]];u=parseFloat(U)}i<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][i],f=1,12==i&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],f=2)),null!=d?(o[d]=1==s.length?s[0]:s,s=[]):s.push(u),t2+=f}return o},e.cmap={},e.cmap.parse=function(r2,t2,a2){r2=new Uint8Array(r2.buffer,t2,a2);var n=e._bin,o={};n.readUshort(r2,t2=0);var s=n.readUshort(r2,t2+=2);t2+=2;var i=[];o.tables=[];for(var h=0;h<s;h++){var f=n.readUshort(r2,t2),d=n.readUshort(r2,t2+=2),u=n.readUint(r2,t2+=2);t2+=4;var l="p"+f+"e"+d,v=i.indexOf(u);if(-1==v){var c;v=o.tables.length,i.push(u);var p=n.readUshort(r2,u);0==p?c=e.cmap.parse0(r2,u):4==p?c=e.cmap.parse4(r2,u):6==p?c=e.cmap.parse6(r2,u):12==p?c=e.cmap.parse12(r2,u):console.debug("unknown format: "+p,f,d,u),o.tables.push(c)}if(null!=o[l])throw"multiple tables for one platform+encoding";o[l]=v}return o},e.cmap.parse0=function(r2,t2){var a2=e._bin,n={};n.format=a2.readUshort(r2,t2);var o=a2.readUshort(r2,t2+=2);a2.readUshort(r2,t2+=2),t2+=2,n.map=[];for(var s=0;s<o-6;s++)n.map.push(r2[t2+s]);return n},e.cmap.parse4=function(r2,t2){var a2=e._bin,n=t2,o={};o.format=a2.readUshort(r2,t2);var s=a2.readUshort(r2,t2+=2);a2.readUshort(r2,t2+=2);var h=a2.readUshort(r2,t2+=2)/2;o.searchRange=a2.readUshort(r2,t2+=2),o.entrySelector=a2.readUshort(r2,t2+=2),o.rangeShift=a2.readUshort(r2,t2+=2),o.endCount=a2.readUshorts(r2,t2+=2,h),t2+=2*h,o.startCount=a2.readUshorts(r2,t2+=2,h),t2+=2*h,o.idDelta=[];for(var f=0;f<h;f++)o.idDelta.push(a2.readShort(r2,t2)),t2+=2;for(o.idRangeOffset=a2.readUshorts(r2,t2,h),t2+=2*h,o.glyphIdArray=[];t2<n+s;)o.glyphIdArray.push(a2.readUshort(r2,t2)),t2+=2;return o},e.cmap.parse6=function(r2,t2){var a2=e._bin,n={};n.format=a2.readUshort(r2,t2),a2.readUshort(r2,t2+=2),a2.readUshort(r2,t2+=2),n.firstCode=a2.readUshort(r2,t2+=2);var o=a2.readUshort(r2,t2+=2);t2+=2,n.glyphIdArray=[];for(var s=0;s<o;s++)n.glyphIdArray.push(a2.readUshort(r2,t2)),t2+=2;return n},e.cmap.parse12=function(r2,t2){var a2=e._bin,n={};n.format=a2.readUshort(r2,t2),t2+=2,a2.readUint(r2,t2+=2),a2.readUint(r2,t2+=4);var o=a2.readUint(r2,t2+=4);t2+=4,n.groups=[];for(var s=0;s<o;s++){var i=t2+12*s,h=a2.readUint(r2,i+0),f=a2.readUint(r2,i+4),d=a2.readUint(r2,i+8);n.groups.push([h,f,d])}return n},e.glyf={},e.glyf.parse=function(r2,e2,t2,a2){for(var n=[],o=0;o<a2.maxp.numGlyphs;o++)n.push(null);return n},e.glyf._parseGlyf=function(r2,t2){var a2=e._bin,n=r2._data,o=e._tabOffset(n,"glyf",r2._offset)+r2.loca[t2];if(r2.loca[t2]==r2.loca[t2+1])return null;var s={};if(s.noc=a2.readShort(n,o),s.xMin=a2.readShort(n,o+=2),s.yMin=a2.readShort(n,o+=2),s.xMax=a2.readShort(n,o+=2),s.yMax=a2.readShort(n,o+=2),o+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var i=0;i<s.noc;i++)s.endPts.push(a2.readUshort(n,o)),o+=2;var h=a2.readUshort(n,o);if(n.length-(o+=2)<h)return null;s.instructions=a2.readBytes(n,o,h),o+=h;var f=s.endPts[s.noc-1]+1;for(s.flags=[],i=0;i<f;i++){var d=n[o];if(o++,s.flags.push(d),0!=(8&d)){var u=n[o];o++;for(var l=0;l<u;l++)s.flags.push(d),i++}}for(s.xs=[],i=0;i<f;i++){var v=0!=(2&s.flags[i]),c=0!=(16&s.flags[i]);v?(s.xs.push(c?n[o]:-n[o]),o++):c?s.xs.push(0):(s.xs.push(a2.readShort(n,o)),o+=2)}for(s.ys=[],i=0;i<f;i++)c=0!=(32&s.flags[i]),(v=0!=(4&s.flags[i]))?(s.ys.push(c?n[o]:-n[o]),o++):c?s.ys.push(0):(s.ys.push(a2.readShort(n,o)),o+=2);var p=0,U=0;for(i=0;i<f;i++)U+=s.ys[i],s.xs[i]=p+=s.xs[i],s.ys[i]=U}else{var g;s.parts=[];do{g=a2.readUshort(n,o),o+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(S),S.glyphIndex=a2.readUshort(n,o),o+=2,1&g){var m=a2.readShort(n,o),b=a2.readShort(n,o+=2);o+=2}else m=a2.readInt8(n,o),o++,b=a2.readInt8(n,o),o++;2&g?(S.m.tx=m,S.m.ty=b):(S.p1=m,S.p2=b),8&g?(S.m.a=S.m.d=a2.readF2dot14(n,o),o+=2):64&g?(S.m.a=a2.readF2dot14(n,o),S.m.d=a2.readF2dot14(n,o+=2),o+=2):128&g&&(S.m.a=a2.readF2dot14(n,o),S.m.b=a2.readF2dot14(n,o+=2),S.m.c=a2.readF2dot14(n,o+=2),S.m.d=a2.readF2dot14(n,o+=2),o+=2)}while(32&g);if(256&g){var y=a2.readUshort(n,o);for(o+=2,s.instr=[],i=0;i<y;i++)s.instr.push(n[o]),o++}}return s},e.GPOS={},e.GPOS.parse=function(r2,t2,a2,n){return e._lctf.parse(r2,t2,a2,n,e.GPOS.subt)},e.GPOS.subt=function(r2,t2,a2,n){var o=e._bin,s=a2,i={};if(i.fmt=o.readUshort(r2,a2),a2+=2,1==t2||2==t2||3==t2||7==t2||8==t2&&i.fmt<=2){var h=o.readUshort(r2,a2);a2+=2,i.coverage=e._lctf.readCoverage(r2,h+s)}if(1==t2&&1==i.fmt){var f=o.readUshort(r2,a2);a2+=2;var d=e._lctf.numOfOnes(f);0!=f&&(i.pos=e.GPOS.readValueRecord(r2,a2,f))}else if(2==t2&&i.fmt>=1&&i.fmt<=2){f=o.readUshort(r2,a2);var u=o.readUshort(r2,a2+=2);a2+=2,d=e._lctf.numOfOnes(f);var l=e._lctf.numOfOnes(u);if(1==i.fmt){i.pairsets=[];var v=o.readUshort(r2,a2);a2+=2;for(var c=0;c<v;c++){var p=s+o.readUshort(r2,a2);a2+=2;var U=o.readUshort(r2,p);p+=2;for(var g=[],S=0;S<U;S++){var m=o.readUshort(r2,p);p+=2,0!=f&&(x=e.GPOS.readValueRecord(r2,p,f),p+=2*d),0!=u&&(P=e.GPOS.readValueRecord(r2,p,u),p+=2*l),g.push({gid2:m,val1:x,val2:P})}i.pairsets.push(g)}}if(2==i.fmt){var b=o.readUshort(r2,a2),y=o.readUshort(r2,a2+=2),F=o.readUshort(r2,a2+=2),_=o.readUshort(r2,a2+=2);for(a2+=2,i.classDef1=e._lctf.readClassDef(r2,s+b),i.classDef2=e._lctf.readClassDef(r2,s+y),i.matrix=[],c=0;c<F;c++){var C=[];for(S=0;S<_;S++){var x=null,P=null;0!=f&&(x=e.GPOS.readValueRecord(r2,a2,f),a2+=2*d),0!=u&&(P=e.GPOS.readValueRecord(r2,a2,u),a2+=2*l),C.push({val1:x,val2:P})}i.matrix.push(C)}}}else{if(9==t2&&1==i.fmt){var I=o.readUshort(r2,a2),w=o.readUint(r2,a2+=2);if(a2+=4,9==n.ltype)n.ltype=I;else if(n.ltype!=I)throw"invalid extension substitution";return e.GPOS.subt(r2,n.ltype,s+w)}console.debug("unsupported GPOS table LookupType",t2,"format",i.fmt)}return i},e.GPOS.readValueRecord=function(r2,t2,a2){var n=e._bin,o=[];return o.push(1&a2?n.readShort(r2,t2):0),t2+=1&a2?2:0,o.push(2&a2?n.readShort(r2,t2):0),t2+=2&a2?2:0,o.push(4&a2?n.readShort(r2,t2):0),t2+=4&a2?2:0,o.push(8&a2?n.readShort(r2,t2):0),t2+=8&a2?2:0,o},e.GSUB={},e.GSUB.parse=function(r2,t2,a2,n){return e._lctf.parse(r2,t2,a2,n,e.GSUB.subt)},e.GSUB.subt=function(r2,t2,a2,n){var o=e._bin,s=a2,i={};if(i.fmt=o.readUshort(r2,a2),a2+=2,1!=t2&&4!=t2&&5!=t2&&6!=t2)return null;if(1==t2||4==t2||5==t2&&i.fmt<=2||6==t2&&i.fmt<=2){var h=o.readUshort(r2,a2);a2+=2,i.coverage=e._lctf.readCoverage(r2,s+h)}if(1==t2&&i.fmt>=1&&i.fmt<=2){if(1==i.fmt)i.delta=o.readShort(r2,a2),a2+=2;else if(2==i.fmt){var f=o.readUshort(r2,a2);i.newg=o.readUshorts(r2,a2+=2,f),a2+=2*i.newg.length}}else if(4==t2){i.vals=[],f=o.readUshort(r2,a2),a2+=2;for(var d=0;d<f;d++){var u=o.readUshort(r2,a2);a2+=2,i.vals.push(e.GSUB.readLigatureSet(r2,s+u))}}else if(5==t2&&2==i.fmt){if(2==i.fmt){var l=o.readUshort(r2,a2);a2+=2,i.cDef=e._lctf.readClassDef(r2,s+l),i.scset=[];var v=o.readUshort(r2,a2);for(a2+=2,d=0;d<v;d++){var c=o.readUshort(r2,a2);a2+=2,i.scset.push(0==c?null:e.GSUB.readSubClassSet(r2,s+c))}}}else if(6==t2&&3==i.fmt){if(3==i.fmt){for(d=0;d<3;d++){f=o.readUshort(r2,a2),a2+=2;for(var p=[],U=0;U<f;U++)p.push(e._lctf.readCoverage(r2,s+o.readUshort(r2,a2+2*U)));a2+=2*f,0==d&&(i.backCvg=p),1==d&&(i.inptCvg=p),2==d&&(i.ahedCvg=p)}f=o.readUshort(r2,a2),i.lookupRec=e.GSUB.readSubstLookupRecords(r2,a2+=2,f)}}else{if(7==t2&&1==i.fmt){var g=o.readUshort(r2,a2),S=o.readUint(r2,a2+=2);if(a2+=4,9==n.ltype)n.ltype=g;else if(n.ltype!=g)throw"invalid extension substitution";return e.GSUB.subt(r2,n.ltype,s+S)}console.debug("unsupported GSUB table LookupType",t2,"format",i.fmt)}return i},e.GSUB.readSubClassSet=function(r2,t2){var a2=e._bin.readUshort,n=t2,o=[],s=a2(r2,t2);t2+=2;for(var i=0;i<s;i++){var h=a2(r2,t2);t2+=2,o.push(e.GSUB.readSubClassRule(r2,n+h))}return o},e.GSUB.readSubClassRule=function(r2,t2){var a2=e._bin.readUshort,n={},o=a2(r2,t2),s=a2(r2,t2+=2);t2+=2,n.input=[];for(var i=0;i<o-1;i++)n.input.push(a2(r2,t2)),t2+=2;return n.substLookupRecords=e.GSUB.readSubstLookupRecords(r2,t2,s),n},e.GSUB.readSubstLookupRecords=function(r2,t2,a2){for(var n=e._bin.readUshort,o=[],s=0;s<a2;s++)o.push(n(r2,t2),n(r2,t2+2)),t2+=4;return o},e.GSUB.readChainSubClassSet=function(r2,t2){var a2=e._bin,n=t2,o=[],s=a2.readUshort(r2,t2);t2+=2;for(var i=0;i<s;i++){var h=a2.readUshort(r2,t2);t2+=2,o.push(e.GSUB.readChainSubClassRule(r2,n+h))}return o},e.GSUB.readChainSubClassRule=function(r2,t2){for(var a2=e._bin,n={},o=["backtrack","input","lookahead"],s=0;s<o.length;s++){var i=a2.readUshort(r2,t2);1==s&&i--,n[o[s]]=a2.readUshorts(r2,t2+=2,i),t2+=2*n[o[s]].length}return i=a2.readUshort(r2,t2),n.subst=a2.readUshorts(r2,t2+=2,2*i),t2+=2*n.subst.length,n},e.GSUB.readLigatureSet=function(r2,t2){var a2=e._bin,n=t2,o=[],s=a2.readUshort(r2,t2);t2+=2;for(var i=0;i<s;i++){var h=a2.readUshort(r2,t2);t2+=2,o.push(e.GSUB.readLigature(r2,n+h))}return o},e.GSUB.readLigature=function(r2,t2){var a2=e._bin,n={chain:[]};n.nglyph=a2.readUshort(r2,t2);var o=a2.readUshort(r2,t2+=2);t2+=2;for(var s=0;s<o-1;s++)n.chain.push(a2.readUshort(r2,t2)),t2+=2;return n},e.head={},e.head.parse=function(r2,t2,a2){var n=e._bin,o={};return n.readFixed(r2,t2),o.fontRevision=n.readFixed(r2,t2+=4),n.readUint(r2,t2+=4),n.readUint(r2,t2+=4),o.flags=n.readUshort(r2,t2+=4),o.unitsPerEm=n.readUshort(r2,t2+=2),o.created=n.readUint64(r2,t2+=2),o.modified=n.readUint64(r2,t2+=8),o.xMin=n.readShort(r2,t2+=8),o.yMin=n.readShort(r2,t2+=2),o.xMax=n.readShort(r2,t2+=2),o.yMax=n.readShort(r2,t2+=2),o.macStyle=n.readUshort(r2,t2+=2),o.lowestRecPPEM=n.readUshort(r2,t2+=2),o.fontDirectionHint=n.readShort(r2,t2+=2),o.indexToLocFormat=n.readShort(r2,t2+=2),o.glyphDataFormat=n.readShort(r2,t2+=2),t2+=2,o},e.hhea={},e.hhea.parse=function(r2,t2,a2){var n=e._bin,o={};return n.readFixed(r2,t2),o.ascender=n.readShort(r2,t2+=4),o.descender=n.readShort(r2,t2+=2),o.lineGap=n.readShort(r2,t2+=2),o.advanceWidthMax=n.readUshort(r2,t2+=2),o.minLeftSideBearing=n.readShort(r2,t2+=2),o.minRightSideBearing=n.readShort(r2,t2+=2),o.xMaxExtent=n.readShort(r2,t2+=2),o.caretSlopeRise=n.readShort(r2,t2+=2),o.caretSlopeRun=n.readShort(r2,t2+=2),o.caretOffset=n.readShort(r2,t2+=2),t2+=2,o.metricDataFormat=n.readShort(r2,t2+=8),o.numberOfHMetrics=n.readUshort(r2,t2+=2),t2+=2,o},e.hmtx={},e.hmtx.parse=function(r2,t2,a2,n){for(var o=e._bin,s={aWidth:[],lsBearing:[]},i=0,h=0,f=0;f<n.maxp.numGlyphs;f++)f<n.hhea.numberOfHMetrics&&(i=o.readUshort(r2,t2),h=o.readShort(r2,t2+=2),t2+=2),s.aWidth.push(i),s.lsBearing.push(h);return s},e.kern={},e.kern.parse=function(r2,t2,a2,n){var o=e._bin,s=o.readUshort(r2,t2);if(t2+=2,1==s)return e.kern.parseV1(r2,t2-2,a2,n);var i=o.readUshort(r2,t2);t2+=2;for(var h={glyph1:[],rval:[]},f=0;f<i;f++){a2=o.readUshort(r2,t2+=2);var u=o.readUshort(r2,t2+=2)>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;t2=e.kern.readFormat0(r2,t2+=2,h)}return h},e.kern.parseV1=function(r2,t2,a2,n){var o=e._bin;o.readFixed(r2,t2);var s=o.readUint(r2,t2+=4);t2+=4;for(var i={glyph1:[],rval:[]},h=0;h<s;h++){o.readUint(r2,t2);var f=o.readUshort(r2,t2+=4);o.readUshort(r2,t2+=2);var d=f>>>8;if(0!=(d&=15))throw"unknown kern table format: "+d;t2=e.kern.readFormat0(r2,t2+=2,i)}return i},e.kern.readFormat0=function(r2,t2,a2){var n=e._bin,o=-1,s=n.readUshort(r2,t2);n.readUshort(r2,t2+=2),n.readUshort(r2,t2+=2),n.readUshort(r2,t2+=2),t2+=2;for(var i=0;i<s;i++){var h=n.readUshort(r2,t2),f=n.readUshort(r2,t2+=2),d=n.readShort(r2,t2+=2);t2+=2,h!=o&&(a2.glyph1.push(h),a2.rval.push({glyph2:[],vals:[]}));var u=a2.rval[a2.rval.length-1];u.glyph2.push(f),u.vals.push(d),o=h}return t2},e.loca={},e.loca.parse=function(r2,t2,a2,n){var o=e._bin,s=[],i=n.head.indexToLocFormat,h=n.maxp.numGlyphs+1;if(0==i)for(var f=0;f<h;f++)s.push(o.readUshort(r2,t2+(f<<1))<<1);if(1==i)for(f=0;f<h;f++)s.push(o.readUint(r2,t2+(f<<2)));return s},e.maxp={},e.maxp.parse=function(r2,t2,a2){var n=e._bin,o={},s=n.readUint(r2,t2);return o.numGlyphs=n.readUshort(r2,t2+=4),t2+=2,65536==s&&(o.maxPoints=n.readUshort(r2,t2),o.maxContours=n.readUshort(r2,t2+=2),o.maxCompositePoints=n.readUshort(r2,t2+=2),o.maxCompositeContours=n.readUshort(r2,t2+=2),o.maxZones=n.readUshort(r2,t2+=2),o.maxTwilightPoints=n.readUshort(r2,t2+=2),o.maxStorage=n.readUshort(r2,t2+=2),o.maxFunctionDefs=n.readUshort(r2,t2+=2),o.maxInstructionDefs=n.readUshort(r2,t2+=2),o.maxStackElements=n.readUshort(r2,t2+=2),o.maxSizeOfInstructions=n.readUshort(r2,t2+=2),o.maxComponentElements=n.readUshort(r2,t2+=2),o.maxComponentDepth=n.readUshort(r2,t2+=2),t2+=2),o},e.name={},e.name.parse=function(r2,t2,a2){var n=e._bin,o={};n.readUshort(r2,t2);var s=n.readUshort(r2,t2+=2);n.readUshort(r2,t2+=2);for(var i,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=t2+=2,d=0;d<s;d++){var u=n.readUshort(r2,t2),l=n.readUshort(r2,t2+=2),v=n.readUshort(r2,t2+=2),c=n.readUshort(r2,t2+=2),p=n.readUshort(r2,t2+=2),U=n.readUshort(r2,t2+=2);t2+=2;var g,S=h[c],m=f+12*s+U;if(0==u)g=n.readUnicode(r2,m,p/2);else if(3==u&&0==l)g=n.readUnicode(r2,m,p/2);else if(0==l)g=n.readASCII(r2,m,p);else if(1==l)g=n.readUnicode(r2,m,p/2);else if(3==l)g=n.readUnicode(r2,m,p/2);else{if(1!=u)throw"unknown encoding "+l+", platformID: "+u;g=n.readASCII(r2,m,p),console.debug("reading unknown MAC encoding "+l+" as ASCII")}var b="p"+u+","+v.toString(16);null==o[b]&&(o[b]={}),o[b][void 0!==S?S:c]=g,o[b]._lang=v}for(var y in o)if(null!=o[y].postScriptName&&1033==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName&&0==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName&&3084==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName)return o[y];for(var y in o){i=y;break}return console.debug("returning name table with languageID "+o[i]._lang),o[i]},e["OS/2"]={},e["OS/2"].parse=function(r2,t2,a2){var n=e._bin.readUshort(r2,t2);t2+=2;var o={};if(0==n)e["OS/2"].version0(r2,t2,o);else if(1==n)e["OS/2"].version1(r2,t2,o);else if(2==n||3==n||4==n)e["OS/2"].version2(r2,t2,o);else{if(5!=n)throw"unknown OS/2 table version: "+n;e["OS/2"].version5(r2,t2,o)}return o},e["OS/2"].version0=function(r2,t2,a2){var n=e._bin;return a2.xAvgCharWidth=n.readShort(r2,t2),a2.usWeightClass=n.readUshort(r2,t2+=2),a2.usWidthClass=n.readUshort(r2,t2+=2),a2.fsType=n.readUshort(r2,t2+=2),a2.ySubscriptXSize=n.readShort(r2,t2+=2),a2.ySubscriptYSize=n.readShort(r2,t2+=2),a2.ySubscriptXOffset=n.readShort(r2,t2+=2),a2.ySubscriptYOffset=n.readShort(r2,t2+=2),a2.ySuperscriptXSize=n.readShort(r2,t2+=2),a2.ySuperscriptYSize=n.readShort(r2,t2+=2),a2.ySuperscriptXOffset=n.readShort(r2,t2+=2),a2.ySuperscriptYOffset=n.readShort(r2,t2+=2),a2.yStrikeoutSize=n.readShort(r2,t2+=2),a2.yStrikeoutPosition=n.readShort(r2,t2+=2),a2.sFamilyClass=n.readShort(r2,t2+=2),a2.panose=n.readBytes(r2,t2+=2,10),a2.ulUnicodeRange1=n.readUint(r2,t2+=10),a2.ulUnicodeRange2=n.readUint(r2,t2+=4),a2.ulUnicodeRange3=n.readUint(r2,t2+=4),a2.ulUnicodeRange4=n.readUint(r2,t2+=4),a2.achVendID=[n.readInt8(r2,t2+=4),n.readInt8(r2,t2+1),n.readInt8(r2,t2+2),n.readInt8(r2,t2+3)],a2.fsSelection=n.readUshort(r2,t2+=4),a2.usFirstCharIndex=n.readUshort(r2,t2+=2),a2.usLastCharIndex=n.readUshort(r2,t2+=2),a2.sTypoAscender=n.readShort(r2,t2+=2),a2.sTypoDescender=n.readShort(r2,t2+=2),a2.sTypoLineGap=n.readShort(r2,t2+=2),a2.usWinAscent=n.readUshort(r2,t2+=2),a2.usWinDescent=n.readUshort(r2,t2+=2),t2+2},e["OS/2"].version1=function(r2,t2,a2){var n=e._bin;return t2=e["OS/2"].version0(r2,t2,a2),a2.ulCodePageRange1=n.readUint(r2,t2),a2.ulCodePageRange2=n.readUint(r2,t2+=4),t2+4},e["OS/2"].version2=function(r2,t2,a2){var n=e._bin;return t2=e["OS/2"].version1(r2,t2,a2),a2.sxHeight=n.readShort(r2,t2),a2.sCapHeight=n.readShort(r2,t2+=2),a2.usDefault=n.readUshort(r2,t2+=2),a2.usBreak=n.readUshort(r2,t2+=2),a2.usMaxContext=n.readUshort(r2,t2+=2),t2+2},e["OS/2"].version5=function(r2,t2,a2){var n=e._bin;return t2=e["OS/2"].version2(r2,t2,a2),a2.usLowerOpticalPointSize=n.readUshort(r2,t2),a2.usUpperOpticalPointSize=n.readUshort(r2,t2+=2),t2+2},e.post={},e.post.parse=function(r2,t2,a2){var n=e._bin,o={};return o.version=n.readFixed(r2,t2),o.italicAngle=n.readFixed(r2,t2+=4),o.underlinePosition=n.readShort(r2,t2+=4),o.underlineThickness=n.readShort(r2,t2+=2),t2+=2,o},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(r2,e2){var t2=r2.cmap,a2=-1;if(null!=t2.p0e4?a2=t2.p0e4:null!=t2.p3e1?a2=t2.p3e1:null!=t2.p1e0?a2=t2.p1e0:null!=t2.p0e3&&(a2=t2.p0e3),-1==a2)throw"no familiar platform and encoding!";var n=t2.tables[a2];if(0==n.format)return e2>=n.map.length?0:n.map[e2];if(4==n.format){for(var o=-1,s=0;s<n.endCount.length;s++)if(e2<=n.endCount[s]){o=s;break}return-1==o||n.startCount[o]>e2?0:65535&(0!=n.idRangeOffset[o]?n.glyphIdArray[e2-n.startCount[o]+(n.idRangeOffset[o]>>1)-(n.idRangeOffset.length-o)]:e2+n.idDelta[o])}if(12==n.format){if(e2>n.groups[n.groups.length-1][1])return 0;for(s=0;s<n.groups.length;s++){var i=n.groups[s];if(i[0]<=e2&&e2<=i[1])return i[2]+(e2-i[0])}return 0}throw"unknown cmap table format "+n.format},e.U.glyphToPath=function(r2,t2){var a2={cmds:[],crds:[]};if(r2.SVG&&r2.SVG.entries[t2]){var n=r2.SVG.entries[t2];return null==n?a2:("string"==typeof n&&(n=e.SVG.toPath(n),r2.SVG.entries[t2]=n),n)}if(r2.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r2.CFF.Private?r2.CFF.Private.defaultWidthX:0,open:!1},s=r2.CFF,i=r2.CFF.Private;if(s.ROS){for(var h=0;s.FDSelect[h+2]<=t2;)h+=2;i=s.FDArray[s.FDSelect[h+1]].Private}e.U._drawCFF(r2.CFF.CharStrings[t2],o,s,i,a2)}else r2.glyf&&e.U._drawGlyf(t2,r2,a2);return a2},e.U._drawGlyf=function(r2,t2,a2){var n=t2.glyf[r2];null==n&&(n=t2.glyf[r2]=e.glyf._parseGlyf(t2,r2)),null!=n&&(n.noc>-1?e.U._simpleGlyph(n,a2):e.U._compoGlyph(n,t2,a2))},e.U._simpleGlyph=function(r2,t2){for(var a2=0;a2<r2.noc;a2++){for(var n=0==a2?0:r2.endPts[a2-1]+1,o=r2.endPts[a2],s=n;s<=o;s++){var i=s==n?o:s-1,h=s==o?n:s+1,f=1&r2.flags[s],d=1&r2.flags[i],u=1&r2.flags[h],l=r2.xs[s],v=r2.ys[s];if(s==n)if(f){if(!d){e.U.P.moveTo(t2,l,v);continue}e.U.P.moveTo(t2,r2.xs[i],r2.ys[i])}else d?e.U.P.moveTo(t2,r2.xs[i],r2.ys[i]):e.U.P.moveTo(t2,(r2.xs[i]+l)/2,(r2.ys[i]+v)/2);f?d&&e.U.P.lineTo(t2,l,v):u?e.U.P.qcurveTo(t2,l,v,r2.xs[h],r2.ys[h]):e.U.P.qcurveTo(t2,l,v,(l+r2.xs[h])/2,(v+r2.ys[h])/2)}e.U.P.closePath(t2)}},e.U._compoGlyph=function(r2,t2,a2){for(var n=0;n<r2.parts.length;n++){var o={cmds:[],crds:[]},s=r2.parts[n];e.U._drawGlyf(s.glyphIndex,t2,o);for(var i=s.m,h=0;h<o.crds.length;h+=2){var f=o.crds[h],d=o.crds[h+1];a2.crds.push(f*i.a+d*i.b+i.tx),a2.crds.push(f*i.c+d*i.d+i.ty)}for(h=0;h<o.cmds.length;h++)a2.cmds.push(o.cmds[h])}},e.U._getGlyphClass=function(r2,t2){var a2=e._lctf.getInterval(t2,r2);return-1==a2?0:t2[a2+2]},e.U.getPairAdjustment=function(r2,t2,a2){var n=!1;if(r2.GPOS)for(var o=r2.GPOS,s=o.lookupList,i=o.featureList,h=[],f=0;f<i.length;f++){var d=i[f];if("kern"==d.tag){n=!0;for(var u=0;u<d.tab.length;u++)if(!h[d.tab[u]]){h[d.tab[u]]=!0;for(var l=s[d.tab[u]],v=0;v<l.tabs.length;v++)if(null!=l.tabs[v]){var c,p=l.tabs[v];if((!p.coverage||-1!=(c=e._lctf.coverageIndex(p.coverage,t2)))&&1!=l.ltype&&2==l.ltype){var U=null;if(1==p.fmt){var g=p.pairsets[c];for(f=0;f<g.length;f++)g[f].gid2==a2&&(U=g[f])}else if(2==p.fmt){var S=e.U._getGlyphClass(t2,p.classDef1),m=e.U._getGlyphClass(a2,p.classDef2);U=p.matrix[S][m]}if(U){var b=0;return U.val1&&U.val1[2]&&(b+=U.val1[2]),U.val2&&U.val2[0]&&(b+=U.val2[0]),b}}}}}}if(r2.kern&&!n){var y=r2.kern.glyph1.indexOf(t2);if(-1!=y){var F=r2.kern.rval[y].glyph2.indexOf(a2);if(-1!=F)return r2.kern.rval[y].vals[F]}}return 0},e.U._applySubs=function(r2,t2,a2,n){for(var o=r2.length-t2-1,s=0;s<a2.tabs.length;s++)if(null!=a2.tabs[s]){var i,h=a2.tabs[s];if(!h.coverage||-1!=(i=e._lctf.coverageIndex(h.coverage,r2[t2])))if(1==a2.ltype)r2[t2]=1==h.fmt?r2[t2]+h.delta:h.newg[i];else if(4==a2.ltype)for(var f=h.vals[i],d=0;d<f.length;d++){var u=f[d],l=u.chain.length;if(!(l>o)){for(var v=!0,c=0,p=0;p<l;p++){for(;-1==r2[t2+c+(1+p)];)c++;u.chain[p]!=r2[t2+c+(1+p)]&&(v=!1)}if(v){for(r2[t2]=u.nglyph,p=0;p<l+c;p++)r2[t2+p+1]=-1;break}}}else if(5==a2.ltype&&2==h.fmt)for(var U=e._lctf.getInterval(h.cDef,r2[t2]),S=h.scset[h.cDef[U+2]],m=0;m<S.length;m++){var b=S[m],y=b.input;if(!(y.length>o)){for(v=!0,p=0;p<y.length;p++){var F=e._lctf.getInterval(h.cDef,r2[t2+1+p]);if(-1==U&&h.cDef[F+2]!=y[p]){v=!1;break}}if(v){var _=b.substLookupRecords;for(d=0;d<_.length;d+=2);}}}else if(6==a2.ltype&&3==h.fmt){if(!e.U._glsCovered(r2,h.backCvg,t2-h.backCvg.length)||!e.U._glsCovered(r2,h.inptCvg,t2)||!e.U._glsCovered(r2,h.ahedCvg,t2+h.inptCvg.length))continue;var C=h.lookupRec;for(m=0;m<C.length;m+=2)e.U._applySubs(r2,t2+(U=C[m]),n[C[m+1]],n)}}},e.U._glsCovered=function(r2,t2,a2){for(var n=0;n<t2.length;n++)if(-1==e._lctf.coverageIndex(t2[n],r2[a2+n]))return!1;return!0},e.U.glyphsToPath=function(r2,t2,a2){for(var n={cmds:[],crds:[]},o=0,s=0;s<t2.length;s++){var i=t2[s];if(-1!=i){for(var h=s<t2.length-1&&-1!=t2[s+1]?t2[s+1]:0,f=e.U.glyphToPath(r2,i),d=0;d<f.crds.length;d+=2)n.crds.push(f.crds[d]+o),n.crds.push(f.crds[d+1]);for(a2&&n.cmds.push(a2),d=0;d<f.cmds.length;d++)n.cmds.push(f.cmds[d]);a2&&n.cmds.push("X"),o+=r2.hmtx.aWidth[i],s<t2.length-1&&(o+=e.U.getPairAdjustment(r2,i,h))}}return n},e.U.P={},e.U.P.moveTo=function(r2,e2,t2){r2.cmds.push("M"),r2.crds.push(e2,t2)},e.U.P.lineTo=function(r2,e2,t2){r2.cmds.push("L"),r2.crds.push(e2,t2)},e.U.P.curveTo=function(r2,e2,t2,a2,n,o,s){r2.cmds.push("C"),r2.crds.push(e2,t2,a2,n,o,s)},e.U.P.qcurveTo=function(r2,e2,t2,a2,n){r2.cmds.push("Q"),r2.crds.push(e2,t2,a2,n)},e.U.P.closePath=function(r2){r2.cmds.push("Z")},e.U._drawCFF=function(r2,t2,a2,n,o){for(var s=t2.stack,i=t2.nStems,h=t2.haveWidth,f=t2.width,d=t2.open,u=0,l=t2.x,v=t2.y,c=0,p=0,U=0,g=0,S=0,m=0,b=0,y=0,F=0,_=0,C={val:0,size:0};u<r2.length;){e.CFF.getCharString(r2,u,C);var x=C.val;if(u+=C.size,"o1"==x||"o18"==x)s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0;else if("o3"==x||"o23"==x)s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0;else if("o4"==x)s.length>1&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),d&&e.U.P.closePath(o),v+=s.pop(),e.U.P.moveTo(o,l,v),d=!0;else if("o5"==x)for(;s.length>0;)l+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,l,v);else if("o6"==x||"o7"==x)for(var P=s.length,I="o6"==x,w=0;w<P;w++){var O=s.shift();I?l+=O:v+=O,I=!I,e.U.P.lineTo(o,l,v)}else if("o8"==x||"o24"==x){P=s.length;for(var T=0;T+6<=P;)c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),l=U+s.shift(),v=g+s.shift(),e.U.P.curveTo(o,c,p,U,g,l,v),T+=6;"o24"==x&&(l+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,l,v))}else{if("o11"==x)break;if("o1234"==x||"o1235"==x||"o1236"==x||"o1237"==x)"o1234"==x&&(p=v,U=(c=l+s.shift())+s.shift(),_=g=p+s.shift(),m=g,y=v,l=(b=(S=(F=U+s.shift())+s.shift())+s.shift())+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,l,v)),"o1235"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),F=U+s.shift(),_=g+s.shift(),S=F+s.shift(),m=_+s.shift(),b=S+s.shift(),y=m+s.shift(),l=b+s.shift(),v=y+s.shift(),s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,l,v)),"o1236"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),_=g=p+s.shift(),m=g,b=(S=(F=U+s.shift())+s.shift())+s.shift(),y=m+s.shift(),l=b+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,l,v)),"o1237"==x&&(c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),F=U+s.shift(),_=g+s.shift(),S=F+s.shift(),m=_+s.shift(),b=S+s.shift(),y=m+s.shift(),Math.abs(b-l)>Math.abs(y-v)?l=b+s.shift():v=y+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,l,v));else if("o14"==x){if(s.length>0&&!h&&(f=s.shift()+a2.nominalWidthX,h=!0),4==s.length){var k=s.shift(),G=s.shift(),D=s.shift(),B=s.shift(),L=e.CFF.glyphBySE(a2,D),R=e.CFF.glyphBySE(a2,B);e.U._drawCFF(a2.CharStrings[L],t2,a2,n,o),t2.x=k,t2.y=G,e.U._drawCFF(a2.CharStrings[R],t2,a2,n,o)}d&&(e.U.P.closePath(o),d=!1)}else if("o19"==x||"o20"==x)s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0,u+=i+7>>3;else if("o21"==x)s.length>2&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),v+=s.pop(),l+=s.pop(),d&&e.U.P.closePath(o),e.U.P.moveTo(o,l,v),d=!0;else if("o22"==x)s.length>1&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),l+=s.pop(),d&&e.U.P.closePath(o),e.U.P.moveTo(o,l,v),d=!0;else if("o25"==x){for(;s.length>6;)l+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,l,v);c=l+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),l=U+s.shift(),v=g+s.shift(),e.U.P.curveTo(o,c,p,U,g,l,v)}else if("o26"==x)for(s.length%2&&(l+=s.shift());s.length>0;)c=l,p=v+s.shift(),l=U=c+s.shift(),v=(g=p+s.shift())+s.shift(),e.U.P.curveTo(o,c,p,U,g,l,v);else if("o27"==x)for(s.length%2&&(v+=s.shift());s.length>0;)p=v,U=(c=l+s.shift())+s.shift(),g=p+s.shift(),l=U+s.shift(),e.U.P.curveTo(o,c,p,U,g,l,v=g);else if("o10"==x||"o29"==x){var A="o10"==x?n:a2;if(0==s.length)console.debug("error: empty stack");else{var W=s.pop(),M=A.Subrs[W+A.Bias];t2.x=l,t2.y=v,t2.nStems=i,t2.haveWidth=h,t2.width=f,t2.open=d,e.U._drawCFF(M,t2,a2,n,o),l=t2.x,v=t2.y,i=t2.nStems,h=t2.haveWidth,f=t2.width,d=t2.open}}else if("o30"==x||"o31"==x){var V=s.length,N=(T=0,"o31"==x);for(T+=V-(P=-3&V);T<P;)N?(p=v,U=(c=l+s.shift())+s.shift(),v=(g=p+s.shift())+s.shift(),P-T==5?(l=U+s.shift(),T++):l=U,N=!1):(c=l,p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),l=U+s.shift(),P-T==5?(v=g+s.shift(),T++):v=g,N=!0),e.U.P.curveTo(o,c,p,U,g,l,v),T+=4}else{if("o"==(x+"").charAt(0))throw console.debug("Unknown operation: "+x,r2),x;s.push(x)}}}t2.x=l,t2.y=v,t2.nStems=i,t2.haveWidth=h,t2.width=f,t2.open=d};var a={Typr:e};return r.Typr=e,r.default=a,Object.defineProperty(r,"__esModule",{value:!0}),r}({}).Typr}function woff2otfFactory(){return function(r){var e=Uint8Array,n=Uint16Array,t=Uint32Array,a=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=__name(function(r2,e2){for(var a2=new n(31),i2=0;i2<31;++i2)a2[i2]=e2+=1<<r2[i2-1];var o2=new t(a2[30]);for(i2=1;i2<30;++i2)for(var f2=a2[i2];f2<a2[i2+1];++f2)o2[f2]=f2-a2[i2]<<5|i2;return[a2,o2]},"f"),u=f(a,2),v=u[0],s=u[1];v[28]=258,s[258]=28;for(var l=f(i,0)[0],c=new n(32768),g=0;g<32768;++g){var h=(43690&g)>>>1|(21845&g)<<1;h=(61680&(h=(52428&h)>>>2|(13107&h)<<2))>>>4|(3855&h)<<4,c[g]=((65280&h)>>>8|(255&h)<<8)>>>1}var w=__name(function(r2,e2,t2){for(var a2=r2.length,i2=0,o2=new n(e2);i2<a2;++i2)++o2[r2[i2]-1];var f2,u2=new n(e2);for(i2=0;i2<e2;++i2)u2[i2]=u2[i2-1]+o2[i2-1]<<1;if(t2){f2=new n(1<<e2);var v2=15-e2;for(i2=0;i2<a2;++i2)if(r2[i2])for(var s2=i2<<4|r2[i2],l2=e2-r2[i2],g2=u2[r2[i2]-1]++<<l2,h2=g2|(1<<l2)-1;g2<=h2;++g2)f2[c[g2]>>>v2]=s2}else for(f2=new n(a2),i2=0;i2<a2;++i2)r2[i2]&&(f2[i2]=c[u2[r2[i2]-1]++]>>>15-r2[i2]);return f2},"w"),d=new e(288);for(g=0;g<144;++g)d[g]=8;for(g=144;g<256;++g)d[g]=9;for(g=256;g<280;++g)d[g]=7;for(g=280;g<288;++g)d[g]=8;var m=new e(32);for(g=0;g<32;++g)m[g]=5;var b=w(d,9,1),p=w(m,5,1),y=__name(function(r2){for(var e2=r2[0],n2=1;n2<r2.length;++n2)r2[n2]>e2&&(e2=r2[n2]);return e2},"y"),L=__name(function(r2,e2,n2){var t2=e2/8|0;return(r2[t2]|r2[t2+1]<<8)>>(7&e2)&n2},"L"),U=__name(function(r2,e2){var n2=e2/8|0;return(r2[n2]|r2[n2+1]<<8|r2[n2+2]<<16)>>(7&e2)},"U"),k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],T=__name(function(r2,e2,n2){var t2=new Error(e2||k[r2]);if(t2.code=r2,Error.captureStackTrace&&Error.captureStackTrace(t2,T),!n2)throw t2;return t2},"T"),O=__name(function(r2,f2,u2){var s2=r2.length;if(!s2||u2&&!u2.l&&s2<5)return f2||new e(0);var c2=!f2||u2,g2=!u2||u2.i;u2||(u2={}),f2||(f2=new e(3*s2));var h2,d2=__name(function(r3){var n2=f2.length;if(r3>n2){var t2=new e(Math.max(2*n2,r3));t2.set(f2),f2=t2}},"d"),m2=u2.f||0,k2=u2.p||0,O2=u2.b||0,A2=u2.l,x2=u2.d,E=u2.m,D=u2.n,M=8*s2;do{if(!A2){u2.f=m2=L(r2,k2,1);var S=L(r2,k2+1,3);if(k2+=3,!S){var V=r2[(I=((h2=k2)/8|0)+(7&h2&&1)+4)-4]|r2[I-3]<<8,_=I+V;if(_>s2){g2&&T(0);break}c2&&d2(O2+V),f2.set(r2.subarray(I,_),O2),u2.b=O2+=V,u2.p=k2=8*_;continue}if(1==S)A2=b,x2=p,E=9,D=5;else if(2==S){var j=L(r2,k2,31)+257,z=L(r2,k2+10,15)+4,C=j+L(r2,k2+5,31)+1;k2+=14;for(var F=new e(C),P=new e(19),q=0;q<z;++q)P[o[q]]=L(r2,k2+3*q,7);k2+=3*z;var B=y(P),G=(1<<B)-1,H=w(P,B,1);for(q=0;q<C;){var I,J=H[L(r2,k2,G)];if(k2+=15&J,(I=J>>>4)<16)F[q++]=I;else{var K=0,N=0;for(16==I?(N=3+L(r2,k2,3),k2+=2,K=F[q-1]):17==I?(N=3+L(r2,k2,7),k2+=3):18==I&&(N=11+L(r2,k2,127),k2+=7);N--;)F[q++]=K}}var Q=F.subarray(0,j),R=F.subarray(j);E=y(Q),D=y(R),A2=w(Q,E,1),x2=w(R,D,1)}else T(1);if(k2>M){g2&&T(0);break}}c2&&d2(O2+131072);for(var W=(1<<E)-1,X=(1<<D)-1,Y=k2;;Y=k2){var Z=(K=A2[U(r2,k2)&W])>>>4;if((k2+=15&K)>M){g2&&T(0);break}if(K||T(2),Z<256)f2[O2++]=Z;else{if(256==Z){Y=k2,A2=null;break}var $=Z-254;if(Z>264){var rr=a[q=Z-257];$=L(r2,k2,(1<<rr)-1)+v[q],k2+=rr}var er=x2[U(r2,k2)&X],nr=er>>>4;if(er||T(3),k2+=15&er,R=l[nr],nr>3&&(rr=i[nr],R+=U(r2,k2)&(1<<rr)-1,k2+=rr),k2>M){g2&&T(0);break}c2&&d2(O2+131072);for(var tr=O2+$;O2<tr;O2+=4)f2[O2]=f2[O2-R],f2[O2+1]=f2[O2+1-R],f2[O2+2]=f2[O2+2-R],f2[O2+3]=f2[O2+3-R];O2=tr}}u2.l=A2,u2.p=Y,u2.b=O2,A2&&(m2=1,u2.m=E,u2.d=x2,u2.n=D)}while(!m2);return O2==f2.length?f2:function(r3,a2,i2){(null==a2||a2<0)&&(a2=0),(null==i2||i2>r3.length)&&(i2=r3.length);var o2=new(r3 instanceof n?n:r3 instanceof t?t:e)(i2-a2);return o2.set(r3.subarray(a2,i2)),o2}(f2,0,O2)},"O"),A=new e(0),x=typeof TextDecoder<"u"&&new TextDecoder;try{x.decode(A,{stream:!0})}catch{}return r.convert_streams=function(r2){var e2=new DataView(r2),n2=0;function t2(){var r3=e2.getUint16(n2);return n2+=2,r3}function a2(){var r3=e2.getUint32(n2);return n2+=4,r3}function i2(r3){m2.setUint16(b2,r3),b2+=2}function o2(r3){m2.setUint32(b2,r3),b2+=4}__name(t2,"t"),__name(a2,"a"),__name(i2,"i"),__name(o2,"o");for(var f2={signature:a2(),flavor:a2(),length:a2(),numTables:t2(),reserved:t2(),totalSfntSize:a2(),majorVersion:t2(),minorVersion:t2(),metaOffset:a2(),metaLength:a2(),metaOrigLength:a2(),privOffset:a2(),privLength:a2()},u2=0;Math.pow(2,u2)<=f2.numTables;)u2++;u2--;for(var v2=16*Math.pow(2,u2),s2=16*f2.numTables-v2,l2=12,c2=[],g2=0;g2<f2.numTables;g2++)c2.push({tag:a2(),offset:a2(),compLength:a2(),origLength:a2(),origChecksum:a2()}),l2+=16;var h2,w2=new Uint8Array(12+16*c2.length+c2.reduce(function(r3,e3){return r3+e3.origLength+4},0)),d2=w2.buffer,m2=new DataView(d2),b2=0;return o2(f2.flavor),i2(f2.numTables),i2(v2),i2(u2),i2(s2),c2.forEach(function(r3){o2(r3.tag),o2(r3.origChecksum),o2(l2),o2(r3.origLength),r3.outOffset=l2,(l2+=r3.origLength)%4!=0&&(l2+=4-l2%4)}),c2.forEach(function(e3){var n3,t3=r2.slice(e3.offset,e3.offset+e3.compLength);if(e3.compLength!=e3.origLength){var a3=new Uint8Array(e3.origLength);n3=new Uint8Array(t3,2),O(n3,a3)}else a3=new Uint8Array(t3);w2.set(a3,e3.outOffset);var i3=0;(l2=e3.outOffset+e3.origLength)%4!=0&&(i3=4-l2%4),w2.set(new Uint8Array(i3).buffer,e3.outOffset+e3.origLength),h2=l2+i3}),d2.slice(0,h2)},Object.defineProperty(r,"__esModule",{value:!0}),r}({}).convert_streams}function parserFactory(Typr,woff2otf){const cmdArgLengths={M:2,L:2,Q:4,C:6,Z:0},joiningTypeRawData={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},JT_LEFT=1,JT_RIGHT=2,JT_DUAL=4,JT_TRANSPARENT=8,JT_JOIN_CAUSING=16,JT_NON_JOINING=32;let joiningTypeMap;function getCharJoiningType(ch){if(!joiningTypeMap){const m={R:JT_RIGHT,L:JT_LEFT,D:JT_DUAL,C:JT_JOIN_CAUSING,U:JT_NON_JOINING,T:JT_TRANSPARENT};joiningTypeMap=new Map;for(let type in joiningTypeRawData){let lastCode=0;joiningTypeRawData[type].split(",").forEach(range=>{let[skip,step]=range.split("+");skip=parseInt(skip,36),step=step?parseInt(step,36):0,joiningTypeMap.set(lastCode+=skip,m[type]);for(let i=step;i--;)joiningTypeMap.set(++lastCode,m[type])})}}return joiningTypeMap.get(ch)||JT_NON_JOINING}__name(getCharJoiningType,"getCharJoiningType");const ISOL=1,INIT=2,FINA=3,MEDI=4,formsToFeatures=[null,"isol","init","fina","medi"];function detectJoiningForms(str){const joiningForms=new Uint8Array(str.length);let prevJoiningType=JT_NON_JOINING,prevForm=ISOL,prevIndex=-1;for(let i=0;i<str.length;i++){const code=str.codePointAt(i);let joiningType=0|getCharJoiningType(code),form=ISOL;joiningType&JT_TRANSPARENT||(prevJoiningType&(JT_LEFT|JT_DUAL|JT_JOIN_CAUSING)?joiningType&(JT_RIGHT|JT_DUAL|JT_JOIN_CAUSING)?(form=FINA,(prevForm===ISOL||prevForm===FINA)&&joiningForms[prevIndex]++):joiningType&(JT_LEFT|JT_NON_JOINING)&&(prevForm===INIT||prevForm===MEDI)&&joiningForms[prevIndex]--:prevJoiningType&(JT_RIGHT|JT_NON_JOINING)&&(prevForm===INIT||prevForm===MEDI)&&joiningForms[prevIndex]--,prevForm=joiningForms[i]=form,prevJoiningType=joiningType,prevIndex=i,code>65535&&i++)}return joiningForms}function stringToGlyphs(font,str){const glyphIds=[];for(let i=0;i<str.length;i++){const cc=str.codePointAt(i);cc>65535&&i++,glyphIds.push(Typr.U.codeToGlyph(font,cc))}const gsub=font.GSUB;if(gsub){const{lookupList,featureList}=gsub;let joiningForms;const supportedFeatures=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,usedLookups=[];featureList.forEach(feature=>{if(supportedFeatures.test(feature.tag))for(let ti=0;ti<feature.tab.length;ti++){if(usedLookups[feature.tab[ti]])continue;usedLookups[feature.tab[ti]]=!0;const tab=lookupList[feature.tab[ti]],isJoiningFeature=/^(isol|init|fina|medi)$/.test(feature.tag);isJoiningFeature&&!joiningForms&&(joiningForms=detectJoiningForms(str));for(let ci=0;ci<glyphIds.length;ci++)(!joiningForms||!isJoiningFeature||formsToFeatures[joiningForms[ci]]===feature.tag)&&Typr.U._applySubs(glyphIds,ci,tab,lookupList)}})}return glyphIds}function firstNum(...args){for(let i=0;i<args.length;i++)if("number"==typeof args[i])return args[i]}function wrapFontObj(typrFont){const glyphMap=Object.create(null),os2=typrFont["OS/2"],hhea=typrFont.hhea,unitsPerEm=typrFont.head.unitsPerEm,ascender=firstNum(os2&&os2.sTypoAscender,hhea&&hhea.ascender,unitsPerEm),fontObj={unitsPerEm,ascender,descender:firstNum(os2&&os2.sTypoDescender,hhea&&hhea.descender,0),capHeight:firstNum(os2&&os2.sCapHeight,ascender),xHeight:firstNum(os2&&os2.sxHeight,ascender),lineGap:firstNum(os2&&os2.sTypoLineGap,hhea&&hhea.lineGap),forEachGlyph(text,fontSize,letterSpacing,callback){let glyphX=0;const fontScale=1/fontObj.unitsPerEm*fontSize,glyphIndices=stringToGlyphs(typrFont,text);let charIndex=0,prevGlyphIndex=-1;return glyphIndices.forEach((glyphIndex,i)=>{if(-1!==glyphIndex){let glyphObj=glyphMap[glyphIndex];if(!glyphObj){const{cmds,crds}=Typr.U.glyphToPath(typrFont,glyphIndex);let xMin,yMin,xMax,yMax,path="",crdsIdx=0;for(let i2=0,len=cmds.length;i2<len;i2++){const numArgs=cmdArgLengths[cmds[i2]];path+=cmds[i2];for(let j=1;j<=numArgs;j++)path+=(j>1?",":"")+crds[crdsIdx++]}if(crds.length){xMin=yMin=1/0,xMax=yMax=-1/0;for(let i2=0,len=crds.length;i2<len;i2+=2){let x=crds[i2],y=crds[i2+1];x<xMin&&(xMin=x),y<yMin&&(yMin=y),x>xMax&&(xMax=x),y>yMax&&(yMax=y)}}else xMin=xMax=yMin=yMax=0;glyphObj=glyphMap[glyphIndex]={index:glyphIndex,advanceWidth:typrFont.hmtx.aWidth[glyphIndex],xMin,yMin,xMax,yMax,path,pathCommandCount:cmds.length}}-1!==prevGlyphIndex&&(glyphX+=Typr.U.getPairAdjustment(typrFont,prevGlyphIndex,glyphIndex)*fontScale),callback.call(null,glyphObj,glyphX,charIndex),glyphObj.advanceWidth&&(glyphX+=glyphObj.advanceWidth*fontScale),letterSpacing&&(glyphX+=letterSpacing*fontSize),prevGlyphIndex=glyphIndex}charIndex+=text.codePointAt(charIndex)>65535?2:1}),glyphX}};return fontObj}return __name(detectJoiningForms,"detectJoiningForms"),__name(stringToGlyphs,"stringToGlyphs"),__name(firstNum,"firstNum"),__name(wrapFontObj,"wrapFontObj"),__name(function(buffer){const peek=new Uint8Array(buffer,0,4),tag=Typr._bin.readASCII(peek,0,4);if("wOFF"===tag)buffer=woff2otf(buffer);else if("wOF2"===tag)throw new Error("woff2 fonts not supported");return wrapFontObj(Typr.parse(buffer)[0])},"parse")}__name(typrFactory,"typrFactory"),__name(woff2otfFactory,"woff2otfFactory"),__name(parserFactory,"parserFactory");const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init:(typrFactory2,woff2otfFactory2,parserFactory2)=>parserFactory2(typrFactory2(),woff2otfFactory2())}),CONFIG={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new three_module.Ilk;let hasRequested=!1;function now$1(){return(self.performance||Date).now()}__name(now$1,"now$1"),__name(function configureTextBuilder(config){hasRequested?console.warn("configureTextBuilder called after first font request; will be ignored."):troika_three_text_esm_assign(CONFIG,config)},"configureTextBuilder");const atlases=Object.create(null);function getTextRenderInfo(args,callback){hasRequested=!0,args=troika_three_text_esm_assign({},args);const totalStart=now$1();if(args.font=toAbsoluteURL(args.font||CONFIG.defaultFontURL),args.text=""+args.text,args.sdfGlyphSize=args.sdfGlyphSize||CONFIG.sdfGlyphSize,null!=args.colorRanges){let colors={};for(let key in args.colorRanges)if(args.colorRanges.hasOwnProperty(key)){let val=args.colorRanges[key];"number"!=typeof val&&(val=tempColor.set(val).getHex()),colors[key]=val}args.colorRanges=colors}Object.freeze(args);const{textureWidth,sdfExponent}=CONFIG,{sdfGlyphSize}=args,glyphsPerRow=textureWidth/sdfGlyphSize*4;let atlas=atlases[sdfGlyphSize];if(!atlas){const canvas=document.createElement("canvas");canvas.width=textureWidth,canvas.height=256*sdfGlyphSize/glyphsPerRow,atlas=atlases[sdfGlyphSize]={glyphCount:0,sdfGlyphSize,sdfCanvas:canvas,sdfTexture:new three_module.xEZ(canvas,void 0,void 0,void 0,three_module.wem,three_module.wem),contextLost:!1,glyphsByFont:new Map},atlas.sdfTexture.generateMipmaps=!1,initContextLossHandling(atlas)}const{sdfTexture,sdfCanvas}=atlas;let fontGlyphs=atlas.glyphsByFont.get(args.font);fontGlyphs||atlas.glyphsByFont.set(args.font,fontGlyphs=new Map),typesetInWorker(args).then(result=>{const{glyphIds,glyphPositions,fontSize,unitsPerEm,timings}=result,neededSDFs=[],glyphBounds=new Float32Array(4*glyphIds.length),fontSizeMult=fontSize/unitsPerEm;let boundsIdx=0,positionsIdx=0;const quadsStart=now$1();glyphIds.forEach((glyphId,i)=>{let glyphInfo=fontGlyphs.get(glyphId);if(!glyphInfo){const{path,pathBounds}=result.glyphData[glyphId],fontUnitsMargin=Math.max(pathBounds[2]-pathBounds[0],pathBounds[3]-pathBounds[1])/sdfGlyphSize*(CONFIG.sdfMargin*sdfGlyphSize+.5),atlasIndex=atlas.glyphCount++;fontGlyphs.set(glyphId,glyphInfo={path,atlasIndex,sdfViewBox:[pathBounds[0]-fontUnitsMargin,pathBounds[1]-fontUnitsMargin,pathBounds[2]+fontUnitsMargin,pathBounds[3]+fontUnitsMargin]}),neededSDFs.push(glyphInfo)}const{sdfViewBox}=glyphInfo,posX=glyphPositions[positionsIdx++],posY=glyphPositions[positionsIdx++];glyphBounds[boundsIdx++]=posX+sdfViewBox[0]*fontSizeMult,glyphBounds[boundsIdx++]=posY+sdfViewBox[1]*fontSizeMult,glyphBounds[boundsIdx++]=posX+sdfViewBox[2]*fontSizeMult,glyphBounds[boundsIdx++]=posY+sdfViewBox[3]*fontSizeMult,glyphIds[i]=glyphInfo.atlasIndex}),timings.quads=(timings.quads||0)+(now$1()-quadsStart);const sdfStart=now$1();timings.sdf={};const currentHeight=sdfCanvas.height,neededRows=Math.ceil(atlas.glyphCount/glyphsPerRow),neededHeight=Math.pow(2,Math.ceil(Math.log2(neededRows*sdfGlyphSize)));neededHeight>currentHeight&&(console.info(`Increasing SDF texture size ${currentHeight}->${neededHeight}`),resizeWebGLCanvasWithoutClearing(sdfCanvas,textureWidth,neededHeight),sdfTexture.dispose()),Promise.all(neededSDFs.map(glyphInfo=>generateGlyphSDF(glyphInfo,atlas,args.gpuAccelerateSDF).then(({timing})=>{timings.sdf[glyphInfo.atlasIndex]=timing}))).then(()=>{neededSDFs.length&&!atlas.contextLost&&(safariPre15Workaround(atlas),sdfTexture.needsUpdate=!0),timings.sdfTotal=now$1()-sdfStart,timings.total=now$1()-totalStart,callback(Object.freeze({parameters:args,sdfTexture,sdfGlyphSize,sdfExponent,glyphBounds,glyphAtlasIndices:glyphIds,glyphColors:result.glyphColors,caretPositions:result.caretPositions,caretHeight:result.caretHeight,chunkedBounds:result.chunkedBounds,ascender:result.ascender,descender:result.descender,lineHeight:result.lineHeight,capHeight:result.capHeight,xHeight:result.xHeight,topBaseline:result.topBaseline,blockBounds:result.blockBounds,visibleBounds:result.visibleBounds,timings:result.timings}))})}),Promise.resolve().then(()=>{atlas.contextLost||warmUpSDFCanvas(sdfCanvas)})}function generateGlyphSDF({path,atlasIndex,sdfViewBox},{sdfGlyphSize,sdfCanvas,contextLost},useGPU){if(contextLost)return Promise.resolve({timing:-1});const{textureWidth,sdfExponent}=CONFIG,maxDist=Math.max(sdfViewBox[2]-sdfViewBox[0],sdfViewBox[3]-sdfViewBox[1]),squareIndex=Math.floor(atlasIndex/4);return generateSDF(sdfGlyphSize,sdfGlyphSize,path,sdfViewBox,maxDist,sdfExponent,sdfCanvas,squareIndex%(textureWidth/sdfGlyphSize)*sdfGlyphSize,Math.floor(squareIndex/(textureWidth/sdfGlyphSize))*sdfGlyphSize,atlasIndex%4,useGPU)}function initContextLossHandling(atlas){const canvas=atlas.sdfCanvas;canvas.addEventListener("webglcontextlost",event=>{console.log("Context Lost",event),event.preventDefault(),atlas.contextLost=!0}),canvas.addEventListener("webglcontextrestored",event=>{console.log("Context Restored",event),atlas.contextLost=!1;const promises=[];atlas.glyphsByFont.forEach(glyphMap=>{glyphMap.forEach(glyph=>{promises.push(generateGlyphSDF(glyph,atlas,!0))})}),Promise.all(promises).then(()=>{safariPre15Workaround(atlas),atlas.sdfTexture.needsUpdate=!0})})}function troika_three_text_esm_assign(toObj,fromObj){for(let key in fromObj)fromObj.hasOwnProperty(key)&&(toObj[key]=fromObj[key]);return toObj}let linkEl;function toAbsoluteURL(path){return linkEl||(linkEl=typeof document>"u"?{}:document.createElement("a")),linkEl.href=path,linkEl.href}function safariPre15Workaround(atlas){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas,sdfTexture}=atlas,{width,height}=sdfCanvas,gl=atlas.sdfCanvas.getContext("webgl");let pixels=sdfTexture.image.data;(!pixels||pixels.length!==width*height*4)&&(pixels=new Uint8Array(width*height*4),sdfTexture.image={width,height,data:pixels},sdfTexture.flipY=!1,sdfTexture.isDataTexture=!0),gl.readPixels(0,0,width,height,gl.RGBA,gl.UNSIGNED_BYTE,pixels)}}__name(getTextRenderInfo,"getTextRenderInfo"),__name(generateGlyphSDF,"generateGlyphSDF"),__name(initContextLossHandling,"initContextLossHandling"),__name(function preloadFont({font,characters,sdfGlyphSize},callback){getTextRenderInfo({font,sdfGlyphSize,text:Array.isArray(characters)?characters.join("\n"):""+characters},callback)},"preloadFont"),__name(troika_three_text_esm_assign,"troika_three_text_esm_assign"),__name(toAbsoluteURL,"toAbsoluteURL"),__name(safariPre15Workaround,"safariPre15Workaround");const typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[defineWorkerModule({name:"Typesetter",dependencies:[CONFIG,workerModule,createTypesetter,bidi],init(config,fontParser,createTypesetter2,bidiFactory2){const{defaultFontURL}=config;return createTypesetter2(fontParser,bidiFactory2(),{defaultFontURL})}})],init:typesetter=>function(args){return new Promise(resolve=>{typesetter.typeset(args,resolve)})},getTransferables(result){const transferables=[result.glyphPositions.buffer,result.glyphIds.buffer];return result.caretPositions&&transferables.push(result.caretPositions.buffer),result.glyphColors&&transferables.push(result.glyphColors.buffer),transferables}});__name(function dumpSDFTextures(){Object.keys(atlases).forEach(size=>{const canvas=atlases[size].sdfCanvas,{width,height}=canvas;console.log("%c.",`\n      background: url(${canvas.toDataURL()});\n      background-size: ${width}px ${height}px;\n      color: transparent;\n      font-size: 0;\n      line-height: ${height}px;\n      padding-left: ${width}px;\n    `)})},"dumpSDFTextures");const templateGeometries={};function getTemplateGeometry(detail){let geom=templateGeometries[detail];if(!geom){const front=new three_module._12(1,1,detail,detail),back=front.clone(),frontAttrs=front.attributes,backAttrs=back.attributes,combined=new three_module.u9r,vertCount=frontAttrs.uv.count;for(let i=0;i<vertCount;i++)backAttrs.position.array[3*i]*=-1,backAttrs.normal.array[3*i+2]*=-1;["position","normal","uv"].forEach(name=>{combined.setAttribute(name,new three_module.a$l([...frontAttrs[name].array,...backAttrs[name].array],frontAttrs[name].itemSize))}),combined.setIndex([...front.index.array,...back.index.array.map(n=>n+vertCount)]),combined.translate(.5,.5,0),geom=templateGeometries[detail]=combined}return geom}__name(getTemplateGeometry,"getTemplateGeometry");class GlyphsGeometry extends three_module.L5s{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new three_module.aLr,this.boundingBox=new three_module.ZzF}computeBoundingSphere(){}computeBoundingBox(){}setSide(side){const verts=this.getIndex().count;this.setDrawRange(side===three_module._Li?verts/2:0,side===three_module.ehD?verts:verts/2)}set detail(detail){if(detail!==this._detail){this._detail=detail,("number"!=typeof detail||detail<1)&&(detail=1);let tpl=getTemplateGeometry(detail);["position","normal","uv"].forEach(attr=>{this.attributes[attr]=tpl.attributes[attr].clone()}),this.setIndex(tpl.getIndex().clone())}}get detail(){return this._detail}set curveRadius(r){r!==this._curveRadius&&(this._curveRadius=r,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(glyphBounds,glyphAtlasIndices,blockBounds,chunkedBounds,glyphColors){updateBufferAttr(this,"aTroikaGlyphBounds",glyphBounds,4),updateBufferAttr(this,"aTroikaGlyphIndex",glyphAtlasIndices,1),updateBufferAttr(this,"aTroikaGlyphColor",glyphColors,3),this._blockBounds=blockBounds,this._chunkedBounds=chunkedBounds,this.instanceCount=glyphAtlasIndices.length,this._updateBounds()}_updateBounds(){const bounds=this._blockBounds;if(bounds){const{curveRadius,boundingBox:bbox}=this;if(curveRadius){const{PI,floor,min,max,sin,cos}=Math,halfPi=PI/2,twoPi=2*PI,absR=Math.abs(curveRadius),leftAngle=bounds[0]/absR,rightAngle=bounds[2]/absR,minX=floor((leftAngle+halfPi)/twoPi)!==floor((rightAngle+halfPi)/twoPi)?-absR:min(sin(leftAngle)*absR,sin(rightAngle)*absR),maxX=floor((leftAngle-halfPi)/twoPi)!==floor((rightAngle-halfPi)/twoPi)?absR:max(sin(leftAngle)*absR,sin(rightAngle)*absR),maxZ=floor((leftAngle+PI)/twoPi)!==floor((rightAngle+PI)/twoPi)?2*absR:max(absR-cos(leftAngle)*absR,absR-cos(rightAngle)*absR);bbox.min.set(minX,bounds[1],curveRadius<0?-maxZ:0),bbox.max.set(maxX,bounds[3],curveRadius<0?0:maxZ)}else bbox.min.set(bounds[0],bounds[1],0),bbox.max.set(bounds[2],bounds[3],0);bbox.getBoundingSphere(this.boundingSphere)}}applyClipRect(clipRect){let count=this.getAttribute("aTroikaGlyphIndex").count,chunks=this._chunkedBounds;if(chunks)for(let i=chunks.length;i--;){count=chunks[i].end;let rect=chunks[i].rect;if(rect[1]<clipRect.w&&rect[3]>clipRect.y&&rect[0]<clipRect.z&&rect[2]>clipRect.x)break}this.instanceCount=count}}function updateBufferAttr(geom,attrName,newArray,itemSize){const attr=geom.getAttribute(attrName);newArray?attr&&attr.array.length===newArray.length?(attr.array.set(newArray),attr.needsUpdate=!0):(geom.setAttribute(attrName,new three_module.lb7(newArray,itemSize)),delete geom._maxInstanceCount,geom.dispose()):attr&&geom.deleteAttribute(attrName)}function createTextDerivedMaterial(baseMaterial){const textMaterial=createDerivedMaterial(baseMaterial,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new three_module.FM8},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new three_module.Ltg(0,0,0,0)},uTroikaClipRect:{value:new three_module.Ltg(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new three_module.FM8},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new three_module.Ilk},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new three_module.Vkp},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader,fragmentShader}){let uDiffuseRE=/\buniform\s+vec3\s+diffuse\b/;return uDiffuseRE.test(fragmentShader)&&(fragmentShader=fragmentShader.replace(uDiffuseRE,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),uDiffuseRE.test(vertexShader)||(vertexShader=vertexShader.replace(voidMainRegExp,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader,fragmentShader}}});return textMaterial.transparent=!0,Object.defineProperties(textMaterial,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),textMaterial}__name(GlyphsGeometry,"GlyphsGeometry"),__name(updateBufferAttr,"updateBufferAttr"),__name(createTextDerivedMaterial,"createTextDerivedMaterial");const defaultMaterial=new three_module.vBJ({color:16777215,side:three_module.ehD,transparent:!0}),tempMat4=new three_module.yGw,tempVec3a=new three_module.Pa4,tempVec3b=new three_module.Pa4,tempArray=[],origin=new three_module.Pa4;function first2(o){return Array.isArray(o)?o[0]:o}__name(first2,"first");let getFlatRaycastMesh=__name(()=>{const mesh=new three_module.Kj0(new three_module._12(1,1),defaultMaterial);return getFlatRaycastMesh=__name(()=>mesh,"getFlatRaycastMesh"),mesh},"getFlatRaycastMesh"),getCurvedRaycastMesh=__name(()=>{const mesh=new three_module.Kj0(new three_module._12(1,1,32,1),defaultMaterial);return getCurvedRaycastMesh=__name(()=>mesh,"getCurvedRaycastMesh"),mesh},"getCurvedRaycastMesh");const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],COPYABLE_PROPS=SYNCABLE_PROPS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Text2 extends three_module.Kj0{constructor(){super(new GlyphsGeometry,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=8421504,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation="+x+y",this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(callback){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(callback):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},textRenderInfo=>{this._isSyncing=!1,this._textRenderInfo=textRenderInfo,this.geometry.updateGlyphs(textRenderInfo.glyphBounds,textRenderInfo.glyphAtlasIndices,textRenderInfo.blockBounds,textRenderInfo.chunkedBounds,textRenderInfo.glyphColors);const queued=this._queuedSyncs;queued&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{queued.forEach(fn=>fn&&fn())})),this.dispatchEvent(syncCompleteEvent),callback&&callback()})))}onBeforeRender(renderer,scene,camera,geometry2,material,group){this.sync(),material.isTroikaTextMaterial&&this._prepareForRender(material),material._hadOwnSide=material.hasOwnProperty("side"),this.geometry.setSide(material._actualSide=material.side),material.side=three_module.Wl3}onAfterRender(renderer,scene,camera,geometry2,material,group){material._hadOwnSide?material.side=material._actualSide:delete material.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let derivedMaterial=this._derivedMaterial;const baseMaterial=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());if((!derivedMaterial||derivedMaterial.baseMaterial!==baseMaterial)&&(derivedMaterial=this._derivedMaterial=createTextDerivedMaterial(baseMaterial),baseMaterial.addEventListener("dispose",__name(function onDispose(){baseMaterial.removeEventListener("dispose",onDispose),derivedMaterial.dispose()},"onDispose"))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let outlineMaterial=derivedMaterial._outlineMtl;return outlineMaterial||(outlineMaterial=derivedMaterial._outlineMtl=Object.create(derivedMaterial,{id:{value:derivedMaterial.id+.1}}),outlineMaterial.isTextOutlineMaterial=!0,outlineMaterial.depthWrite=!1,outlineMaterial.map=null,derivedMaterial.addEventListener("dispose",__name(function onDispose(){derivedMaterial.removeEventListener("dispose",onDispose),outlineMaterial.dispose()},"onDispose"))),[outlineMaterial,derivedMaterial]}return derivedMaterial}set material(baseMaterial){baseMaterial&&baseMaterial.isTroikaTextMaterial?(this._derivedMaterial=baseMaterial,this._baseMaterial=baseMaterial.baseMaterial):this._baseMaterial=baseMaterial}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(detail){this.geometry.detail=detail}get curveRadius(){return this.geometry.curveRadius}set curveRadius(r){this.geometry.curveRadius=r}get customDepthMaterial(){return first2(this.material).getDepthMaterial()}get customDistanceMaterial(){return first2(this.material).getDistanceMaterial()}_prepareForRender(material){const isOutline=material.isTextOutlineMaterial,uniforms=material.uniforms,textInfo=this.textRenderInfo;if(textInfo){const{sdfTexture,blockBounds}=textInfo;uniforms.uTroikaSDFTexture.value=sdfTexture,uniforms.uTroikaSDFTextureSize.value.set(sdfTexture.image.width,sdfTexture.image.height),uniforms.uTroikaSDFGlyphSize.value=textInfo.sdfGlyphSize,uniforms.uTroikaSDFExponent.value=textInfo.sdfExponent,uniforms.uTroikaTotalBounds.value.fromArray(blockBounds),uniforms.uTroikaUseGlyphColors.value=!isOutline&&!!textInfo.glyphColors;let fillOpacity,strokeOpacity,strokeColor,distanceOffset=0,blurRadius=0,strokeWidth=0,offsetX=0,offsetY=0;if(isOutline){let{outlineWidth,outlineOffsetX,outlineOffsetY,outlineBlur,outlineOpacity}=this;distanceOffset=this._parsePercent(outlineWidth)||0,blurRadius=Math.max(0,this._parsePercent(outlineBlur)||0),fillOpacity=outlineOpacity,offsetX=this._parsePercent(outlineOffsetX)||0,offsetY=this._parsePercent(outlineOffsetY)||0}else strokeWidth=Math.max(0,this._parsePercent(this.strokeWidth)||0),strokeWidth&&(strokeColor=this.strokeColor,uniforms.uTroikaStrokeColor.value.set(strokeColor??8421504),strokeOpacity=this.strokeOpacity,null==strokeOpacity&&(strokeOpacity=1)),fillOpacity=this.fillOpacity;uniforms.uTroikaDistanceOffset.value=distanceOffset,uniforms.uTroikaPositionOffset.value.set(offsetX,offsetY),uniforms.uTroikaBlurRadius.value=blurRadius,uniforms.uTroikaStrokeWidth.value=strokeWidth,uniforms.uTroikaStrokeOpacity.value=strokeOpacity,uniforms.uTroikaFillOpacity.value=fillOpacity??1,uniforms.uTroikaCurveRadius.value=this.curveRadius||0;let clipRect=this.clipRect;if(clipRect&&Array.isArray(clipRect)&&4===clipRect.length)uniforms.uTroikaClipRect.value.fromArray(clipRect);else{const pad=100*(this.fontSize||.1);uniforms.uTroikaClipRect.value.set(blockBounds[0]-pad,blockBounds[1]-pad,blockBounds[2]+pad,blockBounds[3]+pad)}this.geometry.applyClipRect(uniforms.uTroikaClipRect.value)}uniforms.uTroikaSDFDebug.value=!!this.debugSDF,material.polygonOffset=!!this.depthOffset,material.polygonOffsetFactor=material.polygonOffsetUnits=this.depthOffset||0;const color=isOutline?this.outlineColor||0:this.color;if(null==color)delete material.color;else{const colorObj=material.hasOwnProperty("color")?material.color:material.color=new three_module.Ilk;(color!==colorObj._input||"object"==typeof color)&&colorObj.set(colorObj._input=color)}let orient=this.orientation||"+x+y";if(orient!==material._orientation){let rotMat=uniforms.uTroikaOrient.value;orient=orient.replace(/[^-+xyz]/g,"");let match="+x+y"!==orient&&orient.match(/^([-+])([xyz])([-+])([xyz])$/);if(match){let[,hSign,hAxis,vSign,vAxis]=match;tempVec3a.set(0,0,0)[hAxis]="-"===hSign?1:-1,tempVec3b.set(0,0,0)[vAxis]="-"===vSign?-1:1,tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b),rotMat.setFromMatrix4(tempMat4)}else rotMat.identity();material._orientation=orient}}_parsePercent(value){if("string"==typeof value){let match=value.match(/^(-?[\d.]+)%$/),pct=match?parseFloat(match[1]):NaN;value=(isNaN(pct)?0:pct/100)*this.fontSize}return value}localPositionToTextCoords(position,target=new three_module.FM8){target.copy(position);const r=this.curveRadius;return r&&(target.x=Math.atan2(position.x,Math.abs(r)-Math.abs(position.z))*Math.abs(r)),target}worldPositionToTextCoords(position,target=new three_module.FM8){return tempVec3a.copy(position),this.localPositionToTextCoords(this.worldToLocal(tempVec3a),target)}raycast(raycaster,intersects){const{textRenderInfo,curveRadius}=this;if(textRenderInfo){const bounds=textRenderInfo.blockBounds,raycastMesh=curveRadius?getCurvedRaycastMesh():getFlatRaycastMesh(),geom=raycastMesh.geometry,{position,uv}=geom.attributes;for(let i=0;i<uv.count;i++){let x=bounds[0]+uv.getX(i)*(bounds[2]-bounds[0]);const y=bounds[1]+uv.getY(i)*(bounds[3]-bounds[1]);let z=0;curveRadius&&(z=curveRadius-Math.cos(x/curveRadius)*curveRadius,x=Math.sin(x/curveRadius)*curveRadius),position.setXYZ(i,x,y,z)}geom.boundingSphere=this.geometry.boundingSphere,geom.boundingBox=this.geometry.boundingBox,raycastMesh.matrixWorld=this.matrixWorld,raycastMesh.material.side=this.material.side,tempArray.length=0,raycastMesh.raycast(raycaster,tempArray);for(let i=0;i<tempArray.length;i++)tempArray[i].object=this,intersects.push(tempArray[i])}}copy(source){const geom=this.geometry;return super.copy(source),this.geometry=geom,COPYABLE_PROPS.forEach(prop=>{this[prop]=source[prop]}),this}clone(){return(new this.constructor).copy(this)}}__name(Text2,"Text"),SYNCABLE_PROPS.forEach(prop=>{const privateKey="_private_"+prop;Object.defineProperty(Text2.prototype,prop,{get(){return this[privateKey]},set(value){value!==this[privateKey]&&(this[privateKey]=value,this._needsSync=!0)}})}),__name(function getCaretAtPoint(textRenderInfo,x,y){let closestCaret=null;const{caretHeight}=textRenderInfo,caretsByRow=groupCaretsByRow(textRenderInfo);let closestRowY=1/0;return caretsByRow.forEach((carets,rowY)=>{Math.abs(y-(rowY+caretHeight/2))<Math.abs(y-(closestRowY+caretHeight/2))&&(closestRowY=rowY)}),caretsByRow.get(closestRowY).forEach(caret=>{(!closestCaret||Math.abs(x-caret.x)<Math.abs(x-closestCaret.x))&&(closestCaret=caret)}),closestCaret},"getCaretAtPoint");const _rectsCache=new WeakMap;__name(function getSelectionRects(textRenderInfo,start,end){let rects;if(textRenderInfo){let prevResult=_rectsCache.get(textRenderInfo);if(prevResult&&prevResult.start===start&&prevResult.end===end)return prevResult.rects;const{caretPositions,caretHeight}=textRenderInfo;if(end<start){const s=start;start=end,end=s}start=Math.max(start,0),end=Math.min(end,caretPositions.length+1),rects=[];let currentRect=null;for(let i=start;i<end;i++){const x1=caretPositions[3*i],x2=caretPositions[3*i+1],left=Math.min(x1,x2),right=Math.max(x1,x2),bottom=caretPositions[3*i+2];(!currentRect||bottom!==currentRect.bottom||left>currentRect.right||right<currentRect.left)&&(currentRect={left:1/0,right:-1/0,bottom,top:bottom+caretHeight},rects.push(currentRect)),currentRect.left=Math.min(left,currentRect.left),currentRect.right=Math.max(right,currentRect.right)}rects.sort((a,b)=>b.bottom-a.bottom||a.left-b.left);for(let i=rects.length-1;i-- >0;){const rectA=rects[i],rectB=rects[i+1];rectA.bottom===rectB.bottom&&rectA.left<=rectB.right&&rectA.right>=rectB.left&&(rectB.left=Math.min(rectB.left,rectA.left),rectB.right=Math.max(rectB.right,rectA.right),rects.splice(i,1))}_rectsCache.set(textRenderInfo,{start,end,rects})}return rects},"getSelectionRects");const _caretsByRowCache=new WeakMap;function groupCaretsByRow(textRenderInfo){let caretsByRow=_caretsByRowCache.get(textRenderInfo);if(!caretsByRow){const{caretPositions,caretHeight}=textRenderInfo;caretsByRow=new Map;for(let i=0;i<caretPositions.length;i+=3){const rowY=caretPositions[i+2];let rowCarets=caretsByRow.get(rowY);rowCarets||caretsByRow.set(rowY,rowCarets=[]),rowCarets.push({x:caretPositions[i],y:rowY,height:caretHeight,charIndex:i/3}),i+3>=caretPositions.length&&rowCarets.push({x:caretPositions[i+1],y:rowY,height:caretHeight,charIndex:i/3+1})}}return _caretsByRowCache.set(textRenderInfo,caretsByRow),caretsByRow}__name(groupCaretsByRow,"groupCaretsByRow")},655:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FC:()=>__asyncGenerator,KL:()=>__asyncValues,mG:()=>__awaiter,qq:()=>__await});var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return __name(adopt,"adopt"),new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((generator=generator.apply(thisArg,_arguments||[])).next())})}__name(function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},"__extends"),__name(function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},"__rest"),__name(function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate"),__name(function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param"),__name(function __esDecorate(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}__name(accept,"accept");for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0},"__esDecorate"),__name(function __runInitializers(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},"__runInitializers"),__name(function __propKey(x){return"symbol"==typeof x?x:"".concat(x)},"__propKey"),__name(function __setFunctionName(f,name,prefix){return"symbol"==typeof name&&(name=name.description?"[".concat(name.description,"]"):""),Object.defineProperty(f,"name",{configurable:!0,value:prefix?"".concat(prefix," ",name):name})},"__setFunctionName"),__name(function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)},"__metadata"),__name(__awaiter,"__awaiter"),__name(function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},"__generator");var __createBinding=Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))&&(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]};function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})})}function resume(n,v){try{!function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){!function settle(resolve,reject,d,v){Promise.resolve(v).then(function(v2){resolve({value:v2,done:d})},reject)}(resolve,reject,(v=o[n](v)).done,v.value)})}}}__name(function __exportStar(m,o){for(var p in m)"default"!==p&&!Object.prototype.hasOwnProperty.call(o,p)&&__createBinding(o,m,p)},"__exportStar"),__name(__values,"__values"),__name(__read,"__read"),__name(function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},"__spread"),__name(function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},"__spreadArrays"),__name(function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray"),__name(__await,"__await"),__name(__asyncGenerator,"__asyncGenerator"),__name(function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:!1}:f?f(v):v}:f}},"__asyncDelegator"),__name(__asyncValues,"__asyncValues"),__name(function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},"__makeTemplateObject");var __setModuleDefault=Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v};__name(function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},"__importStar"),__name(function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}},"__importDefault"),__name(function __classPrivateFieldGet(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)},"__classPrivateFieldGet"),__name(function __classPrivateFieldSet(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},"__classPrivateFieldSet"),__name(function __classPrivateFieldIn(state,receiver){if(null===receiver||"object"!=typeof receiver&&"function"!=typeof receiver)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof state?receiver===state:state.has(receiver)},"__classPrivateFieldIn")},9671:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator2(fn){return function(){var self2=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self2,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}__name(_next,"_next"),__name(_throw,"_throw"),_next(void 0)})}}__webpack_require__.d(__webpack_exports__,{Z:()=>_asyncToGenerator2}),__name(asyncGeneratorStep,"asyncGeneratorStep"),__name(_asyncToGenerator2,"_asyncToGenerator")},1591:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{IO:()=>query,LC:()=>AnimationFactory,X$:()=>trigger,ZE:()=>AnimationGroupPlayer,ZN:()=>NoopAnimationPlayer,_j:()=>AnimationBuilder,eR:()=>transition,jt:()=>animate,k1:()=>\u0275PRE_STYLE,l3:()=>AUTO_STYLE,oB:()=>style,pV:()=>animateChild,vP:()=>sequence});class AnimationBuilder{}__name(AnimationBuilder,"AnimationBuilder");class AnimationFactory{}__name(AnimationFactory,"AnimationFactory");const AUTO_STYLE="*";function trigger(name,definitions){return{type:7,name,definitions,options:{}}}function animate(timings,styles=null){return{type:4,styles,timings}}function sequence(steps,options=null){return{type:2,steps,options}}function style(tokens){return{type:6,styles:tokens,offset:null}}function transition(stateChangeExpr,steps,options=null){return{type:1,expr:stateChangeExpr,animation:steps,options}}function animateChild(options=null){return{type:9,options}}function query(selector,animation2,options=null){return{type:11,selector,animation:animation2,options}}function scheduleMicroTask(cb){Promise.resolve().then(cb)}__name(trigger,"trigger"),__name(animate,"animate"),__name(function group(steps,options=null){return{type:3,steps,options}},"group"),__name(sequence,"sequence"),__name(style,"style"),__name(function state(name,styles,options){return{type:0,name,styles,options}},"state"),__name(function keyframes(steps){return{type:5,steps}},"keyframes"),__name(transition,"transition"),__name(function animation(steps,options=null){return{type:8,animation:steps,options}},"animation"),__name(animateChild,"animateChild"),__name(function useAnimation(animation2,options=null){return{type:10,animation:animation2,options}},"useAnimation"),__name(query,"query"),__name(function stagger(timings,animation2){return{type:12,timings,animation:animation2}},"stagger"),__name(scheduleMicroTask,"scheduleMicroTask");class NoopAnimationPlayer{constructor(duration=0,delay=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=duration+delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(fn=>fn()),this._onDoneFns=[])}onStart(fn){this._originalOnStartFns.push(fn),this._onStartFns.push(fn)}onDone(fn){this._originalOnDoneFns.push(fn),this._onDoneFns.push(fn)}onDestroy(fn){this._onDestroyFns.push(fn)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){scheduleMicroTask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(fn=>fn()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(fn=>fn()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(position){this._position=this.totalTime?position*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(phaseName){const methods="start"==phaseName?this._onStartFns:this._onDoneFns;methods.forEach(fn=>fn()),methods.length=0}}__name(NoopAnimationPlayer,"NoopAnimationPlayer");class AnimationGroupPlayer{constructor(_players){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=_players;let doneCount=0,destroyCount=0,startCount=0;const total=this.players.length;0==total?scheduleMicroTask(()=>this._onFinish()):this.players.forEach(player=>{player.onDone(()=>{++doneCount==total&&this._onFinish()}),player.onDestroy(()=>{++destroyCount==total&&this._onDestroy()}),player.onStart(()=>{++startCount==total&&this._onStart()})}),this.totalTime=this.players.reduce((time,player)=>Math.max(time,player.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(fn=>fn()),this._onDoneFns=[])}init(){this.players.forEach(player=>player.init())}onStart(fn){this._onStartFns.push(fn)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(fn=>fn()),this._onStartFns=[])}onDone(fn){this._onDoneFns.push(fn)}onDestroy(fn){this._onDestroyFns.push(fn)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(player=>player.play())}pause(){this.players.forEach(player=>player.pause())}restart(){this.players.forEach(player=>player.restart())}finish(){this._onFinish(),this.players.forEach(player=>player.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(player=>player.destroy()),this._onDestroyFns.forEach(fn=>fn()),this._onDestroyFns=[])}reset(){this.players.forEach(player=>player.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(p){const timeAtPosition=p*this.totalTime;this.players.forEach(player=>{const position=player.totalTime?Math.min(1,timeAtPosition/player.totalTime):1;player.setPosition(position)})}getPosition(){const longestPlayer=this.players.reduce((longestSoFar,player)=>null===longestSoFar||player.totalTime>longestSoFar.totalTime?player:longestSoFar,null);return null!=longestPlayer?longestPlayer.getPosition():0}beforeDestroy(){this.players.forEach(player=>{player.beforeDestroy&&player.beforeDestroy()})}triggerCallback(phaseName){const methods="start"==phaseName?this._onStartFns:this._onDoneFns;methods.forEach(fn=>fn()),methods.length=0}}__name(AnimationGroupPlayer,"AnimationGroupPlayer");const \u0275PRE_STYLE="!"},1247:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Iq:()=>ClipboardModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2223);__name(class PendingCopy{constructor(text,_document){this._document=_document;const textarea=this._textarea=this._document.createElement("textarea"),styles=textarea.style;styles.position="fixed",styles.top=styles.opacity="0",styles.left="-999em",textarea.setAttribute("aria-hidden","true"),textarea.value=text,textarea.readOnly=!0,this._document.body.appendChild(textarea)}copy(){const textarea=this._textarea;let successful=!1;try{if(textarea){const currentFocus=this._document.activeElement;textarea.select(),textarea.setSelectionRange(0,textarea.value.length),successful=this._document.execCommand("copy"),currentFocus&&currentFocus.focus()}}catch{}return successful}destroy(){const textarea=this._textarea;textarea&&(textarea.remove(),this._textarea=void 0)}},"PendingCopy");let ClipboardModule=(()=>{class ClipboardModule2{}return __name(ClipboardModule2,"ClipboardModule"),ClipboardModule2.\u0275fac=__name(function(t){return new(t||ClipboardModule2)},"ClipboardModule_Factory"),ClipboardModule2.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:ClipboardModule2}),ClipboardModule2.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),ClipboardModule2})()},4755:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Do:()=>HashLocationStrategy2,EM:()=>ViewportScroller2,HT:()=>setRootDomAdapter,JF:()=>XhrFactory,JJ:()=>DecimalPipe,K0:()=>DOCUMENT2,Mx:()=>parseCookieValue,NF:()=>isPlatformBrowser,O5:()=>NgIf,Ov:()=>AsyncPipe,PM:()=>isPlatformServer,S$:()=>LocationStrategy2,V_:()=>LOCATION_INITIALIZED,Ye:()=>Location,b0:()=>PathLocationStrategy,bD:()=>PLATFORM_BROWSER_ID,ez:()=>CommonModule,mk:()=>NgClass,q:()=>getDOM,sg:()=>NgForOf,w_:()=>DomAdapter});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2223);let _DOM=null;function getDOM(){return _DOM}function setRootDomAdapter(adapter){_DOM||(_DOM=adapter)}__name(getDOM,"getDOM"),__name(setRootDomAdapter,"setRootDomAdapter");class DomAdapter{}__name(DomAdapter,"DomAdapter");const DOCUMENT2=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("DocumentToken");let PlatformLocation=(()=>{class PlatformLocation2{historyGo(relativePosition){throw new Error("Not implemented")}}return __name(PlatformLocation2,"PlatformLocation"),PlatformLocation2.\u0275fac=__name(function(t){return new(t||PlatformLocation2)},"PlatformLocation_Factory"),PlatformLocation2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:PlatformLocation2,factory:function(){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.f3M)(BrowserPlatformLocation)},providedIn:"platform"}),PlatformLocation2})();const LOCATION_INITIALIZED=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("Location Initialized");let BrowserPlatformLocation=(()=>{class BrowserPlatformLocation2 extends PlatformLocation{constructor(){super(),this._doc=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.f3M)(DOCUMENT2),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return getDOM().getBaseHref(this._doc)}onPopState(fn){const window2=getDOM().getGlobalEventTarget(this._doc,"window");return window2.addEventListener("popstate",fn,!1),()=>window2.removeEventListener("popstate",fn)}onHashChange(fn){const window2=getDOM().getGlobalEventTarget(this._doc,"window");return window2.addEventListener("hashchange",fn,!1),()=>window2.removeEventListener("hashchange",fn)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(newPath){this._location.pathname=newPath}pushState(state,title,url){this._history.pushState(state,title,url)}replaceState(state,title,url){this._history.replaceState(state,title,url)}forward(){this._history.forward()}back(){this._history.back()}historyGo(relativePosition=0){this._history.go(relativePosition)}getState(){return this._history.state}}return __name(BrowserPlatformLocation2,"BrowserPlatformLocation"),BrowserPlatformLocation2.\u0275fac=__name(function(t){return new(t||BrowserPlatformLocation2)},"BrowserPlatformLocation_Factory"),BrowserPlatformLocation2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:BrowserPlatformLocation2,factory:function(){return new BrowserPlatformLocation2},providedIn:"platform"}),BrowserPlatformLocation2})();function joinWithSlash(start,end){if(0==start.length)return end;if(0==end.length)return start;let slashes=0;return start.endsWith("/")&&slashes++,end.startsWith("/")&&slashes++,2==slashes?start+end.substring(1):1==slashes?start+end:start+"/"+end}function stripTrailingSlash(url){const match=url.match(/#|\?|$/),pathEndIdx=match&&match.index||url.length;return url.slice(0,pathEndIdx-("/"===url[pathEndIdx-1]?1:0))+url.slice(pathEndIdx)}function normalizeQueryParams(params){return params&&"?"!==params[0]?"?"+params:params}__name(joinWithSlash,"joinWithSlash"),__name(stripTrailingSlash,"stripTrailingSlash"),__name(normalizeQueryParams,"normalizeQueryParams");let LocationStrategy2=(()=>{class LocationStrategy3{historyGo(relativePosition){throw new Error("Not implemented")}}return __name(LocationStrategy3,"LocationStrategy"),LocationStrategy3.\u0275fac=__name(function(t){return new(t||LocationStrategy3)},"LocationStrategy_Factory"),LocationStrategy3.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:LocationStrategy3,factory:function(){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.f3M)(PathLocationStrategy)},providedIn:"root"}),LocationStrategy3})();const APP_BASE_HREF=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("appBaseHref");let PathLocationStrategy=(()=>{class PathLocationStrategy2 extends LocationStrategy2{constructor(_platformLocation,href){super(),this._platformLocation=_platformLocation,this._removeListenerFns=[],this._baseHref=href??this._platformLocation.getBaseHrefFromDOM()??(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.f3M)(DOCUMENT2).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(fn){this._removeListenerFns.push(this._platformLocation.onPopState(fn),this._platformLocation.onHashChange(fn))}getBaseHref(){return this._baseHref}prepareExternalUrl(internal){return joinWithSlash(this._baseHref,internal)}path(includeHash=!1){const pathname=this._platformLocation.pathname+normalizeQueryParams(this._platformLocation.search),hash=this._platformLocation.hash;return hash&&includeHash?`${pathname}${hash}`:pathname}pushState(state,title,url,queryParams){const externalUrl=this.prepareExternalUrl(url+normalizeQueryParams(queryParams));this._platformLocation.pushState(state,title,externalUrl)}replaceState(state,title,url,queryParams){const externalUrl=this.prepareExternalUrl(url+normalizeQueryParams(queryParams));this._platformLocation.replaceState(state,title,externalUrl)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(relativePosition=0){this._platformLocation.historyGo?.(relativePosition)}}return __name(PathLocationStrategy2,"PathLocationStrategy"),PathLocationStrategy2.\u0275fac=__name(function(t){return new(t||PathLocationStrategy2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(PlatformLocation),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(APP_BASE_HREF,8))},"PathLocationStrategy_Factory"),PathLocationStrategy2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:PathLocationStrategy2,factory:PathLocationStrategy2.\u0275fac,providedIn:"root"}),PathLocationStrategy2})(),HashLocationStrategy2=(()=>{class HashLocationStrategy3 extends LocationStrategy2{constructor(_platformLocation,_baseHref){super(),this._platformLocation=_platformLocation,this._baseHref="",this._removeListenerFns=[],null!=_baseHref&&(this._baseHref=_baseHref)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(fn){this._removeListenerFns.push(this._platformLocation.onPopState(fn),this._platformLocation.onHashChange(fn))}getBaseHref(){return this._baseHref}path(includeHash=!1){let path=this._platformLocation.hash;return null==path&&(path="#"),path.length>0?path.substring(1):path}prepareExternalUrl(internal){const url=joinWithSlash(this._baseHref,internal);return url.length>0?"#"+url:url}pushState(state,title,path,queryParams){let url=this.prepareExternalUrl(path+normalizeQueryParams(queryParams));0==url.length&&(url=this._platformLocation.pathname),this._platformLocation.pushState(state,title,url)}replaceState(state,title,path,queryParams){let url=this.prepareExternalUrl(path+normalizeQueryParams(queryParams));0==url.length&&(url=this._platformLocation.pathname),this._platformLocation.replaceState(state,title,url)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(relativePosition=0){this._platformLocation.historyGo?.(relativePosition)}}return __name(HashLocationStrategy3,"HashLocationStrategy"),HashLocationStrategy3.\u0275fac=__name(function(t){return new(t||HashLocationStrategy3)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(PlatformLocation),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(APP_BASE_HREF,8))},"HashLocationStrategy_Factory"),HashLocationStrategy3.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:HashLocationStrategy3,factory:HashLocationStrategy3.\u0275fac}),HashLocationStrategy3})(),Location=(()=>{class Location2{constructor(locationStrategy){this._subject=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=locationStrategy;const baseHref=this._locationStrategy.getBaseHref();this._basePath=_stripOrigin(stripTrailingSlash(_stripIndexHtml(baseHref))),this._locationStrategy.onPopState(ev=>{this._subject.emit({url:this.path(!0),pop:!0,state:ev.state,type:ev.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(includeHash=!1){return this.normalize(this._locationStrategy.path(includeHash))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(path,query=""){return this.path()==this.normalize(path+normalizeQueryParams(query))}normalize(url){return Location2.stripTrailingSlash(_stripBasePath(this._basePath,_stripIndexHtml(url)))}prepareExternalUrl(url){return url&&"/"!==url[0]&&(url="/"+url),this._locationStrategy.prepareExternalUrl(url)}go(path,query="",state=null){this._locationStrategy.pushState(state,"",path,query),this._notifyUrlChangeListeners(this.prepareExternalUrl(path+normalizeQueryParams(query)),state)}replaceState(path,query="",state=null){this._locationStrategy.replaceState(state,"",path,query),this._notifyUrlChangeListeners(this.prepareExternalUrl(path+normalizeQueryParams(query)),state)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(relativePosition=0){this._locationStrategy.historyGo?.(relativePosition)}onUrlChange(fn){return this._urlChangeListeners.push(fn),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(v=>{this._notifyUrlChangeListeners(v.url,v.state)})),()=>{const fnIndex=this._urlChangeListeners.indexOf(fn);this._urlChangeListeners.splice(fnIndex,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(url="",state){this._urlChangeListeners.forEach(fn=>fn(url,state))}subscribe(onNext,onThrow,onReturn){return this._subject.subscribe({next:onNext,error:onThrow,complete:onReturn})}}return __name(Location2,"Location"),Location2.normalizeQueryParams=normalizeQueryParams,Location2.joinWithSlash=joinWithSlash,Location2.stripTrailingSlash=stripTrailingSlash,Location2.\u0275fac=__name(function(t){return new(t||Location2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(LocationStrategy2))},"Location_Factory"),Location2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Location2,factory:function(){return createLocation()},providedIn:"root"}),Location2})();function createLocation(){return new Location((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG)(LocationStrategy2))}function _stripBasePath(basePath,url){if(!basePath||!url.startsWith(basePath))return url;const strippedUrl=url.substring(basePath.length);return""===strippedUrl||["/",";","?","#"].includes(strippedUrl[0])?strippedUrl:url}function _stripIndexHtml(url){return url.replace(/\/index.html$/,"")}function _stripOrigin(baseHref){if(new RegExp("^(https?:)?//").test(baseHref)){const[,pathname]=baseHref.split(/\/\/[^\/]+/);return pathname}return baseHref}__name(createLocation,"createLocation"),__name(_stripBasePath,"_stripBasePath"),__name(_stripIndexHtml,"_stripIndexHtml"),__name(_stripOrigin,"_stripOrigin");const CURRENCIES_EN={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var NumberFormatStyle=(()=>((NumberFormatStyle=NumberFormatStyle||{})[NumberFormatStyle.Decimal=0]="Decimal",NumberFormatStyle[NumberFormatStyle.Percent=1]="Percent",NumberFormatStyle[NumberFormatStyle.Currency=2]="Currency",NumberFormatStyle[NumberFormatStyle.Scientific=3]="Scientific",NumberFormatStyle))(),FormStyle=(()=>((FormStyle=FormStyle||{})[FormStyle.Format=0]="Format",FormStyle[FormStyle.Standalone=1]="Standalone",FormStyle))(),TranslationWidth=(()=>((TranslationWidth=TranslationWidth||{})[TranslationWidth.Narrow=0]="Narrow",TranslationWidth[TranslationWidth.Abbreviated=1]="Abbreviated",TranslationWidth[TranslationWidth.Wide=2]="Wide",TranslationWidth[TranslationWidth.Short=3]="Short",TranslationWidth))(),FormatWidth=(()=>((FormatWidth=FormatWidth||{})[FormatWidth.Short=0]="Short",FormatWidth[FormatWidth.Medium=1]="Medium",FormatWidth[FormatWidth.Long=2]="Long",FormatWidth[FormatWidth.Full=3]="Full",FormatWidth))(),NumberSymbol=(()=>((NumberSymbol=NumberSymbol||{})[NumberSymbol.Decimal=0]="Decimal",NumberSymbol[NumberSymbol.Group=1]="Group",NumberSymbol[NumberSymbol.List=2]="List",NumberSymbol[NumberSymbol.PercentSign=3]="PercentSign",NumberSymbol[NumberSymbol.PlusSign=4]="PlusSign",NumberSymbol[NumberSymbol.MinusSign=5]="MinusSign",NumberSymbol[NumberSymbol.Exponential=6]="Exponential",NumberSymbol[NumberSymbol.SuperscriptingExponent=7]="SuperscriptingExponent",NumberSymbol[NumberSymbol.PerMille=8]="PerMille",NumberSymbol[NumberSymbol.Infinity=9]="Infinity",NumberSymbol[NumberSymbol.NaN=10]="NaN",NumberSymbol[NumberSymbol.TimeSeparator=11]="TimeSeparator",NumberSymbol[NumberSymbol.CurrencyDecimal=12]="CurrencyDecimal",NumberSymbol[NumberSymbol.CurrencyGroup=13]="CurrencyGroup",NumberSymbol))();function getLocaleId(locale){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale)[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.LocaleId]}function getLocaleDayPeriods(locale,formStyle,width){const data=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale),amPm=getLastDefinedValue([data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.DayPeriodsFormat],data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.DayPeriodsStandalone]],formStyle);return getLastDefinedValue(amPm,width)}function getLocaleDayNames(locale,formStyle,width){const data=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale),days=getLastDefinedValue([data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.DaysFormat],data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.DaysStandalone]],formStyle);return getLastDefinedValue(days,width)}function getLocaleMonthNames(locale,formStyle,width){const data=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale),months=getLastDefinedValue([data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.MonthsFormat],data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.MonthsStandalone]],formStyle);return getLastDefinedValue(months,width)}function getLocaleEraNames(locale,width){return getLastDefinedValue((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale)[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.Eras],width)}function getLocaleDateFormat(locale,width){return getLastDefinedValue((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale)[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.DateFormat],width)}function getLocaleTimeFormat(locale,width){return getLastDefinedValue((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale)[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.TimeFormat],width)}function getLocaleDateTimeFormat(locale,width){return getLastDefinedValue((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale)[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.DateTimeFormat],width)}function getLocaleNumberSymbol(locale,symbol){const data=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale),res=data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.NumberSymbols][symbol];if(typeof res>"u"){if(symbol===NumberSymbol.CurrencyDecimal)return data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.NumberSymbols][NumberSymbol.Decimal];if(symbol===NumberSymbol.CurrencyGroup)return data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.NumberSymbols][NumberSymbol.Group]}return res}function getLocaleNumberFormat(locale,type){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale)[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.NumberFormats][type]}function getLocaleCurrencies(locale){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale)[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.Currencies]}function checkFullData(data){if(!data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function getLocaleExtraDayPeriodRules(locale){const data=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale);return checkFullData(data),(data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.ExtraData][2]||[]).map(rule=>"string"==typeof rule?extractTime(rule):[extractTime(rule[0]),extractTime(rule[1])])}function getLocaleExtraDayPeriods(locale,formStyle,width){const data=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.cg1)(locale);checkFullData(data);const dayPeriods=getLastDefinedValue([data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.ExtraData][0],data[_angular_core__WEBPACK_IMPORTED_MODULE_0__.wAp.ExtraData][1]],formStyle)||[];return getLastDefinedValue(dayPeriods,width)||[]}function getLastDefinedValue(data,index){for(let i=index;i>-1;i--)if(typeof data[i]<"u")return data[i];throw new Error("Locale data API: locale data undefined")}function extractTime(time){const[h,m]=time.split(":");return{hours:+h,minutes:+m}}__name(getLocaleId,"getLocaleId"),__name(getLocaleDayPeriods,"getLocaleDayPeriods"),__name(getLocaleDayNames,"getLocaleDayNames"),__name(getLocaleMonthNames,"getLocaleMonthNames"),__name(getLocaleEraNames,"getLocaleEraNames"),__name(function getLocaleFirstDayOfWeek(locale){return \u0275findLocaleData(locale)[\u0275LocaleDataIndex.FirstDayOfWeek]},"getLocaleFirstDayOfWeek"),__name(function getLocaleWeekEndRange(locale){return \u0275findLocaleData(locale)[\u0275LocaleDataIndex.WeekendRange]},"getLocaleWeekEndRange"),__name(getLocaleDateFormat,"getLocaleDateFormat"),__name(getLocaleTimeFormat,"getLocaleTimeFormat"),__name(getLocaleDateTimeFormat,"getLocaleDateTimeFormat"),__name(getLocaleNumberSymbol,"getLocaleNumberSymbol"),__name(getLocaleNumberFormat,"getLocaleNumberFormat"),__name(function getLocaleCurrencySymbol(locale){return \u0275findLocaleData(locale)[\u0275LocaleDataIndex.CurrencySymbol]||null},"getLocaleCurrencySymbol"),__name(function getLocaleCurrencyName(locale){return \u0275findLocaleData(locale)[\u0275LocaleDataIndex.CurrencyName]||null},"getLocaleCurrencyName"),__name(function getLocaleCurrencyCode(locale){return \u0275getLocaleCurrencyCode(locale)},"getLocaleCurrencyCode"),__name(getLocaleCurrencies,"getLocaleCurrencies"),__name(checkFullData,"checkFullData"),__name(getLocaleExtraDayPeriodRules,"getLocaleExtraDayPeriodRules"),__name(getLocaleExtraDayPeriods,"getLocaleExtraDayPeriods"),__name(function getLocaleDirection(locale){return \u0275findLocaleData(locale)[\u0275LocaleDataIndex.Directionality]},"getLocaleDirection"),__name(getLastDefinedValue,"getLastDefinedValue"),__name(extractTime,"extractTime"),__name(function getCurrencySymbol(code,format,locale="en"){const currency=getLocaleCurrencies(locale)[code]||CURRENCIES_EN[code]||[],symbolNarrow=currency[1];return"narrow"===format&&"string"==typeof symbolNarrow?symbolNarrow:currency[0]||code},"getCurrencySymbol");const DEFAULT_NB_OF_CURRENCY_DIGITS=2;function getNumberOfCurrencyDigits(code){let digits;const currency=CURRENCIES_EN[code];return currency&&(digits=currency[2]),"number"==typeof digits?digits:DEFAULT_NB_OF_CURRENCY_DIGITS}__name(getNumberOfCurrencyDigits,"getNumberOfCurrencyDigits");const ISO8601_DATE_REGEX=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,NAMED_FORMATS={},DATE_FORMATS_SPLIT=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ZoneWidth=(()=>((ZoneWidth=ZoneWidth||{})[ZoneWidth.Short=0]="Short",ZoneWidth[ZoneWidth.ShortGMT=1]="ShortGMT",ZoneWidth[ZoneWidth.Long=2]="Long",ZoneWidth[ZoneWidth.Extended=3]="Extended",ZoneWidth))(),DateType=(()=>((DateType=DateType||{})[DateType.FullYear=0]="FullYear",DateType[DateType.Month=1]="Month",DateType[DateType.Date=2]="Date",DateType[DateType.Hours=3]="Hours",DateType[DateType.Minutes=4]="Minutes",DateType[DateType.Seconds=5]="Seconds",DateType[DateType.FractionalSeconds=6]="FractionalSeconds",DateType[DateType.Day=7]="Day",DateType))(),TranslationType=(()=>((TranslationType=TranslationType||{})[TranslationType.DayPeriods=0]="DayPeriods",TranslationType[TranslationType.Days=1]="Days",TranslationType[TranslationType.Months=2]="Months",TranslationType[TranslationType.Eras=3]="Eras",TranslationType))();function createDate(year,month,date){const newDate=new Date(0);return newDate.setFullYear(year,month,date),newDate.setHours(0,0,0),newDate}function getNamedFormat(locale,format){const localeId=getLocaleId(locale);if(NAMED_FORMATS[localeId]=NAMED_FORMATS[localeId]||{},NAMED_FORMATS[localeId][format])return NAMED_FORMATS[localeId][format];let formatValue="";switch(format){case"shortDate":formatValue=getLocaleDateFormat(locale,FormatWidth.Short);break;case"mediumDate":formatValue=getLocaleDateFormat(locale,FormatWidth.Medium);break;case"longDate":formatValue=getLocaleDateFormat(locale,FormatWidth.Long);break;case"fullDate":formatValue=getLocaleDateFormat(locale,FormatWidth.Full);break;case"shortTime":formatValue=getLocaleTimeFormat(locale,FormatWidth.Short);break;case"mediumTime":formatValue=getLocaleTimeFormat(locale,FormatWidth.Medium);break;case"longTime":formatValue=getLocaleTimeFormat(locale,FormatWidth.Long);break;case"fullTime":formatValue=getLocaleTimeFormat(locale,FormatWidth.Full);break;case"short":const shortTime=getNamedFormat(locale,"shortTime"),shortDate=getNamedFormat(locale,"shortDate");formatValue=formatDateTime(getLocaleDateTimeFormat(locale,FormatWidth.Short),[shortTime,shortDate]);break;case"medium":const mediumTime=getNamedFormat(locale,"mediumTime"),mediumDate=getNamedFormat(locale,"mediumDate");formatValue=formatDateTime(getLocaleDateTimeFormat(locale,FormatWidth.Medium),[mediumTime,mediumDate]);break;case"long":const longTime=getNamedFormat(locale,"longTime"),longDate=getNamedFormat(locale,"longDate");formatValue=formatDateTime(getLocaleDateTimeFormat(locale,FormatWidth.Long),[longTime,longDate]);break;case"full":const fullTime=getNamedFormat(locale,"fullTime"),fullDate=getNamedFormat(locale,"fullDate");formatValue=formatDateTime(getLocaleDateTimeFormat(locale,FormatWidth.Full),[fullTime,fullDate])}return formatValue&&(NAMED_FORMATS[localeId][format]=formatValue),formatValue}function formatDateTime(str,opt_values){return opt_values&&(str=str.replace(/\{([^}]+)}/g,function(match,key){return null!=opt_values&&key in opt_values?opt_values[key]:match})),str}function padNumber(num,digits,minusSign="-",trim,negWrap){let neg="";(num<0||negWrap&&num<=0)&&(negWrap?num=1-num:(num=-num,neg=minusSign));let strNum=String(num);for(;strNum.length<digits;)strNum="0"+strNum;return trim&&(strNum=strNum.slice(strNum.length-digits)),neg+strNum}function formatFractionalSeconds(milliseconds,digits){return padNumber(milliseconds,3).substring(0,digits)}function dateGetter(name,size,offset=0,trim=!1,negWrap=!1){return function(date,locale){let part=getDatePart(name,date);if((offset>0||part>-offset)&&(part+=offset),name===DateType.Hours)0===part&&-12===offset&&(part=12);else if(name===DateType.FractionalSeconds)return formatFractionalSeconds(part,size);const localeMinus=getLocaleNumberSymbol(locale,NumberSymbol.MinusSign);return padNumber(part,size,localeMinus,trim,negWrap)}}function getDatePart(part,date){switch(part){case DateType.FullYear:return date.getFullYear();case DateType.Month:return date.getMonth();case DateType.Date:return date.getDate();case DateType.Hours:return date.getHours();case DateType.Minutes:return date.getMinutes();case DateType.Seconds:return date.getSeconds();case DateType.FractionalSeconds:return date.getMilliseconds();case DateType.Day:return date.getDay();default:throw new Error(`Unknown DateType value "${part}".`)}}function dateStrGetter(name,width,form=FormStyle.Format,extended=!1){return function(date,locale){return getDateTranslation(date,locale,name,width,form,extended)}}function getDateTranslation(date,locale,name,width,form,extended){switch(name){case TranslationType.Months:return getLocaleMonthNames(locale,form,width)[date.getMonth()];case TranslationType.Days:return getLocaleDayNames(locale,form,width)[date.getDay()];case TranslationType.DayPeriods:const currentHours=date.getHours(),currentMinutes=date.getMinutes();if(extended){const rules=getLocaleExtraDayPeriodRules(locale),dayPeriods=getLocaleExtraDayPeriods(locale,form,width),index=rules.findIndex(rule=>{if(Array.isArray(rule)){const[from,to]=rule,afterFrom=currentHours>=from.hours&&currentMinutes>=from.minutes,beforeTo=currentHours<to.hours||currentHours===to.hours&&currentMinutes<to.minutes;if(from.hours<to.hours){if(afterFrom&&beforeTo)return!0}else if(afterFrom||beforeTo)return!0}else if(rule.hours===currentHours&&rule.minutes===currentMinutes)return!0;return!1});if(-1!==index)return dayPeriods[index]}return getLocaleDayPeriods(locale,form,width)[currentHours<12?0:1];case TranslationType.Eras:return getLocaleEraNames(locale,width)[date.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${name}`)}}function timeZoneGetter(width){return function(date,locale,offset){const zone=-1*offset,minusSign=getLocaleNumberSymbol(locale,NumberSymbol.MinusSign),hours=zone>0?Math.floor(zone/60):Math.ceil(zone/60);switch(width){case ZoneWidth.Short:return(zone>=0?"+":"")+padNumber(hours,2,minusSign)+padNumber(Math.abs(zone%60),2,minusSign);case ZoneWidth.ShortGMT:return"GMT"+(zone>=0?"+":"")+padNumber(hours,1,minusSign);case ZoneWidth.Long:return"GMT"+(zone>=0?"+":"")+padNumber(hours,2,minusSign)+":"+padNumber(Math.abs(zone%60),2,minusSign);case ZoneWidth.Extended:return 0===offset?"Z":(zone>=0?"+":"")+padNumber(hours,2,minusSign)+":"+padNumber(Math.abs(zone%60),2,minusSign);default:throw new Error(`Unknown zone width "${width}"`)}}}__name(function formatDate(value,format,locale,timezone){let date=toDate(value);format=getNamedFormat(locale,format)||format;let match,parts=[];for(;format;){if(match=DATE_FORMATS_SPLIT.exec(format),!match){parts.push(format);break}{parts=parts.concat(match.slice(1));const part=parts.pop();if(!part)break;format=part}}let dateTimezoneOffset=date.getTimezoneOffset();timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset),date=convertTimezoneToLocal(date,timezone,!0));let text="";return parts.forEach(value2=>{const dateFormatter=getDateFormatter(value2);text+=dateFormatter?dateFormatter(date,locale,dateTimezoneOffset):"''"===value2?"'":value2.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text},"formatDate"),__name(createDate,"createDate"),__name(getNamedFormat,"getNamedFormat"),__name(formatDateTime,"formatDateTime"),__name(padNumber,"padNumber"),__name(formatFractionalSeconds,"formatFractionalSeconds"),__name(dateGetter,"dateGetter"),__name(getDatePart,"getDatePart"),__name(dateStrGetter,"dateStrGetter"),__name(getDateTranslation,"getDateTranslation"),__name(timeZoneGetter,"timeZoneGetter");const JANUARY=0,THURSDAY=4;function getFirstThursdayOfYear(year){const firstDayOfYear=createDate(year,JANUARY,1).getDay();return createDate(year,0,1+(firstDayOfYear<=THURSDAY?THURSDAY:THURSDAY+7)-firstDayOfYear)}function getThursdayThisWeek(datetime){return createDate(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(THURSDAY-datetime.getDay()))}function weekGetter(size,monthBased=!1){return function(date,locale){let result;if(monthBased){const nbDaysBefore1stDayOfMonth=new Date(date.getFullYear(),date.getMonth(),1).getDay()-1,today=date.getDate();result=1+Math.floor((today+nbDaysBefore1stDayOfMonth)/7)}else{const thisThurs=getThursdayThisWeek(date),firstThurs=getFirstThursdayOfYear(thisThurs.getFullYear()),diff=thisThurs.getTime()-firstThurs.getTime();result=1+Math.round(diff/6048e5)}return padNumber(result,size,getLocaleNumberSymbol(locale,NumberSymbol.MinusSign))}}function weekNumberingYearGetter(size,trim=!1){return function(date,locale){return padNumber(getThursdayThisWeek(date).getFullYear(),size,getLocaleNumberSymbol(locale,NumberSymbol.MinusSign),trim)}}__name(getFirstThursdayOfYear,"getFirstThursdayOfYear"),__name(getThursdayThisWeek,"getThursdayThisWeek"),__name(weekGetter,"weekGetter"),__name(weekNumberingYearGetter,"weekNumberingYearGetter");const DATE_FORMATS={};function getDateFormatter(format){if(DATE_FORMATS[format])return DATE_FORMATS[format];let formatter;switch(format){case"G":case"GG":case"GGG":formatter=dateStrGetter(TranslationType.Eras,TranslationWidth.Abbreviated);break;case"GGGG":formatter=dateStrGetter(TranslationType.Eras,TranslationWidth.Wide);break;case"GGGGG":formatter=dateStrGetter(TranslationType.Eras,TranslationWidth.Narrow);break;case"y":formatter=dateGetter(DateType.FullYear,1,0,!1,!0);break;case"yy":formatter=dateGetter(DateType.FullYear,2,0,!0,!0);break;case"yyy":formatter=dateGetter(DateType.FullYear,3,0,!1,!0);break;case"yyyy":formatter=dateGetter(DateType.FullYear,4,0,!1,!0);break;case"Y":formatter=weekNumberingYearGetter(1);break;case"YY":formatter=weekNumberingYearGetter(2,!0);break;case"YYY":formatter=weekNumberingYearGetter(3);break;case"YYYY":formatter=weekNumberingYearGetter(4);break;case"M":case"L":formatter=dateGetter(DateType.Month,1,1);break;case"MM":case"LL":formatter=dateGetter(DateType.Month,2,1);break;case"MMM":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Abbreviated);break;case"MMMM":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Wide);break;case"MMMMM":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Narrow);break;case"LLL":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Abbreviated,FormStyle.Standalone);break;case"LLLL":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Wide,FormStyle.Standalone);break;case"LLLLL":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Narrow,FormStyle.Standalone);break;case"w":formatter=weekGetter(1);break;case"ww":formatter=weekGetter(2);break;case"W":formatter=weekGetter(1,!0);break;case"d":formatter=dateGetter(DateType.Date,1);break;case"dd":formatter=dateGetter(DateType.Date,2);break;case"c":case"cc":formatter=dateGetter(DateType.Day,1);break;case"ccc":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Abbreviated,FormStyle.Standalone);break;case"cccc":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Wide,FormStyle.Standalone);break;case"ccccc":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Narrow,FormStyle.Standalone);break;case"cccccc":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Short,FormStyle.Standalone);break;case"E":case"EE":case"EEE":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Abbreviated);break;case"EEEE":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Wide);break;case"EEEEE":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Narrow);break;case"EEEEEE":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Short);break;case"a":case"aa":case"aaa":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Abbreviated);break;case"aaaa":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Wide);break;case"aaaaa":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Narrow);break;case"b":case"bb":case"bbb":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Abbreviated,FormStyle.Standalone,!0);break;case"bbbb":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Wide,FormStyle.Standalone,!0);break;case"bbbbb":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Narrow,FormStyle.Standalone,!0);break;case"B":case"BB":case"BBB":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Abbreviated,FormStyle.Format,!0);break;case"BBBB":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Wide,FormStyle.Format,!0);break;case"BBBBB":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Narrow,FormStyle.Format,!0);break;case"h":formatter=dateGetter(DateType.Hours,1,-12);break;case"hh":formatter=dateGetter(DateType.Hours,2,-12);break;case"H":formatter=dateGetter(DateType.Hours,1);break;case"HH":formatter=dateGetter(DateType.Hours,2);break;case"m":formatter=dateGetter(DateType.Minutes,1);break;case"mm":formatter=dateGetter(DateType.Minutes,2);break;case"s":formatter=dateGetter(DateType.Seconds,1);break;case"ss":formatter=dateGetter(DateType.Seconds,2);break;case"S":formatter=dateGetter(DateType.FractionalSeconds,1);break;case"SS":formatter=dateGetter(DateType.FractionalSeconds,2);break;case"SSS":formatter=dateGetter(DateType.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":formatter=timeZoneGetter(ZoneWidth.Short);break;case"ZZZZZ":formatter=timeZoneGetter(ZoneWidth.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":formatter=timeZoneGetter(ZoneWidth.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":formatter=timeZoneGetter(ZoneWidth.Long);break;default:return null}return DATE_FORMATS[format]=formatter,formatter}function timezoneToOffset(timezone,fallback){timezone=timezone.replace(/:/g,"");const requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return(date=new Date(date.getTime())).setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){const reverseValue=reverse?-1:1,dateTimezoneOffset=date.getTimezoneOffset();return addDateMinutes(date,reverseValue*(timezoneToOffset(timezone,dateTimezoneOffset)-dateTimezoneOffset))}function toDate(value){if(isDate(value))return value;if("number"==typeof value&&!isNaN(value))return new Date(value);if("string"==typeof value){if(value=value.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(value)){const[y,m=1,d=1]=value.split("-").map(val=>+val);return createDate(y,m-1,d)}const parsedNb=parseFloat(value);if(!isNaN(value-parsedNb))return new Date(parsedNb);let match;if(match=value.match(ISO8601_DATE_REGEX))return isoStringToDate(match)}const date=new Date(value);if(!isDate(date))throw new Error(`Unable to convert "${value}" into a date`);return date}function isoStringToDate(match){const date=new Date(0);let tzHour=0,tzMin=0;const dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=Number(match[9]+match[10]),tzMin=Number(match[9]+match[11])),dateSetter.call(date,Number(match[1]),Number(match[2])-1,Number(match[3]));const h=Number(match[4]||0)-tzHour,m=Number(match[5]||0)-tzMin,s=Number(match[6]||0),ms=Math.floor(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}function isDate(value){return value instanceof Date&&!isNaN(value.valueOf())}__name(getDateFormatter,"getDateFormatter"),__name(timezoneToOffset,"timezoneToOffset"),__name(addDateMinutes,"addDateMinutes"),__name(convertTimezoneToLocal,"convertTimezoneToLocal"),__name(toDate,"toDate"),__name(isoStringToDate,"isoStringToDate"),__name(isDate,"isDate");const NUMBER_FORMAT_REGEXP=/^(\d+)?\.((\d+)(-(\d+))?)?$/,MAX_DIGITS=22,DECIMAL_SEP=".",ZERO_CHAR="0",PATTERN_SEP=";",GROUP_SEP=",",DIGIT_CHAR="#";function formatNumberToLocaleString(value,pattern,locale,groupSymbol,decimalSymbol,digitsInfo,isPercent=!1){let formattedText="",isZero=!1;if(isFinite(value)){let parsedNumber=parseNumber(value);isPercent&&(parsedNumber=toPercent(parsedNumber));let minInt=pattern.minInt,minFraction=pattern.minFrac,maxFraction=pattern.maxFrac;if(digitsInfo){const parts=digitsInfo.match(NUMBER_FORMAT_REGEXP);if(null===parts)throw new Error(`${digitsInfo} is not a valid digit info`);const minIntPart=parts[1],minFractionPart=parts[3],maxFractionPart=parts[5];null!=minIntPart&&(minInt=parseIntAutoRadix(minIntPart)),null!=minFractionPart&&(minFraction=parseIntAutoRadix(minFractionPart)),null!=maxFractionPart?maxFraction=parseIntAutoRadix(maxFractionPart):null!=minFractionPart&&minFraction>maxFraction&&(maxFraction=minFraction)}roundNumber(parsedNumber,minFraction,maxFraction);let digits=parsedNumber.digits,integerLen=parsedNumber.integerLen;const exponent=parsedNumber.exponent;let decimals=[];for(isZero=digits.every(d=>!d);integerLen<minInt;integerLen++)digits.unshift(0);for(;integerLen<0;integerLen++)digits.unshift(0);integerLen>0?decimals=digits.splice(integerLen,digits.length):(decimals=digits,digits=[0]);const groups=[];for(digits.length>=pattern.lgSize&&groups.unshift(digits.splice(-pattern.lgSize,digits.length).join(""));digits.length>pattern.gSize;)groups.unshift(digits.splice(-pattern.gSize,digits.length).join(""));digits.length&&groups.unshift(digits.join("")),formattedText=groups.join(getLocaleNumberSymbol(locale,groupSymbol)),decimals.length&&(formattedText+=getLocaleNumberSymbol(locale,decimalSymbol)+decimals.join("")),exponent&&(formattedText+=getLocaleNumberSymbol(locale,NumberSymbol.Exponential)+"+"+exponent)}else formattedText=getLocaleNumberSymbol(locale,NumberSymbol.Infinity);return formattedText=value<0&&!isZero?pattern.negPre+formattedText+pattern.negSuf:pattern.posPre+formattedText+pattern.posSuf,formattedText}function formatNumber(value,locale,digitsInfo){return formatNumberToLocaleString(value,parseNumberFormat(getLocaleNumberFormat(locale,NumberFormatStyle.Decimal),getLocaleNumberSymbol(locale,NumberSymbol.MinusSign)),locale,NumberSymbol.Group,NumberSymbol.Decimal,digitsInfo)}function parseNumberFormat(format,minusSign="-"){const p={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},patternParts=format.split(PATTERN_SEP),positive=patternParts[0],negative=patternParts[1],positiveParts=-1!==positive.indexOf(DECIMAL_SEP)?positive.split(DECIMAL_SEP):[positive.substring(0,positive.lastIndexOf(ZERO_CHAR)+1),positive.substring(positive.lastIndexOf(ZERO_CHAR)+1)],integer=positiveParts[0],fraction=positiveParts[1]||"";p.posPre=integer.substring(0,integer.indexOf(DIGIT_CHAR));for(let i=0;i<fraction.length;i++){const ch=fraction.charAt(i);ch===ZERO_CHAR?p.minFrac=p.maxFrac=i+1:ch===DIGIT_CHAR?p.maxFrac=i+1:p.posSuf+=ch}const groups=integer.split(GROUP_SEP);if(p.gSize=groups[1]?groups[1].length:0,p.lgSize=groups[2]||groups[1]?(groups[2]||groups[1]).length:0,negative){const trunkLen=positive.length-p.posPre.length-p.posSuf.length,pos=negative.indexOf(DIGIT_CHAR);p.negPre=negative.substring(0,pos).replace(/'/g,""),p.negSuf=negative.slice(pos+trunkLen).replace(/'/g,"")}else p.negPre=minusSign+p.posPre,p.negSuf=p.posSuf;return p}function toPercent(parsedNumber){if(0===parsedNumber.digits[0])return parsedNumber;const fractionLen=parsedNumber.digits.length-parsedNumber.integerLen;return parsedNumber.exponent?parsedNumber.exponent+=2:(0===fractionLen?parsedNumber.digits.push(0,0):1===fractionLen&&parsedNumber.digits.push(0),parsedNumber.integerLen+=2),parsedNumber}function parseNumber(num){let digits,integerLen,i,j,zeros,numStr=Math.abs(num)+"",exponent=0;for((integerLen=numStr.indexOf(DECIMAL_SEP))>-1&&(numStr=numStr.replace(DECIMAL_SEP,"")),(i=numStr.search(/e/i))>0?(integerLen<0&&(integerLen=i),integerLen+=+numStr.slice(i+1),numStr=numStr.substring(0,i)):integerLen<0&&(integerLen=numStr.length),i=0;numStr.charAt(i)===ZERO_CHAR;i++);if(i===(zeros=numStr.length))digits=[0],integerLen=1;else{for(zeros--;numStr.charAt(zeros)===ZERO_CHAR;)zeros--;for(integerLen-=i,digits=[],j=0;i<=zeros;i++,j++)digits[j]=Number(numStr.charAt(i))}return integerLen>MAX_DIGITS&&(digits=digits.splice(0,MAX_DIGITS-1),exponent=integerLen-1,integerLen=1),{digits,exponent,integerLen}}function roundNumber(parsedNumber,minFrac,maxFrac){if(minFrac>maxFrac)throw new Error(`The minimum number of digits after fraction (${minFrac}) is higher than the maximum (${maxFrac}).`);let digits=parsedNumber.digits,fractionLen=digits.length-parsedNumber.integerLen;const fractionSize=Math.min(Math.max(minFrac,fractionLen),maxFrac);let roundAt=fractionSize+parsedNumber.integerLen,digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.integerLen,roundAt));for(let j=roundAt;j<digits.length;j++)digits[j]=0}else{fractionLen=Math.max(0,fractionLen),parsedNumber.integerLen=1,digits.length=Math.max(1,roundAt=fractionSize+1),digits[0]=0;for(let i=1;i<roundAt;i++)digits[i]=0}if(digit>=5)if(roundAt-1<0){for(let k=0;k>roundAt;k--)digits.unshift(0),parsedNumber.integerLen++;digits.unshift(1),parsedNumber.integerLen++}else digits[roundAt-1]++;for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);let dropTrailingZeros=0!==fractionSize;const minLen=minFrac+parsedNumber.integerLen,carry=digits.reduceRight(function(carry2,d,i,digits2){return digits2[i]=(d+=carry2)<10?d:d-10,dropTrailingZeros&&(0===digits2[i]&&i>=minLen?digits2.pop():dropTrailingZeros=!1),d>=10?1:0},0);carry&&(digits.unshift(carry),parsedNumber.integerLen++)}function parseIntAutoRadix(text){const result=parseInt(text);if(isNaN(result))throw new Error("Invalid integer literal when parsing "+text);return result}function parseCookieValue(cookieStr,name){name=encodeURIComponent(name);for(const cookie of cookieStr.split(";")){const eqIndex=cookie.indexOf("="),[cookieName,cookieValue]=-1==eqIndex?[cookie,""]:[cookie.slice(0,eqIndex),cookie.slice(eqIndex+1)];if(cookieName.trim()===name)return decodeURIComponent(cookieValue)}return null}__name(formatNumberToLocaleString,"formatNumberToLocaleString"),__name(function formatCurrency(value,locale,currency,currencyCode,digitsInfo){const pattern=parseNumberFormat(getLocaleNumberFormat(locale,NumberFormatStyle.Currency),getLocaleNumberSymbol(locale,NumberSymbol.MinusSign));return pattern.minFrac=getNumberOfCurrencyDigits(currencyCode),pattern.maxFrac=pattern.minFrac,formatNumberToLocaleString(value,pattern,locale,NumberSymbol.CurrencyGroup,NumberSymbol.CurrencyDecimal,digitsInfo).replace("\xa4",currency).replace("\xa4","").trim()},"formatCurrency"),__name(function formatPercent(value,locale,digitsInfo){return formatNumberToLocaleString(value,parseNumberFormat(getLocaleNumberFormat(locale,NumberFormatStyle.Percent),getLocaleNumberSymbol(locale,NumberSymbol.MinusSign)),locale,NumberSymbol.Group,NumberSymbol.Decimal,digitsInfo,!0).replace(new RegExp("%","g"),getLocaleNumberSymbol(locale,NumberSymbol.PercentSign))},"formatPercent"),__name(formatNumber,"formatNumber"),__name(parseNumberFormat,"parseNumberFormat"),__name(toPercent,"toPercent"),__name(parseNumber,"parseNumber"),__name(roundNumber,"roundNumber"),__name(parseIntAutoRadix,"parseIntAutoRadix"),__name(function getPluralCategory(value,cases,ngLocalization,locale){let key=`=${value}`;if(cases.indexOf(key)>-1||(key=ngLocalization.getPluralCategory(value,locale),cases.indexOf(key)>-1))return key;if(cases.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${value}"`)},"getPluralCategory"),__name(function registerLocaleData(data,localeId,extraData){return \u0275registerLocaleData(data,localeId,extraData)},"registerLocaleData"),__name(parseCookieValue,"parseCookieValue");const WS_REGEXP=/\s+/,EMPTY_ARRAY=[];let NgClass=(()=>{class NgClass2{constructor(_iterableDiffers,_keyValueDiffers,_ngEl,_renderer){this._iterableDiffers=_iterableDiffers,this._keyValueDiffers=_keyValueDiffers,this._ngEl=_ngEl,this._renderer=_renderer,this.initialClasses=EMPTY_ARRAY,this.stateMap=new Map}set klass(value){this.initialClasses=null!=value?value.trim().split(WS_REGEXP):EMPTY_ARRAY}set ngClass(value){this.rawClass="string"==typeof value?value.trim().split(WS_REGEXP):value}ngDoCheck(){for(const klass of this.initialClasses)this._updateState(klass,!0);const rawClass=this.rawClass;if(Array.isArray(rawClass)||rawClass instanceof Set)for(const klass of rawClass)this._updateState(klass,!0);else if(null!=rawClass)for(const klass of Object.keys(rawClass))this._updateState(klass,!!rawClass[klass]);this._applyStateDiff()}_updateState(klass,nextEnabled){const state=this.stateMap.get(klass);void 0!==state?(state.enabled!==nextEnabled&&(state.changed=!0,state.enabled=nextEnabled),state.touched=!0):this.stateMap.set(klass,{enabled:nextEnabled,changed:!0,touched:!0})}_applyStateDiff(){for(const stateEntry of this.stateMap){const klass=stateEntry[0],state=stateEntry[1];state.changed?(this._toggleClass(klass,state.enabled),state.changed=!1):state.touched||(state.enabled&&this._toggleClass(klass,!1),this.stateMap.delete(klass)),state.touched=!1}}_toggleClass(klass,enabled){(klass=klass.trim()).length>0&&klass.split(WS_REGEXP).forEach(klass2=>{enabled?this._renderer.addClass(this._ngEl.nativeElement,klass2):this._renderer.removeClass(this._ngEl.nativeElement,klass2)})}}return __name(NgClass2,"NgClass"),NgClass2.\u0275fac=__name(function(t){return new(t||NgClass2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ZZ4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.aQg),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.SBq),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Qsj))},"NgClass_Factory"),NgClass2.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.lG2({type:NgClass2,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),NgClass2})();__name(function getParentInjector(injector){return injector.get(_angular_core__WEBPACK_IMPORTED_MODULE_0__.h0i).injector},"getParentInjector");class NgForOfContext{constructor($implicit,ngForOf,index,count){this.$implicit=$implicit,this.ngForOf=ngForOf,this.index=index,this.count=count}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}__name(NgForOfContext,"NgForOfContext");let NgForOf=(()=>{class NgForOf2{set ngForOf(ngForOf){this._ngForOf=ngForOf,this._ngForOfDirty=!0}set ngForTrackBy(fn){this._trackByFn=fn}get ngForTrackBy(){return this._trackByFn}constructor(_viewContainer,_template,_differs){this._viewContainer=_viewContainer,this._template=_template,this._differs=_differs,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(value){value&&(this._template=value)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const value=this._ngForOf;!this._differ&&value&&(this._differ=this._differs.find(value).create(this.ngForTrackBy))}if(this._differ){const changes=this._differ.diff(this._ngForOf);changes&&this._applyChanges(changes)}}_applyChanges(changes){const viewContainer=this._viewContainer;changes.forEachOperation((item,adjustedPreviousIndex,currentIndex)=>{if(null==item.previousIndex)viewContainer.createEmbeddedView(this._template,new NgForOfContext(item.item,this._ngForOf,-1,-1),null===currentIndex?void 0:currentIndex);else if(null==currentIndex)viewContainer.remove(null===adjustedPreviousIndex?void 0:adjustedPreviousIndex);else if(null!==adjustedPreviousIndex){const view=viewContainer.get(adjustedPreviousIndex);viewContainer.move(view,currentIndex),applyViewChange(view,item)}});for(let i=0,ilen=viewContainer.length;i<ilen;i++){const context=viewContainer.get(i).context;context.index=i,context.count=ilen,context.ngForOf=this._ngForOf}changes.forEachIdentityChange(record=>{applyViewChange(viewContainer.get(record.currentIndex),record)})}static ngTemplateContextGuard(dir,ctx){return!0}}return __name(NgForOf2,"NgForOf"),NgForOf2.\u0275fac=__name(function(t){return new(t||NgForOf2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.s_b),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rgc),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ZZ4))},"NgForOf_Factory"),NgForOf2.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.lG2({type:NgForOf2,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),NgForOf2})();function applyViewChange(view,record){view.context.$implicit=record.item}__name(applyViewChange,"applyViewChange"),__name(function getTypeName(type){return type.name||typeof type},"getTypeName");let NgIf=(()=>{class NgIf2{constructor(_viewContainer,templateRef){this._viewContainer=_viewContainer,this._context=new NgIfContext,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=templateRef}set ngIf(condition){this._context.$implicit=this._context.ngIf=condition,this._updateView()}set ngIfThen(templateRef){assertTemplate("ngIfThen",templateRef),this._thenTemplateRef=templateRef,this._thenViewRef=null,this._updateView()}set ngIfElse(templateRef){assertTemplate("ngIfElse",templateRef),this._elseTemplateRef=templateRef,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(dir,ctx){return!0}}return __name(NgIf2,"NgIf"),NgIf2.\u0275fac=__name(function(t){return new(t||NgIf2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.s_b),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rgc))},"NgIf_Factory"),NgIf2.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.lG2({type:NgIf2,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),NgIf2})();class NgIfContext{constructor(){this.$implicit=null,this.ngIf=null}}function assertTemplate(property,templateRef){if(templateRef&&!templateRef.createEmbeddedView)throw new Error(`${property} must be a TemplateRef, but received '${(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.AaK)(templateRef)}'.`)}__name(NgIfContext,"NgIfContext"),__name(assertTemplate,"assertTemplate");function invalidPipeArgumentError(type,value){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.vHH(2100,!1)}__name(class SwitchView{constructor(_viewContainerRef,_templateRef){this._viewContainerRef=_viewContainerRef,this._templateRef=_templateRef,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(created){created&&!this._created?this.create():!created&&this._created&&this.destroy()}},"SwitchView"),__name(function throwNgSwitchProviderNotFoundError(attrName,directiveName){throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.vHH(2e3,`An element with the "${attrName}" attribute (matching the "${directiveName}" directive) must be located inside an element with the "ngSwitch" attribute (matching "NgSwitch" directive)`)},"throwNgSwitchProviderNotFoundError"),__name(invalidPipeArgumentError,"invalidPipeArgumentError");class SubscribableStrategy{createSubscription(async,updateLatestValue){return async.subscribe({next:updateLatestValue,error:e=>{throw e}})}dispose(subscription){subscription.unsubscribe()}}__name(SubscribableStrategy,"SubscribableStrategy");class PromiseStrategy{createSubscription(async,updateLatestValue){return async.then(updateLatestValue,e=>{throw e})}dispose(subscription){}}__name(PromiseStrategy,"PromiseStrategy");const _promiseStrategy=new PromiseStrategy,_subscribableStrategy=new SubscribableStrategy;let AsyncPipe=(()=>{class AsyncPipe2{constructor(ref){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=ref}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(obj){return this._obj?obj!==this._obj?(this._dispose(),this.transform(obj)):this._latestValue:(obj&&this._subscribe(obj),this._latestValue)}_subscribe(obj){this._obj=obj,this._strategy=this._selectStrategy(obj),this._subscription=this._strategy.createSubscription(obj,value=>this._updateLatestValue(obj,value))}_selectStrategy(obj){if((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.QGY)(obj))return _promiseStrategy;if((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.F4k)(obj))return _subscribableStrategy;throw invalidPipeArgumentError()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(async,value){async===this._obj&&(this._latestValue=value,this._ref.markForCheck())}}return __name(AsyncPipe2,"AsyncPipe"),AsyncPipe2.\u0275fac=__name(function(t){return new(t||AsyncPipe2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.sBO,16))},"AsyncPipe_Factory"),AsyncPipe2.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yjl({name:"async",type:AsyncPipe2,pure:!1,standalone:!0}),AsyncPipe2})();__name(function makeKeyValuePair(key,value){return{key,value}},"makeKeyValuePair"),__name(function defaultComparator(keyValueA,keyValueB){const a=keyValueA.key,b=keyValueB.key;if(a===b)return 0;if(void 0===a)return 1;if(void 0===b)return-1;if(null===a)return 1;if(null===b)return-1;if("string"==typeof a&&"string"==typeof b)return a<b?-1:1;if("number"==typeof a&&"number"==typeof b)return a-b;if("boolean"==typeof a&&"boolean"==typeof b)return a<b?-1:1;const aString=String(a),bString=String(b);return aString==bString?0:aString<bString?-1:1},"defaultComparator");let DecimalPipe=(()=>{class DecimalPipe2{constructor(_locale){this._locale=_locale}transform(value,digitsInfo,locale){if(!isValue(value))return null;locale=locale||this._locale;try{return formatNumber(strToNumber(value),locale,digitsInfo)}catch(error){throw invalidPipeArgumentError()}}}return __name(DecimalPipe2,"DecimalPipe"),DecimalPipe2.\u0275fac=__name(function(t){return new(t||DecimalPipe2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_0__.soG,16))},"DecimalPipe_Factory"),DecimalPipe2.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yjl({name:"number",type:DecimalPipe2,pure:!0,standalone:!0}),DecimalPipe2})();function isValue(value){return!(null==value||""===value||value!=value)}function strToNumber(value){if("string"==typeof value&&!isNaN(Number(value)-parseFloat(value)))return Number(value);if("number"!=typeof value)throw new Error(`${value} is not a number`);return value}__name(isValue,"isValue"),__name(strToNumber,"strToNumber");let CommonModule=(()=>{class CommonModule2{}return __name(CommonModule2,"CommonModule"),CommonModule2.\u0275fac=__name(function(t){return new(t||CommonModule2)},"CommonModule_Factory"),CommonModule2.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:CommonModule2}),CommonModule2.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),CommonModule2})();const PLATFORM_BROWSER_ID="browser",PLATFORM_SERVER_ID="server";function isPlatformBrowser(platformId){return platformId===PLATFORM_BROWSER_ID}function isPlatformServer(platformId){return platformId===PLATFORM_SERVER_ID}__name(isPlatformBrowser,"isPlatformBrowser"),__name(isPlatformServer,"isPlatformServer"),__name(function isPlatformWorkerApp(platformId){return"browserWorkerApp"===platformId},"isPlatformWorkerApp"),__name(function isPlatformWorkerUi(platformId){return"browserWorkerUi"===platformId},"isPlatformWorkerUi");let ViewportScroller2=(()=>{class ViewportScroller3{}return __name(ViewportScroller3,"ViewportScroller"),ViewportScroller3.\u0275prov=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7)({token:ViewportScroller3,providedIn:"root",factory:()=>new BrowserViewportScroller((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG)(DOCUMENT2),window)}),ViewportScroller3})();class BrowserViewportScroller{constructor(document2,window2){this.document=document2,this.window=window2,this.offset=()=>[0,0]}setOffset(offset){this.offset=Array.isArray(offset)?()=>offset:offset}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(position){this.supportsScrolling()&&this.window.scrollTo(position[0],position[1])}scrollToAnchor(target){if(!this.supportsScrolling())return;const elSelected=findAnchorFromDocument(this.document,target);elSelected&&(this.scrollToElement(elSelected),elSelected.focus())}setHistoryScrollRestoration(scrollRestoration){if(this.supportScrollRestoration()){const history=this.window.history;history&&history.scrollRestoration&&(history.scrollRestoration=scrollRestoration)}}scrollToElement(el){const rect=el.getBoundingClientRect(),left=rect.left+this.window.pageXOffset,top=rect.top+this.window.pageYOffset,offset=this.offset();this.window.scrollTo(left-offset[0],top-offset[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const scrollRestorationDescriptor=getScrollRestorationProperty(this.window.history)||getScrollRestorationProperty(Object.getPrototypeOf(this.window.history));return!(!scrollRestorationDescriptor||!scrollRestorationDescriptor.writable&&!scrollRestorationDescriptor.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function getScrollRestorationProperty(obj){return Object.getOwnPropertyDescriptor(obj,"scrollRestoration")}function findAnchorFromDocument(document2,target){const documentResult=document2.getElementById(target)||document2.getElementsByName(target)[0];if(documentResult)return documentResult;if("function"==typeof document2.createTreeWalker&&document2.body&&"function"==typeof document2.body.attachShadow){const treeWalker=document2.createTreeWalker(document2.body,NodeFilter.SHOW_ELEMENT);let currentNode=treeWalker.currentNode;for(;currentNode;){const shadowRoot=currentNode.shadowRoot;if(shadowRoot){const result=shadowRoot.getElementById(target)||shadowRoot.querySelector(`[name="${target}"]`);if(result)return result}currentNode=treeWalker.nextNode()}}return null}__name(BrowserViewportScroller,"BrowserViewportScroller"),__name(getScrollRestorationProperty,"getScrollRestorationProperty"),__name(findAnchorFromDocument,"findAnchorFromDocument"),__name(class NullViewportScroller{setOffset(offset){}getScrollPosition(){return[0,0]}scrollToPosition(position){}scrollToAnchor(anchor){}setHistoryScrollRestoration(scrollRestoration){}},"NullViewportScroller");class XhrFactory{}function isAbsoluteUrl(src){return/^https?:\/\//.test(src)}function isValidPath(path){if("string"!=typeof path||""===path.trim())return!1;try{return new URL(path),!0}catch{return!1}}function normalizePath(path){return path.endsWith("/")?path.slice(0,-1):path}function normalizeSrc(src){return src.startsWith("/")?src.slice(1):src}__name(XhrFactory,"XhrFactory"),__name(function getUrl(src,win){return isAbsoluteUrl(src)?new URL(src):new URL(src,win.location.href)},"getUrl"),__name(isAbsoluteUrl,"isAbsoluteUrl"),__name(function extractHostname(url){return isAbsoluteUrl(url)?new URL(url).hostname:url},"extractHostname"),__name(isValidPath,"isValidPath"),__name(normalizePath,"normalizePath"),__name(normalizeSrc,"normalizeSrc");const noopImageLoader=__name(config=>config.src,"noopImageLoader"),IMAGE_LOADER=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("ImageLoader",{providedIn:"root",factory:()=>noopImageLoader});function throwInvalidPathError(path,exampleUrls){throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.vHH(2959,!1)}function throwUnexpectedAbsoluteUrlError(path,url){throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.vHH(2959,!1)}__name(function createImageLoader(buildUrlFn,exampleUrls){return __name(function(path){return isValidPath(path)||throwInvalidPathError(),path=normalizePath(path),[{provide:IMAGE_LOADER,useValue:__name(config=>(isAbsoluteUrl(config.src)&&throwUnexpectedAbsoluteUrlError(),buildUrlFn(path,{...config,src:normalizeSrc(config.src)})),"loaderFn")}]},"provideImageLoader")},"createImageLoader"),__name(throwInvalidPathError,"throwInvalidPathError"),__name(throwUnexpectedAbsoluteUrlError,"throwUnexpectedAbsoluteUrlError"),__name(function createCloudflareUrl(path,config){let params="format=auto";return config.width&&(params+=`,width=${config.width}`),`${path}/cdn-cgi/image/${params}/${config.src}`},"createCloudflareUrl");const cloudinaryLoaderInfo={name:"Cloudinary",testUrl:isCloudinaryUrl},CLOUDINARY_LOADER_REGEX=/https?\:\/\/[^\/]+\.cloudinary\.com\/.+/;function isCloudinaryUrl(url){return CLOUDINARY_LOADER_REGEX.test(url)}__name(isCloudinaryUrl,"isCloudinaryUrl"),__name(function createCloudinaryUrl(path,config){let params="f_auto,q_auto";return config.width&&(params+=`,w_${config.width}`),`${path}/image/upload/${params}/${config.src}`},"createCloudinaryUrl");const imageKitLoaderInfo={name:"ImageKit",testUrl:isImageKitUrl},IMAGE_KIT_LOADER_REGEX=/https?\:\/\/[^\/]+\.imagekit\.io\/.+/;function isImageKitUrl(url){return IMAGE_KIT_LOADER_REGEX.test(url)}__name(isImageKitUrl,"isImageKitUrl"),__name(function createImagekitUrl(path,config){const{src,width}=config;let urlSegments;return urlSegments=width?[path,`tr:w-${width}`,src]:[path,src],urlSegments.join("/")},"createImagekitUrl");const imgixLoaderInfo={name:"Imgix",testUrl:isImgixUrl},IMGIX_LOADER_REGEX=/https?\:\/\/[^\/]+\.imgix\.net\/.+/;function isImgixUrl(url){return IMGIX_LOADER_REGEX.test(url)}function imgDirectiveDetails(ngSrc,includeNgSrc=!0){return`The NgOptimizedImage directive ${includeNgSrc?`(activated on an <img> element with the \`ngSrc="${ngSrc}"\`) `:""}has detected that`}__name(isImgixUrl,"isImgixUrl"),__name(function createImgixUrl(path,config){const url=new URL(`${path}/${config.src}`);return url.searchParams.set("auto","format"),config.width&&url.searchParams.set("w",config.width.toString()),url.href},"createImgixUrl"),__name(imgDirectiveDetails,"imgDirectiveDetails"),__name(function assertDevMode(checkName){throw new \u0275RuntimeError(2958,`Unexpected invocation of the ${checkName} in the prod mode. Please make sure that the prod mode is enabled for production builds.`)},"assertDevMode"),__name(function logMissingPriorityWarning(ngSrc){const directiveDetails=imgDirectiveDetails(ngSrc);console.warn(\u0275formatRuntimeError(2955,`${directiveDetails} this image is the Largest Contentful Paint (LCP) element but was not marked "priority". This image should be marked "priority" in order to prioritize its loading. To fix this, add the "priority" attribute.`))},"logMissingPriorityWarning"),__name(function deepForEach(input,fn){for(let value of input)Array.isArray(value)?deepForEach(value,fn):fn(value)},"deepForEach");const VALID_WIDTH_DESCRIPTOR_SRCSET=/^((\s*\d+w\s*(,|$)){1,})$/,VALID_DENSITY_DESCRIPTOR_SRCSET=/^((\s*\d+(\.\d+)?x\s*(,|$)){1,})$/,RECOMMENDED_SRCSET_DENSITY_CAP=2,BUILT_IN_LOADERS=[imgixLoaderInfo,imageKitLoaderInfo,cloudinaryLoaderInfo],defaultConfig={breakpoints:[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920,2048,3840]};function assertNonEmptyInput(dir,name,value){const isString="string"==typeof value,isEmptyString=isString&&""===value.trim();if(!isString||isEmptyString)throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} \`${name}\` has an invalid value (\`${value}\`). To fix this, change the value to a non-empty string.`)}function assertUnderDensityCap(dir,value){if(!value.split(",").every(num=>""===num||parseFloat(num)<=3))throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} the \`ngSrcset\` contains an unsupported image density:\`${value}\`. NgOptimizedImage generally recommends a max image density of ${RECOMMENDED_SRCSET_DENSITY_CAP}x but supports image densities up to 3x. The human eye cannot distinguish between image densities greater than ${RECOMMENDED_SRCSET_DENSITY_CAP}x - which makes them unnecessary for most use cases. Images that will be pinch-zoomed are typically the primary use case for 3x images. Please remove the high density descriptor and try again.`)}function postInitInputChangeError(dir,inputName){let reason;return reason="width"===inputName||"height"===inputName?`Changing \`${inputName}\` may result in different attribute value applied to the underlying image element and cause layout shifts on a page.`:`Changing the \`${inputName}\` would have no effect on the underlying image element, because the resource loading has already occurred.`,new \u0275RuntimeError(2953,`${imgDirectiveDetails(dir.ngSrc)} \`${inputName}\` was updated after initialization. The NgOptimizedImage directive will not react to this input change. ${reason} To fix this, either switch \`${inputName}\` to a static value or wrap the image element in an *ngIf that is gated on the necessary value.`)}function round(input){return Number.isInteger(input)?input:input.toFixed(2)}__name(function inputToInteger(value){return"string"==typeof value?parseInt(value,10):value},"inputToInteger"),__name(function inputToBoolean(value){return null!=value&&"false"!=`${value}`},"inputToBoolean"),__name(function processConfig(config){let sortedBreakpoints={};return config.breakpoints&&(sortedBreakpoints.breakpoints=config.breakpoints.sort((a,b)=>a-b)),Object.assign({},defaultConfig,config,sortedBreakpoints)},"processConfig"),__name(function assertNoConflictingSrc(dir){if(dir.src)throw new \u0275RuntimeError(2950,`${imgDirectiveDetails(dir.ngSrc)} both \`src\` and \`ngSrc\` have been set. Supplying both of these attributes breaks lazy loading. The NgOptimizedImage directive sets \`src\` itself based on the value of \`ngSrc\`. To fix this, please remove the \`src\` attribute.`)},"assertNoConflictingSrc"),__name(function assertNoConflictingSrcset(dir){if(dir.srcset)throw new \u0275RuntimeError(2951,`${imgDirectiveDetails(dir.ngSrc)} both \`srcset\` and \`ngSrcset\` have been set. Supplying both of these attributes breaks lazy loading. The NgOptimizedImage directive sets \`srcset\` itself based on the value of \`ngSrcset\`. To fix this, please remove the \`srcset\` attribute.`)},"assertNoConflictingSrcset"),__name(function assertNotBase64Image(dir){let ngSrc=dir.ngSrc.trim();if(ngSrc.startsWith("data:"))throw ngSrc.length>50&&(ngSrc=ngSrc.substring(0,50)+"..."),new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc,!1)} \`ngSrc\` is a Base64-encoded string (${ngSrc}). NgOptimizedImage does not support Base64-encoded strings. To fix this, disable the NgOptimizedImage directive for this element by removing \`ngSrc\` and using a standard \`src\` attribute instead.`)},"assertNotBase64Image"),__name(function assertNoComplexSizes(dir){if(dir.sizes?.match(/((\)|,)\s|^)\d+px/))throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc,!1)} \`sizes\` was set to a string including pixel values. For automatic \`srcset\` generation, \`sizes\` must only include responsive values, such as \`sizes="50vw"\` or \`sizes="(min-width: 768px) 50vw, 100vw"\`. To fix this, modify the \`sizes\` attribute, or provide your own \`ngSrcset\` value directly.`)},"assertNoComplexSizes"),__name(function assertNotBlobUrl(dir){const ngSrc=dir.ngSrc.trim();if(ngSrc.startsWith("blob:"))throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} \`ngSrc\` was set to a blob URL (${ngSrc}). Blob URLs are not supported by the NgOptimizedImage directive. To fix this, disable the NgOptimizedImage directive for this element by removing \`ngSrc\` and using a regular \`src\` attribute instead.`)},"assertNotBlobUrl"),__name(assertNonEmptyInput,"assertNonEmptyInput"),__name(function assertValidNgSrcset(dir,value){if(null==value)return;assertNonEmptyInput(dir,"ngSrcset",value);const stringVal=value,isValidWidthDescriptor=VALID_WIDTH_DESCRIPTOR_SRCSET.test(stringVal),isValidDensityDescriptor=VALID_DENSITY_DESCRIPTOR_SRCSET.test(stringVal);if(isValidDensityDescriptor&&assertUnderDensityCap(dir,stringVal),!isValidWidthDescriptor&&!isValidDensityDescriptor)throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} \`ngSrcset\` has an invalid value (\`${value}\`). To fix this, supply \`ngSrcset\` using a comma-separated list of one or more width descriptors (e.g. "100w, 200w") or density descriptors (e.g. "1x, 2x").`)},"assertValidNgSrcset"),__name(assertUnderDensityCap,"assertUnderDensityCap"),__name(postInitInputChangeError,"postInitInputChangeError"),__name(function assertNoPostInitInputChange(dir,changes,inputs){inputs.forEach(input=>{if(changes.hasOwnProperty(input)&&!changes[input].isFirstChange())throw"ngSrc"===input&&(dir={ngSrc:changes[input].previousValue}),postInitInputChangeError(dir,input)})},"assertNoPostInitInputChange"),__name(function assertGreaterThanZero(dir,inputValue,inputName){const validNumber="number"==typeof inputValue&&inputValue>0,validString="string"==typeof inputValue&&/^\d+$/.test(inputValue.trim())&&parseInt(inputValue)>0;if(!validNumber&&!validString)throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} \`${inputName}\` has an invalid value (\`${inputValue}\`). To fix this, provide \`${inputName}\` as a number greater than 0.`)},"assertGreaterThanZero"),__name(function assertNoImageDistortion(dir,img,renderer){const removeListenerFn=renderer.listen(img,"load",()=>{removeListenerFn();const computedStyle=window.getComputedStyle(img);let renderedWidth=parseFloat(computedStyle.getPropertyValue("width")),renderedHeight=parseFloat(computedStyle.getPropertyValue("height"));if("border-box"===computedStyle.getPropertyValue("box-sizing")){const paddingTop=computedStyle.getPropertyValue("padding-top"),paddingRight=computedStyle.getPropertyValue("padding-right"),paddingBottom=computedStyle.getPropertyValue("padding-bottom"),paddingLeft=computedStyle.getPropertyValue("padding-left");renderedWidth-=parseFloat(paddingRight)+parseFloat(paddingLeft),renderedHeight-=parseFloat(paddingTop)+parseFloat(paddingBottom)}const renderedAspectRatio=renderedWidth/renderedHeight,nonZeroRenderedDimensions=0!==renderedWidth&&0!==renderedHeight,intrinsicWidth=img.naturalWidth,intrinsicHeight=img.naturalHeight,intrinsicAspectRatio=intrinsicWidth/intrinsicHeight,suppliedWidth=dir.width,suppliedHeight=dir.height,suppliedAspectRatio=suppliedWidth/suppliedHeight,inaccurateDimensions=Math.abs(suppliedAspectRatio-intrinsicAspectRatio)>.1,stylingDistortion=nonZeroRenderedDimensions&&Math.abs(intrinsicAspectRatio-renderedAspectRatio)>.1;if(inaccurateDimensions)console.warn(\u0275formatRuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} the aspect ratio of the image does not match the aspect ratio indicated by the width and height attributes. \nIntrinsic image size: ${intrinsicWidth}w x ${intrinsicHeight}h (aspect-ratio: ${round(intrinsicAspectRatio)}). \nSupplied width and height attributes: ${suppliedWidth}w x ${suppliedHeight}h (aspect-ratio: ${round(suppliedAspectRatio)}). \nTo fix this, update the width and height attributes.`));else if(stylingDistortion)console.warn(\u0275formatRuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} the aspect ratio of the rendered image does not match the image's intrinsic aspect ratio. \nIntrinsic image size: ${intrinsicWidth}w x ${intrinsicHeight}h (aspect-ratio: ${round(intrinsicAspectRatio)}). \nRendered image size: ${renderedWidth}w x ${renderedHeight}h (aspect-ratio: ${round(renderedAspectRatio)}). \nThis issue can occur if "width" and "height" attributes are added to an image without updating the corresponding image styling. To fix this, adjust image styling. In most cases, adding "height: auto" or "width: auto" to the image styling will fix this issue.`));else if(!dir.ngSrcset&&nonZeroRenderedDimensions){const recommendedWidth=RECOMMENDED_SRCSET_DENSITY_CAP*renderedWidth,recommendedHeight=RECOMMENDED_SRCSET_DENSITY_CAP*renderedHeight;(intrinsicWidth-recommendedWidth>=1e3||intrinsicHeight-recommendedHeight>=1e3)&&console.warn(\u0275formatRuntimeError(2960,`${imgDirectiveDetails(dir.ngSrc)} the intrinsic image is significantly larger than necessary. \nRendered image size: ${renderedWidth}w x ${renderedHeight}h. \nIntrinsic image size: ${intrinsicWidth}w x ${intrinsicHeight}h. \nRecommended intrinsic image size: ${recommendedWidth}w x ${recommendedHeight}h. \nNote: Recommended intrinsic image size is calculated assuming a maximum DPR of ${RECOMMENDED_SRCSET_DENSITY_CAP}. To improve loading time, resize the image or consider using the "ngSrcset" and "sizes" attributes.`))}})},"assertNoImageDistortion"),__name(function assertNonEmptyWidthAndHeight(dir){let missingAttributes=[];if(void 0===dir.width&&missingAttributes.push("width"),void 0===dir.height&&missingAttributes.push("height"),missingAttributes.length>0)throw new \u0275RuntimeError(2954,`${imgDirectiveDetails(dir.ngSrc)} these required attributes are missing: ${missingAttributes.map(attr=>`"${attr}"`).join(", ")}. Including "width" and "height" attributes will prevent image-related layout shifts. To fix this, include "width" and "height" attributes on the image tag or turn on "fill" mode with the \`fill\` attribute.`)},"assertNonEmptyWidthAndHeight"),__name(function assertEmptyWidthAndHeight(dir){if(dir.width||dir.height)throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} the attributes \`height\` and/or \`width\` are present along with the \`fill\` attribute. Because \`fill\` mode causes an image to fill its containing element, the size attributes have no effect and should be removed.`)},"assertEmptyWidthAndHeight"),__name(function assertNonZeroRenderedHeight(dir,img,renderer){const removeListenerFn=renderer.listen(img,"load",()=>{removeListenerFn(),dir.fill&&0===img.clientHeight&&console.warn(\u0275formatRuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} the height of the fill-mode image is zero. This is likely because the containing element does not have the CSS 'position' property set to one of the following: "relative", "fixed", or "absolute". To fix this problem, make sure the container element has the CSS 'position' property defined and the height of the element is not zero.`))})},"assertNonZeroRenderedHeight"),__name(function assertValidLoadingInput(dir){if(dir.loading&&dir.priority)throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} the \`loading\` attribute was used on an image that was marked "priority". Setting \`loading\` on priority images is not allowed because these images will always be eagerly loaded. To fix this, remove the \u201cloading\u201d attribute from the priority image.`);if("string"==typeof dir.loading&&!["auto","eager","lazy"].includes(dir.loading))throw new \u0275RuntimeError(2952,`${imgDirectiveDetails(dir.ngSrc)} the \`loading\` attribute has an invalid value (\`${dir.loading}\`). To fix this, provide a valid value ("lazy", "eager", or "auto").`)},"assertValidLoadingInput"),__name(function assertNotMissingBuiltInLoader(ngSrc,imageLoader){if(imageLoader===noopImageLoader){let builtInLoaderName="";for(const loader of BUILT_IN_LOADERS)if(loader.testUrl(ngSrc)){builtInLoaderName=loader.name;break}builtInLoaderName&&console.warn(\u0275formatRuntimeError(2962,`NgOptimizedImage: It looks like your images may be hosted on the ${builtInLoaderName} CDN, but your app is not using Angular's built-in loader for that CDN. We recommend switching to use the built-in by calling \`provide${builtInLoaderName}Loader()\` in your \`providers\` and passing it your instance's base URL. If you don't want to use the built-in loader, define a custom loader function using IMAGE_LOADER to silence this warning.`))}},"assertNotMissingBuiltInLoader"),__name(function assertNoNgSrcsetWithoutLoader(dir,imageLoader){dir.ngSrcset&&imageLoader===noopImageLoader&&console.warn(\u0275formatRuntimeError(2963,`${imgDirectiveDetails(dir.ngSrc)} the \`ngSrcset\` attribute is present but no image loader is configured (i.e. the default one is being used), which would result in the same image being used for all configured sizes. To fix this, provide a loader or remove the \`ngSrcset\` attribute from the image.`))},"assertNoNgSrcsetWithoutLoader"),__name(function assertNoLoaderParamsWithoutLoader(dir,imageLoader){dir.loaderParams&&imageLoader===noopImageLoader&&console.warn(\u0275formatRuntimeError(2963,`${imgDirectiveDetails(dir.ngSrc)} the \`loaderParams\` attribute is present but no image loader is configured (i.e. the default one is being used), which means that the loaderParams data will not be consumed and will not affect the URL. To fix this, provide a custom loader or remove the \`loaderParams\` attribute from the image.`))},"assertNoLoaderParamsWithoutLoader"),__name(round,"round")},3144:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{JF:()=>HttpClientModule,eN:()=>HttpClient});var _angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2223),rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2076),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9751),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3900),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4755);class HttpHandler{}__name(HttpHandler,"HttpHandler");class HttpBackend{}__name(HttpBackend,"HttpBackend");class HttpHeaders{constructor(headers){this.normalizedNames=new Map,this.lazyUpdate=null,headers?this.lazyInit="string"==typeof headers?()=>{this.headers=new Map,headers.split("\n").forEach(line=>{const index=line.indexOf(":");if(index>0){const name=line.slice(0,index),key=name.toLowerCase(),value=line.slice(index+1).trim();this.maybeSetNormalizedName(name,key),this.headers.has(key)?this.headers.get(key).push(value):this.headers.set(key,[value])}})}:()=>{this.headers=new Map,Object.entries(headers).forEach(([name,values])=>{let headerValues;if(headerValues="string"==typeof values?[values]:"number"==typeof values?[values.toString()]:values.map(value=>value.toString()),headerValues.length>0){const key=name.toLowerCase();this.headers.set(key,headerValues),this.maybeSetNormalizedName(name,key)}})}:this.headers=new Map}has(name){return this.init(),this.headers.has(name.toLowerCase())}get(name){this.init();const values=this.headers.get(name.toLowerCase());return values&&values.length>0?values[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(name){return this.init(),this.headers.get(name.toLowerCase())||null}append(name,value){return this.clone({name,value,op:"a"})}set(name,value){return this.clone({name,value,op:"s"})}delete(name,value){return this.clone({name,value,op:"d"})}maybeSetNormalizedName(name,lcName){this.normalizedNames.has(lcName)||this.normalizedNames.set(lcName,name)}init(){this.lazyInit&&(this.lazyInit instanceof HttpHeaders?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(update=>this.applyUpdate(update)),this.lazyUpdate=null))}copyFrom(other){other.init(),Array.from(other.headers.keys()).forEach(key=>{this.headers.set(key,other.headers.get(key)),this.normalizedNames.set(key,other.normalizedNames.get(key))})}clone(update){const clone=new HttpHeaders;return clone.lazyInit=this.lazyInit&&this.lazyInit instanceof HttpHeaders?this.lazyInit:this,clone.lazyUpdate=(this.lazyUpdate||[]).concat([update]),clone}applyUpdate(update){const key=update.name.toLowerCase();switch(update.op){case"a":case"s":let value=update.value;if("string"==typeof value&&(value=[value]),0===value.length)return;this.maybeSetNormalizedName(update.name,key);const base=("a"===update.op?this.headers.get(key):void 0)||[];base.push(...value),this.headers.set(key,base);break;case"d":const toDelete=update.value;if(toDelete){let existing=this.headers.get(key);if(!existing)return;existing=existing.filter(value2=>-1===toDelete.indexOf(value2)),0===existing.length?(this.headers.delete(key),this.normalizedNames.delete(key)):this.headers.set(key,existing)}else this.headers.delete(key),this.normalizedNames.delete(key)}}forEach(fn){this.init(),Array.from(this.normalizedNames.keys()).forEach(key=>fn(this.normalizedNames.get(key),this.headers.get(key)))}}__name(HttpHeaders,"HttpHeaders"),__name(function assertValidHeaders(headers){for(const[key,value]of Object.entries(headers))if("string"!=typeof value&&"number"!=typeof value&&!Array.isArray(value))throw new Error(`Unexpected value of the \`${key}\` header provided. Expecting either a string, a number or an array, but got: \`${value}\`.`)},"assertValidHeaders");class HttpUrlEncodingCodec{encodeKey(key){return standardEncoding(key)}encodeValue(value){return standardEncoding(value)}decodeKey(key){return decodeURIComponent(key)}decodeValue(value){return decodeURIComponent(value)}}function paramParser(rawParams,codec){const map=new Map;return rawParams.length>0&&rawParams.replace(/^\?/,"").split("&").forEach(param=>{const eqIdx=param.indexOf("="),[key,val]=-1==eqIdx?[codec.decodeKey(param),""]:[codec.decodeKey(param.slice(0,eqIdx)),codec.decodeValue(param.slice(eqIdx+1))],list=map.get(key)||[];list.push(val),map.set(key,list)}),map}__name(HttpUrlEncodingCodec,"HttpUrlEncodingCodec"),__name(paramParser,"paramParser");const STANDARD_ENCODING_REGEX=/%(\d[a-f0-9])/gi,STANDARD_ENCODING_REPLACEMENTS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function standardEncoding(v){return encodeURIComponent(v).replace(STANDARD_ENCODING_REGEX,(s,t)=>STANDARD_ENCODING_REPLACEMENTS[t]??s)}function valueToString(value){return`${value}`}__name(standardEncoding,"standardEncoding"),__name(valueToString,"valueToString");class HttpParams{constructor(options={}){if(this.updates=null,this.cloneFrom=null,this.encoder=options.encoder||new HttpUrlEncodingCodec,options.fromString){if(options.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=paramParser(options.fromString,this.encoder)}else options.fromObject?(this.map=new Map,Object.keys(options.fromObject).forEach(key=>{const value=options.fromObject[key],values=Array.isArray(value)?value.map(valueToString):[valueToString(value)];this.map.set(key,values)})):this.map=null}has(param){return this.init(),this.map.has(param)}get(param){this.init();const res=this.map.get(param);return res?res[0]:null}getAll(param){return this.init(),this.map.get(param)||null}keys(){return this.init(),Array.from(this.map.keys())}append(param,value){return this.clone({param,value,op:"a"})}appendAll(params){const updates=[];return Object.keys(params).forEach(param=>{const value=params[param];Array.isArray(value)?value.forEach(_value=>{updates.push({param,value:_value,op:"a"})}):updates.push({param,value,op:"a"})}),this.clone(updates)}set(param,value){return this.clone({param,value,op:"s"})}delete(param,value){return this.clone({param,value,op:"d"})}toString(){return this.init(),this.keys().map(key=>{const eKey=this.encoder.encodeKey(key);return this.map.get(key).map(value=>eKey+"="+this.encoder.encodeValue(value)).join("&")}).filter(param=>""!==param).join("&")}clone(update){const clone=new HttpParams({encoder:this.encoder});return clone.cloneFrom=this.cloneFrom||this,clone.updates=(this.updates||[]).concat(update),clone}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(key=>this.map.set(key,this.cloneFrom.map.get(key))),this.updates.forEach(update=>{switch(update.op){case"a":case"s":const base=("a"===update.op?this.map.get(update.param):void 0)||[];base.push(valueToString(update.value)),this.map.set(update.param,base);break;case"d":if(void 0===update.value){this.map.delete(update.param);break}{let base2=this.map.get(update.param)||[];const idx=base2.indexOf(valueToString(update.value));-1!==idx&&base2.splice(idx,1),base2.length>0?this.map.set(update.param,base2):this.map.delete(update.param)}}}),this.cloneFrom=this.updates=null)}}__name(HttpParams,"HttpParams"),__name(class HttpContextToken{constructor(defaultValue){this.defaultValue=defaultValue}},"HttpContextToken");class HttpContext{constructor(){this.map=new Map}set(token,value){return this.map.set(token,value),this}get(token){return this.map.has(token)||this.map.set(token,token.defaultValue()),this.map.get(token)}delete(token){return this.map.delete(token),this}has(token){return this.map.has(token)}keys(){return this.map.keys()}}function mightHaveBody(method){switch(method){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function isArrayBuffer(value){return typeof ArrayBuffer<"u"&&value instanceof ArrayBuffer}function isBlob(value){return typeof Blob<"u"&&value instanceof Blob}function isFormData(value){return typeof FormData<"u"&&value instanceof FormData}function isUrlSearchParams(value){return typeof URLSearchParams<"u"&&value instanceof URLSearchParams}__name(HttpContext,"HttpContext"),__name(mightHaveBody,"mightHaveBody"),__name(isArrayBuffer,"isArrayBuffer"),__name(isBlob,"isBlob"),__name(isFormData,"isFormData"),__name(isUrlSearchParams,"isUrlSearchParams");class HttpRequest{constructor(method,url,third,fourth){let options;if(this.url=url,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=method.toUpperCase(),mightHaveBody(this.method)||fourth?(this.body=void 0!==third?third:null,options=fourth):options=third,options&&(this.reportProgress=!!options.reportProgress,this.withCredentials=!!options.withCredentials,options.responseType&&(this.responseType=options.responseType),options.headers&&(this.headers=options.headers),options.context&&(this.context=options.context),options.params&&(this.params=options.params)),this.headers||(this.headers=new HttpHeaders),this.context||(this.context=new HttpContext),this.params){const params=this.params.toString();if(0===params.length)this.urlWithParams=url;else{const qIdx=url.indexOf("?");this.urlWithParams=url+(-1===qIdx?"?":qIdx<url.length-1?"&":"")+params}}else this.params=new HttpParams,this.urlWithParams=url}serializeBody(){return null===this.body?null:isArrayBuffer(this.body)||isBlob(this.body)||isFormData(this.body)||isUrlSearchParams(this.body)||"string"==typeof this.body?this.body:this.body instanceof HttpParams?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||isFormData(this.body)?null:isBlob(this.body)?this.body.type||null:isArrayBuffer(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof HttpParams?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(update={}){const method=update.method||this.method,url=update.url||this.url,responseType=update.responseType||this.responseType,body=void 0!==update.body?update.body:this.body,withCredentials=void 0!==update.withCredentials?update.withCredentials:this.withCredentials,reportProgress=void 0!==update.reportProgress?update.reportProgress:this.reportProgress;let headers=update.headers||this.headers,params=update.params||this.params;const context=update.context??this.context;return void 0!==update.setHeaders&&(headers=Object.keys(update.setHeaders).reduce((headers2,name)=>headers2.set(name,update.setHeaders[name]),headers)),update.setParams&&(params=Object.keys(update.setParams).reduce((params2,param)=>params2.set(param,update.setParams[param]),params)),new HttpRequest(method,url,body,{params,headers,context,reportProgress,responseType,withCredentials})}}__name(HttpRequest,"HttpRequest");var HttpEventType=(()=>((HttpEventType=HttpEventType||{})[HttpEventType.Sent=0]="Sent",HttpEventType[HttpEventType.UploadProgress=1]="UploadProgress",HttpEventType[HttpEventType.ResponseHeader=2]="ResponseHeader",HttpEventType[HttpEventType.DownloadProgress=3]="DownloadProgress",HttpEventType[HttpEventType.Response=4]="Response",HttpEventType[HttpEventType.User=5]="User",HttpEventType))();class HttpResponseBase{constructor(init,defaultStatus=200,defaultStatusText="OK"){this.headers=init.headers||new HttpHeaders,this.status=void 0!==init.status?init.status:defaultStatus,this.statusText=init.statusText||defaultStatusText,this.url=init.url||null,this.ok=this.status>=200&&this.status<300}}__name(HttpResponseBase,"HttpResponseBase");class HttpHeaderResponse extends HttpResponseBase{constructor(init={}){super(init),this.type=HttpEventType.ResponseHeader}clone(update={}){return new HttpHeaderResponse({headers:update.headers||this.headers,status:void 0!==update.status?update.status:this.status,statusText:update.statusText||this.statusText,url:update.url||this.url||void 0})}}__name(HttpHeaderResponse,"HttpHeaderResponse");class HttpResponse extends HttpResponseBase{constructor(init={}){super(init),this.type=HttpEventType.Response,this.body=void 0!==init.body?init.body:null}clone(update={}){return new HttpResponse({body:void 0!==update.body?update.body:this.body,headers:update.headers||this.headers,status:void 0!==update.status?update.status:this.status,statusText:update.statusText||this.statusText,url:update.url||this.url||void 0})}}__name(HttpResponse,"HttpResponse");class HttpErrorResponse extends HttpResponseBase{constructor(init){super(init,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${init.url||"(unknown url)"}`:`Http failure response for ${init.url||"(unknown url)"}: ${init.status} ${init.statusText}`,this.error=init.error||null}}function addBody(options,body){return{body,headers:options.headers,context:options.context,observe:options.observe,params:options.params,reportProgress:options.reportProgress,responseType:options.responseType,withCredentials:options.withCredentials}}__name(HttpErrorResponse,"HttpErrorResponse"),__name(addBody,"addBody");let HttpClient=(()=>{class HttpClient2{constructor(handler){this.handler=handler}request(first2,url,options={}){let req;if(first2 instanceof HttpRequest)req=first2;else{let headers,params;headers=options.headers instanceof HttpHeaders?options.headers:new HttpHeaders(options.headers),options.params&&(params=options.params instanceof HttpParams?options.params:new HttpParams({fromObject:options.params})),req=new HttpRequest(first2,url,void 0!==options.body?options.body:null,{headers,context:options.context,params,reportProgress:options.reportProgress,responseType:options.responseType||"json",withCredentials:options.withCredentials})}const events$=(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.of)(req).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.b)(req2=>this.handler.handle(req2)));if(first2 instanceof HttpRequest||"events"===options.observe)return events$;const res$=events$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.h)(event=>event instanceof HttpResponse));switch(options.observe||"body"){case"body":switch(req.responseType){case"arraybuffer":return res$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(res=>{if(null!==res.body&&!(res.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return res.body}));case"blob":return res$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(res=>{if(null!==res.body&&!(res.body instanceof Blob))throw new Error("Response is not a Blob.");return res.body}));case"text":return res$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(res=>{if(null!==res.body&&"string"!=typeof res.body)throw new Error("Response is not a string.");return res.body}));default:return res$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(res=>res.body))}case"response":return res$;default:throw new Error(`Unreachable: unhandled observe type ${options.observe}}`)}}delete(url,options={}){return this.request("DELETE",url,options)}get(url,options={}){return this.request("GET",url,options)}head(url,options={}){return this.request("HEAD",url,options)}jsonp(url,callbackParam){return this.request("JSONP",url,{params:(new HttpParams).append(callbackParam,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(url,options={}){return this.request("OPTIONS",url,options)}patch(url,body,options={}){return this.request("PATCH",url,addBody(options,body))}post(url,body,options={}){return this.request("POST",url,addBody(options,body))}put(url,body,options={}){return this.request("PUT",url,addBody(options,body))}}return __name(HttpClient2,"HttpClient"),HttpClient2.\u0275fac=__name(function(t){return new(t||HttpClient2)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(HttpHandler))},"HttpClient_Factory"),HttpClient2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Yz7({token:HttpClient2,factory:HttpClient2.\u0275fac}),HttpClient2})();function interceptorChainEndFn(req,finalHandlerFn){return finalHandlerFn(req)}function adaptLegacyInterceptorToChain(chainTailFn,interceptor){return(initialRequest,finalHandlerFn)=>interceptor.intercept(initialRequest,{handle:downstreamRequest=>chainTailFn(downstreamRequest,finalHandlerFn)})}function chainedInterceptorFn(chainTailFn,interceptorFn,injector){return(initialRequest,finalHandlerFn)=>injector.runInContext(()=>interceptorFn(initialRequest,downstreamRequest=>chainTailFn(downstreamRequest,finalHandlerFn)))}__name(interceptorChainEndFn,"interceptorChainEndFn"),__name(adaptLegacyInterceptorToChain,"adaptLegacyInterceptorToChain"),__name(chainedInterceptorFn,"chainedInterceptorFn");const HTTP_INTERCEPTORS=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.OlP(""),HTTP_INTERCEPTOR_FNS=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.OlP(""),HTTP_ROOT_INTERCEPTOR_FNS=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.OlP("");function legacyInterceptorFnFactory(){let chain=null;return(req,handler)=>(null===chain&&(chain=((0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.f3M)(HTTP_INTERCEPTORS,{optional:!0})??[]).reduceRight(adaptLegacyInterceptorToChain,interceptorChainEndFn)),chain(req,handler))}__name(legacyInterceptorFnFactory,"legacyInterceptorFnFactory");let HttpInterceptorHandler=(()=>{class HttpInterceptorHandler2 extends HttpHandler{constructor(backend,injector){super(),this.backend=backend,this.injector=injector,this.chain=null}handle(initialRequest){if(null===this.chain){const dedupedInterceptorFns=Array.from(new Set([...this.injector.get(HTTP_INTERCEPTOR_FNS),...this.injector.get(HTTP_ROOT_INTERCEPTOR_FNS,[])]));this.chain=dedupedInterceptorFns.reduceRight((nextSequencedFn,interceptorFn)=>chainedInterceptorFn(nextSequencedFn,interceptorFn,this.injector),interceptorChainEndFn)}return this.chain(initialRequest,downstreamRequest=>this.backend.handle(downstreamRequest))}}return __name(HttpInterceptorHandler2,"HttpInterceptorHandler"),HttpInterceptorHandler2.\u0275fac=__name(function(t){return new(t||HttpInterceptorHandler2)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(HttpBackend),_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_4__.lqb))},"HttpInterceptorHandler_Factory"),HttpInterceptorHandler2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Yz7({token:HttpInterceptorHandler2,factory:HttpInterceptorHandler2.\u0275fac}),HttpInterceptorHandler2})();class JsonpCallbackContext{}function jsonpCallbackContext(){return"object"==typeof window?window:{}}__name(JsonpCallbackContext,"JsonpCallbackContext"),__name(jsonpCallbackContext,"jsonpCallbackContext");let JsonpClientBackend=null;function jsonpInterceptorFn(req,next){return"JSONP"===req.method?inject(JsonpClientBackend).handle(req):next(req)}__name(jsonpInterceptorFn,"jsonpInterceptorFn");const XSSI_PREFIX=/^\)\]\}',?\n/;function getResponseUrl(xhr){return"responseURL"in xhr&&xhr.responseURL?xhr.responseURL:/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())?xhr.getResponseHeader("X-Request-URL"):null}__name(getResponseUrl,"getResponseUrl");let HttpXhrBackend=(()=>{class HttpXhrBackend2{constructor(xhrFactory){this.xhrFactory=xhrFactory}handle(req){if("JSONP"===req.method)throw new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vHH(-2800,!1);const macroTaskCanceller=createBackgroundMacroTask(),xhrFactory=this.xhrFactory;return(xhrFactory.\u0275loadImpl?(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.D)(xhrFactory.\u0275loadImpl()):(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.of)(null)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.w)(()=>new rxjs__WEBPACK_IMPORTED_MODULE_7__.y(observer=>{const xhr=xhrFactory.build();if(xhr.open(req.method,req.urlWithParams),req.withCredentials&&(xhr.withCredentials=!0),req.headers.forEach((name,values)=>xhr.setRequestHeader(name,values.join(","))),req.headers.has("Accept")||xhr.setRequestHeader("Accept","application/json, text/plain, */*"),!req.headers.has("Content-Type")){const detectedType=req.detectContentTypeHeader();null!==detectedType&&xhr.setRequestHeader("Content-Type",detectedType)}if(req.responseType){const responseType=req.responseType.toLowerCase();xhr.responseType="json"!==responseType?responseType:"text"}const reqBody=req.serializeBody();let headerResponse=null;const partialFromXhr=__name(()=>{if(null!==headerResponse)return headerResponse;const statusText=xhr.statusText||"OK",headers=new HttpHeaders(xhr.getAllResponseHeaders()),url=getResponseUrl(xhr)||req.url;return headerResponse=new HttpHeaderResponse({headers,status:xhr.status,statusText,url}),headerResponse},"partialFromXhr"),onLoad=__name(()=>{let{headers,status,statusText,url}=partialFromXhr(),body=null;204!==status&&(body=typeof xhr.response>"u"?xhr.responseText:xhr.response),0===status&&(status=body?200:0);let ok=status>=200&&status<300;if("json"===req.responseType&&"string"==typeof body){const originalBody=body;body=body.replace(XSSI_PREFIX,"");try{body=""!==body?JSON.parse(body):null}catch(error){body=originalBody,ok&&(ok=!1,body={error,text:body})}}ok?(observer.next(new HttpResponse({body,headers,status,statusText,url:url||void 0})),observer.complete()):observer.error(new HttpErrorResponse({error:body,headers,status,statusText,url:url||void 0}))},"onLoad"),onError=__name(error=>{const{url}=partialFromXhr(),res=new HttpErrorResponse({error,status:xhr.status||0,statusText:xhr.statusText||"Unknown Error",url:url||void 0});observer.error(res),macroTaskCanceller()},"onError");let sentHeaders=!1;const onDownProgress=__name(event=>{sentHeaders||(observer.next(partialFromXhr()),sentHeaders=!0);let progressEvent={type:HttpEventType.DownloadProgress,loaded:event.loaded};event.lengthComputable&&(progressEvent.total=event.total),"text"===req.responseType&&xhr.responseText&&(progressEvent.partialText=xhr.responseText),observer.next(progressEvent)},"onDownProgress"),onUpProgress=__name(event=>{let progress={type:HttpEventType.UploadProgress,loaded:event.loaded};event.lengthComputable&&(progress.total=event.total),observer.next(progress)},"onUpProgress");xhr.addEventListener("load",onLoad),xhr.addEventListener("error",onError),xhr.addEventListener("timeout",onError),xhr.addEventListener("abort",onError),req.reportProgress&&(xhr.addEventListener("progress",onDownProgress),null!==reqBody&&xhr.upload&&xhr.upload.addEventListener("progress",onUpProgress));const onLoadEnd=__name(()=>macroTaskCanceller(),"onLoadEnd");xhr.addEventListener("loadend",onLoadEnd);try{xhr.send(reqBody)}catch(e){onError(e)}return observer.next({type:HttpEventType.Sent}),()=>{xhr.removeEventListener("loadend",onLoadEnd),xhr.removeEventListener("error",onError),xhr.removeEventListener("abort",onError),xhr.removeEventListener("load",onLoad),xhr.removeEventListener("timeout",onError),macroTaskCanceller(),req.reportProgress&&(xhr.removeEventListener("progress",onDownProgress),null!==reqBody&&xhr.upload&&xhr.upload.removeEventListener("progress",onUpProgress)),xhr.readyState!==xhr.DONE&&xhr.abort()}})))}}return __name(HttpXhrBackend2,"HttpXhrBackend"),HttpXhrBackend2.\u0275fac=__name(function(t){return new(t||HttpXhrBackend2)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_8__.JF))},"HttpXhrBackend_Factory"),HttpXhrBackend2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Yz7({token:HttpXhrBackend2,factory:HttpXhrBackend2.\u0275fac}),HttpXhrBackend2})();function createBackgroundMacroTask(){const noop=__name(()=>{},"noop");if(typeof Zone<"u"){const zoneCurrent=Zone.current,task=zoneCurrent.scheduleMacroTask("httpMacroTask",noop,void 0,noop,noop);return()=>zoneCurrent.cancelTask(task)}return noop}__name(createBackgroundMacroTask,"createBackgroundMacroTask");const XSRF_ENABLED=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.OlP("XSRF_ENABLED"),XSRF_COOKIE_NAME=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),XSRF_HEADER_NAME=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class HttpXsrfTokenExtractor{}__name(HttpXsrfTokenExtractor,"HttpXsrfTokenExtractor");let HttpXsrfCookieExtractor=(()=>{class HttpXsrfCookieExtractor2{constructor(doc,platform,cookieName){this.doc=doc,this.platform=platform,this.cookieName=cookieName,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const cookieString=this.doc.cookie||"";return cookieString!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,_angular_common__WEBPACK_IMPORTED_MODULE_8__.Mx)(cookieString,this.cookieName),this.lastCookieString=cookieString),this.lastToken}}return __name(HttpXsrfCookieExtractor2,"HttpXsrfCookieExtractor"),HttpXsrfCookieExtractor2.\u0275fac=__name(function(t){return new(t||HttpXsrfCookieExtractor2)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_8__.K0),_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Lbi),_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(XSRF_COOKIE_NAME))},"HttpXsrfCookieExtractor_Factory"),HttpXsrfCookieExtractor2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Yz7({token:HttpXsrfCookieExtractor2,factory:HttpXsrfCookieExtractor2.\u0275fac}),HttpXsrfCookieExtractor2})();function xsrfInterceptorFn(req,next){const lcUrl=req.url.toLowerCase();if(!(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.f3M)(XSRF_ENABLED)||"GET"===req.method||"HEAD"===req.method||lcUrl.startsWith("http://")||lcUrl.startsWith("https://"))return next(req);const token=(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.f3M)(HttpXsrfTokenExtractor).getToken(),headerName=(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.f3M)(XSRF_HEADER_NAME);return null!=token&&!req.headers.has(headerName)&&(req=req.clone({headers:req.headers.set(headerName,token)})),next(req)}__name(xsrfInterceptorFn,"xsrfInterceptorFn");var HttpFeatureKind=(()=>((HttpFeatureKind=HttpFeatureKind||{})[HttpFeatureKind.Interceptors=0]="Interceptors",HttpFeatureKind[HttpFeatureKind.LegacyInterceptors=1]="LegacyInterceptors",HttpFeatureKind[HttpFeatureKind.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",HttpFeatureKind[HttpFeatureKind.NoXsrfProtection=3]="NoXsrfProtection",HttpFeatureKind[HttpFeatureKind.JsonpSupport=4]="JsonpSupport",HttpFeatureKind[HttpFeatureKind.RequestsMadeViaParent=5]="RequestsMadeViaParent",HttpFeatureKind))();function makeHttpFeature(kind,providers){return{\u0275kind:kind,\u0275providers:providers}}function provideHttpClient(...features){const providers=[HttpClient,HttpXhrBackend,HttpInterceptorHandler,{provide:HttpHandler,useExisting:HttpInterceptorHandler},{provide:HttpBackend,useExisting:HttpXhrBackend},{provide:HTTP_INTERCEPTOR_FNS,useValue:xsrfInterceptorFn,multi:!0},{provide:XSRF_ENABLED,useValue:!0},{provide:HttpXsrfTokenExtractor,useClass:HttpXsrfCookieExtractor}];for(const feature of features)providers.push(...feature.\u0275providers);return(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.MR2)(providers)}__name(makeHttpFeature,"makeHttpFeature"),__name(provideHttpClient,"provideHttpClient"),__name(function withInterceptors(interceptorFns){return makeHttpFeature(HttpFeatureKind.Interceptors,interceptorFns.map(interceptorFn=>({provide:HTTP_INTERCEPTOR_FNS,useValue:interceptorFn,multi:!0})))},"withInterceptors");const LEGACY_INTERCEPTOR_FN=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.OlP("LEGACY_INTERCEPTOR_FN");function withInterceptorsFromDi(){return makeHttpFeature(HttpFeatureKind.LegacyInterceptors,[{provide:LEGACY_INTERCEPTOR_FN,useFactory:legacyInterceptorFnFactory},{provide:HTTP_INTERCEPTOR_FNS,useExisting:LEGACY_INTERCEPTOR_FN,multi:!0}])}__name(withInterceptorsFromDi,"withInterceptorsFromDi"),__name(function withXsrfConfiguration({cookieName,headerName}){const providers=[];return void 0!==cookieName&&providers.push({provide:XSRF_COOKIE_NAME,useValue:cookieName}),void 0!==headerName&&providers.push({provide:XSRF_HEADER_NAME,useValue:headerName}),makeHttpFeature(HttpFeatureKind.CustomXsrfConfiguration,providers)},"withXsrfConfiguration"),__name(function withNoXsrfProtection(){return makeHttpFeature(HttpFeatureKind.NoXsrfProtection,[{provide:XSRF_ENABLED,useValue:!1}])},"withNoXsrfProtection"),__name(function withJsonpSupport(){return makeHttpFeature(HttpFeatureKind.JsonpSupport,[JsonpClientBackend,{provide:JsonpCallbackContext,useFactory:jsonpCallbackContext},{provide:HTTP_INTERCEPTOR_FNS,useValue:jsonpInterceptorFn,multi:!0}])},"withJsonpSupport"),__name(function withRequestsMadeViaParent(){return makeHttpFeature(HttpFeatureKind.RequestsMadeViaParent,[{provide:HttpBackend,useFactory:()=>inject(HttpHandler,{skipSelf:!0,optional:!0})}])},"withRequestsMadeViaParent");let HttpClientModule=(()=>{class HttpClientModule2{}return __name(HttpClientModule2,"HttpClientModule"),HttpClientModule2.\u0275fac=__name(function(t){return new(t||HttpClientModule2)},"HttpClientModule_Factory"),HttpClientModule2.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oAB({type:HttpClientModule2}),HttpClientModule2.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_4__.cJS({providers:[provideHttpClient(withInterceptorsFromDi())]}),HttpClientModule2})();const CACHE_STATE=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.OlP("");function transferCacheInterceptorFn(req,next){const{isCacheActive}=inject(CACHE_STATE);if(!isCacheActive||!null.includes(req.method))return next(req);const transferState=inject(TransferState),storeKey=makeCacheKey(req),response=transferState.get(storeKey,null);if(response){let body=response.body;switch(response.responseType){case"arraybuffer":body=(new TextEncoder).encode(response.body).buffer;break;case"blob":body=new Blob([response.body])}return of(new HttpResponse({body,headers:new HttpHeaders(response.headers),status:response.status,statusText:response.statusText,url:response.url}))}return next(req).pipe(tap(event=>{event instanceof HttpResponse&&transferState.set(storeKey,{body:event.body,headers:getHeadersMap(event.headers),status:event.status,statusText:event.statusText,url:event.url||"",responseType:req.responseType})}))}function getHeadersMap(headers){const headersMap={};for(const key of headers.keys()){const values=headers.getAll(key);null!==values&&(headersMap[key]=values)}return headersMap}function makeCacheKey(request){const{params,method,responseType,url}=request,hash=generateHash(method+"."+responseType+"."+url+"?"+params.keys().sort().map(k=>`${k}=${params.getAll(k)}`).join("&"));return makeStateKey(hash)}function generateHash(value){let hash=0;for(const char of value)hash=Math.imul(31,hash)+char.charCodeAt(0)<<0;return hash+=2147483648,hash.toString()}__name(transferCacheInterceptorFn,"transferCacheInterceptorFn"),__name(getHeadersMap,"getHeadersMap"),__name(makeCacheKey,"makeCacheKey"),__name(generateHash,"generateHash"),__name(function withHttpTransferCache(){return[{provide:CACHE_STATE,useFactory:()=>(inject(\u0275ENABLED_SSR_FEATURES).add("httpcache"),{isCacheActive:!0})},{provide:HTTP_ROOT_INTERCEPTOR_FNS,useValue:transferCacheInterceptorFn,multi:!0,deps:[TransferState,CACHE_STATE]},{provide:APP_BOOTSTRAP_LISTENER,multi:!0,useFactory:()=>{const appRef=inject(ApplicationRef),cacheState=inject(CACHE_STATE),pendingTasks=inject(\u0275InitialRenderPendingTasks);return()=>{appRef.isStable.pipe(first(isStable=>isStable)).toPromise().then(()=>pendingTasks.whenAllTasksComplete).then(()=>{cacheState.isCacheActive=!1})}},deps:[ApplicationRef,CACHE_STATE,\u0275InitialRenderPendingTasks]}]},"withHttpTransferCache")},2223:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$8M:()=>\u0275\u0275injectAttribute,$WT:()=>isStandalone,$Z:()=>\u0275\u0275invalidFactory,AFp:()=>APP_ID,ALo:()=>\u0275\u0275pipe,AaK:()=>stringify,CHM:()=>\u0275\u0275restoreView,CRH:()=>\u0275\u0275loadQuery,D6c:()=>coerceToBoolean,EJc:()=>DEFAULT_CURRENCY_CODE,EiD:()=>_sanitizeHtml,EpF:()=>\u0275\u0275getCurrentView,F$t:()=>\u0275\u0275projectionDef,F4k:()=>isSubscribable,FYo:()=>RendererFactory2,FiY:()=>Optional2,Gf:()=>\u0275\u0275viewQuery,GfV:()=>Version,Gpc:()=>forwardRef,HDt:()=>InitialRenderPendingTasks,Hsn:()=>\u0275\u0275projection,JOm:()=>RendererStyleFlags2,JVY:()=>bypassSanitizationTrustHtml,JZr:()=>XSS_SECURITY_URL,KtG:()=>\u0275\u0275resetView,L6k:()=>bypassSanitizationTrustStyle,LAX:()=>bypassSanitizationTrustUrl,LFG:()=>\u0275\u0275inject2,LSH:()=>\u0275\u0275sanitizeUrl,Lbi:()=>PLATFORM_ID2,Lck:()=>createNgModule,MAs:()=>\u0275\u0275reference,MMx:()=>createEnvironmentInjector,MR2:()=>makeEnvironmentProviders2,NdJ:()=>\u0275\u0275listener,Ojb:()=>CSP_NONCE,OlP:()=>InjectionToken,Oqu:()=>\u0275\u0275textInterpolate,P3R:()=>\u0275\u0275sanitizeUrlOrResourceUrl,PXZ:()=>NgProbeToken,Q6J:()=>\u0275\u0275property,QGY:()=>isPromise,QbO:()=>ANIMATION_MODULE_TYPE,Qsj:()=>Renderer22,R0b:()=>NgZone2,RDi:()=>setDocument,Rgc:()=>TemplateRef,SBq:()=>ElementRef2,Sil:()=>Compiler,Suo:()=>\u0275\u0275contentQuery,TTD:()=>\u0275\u0275NgOnChangesFeature,TgZ:()=>\u0275\u0275elementStart,VKq:()=>\u0275\u0275pureFunction1,XFs:()=>InjectFlags,Xpm:()=>\u0275\u0275defineComponent,Xts:()=>ENVIRONMENT_INITIALIZER2,Y36:()=>\u0275\u0275directiveInject,YKP:()=>NgModuleFactory$1,YNc:()=>\u0275\u0275template,Yjl:()=>\u0275\u0275definePipe,Yz7:()=>\u0275\u0275defineInjectable,Z0I:()=>isInjectable,ZZ4:()=>IterableDiffers,_Bn:()=>\u0275\u0275ProvidersFeature,_UZ:()=>\u0275\u0275element,_c5:()=>platformCore,_uU:()=>\u0275\u0275text,aQg:()=>KeyValueDiffers,c2e:()=>Console,cJS:()=>\u0275\u0275defineInjector,cg1:()=>findLocaleData,dDg:()=>Testability,dqk:()=>_global,eBb:()=>bypassSanitizationTrustScript,eFA:()=>createPlatformFactory,eJc:()=>isNgModule,ekj:()=>\u0275\u0275classProp,eoX:()=>TestabilityRegistry,evT:()=>\u0275\u0275resolveDocument,f3M:()=>inject2,g9A:()=>PLATFORM_INITIALIZER,h0i:()=>NgModuleRef$1,hGG:()=>ApplicationModule,hij:()=>\u0275\u0275textInterpolate1,iGM:()=>\u0275\u0275queryRefresh,ifc:()=>ViewEncapsulation$1,ip1:()=>APP_INITIALIZER,jDz:()=>\u0275\u0275StandaloneFeature,kL8:()=>getLocalePluralCase,lG2:()=>\u0275\u0275defineDirective,lcZ:()=>\u0275\u0275pipeBind1,lqb:()=>EnvironmentInjector2,lri:()=>TESTABILITY,mCW:()=>_sanitizeUrl,n5z:()=>\u0275\u0275getInheritedFactory,oAB:()=>\u0275\u0275defineNgModule,oJD:()=>\u0275\u0275sanitizeHtml,oxw:()=>\u0275\u0275nextContext,pB0:()=>bypassSanitizationTrustResourceUrl,q3G:()=>SecurityContext,qFp:()=>reflectComponentType,qLn:()=>ErrorHandler,qOj:()=>\u0275\u0275InheritDefinitionFeature,qZA:()=>\u0275\u0275elementEnd,qzn:()=>allowSanitizationBypassAndThrow,rWj:()=>TESTABILITY_GETTER,s9C:()=>\u0275\u0275propertyInterpolate,sBO:()=>ChangeDetectorRef,s_b:()=>ViewContainerRef,soG:()=>LOCALE_ID,tb:()=>APP_BOOTSTRAP_LISTENER2,tp0:()=>SkipSelf,uIk:()=>\u0275\u0275attribute,vHH:()=>RuntimeError,vpe:()=>EventEmitter2,wAp:()=>LocaleDataIndex,xp6:()=>\u0275\u0275advance,z2F:()=>ApplicationRef2,z3N:()=>unwrapSafeValue,zSh:()=>INJECTOR_SCOPE,zs3:()=>Injector2});var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7579),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(727),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9751),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6451),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099);function getClosureSafeProperty(objWithPropertyToExtract){for(let key in objWithPropertyToExtract)if(objWithPropertyToExtract[key]===getClosureSafeProperty)return key;throw Error("Could not find renamed property on target object.")}function fillProperties(target,source){for(const key in source)source.hasOwnProperty(key)&&!target.hasOwnProperty(key)&&(target[key]=source[key])}function stringify(token){if("string"==typeof token)return token;if(Array.isArray(token))return"["+token.map(stringify).join(", ")+"]";if(null==token)return""+token;if(token.overriddenName)return`${token.overriddenName}`;if(token.name)return`${token.name}`;const res=token.toString();if(null==res)return""+res;const newLineIndex=res.indexOf("\n");return-1===newLineIndex?res:res.substring(0,newLineIndex)}function concatStringsWithSpace(before,after){return null==before||""===before?null===after?"":after:null==after||""===after?before:before+" "+after}__name(getClosureSafeProperty,"getClosureSafeProperty"),__name(fillProperties,"fillProperties"),__name(stringify,"stringify"),__name(concatStringsWithSpace,"concatStringsWithSpace");const __forward_ref__=getClosureSafeProperty({__forward_ref__:getClosureSafeProperty});function forwardRef(forwardRefFn){return forwardRefFn.__forward_ref__=forwardRef,forwardRefFn.toString=function(){return stringify(this())},forwardRefFn}function resolveForwardRef(type){return isForwardRef(type)?type():type}function isForwardRef(fn){return"function"==typeof fn&&fn.hasOwnProperty(__forward_ref__)&&fn.__forward_ref__===forwardRef}function isEnvironmentProviders(value){return value&&!!value.\u0275providers}__name(forwardRef,"forwardRef"),__name(resolveForwardRef,"resolveForwardRef"),__name(isForwardRef,"isForwardRef"),__name(isEnvironmentProviders,"isEnvironmentProviders");const XSS_SECURITY_URL="https://g.co/ng/security#xss";class RuntimeError extends Error{constructor(code,message){super(formatRuntimeError(code,message)),this.code=code}}function formatRuntimeError(code,message){return`NG0${Math.abs(code)}${message?": "+message:""}`}function renderStringify(value){return"string"==typeof value?value:null==value?"":String(value)}function stringifyForError(value){return"function"==typeof value?value.name||value.toString():"object"==typeof value&&null!=value&&"function"==typeof value.type?value.type.name||value.type.toString():renderStringify(value)}function throwCyclicDependencyError(token,path){const depPath=path?`. Dependency path: ${path.join(" > ")} > ${token}`:"";throw new RuntimeError(-200,`Circular dependency in DI detected for ${token}${depPath}`)}function throwInvalidProviderError(ngModuleType,providers,provider){if(ngModuleType&&providers){const providerDetail=providers.map(v=>v==provider?"?"+provider+"?":"...");throw new Error(`Invalid provider for the NgModule '${stringify(ngModuleType)}' - only instances of Provider and Type are allowed, got: [${providerDetail.join(", ")}]`)}throw isEnvironmentProviders(provider)?new RuntimeError(207,provider.\u0275fromNgModule?"Invalid providers from 'importProvidersFrom' present in a non-environment injector. 'importProvidersFrom' can't be used for component providers.":"Invalid providers present in a non-environment injector. 'EnvironmentProviders' can't be used for component providers."):new Error("Invalid provider")}function throwProviderNotFoundError(token,injectorName){throw new RuntimeError(-201,!1)}function assertNumber(actual,msg){"number"!=typeof actual&&throwError(msg,typeof actual,"number","===")}function assertString(actual,msg){"string"!=typeof actual&&throwError(msg,null===actual?"null":typeof actual,"string","===")}function assertEqual(actual,expected,msg){actual!=expected&&throwError(msg,actual,expected,"==")}function assertLessThanOrEqual(actual,expected,msg){actual<=expected||throwError(msg,actual,expected,"<=")}function assertGreaterThanOrEqual(actual,expected,msg){actual>=expected||throwError(msg,actual,expected,">=")}function assertDefined(actual,msg){null==actual&&throwError(msg,actual,null,"!=")}function throwError(msg,actual,expected,comparison){throw new Error(`ASSERTION ERROR: ${msg}`+(null==comparison?"":` [Expected=> ${expected} ${comparison} ${actual} <=Actual]`))}function \u0275\u0275defineInjectable(opts){return{token:opts.token,providedIn:opts.providedIn||null,factory:opts.factory,value:void 0}}function \u0275\u0275defineInjector(options){return{providers:options.providers||[],imports:options.imports||[]}}function getInjectableDef(type){return getOwnDefinition(type,NG_PROV_DEF)||getOwnDefinition(type,NG_INJECTABLE_DEF)}function isInjectable(type){return null!==getInjectableDef(type)}function getOwnDefinition(type,field){return type.hasOwnProperty(field)?type[field]:null}function getInheritedInjectableDef(type){return type&&(type[NG_PROV_DEF]||type[NG_INJECTABLE_DEF])||null}function getInjectorDef(type){return type&&(type.hasOwnProperty(NG_INJ_DEF)||type.hasOwnProperty(NG_INJECTOR_DEF))?type[NG_INJ_DEF]:null}__name(RuntimeError,"RuntimeError"),__name(formatRuntimeError,"formatRuntimeError"),__name(renderStringify,"renderStringify"),__name(stringifyForError,"stringifyForError"),__name(throwCyclicDependencyError,"throwCyclicDependencyError"),__name(function throwMixedMultiProviderError(){throw new Error("Cannot mix multi providers and regular providers")},"throwMixedMultiProviderError"),__name(throwInvalidProviderError,"throwInvalidProviderError"),__name(throwProviderNotFoundError,"throwProviderNotFoundError"),__name(assertNumber,"assertNumber"),__name(function assertNumberInRange(actual,minInclusive,maxInclusive){assertNumber(actual,"Expected a number"),assertLessThanOrEqual(actual,maxInclusive,"Expected number to be less than or equal to"),assertGreaterThanOrEqual(actual,minInclusive,"Expected number to be greater than or equal to")},"assertNumberInRange"),__name(assertString,"assertString"),__name(function assertFunction(actual,msg){"function"!=typeof actual&&throwError(msg,null===actual?"null":typeof actual,"function","===")},"assertFunction"),__name(assertEqual,"assertEqual"),__name(function assertNotEqual(actual,expected,msg){actual==expected&&throwError(msg,actual,expected,"!=")},"assertNotEqual"),__name(function assertSame(actual,expected,msg){actual!==expected&&throwError(msg,actual,expected,"===")},"assertSame"),__name(function assertNotSame(actual,expected,msg){actual===expected&&throwError(msg,actual,expected,"!==")},"assertNotSame"),__name(function assertLessThan(actual,expected,msg){actual<expected||throwError(msg,actual,expected,"<")},"assertLessThan"),__name(assertLessThanOrEqual,"assertLessThanOrEqual"),__name(function assertGreaterThan(actual,expected,msg){actual>expected||throwError(msg,actual,expected,">")},"assertGreaterThan"),__name(assertGreaterThanOrEqual,"assertGreaterThanOrEqual"),__name(function assertNotDefined(actual,msg){null!=actual&&throwError(msg,actual,null,"==")},"assertNotDefined"),__name(assertDefined,"assertDefined"),__name(throwError,"throwError"),__name(function assertDomNode(node){node instanceof Node||throwError(`The provided value must be an instance of a DOM Node but got ${stringify(node)}`)},"assertDomNode"),__name(function assertIndexInRange(arr,index){assertDefined(arr,"Array must be defined.");const maxLen=arr.length;(index<0||index>=maxLen)&&throwError(`Index expected to be less than ${maxLen} but got ${index}`)},"assertIndexInRange"),__name(function assertOneOf(value,...validValues){if(-1!==validValues.indexOf(value))return!0;throwError(`Expected value to be one of ${JSON.stringify(validValues)} but was ${JSON.stringify(value)}.`)},"assertOneOf"),__name(\u0275\u0275defineInjectable,"\u0275\u0275defineInjectable"),__name(\u0275\u0275defineInjector,"\u0275\u0275defineInjector"),__name(getInjectableDef,"getInjectableDef"),__name(isInjectable,"isInjectable"),__name(getOwnDefinition,"getOwnDefinition"),__name(getInheritedInjectableDef,"getInheritedInjectableDef"),__name(getInjectorDef,"getInjectorDef");const NG_PROV_DEF=getClosureSafeProperty({\u0275prov:getClosureSafeProperty}),NG_INJ_DEF=getClosureSafeProperty({\u0275inj:getClosureSafeProperty}),NG_INJECTABLE_DEF=getClosureSafeProperty({ngInjectableDef:getClosureSafeProperty}),NG_INJECTOR_DEF=getClosureSafeProperty({ngInjectorDef:getClosureSafeProperty});var InjectFlags=(()=>((InjectFlags=InjectFlags||{})[InjectFlags.Default=0]="Default",InjectFlags[InjectFlags.Host=1]="Host",InjectFlags[InjectFlags.Self=2]="Self",InjectFlags[InjectFlags.SkipSelf=4]="SkipSelf",InjectFlags[InjectFlags.Optional=8]="Optional",InjectFlags))();let _injectImplementation;function getInjectImplementation(){return _injectImplementation}function setInjectImplementation(impl){const previous=_injectImplementation;return _injectImplementation=impl,previous}function injectRootLimpMode(token,notFoundValue,flags){const injectableDef=getInjectableDef(token);return injectableDef&&"root"==injectableDef.providedIn?void 0===injectableDef.value?injectableDef.value=injectableDef.factory():injectableDef.value:flags&InjectFlags.Optional?null:void 0!==notFoundValue?notFoundValue:void throwProviderNotFoundError(stringify(token))}__name(getInjectImplementation,"getInjectImplementation"),__name(setInjectImplementation,"setInjectImplementation"),__name(injectRootLimpMode,"injectRootLimpMode"),__name(function assertInjectImplementationNotEqual(fn){},"assertInjectImplementationNotEqual");const _global=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)();__name(function ngDevModeResetPerfCounters(){const locationString=typeof location<"u"?location.toString():"",newCounters={namedConstructors:-1!=locationString.indexOf("ngDevMode=namedConstructors"),firstCreatePass:0,tNode:0,tView:0,rendererCreateTextNode:0,rendererSetText:0,rendererCreateElement:0,rendererAddEventListener:0,rendererSetAttribute:0,rendererRemoveAttribute:0,rendererSetProperty:0,rendererSetClassName:0,rendererAddClass:0,rendererRemoveClass:0,rendererSetStyle:0,rendererRemoveStyle:0,rendererDestroy:0,rendererDestroyNode:0,rendererMoveNode:0,rendererRemoveNode:0,rendererAppendChild:0,rendererInsertBefore:0,rendererCreateComment:0,hydratedNodes:0,hydratedComponents:0,dehydratedViewsRemoved:0,dehydratedViewsCleanupRuns:0,componentsSkippedHydration:0},allowNgDevModeTrue=-1===locationString.indexOf("ngDevMode=false");return _global.ngDevMode=allowNgDevModeTrue&&newCounters,newCounters},"ngDevModeResetPerfCounters"),__name(function initNgDevMode(){return!1},"initNgDevMode");const THROW_IF_NOT_FOUND={},DI_DECORATOR_FLAG="__NG_DI_FLAG__",NG_TEMP_TOKEN_PATH="ngTempTokenPath",NEW_LINE=/\n/gm,NO_NEW_LINE="\u0275";let _currentInjector;function getCurrentInjector(){return _currentInjector}function setCurrentInjector(injector){const former=_currentInjector;return _currentInjector=injector,former}function injectInjectorOnly(token,flags=InjectFlags.Default){if(void 0===_currentInjector)throw new RuntimeError(-203,!1);return null===_currentInjector?injectRootLimpMode(token,void 0,flags):_currentInjector.get(token,flags&InjectFlags.Optional?null:void 0,flags)}function \u0275\u0275inject2(token,flags=InjectFlags.Default){return(getInjectImplementation()||injectInjectorOnly)(resolveForwardRef(token),flags)}function \u0275\u0275invalidFactoryDep(index){throw new RuntimeError(202,!1)}function inject2(token,flags=InjectFlags.Default){return \u0275\u0275inject2(token,convertToBitFlags(flags))}function convertToBitFlags(flags){return typeof flags>"u"||"number"==typeof flags?flags:0|(flags.optional&&8)|(flags.host&&1)|(flags.self&&2)|(flags.skipSelf&&4)}function injectArgs(types){const args=[];for(let i=0;i<types.length;i++){const arg=resolveForwardRef(types[i]);if(Array.isArray(arg)){if(0===arg.length)throw new RuntimeError(900,!1);let type,flags=InjectFlags.Default;for(let j=0;j<arg.length;j++){const meta=arg[j],flag=getInjectFlag(meta);"number"==typeof flag?-1===flag?type=meta.token:flags|=flag:type=meta}args.push(\u0275\u0275inject2(type,flags))}else args.push(\u0275\u0275inject2(arg))}return args}function attachInjectFlag(decorator,flag){return decorator[DI_DECORATOR_FLAG]=flag,decorator.prototype[DI_DECORATOR_FLAG]=flag,decorator}function getInjectFlag(token){return token[DI_DECORATOR_FLAG]}function catchInjectorError(e,token,injectorErrorName,source){const tokenPath=e[NG_TEMP_TOKEN_PATH];throw token.__source&&tokenPath.unshift(token.__source),e.message=formatError("\n"+e.message,tokenPath,injectorErrorName,source),e.ngTokenPath=tokenPath,e[NG_TEMP_TOKEN_PATH]=null,e}function formatError(text,obj,injectorErrorName,source=null){text=text&&"\n"===text.charAt(0)&&text.charAt(1)==NO_NEW_LINE?text.slice(2):text;let context=stringify(obj);if(Array.isArray(obj))context=obj.map(stringify).join(" -> ");else if("object"==typeof obj){let parts=[];for(let key in obj)if(obj.hasOwnProperty(key)){let value=obj[key];parts.push(key+":"+("string"==typeof value?JSON.stringify(value):stringify(value)))}context=`{${parts.join(", ")}}`}return`${injectorErrorName}${source?"("+source+")":""}[${context}]: ${text.replace(NEW_LINE,"\n  ")}`}function noSideEffects(fn){return{toString:fn}.toString()}__name(getCurrentInjector,"getCurrentInjector"),__name(setCurrentInjector,"setCurrentInjector"),__name(injectInjectorOnly,"injectInjectorOnly"),__name(\u0275\u0275inject2,"\u0275\u0275inject"),__name(\u0275\u0275invalidFactoryDep,"\u0275\u0275invalidFactoryDep"),__name(inject2,"inject"),__name(convertToBitFlags,"convertToBitFlags"),__name(injectArgs,"injectArgs"),__name(attachInjectFlag,"attachInjectFlag"),__name(getInjectFlag,"getInjectFlag"),__name(catchInjectorError,"catchInjectorError"),__name(formatError,"formatError"),__name(noSideEffects,"noSideEffects");var ChangeDetectionStrategy=(()=>((ChangeDetectionStrategy=ChangeDetectionStrategy||{})[ChangeDetectionStrategy.OnPush=0]="OnPush",ChangeDetectionStrategy[ChangeDetectionStrategy.Default=1]="Default",ChangeDetectionStrategy))(),ViewEncapsulation$1=(()=>{return(ViewEncapsulation2=ViewEncapsulation$1||(ViewEncapsulation$1={}))[ViewEncapsulation2.Emulated=0]="Emulated",ViewEncapsulation2[ViewEncapsulation2.None=2]="None",ViewEncapsulation2[ViewEncapsulation2.ShadowDom=3]="ShadowDom",ViewEncapsulation$1;var ViewEncapsulation2})();const EMPTY_OBJ={},EMPTY_ARRAY=[],NG_COMP_DEF=getClosureSafeProperty({\u0275cmp:getClosureSafeProperty}),NG_DIR_DEF=getClosureSafeProperty({\u0275dir:getClosureSafeProperty}),NG_PIPE_DEF=getClosureSafeProperty({\u0275pipe:getClosureSafeProperty}),NG_MOD_DEF=getClosureSafeProperty({\u0275mod:getClosureSafeProperty}),NG_FACTORY_DEF=getClosureSafeProperty({\u0275fac:getClosureSafeProperty}),NG_ELEMENT_ID=getClosureSafeProperty({__NG_ELEMENT_ID__:getClosureSafeProperty}),NG_ENV_ID=getClosureSafeProperty({__NG_ENV_ID__:getClosureSafeProperty});function classIndexOf(className,classToSearch,startingIndex){let end=className.length;for(;;){const foundIndex=className.indexOf(classToSearch,startingIndex);if(-1===foundIndex)return foundIndex;if(0===foundIndex||className.charCodeAt(foundIndex-1)<=32){const length=classToSearch.length;if(foundIndex+length===end||className.charCodeAt(foundIndex+length)<=32)return foundIndex}startingIndex=foundIndex+1}}function setUpAttributes(renderer,native,attrs){let i=0;for(;i<attrs.length;){const value=attrs[i];if("number"==typeof value){if(0!==value)break;i++;const namespaceURI=attrs[i++],attrName=attrs[i++],attrVal=attrs[i++];renderer.setAttribute(native,attrName,attrVal,namespaceURI)}else{const attrName=value,attrVal=attrs[++i];isAnimationProp(attrName)?renderer.setProperty(native,attrName,attrVal):renderer.setAttribute(native,attrName,attrVal),i++}}return i}function isNameOnlyAttributeMarker(marker){return 3===marker||4===marker||6===marker}function isAnimationProp(name){return 64===name.charCodeAt(0)}function mergeHostAttrs(dst,src){if(null!==src&&0!==src.length)if(null===dst||0===dst.length)dst=src.slice();else{let srcMarker=-1;for(let i=0;i<src.length;i++){const item=src[i];"number"==typeof item?srcMarker=item:0===srcMarker||mergeHostAttribute(dst,srcMarker,item,null,-1===srcMarker||2===srcMarker?src[++i]:null)}}return dst}function mergeHostAttribute(dst,marker,key1,key2,value){let i=0,markerInsertPosition=dst.length;if(-1===marker)markerInsertPosition=-1;else for(;i<dst.length;){const dstValue=dst[i++];if("number"==typeof dstValue){if(dstValue===marker){markerInsertPosition=-1;break}if(dstValue>marker){markerInsertPosition=i-1;break}}}for(;i<dst.length;){const item=dst[i];if("number"==typeof item)break;if(item===key1){if(null===key2)return void(null!==value&&(dst[i+1]=value));if(key2===dst[i+1])return void(dst[i+2]=value)}i++,null!==key2&&i++,null!==value&&i++}-1!==markerInsertPosition&&(dst.splice(markerInsertPosition,0,marker),i=markerInsertPosition+1),dst.splice(i++,0,key1),null!==key2&&dst.splice(i++,0,key2),null!==value&&dst.splice(i++,0,value)}__name(classIndexOf,"classIndexOf"),__name(setUpAttributes,"setUpAttributes"),__name(isNameOnlyAttributeMarker,"isNameOnlyAttributeMarker"),__name(isAnimationProp,"isAnimationProp"),__name(mergeHostAttrs,"mergeHostAttrs"),__name(mergeHostAttribute,"mergeHostAttribute");const NG_TEMPLATE_SELECTOR="ng-template";function isCssClassMatching(attrs,cssClassToMatch,isProjectionMode){let i=0,isImplicitAttrsSection=!0;for(;i<attrs.length;){let item=attrs[i++];if("string"==typeof item&&isImplicitAttrsSection){const value=attrs[i++];if(isProjectionMode&&"class"===item&&-1!==classIndexOf(value.toLowerCase(),cssClassToMatch,0))return!0}else{if(1===item){for(;i<attrs.length&&"string"==typeof(item=attrs[i++]);)if(item.toLowerCase()===cssClassToMatch)return!0;return!1}"number"==typeof item&&(isImplicitAttrsSection=!1)}}return!1}function isInlineTemplate(tNode){return 4===tNode.type&&tNode.value!==NG_TEMPLATE_SELECTOR}function hasTagAndTypeMatch(tNode,currentSelector,isProjectionMode){return currentSelector===(4!==tNode.type||isProjectionMode?tNode.value:NG_TEMPLATE_SELECTOR)}function isNodeMatchingSelector(tNode,selector,isProjectionMode){let mode=4;const nodeAttrs=tNode.attrs||[],nameOnlyMarkerIdx=getNameOnlyMarkerIndex(nodeAttrs);let skipToNextSelector=!1;for(let i=0;i<selector.length;i++){const current=selector[i];if("number"!=typeof current){if(!skipToNextSelector)if(4&mode){if(mode=2|1&mode,""!==current&&!hasTagAndTypeMatch(tNode,current,isProjectionMode)||""===current&&1===selector.length){if(isPositive(mode))return!1;skipToNextSelector=!0}}else{const selectorAttrValue=8&mode?current:selector[++i];if(8&mode&&null!==tNode.attrs){if(!isCssClassMatching(tNode.attrs,selectorAttrValue,isProjectionMode)){if(isPositive(mode))return!1;skipToNextSelector=!0}continue}const attrIndexInNode=findAttrIndexInNode(8&mode?"class":current,nodeAttrs,isInlineTemplate(tNode),isProjectionMode);if(-1===attrIndexInNode){if(isPositive(mode))return!1;skipToNextSelector=!0;continue}if(""!==selectorAttrValue){let nodeAttrValue;nodeAttrValue=attrIndexInNode>nameOnlyMarkerIdx?"":nodeAttrs[attrIndexInNode+1].toLowerCase();const compareAgainstClassName=8&mode?nodeAttrValue:null;if(compareAgainstClassName&&-1!==classIndexOf(compareAgainstClassName,selectorAttrValue,0)||2&mode&&selectorAttrValue!==nodeAttrValue){if(isPositive(mode))return!1;skipToNextSelector=!0}}}}else{if(!skipToNextSelector&&!isPositive(mode)&&!isPositive(current))return!1;if(skipToNextSelector&&isPositive(current))continue;skipToNextSelector=!1,mode=current|1&mode}}return isPositive(mode)||skipToNextSelector}function isPositive(mode){return 0==(1&mode)}function findAttrIndexInNode(name,attrs,isInlineTemplate2,isProjectionMode){if(null===attrs)return-1;let i=0;if(isProjectionMode||!isInlineTemplate2){let bindingsMode=!1;for(;i<attrs.length;){const maybeAttrName=attrs[i];if(maybeAttrName===name)return i;if(3===maybeAttrName||6===maybeAttrName)bindingsMode=!0;else{if(1===maybeAttrName||2===maybeAttrName){let value=attrs[++i];for(;"string"==typeof value;)value=attrs[++i];continue}if(4===maybeAttrName)break;if(0===maybeAttrName){i+=4;continue}}i+=bindingsMode?1:2}return-1}return matchTemplateAttribute(attrs,name)}function isNodeMatchingSelectorList(tNode,selector,isProjectionMode=!1){for(let i=0;i<selector.length;i++)if(isNodeMatchingSelector(tNode,selector[i],isProjectionMode))return!0;return!1}function getProjectAsAttrValue(tNode){const nodeAttrs=tNode.attrs;if(null!=nodeAttrs){const ngProjectAsAttrIdx=nodeAttrs.indexOf(5);if(!(1&ngProjectAsAttrIdx))return nodeAttrs[ngProjectAsAttrIdx+1]}return null}function getNameOnlyMarkerIndex(nodeAttrs){for(let i=0;i<nodeAttrs.length;i++)if(isNameOnlyAttributeMarker(nodeAttrs[i]))return i;return nodeAttrs.length}function matchTemplateAttribute(attrs,name){let i=attrs.indexOf(4);if(i>-1)for(i++;i<attrs.length;){const attr=attrs[i];if("number"==typeof attr)return-1;if(attr===name)return i;i++}return-1}function isSelectorInSelectorList(selector,list){selectorListLoop:for(let i=0;i<list.length;i++){const currentSelectorInList=list[i];if(selector.length===currentSelectorInList.length){for(let j=0;j<selector.length;j++)if(selector[j]!==currentSelectorInList[j])continue selectorListLoop;return!0}}return!1}function maybeWrapInNotSelector(isNegativeMode,chunk){return isNegativeMode?":not("+chunk.trim()+")":chunk}function stringifyCSSSelector(selector){let result=selector[0],i=1,mode=2,currentChunk="",isNegativeMode=!1;for(;i<selector.length;){let valueOrMarker=selector[i];if("string"==typeof valueOrMarker)if(2&mode){const attrValue=selector[++i];currentChunk+="["+valueOrMarker+(attrValue.length>0?'="'+attrValue+'"':"")+"]"}else 8&mode?currentChunk+="."+valueOrMarker:4&mode&&(currentChunk+=" "+valueOrMarker);else""!==currentChunk&&!isPositive(valueOrMarker)&&(result+=maybeWrapInNotSelector(isNegativeMode,currentChunk),currentChunk=""),mode=valueOrMarker,isNegativeMode=isNegativeMode||!isPositive(mode);i++}return""!==currentChunk&&(result+=maybeWrapInNotSelector(isNegativeMode,currentChunk)),result}function stringifyCSSSelectorList(selectorList){return selectorList.map(stringifyCSSSelector).join(",")}function extractAttrsAndClassesFromSelector(selector){const attrs=[],classes=[];let i=1,mode=2;for(;i<selector.length;){let valueOrMarker=selector[i];if("string"==typeof valueOrMarker)2===mode?""!==valueOrMarker&&attrs.push(valueOrMarker,selector[++i]):8===mode&&classes.push(valueOrMarker);else{if(!isPositive(mode))break;mode=valueOrMarker}i++}return{attrs,classes}}function \u0275\u0275defineComponent(componentDefinition){return noSideEffects(()=>{const baseDef=getNgDirectiveDef(componentDefinition),def={...baseDef,decls:componentDefinition.decls,vars:componentDefinition.vars,template:componentDefinition.template,consts:componentDefinition.consts||null,ngContentSelectors:componentDefinition.ngContentSelectors,onPush:componentDefinition.changeDetection===ChangeDetectionStrategy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:baseDef.standalone&&componentDefinition.dependencies||null,getStandaloneInjector:null,data:componentDefinition.data||{},encapsulation:componentDefinition.encapsulation||ViewEncapsulation$1.Emulated,styles:componentDefinition.styles||EMPTY_ARRAY,_:null,schemas:componentDefinition.schemas||null,tView:null,id:""};initFeatures(def);const dependencies=componentDefinition.dependencies;return def.directiveDefs=extractDefListOrFactory(dependencies,!1),def.pipeDefs=extractDefListOrFactory(dependencies,!0),def.id=getComponentId(def),def})}function \u0275\u0275setComponentScope(type,directives,pipes){const def=type.\u0275cmp;def.directiveDefs=extractDefListOrFactory(directives,!1),def.pipeDefs=extractDefListOrFactory(pipes,!0)}function extractDirectiveDef(type){return getComponentDef(type)||getDirectiveDef(type)}function nonNull(value){return null!==value}function \u0275\u0275defineNgModule(def){return noSideEffects(()=>({type:def.type,bootstrap:def.bootstrap||EMPTY_ARRAY,declarations:def.declarations||EMPTY_ARRAY,imports:def.imports||EMPTY_ARRAY,exports:def.exports||EMPTY_ARRAY,transitiveCompileScopes:null,schemas:def.schemas||null,id:def.id||null}))}function \u0275\u0275setNgModuleScope(type,scope){return noSideEffects(()=>{const ngModuleDef=getNgModuleDef(type,!0);ngModuleDef.declarations=scope.declarations||EMPTY_ARRAY,ngModuleDef.imports=scope.imports||EMPTY_ARRAY,ngModuleDef.exports=scope.exports||EMPTY_ARRAY})}function invertObject(obj,secondary){if(null==obj)return EMPTY_OBJ;const newLookup={};for(const minifiedKey in obj)if(obj.hasOwnProperty(minifiedKey)){let publicName=obj[minifiedKey],declaredName=publicName;Array.isArray(publicName)&&(declaredName=publicName[1],publicName=publicName[0]),newLookup[publicName]=minifiedKey,secondary&&(secondary[publicName]=declaredName)}return newLookup}function \u0275\u0275defineDirective(directiveDefinition){return noSideEffects(()=>{const def=getNgDirectiveDef(directiveDefinition);return initFeatures(def),def})}function \u0275\u0275definePipe(pipeDef){return{type:pipeDef.type,name:pipeDef.name,factory:null,pure:!1!==pipeDef.pure,standalone:!0===pipeDef.standalone,onDestroy:pipeDef.type.prototype.ngOnDestroy||null}}function getComponentDef(type){return type[NG_COMP_DEF]||null}function getDirectiveDef(type){return type[NG_DIR_DEF]||null}function getPipeDef$1(type){return type[NG_PIPE_DEF]||null}function isStandalone(type){const def=getComponentDef(type)||getDirectiveDef(type)||getPipeDef$1(type);return null!==def&&def.standalone}function getNgModuleDef(type,throwNotFound){const ngModuleDef=type[NG_MOD_DEF]||null;if(!ngModuleDef&&!0===throwNotFound)throw new Error(`Type ${stringify(type)} does not have '\u0275mod' property.`);return ngModuleDef}function getNgDirectiveDef(directiveDefinition){const declaredInputs={};return{type:directiveDefinition.type,providersResolver:null,factory:null,hostBindings:directiveDefinition.hostBindings||null,hostVars:directiveDefinition.hostVars||0,hostAttrs:directiveDefinition.hostAttrs||null,contentQueries:directiveDefinition.contentQueries||null,declaredInputs,exportAs:directiveDefinition.exportAs||null,standalone:!0===directiveDefinition.standalone,selectors:directiveDefinition.selectors||EMPTY_ARRAY,viewQuery:directiveDefinition.viewQuery||null,features:directiveDefinition.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:invertObject(directiveDefinition.inputs,declaredInputs),outputs:invertObject(directiveDefinition.outputs)}}function initFeatures(definition){definition.features?.forEach(fn=>fn(definition))}function extractDefListOrFactory(dependencies,pipeDef){if(!dependencies)return null;const defExtractor=pipeDef?getPipeDef$1:extractDirectiveDef;return()=>("function"==typeof dependencies?dependencies():dependencies).map(dep=>defExtractor(dep)).filter(nonNull)}__name(isCssClassMatching,"isCssClassMatching"),__name(isInlineTemplate,"isInlineTemplate"),__name(hasTagAndTypeMatch,"hasTagAndTypeMatch"),__name(isNodeMatchingSelector,"isNodeMatchingSelector"),__name(isPositive,"isPositive"),__name(findAttrIndexInNode,"findAttrIndexInNode"),__name(isNodeMatchingSelectorList,"isNodeMatchingSelectorList"),__name(getProjectAsAttrValue,"getProjectAsAttrValue"),__name(getNameOnlyMarkerIndex,"getNameOnlyMarkerIndex"),__name(matchTemplateAttribute,"matchTemplateAttribute"),__name(isSelectorInSelectorList,"isSelectorInSelectorList"),__name(maybeWrapInNotSelector,"maybeWrapInNotSelector"),__name(stringifyCSSSelector,"stringifyCSSSelector"),__name(stringifyCSSSelectorList,"stringifyCSSSelectorList"),__name(extractAttrsAndClassesFromSelector,"extractAttrsAndClassesFromSelector"),__name(\u0275\u0275defineComponent,"\u0275\u0275defineComponent"),__name(\u0275\u0275setComponentScope,"\u0275\u0275setComponentScope"),__name(extractDirectiveDef,"extractDirectiveDef"),__name(nonNull,"nonNull"),__name(\u0275\u0275defineNgModule,"\u0275\u0275defineNgModule"),__name(\u0275\u0275setNgModuleScope,"\u0275\u0275setNgModuleScope"),__name(invertObject,"invertObject"),__name(\u0275\u0275defineDirective,"\u0275\u0275defineDirective"),__name(\u0275\u0275definePipe,"\u0275\u0275definePipe"),__name(getComponentDef,"getComponentDef"),__name(getDirectiveDef,"getDirectiveDef"),__name(getPipeDef$1,"getPipeDef$1"),__name(isStandalone,"isStandalone"),__name(getNgModuleDef,"getNgModuleDef"),__name(getNgDirectiveDef,"getNgDirectiveDef"),__name(initFeatures,"initFeatures"),__name(extractDefListOrFactory,"extractDefListOrFactory");const GENERATED_COMP_IDS=new Map;function getComponentId(componentDef){let hash=0;const hashSelectors=[componentDef.selectors,componentDef.ngContentSelectors,componentDef.hostVars,componentDef.hostAttrs,componentDef.consts,componentDef.vars,componentDef.decls,componentDef.encapsulation,componentDef.standalone,componentDef.exportAs,JSON.stringify(componentDef.inputs),JSON.stringify(componentDef.outputs),Object.getOwnPropertyNames(componentDef.type.prototype),!!componentDef.contentQueries,!!componentDef.viewQuery].join("|");for(const char of hashSelectors)hash=Math.imul(31,hash)+char.charCodeAt(0)<<0;return hash+=2147483648,"c"+hash}__name(getComponentId,"getComponentId");const HOST=0,TVIEW=1,FLAGS=2,PARENT=3,NEXT=4,DESCENDANT_VIEWS_TO_REFRESH=5,T_HOST=6,CLEANUP=7,CONTEXT=8,INJECTOR$1=9,ENVIRONMENT=10,RENDERER=11,CHILD_HEAD=12,CHILD_TAIL=13,DECLARATION_VIEW=14,DECLARATION_COMPONENT_VIEW=15,DECLARATION_LCONTAINER=16,PREORDER_HOOK_FLAGS=17,QUERIES=18,ID=19,EMBEDDED_VIEW_INJECTOR=20,ON_DESTROY_HOOKS=21,HYDRATION=22,REACTIVE_TEMPLATE_CONSUMER=23,REACTIVE_HOST_BINDING_CONSUMER=24,HEADER_OFFSET=25,TYPE=1,HAS_TRANSPLANTED_VIEWS=2,NATIVE=7,VIEW_REFS=8,MOVED_VIEWS=9,DEHYDRATED_VIEWS=10,CONTAINER_HEADER_OFFSET=11;function isLView(value){return Array.isArray(value)&&"object"==typeof value[TYPE]}function isLContainer(value){return Array.isArray(value)&&!0===value[TYPE]}function isContentQueryHost(tNode){return 0!=(4&tNode.flags)}function isComponentHost(tNode){return tNode.componentOffset>-1}function isDirectiveHost(tNode){return 1==(1&tNode.flags)}function isComponentDef(def){return!!def.template}function isRootView(target){return 0!=(512&target[FLAGS])}function isProjectionTNode(tNode){return 16==(16&tNode.type)}function assertTNodeForTView(tNode,tView){assertTNode(tNode),tNode.hasOwnProperty("tView_")&&assertEqual(tNode.tView_,tView,"This TNode does not belong to this TView.")}function assertTNode(tNode){assertDefined(tNode,"TNode must be defined"),tNode&&"object"==typeof tNode&&tNode.hasOwnProperty("directiveStylingLast")||throwError("Not of type TNode, got: "+tNode)}function assertIndexInExpandoRange(lView,index){assertBetween(lView[1].expandoStartIndex,lView.length,index)}function assertBetween(lower,upper,index){lower<=index&&index<upper||throwError(`Index out of range (expecting ${lower} <= ${index} < ${upper})`)}function getFactoryDef(type,throwNotFound){return type.hasOwnProperty(NG_FACTORY_DEF)?type[NG_FACTORY_DEF]:null}__name(isLView,"isLView"),__name(isLContainer,"isLContainer"),__name(isContentQueryHost,"isContentQueryHost"),__name(isComponentHost,"isComponentHost"),__name(isDirectiveHost,"isDirectiveHost"),__name(isComponentDef,"isComponentDef"),__name(isRootView,"isRootView"),__name(isProjectionTNode,"isProjectionTNode"),__name(function assertTNodeForLView(tNode,lView){assertTNodeForTView(tNode,lView[TVIEW])},"assertTNodeForLView"),__name(assertTNodeForTView,"assertTNodeForTView"),__name(assertTNode,"assertTNode"),__name(function assertTIcu(tIcu){assertDefined(tIcu,"Expected TIcu to be defined"),"number"!=typeof tIcu.currentCaseLViewIndex&&throwError("Object is not of TIcu type.")},"assertTIcu"),__name(function assertComponentType(actual,msg="Type passed in is not ComponentType, it does not have '\u0275cmp' property."){getComponentDef(actual)||throwError(msg)},"assertComponentType"),__name(function assertNgModuleType(actual,msg="Type passed in is not NgModuleType, it does not have '\u0275mod' property."){getNgModuleDef(actual)||throwError(msg)},"assertNgModuleType"),__name(function assertCurrentTNodeIsParent(isParent){assertEqual(isParent,!0,"currentTNode should be a parent")},"assertCurrentTNodeIsParent"),__name(function assertHasParent(tNode){assertDefined(tNode,"currentTNode should exist!"),assertDefined(tNode.parent,"currentTNode should have a parent")},"assertHasParent"),__name(function assertLContainer(value){assertDefined(value,"LContainer must be defined"),assertEqual(isLContainer(value),!0,"Expecting LContainer")},"assertLContainer"),__name(function assertLViewOrUndefined(value){value&&assertEqual(isLView(value),!0,"Expecting LView or undefined or null")},"assertLViewOrUndefined"),__name(function assertLView(value){assertDefined(value,"LView must be defined"),assertEqual(isLView(value),!0,"Expecting LView")},"assertLView"),__name(function assertFirstCreatePass(tView,errMessage){assertEqual(tView.firstCreatePass,!0,errMessage||"Should only be called in first create pass.")},"assertFirstCreatePass"),__name(function assertFirstUpdatePass(tView,errMessage){assertEqual(tView.firstUpdatePass,!0,errMessage||"Should only be called in first update pass.")},"assertFirstUpdatePass"),__name(function assertDirectiveDef(obj){(void 0===obj.type||null==obj.selectors||void 0===obj.inputs)&&throwError("Expected a DirectiveDef/ComponentDef and this object does not seem to have the expected shape.")},"assertDirectiveDef"),__name(function assertIndexInDeclRange(lView,index){assertBetween(HEADER_OFFSET,lView[1].bindingStartIndex,index)},"assertIndexInDeclRange"),__name(assertIndexInExpandoRange,"assertIndexInExpandoRange"),__name(assertBetween,"assertBetween"),__name(function assertProjectionSlots(lView,errMessage){assertDefined(lView[DECLARATION_COMPONENT_VIEW],"Component views should exist."),assertDefined(lView[DECLARATION_COMPONENT_VIEW][T_HOST].projection,errMessage||"Components with projection nodes (<ng-content>) must have projection slots defined.")},"assertProjectionSlots"),__name(function assertParentView(lView,errMessage){assertDefined(lView,errMessage||"Component views should always have a parent view (component's host view)")},"assertParentView"),__name(function assertNodeInjector(lView,injectorIndex){assertIndexInExpandoRange(lView,injectorIndex),assertIndexInExpandoRange(lView,injectorIndex+8),assertNumber(lView[injectorIndex+0],"injectorIndex should point to a bloom filter"),assertNumber(lView[injectorIndex+1],"injectorIndex should point to a bloom filter"),assertNumber(lView[injectorIndex+2],"injectorIndex should point to a bloom filter"),assertNumber(lView[injectorIndex+3],"injectorIndex should point to a bloom filter"),assertNumber(lView[injectorIndex+4],"injectorIndex should point to a bloom filter"),assertNumber(lView[injectorIndex+5],"injectorIndex should point to a bloom filter"),assertNumber(lView[injectorIndex+6],"injectorIndex should point to a bloom filter"),assertNumber(lView[injectorIndex+7],"injectorIndex should point to a bloom filter"),assertNumber(lView[injectorIndex+8],"injectorIndex should point to parent injector")},"assertNodeInjector"),__name(getFactoryDef,"getFactoryDef");function createSignalFromFunction(node,fn,extraApi={}){return fn.null=node,Object.assign(fn,extraApi)}function defaultEquals(a,b){return(null===a||"object"!=typeof a)&&Object.is(a,b)}__name(function isSignal(value){return"function"==typeof value&&void 0!==value.null},"isSignal"),__name(createSignalFromFunction,"createSignalFromFunction"),__name(defaultEquals,"defaultEquals");class LeakyRef{constructor(ref){this.ref=ref}deref(){return this.ref}}__name(LeakyRef,"LeakyRef");let WeakRefImpl=_global.WeakRef??LeakyRef;function newWeakRef(value){return new WeakRefImpl(value)}__name(newWeakRef,"newWeakRef"),__name(function setAlternateWeakRefImpl(impl){},"setAlternateWeakRefImpl");let _nextReactiveId=0,activeConsumer=null,inNotificationPhase=!1;function setActiveConsumer(consumer){const prev=activeConsumer;return activeConsumer=consumer,prev}__name(setActiveConsumer,"setActiveConsumer");class ReactiveNode{constructor(){this.id=_nextReactiveId++,this.ref=newWeakRef(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[producerId,edge]of this.producers){const producer=edge.producerNode.deref();if(void 0!==producer&&edge.atTrackingVersion===this.trackingVersion){if(producer.producerPollStatus(edge.seenValueVersion))return!0}else this.producers.delete(producerId),producer?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const prev=inNotificationPhase;inNotificationPhase=!0;try{for(const[consumerId,edge]of this.consumers){const consumer=edge.consumerNode.deref();void 0!==consumer&&consumer.trackingVersion===edge.atTrackingVersion?consumer.onConsumerDependencyMayHaveChanged():(this.consumers.delete(consumerId),consumer?.producers.delete(this.id))}}finally{inNotificationPhase=prev}}producerAccessed(){if(inNotificationPhase)throw new Error("");if(null===activeConsumer)return;let edge=activeConsumer.producers.get(this.id);void 0===edge?(edge={consumerNode:activeConsumer.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:activeConsumer.trackingVersion},activeConsumer.producers.set(this.id,edge),this.consumers.set(activeConsumer.id,edge)):(edge.seenValueVersion=this.valueVersion,edge.atTrackingVersion=activeConsumer.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==activeConsumer?.consumerAllowSignalWrites}producerPollStatus(lastSeenValueVersion){return this.valueVersion!==lastSeenValueVersion||(this.onProducerUpdateValueVersion(),this.valueVersion!==lastSeenValueVersion)}}__name(ReactiveNode,"ReactiveNode"),__name(function computed(computation,options){const node=new ComputedImpl(computation,options?.equal??defaultEquals);return createSignalFromFunction(node,node.signal.bind(node))},"computed");class ComputedImpl extends(null){constructor(computation,equal){super(),this.computation=computation,this.equal=equal,this.value=null,this.error=null,this.stale=!0,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){this.stale||(this.stale=!0,this.producerMayHaveChanged())}onProducerUpdateValueVersion(){if(this.stale){if(null!==this.value&&null!==this.value&&!this.consumerPollProducersForChange())return void(this.stale=!1);this.recomputeValue()}}recomputeValue(){if(null===this.value)throw new Error("Detected cycle in computations.");const oldValue=this.value;this.value=null,this.trackingVersion++;const prevConsumer=setActiveConsumer(this);let newValue;try{newValue=this.computation()}catch(err){newValue=null,this.error=err}finally{setActiveConsumer(prevConsumer)}this.stale=!1,null!==oldValue&&null!==oldValue&&null!==newValue&&this.equal(oldValue,newValue)?this.value=oldValue:(this.value=newValue,this.valueVersion++)}signal(){if(this.onProducerUpdateValueVersion(),this.producerAccessed(),null===this.value)throw this.error;return this.value}}__name(ComputedImpl,"ComputedImpl"),__name(function defaultThrowError(){throw new Error},"defaultThrowError");let throwInvalidWriteToSignalErrorFn=null;function throwInvalidWriteToSignalError(){throwInvalidWriteToSignalErrorFn()}function setThrowInvalidWriteToSignalError(fn){throwInvalidWriteToSignalErrorFn=fn}__name(throwInvalidWriteToSignalError,"throwInvalidWriteToSignalError"),__name(setThrowInvalidWriteToSignalError,"setThrowInvalidWriteToSignalError");let postSignalSetFn=null;class WritableSignalImpl extends(null){constructor(value,equal){super(),this.value=value,this.equal=equal,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){}onProducerUpdateValueVersion(){}set(newValue){this.producerUpdatesAllowed||throwInvalidWriteToSignalError(),this.equal(this.value,newValue)||(this.value=newValue,this.valueVersion++,this.producerMayHaveChanged(),postSignalSetFn?.())}update(updater){this.producerUpdatesAllowed||throwInvalidWriteToSignalError(),this.set(updater(this.value))}mutate(mutator){this.producerUpdatesAllowed||throwInvalidWriteToSignalError(),mutator(this.value),this.valueVersion++,this.producerMayHaveChanged(),postSignalSetFn?.()}asReadonly(){return void 0===this.readonlySignal&&(this.readonlySignal=createSignalFromFunction(this,()=>this.signal())),this.readonlySignal}signal(){return this.producerAccessed(),this.value}}__name(WritableSignalImpl,"WritableSignalImpl"),__name(function signal(initialValue,options){const signalNode=new WritableSignalImpl(initialValue,options?.equal??defaultEquals);return createSignalFromFunction(signalNode,signalNode.signal.bind(signalNode),{set:signalNode.set.bind(signalNode),update:signalNode.update.bind(signalNode),mutate:signalNode.mutate.bind(signalNode),asReadonly:signalNode.asReadonly.bind(signalNode)})},"signal"),__name(function setPostSignalSetFn(fn){const prev=postSignalSetFn;return postSignalSetFn=fn,prev},"setPostSignalSetFn"),__name(function untracked(nonReactiveReadsFn){const prevConsumer=setActiveConsumer(null);try{return nonReactiveReadsFn()}finally{setActiveConsumer(prevConsumer)}},"untracked");const NOOP_CLEANUP_FN=__name(()=>{},"NOOP_CLEANUP_FN");class Watch extends ReactiveNode{constructor(watch,schedule,allowSignalWrites){super(),this.watch=watch,this.schedule=schedule,this.dirty=!1,this.cleanupFn=NOOP_CLEANUP_FN,this.registerOnCleanup=cleanupFn=>{this.cleanupFn=cleanupFn},this.consumerAllowSignalWrites=allowSignalWrites}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const prevConsumer=setActiveConsumer(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=NOOP_CLEANUP_FN,this.watch(this.registerOnCleanup)}finally{setActiveConsumer(prevConsumer)}}cleanup(){this.cleanupFn()}}__name(Watch,"Watch");class SimpleChange{constructor(previousValue,currentValue,firstChange){this.previousValue=previousValue,this.currentValue=currentValue,this.firstChange=firstChange}isFirstChange(){return this.firstChange}}function \u0275\u0275NgOnChangesFeature(){return NgOnChangesFeatureImpl}function NgOnChangesFeatureImpl(definition){return definition.type.prototype.ngOnChanges&&(definition.setInput=ngOnChangesSetInput),rememberChangeHistoryAndInvokeOnChangesHook}function rememberChangeHistoryAndInvokeOnChangesHook(){const simpleChangesStore=getSimpleChangesStore(this),current=simpleChangesStore?.current;if(current){const previous=simpleChangesStore.previous;if(previous===EMPTY_OBJ)simpleChangesStore.previous=current;else for(let key in current)previous[key]=current[key];simpleChangesStore.current=null,this.ngOnChanges(current)}}function ngOnChangesSetInput(instance,value,publicName,privateName){const declaredName=this.declaredInputs[publicName],simpleChangesStore=getSimpleChangesStore(instance)||setSimpleChangesStore(instance,{previous:EMPTY_OBJ,current:null}),current=simpleChangesStore.current||(simpleChangesStore.current={}),previous=simpleChangesStore.previous,previousChange=previous[declaredName];current[declaredName]=new SimpleChange(previousChange&&previousChange.currentValue,value,previous===EMPTY_OBJ),instance[privateName]=value}__name(SimpleChange,"SimpleChange"),__name(\u0275\u0275NgOnChangesFeature,"\u0275\u0275NgOnChangesFeature"),__name(NgOnChangesFeatureImpl,"NgOnChangesFeatureImpl"),\u0275\u0275NgOnChangesFeature.ngInherit=!0,__name(rememberChangeHistoryAndInvokeOnChangesHook,"rememberChangeHistoryAndInvokeOnChangesHook"),__name(ngOnChangesSetInput,"ngOnChangesSetInput");const SIMPLE_CHANGES_STORE="__ngSimpleChanges__";function getSimpleChangesStore(instance){return instance[SIMPLE_CHANGES_STORE]||null}function setSimpleChangesStore(instance,store2){return instance[SIMPLE_CHANGES_STORE]=store2}__name(getSimpleChangesStore,"getSimpleChangesStore"),__name(setSimpleChangesStore,"setSimpleChangesStore");let profilerCallback=null;const setProfiler=__name(profiler2=>{profilerCallback=profiler2},"setProfiler"),profiler=__name(function(event,instance,hookOrListener){profilerCallback?.(event,instance,hookOrListener)},"profiler"),SVG_NAMESPACE="svg",MATH_ML_NAMESPACE="math";function unwrapRNode(value){for(;Array.isArray(value);)value=value[HOST];return value}function unwrapLView(value){for(;Array.isArray(value);){if("object"==typeof value[TYPE])return value;value=value[HOST]}return null}function getNativeByIndex(index,lView){return unwrapRNode(lView[index])}function getNativeByTNode(tNode,lView){return unwrapRNode(lView[tNode.index])}function getNativeByTNodeOrNull(tNode,lView){const index=null===tNode?-1:tNode.index;return-1!==index?unwrapRNode(lView[index]):null}function getTNode(tView,index){return tView.data[index]}function load(view,index){return view[index]}function getComponentLViewByIndex(nodeIndex,hostView){const slotValue=hostView[nodeIndex];return isLView(slotValue)?slotValue:slotValue[HOST]}function isCreationMode(view){return 4==(4&view[FLAGS])}function viewAttachedToChangeDetector(view){return 128==(128&view[FLAGS])}function viewAttachedToContainer(view){return isLContainer(view[PARENT])}function getConstant(consts,index){return null==index?null:consts[index]}function resetPreOrderHookFlags(lView){lView[PREORDER_HOOK_FLAGS]=0}function markViewForRefresh(lView){1024&lView[FLAGS]||(lView[FLAGS]|=1024,updateViewsToRefresh(lView,1))}function clearViewRefreshFlag(lView){1024&lView[FLAGS]&&(lView[FLAGS]&=-1025,updateViewsToRefresh(lView,-1))}function updateViewsToRefresh(lView,amount){let parent=lView[PARENT];if(null===parent)return;parent[DESCENDANT_VIEWS_TO_REFRESH]+=amount;let viewOrContainer=parent;for(parent=parent[PARENT];null!==parent&&(1===amount&&1===viewOrContainer[DESCENDANT_VIEWS_TO_REFRESH]||-1===amount&&0===viewOrContainer[DESCENDANT_VIEWS_TO_REFRESH]);)parent[DESCENDANT_VIEWS_TO_REFRESH]+=amount,viewOrContainer=parent,parent=parent[PARENT]}function storeLViewOnDestroy(lView,onDestroyCallback){if(256==(256&lView[FLAGS]))throw new RuntimeError(911,!1);null===lView[ON_DESTROY_HOOKS]&&(lView[ON_DESTROY_HOOKS]=[]),lView[ON_DESTROY_HOOKS].push(onDestroyCallback)}function removeLViewOnDestroy(lView,onDestroyCallback){if(null===lView[ON_DESTROY_HOOKS])return;const destroyCBIdx=lView[ON_DESTROY_HOOKS].indexOf(onDestroyCallback);-1!==destroyCBIdx&&lView[ON_DESTROY_HOOKS].splice(destroyCBIdx,1)}__name(unwrapRNode,"unwrapRNode"),__name(unwrapLView,"unwrapLView"),__name(getNativeByIndex,"getNativeByIndex"),__name(getNativeByTNode,"getNativeByTNode"),__name(getNativeByTNodeOrNull,"getNativeByTNodeOrNull"),__name(getTNode,"getTNode"),__name(load,"load"),__name(getComponentLViewByIndex,"getComponentLViewByIndex"),__name(isCreationMode,"isCreationMode"),__name(viewAttachedToChangeDetector,"viewAttachedToChangeDetector"),__name(viewAttachedToContainer,"viewAttachedToContainer"),__name(getConstant,"getConstant"),__name(resetPreOrderHookFlags,"resetPreOrderHookFlags"),__name(markViewForRefresh,"markViewForRefresh"),__name(clearViewRefreshFlag,"clearViewRefreshFlag"),__name(updateViewsToRefresh,"updateViewsToRefresh"),__name(storeLViewOnDestroy,"storeLViewOnDestroy"),__name(removeLViewOnDestroy,"removeLViewOnDestroy");const instructionState={lFrame:createLFrame(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let _isInCheckNoChangesMode=!1;function getElementDepthCount(){return instructionState.lFrame.elementDepthCount}function increaseElementDepthCount(){instructionState.lFrame.elementDepthCount++}function decreaseElementDepthCount(){instructionState.lFrame.elementDepthCount--}function getBindingsEnabled(){return instructionState.bindingsEnabled}function isInSkipHydrationBlock$1(){return null!==instructionState.skipHydrationRootTNode}function isSkipHydrationRootTNode(tNode){return instructionState.skipHydrationRootTNode===tNode}function \u0275\u0275enableBindings(){instructionState.bindingsEnabled=!0}function enterSkipHydrationBlock(tNode){instructionState.skipHydrationRootTNode=tNode}function \u0275\u0275disableBindings(){instructionState.bindingsEnabled=!1}function leaveSkipHydrationBlock(){instructionState.skipHydrationRootTNode=null}function getLView(){return instructionState.lFrame.lView}function getTView(){return instructionState.lFrame.tView}function \u0275\u0275restoreView(viewToRestore){return instructionState.lFrame.contextLView=viewToRestore,viewToRestore[CONTEXT]}function \u0275\u0275resetView(value){return instructionState.lFrame.contextLView=null,value}function getCurrentTNode(){let currentTNode=getCurrentTNodePlaceholderOk();for(;null!==currentTNode&&64===currentTNode.type;)currentTNode=currentTNode.parent;return currentTNode}function getCurrentTNodePlaceholderOk(){return instructionState.lFrame.currentTNode}function getCurrentParentTNode(){const lFrame=instructionState.lFrame,currentTNode=lFrame.currentTNode;return lFrame.isParent?currentTNode:currentTNode.parent}function setCurrentTNode(tNode,isParent){const lFrame=instructionState.lFrame;lFrame.currentTNode=tNode,lFrame.isParent=isParent}function isCurrentTNodeParent(){return instructionState.lFrame.isParent}function setCurrentTNodeAsNotParent(){instructionState.lFrame.isParent=!1}function getContextLView(){return instructionState.lFrame.contextLView}function setIsInCheckNoChangesMode(mode){throwError("Must never be called in production mode"),_isInCheckNoChangesMode=mode}function getBindingRoot(){const lFrame=instructionState.lFrame;let index=lFrame.bindingRootIndex;return-1===index&&(index=lFrame.bindingRootIndex=lFrame.tView.bindingStartIndex),index}function getBindingIndex(){return instructionState.lFrame.bindingIndex}function setBindingIndex(value){return instructionState.lFrame.bindingIndex=value}function nextBindingIndex(){return instructionState.lFrame.bindingIndex++}function incrementBindingIndex(count){const lFrame=instructionState.lFrame,index=lFrame.bindingIndex;return lFrame.bindingIndex=lFrame.bindingIndex+count,index}function isInI18nBlock(){return instructionState.lFrame.inI18n}function setInI18nBlock(isInI18nBlock2){instructionState.lFrame.inI18n=isInI18nBlock2}function setBindingRootForHostBindings(bindingRootIndex,currentDirectiveIndex){const lFrame=instructionState.lFrame;lFrame.bindingIndex=lFrame.bindingRootIndex=bindingRootIndex,setCurrentDirectiveIndex(currentDirectiveIndex)}function getCurrentDirectiveIndex(){return instructionState.lFrame.currentDirectiveIndex}function setCurrentDirectiveIndex(currentDirectiveIndex){instructionState.lFrame.currentDirectiveIndex=currentDirectiveIndex}function getCurrentDirectiveDef(tData){const currentDirectiveIndex=instructionState.lFrame.currentDirectiveIndex;return-1===currentDirectiveIndex?null:tData[currentDirectiveIndex]}function getCurrentQueryIndex(){return instructionState.lFrame.currentQueryIndex}function setCurrentQueryIndex(value){instructionState.lFrame.currentQueryIndex=value}function getDeclarationTNode(lView){const tView=lView[TVIEW];return 2===tView.type?tView.declTNode:1===tView.type?lView[T_HOST]:null}function enterDI(lView,tNode,flags){if(flags&InjectFlags.SkipSelf){let parentTNode=tNode,parentLView=lView;for(;!(parentTNode=parentTNode.parent,null!==parentTNode||flags&InjectFlags.Host||(parentTNode=getDeclarationTNode(parentLView),null===parentTNode||(parentLView=parentLView[DECLARATION_VIEW],10&parentTNode.type))););if(null===parentTNode)return!1;tNode=parentTNode,lView=parentLView}const lFrame=instructionState.lFrame=allocLFrame();return lFrame.currentTNode=tNode,lFrame.lView=lView,!0}function enterView(newView){const newLFrame=allocLFrame(),tView=newView[TVIEW];instructionState.lFrame=newLFrame,newLFrame.currentTNode=tView.firstChild,newLFrame.lView=newView,newLFrame.tView=tView,newLFrame.contextLView=newView,newLFrame.bindingIndex=tView.bindingStartIndex,newLFrame.inI18n=!1}function allocLFrame(){const currentLFrame=instructionState.lFrame,childLFrame=null===currentLFrame?null:currentLFrame.child;return null===childLFrame?createLFrame(currentLFrame):childLFrame}function createLFrame(parent){const lFrame={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent,child:null,inI18n:!1};return null!==parent&&(parent.child=lFrame),lFrame}function leaveViewLight(){const oldLFrame=instructionState.lFrame;return instructionState.lFrame=oldLFrame.parent,oldLFrame.currentTNode=null,oldLFrame.lView=null,oldLFrame}__name(function specOnlyIsInstructionStateEmpty(){return null===instructionState.lFrame.parent},"specOnlyIsInstructionStateEmpty"),__name(getElementDepthCount,"getElementDepthCount"),__name(increaseElementDepthCount,"increaseElementDepthCount"),__name(decreaseElementDepthCount,"decreaseElementDepthCount"),__name(getBindingsEnabled,"getBindingsEnabled"),__name(isInSkipHydrationBlock$1,"isInSkipHydrationBlock$1"),__name(isSkipHydrationRootTNode,"isSkipHydrationRootTNode"),__name(\u0275\u0275enableBindings,"\u0275\u0275enableBindings"),__name(enterSkipHydrationBlock,"enterSkipHydrationBlock"),__name(\u0275\u0275disableBindings,"\u0275\u0275disableBindings"),__name(leaveSkipHydrationBlock,"leaveSkipHydrationBlock"),__name(getLView,"getLView"),__name(getTView,"getTView"),__name(\u0275\u0275restoreView,"\u0275\u0275restoreView"),__name(\u0275\u0275resetView,"\u0275\u0275resetView"),__name(getCurrentTNode,"getCurrentTNode"),__name(getCurrentTNodePlaceholderOk,"getCurrentTNodePlaceholderOk"),__name(getCurrentParentTNode,"getCurrentParentTNode"),__name(setCurrentTNode,"setCurrentTNode"),__name(isCurrentTNodeParent,"isCurrentTNodeParent"),__name(setCurrentTNodeAsNotParent,"setCurrentTNodeAsNotParent"),__name(getContextLView,"getContextLView"),__name(function isInCheckNoChangesMode(){return throwError("Must never be called in production mode"),_isInCheckNoChangesMode},"isInCheckNoChangesMode"),__name(setIsInCheckNoChangesMode,"setIsInCheckNoChangesMode"),__name(getBindingRoot,"getBindingRoot"),__name(getBindingIndex,"getBindingIndex"),__name(setBindingIndex,"setBindingIndex"),__name(nextBindingIndex,"nextBindingIndex"),__name(incrementBindingIndex,"incrementBindingIndex"),__name(isInI18nBlock,"isInI18nBlock"),__name(setInI18nBlock,"setInI18nBlock"),__name(setBindingRootForHostBindings,"setBindingRootForHostBindings"),__name(getCurrentDirectiveIndex,"getCurrentDirectiveIndex"),__name(setCurrentDirectiveIndex,"setCurrentDirectiveIndex"),__name(getCurrentDirectiveDef,"getCurrentDirectiveDef"),__name(getCurrentQueryIndex,"getCurrentQueryIndex"),__name(setCurrentQueryIndex,"setCurrentQueryIndex"),__name(getDeclarationTNode,"getDeclarationTNode"),__name(enterDI,"enterDI"),__name(enterView,"enterView"),__name(allocLFrame,"allocLFrame"),__name(createLFrame,"createLFrame"),__name(leaveViewLight,"leaveViewLight");const leaveDI=leaveViewLight;function leaveView(){const oldLFrame=leaveViewLight();oldLFrame.isParent=!0,oldLFrame.tView=null,oldLFrame.selectedIndex=-1,oldLFrame.contextLView=null,oldLFrame.elementDepthCount=0,oldLFrame.currentDirectiveIndex=-1,oldLFrame.currentNamespace=null,oldLFrame.bindingRootIndex=-1,oldLFrame.bindingIndex=-1,oldLFrame.currentQueryIndex=0}function nextContextImpl(level){return(instructionState.lFrame.contextLView=walkUpViews(level,instructionState.lFrame.contextLView))[CONTEXT]}function walkUpViews(nestingLevel,currentView){for(;nestingLevel>0;)currentView=currentView[DECLARATION_VIEW],nestingLevel--;return currentView}function getSelectedIndex(){return instructionState.lFrame.selectedIndex}function setSelectedIndex(index){instructionState.lFrame.selectedIndex=index}function getSelectedTNode(){const lFrame=instructionState.lFrame;return getTNode(lFrame.tView,lFrame.selectedIndex)}function \u0275\u0275namespaceSVG(){instructionState.lFrame.currentNamespace=SVG_NAMESPACE}function \u0275\u0275namespaceMathML(){instructionState.lFrame.currentNamespace=MATH_ML_NAMESPACE}function \u0275\u0275namespaceHTML(){namespaceHTMLInternal()}function namespaceHTMLInternal(){instructionState.lFrame.currentNamespace=null}function getNamespace$1(){return instructionState.lFrame.currentNamespace}__name(leaveView,"leaveView"),__name(nextContextImpl,"nextContextImpl"),__name(walkUpViews,"walkUpViews"),__name(getSelectedIndex,"getSelectedIndex"),__name(setSelectedIndex,"setSelectedIndex"),__name(getSelectedTNode,"getSelectedTNode"),__name(\u0275\u0275namespaceSVG,"\u0275\u0275namespaceSVG"),__name(\u0275\u0275namespaceMathML,"\u0275\u0275namespaceMathML"),__name(\u0275\u0275namespaceHTML,"\u0275\u0275namespaceHTML"),__name(namespaceHTMLInternal,"namespaceHTMLInternal"),__name(getNamespace$1,"getNamespace$1");let _wasLastNodeCreated=!0;function wasLastNodeCreated(){return _wasLastNodeCreated}function lastNodeWasCreated(flag){_wasLastNodeCreated=flag}function registerPreOrderHooks(directiveIndex,directiveDef,tView){const{ngOnChanges,ngOnInit,ngDoCheck}=directiveDef.type.prototype;if(ngOnChanges){const wrappedOnChanges=NgOnChangesFeatureImpl(directiveDef);(tView.preOrderHooks??=[]).push(directiveIndex,wrappedOnChanges),(tView.preOrderCheckHooks??=[]).push(directiveIndex,wrappedOnChanges)}ngOnInit&&(tView.preOrderHooks??=[]).push(0-directiveIndex,ngOnInit),ngDoCheck&&((tView.preOrderHooks??=[]).push(directiveIndex,ngDoCheck),(tView.preOrderCheckHooks??=[]).push(directiveIndex,ngDoCheck))}function registerPostOrderHooks(tView,tNode){for(let i=tNode.directiveStart,end=tNode.directiveEnd;i<end;i++){const lifecycleHooks=tView.data[i].type.prototype,{ngAfterContentInit,ngAfterContentChecked,ngAfterViewInit,ngAfterViewChecked,ngOnDestroy}=lifecycleHooks;ngAfterContentInit&&(tView.contentHooks??=[]).push(-i,ngAfterContentInit),ngAfterContentChecked&&((tView.contentHooks??=[]).push(i,ngAfterContentChecked),(tView.contentCheckHooks??=[]).push(i,ngAfterContentChecked)),ngAfterViewInit&&(tView.viewHooks??=[]).push(-i,ngAfterViewInit),ngAfterViewChecked&&((tView.viewHooks??=[]).push(i,ngAfterViewChecked),(tView.viewCheckHooks??=[]).push(i,ngAfterViewChecked)),null!=ngOnDestroy&&(tView.destroyHooks??=[]).push(i,ngOnDestroy)}}function executeCheckHooks(lView,hooks,nodeIndex){callHooks(lView,hooks,3,nodeIndex)}function executeInitAndCheckHooks(lView,hooks,initPhase,nodeIndex){(3&lView[FLAGS])===initPhase&&callHooks(lView,hooks,initPhase,nodeIndex)}function incrementInitPhaseFlags(lView,initPhase){let flags=lView[FLAGS];(3&flags)===initPhase&&(flags&=4095,flags+=1,lView[FLAGS]=flags)}function callHooks(currentView,arr,initPhase,currentNodeIndex){const nodeIndexLimit=currentNodeIndex??-1,max=arr.length-1;let lastNodeIndexFound=0;for(let i=void 0!==currentNodeIndex?65535&currentView[PREORDER_HOOK_FLAGS]:0;i<max;i++)if("number"==typeof arr[i+1]){if(lastNodeIndexFound=arr[i],null!=currentNodeIndex&&lastNodeIndexFound>=currentNodeIndex)break}else arr[i]<0&&(currentView[PREORDER_HOOK_FLAGS]+=65536),(lastNodeIndexFound<nodeIndexLimit||-1==nodeIndexLimit)&&(callHook(currentView,initPhase,arr,i),currentView[PREORDER_HOOK_FLAGS]=(4294901760&currentView[PREORDER_HOOK_FLAGS])+i+2),i++}function callHookInternal(directive,hook){profiler(4,directive,hook);const prevConsumer=setActiveConsumer(null);try{hook.call(directive)}finally{setActiveConsumer(prevConsumer),profiler(5,directive,hook)}}function callHook(currentView,initPhase,arr,i){const isInitHook=arr[i]<0,hook=arr[i+1],directive=currentView[isInitHook?-arr[i]:arr[i]];isInitHook?currentView[FLAGS]>>12<currentView[PREORDER_HOOK_FLAGS]>>16&&(3&currentView[FLAGS])===initPhase&&(currentView[FLAGS]+=4096,callHookInternal(directive,hook)):callHookInternal(directive,hook)}__name(wasLastNodeCreated,"wasLastNodeCreated"),__name(lastNodeWasCreated,"lastNodeWasCreated"),__name(registerPreOrderHooks,"registerPreOrderHooks"),__name(registerPostOrderHooks,"registerPostOrderHooks"),__name(executeCheckHooks,"executeCheckHooks"),__name(executeInitAndCheckHooks,"executeInitAndCheckHooks"),__name(incrementInitPhaseFlags,"incrementInitPhaseFlags"),__name(callHooks,"callHooks"),__name(callHookInternal,"callHookInternal"),__name(callHook,"callHook");const NO_PARENT_INJECTOR=-1;class NodeInjectorFactory{constructor(factory,isViewProvider,injectImplementation){this.factory=factory,this.resolving=!1,this.canSeeViewProviders=isViewProvider,this.injectImpl=injectImplementation}}function isFactory(obj){return obj instanceof NodeInjectorFactory}function toTNodeTypeAsString(tNodeType){let text="";return 1&tNodeType&&(text+="|Text"),2&tNodeType&&(text+="|Element"),4&tNodeType&&(text+="|Container"),8&tNodeType&&(text+="|ElementContainer"),16&tNodeType&&(text+="|Projection"),32&tNodeType&&(text+="|IcuContainer"),64&tNodeType&&(text+="|Placeholder"),text.length>0?text.substring(1):text}function hasClassInput(tNode){return 0!=(8&tNode.flags)}function hasStyleInput(tNode){return 0!=(16&tNode.flags)}function hasParentInjector(parentLocation){return parentLocation!==NO_PARENT_INJECTOR}function getParentInjectorIndex(parentLocation){return 32767&parentLocation}function getParentInjectorViewOffset(parentLocation){return parentLocation>>16}function getParentInjectorView(location2,startView){let viewOffset=getParentInjectorViewOffset(location2),parentView=startView;for(;viewOffset>0;)parentView=parentView[DECLARATION_VIEW],viewOffset--;return parentView}__name(NodeInjectorFactory,"NodeInjectorFactory"),__name(isFactory,"isFactory"),__name(toTNodeTypeAsString,"toTNodeTypeAsString"),__name(hasClassInput,"hasClassInput"),__name(hasStyleInput,"hasStyleInput"),__name(function assertTNodeType(tNode,expectedTypes,message){assertDefined(tNode,"should be called with a TNode"),tNode.type&expectedTypes||throwError(message||`Expected [${toTNodeTypeAsString(expectedTypes)}] but got ${toTNodeTypeAsString(tNode.type)}.`)},"assertTNodeType"),__name(function assertPureTNodeType(type){2===type||1===type||4===type||8===type||32===type||16===type||64===type||throwError(`Expected TNodeType to have only a single type selected, but got ${toTNodeTypeAsString(type)}.`)},"assertPureTNodeType"),__name(hasParentInjector,"hasParentInjector"),__name(getParentInjectorIndex,"getParentInjectorIndex"),__name(getParentInjectorViewOffset,"getParentInjectorViewOffset"),__name(getParentInjectorView,"getParentInjectorView");let includeViewProviders=!0;function setIncludeViewProviders(v){const oldValue=includeViewProviders;return includeViewProviders=v,oldValue}__name(setIncludeViewProviders,"setIncludeViewProviders");const BLOOM_MASK=255,BLOOM_BUCKET_BITS=5;let nextNgElementId=0;const NOT_FOUND={};function bloomAdd(injectorIndex,tView,type){let id;"string"==typeof type?id=type.charCodeAt(0)||0:type.hasOwnProperty(NG_ELEMENT_ID)&&(id=type[NG_ELEMENT_ID]),null==id&&(id=type[NG_ELEMENT_ID]=nextNgElementId++);const bloomHash=id&BLOOM_MASK;tView.data[injectorIndex+(bloomHash>>BLOOM_BUCKET_BITS)]|=1<<bloomHash}function getOrCreateNodeInjectorForNode(tNode,lView){const existingInjectorIndex=getInjectorIndex(tNode,lView);if(-1!==existingInjectorIndex)return existingInjectorIndex;const tView=lView[TVIEW];tView.firstCreatePass&&(tNode.injectorIndex=lView.length,insertBloom(tView.data,tNode),insertBloom(lView,null),insertBloom(tView.blueprint,null));const parentLoc=getParentInjectorLocation(tNode,lView),injectorIndex=tNode.injectorIndex;if(hasParentInjector(parentLoc)){const parentIndex=getParentInjectorIndex(parentLoc),parentLView=getParentInjectorView(parentLoc,lView),parentData=parentLView[TVIEW].data;for(let i=0;i<8;i++)lView[injectorIndex+i]=parentLView[parentIndex+i]|parentData[parentIndex+i]}return lView[injectorIndex+8]=parentLoc,injectorIndex}function insertBloom(arr,footer){arr.push(0,0,0,0,0,0,0,0,footer)}function getInjectorIndex(tNode,lView){return-1===tNode.injectorIndex||tNode.parent&&tNode.parent.injectorIndex===tNode.injectorIndex||null===lView[tNode.injectorIndex+8]?-1:tNode.injectorIndex}function getParentInjectorLocation(tNode,lView){if(tNode.parent&&-1!==tNode.parent.injectorIndex)return tNode.parent.injectorIndex;let declarationViewOffset=0,parentTNode=null,lViewCursor=lView;for(;null!==lViewCursor;){if(parentTNode=getTNodeFromLView(lViewCursor),null===parentTNode)return NO_PARENT_INJECTOR;if(declarationViewOffset++,lViewCursor=lViewCursor[DECLARATION_VIEW],-1!==parentTNode.injectorIndex)return parentTNode.injectorIndex|declarationViewOffset<<16}return NO_PARENT_INJECTOR}function diPublicInInjector(injectorIndex,tView,token){bloomAdd(injectorIndex,tView,token)}function injectAttributeImpl(tNode,attrNameToInject){if("class"===attrNameToInject)return tNode.classes;if("style"===attrNameToInject)return tNode.styles;const attrs=tNode.attrs;if(attrs){const attrsLength=attrs.length;let i=0;for(;i<attrsLength;){const value=attrs[i];if(isNameOnlyAttributeMarker(value))break;if(0===value)i+=2;else if("number"==typeof value)for(i++;i<attrsLength&&"string"==typeof attrs[i];)i++;else{if(value===attrNameToInject)return attrs[i+1];i+=2}}}return null}function notFoundValueOrThrow(notFoundValue,token,flags){if(flags&InjectFlags.Optional||void 0!==notFoundValue)return notFoundValue;throwProviderNotFoundError()}function lookupTokenUsingModuleInjector(lView,token,flags,notFoundValue){if(flags&InjectFlags.Optional&&void 0===notFoundValue&&(notFoundValue=null),!(flags&(InjectFlags.Self|InjectFlags.Host))){const moduleInjector=lView[INJECTOR$1],previousInjectImplementation=setInjectImplementation(void 0);try{return moduleInjector?moduleInjector.get(token,notFoundValue,flags&InjectFlags.Optional):injectRootLimpMode(token,notFoundValue,flags&InjectFlags.Optional)}finally{setInjectImplementation(previousInjectImplementation)}}return notFoundValueOrThrow(notFoundValue,0,flags)}function getOrCreateInjectable(tNode,lView,token,flags=InjectFlags.Default,notFoundValue){if(null!==tNode){if(2048&lView[FLAGS]&&!(flags&InjectFlags.Self)){const embeddedInjectorValue=lookupTokenUsingEmbeddedInjector(tNode,lView,token,flags,NOT_FOUND);if(embeddedInjectorValue!==NOT_FOUND)return embeddedInjectorValue}const value=lookupTokenUsingNodeInjector(tNode,lView,token,flags,NOT_FOUND);if(value!==NOT_FOUND)return value}return lookupTokenUsingModuleInjector(lView,token,flags,notFoundValue)}function lookupTokenUsingNodeInjector(tNode,lView,token,flags,notFoundValue){const bloomHash=bloomHashBitOrFactory(token);if("function"==typeof bloomHash){if(!enterDI(lView,tNode,flags))return flags&InjectFlags.Host?notFoundValueOrThrow(notFoundValue,0,flags):lookupTokenUsingModuleInjector(lView,token,flags,notFoundValue);try{const value=bloomHash(flags);if(null!=value||flags&InjectFlags.Optional)return value;throwProviderNotFoundError()}finally{leaveDI()}}else if("number"==typeof bloomHash){let previousTView=null,injectorIndex=getInjectorIndex(tNode,lView),parentLocation=NO_PARENT_INJECTOR,hostTElementNode=flags&InjectFlags.Host?lView[DECLARATION_COMPONENT_VIEW][T_HOST]:null;for((-1===injectorIndex||flags&InjectFlags.SkipSelf)&&(parentLocation=-1===injectorIndex?getParentInjectorLocation(tNode,lView):lView[injectorIndex+8],parentLocation!==NO_PARENT_INJECTOR&&shouldSearchParent(flags,!1)?(previousTView=lView[TVIEW],injectorIndex=getParentInjectorIndex(parentLocation),lView=getParentInjectorView(parentLocation,lView)):injectorIndex=-1);-1!==injectorIndex;){const tView=lView[TVIEW];if(bloomHasToken(bloomHash,injectorIndex,tView.data)){const instance=searchTokensOnInjector(injectorIndex,lView,token,previousTView,flags,hostTElementNode);if(instance!==NOT_FOUND)return instance}parentLocation=lView[injectorIndex+8],parentLocation!==NO_PARENT_INJECTOR&&shouldSearchParent(flags,lView[TVIEW].data[injectorIndex+8]===hostTElementNode)&&bloomHasToken(bloomHash,injectorIndex,lView)?(previousTView=tView,injectorIndex=getParentInjectorIndex(parentLocation),lView=getParentInjectorView(parentLocation,lView)):injectorIndex=-1}}return notFoundValue}function searchTokensOnInjector(injectorIndex,lView,token,previousTView,flags,hostTElementNode){const currentTView=lView[TVIEW],tNode=currentTView.data[injectorIndex+8],injectableIdx=locateDirectiveOrProvider(tNode,currentTView,token,null==previousTView?isComponentHost(tNode)&&includeViewProviders:previousTView!=currentTView&&0!=(3&tNode.type),flags&InjectFlags.Host&&hostTElementNode===tNode);return null!==injectableIdx?getNodeInjectable(lView,currentTView,injectableIdx,tNode):NOT_FOUND}function locateDirectiveOrProvider(tNode,tView,token,canAccessViewProviders,isHostSpecialCase){const nodeProviderIndexes=tNode.providerIndexes,tInjectables=tView.data,injectablesStart=1048575&nodeProviderIndexes,directivesStart=tNode.directiveStart,cptViewProvidersCount=nodeProviderIndexes>>20,endIndex=isHostSpecialCase?injectablesStart+cptViewProvidersCount:tNode.directiveEnd;for(let i=canAccessViewProviders?injectablesStart:injectablesStart+cptViewProvidersCount;i<endIndex;i++){const providerTokenOrDef=tInjectables[i];if(i<directivesStart&&token===providerTokenOrDef||i>=directivesStart&&providerTokenOrDef.type===token)return i}if(isHostSpecialCase){const dirDef=tInjectables[directivesStart];if(dirDef&&isComponentDef(dirDef)&&dirDef.type===token)return directivesStart}return null}function getNodeInjectable(lView,tView,index,tNode){let value=lView[index];const tData=tView.data;if(isFactory(value)){const factory=value;factory.resolving&&throwCyclicDependencyError(stringifyForError(tData[index]));const previousIncludeViewProviders=setIncludeViewProviders(factory.canSeeViewProviders);factory.resolving=!0;const previousInjectImplementation=factory.injectImpl?setInjectImplementation(factory.injectImpl):null;enterDI(lView,tNode,InjectFlags.Default);try{value=lView[index]=factory.factory(void 0,tData,lView,tNode),tView.firstCreatePass&&index>=tNode.directiveStart&&registerPreOrderHooks(index,tData[index],tView)}finally{null!==previousInjectImplementation&&setInjectImplementation(previousInjectImplementation),setIncludeViewProviders(previousIncludeViewProviders),factory.resolving=!1,leaveDI()}}return value}function bloomHashBitOrFactory(token){if("string"==typeof token)return token.charCodeAt(0)||0;const tokenId=token.hasOwnProperty(NG_ELEMENT_ID)?token[NG_ELEMENT_ID]:void 0;return"number"==typeof tokenId?tokenId>=0?tokenId&BLOOM_MASK:createNodeInjector:tokenId}function bloomHasToken(bloomHash,injectorIndex,injectorView){return!!(injectorView[injectorIndex+(bloomHash>>BLOOM_BUCKET_BITS)]&1<<bloomHash)}function shouldSearchParent(flags,isFirstHostTNode){return!(flags&InjectFlags.Self||flags&InjectFlags.Host&&isFirstHostTNode)}__name(bloomAdd,"bloomAdd"),__name(getOrCreateNodeInjectorForNode,"getOrCreateNodeInjectorForNode"),__name(insertBloom,"insertBloom"),__name(getInjectorIndex,"getInjectorIndex"),__name(getParentInjectorLocation,"getParentInjectorLocation"),__name(diPublicInInjector,"diPublicInInjector"),__name(injectAttributeImpl,"injectAttributeImpl"),__name(notFoundValueOrThrow,"notFoundValueOrThrow"),__name(lookupTokenUsingModuleInjector,"lookupTokenUsingModuleInjector"),__name(getOrCreateInjectable,"getOrCreateInjectable"),__name(lookupTokenUsingNodeInjector,"lookupTokenUsingNodeInjector"),__name(searchTokensOnInjector,"searchTokensOnInjector"),__name(locateDirectiveOrProvider,"locateDirectiveOrProvider"),__name(getNodeInjectable,"getNodeInjectable"),__name(bloomHashBitOrFactory,"bloomHashBitOrFactory"),__name(bloomHasToken,"bloomHasToken"),__name(shouldSearchParent,"shouldSearchParent");class NodeInjector{constructor(_tNode,_lView){this._tNode=_tNode,this._lView=_lView}get(token,notFoundValue,flags){return getOrCreateInjectable(this._tNode,this._lView,token,convertToBitFlags(flags),notFoundValue)}}function createNodeInjector(){return new NodeInjector(getCurrentTNode(),getLView())}function \u0275\u0275getInheritedFactory(type){return noSideEffects(()=>{const ownConstructor=type.prototype.constructor,ownFactory=ownConstructor[NG_FACTORY_DEF]||getFactoryOf(ownConstructor),objectPrototype=Object.prototype;let parent=Object.getPrototypeOf(type.prototype).constructor;for(;parent&&parent!==objectPrototype;){const factory=parent[NG_FACTORY_DEF]||getFactoryOf(parent);if(factory&&factory!==ownFactory)return factory;parent=Object.getPrototypeOf(parent)}return t=>new t})}function getFactoryOf(type){return isForwardRef(type)?()=>{const factory=getFactoryOf(resolveForwardRef(type));return factory&&factory()}:getFactoryDef(type)}function lookupTokenUsingEmbeddedInjector(tNode,lView,token,flags,notFoundValue){let currentTNode=tNode,currentLView=lView;for(;null!==currentTNode&&null!==currentLView&&2048&currentLView[FLAGS]&&!(512&currentLView[FLAGS]);){const nodeInjectorValue=lookupTokenUsingNodeInjector(currentTNode,currentLView,token,flags|InjectFlags.Self,NOT_FOUND);if(nodeInjectorValue!==NOT_FOUND)return nodeInjectorValue;let parentTNode=currentTNode.parent;if(!parentTNode){const embeddedViewInjector=currentLView[EMBEDDED_VIEW_INJECTOR];if(embeddedViewInjector){const embeddedViewInjectorValue=embeddedViewInjector.get(token,NOT_FOUND,flags);if(embeddedViewInjectorValue!==NOT_FOUND)return embeddedViewInjectorValue}parentTNode=getTNodeFromLView(currentLView),currentLView=currentLView[DECLARATION_VIEW]}currentTNode=parentTNode}return notFoundValue}function getTNodeFromLView(lView){const tView=lView[TVIEW],tViewType=tView.type;return 2===tViewType?tView.declTNode:1===tViewType?lView[T_HOST]:null}function \u0275\u0275injectAttribute(attrNameToInject){return injectAttributeImpl(getCurrentTNode(),attrNameToInject)}__name(NodeInjector,"NodeInjector"),__name(createNodeInjector,"createNodeInjector"),__name(\u0275\u0275getInheritedFactory,"\u0275\u0275getInheritedFactory"),__name(getFactoryOf,"getFactoryOf"),__name(lookupTokenUsingEmbeddedInjector,"lookupTokenUsingEmbeddedInjector"),__name(getTNodeFromLView,"getTNodeFromLView"),__name(\u0275\u0275injectAttribute,"\u0275\u0275injectAttribute");const ANNOTATIONS="__annotations__",PARAMETERS="__parameters__",PROP_METADATA="__prop__metadata__";function makeMetadataCtor(props){return __name(function(...args){if(props){const values=props(...args);for(const propName in values)this[propName]=values[propName]}},"ctor")}function makeParamDecorator(name,props,parentClass){return noSideEffects(()=>{const metaCtor=makeMetadataCtor(props);function ParamDecoratorFactory(...args){if(this instanceof ParamDecoratorFactory)return metaCtor.apply(this,args),this;const annotationInstance=new ParamDecoratorFactory(...args);return ParamDecorator.annotation=annotationInstance,ParamDecorator;function ParamDecorator(cls,unusedKey,index){const parameters=cls.hasOwnProperty(PARAMETERS)?cls[PARAMETERS]:Object.defineProperty(cls,PARAMETERS,{value:[]})[PARAMETERS];for(;parameters.length<=index;)parameters.push(null);return(parameters[index]=parameters[index]||[]).push(annotationInstance),cls}}return __name(ParamDecoratorFactory,"ParamDecoratorFactory"),parentClass&&(ParamDecoratorFactory.prototype=Object.create(parentClass.prototype)),ParamDecoratorFactory.prototype.ngMetadataName=name,ParamDecoratorFactory.annotationCls=ParamDecoratorFactory,ParamDecoratorFactory})}__name(function makeDecorator(name,props,parentClass,additionalProcessing,typeFn){return noSideEffects(()=>{const metaCtor=makeMetadataCtor(props);function DecoratorFactory(...args){if(this instanceof DecoratorFactory)return metaCtor.call(this,...args),this;const annotationInstance=new DecoratorFactory(...args);return __name(function(cls){return typeFn&&typeFn(cls,...args),(cls.hasOwnProperty(ANNOTATIONS)?cls[ANNOTATIONS]:Object.defineProperty(cls,ANNOTATIONS,{value:[]})[ANNOTATIONS]).push(annotationInstance),additionalProcessing&&additionalProcessing(cls),cls},"TypeDecorator")}return __name(DecoratorFactory,"DecoratorFactory"),parentClass&&(DecoratorFactory.prototype=Object.create(parentClass.prototype)),DecoratorFactory.prototype.ngMetadataName=name,DecoratorFactory.annotationCls=DecoratorFactory,DecoratorFactory})},"makeDecorator"),__name(makeMetadataCtor,"makeMetadataCtor"),__name(makeParamDecorator,"makeParamDecorator"),__name(function makePropDecorator(name,props,parentClass,additionalProcessing){return noSideEffects(()=>{const metaCtor=makeMetadataCtor(props);function PropDecoratorFactory(...args){if(this instanceof PropDecoratorFactory)return metaCtor.apply(this,args),this;const decoratorInstance=new PropDecoratorFactory(...args);function PropDecorator(target,name2){if(void 0===target)throw new Error("Standard Angular field decorators are not supported in JIT mode.");const constructor=target.constructor,meta=constructor.hasOwnProperty(PROP_METADATA)?constructor[PROP_METADATA]:Object.defineProperty(constructor,PROP_METADATA,{value:{}})[PROP_METADATA];meta[name2]=meta.hasOwnProperty(name2)&&meta[name2]||[],meta[name2].unshift(decoratorInstance),additionalProcessing&&additionalProcessing(target,name2,...args)}return __name(PropDecorator,"PropDecorator"),PropDecorator}return __name(PropDecoratorFactory,"PropDecoratorFactory"),parentClass&&(PropDecoratorFactory.prototype=Object.create(parentClass.prototype)),PropDecoratorFactory.prototype.ngMetadataName=name,PropDecoratorFactory.annotationCls=PropDecoratorFactory,PropDecoratorFactory})},"makePropDecorator");const Attribute=makeParamDecorator("Attribute",attributeName=>({attributeName,__NG_ELEMENT_ID__:()=>\u0275\u0275injectAttribute(attributeName)}));__name(class Query{},"Query");function getCompilerFacade(request){const globalNg=_global.ng;if(globalNg&&globalNg.\u0275compilerFacade)return globalNg.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}__name(getCompilerFacade,"getCompilerFacade");const Type=Function;function isType(v){return"function"==typeof v}function arrayEquals(a,b,identityAccessor){if(a.length!==b.length)return!1;for(let i=0;i<a.length;i++){let valueA=a[i],valueB=b[i];if(identityAccessor&&(valueA=identityAccessor(valueA),valueB=identityAccessor(valueB)),valueB!==valueA)return!1}return!0}function flatten(list){return list.flat(Number.POSITIVE_INFINITY)}function deepForEach(input,fn){input.forEach(value=>Array.isArray(value)?deepForEach(value,fn):fn(value))}function addToArray(arr,index,value){index>=arr.length?arr.push(value):arr.splice(index,0,value)}function removeFromArray(arr,index){return index>=arr.length-1?arr.pop():arr.splice(index,1)[0]}function newArray(size,value){const list=[];for(let i=0;i<size;i++)list.push(value);return list}function arraySplice(array,index,count){const length=array.length-count;for(;index<length;)array[index]=array[index+count],index++;for(;count--;)array.pop()}function arrayInsert2(array,index,value1,value2){let end=array.length;if(end==index)array.push(value1,value2);else if(1===end)array.push(value2,array[0]),array[0]=value1;else{for(end--,array.push(array[end-1],array[end]);end>index;)array[end]=array[end-2],end--;array[index]=value1,array[index+1]=value2}}function keyValueArraySet(keyValueArray,key,value){let index=keyValueArrayIndexOf(keyValueArray,key);return index>=0?keyValueArray[1|index]=value:(index=~index,arrayInsert2(keyValueArray,index,key,value)),index}function keyValueArrayGet(keyValueArray,key){const index=keyValueArrayIndexOf(keyValueArray,key);if(index>=0)return keyValueArray[1|index]}function keyValueArrayIndexOf(keyValueArray,key){return _arrayIndexOfSorted(keyValueArray,key,1)}function _arrayIndexOfSorted(array,value,shift){let start=0,end=array.length>>shift;for(;end!==start;){const middle=start+(end-start>>1),current=array[middle<<shift];if(value===current)return middle<<shift;current>value?end=middle:start=middle+1}return~(end<<shift)}__name(isType,"isType"),__name(arrayEquals,"arrayEquals"),__name(flatten,"flatten"),__name(deepForEach,"deepForEach"),__name(addToArray,"addToArray"),__name(removeFromArray,"removeFromArray"),__name(newArray,"newArray"),__name(arraySplice,"arraySplice"),__name(function arrayInsert(array,index,value){let end=array.length;for(;end>index;){const previousEnd=end-1;array[end]=array[previousEnd],end=previousEnd}array[index]=value},"arrayInsert"),__name(arrayInsert2,"arrayInsert2"),__name(function arrayIndexOfSorted(array,value){return _arrayIndexOfSorted(array,value,0)},"arrayIndexOfSorted"),__name(keyValueArraySet,"keyValueArraySet"),__name(keyValueArrayGet,"keyValueArrayGet"),__name(keyValueArrayIndexOf,"keyValueArrayIndexOf"),__name(function keyValueArrayDelete(keyValueArray,key){const index=keyValueArrayIndexOf(keyValueArray,key);return index>=0&&arraySplice(keyValueArray,index,2),index},"keyValueArrayDelete"),__name(_arrayIndexOfSorted,"_arrayIndexOfSorted");const ES5_DELEGATE_CTOR=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,ES2015_INHERITED_CLASS=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,ES2015_INHERITED_CLASS_WITH_CTOR=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,ES2015_INHERITED_CLASS_WITH_DELEGATE_CTOR=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;function isDelegateCtor(typeStr){return ES5_DELEGATE_CTOR.test(typeStr)||ES2015_INHERITED_CLASS_WITH_DELEGATE_CTOR.test(typeStr)||ES2015_INHERITED_CLASS.test(typeStr)&&!ES2015_INHERITED_CLASS_WITH_CTOR.test(typeStr)}__name(isDelegateCtor,"isDelegateCtor");class ReflectionCapabilities{constructor(reflect){this._reflect=reflect||_global.Reflect}factory(t){return(...args)=>new t(...args)}_zipTypesAndAnnotations(paramTypes,paramAnnotations){let result;result=newArray(typeof paramTypes>"u"?paramAnnotations.length:paramTypes.length);for(let i=0;i<result.length;i++)result[i]=typeof paramTypes>"u"?[]:paramTypes[i]&&paramTypes[i]!=Object?[paramTypes[i]]:[],paramAnnotations&&null!=paramAnnotations[i]&&(result[i]=result[i].concat(paramAnnotations[i]));return result}_ownParameters(type,parentCtor){if(isDelegateCtor(type.toString()))return null;if(type.parameters&&type.parameters!==parentCtor.parameters)return type.parameters;const tsickleCtorParams=type.ctorParameters;if(tsickleCtorParams&&tsickleCtorParams!==parentCtor.ctorParameters){const ctorParameters="function"==typeof tsickleCtorParams?tsickleCtorParams():tsickleCtorParams,paramTypes2=ctorParameters.map(ctorParam=>ctorParam&&ctorParam.type),paramAnnotations2=ctorParameters.map(ctorParam=>ctorParam&&convertTsickleDecoratorIntoMetadata(ctorParam.decorators));return this._zipTypesAndAnnotations(paramTypes2,paramAnnotations2)}const paramAnnotations=type.hasOwnProperty(PARAMETERS)&&type[PARAMETERS],paramTypes=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",type);return paramTypes||paramAnnotations?this._zipTypesAndAnnotations(paramTypes,paramAnnotations):newArray(type.length)}parameters(type){if(!isType(type))return[];const parentCtor=getParentCtor(type);let parameters=this._ownParameters(type,parentCtor);return!parameters&&parentCtor!==Object&&(parameters=this.parameters(parentCtor)),parameters||[]}_ownAnnotations(typeOrFunc,parentCtor){if(typeOrFunc.annotations&&typeOrFunc.annotations!==parentCtor.annotations){let annotations=typeOrFunc.annotations;return"function"==typeof annotations&&annotations.annotations&&(annotations=annotations.annotations),annotations}return typeOrFunc.decorators&&typeOrFunc.decorators!==parentCtor.decorators?convertTsickleDecoratorIntoMetadata(typeOrFunc.decorators):typeOrFunc.hasOwnProperty(ANNOTATIONS)?typeOrFunc[ANNOTATIONS]:null}annotations(typeOrFunc){if(!isType(typeOrFunc))return[];const parentCtor=getParentCtor(typeOrFunc),ownAnnotations=this._ownAnnotations(typeOrFunc,parentCtor)||[];return(parentCtor!==Object?this.annotations(parentCtor):[]).concat(ownAnnotations)}_ownPropMetadata(typeOrFunc,parentCtor){if(typeOrFunc.propMetadata&&typeOrFunc.propMetadata!==parentCtor.propMetadata){let propMetadata=typeOrFunc.propMetadata;return"function"==typeof propMetadata&&propMetadata.propMetadata&&(propMetadata=propMetadata.propMetadata),propMetadata}if(typeOrFunc.propDecorators&&typeOrFunc.propDecorators!==parentCtor.propDecorators){const propDecorators=typeOrFunc.propDecorators,propMetadata={};return Object.keys(propDecorators).forEach(prop=>{propMetadata[prop]=convertTsickleDecoratorIntoMetadata(propDecorators[prop])}),propMetadata}return typeOrFunc.hasOwnProperty(PROP_METADATA)?typeOrFunc[PROP_METADATA]:null}propMetadata(typeOrFunc){if(!isType(typeOrFunc))return{};const parentCtor=getParentCtor(typeOrFunc),propMetadata={};if(parentCtor!==Object){const parentPropMetadata=this.propMetadata(parentCtor);Object.keys(parentPropMetadata).forEach(propName=>{propMetadata[propName]=parentPropMetadata[propName]})}const ownPropMetadata=this._ownPropMetadata(typeOrFunc,parentCtor);return ownPropMetadata&&Object.keys(ownPropMetadata).forEach(propName=>{const decorators=[];propMetadata.hasOwnProperty(propName)&&decorators.push(...propMetadata[propName]),decorators.push(...ownPropMetadata[propName]),propMetadata[propName]=decorators}),propMetadata}ownPropMetadata(typeOrFunc){return isType(typeOrFunc)&&this._ownPropMetadata(typeOrFunc,getParentCtor(typeOrFunc))||{}}hasLifecycleHook(type,lcProperty){return type instanceof Type&&lcProperty in type.prototype}}function convertTsickleDecoratorIntoMetadata(decoratorInvocations){return decoratorInvocations?decoratorInvocations.map(decoratorInvocation=>new(0,decoratorInvocation.type.annotationCls)(...decoratorInvocation.args?decoratorInvocation.args:[])):[]}function getParentCtor(ctor){const parentProto=ctor.prototype?Object.getPrototypeOf(ctor.prototype):null;return(parentProto?parentProto.constructor:null)||Object}__name(ReflectionCapabilities,"ReflectionCapabilities"),__name(convertTsickleDecoratorIntoMetadata,"convertTsickleDecoratorIntoMetadata"),__name(getParentCtor,"getParentCtor");const Inject=attachInjectFlag(makeParamDecorator("Inject",token=>({token})),-1),Optional2=attachInjectFlag(makeParamDecorator("Optional"),8),Self=attachInjectFlag(makeParamDecorator("Self"),2),SkipSelf=attachInjectFlag(makeParamDecorator("SkipSelf"),4),Host=attachInjectFlag(makeParamDecorator("Host"),1);let _reflect=null;function getReflect(){return _reflect=_reflect||new ReflectionCapabilities}function reflectDependencies(type){return convertDependencies(getReflect().parameters(type))}function convertDependencies(deps){return deps.map(dep=>reflectDependency(dep))}function reflectDependency(dep){const meta={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(dep)&&dep.length>0)for(let j=0;j<dep.length;j++){const param=dep[j];if(void 0===param)continue;const proto=Object.getPrototypeOf(param);if(param instanceof Optional2||"Optional"===proto.ngMetadataName)meta.optional=!0;else if(param instanceof SkipSelf||"SkipSelf"===proto.ngMetadataName)meta.skipSelf=!0;else if(param instanceof Self||"Self"===proto.ngMetadataName)meta.self=!0;else if(param instanceof Host||"Host"===proto.ngMetadataName)meta.host=!0;else if(param instanceof Inject)meta.token=param.token;else if(param instanceof Attribute){if(void 0===param.attributeName)throw new RuntimeError(204,!1);meta.attribute=param.attributeName}else meta.token=param}else meta.token=void 0===dep||Array.isArray(dep)&&0===dep.length?null:dep;return meta}__name(getReflect,"getReflect"),__name(reflectDependencies,"reflectDependencies"),__name(convertDependencies,"convertDependencies"),__name(reflectDependency,"reflectDependency"),__name(function resolveComponentResources(resourceResolver){const componentResolved=[],urlMap=new Map;function cachedResourceResolve(url){let promise2=urlMap.get(url);if(!promise2){const resp=resourceResolver(url);urlMap.set(url,promise2=resp.then(unwrapResponse))}return promise2}return __name(cachedResourceResolve,"cachedResourceResolve"),componentResourceResolutionQueue.forEach((component,type)=>{const promises=[];component.templateUrl&&promises.push(cachedResourceResolve(component.templateUrl).then(template=>{component.template=template}));const styleUrls=component.styleUrls,styles=component.styles||(component.styles=[]),styleOffset=component.styles.length;styleUrls&&styleUrls.forEach((styleUrl,index)=>{styles.push(""),promises.push(cachedResourceResolve(styleUrl).then(style=>{styles[styleOffset+index]=style,styleUrls.splice(styleUrls.indexOf(styleUrl),1),0==styleUrls.length&&(component.styleUrls=void 0)}))});const fullyResolved=Promise.all(promises).then(()=>componentDefResolved(type));componentResolved.push(fullyResolved)}),clearResolutionOfComponentResourcesQueue(),Promise.all(componentResolved).then(()=>{})},"resolveComponentResources");let componentResourceResolutionQueue=new Map;const componentDefPendingResolution=new Set;function maybeQueueResolutionOfComponentResources(type,metadata){componentNeedsResolution(metadata)&&(componentResourceResolutionQueue.set(type,metadata),componentDefPendingResolution.add(type))}function componentNeedsResolution(component){return!!(component.templateUrl&&!component.hasOwnProperty("template")||component.styleUrls&&component.styleUrls.length)}function clearResolutionOfComponentResourcesQueue(){const old=componentResourceResolutionQueue;return componentResourceResolutionQueue=new Map,old}function unwrapResponse(response){return"string"==typeof response?response:response.text()}function componentDefResolved(type){componentDefPendingResolution.delete(type)}__name(maybeQueueResolutionOfComponentResources,"maybeQueueResolutionOfComponentResources"),__name(function isComponentDefPendingResolution(type){return componentDefPendingResolution.has(type)},"isComponentDefPendingResolution"),__name(componentNeedsResolution,"componentNeedsResolution"),__name(clearResolutionOfComponentResourcesQueue,"clearResolutionOfComponentResourcesQueue"),__name(function restoreComponentResolutionQueue(queue){componentDefPendingResolution.clear(),queue.forEach((_,type)=>componentDefPendingResolution.add(type)),componentResourceResolutionQueue=queue},"restoreComponentResolutionQueue"),__name(function isComponentResourceResolutionQueueEmpty(){return 0===componentResourceResolutionQueue.size},"isComponentResourceResolutionQueueEmpty"),__name(unwrapResponse,"unwrapResponse"),__name(componentDefResolved,"componentDefResolved");const modules=new Map;let checkForDuplicateNgModules=!0;function assertSameOrNotExisting(id,type,incoming){if(type&&type!==incoming&&checkForDuplicateNgModules)throw new Error(`Duplicate module registered for ${id} - ${stringify(type)} vs ${stringify(type.name)}`)}function registerNgModuleType(ngModuleType,id){assertSameOrNotExisting(id,modules.get(id)||null,ngModuleType),modules.set(id,ngModuleType)}function getRegisteredNgModuleType(id){return modules.get(id)}__name(assertSameOrNotExisting,"assertSameOrNotExisting"),__name(registerNgModuleType,"registerNgModuleType"),__name(function clearModulesForTest(){modules.clear()},"clearModulesForTest"),__name(getRegisteredNgModuleType,"getRegisteredNgModuleType"),__name(function setAllowDuplicateNgModuleIdsForTest(allowDuplicates){checkForDuplicateNgModules=!allowDuplicates},"setAllowDuplicateNgModuleIdsForTest");const CUSTOM_ELEMENTS_SCHEMA={name:"custom-elements"},NO_ERRORS_SCHEMA={name:"no-errors-schema"};let shouldThrowErrorOnUnknownElement=!1;__name(function \u0275setUnknownElementStrictMode(shouldThrow){shouldThrowErrorOnUnknownElement=shouldThrow},"\u0275setUnknownElementStrictMode"),__name(function \u0275getUnknownElementStrictMode(){return shouldThrowErrorOnUnknownElement},"\u0275getUnknownElementStrictMode");let shouldThrowErrorOnUnknownProperty=!1;function reportUnknownPropertyError(message){if(shouldThrowErrorOnUnknownProperty)throw new RuntimeError(303,message);console.error(formatRuntimeError(303,message))}function getDeclarationComponentDef(lView){throwError("Must never be called in production mode");const context=lView[DECLARATION_COMPONENT_VIEW][CONTEXT];return context&&context.constructor?getComponentDef(context.constructor):null}function isHostComponentStandalone(lView){return throwError("Must never be called in production mode"),!!getDeclarationComponentDef(lView)?.standalone}function getTemplateLocationDetails(lView){throwError("Must never be called in production mode");const componentClassName=getDeclarationComponentDef(lView)?.type?.name;return componentClassName?` (used in the '${componentClassName}' component template)`:""}__name(function \u0275setUnknownPropertyStrictMode(shouldThrow){shouldThrowErrorOnUnknownProperty=shouldThrow},"\u0275setUnknownPropertyStrictMode"),__name(function \u0275getUnknownPropertyStrictMode(){return shouldThrowErrorOnUnknownProperty},"\u0275getUnknownPropertyStrictMode"),__name(function validateElementIsKnown(element,lView,tagName,schemas,hasDirectives){if(null!==schemas&&!hasDirectives&&null!==tagName&&(typeof HTMLUnknownElement<"u"&&HTMLUnknownElement&&element instanceof HTMLUnknownElement||typeof customElements<"u"&&tagName.indexOf("-")>-1&&!customElements.get(tagName))&&!matchingSchemas(schemas,tagName)){const isHostStandalone=isHostComponentStandalone(lView),schemas2=`'${isHostStandalone?"@Component":"@NgModule"}.schemas'`;let message=`'${tagName}' is not a known element${getTemplateLocationDetails(lView)}:\n`;if(message+=`1. If '${tagName}' is an Angular component, then verify that it is ${isHostStandalone?"included in the '@Component.imports' of this component":"a part of an @NgModule where this component is declared"}.\n`,tagName&&tagName.indexOf("-")>-1?message+=`2. If '${tagName}' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the ${schemas2} of this component to suppress this message.`:message+=`2. To allow any element add 'NO_ERRORS_SCHEMA' to the ${schemas2} of this component.`,shouldThrowErrorOnUnknownElement)throw new RuntimeError(304,message);console.error(formatRuntimeError(304,message))}},"validateElementIsKnown"),__name(function isPropertyValid(element,propName,tagName,schemas){return!!(null===schemas||matchingSchemas(schemas,tagName)||propName in element||isAnimationProp(propName))||typeof Node>"u"||null===Node||!(element instanceof Node)},"isPropertyValid"),__name(function handleUnknownPropertyError(propName,tagName,nodeType,lView){!tagName&&4===nodeType&&(tagName="ng-template");const isHostStandalone=isHostComponentStandalone(lView);let message=`Can't bind to '${propName}' since it isn't a known property of '${tagName}'${getTemplateLocationDetails(lView)}.`;const schemas=`'${isHostStandalone?"@Component":"@NgModule"}.schemas'`,importLocation=isHostStandalone?"included in the '@Component.imports' of this component":"a part of an @NgModule where this component is declared";KNOWN_CONTROL_FLOW_DIRECTIVES.has(propName)?message+=`\nIf the '${propName}' is an Angular control flow directive, please make sure that either the '${KNOWN_CONTROL_FLOW_DIRECTIVES.get(propName)}' directive or the 'CommonModule' is ${importLocation}.`:(message+=`\n1. If '${tagName}' is an Angular component and it has the '${propName}' input, then verify that it is ${importLocation}.`,tagName&&tagName.indexOf("-")>-1?(message+=`\n2. If '${tagName}' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the ${schemas} of this component to suppress this message.`,message+=`\n3. To allow any property add 'NO_ERRORS_SCHEMA' to the ${schemas} of this component.`):message+=`\n2. To allow any property add 'NO_ERRORS_SCHEMA' to the ${schemas} of this component.`),reportUnknownPropertyError(message)},"handleUnknownPropertyError"),__name(reportUnknownPropertyError,"reportUnknownPropertyError"),__name(getDeclarationComponentDef,"getDeclarationComponentDef"),__name(isHostComponentStandalone,"isHostComponentStandalone"),__name(getTemplateLocationDetails,"getTemplateLocationDetails");const KNOWN_CONTROL_FLOW_DIRECTIVES=new Map([["ngIf","NgIf"],["ngFor","NgFor"],["ngSwitchCase","NgSwitchCase"],["ngSwitchDefault","NgSwitchDefault"]]);function matchingSchemas(schemas,tagName){if(null!==schemas)for(let i=0;i<schemas.length;i++){const schema=schemas[i];if(schema===NO_ERRORS_SCHEMA||schema===CUSTOM_ELEMENTS_SCHEMA&&tagName&&tagName.indexOf("-")>-1)return!0}return!1}__name(matchingSchemas,"matchingSchemas");const SKIP_HYDRATION_ATTR_NAME="ngSkipHydration";function hasNgSkipHydrationAttr(tNode){const SKIP_HYDRATION_ATTR_NAME_LOWER_CASE=SKIP_HYDRATION_ATTR_NAME.toLowerCase(),attrs=tNode.mergedAttrs;if(null===attrs)return!1;for(let i=0;i<attrs.length;i+=2){const value=attrs[i];if("number"==typeof value)return!1;if("string"==typeof value&&value.toLowerCase()===SKIP_HYDRATION_ATTR_NAME_LOWER_CASE)return!0}return!1}function hasInSkipHydrationBlockFlag(tNode){return 128==(128&tNode.flags)}function isInSkipHydrationBlock(tNode){let currentTNode=tNode.parent;for(;currentTNode;){if(hasNgSkipHydrationAttr(currentTNode))return!0;currentTNode=currentTNode.parent}return!1}__name(hasNgSkipHydrationAttr,"hasNgSkipHydrationAttr"),__name(hasInSkipHydrationBlockFlag,"hasInSkipHydrationBlockFlag"),__name(isInSkipHydrationBlock,"isInSkipHydrationBlock");var RendererStyleFlags2=(()=>((RendererStyleFlags2=RendererStyleFlags2||{})[RendererStyleFlags2.Important=1]="Important",RendererStyleFlags2[RendererStyleFlags2.DashCase=2]="DashCase",RendererStyleFlags2))();const COMMENT_DISALLOWED=/^>|^->|<!--|-->|--!>|<!-$/g,COMMENT_DELIMITER=/(<|>)/,COMMENT_DELIMITER_ESCAPED="\u200b$1\u200b";function escapeCommentText(value){return value.replace(COMMENT_DISALLOWED,text=>text.replace(COMMENT_DELIMITER,COMMENT_DELIMITER_ESCAPED))}__name(escapeCommentText,"escapeCommentText");const TRACKED_LVIEWS=new Map;let uniqueIdCounter=0;function getUniqueLViewId(){return uniqueIdCounter++}function registerLView(lView){TRACKED_LVIEWS.set(lView[ID],lView)}function getLViewById(id){return TRACKED_LVIEWS.get(id)||null}function unregisterLView(lView){TRACKED_LVIEWS.delete(lView[ID])}__name(getUniqueLViewId,"getUniqueLViewId"),__name(registerLView,"registerLView"),__name(getLViewById,"getLViewById"),__name(unregisterLView,"unregisterLView");class LContext{get lView(){return getLViewById(this.lViewId)}constructor(lViewId,nodeIndex,native){this.lViewId=lViewId,this.nodeIndex=nodeIndex,this.native=native}}function getLContext(target){let mpValue=readPatchedData(target);if(mpValue){if(isLView(mpValue)){const lView=mpValue;let nodeIndex,component,directives;if(isComponentInstance(target)){if(nodeIndex=findViaComponent(lView,target),-1==nodeIndex)throw new Error("The provided component was not found in the application");component=target}else if(isDirectiveInstance(target)){if(nodeIndex=findViaDirective(lView,target),-1==nodeIndex)throw new Error("The provided directive was not found in the application");directives=getDirectivesAtNodeIndex(nodeIndex,lView)}else if(nodeIndex=findViaNativeElement(lView,target),-1==nodeIndex)return null;const native=unwrapRNode(lView[nodeIndex]),existingCtx=readPatchedData(native),context=existingCtx&&!Array.isArray(existingCtx)?existingCtx:createLContext(lView,nodeIndex,native);if(component&&void 0===context.component&&(context.component=component,attachPatchData(context.component,context)),directives&&void 0===context.directives){context.directives=directives;for(let i=0;i<directives.length;i++)attachPatchData(directives[i],context)}attachPatchData(context.native,context),mpValue=context}}else{const rElement=target;let parent=rElement;for(;parent=parent.parentNode;){const parentContext=readPatchedData(parent);if(parentContext){const lView=Array.isArray(parentContext)?parentContext:parentContext.lView;if(!lView)return null;const index=findViaNativeElement(lView,rElement);if(index>=0){const native=unwrapRNode(lView[index]),context=createLContext(lView,index,native);attachPatchData(native,context),mpValue=context;break}}}}return mpValue||null}function createLContext(lView,nodeIndex,native){return new LContext(lView[ID],nodeIndex,native)}function getComponentViewByInstance(componentInstance){let lView,patchedData=readPatchedData(componentInstance);if(isLView(patchedData)){const contextLView=patchedData,nodeIndex=findViaComponent(contextLView,componentInstance);lView=getComponentLViewByIndex(nodeIndex,contextLView);const context=createLContext(contextLView,nodeIndex,lView[HOST]);context.component=componentInstance,attachPatchData(componentInstance,context),attachPatchData(context.native,context)}else lView=getComponentLViewByIndex(patchedData.nodeIndex,patchedData.lView);return lView}__name(LContext,"LContext"),__name(getLContext,"getLContext"),__name(createLContext,"createLContext"),__name(getComponentViewByInstance,"getComponentViewByInstance");const MONKEY_PATCH_KEY_NAME="__ngContext__";function attachPatchData(target,data){isLView(data)?(target[MONKEY_PATCH_KEY_NAME]=data[ID],registerLView(data)):target[MONKEY_PATCH_KEY_NAME]=data}function readPatchedData(target){const data=target[MONKEY_PATCH_KEY_NAME];return"number"==typeof data?getLViewById(data):data||null}function readPatchedLView(target){const value=readPatchedData(target);return value?isLView(value)?value:value.lView:null}function isComponentInstance(instance){return instance&&instance.constructor&&instance.constructor.\u0275cmp}function isDirectiveInstance(instance){return instance&&instance.constructor&&instance.constructor.\u0275dir}function findViaNativeElement(lView,target){const tView=lView[TVIEW];for(let i=HEADER_OFFSET;i<tView.bindingStartIndex;i++)if(unwrapRNode(lView[i])===target)return i;return-1}function traverseNextElement(tNode){if(tNode.child)return tNode.child;if(tNode.next)return tNode.next;for(;tNode.parent&&!tNode.parent.next;)tNode=tNode.parent;return tNode.parent&&tNode.parent.next}function findViaComponent(lView,componentInstance){const componentIndices=lView[TVIEW].components;if(componentIndices)for(let i=0;i<componentIndices.length;i++){const elementComponentIndex=componentIndices[i];if(getComponentLViewByIndex(elementComponentIndex,lView)[CONTEXT]===componentInstance)return elementComponentIndex}else if(getComponentLViewByIndex(HEADER_OFFSET,lView)[CONTEXT]===componentInstance)return HEADER_OFFSET;return-1}function findViaDirective(lView,directiveInstance){let tNode=lView[TVIEW].firstChild;for(;tNode;){const directiveIndexEnd=tNode.directiveEnd;for(let i=tNode.directiveStart;i<directiveIndexEnd;i++)if(lView[i]===directiveInstance)return tNode.index;tNode=traverseNextElement(tNode)}return-1}function getDirectivesAtNodeIndex(nodeIndex,lView){const tNode=lView[TVIEW].data[nodeIndex];if(0===tNode.directiveStart)return EMPTY_ARRAY;const results=[];for(let i=tNode.directiveStart;i<tNode.directiveEnd;i++){const directiveInstance=lView[i];isComponentInstance(directiveInstance)||results.push(directiveInstance)}return results}function getComponentAtNodeIndex(nodeIndex,lView){const tNode=lView[TVIEW].data[nodeIndex],{directiveStart,componentOffset}=tNode;return componentOffset>-1?lView[directiveStart+componentOffset]:null}function discoverLocalRefs(lView,nodeIndex){const tNode=lView[TVIEW].data[nodeIndex];if(tNode&&tNode.localNames){const result={};let localIndex=tNode.index+1;for(let i=0;i<tNode.localNames.length;i+=2)result[tNode.localNames[i]]=lView[localIndex],localIndex++;return result}return null}let _icuContainerIterate;function icuContainerIterate(tIcuContainerNode,lView){return _icuContainerIterate(tIcuContainerNode,lView)}function ensureIcuContainerVisitorLoaded(loader){void 0===_icuContainerIterate&&(_icuContainerIterate=loader())}function getLViewParent(lView){const parent=lView[PARENT];return isLContainer(parent)?parent[PARENT]:parent}function getRootView(componentOrLView){let lView=isLView(componentOrLView)?componentOrLView:readPatchedLView(componentOrLView);for(;lView&&!(512&lView[FLAGS]);)lView=getLViewParent(lView);return lView}function getRootContext(viewOrComponent){return getRootView(viewOrComponent)[CONTEXT]}function getFirstLContainer(lView){return getNearestLContainer(lView[CHILD_HEAD])}function getNextLContainer(container){return getNearestLContainer(container[NEXT])}function getNearestLContainer(viewOrContainer){for(;null!==viewOrContainer&&!isLContainer(viewOrContainer);)viewOrContainer=viewOrContainer[NEXT];return viewOrContainer}function applyToElementOrContainer(action,renderer,parent,lNodeToHandle,beforeNode){if(null!=lNodeToHandle){let lContainer,isComponent=!1;isLContainer(lNodeToHandle)?lContainer=lNodeToHandle:isLView(lNodeToHandle)&&(isComponent=!0,lNodeToHandle=lNodeToHandle[HOST]);const rNode=unwrapRNode(lNodeToHandle);0===action&&null!==parent?null==beforeNode?nativeAppendChild(renderer,parent,rNode):nativeInsertBefore(renderer,parent,rNode,beforeNode||null,!0):1===action&&null!==parent?nativeInsertBefore(renderer,parent,rNode,beforeNode||null,!0):2===action?nativeRemoveNode(renderer,rNode,isComponent):3===action&&renderer.destroyNode(rNode),null!=lContainer&&applyContainer(renderer,action,lContainer,parent,beforeNode)}}function createTextNode(renderer,value){return renderer.createText(value)}function updateTextNode(renderer,rNode,value){renderer.setValue(rNode,value)}function createCommentNode(renderer,value){return renderer.createComment(escapeCommentText(value))}function createElementNode(renderer,name,namespace){return renderer.createElement(name,namespace)}function removeViewFromContainer(tView,lView){applyView(tView,lView,lView[RENDERER],2,null,null),lView[HOST]=null,lView[T_HOST]=null}function addViewToContainer(tView,parentTNode,renderer,lView,parentNativeNode,beforeNode){lView[HOST]=parentNativeNode,lView[T_HOST]=parentTNode,applyView(tView,lView,renderer,1,parentNativeNode,beforeNode)}function renderDetachView(tView,lView){applyView(tView,lView,lView[RENDERER],2,null,null)}function destroyViewTree(rootView){let lViewOrLContainer=rootView[CHILD_HEAD];if(!lViewOrLContainer)return cleanUpView(rootView[TVIEW],rootView);for(;lViewOrLContainer;){let next=null;if(isLView(lViewOrLContainer))next=lViewOrLContainer[CHILD_HEAD];else{const firstView=lViewOrLContainer[CONTAINER_HEADER_OFFSET];firstView&&(next=firstView)}if(!next){for(;lViewOrLContainer&&!lViewOrLContainer[NEXT]&&lViewOrLContainer!==rootView;)isLView(lViewOrLContainer)&&cleanUpView(lViewOrLContainer[TVIEW],lViewOrLContainer),lViewOrLContainer=lViewOrLContainer[PARENT];null===lViewOrLContainer&&(lViewOrLContainer=rootView),isLView(lViewOrLContainer)&&cleanUpView(lViewOrLContainer[TVIEW],lViewOrLContainer),next=lViewOrLContainer&&lViewOrLContainer[NEXT]}lViewOrLContainer=next}}function insertView(tView,lView,lContainer,index){const indexInContainer=CONTAINER_HEADER_OFFSET+index,containerLength=lContainer.length;index>0&&(lContainer[indexInContainer-1][NEXT]=lView),index<containerLength-CONTAINER_HEADER_OFFSET?(lView[NEXT]=lContainer[indexInContainer],addToArray(lContainer,CONTAINER_HEADER_OFFSET+index,lView)):(lContainer.push(lView),lView[NEXT]=null),lView[PARENT]=lContainer;const declarationLContainer=lView[DECLARATION_LCONTAINER];null!==declarationLContainer&&lContainer!==declarationLContainer&&trackMovedView(declarationLContainer,lView);const lQueries=lView[QUERIES];null!==lQueries&&lQueries.insertView(tView),lView[FLAGS]|=128}function trackMovedView(declarationContainer,lView){const movedViews=declarationContainer[MOVED_VIEWS];lView[DECLARATION_COMPONENT_VIEW]!==lView[PARENT][PARENT][DECLARATION_COMPONENT_VIEW]&&(declarationContainer[HAS_TRANSPLANTED_VIEWS]=!0),null===movedViews?declarationContainer[MOVED_VIEWS]=[lView]:movedViews.push(lView)}function detachMovedView(declarationContainer,lView){const movedViews=declarationContainer[MOVED_VIEWS],declarationViewIndex=movedViews.indexOf(lView);clearViewRefreshFlag(lView),movedViews.splice(declarationViewIndex,1)}function detachView(lContainer,removeIndex){if(lContainer.length<=CONTAINER_HEADER_OFFSET)return;const indexInContainer=CONTAINER_HEADER_OFFSET+removeIndex,viewToDetach=lContainer[indexInContainer];if(viewToDetach){const declarationLContainer=viewToDetach[DECLARATION_LCONTAINER];null!==declarationLContainer&&declarationLContainer!==lContainer&&detachMovedView(declarationLContainer,viewToDetach),removeIndex>0&&(lContainer[indexInContainer-1][NEXT]=viewToDetach[NEXT]);const removedLView=removeFromArray(lContainer,CONTAINER_HEADER_OFFSET+removeIndex);removeViewFromContainer(viewToDetach[TVIEW],viewToDetach);const lQueries=removedLView[QUERIES];null!==lQueries&&lQueries.detachView(removedLView[TVIEW]),viewToDetach[PARENT]=null,viewToDetach[NEXT]=null,viewToDetach[FLAGS]&=-129}return viewToDetach}function destroyLView(tView,lView){if(!(256&lView[FLAGS])){const renderer=lView[RENDERER];lView[REACTIVE_TEMPLATE_CONSUMER]?.destroy(),lView[REACTIVE_HOST_BINDING_CONSUMER]?.destroy(),renderer.destroyNode&&applyView(tView,lView,renderer,3,null,null),destroyViewTree(lView)}}function cleanUpView(tView,lView){if(!(256&lView[FLAGS])){lView[FLAGS]&=-129,lView[FLAGS]|=256,executeOnDestroys(tView,lView),processCleanups(tView,lView),1===lView[TVIEW].type&&lView[RENDERER].destroy();const declarationContainer=lView[DECLARATION_LCONTAINER];if(null!==declarationContainer&&isLContainer(lView[PARENT])){declarationContainer!==lView[PARENT]&&detachMovedView(declarationContainer,lView);const lQueries=lView[QUERIES];null!==lQueries&&lQueries.detachView(tView)}unregisterLView(lView)}}function processCleanups(tView,lView){const tCleanup=tView.cleanup,lCleanup=lView[CLEANUP];if(null!==tCleanup)for(let i=0;i<tCleanup.length-1;i+=2)if("string"==typeof tCleanup[i]){const targetIdx=tCleanup[i+3];targetIdx>=0?lCleanup[targetIdx]():lCleanup[-targetIdx].unsubscribe(),i+=2}else tCleanup[i].call(lCleanup[tCleanup[i+1]]);null!==lCleanup&&(lView[CLEANUP]=null);const destroyHooks=lView[ON_DESTROY_HOOKS];if(null!==destroyHooks){lView[ON_DESTROY_HOOKS]=null;for(let i=0;i<destroyHooks.length;i++)(0,destroyHooks[i])()}}function executeOnDestroys(tView,lView){let destroyHooks;if(null!=tView&&null!=(destroyHooks=tView.destroyHooks))for(let i=0;i<destroyHooks.length;i+=2){const context=lView[destroyHooks[i]];if(!(context instanceof NodeInjectorFactory)){const toCall=destroyHooks[i+1];if(Array.isArray(toCall))for(let j=0;j<toCall.length;j+=2){const callContext=context[toCall[j]],hook=toCall[j+1];profiler(4,callContext,hook);try{hook.call(callContext)}finally{profiler(5,callContext,hook)}}else{profiler(4,context,toCall);try{toCall.call(context)}finally{profiler(5,context,toCall)}}}}}function getParentRElement(tView,tNode,lView){return getClosestRElement(tView,tNode.parent,lView)}function getClosestRElement(tView,tNode,lView){let parentTNode=tNode;for(;null!==parentTNode&&40&parentTNode.type;)parentTNode=(tNode=parentTNode).parent;if(null===parentTNode)return lView[HOST];{const{componentOffset}=parentTNode;if(componentOffset>-1){const{encapsulation}=tView.data[parentTNode.directiveStart+componentOffset];if(encapsulation===ViewEncapsulation$1.None||encapsulation===ViewEncapsulation$1.Emulated)return null}return getNativeByTNode(parentTNode,lView)}}function nativeInsertBefore(renderer,parent,child,beforeNode,isMove){renderer.insertBefore(parent,child,beforeNode,isMove)}function nativeAppendChild(renderer,parent,child){renderer.appendChild(parent,child)}function nativeAppendOrInsertBefore(renderer,parent,child,beforeNode,isMove){null!==beforeNode?nativeInsertBefore(renderer,parent,child,beforeNode,isMove):nativeAppendChild(renderer,parent,child)}function nativeRemoveChild(renderer,parent,child,isHostElement){renderer.removeChild(parent,child,isHostElement)}function nativeParentNode(renderer,node){return renderer.parentNode(node)}function nativeNextSibling(renderer,node){return renderer.nextSibling(node)}function getInsertInFrontOfRNode(parentTNode,currentTNode,lView){return _getInsertInFrontOfRNodeWithI18n(parentTNode,currentTNode,lView)}function getInsertInFrontOfRNodeWithNoI18n(parentTNode,currentTNode,lView){return 40&parentTNode.type?getNativeByTNode(parentTNode,lView):null}__name(attachPatchData,"attachPatchData"),__name(readPatchedData,"readPatchedData"),__name(readPatchedLView,"readPatchedLView"),__name(isComponentInstance,"isComponentInstance"),__name(isDirectiveInstance,"isDirectiveInstance"),__name(findViaNativeElement,"findViaNativeElement"),__name(traverseNextElement,"traverseNextElement"),__name(findViaComponent,"findViaComponent"),__name(findViaDirective,"findViaDirective"),__name(getDirectivesAtNodeIndex,"getDirectivesAtNodeIndex"),__name(getComponentAtNodeIndex,"getComponentAtNodeIndex"),__name(discoverLocalRefs,"discoverLocalRefs"),__name(icuContainerIterate,"icuContainerIterate"),__name(ensureIcuContainerVisitorLoaded,"ensureIcuContainerVisitorLoaded"),__name(getLViewParent,"getLViewParent"),__name(getRootView,"getRootView"),__name(getRootContext,"getRootContext"),__name(getFirstLContainer,"getFirstLContainer"),__name(getNextLContainer,"getNextLContainer"),__name(getNearestLContainer,"getNearestLContainer"),__name(applyToElementOrContainer,"applyToElementOrContainer"),__name(createTextNode,"createTextNode"),__name(updateTextNode,"updateTextNode"),__name(createCommentNode,"createCommentNode"),__name(createElementNode,"createElementNode"),__name(removeViewFromContainer,"removeViewFromContainer"),__name(addViewToContainer,"addViewToContainer"),__name(renderDetachView,"renderDetachView"),__name(destroyViewTree,"destroyViewTree"),__name(insertView,"insertView"),__name(trackMovedView,"trackMovedView"),__name(detachMovedView,"detachMovedView"),__name(detachView,"detachView"),__name(destroyLView,"destroyLView"),__name(cleanUpView,"cleanUpView"),__name(processCleanups,"processCleanups"),__name(executeOnDestroys,"executeOnDestroys"),__name(getParentRElement,"getParentRElement"),__name(getClosestRElement,"getClosestRElement"),__name(nativeInsertBefore,"nativeInsertBefore"),__name(nativeAppendChild,"nativeAppendChild"),__name(nativeAppendOrInsertBefore,"nativeAppendOrInsertBefore"),__name(nativeRemoveChild,"nativeRemoveChild"),__name(function isTemplateNode(node){return"TEMPLATE"===node.tagName&&void 0!==node.content},"isTemplateNode"),__name(nativeParentNode,"nativeParentNode"),__name(nativeNextSibling,"nativeNextSibling"),__name(getInsertInFrontOfRNode,"getInsertInFrontOfRNode"),__name(getInsertInFrontOfRNodeWithNoI18n,"getInsertInFrontOfRNodeWithNoI18n");let _processI18nInsertBefore,policy$1,DOCUMENT2,policy,_getInsertInFrontOfRNodeWithI18n=getInsertInFrontOfRNodeWithNoI18n;function setI18nHandling(getInsertInFrontOfRNodeWithI18n2,processI18nInsertBefore2){_getInsertInFrontOfRNodeWithI18n=getInsertInFrontOfRNodeWithI18n2,_processI18nInsertBefore=processI18nInsertBefore2}function appendChild(tView,lView,childRNode,childTNode){const parentRNode=getParentRElement(tView,childTNode,lView),renderer=lView[RENDERER],anchorNode=getInsertInFrontOfRNode(childTNode.parent||lView[T_HOST],childTNode,lView);if(null!=parentRNode)if(Array.isArray(childRNode))for(let i=0;i<childRNode.length;i++)nativeAppendOrInsertBefore(renderer,parentRNode,childRNode[i],anchorNode,!1);else nativeAppendOrInsertBefore(renderer,parentRNode,childRNode,anchorNode,!1);void 0!==_processI18nInsertBefore&&_processI18nInsertBefore(renderer,childTNode,lView,childRNode,parentRNode)}function getFirstNativeNode(lView,tNode){if(null!==tNode){const tNodeType=tNode.type;if(3&tNodeType)return getNativeByTNode(tNode,lView);if(4&tNodeType)return getBeforeNodeForView(-1,lView[tNode.index]);if(8&tNodeType){const elIcuContainerChild=tNode.child;if(null!==elIcuContainerChild)return getFirstNativeNode(lView,elIcuContainerChild);{const rNodeOrLContainer=lView[tNode.index];return isLContainer(rNodeOrLContainer)?getBeforeNodeForView(-1,rNodeOrLContainer):unwrapRNode(rNodeOrLContainer)}}if(32&tNodeType)return icuContainerIterate(tNode,lView)()||unwrapRNode(lView[tNode.index]);{const projectionNodes=getProjectionNodes(lView,tNode);return null!==projectionNodes?Array.isArray(projectionNodes)?projectionNodes[0]:getFirstNativeNode(getLViewParent(lView[DECLARATION_COMPONENT_VIEW]),projectionNodes):getFirstNativeNode(lView,tNode.next)}}return null}function getProjectionNodes(lView,tNode){return null!==tNode?lView[DECLARATION_COMPONENT_VIEW][T_HOST].projection[tNode.projection]:null}function getBeforeNodeForView(viewIndexInContainer,lContainer){const nextViewIndex=CONTAINER_HEADER_OFFSET+viewIndexInContainer+1;if(nextViewIndex<lContainer.length){const lView=lContainer[nextViewIndex],firstTNodeOfView=lView[TVIEW].firstChild;if(null!==firstTNodeOfView)return getFirstNativeNode(lView,firstTNodeOfView)}return lContainer[NATIVE]}function nativeRemoveNode(renderer,rNode,isHostElement){const nativeParent=nativeParentNode(renderer,rNode);nativeParent&&nativeRemoveChild(renderer,nativeParent,rNode,isHostElement)}function clearElementContents(rElement){rElement.textContent=""}function applyNodes(renderer,action,tNode,lView,parentRElement,beforeNode,isProjection){for(;null!=tNode;){const rawSlotValue=lView[tNode.index],tNodeType=tNode.type;if(isProjection&&0===action&&(rawSlotValue&&attachPatchData(unwrapRNode(rawSlotValue),lView),tNode.flags|=2),32!=(32&tNode.flags))if(8&tNodeType)applyNodes(renderer,action,tNode.child,lView,parentRElement,beforeNode,!1),applyToElementOrContainer(action,renderer,parentRElement,rawSlotValue,beforeNode);else if(32&tNodeType){const nextRNode=icuContainerIterate(tNode,lView);let rNode;for(;rNode=nextRNode();)applyToElementOrContainer(action,renderer,parentRElement,rNode,beforeNode);applyToElementOrContainer(action,renderer,parentRElement,rawSlotValue,beforeNode)}else 16&tNodeType?applyProjectionRecursive(renderer,action,lView,tNode,parentRElement,beforeNode):applyToElementOrContainer(action,renderer,parentRElement,rawSlotValue,beforeNode);tNode=isProjection?tNode.projectionNext:tNode.next}}function applyView(tView,lView,renderer,action,parentRElement,beforeNode){applyNodes(renderer,action,tView.firstChild,lView,parentRElement,beforeNode,!1)}function applyProjection(tView,lView,tProjectionNode){applyProjectionRecursive(lView[RENDERER],0,lView,tProjectionNode,getParentRElement(tView,tProjectionNode,lView),getInsertInFrontOfRNode(tProjectionNode.parent||lView[T_HOST],tProjectionNode,lView))}function applyProjectionRecursive(renderer,action,lView,tProjectionNode,parentRElement,beforeNode){const componentLView=lView[DECLARATION_COMPONENT_VIEW],nodeToProjectOrRNodes=componentLView[T_HOST].projection[tProjectionNode.projection];if(Array.isArray(nodeToProjectOrRNodes))for(let i=0;i<nodeToProjectOrRNodes.length;i++)applyToElementOrContainer(action,renderer,parentRElement,nodeToProjectOrRNodes[i],beforeNode);else{let nodeToProject=nodeToProjectOrRNodes;const projectedComponentLView=componentLView[PARENT];hasInSkipHydrationBlockFlag(tProjectionNode)&&(nodeToProject.flags|=128),applyNodes(renderer,action,nodeToProject,projectedComponentLView,parentRElement,beforeNode,!0)}}function applyContainer(renderer,action,lContainer,parentRElement,beforeNode){const anchor=lContainer[NATIVE];anchor!==unwrapRNode(lContainer)&&applyToElementOrContainer(action,renderer,parentRElement,anchor,beforeNode);for(let i=CONTAINER_HEADER_OFFSET;i<lContainer.length;i++){const lView=lContainer[i];applyView(lView[TVIEW],lView,renderer,action,parentRElement,anchor)}}function applyStyling(renderer,isClassBased,rNode,prop,value){if(isClassBased)value?renderer.addClass(rNode,prop):renderer.removeClass(rNode,prop);else{let flags=-1===prop.indexOf("-")?void 0:RendererStyleFlags2.DashCase;null==value?renderer.removeStyle(rNode,prop,flags):("string"==typeof value&&value.endsWith("!important")&&(value=value.slice(0,-10),flags|=RendererStyleFlags2.Important),renderer.setStyle(rNode,prop,value,flags))}}function writeDirectStyle(renderer,element,newValue){renderer.setAttribute(element,"style",newValue)}function writeDirectClass(renderer,element,newValue){""===newValue?renderer.removeAttribute(element,"class"):renderer.setAttribute(element,"class",newValue)}function setupStaticAttributes(renderer,element,tNode){const{mergedAttrs,classes,styles}=tNode;null!==mergedAttrs&&setUpAttributes(renderer,element,mergedAttrs),null!==classes&&writeDirectClass(renderer,element,classes),null!==styles&&writeDirectStyle(renderer,element,styles)}function getPolicy$1(){if(void 0===policy$1&&(policy$1=null,_global.trustedTypes))try{policy$1=_global.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return policy$1}function trustedHTMLFromString(html){return getPolicy$1()?.createHTML(html)||html}function trustedScriptFromString(script){return getPolicy$1()?.createScript(script)||script}function trustedScriptURLFromString(url){return getPolicy$1()?.createScriptURL(url)||url}function \u0275\u0275validateIframeAttribute(attrValue,tagName,attrName){const lView=getLView(),tNode=getSelectedTNode(),element=getNativeByTNode(tNode,lView);if(2===tNode.type&&"iframe"===tagName.toLowerCase()){const iframe=element;throw iframe.src="",iframe.srcdoc=trustedHTMLFromString(""),nativeRemoveNode(lView[RENDERER],iframe),new RuntimeError(-910,!1)}return attrValue}function setDocument(document2){DOCUMENT2=document2}function getDocument(){if(void 0!==DOCUMENT2)return DOCUMENT2;if(typeof document<"u")return document;throw new RuntimeError(210,!1)}function getPolicy(){if(void 0===policy&&(policy=null,_global.trustedTypes))try{policy=_global.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return policy}function trustedHTMLFromStringBypass(html){return getPolicy()?.createHTML(html)||html}function trustedScriptFromStringBypass(script){return getPolicy()?.createScript(script)||script}function trustedScriptURLFromStringBypass(url){return getPolicy()?.createScriptURL(url)||url}__name(setI18nHandling,"setI18nHandling"),__name(appendChild,"appendChild"),__name(getFirstNativeNode,"getFirstNativeNode"),__name(getProjectionNodes,"getProjectionNodes"),__name(getBeforeNodeForView,"getBeforeNodeForView"),__name(nativeRemoveNode,"nativeRemoveNode"),__name(clearElementContents,"clearElementContents"),__name(applyNodes,"applyNodes"),__name(applyView,"applyView"),__name(applyProjection,"applyProjection"),__name(applyProjectionRecursive,"applyProjectionRecursive"),__name(applyContainer,"applyContainer"),__name(applyStyling,"applyStyling"),__name(writeDirectStyle,"writeDirectStyle"),__name(writeDirectClass,"writeDirectClass"),__name(setupStaticAttributes,"setupStaticAttributes"),__name(getPolicy$1,"getPolicy$1"),__name(trustedHTMLFromString,"trustedHTMLFromString"),__name(trustedScriptFromString,"trustedScriptFromString"),__name(trustedScriptURLFromString,"trustedScriptURLFromString"),__name(function newTrustedFunctionForDev(...args){if(!_global.trustedTypes)return new Function(...args);const body=`(function anonymous(${args.slice(0,-1).join(",")}\n) { ${args[args.length-1]}\n})`,fn=_global.eval(trustedScriptFromString(body));return void 0===fn.bind?new Function(...args):(fn.toString=()=>body,fn.bind(_global))},"newTrustedFunctionForDev"),__name(\u0275\u0275validateIframeAttribute,"\u0275\u0275validateIframeAttribute"),__name(setDocument,"setDocument"),__name(getDocument,"getDocument"),__name(getPolicy,"getPolicy"),__name(trustedHTMLFromStringBypass,"trustedHTMLFromStringBypass"),__name(trustedScriptFromStringBypass,"trustedScriptFromStringBypass"),__name(trustedScriptURLFromStringBypass,"trustedScriptURLFromStringBypass");class SafeValueImpl{constructor(changingThisBreaksApplicationSecurity){this.changingThisBreaksApplicationSecurity=changingThisBreaksApplicationSecurity}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${XSS_SECURITY_URL})`}}__name(SafeValueImpl,"SafeValueImpl");class SafeHtmlImpl extends SafeValueImpl{getTypeName(){return"HTML"}}__name(SafeHtmlImpl,"SafeHtmlImpl");class SafeStyleImpl extends SafeValueImpl{getTypeName(){return"Style"}}__name(SafeStyleImpl,"SafeStyleImpl");class SafeScriptImpl extends SafeValueImpl{getTypeName(){return"Script"}}__name(SafeScriptImpl,"SafeScriptImpl");class SafeUrlImpl extends SafeValueImpl{getTypeName(){return"URL"}}__name(SafeUrlImpl,"SafeUrlImpl");class SafeResourceUrlImpl extends SafeValueImpl{getTypeName(){return"ResourceURL"}}function unwrapSafeValue(value){return value instanceof SafeValueImpl?value.changingThisBreaksApplicationSecurity:value}function allowSanitizationBypassAndThrow(value,type){const actualType=getSanitizationBypassType(value);if(null!=actualType&&actualType!==type){if("ResourceURL"===actualType&&"URL"===type)return!0;throw new Error(`Required a safe ${type}, got a ${actualType} (see ${XSS_SECURITY_URL})`)}return actualType===type}function getSanitizationBypassType(value){return value instanceof SafeValueImpl&&value.getTypeName()||null}function bypassSanitizationTrustHtml(trustedHtml){return new SafeHtmlImpl(trustedHtml)}function bypassSanitizationTrustStyle(trustedStyle){return new SafeStyleImpl(trustedStyle)}function bypassSanitizationTrustScript(trustedScript){return new SafeScriptImpl(trustedScript)}function bypassSanitizationTrustUrl(trustedUrl){return new SafeUrlImpl(trustedUrl)}function bypassSanitizationTrustResourceUrl(trustedResourceUrl){return new SafeResourceUrlImpl(trustedResourceUrl)}function getInertBodyHelper(defaultDoc){const inertDocumentHelper=new InertDocumentHelper(defaultDoc);return isDOMParserAvailable()?new DOMParserHelper(inertDocumentHelper):inertDocumentHelper}__name(SafeResourceUrlImpl,"SafeResourceUrlImpl"),__name(unwrapSafeValue,"unwrapSafeValue"),__name(allowSanitizationBypassAndThrow,"allowSanitizationBypassAndThrow"),__name(getSanitizationBypassType,"getSanitizationBypassType"),__name(bypassSanitizationTrustHtml,"bypassSanitizationTrustHtml"),__name(bypassSanitizationTrustStyle,"bypassSanitizationTrustStyle"),__name(bypassSanitizationTrustScript,"bypassSanitizationTrustScript"),__name(bypassSanitizationTrustUrl,"bypassSanitizationTrustUrl"),__name(bypassSanitizationTrustResourceUrl,"bypassSanitizationTrustResourceUrl"),__name(getInertBodyHelper,"getInertBodyHelper");class DOMParserHelper{constructor(inertDocumentHelper){this.inertDocumentHelper=inertDocumentHelper}getInertBodyElement(html){html="<body><remove></remove>"+html;try{const body=(new window.DOMParser).parseFromString(trustedHTMLFromString(html),"text/html").body;return null===body?this.inertDocumentHelper.getInertBodyElement(html):(body.removeChild(body.firstChild),body)}catch{return null}}}__name(DOMParserHelper,"DOMParserHelper");class InertDocumentHelper{constructor(defaultDoc){this.defaultDoc=defaultDoc,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(html){const templateEl=this.inertDocument.createElement("template");return templateEl.innerHTML=trustedHTMLFromString(html),templateEl}}function isDOMParserAvailable(){try{return!!(new window.DOMParser).parseFromString(trustedHTMLFromString(""),"text/html")}catch{return!1}}__name(InertDocumentHelper,"InertDocumentHelper"),__name(isDOMParserAvailable,"isDOMParserAvailable");const SAFE_URL_PATTERN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function _sanitizeUrl(url){return(url=String(url)).match(SAFE_URL_PATTERN)?url:"unsafe:"+url}function tagSet(tags){const res={};for(const t of tags.split(","))res[t]=!0;return res}function merge(...sets){const res={};for(const s of sets)for(const v in s)s.hasOwnProperty(v)&&(res[v]=!0);return res}__name(_sanitizeUrl,"_sanitizeUrl"),__name(tagSet,"tagSet"),__name(merge,"merge");const VOID_ELEMENTS=tagSet("area,br,col,hr,img,wbr"),OPTIONAL_END_TAG_BLOCK_ELEMENTS=tagSet("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),OPTIONAL_END_TAG_INLINE_ELEMENTS=tagSet("rp,rt"),VALID_ELEMENTS=merge(VOID_ELEMENTS,merge(OPTIONAL_END_TAG_BLOCK_ELEMENTS,tagSet("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),merge(OPTIONAL_END_TAG_INLINE_ELEMENTS,tagSet("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),merge(OPTIONAL_END_TAG_INLINE_ELEMENTS,OPTIONAL_END_TAG_BLOCK_ELEMENTS)),URI_ATTRS=tagSet("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),VALID_ATTRS=merge(URI_ATTRS,tagSet("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tagSet("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),SKIP_TRAVERSING_CONTENT_IF_INVALID_ELEMENTS=tagSet("script,style,template");class SanitizingHtmlSerializer{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(el){let current=el.firstChild,traverseContent=!0;for(;current;)if(current.nodeType===Node.ELEMENT_NODE?traverseContent=this.startElement(current):current.nodeType===Node.TEXT_NODE?this.chars(current.nodeValue):this.sanitizedSomething=!0,traverseContent&&current.firstChild)current=current.firstChild;else for(;current;){current.nodeType===Node.ELEMENT_NODE&&this.endElement(current);let next=this.checkClobberedElement(current,current.nextSibling);if(next){current=next;break}current=this.checkClobberedElement(current,current.parentNode)}return this.buf.join("")}startElement(element){const tagName=element.nodeName.toLowerCase();if(!VALID_ELEMENTS.hasOwnProperty(tagName))return this.sanitizedSomething=!0,!SKIP_TRAVERSING_CONTENT_IF_INVALID_ELEMENTS.hasOwnProperty(tagName);this.buf.push("<"),this.buf.push(tagName);const elAttrs=element.attributes;for(let i=0;i<elAttrs.length;i++){const elAttr=elAttrs.item(i),attrName=elAttr.name,lower=attrName.toLowerCase();if(!VALID_ATTRS.hasOwnProperty(lower)){this.sanitizedSomething=!0;continue}let value=elAttr.value;URI_ATTRS[lower]&&(value=_sanitizeUrl(value)),this.buf.push(" ",attrName,'="',encodeEntities(value),'"')}return this.buf.push(">"),!0}endElement(current){const tagName=current.nodeName.toLowerCase();VALID_ELEMENTS.hasOwnProperty(tagName)&&!VOID_ELEMENTS.hasOwnProperty(tagName)&&(this.buf.push("</"),this.buf.push(tagName),this.buf.push(">"))}chars(chars){this.buf.push(encodeEntities(chars))}checkClobberedElement(node,nextNode){if(nextNode&&(node.compareDocumentPosition(nextNode)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${node.outerHTML}`);return nextNode}}__name(SanitizingHtmlSerializer,"SanitizingHtmlSerializer");const SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~ |!])/g;function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(match){return"&#"+(1024*(match.charCodeAt(0)-55296)+(match.charCodeAt(1)-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(match){return"&#"+match.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let inertBodyHelper;function _sanitizeHtml(defaultDoc,unsafeHtmlInput){let inertBodyElement=null;try{inertBodyHelper=inertBodyHelper||getInertBodyHelper(defaultDoc);let unsafeHtml=unsafeHtmlInput?String(unsafeHtmlInput):"";inertBodyElement=inertBodyHelper.getInertBodyElement(unsafeHtml);let mXSSAttempts=5,parsedHtml=unsafeHtml;do{if(0===mXSSAttempts)throw new Error("Failed to sanitize html because the input is unstable");mXSSAttempts--,unsafeHtml=parsedHtml,parsedHtml=inertBodyElement.innerHTML,inertBodyElement=inertBodyHelper.getInertBodyElement(unsafeHtml)}while(unsafeHtml!==parsedHtml);return trustedHTMLFromString((new SanitizingHtmlSerializer).sanitizeChildren(getTemplateContent(inertBodyElement)||inertBodyElement))}finally{if(inertBodyElement){const parent=getTemplateContent(inertBodyElement)||inertBodyElement;for(;parent.firstChild;)parent.removeChild(parent.firstChild)}}}function getTemplateContent(el){return"content"in el&&isTemplateElement(el)?el.content:null}function isTemplateElement(el){return el.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===el.nodeName}__name(encodeEntities,"encodeEntities"),__name(_sanitizeHtml,"_sanitizeHtml"),__name(getTemplateContent,"getTemplateContent"),__name(isTemplateElement,"isTemplateElement");var SecurityContext=(()=>((SecurityContext=SecurityContext||{})[SecurityContext.NONE=0]="NONE",SecurityContext[SecurityContext.HTML=1]="HTML",SecurityContext[SecurityContext.STYLE=2]="STYLE",SecurityContext[SecurityContext.SCRIPT=3]="SCRIPT",SecurityContext[SecurityContext.URL=4]="URL",SecurityContext[SecurityContext.RESOURCE_URL=5]="RESOURCE_URL",SecurityContext))();function \u0275\u0275sanitizeHtml(unsafeHtml){const sanitizer=getSanitizer();return sanitizer?trustedHTMLFromStringBypass(sanitizer.sanitize(SecurityContext.HTML,unsafeHtml)||""):allowSanitizationBypassAndThrow(unsafeHtml,"HTML")?trustedHTMLFromStringBypass(unwrapSafeValue(unsafeHtml)):_sanitizeHtml(getDocument(),renderStringify(unsafeHtml))}function \u0275\u0275sanitizeStyle(unsafeStyle){const sanitizer=getSanitizer();return sanitizer?sanitizer.sanitize(SecurityContext.STYLE,unsafeStyle)||"":allowSanitizationBypassAndThrow(unsafeStyle,"Style")?unwrapSafeValue(unsafeStyle):renderStringify(unsafeStyle)}function \u0275\u0275sanitizeUrl(unsafeUrl){const sanitizer=getSanitizer();return sanitizer?sanitizer.sanitize(SecurityContext.URL,unsafeUrl)||"":allowSanitizationBypassAndThrow(unsafeUrl,"URL")?unwrapSafeValue(unsafeUrl):_sanitizeUrl(renderStringify(unsafeUrl))}function \u0275\u0275sanitizeResourceUrl(unsafeResourceUrl){const sanitizer=getSanitizer();if(sanitizer)return trustedScriptURLFromStringBypass(sanitizer.sanitize(SecurityContext.RESOURCE_URL,unsafeResourceUrl)||"");if(allowSanitizationBypassAndThrow(unsafeResourceUrl,"ResourceURL"))return trustedScriptURLFromStringBypass(unwrapSafeValue(unsafeResourceUrl));throw new RuntimeError(904,!1)}function \u0275\u0275sanitizeScript(unsafeScript){const sanitizer=getSanitizer();if(sanitizer)return trustedScriptFromStringBypass(sanitizer.sanitize(SecurityContext.SCRIPT,unsafeScript)||"");if(allowSanitizationBypassAndThrow(unsafeScript,"Script"))return trustedScriptFromStringBypass(unwrapSafeValue(unsafeScript));throw new RuntimeError(905,!1)}function \u0275\u0275trustConstantHtml(html){return trustedHTMLFromString(html[0])}function \u0275\u0275trustConstantResourceUrl(url){return trustedScriptURLFromString(url[0])}function getUrlSanitizer(tag,prop){return"src"===prop&&("embed"===tag||"frame"===tag||"iframe"===tag||"media"===tag||"script"===tag)||"href"===prop&&("base"===tag||"link"===tag)?\u0275\u0275sanitizeResourceUrl:\u0275\u0275sanitizeUrl}function \u0275\u0275sanitizeUrlOrResourceUrl(unsafeUrl,tag,prop){return getUrlSanitizer(tag,prop)(unsafeUrl)}function getSanitizer(){const lView=getLView();return lView&&lView[ENVIRONMENT].sanitizer}__name(\u0275\u0275sanitizeHtml,"\u0275\u0275sanitizeHtml"),__name(\u0275\u0275sanitizeStyle,"\u0275\u0275sanitizeStyle"),__name(\u0275\u0275sanitizeUrl,"\u0275\u0275sanitizeUrl"),__name(\u0275\u0275sanitizeResourceUrl,"\u0275\u0275sanitizeResourceUrl"),__name(\u0275\u0275sanitizeScript,"\u0275\u0275sanitizeScript"),__name(\u0275\u0275trustConstantHtml,"\u0275\u0275trustConstantHtml"),__name(\u0275\u0275trustConstantResourceUrl,"\u0275\u0275trustConstantResourceUrl"),__name(getUrlSanitizer,"getUrlSanitizer"),__name(\u0275\u0275sanitizeUrlOrResourceUrl,"\u0275\u0275sanitizeUrlOrResourceUrl"),__name(function validateAgainstEventProperties(name){if(name.toLowerCase().startsWith("on")){const errorMessage=`Binding to event property '${name}' is disallowed for security reasons, please use (${name.slice(2)})=...\nIf '${name}' is a directive input, make sure the directive is imported by the current module.`;throw new RuntimeError(306,errorMessage)}},"validateAgainstEventProperties"),__name(function validateAgainstEventAttributes(name){if(name.toLowerCase().startsWith("on")){const errorMessage=`Binding to event attribute '${name}' is disallowed for security reasons, please use (${name.slice(2)})=...`;throw new RuntimeError(306,errorMessage)}},"validateAgainstEventAttributes"),__name(getSanitizer,"getSanitizer");class InjectionToken{constructor(_desc,options){this._desc=_desc,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof options?this.__NG_ELEMENT_ID__=options:void 0!==options&&(this.\u0275prov=\u0275\u0275defineInjectable({token:this,providedIn:options.providedIn||"root",factory:options.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}__name(InjectionToken,"InjectionToken");const ENVIRONMENT_INITIALIZER2=new InjectionToken("ENVIRONMENT_INITIALIZER"),INJECTOR=new InjectionToken("INJECTOR",-1),INJECTOR_DEF_TYPES=new InjectionToken("INJECTOR_DEF_TYPES");class NullInjector{get(token,notFoundValue=THROW_IF_NOT_FOUND){if(notFoundValue===THROW_IF_NOT_FOUND){const error=new Error(`NullInjectorError: No provider for ${stringify(token)}!`);throw error.name="NullInjectorError",error}return notFoundValue}}function makeEnvironmentProviders2(providers){return{\u0275providers:providers}}function importProvidersFrom(...sources){return{\u0275providers:internalImportProvidersFrom(0,sources),\u0275fromNgModule:!0}}function internalImportProvidersFrom(checkForStandaloneCmp,...sources){const providersOut=[],dedup=new Set;let injectorTypesWithProviders;return deepForEach(sources,source=>{const internalSource=source;walkProviderTree(internalSource,providersOut,[],dedup)&&(injectorTypesWithProviders||=[],injectorTypesWithProviders.push(internalSource))}),void 0!==injectorTypesWithProviders&&processInjectorTypesWithProviders(injectorTypesWithProviders,providersOut),providersOut}function processInjectorTypesWithProviders(typesWithProviders,providersOut){for(let i=0;i<typesWithProviders.length;i++){const{providers}=typesWithProviders[i];deepForEachProvider(providers,provider=>{providersOut.push(provider)})}}function walkProviderTree(container,providersOut,parents,dedup){if(!(container=resolveForwardRef(container)))return!1;let defType=null,injDef=getInjectorDef(container);const cmpDef=!injDef&&getComponentDef(container);if(injDef||cmpDef){if(cmpDef&&!cmpDef.standalone)return!1;defType=container}else{const ngModule=container.ngModule;if(injDef=getInjectorDef(ngModule),!injDef)return!1;defType=ngModule}const isDuplicate=dedup.has(defType);if(cmpDef){if(isDuplicate)return!1;if(dedup.add(defType),cmpDef.dependencies){const deps="function"==typeof cmpDef.dependencies?cmpDef.dependencies():cmpDef.dependencies;for(const dep of deps)walkProviderTree(dep,providersOut,parents,dedup)}}else{if(!injDef)return!1;{if(null!=injDef.imports&&!isDuplicate){let importTypesWithProviders;dedup.add(defType);try{deepForEach(injDef.imports,imported=>{walkProviderTree(imported,providersOut,parents,dedup)&&(importTypesWithProviders||=[],importTypesWithProviders.push(imported))})}finally{}void 0!==importTypesWithProviders&&processInjectorTypesWithProviders(importTypesWithProviders,providersOut)}if(!isDuplicate){const factory=getFactoryDef(defType)||(()=>new defType);providersOut.push({provide:defType,useFactory:factory,deps:EMPTY_ARRAY},{provide:INJECTOR_DEF_TYPES,useValue:defType,multi:!0},{provide:ENVIRONMENT_INITIALIZER2,useValue:()=>\u0275\u0275inject2(defType),multi:!0})}const defProviders=injDef.providers;null==defProviders||isDuplicate||deepForEachProvider(defProviders,provider=>{providersOut.push(provider)})}}return defType!==container&&void 0!==container.providers}function deepForEachProvider(providers,fn){for(let provider of providers)isEnvironmentProviders(provider)&&(provider=provider.\u0275providers),Array.isArray(provider)?deepForEachProvider(provider,fn):fn(provider)}__name(NullInjector,"NullInjector"),__name(makeEnvironmentProviders2,"makeEnvironmentProviders"),__name(importProvidersFrom,"importProvidersFrom"),__name(internalImportProvidersFrom,"internalImportProvidersFrom"),__name(processInjectorTypesWithProviders,"processInjectorTypesWithProviders"),__name(walkProviderTree,"walkProviderTree"),__name(function validateProvider(provider,providers,containerType){isTypeProvider(provider)||isValueProvider(provider)||isFactoryProvider(provider)||isExistingProvider(provider)||resolveForwardRef(provider&&(provider.useClass||provider.provide))||throwInvalidProviderError(containerType,providers,provider)},"validateProvider"),__name(deepForEachProvider,"deepForEachProvider");const USE_VALUE$1=getClosureSafeProperty({provide:String,useValue:getClosureSafeProperty});function isValueProvider(value){return null!==value&&"object"==typeof value&&USE_VALUE$1 in value}function isExistingProvider(value){return!(!value||!value.useExisting)}function isFactoryProvider(value){return!(!value||!value.useFactory)}function isTypeProvider(value){return"function"==typeof value}function isClassProvider(value){return!!value.useClass}__name(isValueProvider,"isValueProvider"),__name(isExistingProvider,"isExistingProvider"),__name(isFactoryProvider,"isFactoryProvider"),__name(isTypeProvider,"isTypeProvider"),__name(isClassProvider,"isClassProvider");const INJECTOR_SCOPE=new InjectionToken("Set Injector scope."),NOT_YET={},CIRCULAR={};let NULL_INJECTOR$1;function getNullInjector(){return void 0===NULL_INJECTOR$1&&(NULL_INJECTOR$1=new NullInjector),NULL_INJECTOR$1}__name(getNullInjector,"getNullInjector");class EnvironmentInjector2{}__name(EnvironmentInjector2,"EnvironmentInjector");class R3Injector extends EnvironmentInjector2{get destroyed(){return this._destroyed}constructor(providers,parent,source,scopes){super(),this.parent=parent,this.source=source,this.scopes=scopes,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,forEachSingleProvider(providers,provider=>this.processProvider(provider)),this.records.set(INJECTOR,makeRecord(void 0,this)),scopes.has("environment")&&this.records.set(EnvironmentInjector2,makeRecord(void 0,this));const record=this.records.get(INJECTOR_SCOPE);null!=record&&"string"==typeof record.value&&this.scopes.add(record.value),this.injectorDefTypes=new Set(this.get(INJECTOR_DEF_TYPES.multi,EMPTY_ARRAY,InjectFlags.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const service of this._ngOnDestroyHooks)service.ngOnDestroy();const onDestroyHooks=this._onDestroyHooks;this._onDestroyHooks=[];for(const hook of onDestroyHooks)hook()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(callback){return this.assertNotDestroyed(),this._onDestroyHooks.push(callback),()=>this.removeOnDestroy(callback)}runInContext(fn){this.assertNotDestroyed();const previousInjector=setCurrentInjector(this),previousInjectImplementation=setInjectImplementation(void 0);try{return fn()}finally{setCurrentInjector(previousInjector),setInjectImplementation(previousInjectImplementation)}}get(token,notFoundValue=THROW_IF_NOT_FOUND,flags=InjectFlags.Default){if(this.assertNotDestroyed(),token.hasOwnProperty(NG_ENV_ID))return token[NG_ENV_ID](this);flags=convertToBitFlags(flags);const previousInjector=setCurrentInjector(this),previousInjectImplementation=setInjectImplementation(void 0);try{if(!(flags&InjectFlags.SkipSelf)){let record=this.records.get(token);if(void 0===record){const def=couldBeInjectableType(token)&&getInjectableDef(token);record=def&&this.injectableDefInScope(def)?makeRecord(injectableDefOrInjectorDefFactory(token),NOT_YET):null,this.records.set(token,record)}if(null!=record)return this.hydrate(token,record)}return(flags&InjectFlags.Self?getNullInjector():this.parent).get(token,notFoundValue=flags&InjectFlags.Optional&&notFoundValue===THROW_IF_NOT_FOUND?null:notFoundValue)}catch(e){if("NullInjectorError"===e.name){if((e[NG_TEMP_TOKEN_PATH]=e[NG_TEMP_TOKEN_PATH]||[]).unshift(stringify(token)),previousInjector)throw e;return catchInjectorError(e,token,"R3InjectorError",this.source)}throw e}finally{setInjectImplementation(previousInjectImplementation),setCurrentInjector(previousInjector)}}resolveInjectorInitializers(){const previousInjector=setCurrentInjector(this),previousInjectImplementation=setInjectImplementation(void 0);try{const initializers=this.get(ENVIRONMENT_INITIALIZER2.multi,EMPTY_ARRAY,InjectFlags.Self);for(const initializer of initializers)initializer()}finally{setCurrentInjector(previousInjector),setInjectImplementation(previousInjectImplementation)}}toString(){const tokens=[],records=this.records;for(const token of records.keys())tokens.push(stringify(token));return`R3Injector[${tokens.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new RuntimeError(205,!1)}processProvider(provider){let token=isTypeProvider(provider=resolveForwardRef(provider))?provider:resolveForwardRef(provider&&provider.provide);const record=providerToRecord(provider);if(isTypeProvider(provider)||!0!==provider.multi)this.records.get(token);else{let multiRecord=this.records.get(token);multiRecord||(multiRecord=makeRecord(void 0,NOT_YET,!0),multiRecord.factory=()=>injectArgs(multiRecord.multi),this.records.set(token,multiRecord)),token=provider,multiRecord.multi.push(provider)}this.records.set(token,record)}hydrate(token,record){return record.value===NOT_YET&&(record.value=CIRCULAR,record.value=record.factory()),"object"==typeof record.value&&record.value&&hasOnDestroy(record.value)&&this._ngOnDestroyHooks.add(record.value),record.value}injectableDefInScope(def){if(!def.providedIn)return!1;const providedIn=resolveForwardRef(def.providedIn);return"string"==typeof providedIn?"any"===providedIn||this.scopes.has(providedIn):this.injectorDefTypes.has(providedIn)}removeOnDestroy(callback){const destroyCBIdx=this._onDestroyHooks.indexOf(callback);-1!==destroyCBIdx&&this._onDestroyHooks.splice(destroyCBIdx,1)}}function injectableDefOrInjectorDefFactory(token){const injectableDef=getInjectableDef(token),factory=null!==injectableDef?injectableDef.factory:getFactoryDef(token);if(null!==factory)return factory;if(token instanceof InjectionToken)throw new RuntimeError(204,!1);if(token instanceof Function)return getUndecoratedInjectableFactory(token);throw new RuntimeError(204,!1)}function getUndecoratedInjectableFactory(token){const paramLength=token.length;if(paramLength>0)throw newArray(paramLength,"?"),new RuntimeError(204,!1);const inheritedInjectableDef=getInheritedInjectableDef(token);return null!==inheritedInjectableDef?()=>inheritedInjectableDef.factory(token):()=>new token}function providerToRecord(provider){return isValueProvider(provider)?makeRecord(void 0,provider.useValue):makeRecord(providerToFactory(provider),NOT_YET)}function providerToFactory(provider,ngModuleType,providers){let factory;if(isTypeProvider(provider)){const unwrappedProvider=resolveForwardRef(provider);return getFactoryDef(unwrappedProvider)||injectableDefOrInjectorDefFactory(unwrappedProvider)}if(isValueProvider(provider))factory=__name(()=>resolveForwardRef(provider.useValue),"factory");else if(isFactoryProvider(provider))factory=__name(()=>provider.useFactory(...injectArgs(provider.deps||[])),"factory");else if(isExistingProvider(provider))factory=__name(()=>\u0275\u0275inject2(resolveForwardRef(provider.useExisting)),"factory");else{const classRef=resolveForwardRef(provider&&(provider.useClass||provider.provide));if(!hasDeps(provider))return getFactoryDef(classRef)||injectableDefOrInjectorDefFactory(classRef);factory=__name(()=>new classRef(...injectArgs(provider.deps)),"factory")}return factory}function makeRecord(factory,value,multi=!1){return{factory,value,multi:multi?[]:void 0}}function hasDeps(value){return!!value.deps}function hasOnDestroy(value){return null!==value&&"object"==typeof value&&"function"==typeof value.ngOnDestroy}function couldBeInjectableType(value){return"function"==typeof value||"object"==typeof value&&value instanceof InjectionToken}function forEachSingleProvider(providers,fn){for(const provider of providers)Array.isArray(provider)?forEachSingleProvider(provider,fn):provider&&isEnvironmentProviders(provider)?forEachSingleProvider(provider.\u0275providers,fn):fn(provider)}__name(R3Injector,"R3Injector"),__name(injectableDefOrInjectorDefFactory,"injectableDefOrInjectorDefFactory"),__name(getUndecoratedInjectableFactory,"getUndecoratedInjectableFactory"),__name(providerToRecord,"providerToRecord"),__name(providerToFactory,"providerToFactory"),__name(makeRecord,"makeRecord"),__name(hasDeps,"hasDeps"),__name(hasOnDestroy,"hasOnDestroy"),__name(couldBeInjectableType,"couldBeInjectableType"),__name(forEachSingleProvider,"forEachSingleProvider");const APP_ID=new InjectionToken("AppId",{providedIn:"root",factory:()=>DEFAULT_APP_ID}),DEFAULT_APP_ID="ng",PLATFORM_INITIALIZER=new InjectionToken("Platform Initializer"),PLATFORM_ID2=new InjectionToken("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ANIMATION_MODULE_TYPE=new InjectionToken("AnimationModuleType"),CSP_NONCE=new InjectionToken("CSP nonce",{providedIn:"root",factory:()=>getDocument().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),ENABLED_SSR_FEATURES=new InjectionToken("",{providedIn:"root",factory:()=>new Set});__name(function makeStateKey2(key){return key},"makeStateKey"),__name(function initTransferState(){const transferState=new TransferState2;return"browser"===inject2(PLATFORM_ID2)&&(transferState.store=retrieveTransferredState(getDocument(),inject2(APP_ID))),transferState},"initTransferState");let TransferState2=null;function retrieveTransferredState(doc,appId){const script=doc.getElementById(appId+"-state");if(script?.textContent)try{return JSON.parse(script.textContent)}catch(e){console.warn("Exception while restoring TransferState for app "+appId,e)}return{}}__name(retrieveTransferredState,"retrieveTransferredState");const REFERENCE_NODE_HOST="h",REFERENCE_NODE_BODY="b";var NodeNavigationStep=null;const ELEMENT_CONTAINERS="e",TEMPLATES="t",CONTAINERS="c",MULTIPLIER="x",NUM_ROOT_NODES="r",TEMPLATE_ID="i",NODES="n",DISCONNECTED_NODES="d",NGH_DATA_KEY=null,NGH_ATTR_NAME="ngh";let _retrieveHydrationInfoImpl=__name((rNode,injector)=>null,"_retrieveHydrationInfoImpl");function retrieveHydrationInfoImpl(rNode,injector){const nghAttrValue=rNode.getAttribute(NGH_ATTR_NAME);if(null==nghAttrValue)return null;let data={};if(""!==nghAttrValue){const transferState=injector.get(TransferState2,null,{optional:!0});null!==transferState&&(data=transferState.get(NGH_DATA_KEY,[])[Number(nghAttrValue)])}const dehydratedView={data,firstChild:rNode.firstChild??null};return rNode.removeAttribute(NGH_ATTR_NAME),dehydratedView}function enableRetrieveHydrationInfoImpl(){_retrieveHydrationInfoImpl=retrieveHydrationInfoImpl}function retrieveHydrationInfo(rNode,injector){return _retrieveHydrationInfoImpl(rNode,injector)}function getComponentLViewForHydration(viewRef){let lView=viewRef._lView;return 2===lView[TVIEW].type?null:(isRootView(lView)&&(lView=lView[HEADER_OFFSET]),isLContainer(lView)&&(lView=lView[HOST]),lView)}function getTextNodeContent(node){return node.textContent?.replace(/\s/gm,"")}function processTextNodeMarkersBeforeHydration(node){const doc=getDocument(),commentNodesIterator=doc.createNodeIterator(node,NodeFilter.SHOW_COMMENT,{acceptNode(node2){const content=getTextNodeContent(node2);return"ngetn"===content||"ngtns"===content?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let currentNode;const nodes=[];for(;currentNode=commentNodesIterator.nextNode();)nodes.push(currentNode);for(const node2 of nodes)"ngetn"===node2.textContent?node2.replaceWith(doc.createTextNode("")):node2.remove()}function setSegmentHead(hydrationInfo,index,node){hydrationInfo.segmentHeads??={},hydrationInfo.segmentHeads[index]=node}function getSegmentHead(hydrationInfo,index){return hydrationInfo.segmentHeads?.[index]??null}function getNgContainerSize(hydrationInfo,index){const data=hydrationInfo.data;let size=data[ELEMENT_CONTAINERS]?.[index]??null;return null===size&&data[CONTAINERS]?.[index]&&(size=calcSerializedContainerSize(hydrationInfo,index)),size}function getSerializedContainerViews(hydrationInfo,index){return hydrationInfo.data[CONTAINERS]?.[index]??null}function calcSerializedContainerSize(hydrationInfo,index){const views=getSerializedContainerViews(hydrationInfo,index)??[];let numNodes=0;for(let view of views)numNodes+=view[NUM_ROOT_NODES]*(view[MULTIPLIER]??1);return numNodes}function isDisconnectedNode$1(hydrationInfo,index){if(typeof hydrationInfo.disconnectedNodes>"u"){const nodeIds=hydrationInfo.data[DISCONNECTED_NODES];hydrationInfo.disconnectedNodes=nodeIds?new Set(nodeIds):null}return!!hydrationInfo.disconnectedNodes?.has(index)}__name(retrieveHydrationInfoImpl,"retrieveHydrationInfoImpl"),__name(enableRetrieveHydrationInfoImpl,"enableRetrieveHydrationInfoImpl"),__name(retrieveHydrationInfo,"retrieveHydrationInfo"),__name(getComponentLViewForHydration,"getComponentLViewForHydration"),__name(getTextNodeContent,"getTextNodeContent"),__name(processTextNodeMarkersBeforeHydration,"processTextNodeMarkersBeforeHydration"),__name(function markRNodeAsClaimedByHydration(node,checkIfAlreadyClaimed=!0){throw new Error("Calling `markRNodeAsClaimedByHydration` in prod mode is not supported and likely a mistake.")},"markRNodeAsClaimedByHydration"),__name(function isRNodeClaimedForHydration(node){return!!node.__claimed},"isRNodeClaimedForHydration"),__name(setSegmentHead,"setSegmentHead"),__name(getSegmentHead,"getSegmentHead"),__name(getNgContainerSize,"getNgContainerSize"),__name(getSerializedContainerViews,"getSerializedContainerViews"),__name(calcSerializedContainerSize,"calcSerializedContainerSize"),__name(isDisconnectedNode$1,"isDisconnectedNode$1");class ComponentRef$1{}__name(ComponentRef$1,"ComponentRef$1");class ComponentFactory$1{}function noComponentFactoryError(component){const error=Error(`No component factory found for ${stringify(component)}.`);return error[ERROR_COMPONENT]=component,error}__name(ComponentFactory$1,"ComponentFactory$1"),__name(noComponentFactoryError,"noComponentFactoryError");const ERROR_COMPONENT="ngComponent";__name(function getComponent$1(error){return error[ERROR_COMPONENT]},"getComponent$1");class _NullComponentFactoryResolver{resolveComponentFactory(component){throw noComponentFactoryError(component)}}__name(_NullComponentFactoryResolver,"_NullComponentFactoryResolver");let ComponentFactoryResolver$1=(()=>{class ComponentFactoryResolver$12{}return __name(ComponentFactoryResolver$12,"ComponentFactoryResolver$1"),ComponentFactoryResolver$12.NULL=new _NullComponentFactoryResolver,ComponentFactoryResolver$12})();function injectElementRef(){return createElementRef(getCurrentTNode(),getLView())}function createElementRef(tNode,lView){return new ElementRef2(getNativeByTNode(tNode,lView))}__name(injectElementRef,"injectElementRef"),__name(createElementRef,"createElementRef");let ElementRef2=(()=>{class ElementRef3{constructor(nativeElement){this.nativeElement=nativeElement}}return __name(ElementRef3,"ElementRef"),ElementRef3.__NG_ELEMENT_ID__=injectElementRef,ElementRef3})();function unwrapElementRef(value){return value instanceof ElementRef2?value.nativeElement:value}__name(unwrapElementRef,"unwrapElementRef");class RendererFactory2{}__name(RendererFactory2,"RendererFactory2");let Renderer22=(()=>{class Renderer23{}return __name(Renderer23,"Renderer2"),Renderer23.__NG_ELEMENT_ID__=()=>injectRenderer2(),Renderer23})();function injectRenderer2(){const lView=getLView(),nodeAtIndex=getComponentLViewByIndex(getCurrentTNode().index,lView);return(isLView(nodeAtIndex)?nodeAtIndex:lView)[RENDERER]}__name(injectRenderer2,"injectRenderer2");let Sanitizer=(()=>{class Sanitizer2{}return __name(Sanitizer2,"Sanitizer"),Sanitizer2.\u0275prov=\u0275\u0275defineInjectable({token:Sanitizer2,providedIn:"root",factory:()=>null}),Sanitizer2})();class Version{constructor(full){this.full=full,this.major=full.split(".")[0],this.minor=full.split(".")[1],this.patch=full.split(".").slice(2).join(".")}}__name(Version,"Version");const VERSION=new Version("16.0.3"),NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR={};function markViewDirty(lView){for(;lView;){lView[FLAGS]|=64;const parent=getLViewParent(lView);if(isRootView(lView)&&!parent)return lView;lView=parent}return null}__name(markViewDirty,"markViewDirty");function getOriginalError(error){return error.ngOriginalError}__name(function wrappedError(message,originalError){const msg=`${message} caused by: ${originalError instanceof Error?originalError.message:originalError}`,error=Error(msg);return error.ngOriginalError=originalError,error},"wrappedError"),__name(getOriginalError,"getOriginalError");class ErrorHandler{constructor(){this._console=console}handleError(error){const originalError=this._findOriginalError(error);this._console.error("ERROR",error),originalError&&this._console.error("ORIGINAL ERROR",originalError)}_findOriginalError(error){let e=error&&getOriginalError(error);for(;e&&getOriginalError(e);)e=getOriginalError(e);return e||null}}__name(ErrorHandler,"ErrorHandler");const IS_HYDRATION_DOM_REUSE_ENABLED=new InjectionToken(""),PRESERVE_HOST_CONTENT=new InjectionToken("",{providedIn:"root",factory:()=>!1});function normalizeDebugBindingName(name){return`ng-reflect-${name=camelCaseToDashCase(name.replace(/[$@]/g,"_"))}`}__name(normalizeDebugBindingName,"normalizeDebugBindingName");const CAMEL_CASE_REGEXP=/([A-Z])/g;function camelCaseToDashCase(input){return input.replace(CAMEL_CASE_REGEXP,(...m)=>"-"+m[1].toLowerCase())}function normalizeDebugBindingValue(value){try{return null!=value?value.toString().slice(0,30):value}catch{return"[ERROR] Exception while trying to serialize the value"}}function \u0275\u0275resolveWindow(element){return element.ownerDocument.defaultView}function \u0275\u0275resolveDocument(element){return element.ownerDocument}function \u0275\u0275resolveBody(element){return element.ownerDocument.body}__name(camelCaseToDashCase,"camelCaseToDashCase"),__name(normalizeDebugBindingValue,"normalizeDebugBindingValue"),__name(\u0275\u0275resolveWindow,"\u0275\u0275resolveWindow"),__name(\u0275\u0275resolveDocument,"\u0275\u0275resolveDocument"),__name(\u0275\u0275resolveBody,"\u0275\u0275resolveBody");const INTERPOLATION_DELIMITER="\ufffd";function maybeUnwrapFn(value){return value instanceof Function?value():value}__name(maybeUnwrapFn,"maybeUnwrapFn");function assertComponentDef(type){if(!getComponentDef(type))throw new RuntimeError(906,`The ${stringifyForError(type)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}function formatValue(value){let strValue=String(value);try{(Array.isArray(value)||"[object Object]"===strValue)&&(strValue=JSON.stringify(value))}catch{}return strValue.length>200?strValue.substring(0,200)+"\u2026":strValue}function constructDetailsForInterpolation(lView,rootIndex,expressionIndex,meta,changedValue){const[propName,prefix,...chunks]=meta.split(INTERPOLATION_DELIMITER);let oldValue=prefix,newValue=prefix;for(let i=0;i<chunks.length;i++){const slotIdx=rootIndex+i;oldValue+=`${lView[slotIdx]}${chunks[i]}`,newValue+=`${slotIdx===expressionIndex?changedValue:lView[slotIdx]}${chunks[i]}`}return{propName,oldValue,newValue}}__name(function assertStandaloneComponentType(type){if(assertComponentDef(type),!getComponentDef(type).standalone)throw new RuntimeError(907,`The ${stringifyForError(type)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${stringifyForError(type)} component has the \`standalone: true\` flag in the decorator.`)},"assertStandaloneComponentType"),__name(assertComponentDef,"assertComponentDef"),__name(function throwMultipleComponentError(tNode,first2,second){throw new RuntimeError(-300,`Multiple components match node with tagname ${tNode.value}: ${stringifyForError(first2)} and ${stringifyForError(second)}`)},"throwMultipleComponentError"),__name(function throwErrorIfNoChangesMode(creationMode,oldValue,currValue,propName,lView){const componentClassName=getDeclarationComponentDef(lView)?.type?.name;let msg=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value${propName?` for '${propName}'`:""}: '${formatValue(oldValue)}'. Current value: '${formatValue(currValue)}'.${componentClassName?` Expression location: ${componentClassName} component`:""}`;throw creationMode&&(msg+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook?"),new RuntimeError(-100,msg)},"throwErrorIfNoChangesMode"),__name(formatValue,"formatValue"),__name(constructDetailsForInterpolation,"constructDetailsForInterpolation"),__name(function getExpressionChangedErrorDetails(lView,bindingIndex,oldValue,newValue){const tData=lView[TVIEW].data,metadata=tData[bindingIndex];if("string"==typeof metadata)return metadata.indexOf(INTERPOLATION_DELIMITER)>-1?constructDetailsForInterpolation(lView,bindingIndex,bindingIndex,metadata,newValue):{propName:metadata,oldValue,newValue};if(null===metadata){let idx=bindingIndex-1;for(;"string"!=typeof tData[idx]&&null===tData[idx+1];)idx--;const meta=tData[idx];if("string"==typeof meta){const matches=meta.match(new RegExp(INTERPOLATION_DELIMITER,"g"));if(matches&&matches.length-1>bindingIndex-idx)return constructDetailsForInterpolation(lView,idx,bindingIndex,meta,newValue)}}return{propName:void 0,oldValue,newValue}},"getExpressionChangedErrorDetails");class ReactiveLViewConsumer extends ReactiveNode{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(lView){this._lView=lView}onConsumerDependencyMayHaveChanged(){markViewDirty(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(fn,rf,ctx){const prevConsumer=setActiveConsumer(this);this.trackingVersion++;try{fn(rf,ctx)}finally{setActiveConsumer(prevConsumer)}}destroy(){this.trackingVersion++}}__name(ReactiveLViewConsumer,"ReactiveLViewConsumer");let currentConsumer=null;function getOrCreateCurrentLViewConsumer(){return currentConsumer??=new ReactiveLViewConsumer,currentConsumer}function getReactiveLViewConsumer(lView,slot){return lView[slot]??getOrCreateCurrentLViewConsumer()}function commitLViewConsumerIfHasProducers(lView,slot){const consumer=getOrCreateCurrentLViewConsumer();consumer.hasReadASignal&&(lView[slot]=currentConsumer,consumer.lView=lView,currentConsumer=new ReactiveLViewConsumer)}__name(getOrCreateCurrentLViewConsumer,"getOrCreateCurrentLViewConsumer"),__name(getReactiveLViewConsumer,"getReactiveLViewConsumer"),__name(commitLViewConsumerIfHasProducers,"commitLViewConsumerIfHasProducers");const NO_CHANGE={};function \u0275\u0275advance(delta){selectIndexInternal(getTView(),getLView(),getSelectedIndex()+delta,!1)}function selectIndexInternal(tView,lView,index,checkNoChangesMode){if(!checkNoChangesMode)if(3==(3&lView[FLAGS])){const preOrderCheckHooks=tView.preOrderCheckHooks;null!==preOrderCheckHooks&&executeCheckHooks(lView,preOrderCheckHooks,index)}else{const preOrderHooks=tView.preOrderHooks;null!==preOrderHooks&&executeInitAndCheckHooks(lView,preOrderHooks,0,index)}setSelectedIndex(index)}function assertInInjectionContext(debugFn){if(!getInjectImplementation()&&!getCurrentInjector())throw new RuntimeError(-203,!1)}__name(\u0275\u0275advance,"\u0275\u0275advance"),__name(selectIndexInternal,"selectIndexInternal"),__name(function runInInjectionContext(injector,fn){injector instanceof R3Injector&&injector.assertNotDestroyed();const prevInjector=setCurrentInjector(injector),previousInjectImplementation=setInjectImplementation(void 0);try{return fn()}finally{setCurrentInjector(prevInjector),setInjectImplementation(previousInjectImplementation)}},"runInInjectionContext"),__name(assertInInjectionContext,"assertInInjectionContext");const angularCoreDiEnv={\u0275\u0275defineInjectable,\u0275\u0275defineInjector,\u0275\u0275inject:\u0275\u0275inject2,\u0275\u0275invalidFactoryDep,resolveForwardRef};__name(function compileInjectable(type,meta){let ngInjectableDef=null,ngFactoryDef=null;type.hasOwnProperty(NG_PROV_DEF)||Object.defineProperty(type,NG_PROV_DEF,{get:()=>(null===ngInjectableDef&&(ngInjectableDef=getCompilerFacade().compileInjectable(angularCoreDiEnv,`ng:///${type.name}/\u0275prov.js`,getInjectableMetadata(type,meta))),ngInjectableDef)}),type.hasOwnProperty(NG_FACTORY_DEF)||Object.defineProperty(type,NG_FACTORY_DEF,{get:()=>{if(null===ngFactoryDef){const compiler=getCompilerFacade();ngFactoryDef=compiler.compileFactory(angularCoreDiEnv,`ng:///${type.name}/\u0275fac.js`,{name:type.name,type,typeArgumentCount:0,deps:reflectDependencies(type),target:compiler.FactoryTarget.Injectable})}return ngFactoryDef},configurable:!0})},"compileInjectable");const USE_VALUE=getClosureSafeProperty({provide:String,useValue:getClosureSafeProperty});function isUseClassProvider(meta){return void 0!==meta.useClass}function isUseValueProvider(meta){return USE_VALUE in meta}function isUseFactoryProvider(meta){return void 0!==meta.useFactory}function isUseExistingProvider(meta){return void 0!==meta.useExisting}function getInjectableMetadata(type,srcMeta){const meta=srcMeta||{providedIn:null},compilerMeta={name:type.name,type,typeArgumentCount:0,providedIn:meta.providedIn};return(isUseClassProvider(meta)||isUseFactoryProvider(meta))&&void 0!==meta.deps&&(compilerMeta.deps=convertDependencies(meta.deps)),isUseClassProvider(meta)?compilerMeta.useClass=meta.useClass:isUseValueProvider(meta)?compilerMeta.useValue=meta.useValue:isUseFactoryProvider(meta)?compilerMeta.useFactory=meta.useFactory:isUseExistingProvider(meta)&&(compilerMeta.useExisting=meta.useExisting),compilerMeta}function createInjector(defType,parent=null,additionalProviders=null,name){const injector=createInjectorWithoutInjectorInstances(defType,parent,additionalProviders,name);return injector.resolveInjectorInitializers(),injector}function createInjectorWithoutInjectorInstances(defType,parent=null,additionalProviders=null,name,scopes=new Set){const providers=[additionalProviders||EMPTY_ARRAY,importProvidersFrom(defType)];return name=name||("object"==typeof defType?void 0:stringify(defType)),new R3Injector(providers,parent||getNullInjector(),name||null,scopes)}__name(isUseClassProvider,"isUseClassProvider"),__name(isUseValueProvider,"isUseValueProvider"),__name(isUseFactoryProvider,"isUseFactoryProvider"),__name(isUseExistingProvider,"isUseExistingProvider"),__name(getInjectableMetadata,"getInjectableMetadata"),__name(createInjector,"createInjector"),__name(createInjectorWithoutInjectorInstances,"createInjectorWithoutInjectorInstances");let Injector2=(()=>{class Injector3{static create(options,parent){if(Array.isArray(options))return createInjector({name:""},parent,options,"");{const name=options.name??"";return createInjector({name},options.parent,options.providers,name)}}}return __name(Injector3,"Injector"),Injector3.THROW_IF_NOT_FOUND=THROW_IF_NOT_FOUND,Injector3.NULL=new NullInjector,Injector3.\u0275prov=\u0275\u0275defineInjectable({token:Injector3,providedIn:"any",factory:()=>\u0275\u0275inject2(INJECTOR)}),Injector3.__NG_ELEMENT_ID__=-1,Injector3})();function \u0275\u0275directiveInject(token,flags=InjectFlags.Default){const lView=getLView();return null===lView?\u0275\u0275inject2(token,flags):getOrCreateInjectable(getCurrentTNode(),lView,resolveForwardRef(token),flags)}function \u0275\u0275invalidFactory(){throw new Error("invalid")}function processHostBindingOpCodes(tView,lView){const hostBindingOpCodes=tView.hostBindingOpCodes;if(null===hostBindingOpCodes)return;const consumer=getReactiveLViewConsumer(lView,REACTIVE_HOST_BINDING_CONSUMER);try{for(let i=0;i<hostBindingOpCodes.length;i++){const opCode=hostBindingOpCodes[i];if(opCode<0)setSelectedIndex(~opCode);else{const directiveIdx=opCode,bindingRootIndx=hostBindingOpCodes[++i],hostBindingFn=hostBindingOpCodes[++i];setBindingRootForHostBindings(bindingRootIndx,directiveIdx),consumer.runInContext(hostBindingFn,2,lView[directiveIdx])}}}finally{null===lView[REACTIVE_HOST_BINDING_CONSUMER]&&commitLViewConsumerIfHasProducers(lView,REACTIVE_HOST_BINDING_CONSUMER),setSelectedIndex(-1)}}function createLView(parentLView,tView,context,flags,host,tHostNode,environment,renderer,injector,embeddedViewInjector,hydrationInfo){const lView=tView.blueprint.slice();return lView[HOST]=host,lView[FLAGS]=140|flags,(null!==embeddedViewInjector||parentLView&&2048&parentLView[FLAGS])&&(lView[FLAGS]|=2048),resetPreOrderHookFlags(lView),lView[PARENT]=lView[DECLARATION_VIEW]=parentLView,lView[CONTEXT]=context,lView[ENVIRONMENT]=environment||parentLView&&parentLView[ENVIRONMENT],lView[RENDERER]=renderer||parentLView&&parentLView[RENDERER],lView[INJECTOR$1]=injector||parentLView&&parentLView[INJECTOR$1]||null,lView[T_HOST]=tHostNode,lView[ID]=getUniqueLViewId(),lView[HYDRATION]=hydrationInfo,lView[EMBEDDED_VIEW_INJECTOR]=embeddedViewInjector,lView[DECLARATION_COMPONENT_VIEW]=2==tView.type?parentLView[DECLARATION_COMPONENT_VIEW]:lView,lView}function getOrCreateTNode(tView,index,type,name,attrs){let tNode=tView.data[index];if(null===tNode)tNode=createTNodeAtIndex(tView,index,type,name,attrs),isInI18nBlock()&&(tNode.flags|=32);else if(64&tNode.type){tNode.type=type,tNode.value=name,tNode.attrs=attrs;const parent=getCurrentParentTNode();tNode.injectorIndex=null===parent?-1:parent.injectorIndex}return setCurrentTNode(tNode,!0),tNode}function createTNodeAtIndex(tView,index,type,name,attrs){const currentTNode=getCurrentTNodePlaceholderOk(),isParent=isCurrentTNodeParent(),tNode=tView.data[index]=createTNode(0,isParent?currentTNode:currentTNode&&currentTNode.parent,type,index,name,attrs);return null===tView.firstChild&&(tView.firstChild=tNode),null!==currentTNode&&(isParent?null==currentTNode.child&&null!==tNode.parent&&(currentTNode.child=tNode):null===currentTNode.next&&(currentTNode.next=tNode,tNode.prev=currentTNode)),tNode}function allocExpando(tView,lView,numSlotsToAlloc,initialValue){if(0===numSlotsToAlloc)return-1;const allocIdx=lView.length;for(let i=0;i<numSlotsToAlloc;i++)lView.push(initialValue),tView.blueprint.push(initialValue),tView.data.push(null);return allocIdx}function executeTemplate(tView,lView,templateFn,rf,context){const consumer=getReactiveLViewConsumer(lView,REACTIVE_TEMPLATE_CONSUMER),prevSelectedIndex=getSelectedIndex(),isUpdatePhase=2&rf;try{if(setSelectedIndex(-1),isUpdatePhase&&lView.length>HEADER_OFFSET&&selectIndexInternal(tView,lView,HEADER_OFFSET,!1),profiler(isUpdatePhase?2:0,context),isUpdatePhase)consumer.runInContext(templateFn,rf,context);else{const prevConsumer=setActiveConsumer(null);try{templateFn(rf,context)}finally{setActiveConsumer(prevConsumer)}}}finally{isUpdatePhase&&null===lView[REACTIVE_TEMPLATE_CONSUMER]&&commitLViewConsumerIfHasProducers(lView,REACTIVE_TEMPLATE_CONSUMER),setSelectedIndex(prevSelectedIndex),profiler(isUpdatePhase?3:1,context)}}function executeContentQueries(tView,tNode,lView){if(isContentQueryHost(tNode)){const prevConsumer=setActiveConsumer(null);try{const end=tNode.directiveEnd;for(let directiveIndex=tNode.directiveStart;directiveIndex<end;directiveIndex++){const def=tView.data[directiveIndex];def.contentQueries&&def.contentQueries(1,lView[directiveIndex],directiveIndex)}}finally{setActiveConsumer(prevConsumer)}}}function createDirectivesInstances(tView,lView,tNode){getBindingsEnabled()&&(instantiateAllDirectives(tView,lView,tNode,getNativeByTNode(tNode,lView)),64==(64&tNode.flags)&&invokeDirectivesHostBindings(tView,lView,tNode))}function saveResolvedLocalsInData(viewData,tNode,localRefExtractor=getNativeByTNode){const localNames=tNode.localNames;if(null!==localNames){let localIndex=tNode.index+1;for(let i=0;i<localNames.length;i+=2){const index=localNames[i+1],value=-1===index?localRefExtractor(tNode,viewData):viewData[index];viewData[localIndex++]=value}}}function getOrCreateComponentTView(def){const tView=def.tView;return null===tView||tView.incompleteFirstPass?def.tView=createTView(1,null,def.template,def.decls,def.vars,def.directiveDefs,def.pipeDefs,def.viewQuery,def.schemas,def.consts,def.id):tView}function createTView(type,declTNode,templateFn,decls,vars,directives,pipes,viewQuery,schemas,constsOrFactory,ssrId){const bindingStartIndex=HEADER_OFFSET+decls,initialViewLength=bindingStartIndex+vars,blueprint=createViewBlueprint(bindingStartIndex,initialViewLength),consts="function"==typeof constsOrFactory?constsOrFactory():constsOrFactory;return blueprint[TVIEW]={type,blueprint,template:templateFn,queries:null,viewQuery,declTNode,data:blueprint.slice().fill(null,bindingStartIndex),bindingStartIndex,expandoStartIndex:initialViewLength,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof directives?directives():directives,pipeRegistry:"function"==typeof pipes?pipes():pipes,firstChild:null,schemas,consts,incompleteFirstPass:!1,ssrId}}function createViewBlueprint(bindingStartIndex,initialViewLength){const blueprint=[];for(let i=0;i<initialViewLength;i++)blueprint.push(i<bindingStartIndex?null:NO_CHANGE);return blueprint}function locateHostElement(renderer,elementOrSelector,encapsulation,injector){const preserveContent=injector.get(PRESERVE_HOST_CONTENT,!1)||encapsulation===ViewEncapsulation$1.ShadowDom,rootElement=renderer.selectRootElement(elementOrSelector,preserveContent);return applyRootElementTransform(rootElement),rootElement}function applyRootElementTransform(rootElement){_applyRootElementTransformImpl(rootElement)}__name(\u0275\u0275directiveInject,"\u0275\u0275directiveInject"),__name(\u0275\u0275invalidFactory,"\u0275\u0275invalidFactory"),__name(processHostBindingOpCodes,"processHostBindingOpCodes"),__name(createLView,"createLView"),__name(getOrCreateTNode,"getOrCreateTNode"),__name(createTNodeAtIndex,"createTNodeAtIndex"),__name(allocExpando,"allocExpando"),__name(executeTemplate,"executeTemplate"),__name(executeContentQueries,"executeContentQueries"),__name(createDirectivesInstances,"createDirectivesInstances"),__name(saveResolvedLocalsInData,"saveResolvedLocalsInData"),__name(getOrCreateComponentTView,"getOrCreateComponentTView"),__name(createTView,"createTView"),__name(createViewBlueprint,"createViewBlueprint"),__name(locateHostElement,"locateHostElement"),__name(applyRootElementTransform,"applyRootElementTransform");let _applyRootElementTransformImpl=__name(rootElement=>null,"_applyRootElementTransformImpl");function applyRootElementTransformImpl(rootElement){rootElement.hasAttribute(SKIP_HYDRATION_ATTR_NAME)?clearElementContents(rootElement):processTextNodeMarkersBeforeHydration(rootElement)}function enableApplyRootElementTransformImpl(){_applyRootElementTransformImpl=applyRootElementTransformImpl}function storeCleanupWithContext(tView,lView,context,cleanupFn){const lCleanup=getOrCreateLViewCleanup(lView);lCleanup.push(context),tView.firstCreatePass&&getOrCreateTViewCleanup(tView).push(cleanupFn,lCleanup.length-1)}function createTNode(tView,tParent,type,index,value,attrs){let injectorIndex=tParent?tParent.injectorIndex:-1,flags=0;return isInSkipHydrationBlock$1()&&(flags|=128),{type,index,insertBeforeIndex:null,injectorIndex,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags,providerIndexes:0,value,attrs,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:tParent,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function generatePropertyAliases(aliasMap,directiveIndex,propertyAliases,hostDirectiveAliasMap){for(let publicName in aliasMap)if(aliasMap.hasOwnProperty(publicName)){propertyAliases=null===propertyAliases?{}:propertyAliases;const internalName=aliasMap[publicName];null===hostDirectiveAliasMap?addPropertyAlias(propertyAliases,directiveIndex,publicName,internalName):hostDirectiveAliasMap.hasOwnProperty(publicName)&&addPropertyAlias(propertyAliases,directiveIndex,hostDirectiveAliasMap[publicName],internalName)}return propertyAliases}function addPropertyAlias(propertyAliases,directiveIndex,publicName,internalName){propertyAliases.hasOwnProperty(publicName)?propertyAliases[publicName].push(directiveIndex,internalName):propertyAliases[publicName]=[directiveIndex,internalName]}function initializeInputAndOutputAliases(tView,tNode,hostDirectiveDefinitionMap){const end=tNode.directiveEnd,tViewData=tView.data,tNodeAttrs=tNode.attrs,inputsFromAttrs=[];let inputsStore=null,outputsStore=null;for(let directiveIndex=tNode.directiveStart;directiveIndex<end;directiveIndex++){const directiveDef=tViewData[directiveIndex],aliasData=hostDirectiveDefinitionMap?hostDirectiveDefinitionMap.get(directiveDef):null,aliasedOutputs=aliasData?aliasData.outputs:null;inputsStore=generatePropertyAliases(directiveDef.inputs,directiveIndex,inputsStore,aliasData?aliasData.inputs:null),outputsStore=generatePropertyAliases(directiveDef.outputs,directiveIndex,outputsStore,aliasedOutputs);const initialInputs=null===inputsStore||null===tNodeAttrs||isInlineTemplate(tNode)?null:generateInitialInputs(inputsStore,directiveIndex,tNodeAttrs);inputsFromAttrs.push(initialInputs)}null!==inputsStore&&(inputsStore.hasOwnProperty("class")&&(tNode.flags|=8),inputsStore.hasOwnProperty("style")&&(tNode.flags|=16)),tNode.initialInputs=inputsFromAttrs,tNode.inputs=inputsStore,tNode.outputs=outputsStore}function mapPropName(name){return"class"===name?"className":"for"===name?"htmlFor":"formaction"===name?"formAction":"innerHtml"===name?"innerHTML":"readonly"===name?"readOnly":"tabindex"===name?"tabIndex":name}function elementPropertyInternal(tView,tNode,lView,propName,value,renderer,sanitizer,nativeOnly){const element=getNativeByTNode(tNode,lView);let dataValue,inputData=tNode.inputs;!nativeOnly&&null!=inputData&&(dataValue=inputData[propName])?(setInputsForProperty(tView,lView,dataValue,propName,value),isComponentHost(tNode)&&markDirtyIfOnPush(lView,tNode.index)):3&tNode.type&&(propName=mapPropName(propName),value=null!=sanitizer?sanitizer(value,tNode.value||"",propName):value,renderer.setProperty(element,propName,value))}function markDirtyIfOnPush(lView,viewIndex){const childComponentLView=getComponentLViewByIndex(viewIndex,lView);16&childComponentLView[FLAGS]||(childComponentLView[FLAGS]|=64)}function setNgReflectProperty(lView,element,type,attrName,value){const renderer=lView[RENDERER];attrName=normalizeDebugBindingName(attrName);const debugValue=normalizeDebugBindingValue(value);if(3&type)null==value?renderer.removeAttribute(element,attrName):renderer.setAttribute(element,attrName,debugValue);else{const textContent=escapeCommentText(`bindings=${JSON.stringify({[attrName]:debugValue},null,2)}`);renderer.setValue(element,textContent)}}function resolveDirectives(tView,lView,tNode,localRefs){if(getBindingsEnabled()){const exportsMap=null===localRefs?null:{"":-1},matchResult=findDirectiveDefMatches(tView,tNode);let directiveDefs,hostDirectiveDefs;null===matchResult?directiveDefs=hostDirectiveDefs=null:[directiveDefs,hostDirectiveDefs]=matchResult,null!==directiveDefs&&initializeDirectives(tView,lView,tNode,directiveDefs,exportsMap,hostDirectiveDefs),exportsMap&&cacheMatchingLocalNames(tNode,localRefs,exportsMap)}tNode.mergedAttrs=mergeHostAttrs(tNode.mergedAttrs,tNode.attrs)}function initializeDirectives(tView,lView,tNode,directives,exportsMap,hostDirectiveDefs){for(let i=0;i<directives.length;i++)diPublicInInjector(getOrCreateNodeInjectorForNode(tNode,lView),tView,directives[i].type);initTNodeFlags(tNode,tView.data.length,directives.length);for(let i=0;i<directives.length;i++){const def=directives[i];def.providersResolver&&def.providersResolver(def)}let preOrderHooksFound=!1,preOrderCheckHooksFound=!1,directiveIdx=allocExpando(tView,lView,directives.length,null);for(let i=0;i<directives.length;i++){const def=directives[i];tNode.mergedAttrs=mergeHostAttrs(tNode.mergedAttrs,def.hostAttrs),configureViewWithDirective(tView,tNode,lView,directiveIdx,def),saveNameToExportMap(directiveIdx,def,exportsMap),null!==def.contentQueries&&(tNode.flags|=4),(null!==def.hostBindings||null!==def.hostAttrs||0!==def.hostVars)&&(tNode.flags|=64);const lifeCycleHooks=def.type.prototype;!preOrderHooksFound&&(lifeCycleHooks.ngOnChanges||lifeCycleHooks.ngOnInit||lifeCycleHooks.ngDoCheck)&&((tView.preOrderHooks??=[]).push(tNode.index),preOrderHooksFound=!0),!preOrderCheckHooksFound&&(lifeCycleHooks.ngOnChanges||lifeCycleHooks.ngDoCheck)&&((tView.preOrderCheckHooks??=[]).push(tNode.index),preOrderCheckHooksFound=!0),directiveIdx++}initializeInputAndOutputAliases(tView,tNode,hostDirectiveDefs)}function registerHostBindingOpCodes(tView,tNode,directiveIdx,directiveVarsIdx,def){const hostBindings=def.hostBindings;if(hostBindings){let hostBindingOpCodes=tView.hostBindingOpCodes;null===hostBindingOpCodes&&(hostBindingOpCodes=tView.hostBindingOpCodes=[]);const elementIndx=~tNode.index;lastSelectedElementIdx(hostBindingOpCodes)!=elementIndx&&hostBindingOpCodes.push(elementIndx),hostBindingOpCodes.push(directiveIdx,directiveVarsIdx,hostBindings)}}function lastSelectedElementIdx(hostBindingOpCodes){let i=hostBindingOpCodes.length;for(;i>0;){const value=hostBindingOpCodes[--i];if("number"==typeof value&&value<0)return value}return 0}function instantiateAllDirectives(tView,lView,tNode,native){const start=tNode.directiveStart,end=tNode.directiveEnd;isComponentHost(tNode)&&addComponentLogic(lView,tNode,tView.data[start+tNode.componentOffset]),tView.firstCreatePass||getOrCreateNodeInjectorForNode(tNode,lView),attachPatchData(native,lView);const initialInputs=tNode.initialInputs;for(let i=start;i<end;i++){const def=tView.data[i],directive=getNodeInjectable(lView,tView,i,tNode);attachPatchData(directive,lView),null!==initialInputs&&setInputsFromAttrs(0,i-start,directive,def,0,initialInputs),isComponentDef(def)&&(getComponentLViewByIndex(tNode.index,lView)[CONTEXT]=getNodeInjectable(lView,tView,i,tNode))}}function invokeDirectivesHostBindings(tView,lView,tNode){const start=tNode.directiveStart,end=tNode.directiveEnd,elementIndex=tNode.index,currentDirectiveIndex=getCurrentDirectiveIndex();try{setSelectedIndex(elementIndex);for(let dirIndex=start;dirIndex<end;dirIndex++){const def=tView.data[dirIndex],directive=lView[dirIndex];setCurrentDirectiveIndex(dirIndex),(null!==def.hostBindings||0!==def.hostVars||null!==def.hostAttrs)&&invokeHostBindingsInCreationMode(def,directive)}}finally{setSelectedIndex(-1),setCurrentDirectiveIndex(currentDirectiveIndex)}}function invokeHostBindingsInCreationMode(def,directive){null!==def.hostBindings&&def.hostBindings(1,directive)}function findDirectiveDefMatches(tView,tNode){const registry=tView.directiveRegistry;let matches=null,hostDirectiveDefs=null;if(registry)for(let i=0;i<registry.length;i++){const def=registry[i];if(isNodeMatchingSelectorList(tNode,def.selectors,!1))if(matches||(matches=[]),isComponentDef(def))if(null!==def.findHostDirectiveDefs){const hostDirectiveMatches=[];hostDirectiveDefs=hostDirectiveDefs||new Map,def.findHostDirectiveDefs(def,hostDirectiveMatches,hostDirectiveDefs),matches.unshift(...hostDirectiveMatches,def),markAsComponentHost(tView,tNode,hostDirectiveMatches.length)}else matches.unshift(def),markAsComponentHost(tView,tNode,0);else hostDirectiveDefs=hostDirectiveDefs||new Map,def.findHostDirectiveDefs?.(def,matches,hostDirectiveDefs),matches.push(def)}return null===matches?null:[matches,hostDirectiveDefs]}function markAsComponentHost(tView,hostTNode,componentOffset){hostTNode.componentOffset=componentOffset,(tView.components??=[]).push(hostTNode.index)}function cacheMatchingLocalNames(tNode,localRefs,exportsMap){if(localRefs){const localNames=tNode.localNames=[];for(let i=0;i<localRefs.length;i+=2){const index=exportsMap[localRefs[i+1]];if(null==index)throw new RuntimeError(-301,!1);localNames.push(localRefs[i],index)}}}function saveNameToExportMap(directiveIdx,def,exportsMap){if(exportsMap){if(def.exportAs)for(let i=0;i<def.exportAs.length;i++)exportsMap[def.exportAs[i]]=directiveIdx;isComponentDef(def)&&(exportsMap[""]=directiveIdx)}}function initTNodeFlags(tNode,index,numberOfDirectives){tNode.flags|=1,tNode.directiveStart=index,tNode.directiveEnd=index+numberOfDirectives,tNode.providerIndexes=index}function configureViewWithDirective(tView,tNode,lView,directiveIndex,def){tView.data[directiveIndex]=def;const directiveFactory=def.factory||(def.factory=getFactoryDef(def.type)),nodeInjectorFactory=new NodeInjectorFactory(directiveFactory,isComponentDef(def),\u0275\u0275directiveInject);tView.blueprint[directiveIndex]=nodeInjectorFactory,lView[directiveIndex]=nodeInjectorFactory,registerHostBindingOpCodes(tView,tNode,directiveIndex,allocExpando(tView,lView,def.hostVars,NO_CHANGE),def)}function addComponentLogic(lView,hostTNode,def){const native=getNativeByTNode(hostTNode,lView),componentView=addToViewTree(lView,createLView(lView,getOrCreateComponentTView(def),null,def.onPush?64:16,native,hostTNode,null,lView[ENVIRONMENT].rendererFactory.createRenderer(native,def),null,null,null));lView[hostTNode.index]=componentView}function elementAttributeInternal(tNode,lView,name,value,sanitizer,namespace){const element=getNativeByTNode(tNode,lView);setElementAttribute(lView[RENDERER],element,namespace,tNode.value,name,value,sanitizer)}function setElementAttribute(renderer,element,namespace,tagName,name,value,sanitizer){if(null==value)renderer.removeAttribute(element,name,namespace);else{const strValue=null==sanitizer?renderStringify(value):sanitizer(value,tagName||"",name);renderer.setAttribute(element,name,strValue,namespace)}}function setInputsFromAttrs(lView,directiveIndex,instance,def,tNode,initialInputData){const initialInputs=initialInputData[directiveIndex];if(null!==initialInputs)for(let i=0;i<initialInputs.length;)writeToDirectiveInput(def,instance,initialInputs[i++],initialInputs[i++],initialInputs[i++])}function writeToDirectiveInput(def,instance,publicName,privateName,value){const prevConsumer=setActiveConsumer(null);try{null!==def.setInput?def.setInput(instance,value,publicName,privateName):instance[privateName]=value}finally{setActiveConsumer(prevConsumer)}}function generateInitialInputs(inputs,directiveIndex,attrs){let inputsToStore=null,i=0;for(;i<attrs.length;){const attrName=attrs[i];if(0!==attrName)if(5!==attrName){if("number"==typeof attrName)break;if(inputs.hasOwnProperty(attrName)){null===inputsToStore&&(inputsToStore=[]);const inputConfig=inputs[attrName];for(let j=0;j<inputConfig.length;j+=2)if(inputConfig[j]===directiveIndex){inputsToStore.push(attrName,inputConfig[j+1],attrs[i+1]);break}}i+=2}else i+=2;else i+=4}return inputsToStore}function createLContainer(hostNative,currentView,native,tNode){return[hostNative,!0,!1,currentView,null,0,tNode,native,null,null,null]}function refreshContentQueries(tView,lView){const contentQueries=tView.contentQueries;if(null!==contentQueries)for(let i=0;i<contentQueries.length;i+=2){const directiveDefIdx=contentQueries[i+1];if(-1!==directiveDefIdx){const directiveDef=tView.data[directiveDefIdx];setCurrentQueryIndex(contentQueries[i]),directiveDef.contentQueries(2,lView[directiveDefIdx],directiveDefIdx)}}}function addToViewTree(lView,lViewOrLContainer){return lView[CHILD_HEAD]?lView[CHILD_TAIL][NEXT]=lViewOrLContainer:lView[CHILD_HEAD]=lViewOrLContainer,lView[CHILD_TAIL]=lViewOrLContainer,lViewOrLContainer}function executeViewQueryFn(flags,viewQueryFn,component){setCurrentQueryIndex(0);const prevConsumer=setActiveConsumer(null);try{viewQueryFn(flags,component)}finally{setActiveConsumer(prevConsumer)}}function getOrCreateLViewCleanup(view){return view[CLEANUP]||(view[CLEANUP]=[])}function getOrCreateTViewCleanup(tView){return tView.cleanup||(tView.cleanup=[])}function loadComponentRenderer(currentDef,tNode,lView){return(null===currentDef||isComponentDef(currentDef))&&(lView=unwrapLView(lView[tNode.index])),lView[RENDERER]}function handleError(lView,error){const injector=lView[INJECTOR$1],errorHandler=injector?injector.get(ErrorHandler,null):null;errorHandler&&errorHandler.handleError(error)}function setInputsForProperty(tView,lView,inputs,publicName,value){for(let i=0;i<inputs.length;){const index=inputs[i++],privateName=inputs[i++];writeToDirectiveInput(tView.data[index],lView[index],publicName,privateName,value)}}function textBindingInternal(lView,index,value){const element=getNativeByIndex(index,lView);updateTextNode(lView[RENDERER],element,value)}function renderComponent(hostLView,componentHostIdx){const componentView=getComponentLViewByIndex(componentHostIdx,hostLView),componentTView=componentView[TVIEW];syncViewWithBlueprint(componentTView,componentView);const hostRNode=componentView[HOST];null!==hostRNode&&null===componentView[HYDRATION]&&(componentView[HYDRATION]=retrieveHydrationInfo(hostRNode,componentView[INJECTOR$1])),renderView(componentTView,componentView,componentView[CONTEXT])}function syncViewWithBlueprint(tView,lView){for(let i=lView.length;i<tView.blueprint.length;i++)lView.push(tView.blueprint[i])}function renderView(tView,lView,context){enterView(lView);try{const viewQuery=tView.viewQuery;null!==viewQuery&&executeViewQueryFn(1,viewQuery,context);const templateFn=tView.template;null!==templateFn&&executeTemplate(tView,lView,templateFn,1,context),tView.firstCreatePass&&(tView.firstCreatePass=!1),tView.staticContentQueries&&refreshContentQueries(tView,lView),tView.staticViewQueries&&executeViewQueryFn(2,tView.viewQuery,context);const components=tView.components;null!==components&&renderChildComponents(lView,components)}catch(error){throw tView.firstCreatePass&&(tView.incompleteFirstPass=!0,tView.firstCreatePass=!1),error}finally{lView[FLAGS]&=-5,leaveView()}}function renderChildComponents(hostLView,components){for(let i=0;i<components.length;i++)renderComponent(hostLView,components[i])}__name(applyRootElementTransformImpl,"applyRootElementTransformImpl"),__name(enableApplyRootElementTransformImpl,"enableApplyRootElementTransformImpl"),__name(storeCleanupWithContext,"storeCleanupWithContext"),__name(createTNode,"createTNode"),__name(generatePropertyAliases,"generatePropertyAliases"),__name(addPropertyAlias,"addPropertyAlias"),__name(initializeInputAndOutputAliases,"initializeInputAndOutputAliases"),__name(mapPropName,"mapPropName"),__name(elementPropertyInternal,"elementPropertyInternal"),__name(markDirtyIfOnPush,"markDirtyIfOnPush"),__name(setNgReflectProperty,"setNgReflectProperty"),__name(function setNgReflectProperties(lView,element,type,dataValue,value){if(7&type)for(let i=0;i<dataValue.length;i+=2)setNgReflectProperty(lView,element,type,dataValue[i+1],value)},"setNgReflectProperties"),__name(resolveDirectives,"resolveDirectives"),__name(initializeDirectives,"initializeDirectives"),__name(registerHostBindingOpCodes,"registerHostBindingOpCodes"),__name(lastSelectedElementIdx,"lastSelectedElementIdx"),__name(instantiateAllDirectives,"instantiateAllDirectives"),__name(invokeDirectivesHostBindings,"invokeDirectivesHostBindings"),__name(invokeHostBindingsInCreationMode,"invokeHostBindingsInCreationMode"),__name(findDirectiveDefMatches,"findDirectiveDefMatches"),__name(markAsComponentHost,"markAsComponentHost"),__name(cacheMatchingLocalNames,"cacheMatchingLocalNames"),__name(saveNameToExportMap,"saveNameToExportMap"),__name(initTNodeFlags,"initTNodeFlags"),__name(configureViewWithDirective,"configureViewWithDirective"),__name(addComponentLogic,"addComponentLogic"),__name(elementAttributeInternal,"elementAttributeInternal"),__name(setElementAttribute,"setElementAttribute"),__name(setInputsFromAttrs,"setInputsFromAttrs"),__name(writeToDirectiveInput,"writeToDirectiveInput"),__name(generateInitialInputs,"generateInitialInputs"),__name(createLContainer,"createLContainer"),__name(refreshContentQueries,"refreshContentQueries"),__name(addToViewTree,"addToViewTree"),__name(executeViewQueryFn,"executeViewQueryFn"),__name(function storePropertyBindingMetadata(tData,tNode,propertyName,bindingIndex,...interpolationParts){if(null===tData[bindingIndex]&&(null==tNode.inputs||!tNode.inputs[propertyName])){(tNode.propertyBindings||(tNode.propertyBindings=[])).push(bindingIndex);let bindingMetadata=propertyName;interpolationParts.length>0&&(bindingMetadata+=INTERPOLATION_DELIMITER+interpolationParts.join(INTERPOLATION_DELIMITER)),tData[bindingIndex]=bindingMetadata}},"storePropertyBindingMetadata"),__name(getOrCreateLViewCleanup,"getOrCreateLViewCleanup"),__name(getOrCreateTViewCleanup,"getOrCreateTViewCleanup"),__name(loadComponentRenderer,"loadComponentRenderer"),__name(handleError,"handleError"),__name(setInputsForProperty,"setInputsForProperty"),__name(textBindingInternal,"textBindingInternal"),__name(renderComponent,"renderComponent"),__name(syncViewWithBlueprint,"syncViewWithBlueprint"),__name(renderView,"renderView"),__name(renderChildComponents,"renderChildComponents");class NodeInjectorDestroyRef extends(null){constructor(_lView){super(),this._lView=_lView}onDestroy(callback){return storeLViewOnDestroy(this._lView,callback),()=>removeLViewOnDestroy(this._lView,callback)}}__name(NodeInjectorDestroyRef,"NodeInjectorDestroyRef"),__name(function injectDestroyRef(){return new NodeInjectorDestroyRef(getLView())},"injectDestroyRef");let EffectManager=(()=>{class EffectManager2{constructor(){this.all=new Set,this.queue=new Map}create(effectFn,destroyRef,allowSignalWrites){const zone=typeof Zone>"u"?null:Zone.current,watch=new Watch(effectFn,watch2=>{this.all.has(watch2)&&this.queue.set(watch2,zone)},allowSignalWrites);let unregisterOnDestroy;this.all.add(watch),watch.notify();const destroy=__name(()=>{watch.cleanup(),unregisterOnDestroy?.(),this.all.delete(watch),this.queue.delete(watch)},"destroy");return unregisterOnDestroy=destroyRef?.onDestroy(destroy),{destroy}}flush(){if(0!==this.queue.size)for(const[watch,zone]of this.queue)this.queue.delete(watch),zone?zone.run(()=>watch.run()):watch.run()}get isQueueEmpty(){return 0===this.queue.size}}return __name(EffectManager2,"EffectManager"),EffectManager2.\u0275prov=\u0275\u0275defineInjectable({token:EffectManager2,providedIn:"root",factory:()=>new EffectManager2}),EffectManager2})();function computeStaticStyling(tNode,attrs,writeToHost){let styles=writeToHost?tNode.styles:null,classes=writeToHost?tNode.classes:null,mode=0;if(null!==attrs)for(let i=0;i<attrs.length;i++){const value=attrs[i];"number"==typeof value?mode=value:1==mode?classes=concatStringsWithSpace(classes,value):2==mode&&(styles=concatStringsWithSpace(styles,value+": "+attrs[++i]+";"))}writeToHost?tNode.styles=styles:tNode.stylesWithoutHost=styles,writeToHost?tNode.classes=classes:tNode.classesWithoutHost=classes}function collectNativeNodes(tView,lView,tNode,result,isProjection=!1){for(;null!==tNode;){const lNode=lView[tNode.index];if(null!==lNode&&result.push(unwrapRNode(lNode)),isLContainer(lNode)){for(let i=CONTAINER_HEADER_OFFSET;i<lNode.length;i++){const lViewInAContainer=lNode[i],lViewFirstChildTNode=lViewInAContainer[TVIEW].firstChild;null!==lViewFirstChildTNode&&collectNativeNodes(lViewInAContainer[TVIEW],lViewInAContainer,lViewFirstChildTNode,result)}lNode[NATIVE]!==lNode[HOST]&&result.push(lNode[NATIVE])}const tNodeType=tNode.type;if(8&tNodeType)collectNativeNodes(tView,lView,tNode.child,result);else if(32&tNodeType){const nextRNode=icuContainerIterate(tNode,lView);let rNode;for(;rNode=nextRNode();)result.push(rNode)}else if(16&tNodeType){const nodesInSlot=getProjectionNodes(lView,tNode);if(Array.isArray(nodesInSlot))result.push(...nodesInSlot);else{const parentView=getLViewParent(lView[DECLARATION_COMPONENT_VIEW]);collectNativeNodes(parentView[TVIEW],parentView,nodesInSlot,result,!0)}}tNode=isProjection?tNode.projectionNext:tNode.next}return result}function detectChangesInternal(tView,lView,context,notifyErrorHandler=!0){const rendererFactory=lView[ENVIRONMENT].rendererFactory;rendererFactory.begin&&rendererFactory.begin();try{refreshView(tView,lView,tView.template,context)}catch(error){throw notifyErrorHandler&&handleError(lView,error),error}finally{rendererFactory.end&&rendererFactory.end(),lView[ENVIRONMENT].effectManager?.flush()}}function detectChanges(component){const view=getComponentViewByInstance(component);detectChangesInternal(view[TVIEW],view,component)}function refreshView(tView,lView,templateFn,context){const flags=lView[FLAGS];if(256!=(256&flags)){lView[ENVIRONMENT].effectManager?.flush(),enterView(lView);try{resetPreOrderHookFlags(lView),setBindingIndex(tView.bindingStartIndex),null!==templateFn&&executeTemplate(tView,lView,templateFn,2,context);const hooksInitPhaseCompleted=3==(3&flags);if(hooksInitPhaseCompleted){const preOrderCheckHooks=tView.preOrderCheckHooks;null!==preOrderCheckHooks&&executeCheckHooks(lView,preOrderCheckHooks,null)}else{const preOrderHooks=tView.preOrderHooks;null!==preOrderHooks&&executeInitAndCheckHooks(lView,preOrderHooks,0,null),incrementInitPhaseFlags(lView,0)}if(markTransplantedViewsForRefresh(lView),refreshEmbeddedViews(lView),null!==tView.contentQueries&&refreshContentQueries(tView,lView),hooksInitPhaseCompleted){const contentCheckHooks=tView.contentCheckHooks;null!==contentCheckHooks&&executeCheckHooks(lView,contentCheckHooks)}else{const contentHooks=tView.contentHooks;null!==contentHooks&&executeInitAndCheckHooks(lView,contentHooks,1),incrementInitPhaseFlags(lView,1)}processHostBindingOpCodes(tView,lView);const components=tView.components;null!==components&&refreshChildComponents(lView,components);const viewQuery=tView.viewQuery;if(null!==viewQuery&&executeViewQueryFn(2,viewQuery,context),hooksInitPhaseCompleted){const viewCheckHooks=tView.viewCheckHooks;null!==viewCheckHooks&&executeCheckHooks(lView,viewCheckHooks)}else{const viewHooks=tView.viewHooks;null!==viewHooks&&executeInitAndCheckHooks(lView,viewHooks,2),incrementInitPhaseFlags(lView,2)}!0===tView.firstUpdatePass&&(tView.firstUpdatePass=!1),lView[FLAGS]&=-73,clearViewRefreshFlag(lView)}finally{leaveView()}}}function refreshEmbeddedViews(lView){for(let lContainer=getFirstLContainer(lView);null!==lContainer;lContainer=getNextLContainer(lContainer))for(let i=CONTAINER_HEADER_OFFSET;i<lContainer.length;i++){const embeddedLView=lContainer[i],embeddedTView=embeddedLView[TVIEW];viewAttachedToChangeDetector(embeddedLView)&&refreshView(embeddedTView,embeddedLView,embeddedTView.template,embeddedLView[CONTEXT])}}function markTransplantedViewsForRefresh(lView){for(let lContainer=getFirstLContainer(lView);null!==lContainer;lContainer=getNextLContainer(lContainer)){if(!lContainer[HAS_TRANSPLANTED_VIEWS])continue;const movedViews=lContainer[MOVED_VIEWS];for(let i=0;i<movedViews.length;i++){markViewForRefresh(movedViews[i])}}}function refreshComponent(hostLView,componentHostIdx){const componentView=getComponentLViewByIndex(componentHostIdx,hostLView);if(viewAttachedToChangeDetector(componentView)){const tView=componentView[TVIEW];80&componentView[FLAGS]?refreshView(tView,componentView,tView.template,componentView[CONTEXT]):componentView[DESCENDANT_VIEWS_TO_REFRESH]>0&&refreshContainsDirtyView(componentView)}}function refreshContainsDirtyView(lView){for(let lContainer=getFirstLContainer(lView);null!==lContainer;lContainer=getNextLContainer(lContainer))for(let i=CONTAINER_HEADER_OFFSET;i<lContainer.length;i++){const embeddedLView=lContainer[i];if(viewAttachedToChangeDetector(embeddedLView))if(1024&embeddedLView[FLAGS]){const embeddedTView=embeddedLView[TVIEW];refreshView(embeddedTView,embeddedLView,embeddedTView.template,embeddedLView[CONTEXT])}else embeddedLView[DESCENDANT_VIEWS_TO_REFRESH]>0&&refreshContainsDirtyView(embeddedLView)}const components=lView[TVIEW].components;if(null!==components)for(let i=0;i<components.length;i++){const componentView=getComponentLViewByIndex(components[i],lView);viewAttachedToChangeDetector(componentView)&&componentView[DESCENDANT_VIEWS_TO_REFRESH]>0&&refreshContainsDirtyView(componentView)}}function refreshChildComponents(hostLView,components){for(let i=0;i<components.length;i++)refreshComponent(hostLView,components[i])}__name(function effect(effectFn,options){!options?.injector&&assertInInjectionContext();const injector=options?.injector??inject2(Injector2),effectManager=injector.get(EffectManager),destroyRef=!0!==options?.manualCleanup?injector.get(null):null;return effectManager.create(effectFn,destroyRef,!!options?.allowSignalWrites)},"effect"),__name(computeStaticStyling,"computeStaticStyling"),__name(collectNativeNodes,"collectNativeNodes"),__name(detectChangesInternal,"detectChangesInternal"),__name(function checkNoChangesInternal(tView,lView,context,notifyErrorHandler=!0){setIsInCheckNoChangesMode(!0);try{detectChangesInternal(tView,lView,context,notifyErrorHandler)}finally{setIsInCheckNoChangesMode(!1)}},"checkNoChangesInternal"),__name(detectChanges,"detectChanges"),__name(refreshView,"refreshView"),__name(refreshEmbeddedViews,"refreshEmbeddedViews"),__name(markTransplantedViewsForRefresh,"markTransplantedViewsForRefresh"),__name(refreshComponent,"refreshComponent"),__name(refreshContainsDirtyView,"refreshContainsDirtyView"),__name(refreshChildComponents,"refreshChildComponents");class ViewRef$1{get rootNodes(){const lView=this._lView,tView=lView[TVIEW];return collectNativeNodes(tView,lView,tView.firstChild,[])}constructor(_lView,_cdRefInjectingView){this._lView=_lView,this._cdRefInjectingView=_cdRefInjectingView,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[CONTEXT]}set context(value){this._lView[CONTEXT]=value}get destroyed(){return 256==(256&this._lView[FLAGS])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const parent=this._lView[PARENT];if(isLContainer(parent)){const viewRefs=parent[VIEW_REFS],index=viewRefs?viewRefs.indexOf(this):-1;index>-1&&(detachView(parent,index),removeFromArray(viewRefs,index))}this._attachedToViewContainer=!1}destroyLView(this._lView[TVIEW],this._lView)}onDestroy(callback){storeLViewOnDestroy(this._lView,callback)}markForCheck(){markViewDirty(this._cdRefInjectingView||this._lView)}detach(){this._lView[FLAGS]&=-129}reattach(){this._lView[FLAGS]|=128}detectChanges(){detectChangesInternal(this._lView[TVIEW],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new RuntimeError(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,renderDetachView(this._lView[TVIEW],this._lView)}attachToAppRef(appRef){if(this._attachedToViewContainer)throw new RuntimeError(902,!1);this._appRef=appRef}}__name(ViewRef$1,"ViewRef$1");class RootViewRef extends ViewRef$1{constructor(_view){super(_view),this._view=_view}detectChanges(){const lView=this._view;detectChangesInternal(lView[TVIEW],lView,lView[CONTEXT],!1)}checkNoChanges(){}get context(){return null}}__name(RootViewRef,"RootViewRef");class ComponentFactoryResolver extends ComponentFactoryResolver$1{constructor(ngModule){super(),this.ngModule=ngModule}resolveComponentFactory(component){const componentDef=getComponentDef(component);return new ComponentFactory(componentDef,this.ngModule)}}function toRefArray(map){const array=[];for(let nonMinified in map)map.hasOwnProperty(nonMinified)&&array.push({propName:map[nonMinified],templateName:nonMinified});return array}function getNamespace(elementName){const name=elementName.toLowerCase();return"svg"===name?SVG_NAMESPACE:"math"===name?MATH_ML_NAMESPACE:null}__name(ComponentFactoryResolver,"ComponentFactoryResolver"),__name(toRefArray,"toRefArray"),__name(getNamespace,"getNamespace");class ChainedInjector{constructor(injector,parentInjector){this.injector=injector,this.parentInjector=parentInjector}get(token,notFoundValue,flags){flags=convertToBitFlags(flags);const value=this.injector.get(token,NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR,flags);return value!==NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR||notFoundValue===NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR?value:this.parentInjector.get(token,notFoundValue,flags)}}__name(ChainedInjector,"ChainedInjector");class ComponentFactory extends ComponentFactory$1{get inputs(){return toRefArray(this.componentDef.inputs)}get outputs(){return toRefArray(this.componentDef.outputs)}constructor(componentDef,ngModule){super(),this.componentDef=componentDef,this.ngModule=ngModule,this.componentType=componentDef.type,this.selector=stringifyCSSSelectorList(componentDef.selectors),this.ngContentSelectors=componentDef.ngContentSelectors?componentDef.ngContentSelectors:[],this.isBoundToModule=!!ngModule}create(injector,projectableNodes,rootSelectorOrNode,environmentInjector){let realEnvironmentInjector=(environmentInjector=environmentInjector||this.ngModule)instanceof EnvironmentInjector2?environmentInjector:environmentInjector?.injector;realEnvironmentInjector&&null!==this.componentDef.getStandaloneInjector&&(realEnvironmentInjector=this.componentDef.getStandaloneInjector(realEnvironmentInjector)||realEnvironmentInjector);const rootViewInjector=realEnvironmentInjector?new ChainedInjector(injector,realEnvironmentInjector):injector,rendererFactory=rootViewInjector.get(RendererFactory2,null);if(null===rendererFactory)throw new RuntimeError(407,!1);const environment={rendererFactory,sanitizer:rootViewInjector.get(Sanitizer,null),effectManager:rootViewInjector.get(EffectManager,null)},hostRenderer=rendererFactory.createRenderer(null,this.componentDef),elementName=this.componentDef.selectors[0][0]||"div",hostRNode=rootSelectorOrNode?locateHostElement(hostRenderer,rootSelectorOrNode,this.componentDef.encapsulation,rootViewInjector):createElementNode(hostRenderer,elementName,getNamespace(elementName)),rootFlags=this.componentDef.onPush?576:528,rootTView=createTView(0,null,null,1,0,null,null,null,null,null,null),rootLView=createLView(null,rootTView,null,rootFlags,null,null,environment,hostRenderer,rootViewInjector,null,null);let component,tElementNode;enterView(rootLView);try{const rootComponentDef=this.componentDef;let rootDirectives,hostDirectiveDefs=null;rootComponentDef.findHostDirectiveDefs?(rootDirectives=[],hostDirectiveDefs=new Map,rootComponentDef.findHostDirectiveDefs(rootComponentDef,rootDirectives,hostDirectiveDefs),rootDirectives.push(rootComponentDef)):rootDirectives=[rootComponentDef];const componentView=createRootComponentView(createRootComponentTNode(rootLView,hostRNode),hostRNode,rootComponentDef,rootDirectives,rootLView,environment,hostRenderer);tElementNode=getTNode(rootTView,HEADER_OFFSET),hostRNode&&setRootNodeAttributes(hostRenderer,rootComponentDef,hostRNode,rootSelectorOrNode),void 0!==projectableNodes&&projectNodes(tElementNode,this.ngContentSelectors,projectableNodes),component=createRootComponent(componentView,rootComponentDef,rootDirectives,hostDirectiveDefs,rootLView,[LifecycleHooksFeature]),renderView(rootTView,rootLView,null)}finally{leaveView()}return new ComponentRef(this.componentType,component,createElementRef(tElementNode,rootLView),rootLView,tElementNode)}}__name(ComponentFactory,"ComponentFactory");class ComponentRef extends ComponentRef$1{constructor(componentType,instance,location2,_rootLView,_tNode){super(),this.location=location2,this._rootLView=_rootLView,this._tNode=_tNode,this.previousInputValues=null,this.instance=instance,this.hostView=this.changeDetectorRef=new RootViewRef(_rootLView),this.componentType=componentType}setInput(name,value){const inputData=this._tNode.inputs;let dataValue;if(null!==inputData&&(dataValue=inputData[name])){if(this.previousInputValues??=new Map,this.previousInputValues.has(name)&&Object.is(this.previousInputValues.get(name),value))return;const lView=this._rootLView;setInputsForProperty(lView[TVIEW],lView,dataValue,name,value),this.previousInputValues.set(name,value),markViewDirty(getComponentLViewByIndex(this._tNode.index,lView))}}get injector(){return new NodeInjector(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(callback){this.hostView.onDestroy(callback)}}function createRootComponentTNode(lView,rNode){const tView=lView[TVIEW],index=HEADER_OFFSET;return lView[index]=rNode,getOrCreateTNode(tView,index,2,"#host",null)}function createRootComponentView(tNode,hostRNode,rootComponentDef,rootDirectives,rootView,environment,hostRenderer){const tView=rootView[TVIEW];applyRootComponentStyling(rootDirectives,tNode,hostRNode,hostRenderer);let hydrationInfo=null;null!==hostRNode&&(hydrationInfo=retrieveHydrationInfo(hostRNode,rootView[INJECTOR$1]));const viewRenderer=environment.rendererFactory.createRenderer(hostRNode,rootComponentDef),componentView=createLView(rootView,getOrCreateComponentTView(rootComponentDef),null,rootComponentDef.onPush?64:16,rootView[tNode.index],tNode,environment,viewRenderer,null,null,hydrationInfo);return tView.firstCreatePass&&markAsComponentHost(tView,tNode,rootDirectives.length-1),addToViewTree(rootView,componentView),rootView[tNode.index]=componentView}function applyRootComponentStyling(rootDirectives,tNode,rNode,hostRenderer){for(const def of rootDirectives)tNode.mergedAttrs=mergeHostAttrs(tNode.mergedAttrs,def.hostAttrs);null!==tNode.mergedAttrs&&(computeStaticStyling(tNode,tNode.mergedAttrs,!0),null!==rNode&&setupStaticAttributes(hostRenderer,rNode,tNode))}function createRootComponent(componentView,rootComponentDef,rootDirectives,hostDirectiveDefs,rootLView,hostFeatures){const rootTNode=getCurrentTNode(),tView=rootLView[TVIEW],native=getNativeByTNode(rootTNode,rootLView);initializeDirectives(tView,rootLView,rootTNode,rootDirectives,null,hostDirectiveDefs);for(let i=0;i<rootDirectives.length;i++)attachPatchData(getNodeInjectable(rootLView,tView,rootTNode.directiveStart+i,rootTNode),rootLView);invokeDirectivesHostBindings(tView,rootLView,rootTNode),native&&attachPatchData(native,rootLView);const component=getNodeInjectable(rootLView,tView,rootTNode.directiveStart+rootTNode.componentOffset,rootTNode);if(componentView[CONTEXT]=rootLView[CONTEXT]=component,null!==hostFeatures)for(const feature of hostFeatures)feature(component,rootComponentDef);return executeContentQueries(tView,rootTNode,componentView),component}function setRootNodeAttributes(hostRenderer,componentDef,hostRNode,rootSelectorOrNode){if(rootSelectorOrNode)setUpAttributes(hostRenderer,hostRNode,["ng-version",VERSION.full]);else{const{attrs,classes}=extractAttrsAndClassesFromSelector(componentDef.selectors[0]);attrs&&setUpAttributes(hostRenderer,hostRNode,attrs),classes&&classes.length>0&&writeDirectClass(hostRenderer,hostRNode,classes.join(" "))}}function projectNodes(tNode,ngContentSelectors,projectableNodes){const projection=tNode.projection=[];for(let i=0;i<ngContentSelectors.length;i++){const nodesforSlot=projectableNodes[i];projection.push(null!=nodesforSlot?Array.from(nodesforSlot):null)}}function LifecycleHooksFeature(){const tNode=getCurrentTNode();registerPostOrderHooks(getLView()[TVIEW],tNode)}function getSuperType(type){return Object.getPrototypeOf(type.prototype).constructor}function \u0275\u0275InheritDefinitionFeature(definition){let superType=getSuperType(definition.type),shouldInheritFields=!0;const inheritanceChain=[definition];for(;superType;){let superDef;if(isComponentDef(definition))superDef=superType.\u0275cmp||superType.\u0275dir;else{if(superType.\u0275cmp)throw new RuntimeError(903,!1);superDef=superType.\u0275dir}if(superDef){if(shouldInheritFields){inheritanceChain.push(superDef);const writeableDef=definition;writeableDef.inputs=maybeUnwrapEmpty(definition.inputs),writeableDef.declaredInputs=maybeUnwrapEmpty(definition.declaredInputs),writeableDef.outputs=maybeUnwrapEmpty(definition.outputs);const superHostBindings=superDef.hostBindings;superHostBindings&&inheritHostBindings(definition,superHostBindings);const superViewQuery=superDef.viewQuery,superContentQueries=superDef.contentQueries;if(superViewQuery&&inheritViewQuery(definition,superViewQuery),superContentQueries&&inheritContentQueries(definition,superContentQueries),fillProperties(definition.inputs,superDef.inputs),fillProperties(definition.declaredInputs,superDef.declaredInputs),fillProperties(definition.outputs,superDef.outputs),isComponentDef(superDef)&&superDef.data.animation){const defData=definition.data;defData.animation=(defData.animation||[]).concat(superDef.data.animation)}}const features=superDef.features;if(features)for(let i=0;i<features.length;i++){const feature=features[i];feature&&feature.ngInherit&&feature(definition),feature===\u0275\u0275InheritDefinitionFeature&&(shouldInheritFields=!1)}}superType=Object.getPrototypeOf(superType)}mergeHostAttrsAcrossInheritance(inheritanceChain)}function mergeHostAttrsAcrossInheritance(inheritanceChain){let hostVars=0,hostAttrs=null;for(let i=inheritanceChain.length-1;i>=0;i--){const def=inheritanceChain[i];def.hostVars=hostVars+=def.hostVars,def.hostAttrs=mergeHostAttrs(def.hostAttrs,hostAttrs=mergeHostAttrs(hostAttrs,def.hostAttrs))}}function maybeUnwrapEmpty(value){return value===EMPTY_OBJ?{}:value===EMPTY_ARRAY?[]:value}function inheritViewQuery(definition,superViewQuery){const prevViewQuery=definition.viewQuery;definition.viewQuery=prevViewQuery?(rf,ctx)=>{superViewQuery(rf,ctx),prevViewQuery(rf,ctx)}:superViewQuery}function inheritContentQueries(definition,superContentQueries){const prevContentQueries=definition.contentQueries;definition.contentQueries=prevContentQueries?(rf,ctx,directiveIndex)=>{superContentQueries(rf,ctx,directiveIndex),prevContentQueries(rf,ctx,directiveIndex)}:superContentQueries}function inheritHostBindings(definition,superHostBindings){const prevHostBindings=definition.hostBindings;definition.hostBindings=prevHostBindings?(rf,ctx)=>{superHostBindings(rf,ctx),prevHostBindings(rf,ctx)}:superHostBindings}__name(ComponentRef,"ComponentRef"),__name(createRootComponentTNode,"createRootComponentTNode"),__name(createRootComponentView,"createRootComponentView"),__name(applyRootComponentStyling,"applyRootComponentStyling"),__name(createRootComponent,"createRootComponent"),__name(setRootNodeAttributes,"setRootNodeAttributes"),__name(projectNodes,"projectNodes"),__name(LifecycleHooksFeature,"LifecycleHooksFeature"),__name(getSuperType,"getSuperType"),__name(\u0275\u0275InheritDefinitionFeature,"\u0275\u0275InheritDefinitionFeature"),__name(mergeHostAttrsAcrossInheritance,"mergeHostAttrsAcrossInheritance"),__name(maybeUnwrapEmpty,"maybeUnwrapEmpty"),__name(inheritViewQuery,"inheritViewQuery"),__name(inheritContentQueries,"inheritContentQueries"),__name(inheritHostBindings,"inheritHostBindings");const COPY_DIRECTIVE_FIELDS=["providersResolver"],COPY_COMPONENT_FIELDS=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function \u0275\u0275CopyDefinitionFeature(definition){let superDef,superType=getSuperType(definition.type);superDef=isComponentDef(definition)?superType.\u0275cmp:superType.\u0275dir;const defAny=definition;for(const field of COPY_DIRECTIVE_FIELDS)defAny[field]=superDef[field];if(isComponentDef(superDef))for(const field of COPY_COMPONENT_FIELDS)defAny[field]=superDef[field]}function \u0275\u0275HostDirectivesFeature(rawHostDirectives){return definition=>{definition.findHostDirectiveDefs=findHostDirectiveDefs,definition.hostDirectives=(Array.isArray(rawHostDirectives)?rawHostDirectives:rawHostDirectives()).map(dir=>"function"==typeof dir?{directive:resolveForwardRef(dir),inputs:EMPTY_OBJ,outputs:EMPTY_OBJ}:{directive:resolveForwardRef(dir.directive),inputs:bindingArrayToMap(dir.inputs),outputs:bindingArrayToMap(dir.outputs)})}}function findHostDirectiveDefs(currentDef,matchedDefs,hostDirectiveDefs){if(null!==currentDef.hostDirectives)for(const hostDirectiveConfig of currentDef.hostDirectives){const hostDirectiveDef=getDirectiveDef(hostDirectiveConfig.directive);patchDeclaredInputs(hostDirectiveDef.declaredInputs,hostDirectiveConfig.inputs),findHostDirectiveDefs(hostDirectiveDef,matchedDefs,hostDirectiveDefs),hostDirectiveDefs.set(hostDirectiveDef,hostDirectiveConfig),matchedDefs.push(hostDirectiveDef)}}function bindingArrayToMap(bindings){if(void 0===bindings||0===bindings.length)return EMPTY_OBJ;const result={};for(let i=0;i<bindings.length;i+=2)result[bindings[i]]=bindings[i+1];return result}function patchDeclaredInputs(declaredInputs,exposedInputs){for(const publicName in exposedInputs)exposedInputs.hasOwnProperty(publicName)&&(declaredInputs[exposedInputs[publicName]]=declaredInputs[publicName])}function validateMappings(bindingType,def,hostDirectiveBindings){const className=def.type.name,bindings="input"===bindingType?def.inputs:def.outputs;for(const publicName in hostDirectiveBindings)if(hostDirectiveBindings.hasOwnProperty(publicName)){if(!bindings.hasOwnProperty(publicName))throw new RuntimeError(311,`Directive ${className} does not have an ${bindingType} with a public name of ${publicName}.`);const remappedPublicName=hostDirectiveBindings[publicName];if(bindings.hasOwnProperty(remappedPublicName)&&remappedPublicName!==publicName&&bindings[remappedPublicName]!==publicName)throw new RuntimeError(312,`Cannot alias ${bindingType} ${publicName} of host directive ${className} to ${remappedPublicName}, because it already has a different ${bindingType} with the same public name.`)}}function isListLikeIterable(obj){return!!isJsObject(obj)&&(Array.isArray(obj)||!(obj instanceof Map)&&Symbol.iterator in obj)}function areIterablesEqual(a,b,comparator){const iterator1=a[Symbol.iterator](),iterator2=b[Symbol.iterator]();for(;;){const item1=iterator1.next(),item2=iterator2.next();if(item1.done&&item2.done)return!0;if(item1.done||item2.done||!comparator(item1.value,item2.value))return!1}}function iterateListLike(obj,fn){if(Array.isArray(obj))for(let i=0;i<obj.length;i++)fn(obj[i]);else{const iterator=obj[Symbol.iterator]();let item;for(;!(item=iterator.next()).done;)fn(item.value)}}function isJsObject(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function updateBinding(lView,bindingIndex,value){return lView[bindingIndex]=value}function getBinding(lView,bindingIndex){return lView[bindingIndex]}function bindingUpdated(lView,bindingIndex,value){return!Object.is(lView[bindingIndex],value)&&(lView[bindingIndex]=value,!0)}function bindingUpdated2(lView,bindingIndex,exp1,exp2){const different=bindingUpdated(lView,bindingIndex,exp1);return bindingUpdated(lView,bindingIndex+1,exp2)||different}function bindingUpdated3(lView,bindingIndex,exp1,exp2,exp3){const different=bindingUpdated2(lView,bindingIndex,exp1,exp2);return bindingUpdated(lView,bindingIndex+2,exp3)||different}function bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4){const different=bindingUpdated2(lView,bindingIndex,exp1,exp2);return bindingUpdated2(lView,bindingIndex+2,exp3,exp4)||different}function \u0275\u0275attribute(name,value,sanitizer,namespace){const lView=getLView();return bindingUpdated(lView,nextBindingIndex(),value)&&(getTView(),elementAttributeInternal(getSelectedTNode(),lView,name,value,sanitizer,namespace)),\u0275\u0275attribute}function interpolationV(lView,values){let isBindingUpdated=!1,bindingIndex=getBindingIndex();for(let i=1;i<values.length;i+=2)isBindingUpdated=bindingUpdated(lView,bindingIndex++,values[i])||isBindingUpdated;if(setBindingIndex(bindingIndex),!isBindingUpdated)return NO_CHANGE;let content=values[0];for(let i=1;i<values.length;i+=2)content+=renderStringify(values[i])+values[i+1];return content}function interpolation1(lView,prefix,v0,suffix){return bindingUpdated(lView,nextBindingIndex(),v0)?prefix+renderStringify(v0)+suffix:NO_CHANGE}function interpolation2(lView,prefix,v0,i02,v1,suffix){const different=bindingUpdated2(lView,getBindingIndex(),v0,v1);return incrementBindingIndex(2),different?prefix+renderStringify(v0)+i02+renderStringify(v1)+suffix:NO_CHANGE}function interpolation3(lView,prefix,v0,i02,v1,i1,v2,suffix){const different=bindingUpdated3(lView,getBindingIndex(),v0,v1,v2);return incrementBindingIndex(3),different?prefix+renderStringify(v0)+i02+renderStringify(v1)+i1+renderStringify(v2)+suffix:NO_CHANGE}function interpolation4(lView,prefix,v0,i02,v1,i1,v2,i2,v3,suffix){const different=bindingUpdated4(lView,getBindingIndex(),v0,v1,v2,v3);return incrementBindingIndex(4),different?prefix+renderStringify(v0)+i02+renderStringify(v1)+i1+renderStringify(v2)+i2+renderStringify(v3)+suffix:NO_CHANGE}function interpolation5(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix){const bindingIndex=getBindingIndex();let different=bindingUpdated4(lView,bindingIndex,v0,v1,v2,v3);return different=bindingUpdated(lView,bindingIndex+4,v4)||different,incrementBindingIndex(5),different?prefix+renderStringify(v0)+i02+renderStringify(v1)+i1+renderStringify(v2)+i2+renderStringify(v3)+i3+renderStringify(v4)+suffix:NO_CHANGE}function interpolation6(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix){const bindingIndex=getBindingIndex();let different=bindingUpdated4(lView,bindingIndex,v0,v1,v2,v3);return different=bindingUpdated2(lView,bindingIndex+4,v4,v5)||different,incrementBindingIndex(6),different?prefix+renderStringify(v0)+i02+renderStringify(v1)+i1+renderStringify(v2)+i2+renderStringify(v3)+i3+renderStringify(v4)+i4+renderStringify(v5)+suffix:NO_CHANGE}function interpolation7(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix){const bindingIndex=getBindingIndex();let different=bindingUpdated4(lView,bindingIndex,v0,v1,v2,v3);return different=bindingUpdated3(lView,bindingIndex+4,v4,v5,v6)||different,incrementBindingIndex(7),different?prefix+renderStringify(v0)+i02+renderStringify(v1)+i1+renderStringify(v2)+i2+renderStringify(v3)+i3+renderStringify(v4)+i4+renderStringify(v5)+i5+renderStringify(v6)+suffix:NO_CHANGE}function interpolation8(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix){const bindingIndex=getBindingIndex();let different=bindingUpdated4(lView,bindingIndex,v0,v1,v2,v3);return different=bindingUpdated4(lView,bindingIndex+4,v4,v5,v6,v7)||different,incrementBindingIndex(8),different?prefix+renderStringify(v0)+i02+renderStringify(v1)+i1+renderStringify(v2)+i2+renderStringify(v3)+i3+renderStringify(v4)+i4+renderStringify(v5)+i5+renderStringify(v6)+i6+renderStringify(v7)+suffix:NO_CHANGE}function \u0275\u0275attributeInterpolate1(attrName,prefix,v0,suffix,sanitizer,namespace){const lView=getLView(),interpolatedValue=interpolation1(lView,prefix,v0,suffix);return interpolatedValue!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolatedValue,sanitizer,namespace),\u0275\u0275attributeInterpolate1}function \u0275\u0275attributeInterpolate2(attrName,prefix,v0,i02,v1,suffix,sanitizer,namespace){const lView=getLView(),interpolatedValue=interpolation2(lView,prefix,v0,i02,v1,suffix);return interpolatedValue!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolatedValue,sanitizer,namespace),\u0275\u0275attributeInterpolate2}function \u0275\u0275attributeInterpolate3(attrName,prefix,v0,i02,v1,i1,v2,suffix,sanitizer,namespace){const lView=getLView(),interpolatedValue=interpolation3(lView,prefix,v0,i02,v1,i1,v2,suffix);return interpolatedValue!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolatedValue,sanitizer,namespace),\u0275\u0275attributeInterpolate3}function \u0275\u0275attributeInterpolate4(attrName,prefix,v0,i02,v1,i1,v2,i2,v3,suffix,sanitizer,namespace){const lView=getLView(),interpolatedValue=interpolation4(lView,prefix,v0,i02,v1,i1,v2,i2,v3,suffix);return interpolatedValue!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolatedValue,sanitizer,namespace),\u0275\u0275attributeInterpolate4}function \u0275\u0275attributeInterpolate5(attrName,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix,sanitizer,namespace){const lView=getLView(),interpolatedValue=interpolation5(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix);return interpolatedValue!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolatedValue,sanitizer,namespace),\u0275\u0275attributeInterpolate5}function \u0275\u0275attributeInterpolate6(attrName,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix,sanitizer,namespace){const lView=getLView(),interpolatedValue=interpolation6(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix);return interpolatedValue!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolatedValue,sanitizer,namespace),\u0275\u0275attributeInterpolate6}function \u0275\u0275attributeInterpolate7(attrName,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix,sanitizer,namespace){const lView=getLView(),interpolatedValue=interpolation7(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix);return interpolatedValue!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolatedValue,sanitizer,namespace),\u0275\u0275attributeInterpolate7}function \u0275\u0275attributeInterpolate8(attrName,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix,sanitizer,namespace){const lView=getLView(),interpolatedValue=interpolation8(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix);return interpolatedValue!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolatedValue,sanitizer,namespace),\u0275\u0275attributeInterpolate8}function \u0275\u0275attributeInterpolateV(attrName,values,sanitizer,namespace){const lView=getLView(),interpolated=interpolationV(lView,values);return interpolated!==NO_CHANGE&&elementAttributeInternal(getSelectedTNode(),lView,attrName,interpolated,sanitizer,namespace),\u0275\u0275attributeInterpolateV}__name(\u0275\u0275CopyDefinitionFeature,"\u0275\u0275CopyDefinitionFeature"),__name(\u0275\u0275HostDirectivesFeature,"\u0275\u0275HostDirectivesFeature"),__name(findHostDirectiveDefs,"findHostDirectiveDefs"),__name(bindingArrayToMap,"bindingArrayToMap"),__name(patchDeclaredInputs,"patchDeclaredInputs"),__name(function validateHostDirective(hostDirectiveConfig,directiveDef,matchedDefs){const type=hostDirectiveConfig.directive;if(null===directiveDef)throw null!==getComponentDef(type)?new RuntimeError(310,`Host directive ${type.name} cannot be a component.`):new RuntimeError(307,`Could not resolve metadata for host directive ${type.name}. Make sure that the ${type.name} class is annotated with an @Directive decorator.`);if(!directiveDef.standalone)throw new RuntimeError(308,`Host directive ${directiveDef.type.name} must be standalone.`);if(matchedDefs.indexOf(directiveDef)>-1)throw new RuntimeError(309,`Directive ${directiveDef.type.name} matches multiple times on the same element. Directives can only match an element once.`);validateMappings("input",directiveDef,hostDirectiveConfig.inputs),validateMappings("output",directiveDef,hostDirectiveConfig.outputs)},"validateHostDirective"),__name(validateMappings,"validateMappings"),__name(function isIterable(obj){return null!==obj&&"object"==typeof obj&&void 0!==obj[Symbol.iterator]},"isIterable"),__name(isListLikeIterable,"isListLikeIterable"),__name(areIterablesEqual,"areIterablesEqual"),__name(iterateListLike,"iterateListLike"),__name(isJsObject,"isJsObject"),__name(function devModeEqual(a,b){const isListLikeIterableA=isListLikeIterable(a),isListLikeIterableB=isListLikeIterable(b);return isListLikeIterableA&&isListLikeIterableB?areIterablesEqual(a,b,devModeEqual):!(isListLikeIterableA||!a||"object"!=typeof a&&"function"!=typeof a||isListLikeIterableB||!b||"object"!=typeof b&&"function"!=typeof b)||Object.is(a,b)},"devModeEqual"),__name(updateBinding,"updateBinding"),__name(getBinding,"getBinding"),__name(bindingUpdated,"bindingUpdated"),__name(bindingUpdated2,"bindingUpdated2"),__name(bindingUpdated3,"bindingUpdated3"),__name(bindingUpdated4,"bindingUpdated4"),__name(\u0275\u0275attribute,"\u0275\u0275attribute"),__name(interpolationV,"interpolationV"),__name(interpolation1,"interpolation1"),__name(interpolation2,"interpolation2"),__name(interpolation3,"interpolation3"),__name(interpolation4,"interpolation4"),__name(interpolation5,"interpolation5"),__name(interpolation6,"interpolation6"),__name(interpolation7,"interpolation7"),__name(interpolation8,"interpolation8"),__name(\u0275\u0275attributeInterpolate1,"\u0275\u0275attributeInterpolate1"),__name(\u0275\u0275attributeInterpolate2,"\u0275\u0275attributeInterpolate2"),__name(\u0275\u0275attributeInterpolate3,"\u0275\u0275attributeInterpolate3"),__name(\u0275\u0275attributeInterpolate4,"\u0275\u0275attributeInterpolate4"),__name(\u0275\u0275attributeInterpolate5,"\u0275\u0275attributeInterpolate5"),__name(\u0275\u0275attributeInterpolate6,"\u0275\u0275attributeInterpolate6"),__name(\u0275\u0275attributeInterpolate7,"\u0275\u0275attributeInterpolate7"),__name(\u0275\u0275attributeInterpolate8,"\u0275\u0275attributeInterpolate8"),__name(\u0275\u0275attributeInterpolateV,"\u0275\u0275attributeInterpolateV");const AT_THIS_LOCATION="<-- AT THIS LOCATION";function getFriendlyStringFromTNodeType(tNodeType){switch(tNodeType){case 4:return"view container";case 2:return"element";case 8:return"ng-container";case 32:return"icu";case 64:return"i18n";case 16:return"projection";case 1:return"text";default:return"<unknown>"}}function validateNodeExists(node,lView=null,tNode=null){if(!node){const header="During hydration, Angular expected an element to be present at this location.\n\n";let expected="",footer="";throw null!==lView&&null!==tNode&&(expected=`${describeExpectedDom(lView,tNode,!1)}\n\n`,footer=getHydrationErrorFooter()),new RuntimeError(-502,header+expected+footer)}}function nodeNotFoundError(lView,tNode){const expected=`${describeExpectedDom(lView,tNode,!1)}\n\n`,footer=getHydrationErrorFooter();throw new RuntimeError(-502,"During serialization, Angular was unable to find an element in the DOM:\n\n"+expected+footer)}function unsupportedProjectionOfDomNodes(rNode){const message=`During serialization, Angular detected DOM nodes that were created outside of Angular context and provided as projectable nodes (likely via \`ViewContainerRef.createComponent\` or \`createComponent\` APIs). Hydration is not supported for such cases, consider refactoring the code to avoid this pattern or using \`ngSkipHydration\` on the host element of the component.\n\n${describeDomFromNode(rNode)}\n\nNote: attributes are only displayed to better represent the DOM but have no effect on hydration mismatches.\n\n`;return new RuntimeError(-503,message)}function stringifyTNodeAttrs(tNode){const results=[];if(tNode.attrs)for(let i=0;i<tNode.attrs.length;){const attrName=tNode.attrs[i++];if("number"==typeof attrName)break;const attrValue=tNode.attrs[i++];results.push(`${attrName}="${shorten(attrValue)}"`)}return results.join(" ")}__name(getFriendlyStringFromTNodeType,"getFriendlyStringFromTNodeType"),__name(function validateMatchingNode(node,nodeType,tagName,lView,tNode,isViewContainerAnchor=!1){if(!node||node.nodeType!==nodeType||node.nodeType===Node.ELEMENT_NODE&&node.tagName.toLowerCase()!==tagName?.toLowerCase()){let header=`During hydration Angular expected ${shortRNodeDescription(nodeType,tagName,null)} but `;const componentClassName=getDeclarationComponentDef(lView)?.type?.name,expected=`Angular expected this DOM:\n\n${describeExpectedDom(lView,tNode,isViewContainerAnchor)}\n\n`;let actual="";node?(header+=`found ${shortRNodeDescription(node.nodeType,node.tagName??null,node.textContent??null)}.\n\n`,actual=`Actual DOM is:\n\n${describeDomFromNode(node)}\n\n`):header+="the node was not found.\n\n";const footer=getHydrationErrorFooter(componentClassName);throw new RuntimeError(-500,header+expected+actual+"Note: attributes are only displayed to better represent the DOM but have no effect on hydration mismatches.\n\n"+footer)}},"validateMatchingNode"),__name(function validateSiblingNodeExists(node){if(validateNodeExists(node),!node.nextSibling){const header="During hydration Angular expected more sibling nodes to be present.\n\n",actual=`Actual DOM is:\n\n${describeDomFromNode(node)}\n\n`,footer=getHydrationErrorFooter();throw new RuntimeError(-501,header+actual+footer)}},"validateSiblingNodeExists"),__name(validateNodeExists,"validateNodeExists"),__name(nodeNotFoundError,"nodeNotFoundError"),__name(function nodeNotFoundAtPathError(host,path){const header=`During hydration Angular was unable to locate a node using the "${path}" path, starting from the ${describeRNode(host)} node.\n\n`,footer=getHydrationErrorFooter();throw new RuntimeError(-502,header+footer)},"nodeNotFoundAtPathError"),__name(unsupportedProjectionOfDomNodes,"unsupportedProjectionOfDomNodes"),__name(function invalidSkipHydrationHost(rNode){const actual=`${describeDomFromNode(rNode)}\n\n`;return new RuntimeError(-504,"The `ngSkipHydration` flag is applied on a node that doesn't act as a component host. Hydration can be skipped only on per-component basis.\n\n"+actual+"Please move the `ngSkipHydration` attribute to the component host element.\n\n")},"invalidSkipHydrationHost"),__name(stringifyTNodeAttrs,"stringifyTNodeAttrs");const internalAttrs=new Set(["ngh","ng-version","ng-server-context"]);function stringifyRNodeAttrs(rNode){const results=[];for(let i=0;i<rNode.attributes.length;i++){const attr=rNode.attributes[i];internalAttrs.has(attr.name)||results.push(`${attr.name}="${shorten(attr.value)}"`)}return results.join(" ")}function describeTNode(tNode,innerContent="\u2026"){switch(tNode.type){case 1:return"#text"+(tNode.value?`(${tNode.value})`:"");case 2:const attrs=stringifyTNodeAttrs(tNode),tag=tNode.value.toLowerCase();return`<${tag}${attrs?" "+attrs:""}>${innerContent}</${tag}>`;case 8:return"\x3c!-- ng-container --\x3e";case 4:return"\x3c!-- container --\x3e";default:return`#node(${getFriendlyStringFromTNodeType(tNode.type)})`}}function describeRNode(rNode,innerContent="\u2026"){const node=rNode;switch(node.nodeType){case Node.ELEMENT_NODE:const tag=node.tagName.toLowerCase(),attrs=stringifyRNodeAttrs(node);return`<${tag}${attrs?" "+attrs:""}>${innerContent}</${tag}>`;case Node.TEXT_NODE:const content=node.textContent?shorten(node.textContent):"";return"#text"+(content?`(${content})`:"");case Node.COMMENT_NODE:return`\x3c!-- ${shorten(node.textContent??"")} --\x3e`;default:return`#node(${node.nodeType})`}}function describeExpectedDom(lView,tNode,isViewContainerAnchor){let content="";tNode.prev?(content+="  \u2026\n",content+="  "+describeTNode(tNode.prev)+"\n"):tNode.type&&12&tNode.type&&(content+="  \u2026\n"),isViewContainerAnchor?(content+="  "+describeTNode(tNode)+"\n",content+=`  \x3c!-- container --\x3e  ${AT_THIS_LOCATION}\n`):content+="  "+describeTNode(tNode)+`  ${AT_THIS_LOCATION}\n`,content+="  \u2026\n";const parentRNode=tNode.type?getParentRElement(lView[TVIEW],tNode,lView):null;return parentRNode&&(content=describeRNode(parentRNode,"\n"+content)),content}function describeDomFromNode(node){let content="";const currentNode=node;return currentNode.previousSibling&&(content+="  \u2026\n",content+="  "+describeRNode(currentNode.previousSibling)+"\n"),content+="  "+describeRNode(currentNode)+`  ${AT_THIS_LOCATION}\n`,node.nextSibling&&(content+="  \u2026\n"),node.parentNode&&(content=describeRNode(currentNode.parentNode,"\n"+content)),content}function shortRNodeDescription(nodeType,tagName,textContent){switch(nodeType){case Node.ELEMENT_NODE:return`<${tagName.toLowerCase()}>`;case Node.TEXT_NODE:return"a text node"+(textContent?` (with the "${shorten(textContent)}" content)`:"");case Node.COMMENT_NODE:return"a comment node";default:return`#node(nodeType=${nodeType})`}}function getHydrationErrorFooter(componentClassName){return`To fix this problem:\n  * check ${componentClassName?`the "${componentClassName}"`:"corresponding"} component for hydration-related issues\n  * check to see if your template has valid HTML structure\n  * or skip hydration by adding the \`ngSkipHydration\` attribute to its host node in a template\n\n`}function getHydrationAttributeNote(){return"Note: attributes are only displayed to better represent the DOM but have no effect on hydration mismatches.\n\n"}function stripNewlines(input){return input.replace(/\s+/gm,"")}function shorten(input,maxLength=50){return input?(input=stripNewlines(input)).length>maxLength?`${input.substring(0,maxLength-1)}\u2026`:input:""}__name(stringifyRNodeAttrs,"stringifyRNodeAttrs"),__name(describeTNode,"describeTNode"),__name(describeRNode,"describeRNode"),__name(describeExpectedDom,"describeExpectedDom"),__name(describeDomFromNode,"describeDomFromNode"),__name(shortRNodeDescription,"shortRNodeDescription"),__name(getHydrationErrorFooter,"getHydrationErrorFooter"),__name(getHydrationAttributeNote,"getHydrationAttributeNote"),__name(stripNewlines,"stripNewlines"),__name(shorten,"shorten");const REF_EXTRACTOR_REGEXP=new RegExp(`^(\\d+)*(${REFERENCE_NODE_BODY}|${REFERENCE_NODE_HOST})*(.*)`);function compressNodeLocation(referenceNode,path){const result=[referenceNode];for(const segment of path){const lastIdx=result.length-1;lastIdx>0&&result[lastIdx-1]===segment?result[lastIdx]=(result[lastIdx]||1)+1:result.push(segment,"")}return result.join("")}function decompressNodeLocation(path){const matches=path.match(REF_EXTRACTOR_REGEXP),[_,refNodeId,refNodeName,rest]=matches,ref=refNodeId?parseInt(refNodeId,10):refNodeName,steps=[];for(const[_2,step,count]of rest.matchAll(/(f|n)(\d*)/g)){const repeat=parseInt(count,10)||1;steps.push(step,repeat)}return[ref,...steps]}function isFirstElementInNgContainer(tNode){return!tNode.prev&&8===tNode.parent?.type}function getNoOffsetIndex(tNode){return tNode.index-HEADER_OFFSET}function locateNextRNode(hydrationInfo,tView,lView,tNode){let native=null;const noOffsetIndex=getNoOffsetIndex(tNode),nodes=hydrationInfo.data[NODES];if(nodes?.[noOffsetIndex])native=locateRNodeByPath(nodes[noOffsetIndex],lView);else if(tView.firstChild===tNode)native=hydrationInfo.firstChild;else{const previousTNodeParent=null===tNode.prev,previousTNode=tNode.prev??tNode.parent;if(isFirstElementInNgContainer(tNode))native=getSegmentHead(hydrationInfo,getNoOffsetIndex(tNode.parent));else{let previousRElement=getNativeByTNode(previousTNode,lView);if(previousTNodeParent)native=previousRElement.firstChild;else{const noOffsetPrevSiblingIndex=getNoOffsetIndex(previousTNode),segmentHead=getSegmentHead(hydrationInfo,noOffsetPrevSiblingIndex);native=2===previousTNode.type&&segmentHead?siblingAfter(calcSerializedContainerSize(hydrationInfo,noOffsetPrevSiblingIndex)+1,segmentHead):previousRElement.nextSibling}}}return native}function siblingAfter(skip,from){let currentNode=from;for(let i=0;i<skip;i++)currentNode=currentNode.nextSibling;return currentNode}function navigateToNode(from,instructions){let node=from;for(let i=0;i<instructions.length;i+=2){const step=instructions[i],repeat=instructions[i+1];for(let r=0;r<repeat;r++)switch(step){case NodeNavigationStep.FirstChild:node=node.firstChild;break;case NodeNavigationStep.NextSibling:node=node.nextSibling}}return node}function locateRNodeByPath(path,lView){const[referenceNode,...navigationInstructions]=decompressNodeLocation(path);let ref;return ref=referenceNode===REFERENCE_NODE_HOST?lView[DECLARATION_COMPONENT_VIEW][HOST]:referenceNode===REFERENCE_NODE_BODY?\u0275\u0275resolveBody(lView[DECLARATION_COMPONENT_VIEW][HOST]):unwrapRNode(lView[Number(referenceNode)+HEADER_OFFSET]),navigateToNode(ref,navigationInstructions)}function navigateBetween(start,finish){if(start===finish)return[];if(null==start.parentElement||null==finish.parentElement)return null;if(start.parentElement===finish.parentElement)return navigateBetweenSiblings(start,finish);{const parent=finish.parentElement,parentPath=navigateBetween(start,parent),childPath=navigateBetween(parent.firstChild,finish);return parentPath&&childPath?[...parentPath,NodeNavigationStep.FirstChild,...childPath]:null}}function navigateBetweenSiblings(start,finish){const nav=[];let node=null;for(node=start;null!=node&&node!==finish;node=node.nextSibling)nav.push(NodeNavigationStep.NextSibling);return null==node?null:nav}function calcPathBetween(from,to,fromNodeName){const path=navigateBetween(from,to);return null===path?null:compressNodeLocation(fromNodeName,path)}function calcPathForNode(tNode,lView){const parentTNode=tNode.parent;let parentIndex,parentRNode,referenceNodeName;null!==parentTNode&&3&parentTNode.type?(parentIndex=parentTNode.index,parentRNode=unwrapRNode(lView[parentIndex]),referenceNodeName=renderStringify(parentIndex-HEADER_OFFSET)):(parentIndex=referenceNodeName=REFERENCE_NODE_HOST,parentRNode=lView[DECLARATION_COMPONENT_VIEW][HOST]);let rNode=unwrapRNode(lView[tNode.index]);if(12&tNode.type){const firstRNode=getFirstNativeNode(lView,tNode);firstRNode&&(rNode=firstRNode)}let path=calcPathBetween(parentRNode,rNode,referenceNodeName);if(null===path&&parentRNode!==rNode&&(path=calcPathBetween(parentRNode.ownerDocument.body,rNode,REFERENCE_NODE_BODY),null===path))throw nodeNotFoundError(lView,tNode);return path}function templateFirstCreatePass(index,tView,lView,templateFn,decls,vars,tagName,attrsIndex,localRefsIndex){const tViewConsts=tView.consts,tNode=getOrCreateTNode(tView,index,4,tagName||null,getConstant(tViewConsts,attrsIndex));resolveDirectives(tView,lView,tNode,getConstant(tViewConsts,localRefsIndex)),registerPostOrderHooks(tView,tNode);const embeddedTView=tNode.tView=createTView(2,tNode,templateFn,decls,vars,tView.directiveRegistry,tView.pipeRegistry,null,tView.schemas,tViewConsts,null);return null!==tView.queries&&(tView.queries.template(tView,tNode),embeddedTView.queries=tView.queries.embeddedTView(tNode)),tNode}function \u0275\u0275template(index,templateFn,decls,vars,tagName,attrsIndex,localRefsIndex,localRefExtractor){const lView=getLView(),tView=getTView(),adjustedIndex=index+HEADER_OFFSET,tNode=tView.firstCreatePass?templateFirstCreatePass(adjustedIndex,tView,lView,templateFn,decls,vars,tagName,attrsIndex,localRefsIndex):tView.data[adjustedIndex];setCurrentTNode(tNode,!1);const comment=_locateOrCreateContainerAnchor(tView,lView,tNode,index);wasLastNodeCreated()&&appendChild(tView,lView,comment,tNode),attachPatchData(comment,lView),addToViewTree(lView,lView[adjustedIndex]=createLContainer(comment,lView,comment,tNode)),isDirectiveHost(tNode)&&createDirectivesInstances(tView,lView,tNode),null!=localRefsIndex&&saveResolvedLocalsInData(lView,tNode,localRefExtractor)}__name(compressNodeLocation,"compressNodeLocation"),__name(decompressNodeLocation,"decompressNodeLocation"),__name(isFirstElementInNgContainer,"isFirstElementInNgContainer"),__name(getNoOffsetIndex,"getNoOffsetIndex"),__name(locateNextRNode,"locateNextRNode"),__name(siblingAfter,"siblingAfter"),__name(function stringifyNavigationInstructions(instructions){const container=[];for(let i=0;i<instructions.length;i+=2){const step=instructions[i],repeat=instructions[i+1];for(let r=0;r<repeat;r++)container.push(step===NodeNavigationStep.FirstChild?"firstChild":"nextSibling")}return container.join(".")},"stringifyNavigationInstructions"),__name(navigateToNode,"navigateToNode"),__name(locateRNodeByPath,"locateRNodeByPath"),__name(navigateBetween,"navigateBetween"),__name(navigateBetweenSiblings,"navigateBetweenSiblings"),__name(calcPathBetween,"calcPathBetween"),__name(calcPathForNode,"calcPathForNode"),__name(templateFirstCreatePass,"templateFirstCreatePass"),__name(\u0275\u0275template,"\u0275\u0275template");let _locateOrCreateContainerAnchor=createContainerAnchorImpl;function createContainerAnchorImpl(tView,lView,tNode,index){return lastNodeWasCreated(!0),lView[RENDERER].createComment("")}function locateOrCreateContainerAnchorImpl(tView,lView,tNode,index){const hydrationInfo=lView[HYDRATION],isNodeCreationMode=!hydrationInfo||isInSkipHydrationBlock$1()||isDisconnectedNode$1(hydrationInfo,index);if(lastNodeWasCreated(isNodeCreationMode),isNodeCreationMode)return createContainerAnchorImpl(0,lView);const ssrId=hydrationInfo.data[TEMPLATES]?.[index]??null;null!==ssrId&&null!==tNode.tView&&null===tNode.tView.ssrId&&(tNode.tView.ssrId=ssrId);const currentRNode=locateNextRNode(hydrationInfo,tView,lView,tNode);return setSegmentHead(hydrationInfo,index,currentRNode),siblingAfter(calcSerializedContainerSize(hydrationInfo,index),currentRNode)}function enableLocateOrCreateContainerAnchorImpl(){_locateOrCreateContainerAnchor=locateOrCreateContainerAnchorImpl}function store(tView,lView,index,value){index>=tView.data.length&&(tView.data[index]=null,tView.blueprint[index]=null),lView[index]=value}function \u0275\u0275reference(index){return load(getContextLView(),HEADER_OFFSET+index)}function \u0275\u0275property(propName,value,sanitizer){const lView=getLView();return bindingUpdated(lView,nextBindingIndex(),value)&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,value,lView[RENDERER],sanitizer,!1),\u0275\u0275property}function setDirectiveInputsWhichShadowsStyling(tView,tNode,lView,value,isClassBased){const property=isClassBased?"class":"style";setInputsForProperty(tView,lView,tNode.inputs[property],property,value)}function elementStartFirstCreatePass(index,tView,lView,name,attrsIndex,localRefsIndex){const tViewConsts=tView.consts,tNode=getOrCreateTNode(tView,index,2,name,getConstant(tViewConsts,attrsIndex));return resolveDirectives(tView,lView,tNode,getConstant(tViewConsts,localRefsIndex)),null!==tNode.attrs&&computeStaticStyling(tNode,tNode.attrs,!1),null!==tNode.mergedAttrs&&computeStaticStyling(tNode,tNode.mergedAttrs,!0),null!==tView.queries&&tView.queries.elementStart(tView,tNode),tNode}function \u0275\u0275elementStart(index,name,attrsIndex,localRefsIndex){const lView=getLView(),tView=getTView(),adjustedIndex=HEADER_OFFSET+index,renderer=lView[RENDERER],tNode=tView.firstCreatePass?elementStartFirstCreatePass(adjustedIndex,tView,lView,name,attrsIndex,localRefsIndex):tView.data[adjustedIndex],native=_locateOrCreateElementNode(tView,lView,tNode,renderer,name,index);lView[adjustedIndex]=native;const hasDirectives=isDirectiveHost(tNode);return setCurrentTNode(tNode,!0),setupStaticAttributes(renderer,native,tNode),32!=(32&tNode.flags)&&wasLastNodeCreated()&&appendChild(tView,lView,native,tNode),0===getElementDepthCount()&&attachPatchData(native,lView),increaseElementDepthCount(),hasDirectives&&(createDirectivesInstances(tView,lView,tNode),executeContentQueries(tView,tNode,lView)),null!==localRefsIndex&&saveResolvedLocalsInData(lView,tNode),\u0275\u0275elementStart}function \u0275\u0275elementEnd(){let currentTNode=getCurrentTNode();isCurrentTNodeParent()?setCurrentTNodeAsNotParent():(currentTNode=currentTNode.parent,setCurrentTNode(currentTNode,!1));const tNode=currentTNode;isSkipHydrationRootTNode(tNode)&&leaveSkipHydrationBlock(),decreaseElementDepthCount();const tView=getTView();return tView.firstCreatePass&&(registerPostOrderHooks(tView,currentTNode),isContentQueryHost(currentTNode)&&tView.queries.elementEnd(currentTNode)),null!=tNode.classesWithoutHost&&hasClassInput(tNode)&&setDirectiveInputsWhichShadowsStyling(tView,tNode,getLView(),tNode.classesWithoutHost,!0),null!=tNode.stylesWithoutHost&&hasStyleInput(tNode)&&setDirectiveInputsWhichShadowsStyling(tView,tNode,getLView(),tNode.stylesWithoutHost,!1),\u0275\u0275elementEnd}function \u0275\u0275element(index,name,attrsIndex,localRefsIndex){return \u0275\u0275elementStart(index,name,attrsIndex,localRefsIndex),\u0275\u0275elementEnd(),\u0275\u0275element}__name(createContainerAnchorImpl,"createContainerAnchorImpl"),__name(locateOrCreateContainerAnchorImpl,"locateOrCreateContainerAnchorImpl"),__name(enableLocateOrCreateContainerAnchorImpl,"enableLocateOrCreateContainerAnchorImpl"),__name(store,"store"),__name(\u0275\u0275reference,"\u0275\u0275reference"),__name(\u0275\u0275property,"\u0275\u0275property"),__name(setDirectiveInputsWhichShadowsStyling,"setDirectiveInputsWhichShadowsStyling"),__name(elementStartFirstCreatePass,"elementStartFirstCreatePass"),__name(\u0275\u0275elementStart,"\u0275\u0275elementStart"),__name(\u0275\u0275elementEnd,"\u0275\u0275elementEnd"),__name(\u0275\u0275element,"\u0275\u0275element");let _locateOrCreateElementNode=__name((tView,lView,tNode,renderer,name,index)=>(lastNodeWasCreated(!0),createElementNode(renderer,name,getNamespace$1())),"_locateOrCreateElementNode");function locateOrCreateElementNodeImpl(tView,lView,tNode,renderer,name,index){const hydrationInfo=lView[HYDRATION],isNodeCreationMode=!hydrationInfo||isInSkipHydrationBlock$1()||isDisconnectedNode$1(hydrationInfo,index);if(lastNodeWasCreated(isNodeCreationMode),isNodeCreationMode)return createElementNode(renderer,name,getNamespace$1());const native=locateNextRNode(hydrationInfo,tView,lView,tNode);return getSerializedContainerViews(hydrationInfo,index)&&setSegmentHead(hydrationInfo,index,native.nextSibling),hydrationInfo&&hasNgSkipHydrationAttr(tNode)&&isComponentHost(tNode)&&(enterSkipHydrationBlock(tNode),clearElementContents(native)),native}function enableLocateOrCreateElementNodeImpl(){_locateOrCreateElementNode=locateOrCreateElementNodeImpl}function elementContainerStartFirstCreatePass(index,tView,lView,attrsIndex,localRefsIndex){const tViewConsts=tView.consts,attrs=getConstant(tViewConsts,attrsIndex),tNode=getOrCreateTNode(tView,index,8,"ng-container",attrs);return null!==attrs&&computeStaticStyling(tNode,attrs,!0),resolveDirectives(tView,lView,tNode,getConstant(tViewConsts,localRefsIndex)),null!==tView.queries&&tView.queries.elementStart(tView,tNode),tNode}function \u0275\u0275elementContainerStart(index,attrsIndex,localRefsIndex){const lView=getLView(),tView=getTView(),adjustedIndex=index+HEADER_OFFSET,tNode=tView.firstCreatePass?elementContainerStartFirstCreatePass(adjustedIndex,tView,lView,attrsIndex,localRefsIndex):tView.data[adjustedIndex];setCurrentTNode(tNode,!0);const comment=_locateOrCreateElementContainerNode(tView,lView,tNode,index);return lView[adjustedIndex]=comment,wasLastNodeCreated()&&appendChild(tView,lView,comment,tNode),attachPatchData(comment,lView),isDirectiveHost(tNode)&&(createDirectivesInstances(tView,lView,tNode),executeContentQueries(tView,tNode,lView)),null!=localRefsIndex&&saveResolvedLocalsInData(lView,tNode),\u0275\u0275elementContainerStart}function \u0275\u0275elementContainerEnd(){let currentTNode=getCurrentTNode();const tView=getTView();return isCurrentTNodeParent()?setCurrentTNodeAsNotParent():(currentTNode=currentTNode.parent,setCurrentTNode(currentTNode,!1)),tView.firstCreatePass&&(registerPostOrderHooks(tView,currentTNode),isContentQueryHost(currentTNode)&&tView.queries.elementEnd(currentTNode)),\u0275\u0275elementContainerEnd}function \u0275\u0275elementContainer(index,attrsIndex,localRefsIndex){return \u0275\u0275elementContainerStart(index,attrsIndex,localRefsIndex),\u0275\u0275elementContainerEnd(),\u0275\u0275elementContainer}__name(locateOrCreateElementNodeImpl,"locateOrCreateElementNodeImpl"),__name(enableLocateOrCreateElementNodeImpl,"enableLocateOrCreateElementNodeImpl"),__name(elementContainerStartFirstCreatePass,"elementContainerStartFirstCreatePass"),__name(\u0275\u0275elementContainerStart,"\u0275\u0275elementContainerStart"),__name(\u0275\u0275elementContainerEnd,"\u0275\u0275elementContainerEnd"),__name(\u0275\u0275elementContainer,"\u0275\u0275elementContainer");let _locateOrCreateElementContainerNode=__name((tView,lView,tNode,index)=>(lastNodeWasCreated(!0),createCommentNode(lView[RENDERER],"")),"_locateOrCreateElementContainerNode");function locateOrCreateElementContainerNode(tView,lView,tNode,index){let comment;const hydrationInfo=lView[HYDRATION],isNodeCreationMode=!hydrationInfo||isInSkipHydrationBlock$1();if(lastNodeWasCreated(isNodeCreationMode),isNodeCreationMode)return createCommentNode(lView[RENDERER],"");const currentRNode=locateNextRNode(hydrationInfo,tView,lView,tNode),ngContainerSize=getNgContainerSize(hydrationInfo,index);return setSegmentHead(hydrationInfo,index,currentRNode),comment=siblingAfter(ngContainerSize,currentRNode),comment}function enableLocateOrCreateElementContainerNodeImpl(){_locateOrCreateElementContainerNode=locateOrCreateElementContainerNode}function \u0275\u0275getCurrentView(){return getLView()}function isPromise(obj){return!!obj&&"function"==typeof obj.then}function isSubscribable(obj){return!!obj&&"function"==typeof obj.subscribe}function \u0275\u0275listener(eventName,listenerFn,useCapture,eventTargetResolver){const lView=getLView(),tView=getTView(),tNode=getCurrentTNode();return listenerInternal(tView,lView,lView[RENDERER],tNode,eventName,listenerFn,eventTargetResolver),\u0275\u0275listener}function \u0275\u0275syntheticHostListener(eventName,listenerFn){const tNode=getCurrentTNode(),lView=getLView(),tView=getTView();return listenerInternal(tView,lView,loadComponentRenderer(getCurrentDirectiveDef(tView.data),tNode,lView),tNode,eventName,listenerFn),\u0275\u0275syntheticHostListener}function findExistingListener(tView,lView,eventName,tNodeIdx){const tCleanup=tView.cleanup;if(null!=tCleanup)for(let i=0;i<tCleanup.length-1;i+=2){const cleanupEventName=tCleanup[i];if(cleanupEventName===eventName&&tCleanup[i+1]===tNodeIdx){const lCleanup=lView[CLEANUP],listenerIdxInLCleanup=tCleanup[i+2];return lCleanup.length>listenerIdxInLCleanup?lCleanup[listenerIdxInLCleanup]:null}"string"==typeof cleanupEventName&&(i+=2)}return null}function listenerInternal(tView,lView,renderer,tNode,eventName,listenerFn,eventTargetResolver){const isTNodeDirectiveHost=isDirectiveHost(tNode),tCleanup=tView.firstCreatePass&&getOrCreateTViewCleanup(tView),context=lView[CONTEXT],lCleanup=getOrCreateLViewCleanup(lView);let processOutputs=!0;if(3&tNode.type||eventTargetResolver){const native=getNativeByTNode(tNode,lView),target=eventTargetResolver?eventTargetResolver(native):native,lCleanupIndex=lCleanup.length,idxOrTargetGetter=eventTargetResolver?_lView=>eventTargetResolver(unwrapRNode(_lView[tNode.index])):tNode.index;let existingListener=null;if(!eventTargetResolver&&isTNodeDirectiveHost&&(existingListener=findExistingListener(tView,lView,eventName,tNode.index)),null!==existingListener)(existingListener.__ngLastListenerFn__||existingListener).__ngNextListenerFn__=listenerFn,existingListener.__ngLastListenerFn__=listenerFn,processOutputs=!1;else{listenerFn=wrapListener(tNode,lView,context,listenerFn,!1);const cleanupFn=renderer.listen(target,eventName,listenerFn);lCleanup.push(listenerFn,cleanupFn),tCleanup&&tCleanup.push(eventName,idxOrTargetGetter,lCleanupIndex,lCleanupIndex+1)}}else listenerFn=wrapListener(tNode,lView,context,listenerFn,!1);const outputs=tNode.outputs;let props;if(processOutputs&&null!==outputs&&(props=outputs[eventName])){const propsLength=props.length;if(propsLength)for(let i=0;i<propsLength;i+=2){const subscription=lView[props[i]][props[i+1]].subscribe(listenerFn),idx=lCleanup.length;lCleanup.push(listenerFn,subscription),tCleanup&&tCleanup.push(eventName,tNode.index,idx,-(idx+1))}}}function executeListenerWithErrorHandling(lView,context,listenerFn,e){try{return profiler(6,context,listenerFn),!1!==listenerFn(e)}catch(error){return handleError(lView,error),!1}finally{profiler(7,context,listenerFn)}}function wrapListener(tNode,lView,context,listenerFn,wrapWithPreventDefault){return __name(function wrapListenerIn_markDirtyAndPreventDefault(e){if(e===Function)return listenerFn;markViewDirty(tNode.componentOffset>-1?getComponentLViewByIndex(tNode.index,lView):lView);let result=executeListenerWithErrorHandling(lView,context,listenerFn,e),nextListenerFn=wrapListenerIn_markDirtyAndPreventDefault.__ngNextListenerFn__;for(;nextListenerFn;)result=executeListenerWithErrorHandling(lView,context,nextListenerFn,e)&&result,nextListenerFn=nextListenerFn.__ngNextListenerFn__;return wrapWithPreventDefault&&!1===result&&e.preventDefault(),result},"wrapListenerIn_markDirtyAndPreventDefault")}function \u0275\u0275nextContext(level=1){return nextContextImpl(level)}function matchingProjectionSlotIndex(tNode,projectionSlots){let wildcardNgContentIndex=null;const ngProjectAsAttrVal=getProjectAsAttrValue(tNode);for(let i=0;i<projectionSlots.length;i++){const slotValue=projectionSlots[i];if("*"!==slotValue){if(null===ngProjectAsAttrVal?isNodeMatchingSelectorList(tNode,slotValue,!0):isSelectorInSelectorList(ngProjectAsAttrVal,slotValue))return i}else wildcardNgContentIndex=i}return wildcardNgContentIndex}function \u0275\u0275projectionDef(projectionSlots){const componentNode=getLView()[DECLARATION_COMPONENT_VIEW][T_HOST];if(!componentNode.projection){const projectionHeads=componentNode.projection=newArray(projectionSlots?projectionSlots.length:1,null),tails=projectionHeads.slice();let componentChild=componentNode.child;for(;null!==componentChild;){const slotIndex=projectionSlots?matchingProjectionSlotIndex(componentChild,projectionSlots):0;null!==slotIndex&&(tails[slotIndex]?tails[slotIndex].projectionNext=componentChild:projectionHeads[slotIndex]=componentChild,tails[slotIndex]=componentChild),componentChild=componentChild.next}}}function \u0275\u0275projection(nodeIndex,selectorIndex=0,attrs){const lView=getLView(),tView=getTView(),tProjectionNode=getOrCreateTNode(tView,HEADER_OFFSET+nodeIndex,16,null,attrs||null);null===tProjectionNode.projection&&(tProjectionNode.projection=selectorIndex),setCurrentTNodeAsNotParent(),(!lView[HYDRATION]||isInSkipHydrationBlock$1())&&32!=(32&tProjectionNode.flags)&&applyProjection(tView,lView,tProjectionNode)}function \u0275\u0275propertyInterpolate(propName,v0,sanitizer){return \u0275\u0275propertyInterpolate1(propName,"",v0,"",sanitizer),\u0275\u0275propertyInterpolate}function \u0275\u0275propertyInterpolate1(propName,prefix,v0,suffix,sanitizer){const lView=getLView(),interpolatedValue=interpolation1(lView,prefix,v0,suffix);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolate1}function \u0275\u0275propertyInterpolate2(propName,prefix,v0,i02,v1,suffix,sanitizer){const lView=getLView(),interpolatedValue=interpolation2(lView,prefix,v0,i02,v1,suffix);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolate2}function \u0275\u0275propertyInterpolate3(propName,prefix,v0,i02,v1,i1,v2,suffix,sanitizer){const lView=getLView(),interpolatedValue=interpolation3(lView,prefix,v0,i02,v1,i1,v2,suffix);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolate3}function \u0275\u0275propertyInterpolate4(propName,prefix,v0,i02,v1,i1,v2,i2,v3,suffix,sanitizer){const lView=getLView(),interpolatedValue=interpolation4(lView,prefix,v0,i02,v1,i1,v2,i2,v3,suffix);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolate4}function \u0275\u0275propertyInterpolate5(propName,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix,sanitizer){const lView=getLView(),interpolatedValue=interpolation5(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolate5}function \u0275\u0275propertyInterpolate6(propName,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix,sanitizer){const lView=getLView(),interpolatedValue=interpolation6(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolate6}function \u0275\u0275propertyInterpolate7(propName,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix,sanitizer){const lView=getLView(),interpolatedValue=interpolation7(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolate7}function \u0275\u0275propertyInterpolate8(propName,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix,sanitizer){const lView=getLView(),interpolatedValue=interpolation8(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolate8}function \u0275\u0275propertyInterpolateV(propName,values,sanitizer){const lView=getLView(),interpolatedValue=interpolationV(lView,values);return interpolatedValue!==NO_CHANGE&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,interpolatedValue,lView[RENDERER],sanitizer,!1),\u0275\u0275propertyInterpolateV}function toTStylingRange(prev,next){return prev<<17|next<<2}function getTStylingRangePrev(tStylingRange){return tStylingRange>>17&32767}function getTStylingRangePrevDuplicate(tStylingRange){return 2==(2&tStylingRange)}function setTStylingRangePrev(tStylingRange,previous){return 131071&tStylingRange|previous<<17}function setTStylingRangePrevDuplicate(tStylingRange){return 2|tStylingRange}function getTStylingRangeNext(tStylingRange){return(131068&tStylingRange)>>2}function setTStylingRangeNext(tStylingRange,next){return-131069&tStylingRange|next<<2}function getTStylingRangeNextDuplicate(tStylingRange){return 1==(1&tStylingRange)}function setTStylingRangeNextDuplicate(tStylingRange){return 1|tStylingRange}function insertTStylingBinding(tData,tNode,tStylingKeyWithStatic,index,isHostBinding,isClassBinding){let tBindings=isClassBinding?tNode.classBindings:tNode.styleBindings,tmplHead=getTStylingRangePrev(tBindings),tmplTail=getTStylingRangeNext(tBindings);tData[index]=tStylingKeyWithStatic;let tStylingKey,isKeyDuplicateOfStatic=!1;if(Array.isArray(tStylingKeyWithStatic)?(tStylingKey=tStylingKeyWithStatic[1],(null===tStylingKey||keyValueArrayIndexOf(tStylingKeyWithStatic,tStylingKey)>0)&&(isKeyDuplicateOfStatic=!0)):tStylingKey=tStylingKeyWithStatic,isHostBinding)if(0!==tmplTail){const previousNode=getTStylingRangePrev(tData[tmplHead+1]);tData[index+1]=toTStylingRange(previousNode,tmplHead),0!==previousNode&&(tData[previousNode+1]=setTStylingRangeNext(tData[previousNode+1],index)),tData[tmplHead+1]=setTStylingRangePrev(tData[tmplHead+1],index)}else tData[index+1]=toTStylingRange(tmplHead,0),0!==tmplHead&&(tData[tmplHead+1]=setTStylingRangeNext(tData[tmplHead+1],index)),tmplHead=index;else tData[index+1]=toTStylingRange(tmplTail,0),0===tmplHead?tmplHead=index:tData[tmplTail+1]=setTStylingRangeNext(tData[tmplTail+1],index),tmplTail=index;isKeyDuplicateOfStatic&&(tData[index+1]=setTStylingRangePrevDuplicate(tData[index+1])),markDuplicates(tData,tStylingKey,index,!0),markDuplicates(tData,tStylingKey,index,!1),markDuplicateOfResidualStyling(tNode,tStylingKey,tData,index,isClassBinding),tBindings=toTStylingRange(tmplHead,tmplTail),isClassBinding?tNode.classBindings=tBindings:tNode.styleBindings=tBindings}function markDuplicateOfResidualStyling(tNode,tStylingKey,tData,index,isClassBinding){const residual=isClassBinding?tNode.residualClasses:tNode.residualStyles;null!=residual&&"string"==typeof tStylingKey&&keyValueArrayIndexOf(residual,tStylingKey)>=0&&(tData[index+1]=setTStylingRangeNextDuplicate(tData[index+1]))}function markDuplicates(tData,tStylingKey,index,isPrevDir,isClassBinding){const tStylingAtIndex=tData[index+1],isMap=null===tStylingKey;let cursor=isPrevDir?getTStylingRangePrev(tStylingAtIndex):getTStylingRangeNext(tStylingAtIndex),foundDuplicate=!1;for(;0!==cursor&&(!1===foundDuplicate||isMap);){const tStyleRangeAtCursor=tData[cursor+1];isStylingMatch(tData[cursor],tStylingKey)&&(foundDuplicate=!0,tData[cursor+1]=isPrevDir?setTStylingRangeNextDuplicate(tStyleRangeAtCursor):setTStylingRangePrevDuplicate(tStyleRangeAtCursor)),cursor=isPrevDir?getTStylingRangePrev(tStyleRangeAtCursor):getTStylingRangeNext(tStyleRangeAtCursor)}foundDuplicate&&(tData[index+1]=isPrevDir?setTStylingRangePrevDuplicate(tStylingAtIndex):setTStylingRangeNextDuplicate(tStylingAtIndex))}function isStylingMatch(tStylingKeyCursor,tStylingKey){return null===tStylingKeyCursor||null==tStylingKey||(Array.isArray(tStylingKeyCursor)?tStylingKeyCursor[1]:tStylingKeyCursor)===tStylingKey||!(!Array.isArray(tStylingKeyCursor)||"string"!=typeof tStylingKey)&&keyValueArrayIndexOf(tStylingKeyCursor,tStylingKey)>=0}__name(locateOrCreateElementContainerNode,"locateOrCreateElementContainerNode"),__name(enableLocateOrCreateElementContainerNodeImpl,"enableLocateOrCreateElementContainerNodeImpl"),__name(\u0275\u0275getCurrentView,"\u0275\u0275getCurrentView"),__name(isPromise,"isPromise"),__name(isSubscribable,"isSubscribable"),__name(\u0275\u0275listener,"\u0275\u0275listener"),__name(\u0275\u0275syntheticHostListener,"\u0275\u0275syntheticHostListener"),__name(findExistingListener,"findExistingListener"),__name(listenerInternal,"listenerInternal"),__name(executeListenerWithErrorHandling,"executeListenerWithErrorHandling"),__name(wrapListener,"wrapListener"),__name(\u0275\u0275nextContext,"\u0275\u0275nextContext"),__name(matchingProjectionSlotIndex,"matchingProjectionSlotIndex"),__name(\u0275\u0275projectionDef,"\u0275\u0275projectionDef"),__name(\u0275\u0275projection,"\u0275\u0275projection"),__name(\u0275\u0275propertyInterpolate,"\u0275\u0275propertyInterpolate"),__name(\u0275\u0275propertyInterpolate1,"\u0275\u0275propertyInterpolate1"),__name(\u0275\u0275propertyInterpolate2,"\u0275\u0275propertyInterpolate2"),__name(\u0275\u0275propertyInterpolate3,"\u0275\u0275propertyInterpolate3"),__name(\u0275\u0275propertyInterpolate4,"\u0275\u0275propertyInterpolate4"),__name(\u0275\u0275propertyInterpolate5,"\u0275\u0275propertyInterpolate5"),__name(\u0275\u0275propertyInterpolate6,"\u0275\u0275propertyInterpolate6"),__name(\u0275\u0275propertyInterpolate7,"\u0275\u0275propertyInterpolate7"),__name(\u0275\u0275propertyInterpolate8,"\u0275\u0275propertyInterpolate8"),__name(\u0275\u0275propertyInterpolateV,"\u0275\u0275propertyInterpolateV"),__name(toTStylingRange,"toTStylingRange"),__name(getTStylingRangePrev,"getTStylingRangePrev"),__name(getTStylingRangePrevDuplicate,"getTStylingRangePrevDuplicate"),__name(setTStylingRangePrev,"setTStylingRangePrev"),__name(setTStylingRangePrevDuplicate,"setTStylingRangePrevDuplicate"),__name(getTStylingRangeNext,"getTStylingRangeNext"),__name(setTStylingRangeNext,"setTStylingRangeNext"),__name(getTStylingRangeNextDuplicate,"getTStylingRangeNextDuplicate"),__name(setTStylingRangeNextDuplicate,"setTStylingRangeNextDuplicate"),__name(function getTStylingRangeTail(tStylingRange){const next=getTStylingRangeNext(tStylingRange);return 0===next?getTStylingRangePrev(tStylingRange):next},"getTStylingRangeTail"),__name(insertTStylingBinding,"insertTStylingBinding"),__name(markDuplicateOfResidualStyling,"markDuplicateOfResidualStyling"),__name(markDuplicates,"markDuplicates"),__name(isStylingMatch,"isStylingMatch");const parserState={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function getLastParsedKey(text){return text.substring(parserState.key,parserState.keyEnd)}function getLastParsedValue(text){return text.substring(parserState.value,parserState.valueEnd)}function parseClassName(text){return resetParserState(text),parseClassNameNext(text,consumeWhitespace(text,0,parserState.textEnd))}function parseClassNameNext(text,index){const end=parserState.textEnd;return end===index?-1:consumeWhitespace(text,index=parserState.keyEnd=consumeClassToken(text,parserState.key=index,end),end)}function parseStyle(text){return resetParserState(text),parseStyleNext(text,consumeWhitespace(text,0,parserState.textEnd))}function parseStyleNext(text,startIndex){const end=parserState.textEnd;let index=parserState.key=consumeWhitespace(text,startIndex,end);return end===index?-1:(index=parserState.keyEnd=consumeStyleKey(text,index,end),index=consumeSeparator(text,index,end),index=parserState.value=consumeWhitespace(text,index,end),index=parserState.valueEnd=consumeStyleValue(text,index,end),consumeSeparator(text,index,end))}function resetParserState(text){parserState.key=0,parserState.keyEnd=0,parserState.value=0,parserState.valueEnd=0,parserState.textEnd=text.length}function consumeWhitespace(text,startIndex,endIndex){for(;startIndex<endIndex&&text.charCodeAt(startIndex)<=32;)startIndex++;return startIndex}function consumeClassToken(text,startIndex,endIndex){for(;startIndex<endIndex&&text.charCodeAt(startIndex)>32;)startIndex++;return startIndex}function consumeStyleKey(text,startIndex,endIndex){let ch;for(;startIndex<endIndex&&(45===(ch=text.charCodeAt(startIndex))||95===ch||(-33&ch)>=65&&(-33&ch)<=90||ch>=48&&ch<=57);)startIndex++;return startIndex}function consumeSeparator(text,startIndex,endIndex,separator){return(startIndex=consumeWhitespace(text,startIndex,endIndex))<endIndex&&startIndex++,startIndex}function consumeStyleValue(text,startIndex,endIndex){let ch1=-1,ch2=-1,ch3=-1,i=startIndex,lastChIndex=i;for(;i<endIndex;){const ch=text.charCodeAt(i++);if(59===ch)return lastChIndex;34===ch||39===ch?lastChIndex=i=consumeQuotedText(text,ch,i,endIndex):startIndex===i-4&&85===ch3&&82===ch2&&76===ch1&&40===ch?lastChIndex=i=consumeQuotedText(text,41,i,endIndex):ch>32&&(lastChIndex=i),ch3=ch2,ch2=ch1,ch1=-33&ch}return lastChIndex}function consumeQuotedText(text,quoteCharCode,startIndex,endIndex){let ch1=-1,index=startIndex;for(;index<endIndex;){const ch=text.charCodeAt(index++);if(ch==quoteCharCode&&92!==ch1)return index;ch1=92==ch&&92===ch1?0:ch}throw new Error}function \u0275\u0275styleProp(prop,value,suffix){return checkStylingProperty(prop,value,suffix,!1),\u0275\u0275styleProp}function \u0275\u0275classProp(className,value){return checkStylingProperty(className,value,null,!0),\u0275\u0275classProp}function \u0275\u0275styleMap(styles){checkStylingMap(styleKeyValueArraySet,styleStringParser,styles,!1)}function styleStringParser(keyValueArray,text){for(let i=parseStyle(text);i>=0;i=parseStyleNext(text,i))styleKeyValueArraySet(keyValueArray,getLastParsedKey(text),getLastParsedValue(text))}function \u0275\u0275classMap(classes){checkStylingMap(classKeyValueArraySet,classStringParser,classes,!0)}function classStringParser(keyValueArray,text){for(let i=parseClassName(text);i>=0;i=parseClassNameNext(text,i))keyValueArraySet(keyValueArray,getLastParsedKey(text),!0)}function checkStylingProperty(prop,value,suffix,isClassBased){const lView=getLView(),tView=getTView(),bindingIndex=incrementBindingIndex(2);tView.firstUpdatePass&&stylingFirstUpdatePass(tView,prop,bindingIndex,isClassBased),value!==NO_CHANGE&&bindingUpdated(lView,bindingIndex,value)&&updateStyling(tView,tView.data[getSelectedIndex()],lView,lView[RENDERER],prop,lView[bindingIndex+1]=normalizeSuffix(value,suffix),isClassBased,bindingIndex)}function checkStylingMap(keyValueArraySet2,stringParser,value,isClassBased){const tView=getTView(),bindingIndex=incrementBindingIndex(2);tView.firstUpdatePass&&stylingFirstUpdatePass(tView,null,bindingIndex,isClassBased);const lView=getLView();if(value!==NO_CHANGE&&bindingUpdated(lView,bindingIndex,value)){const tNode=tView.data[getSelectedIndex()];if(hasStylingInputShadow(tNode,isClassBased)&&!isInHostBindings(tView,bindingIndex)){let staticPrefix=isClassBased?tNode.classesWithoutHost:tNode.stylesWithoutHost;null!==staticPrefix&&(value=concatStringsWithSpace(staticPrefix,value||"")),setDirectiveInputsWhichShadowsStyling(tView,tNode,lView,value,isClassBased)}else updateStylingMap(tView,tNode,lView,lView[RENDERER],lView[bindingIndex+1],lView[bindingIndex+1]=toStylingKeyValueArray(keyValueArraySet2,stringParser,value),isClassBased,bindingIndex)}}function isInHostBindings(tView,bindingIndex){return bindingIndex>=tView.expandoStartIndex}function stylingFirstUpdatePass(tView,tStylingKey,bindingIndex,isClassBased){const tData=tView.data;if(null===tData[bindingIndex+1]){const tNode=tData[getSelectedIndex()],isHostBindings=isInHostBindings(tView,bindingIndex);hasStylingInputShadow(tNode,isClassBased)&&null===tStylingKey&&!isHostBindings&&(tStylingKey=!1),insertTStylingBinding(tData,tNode,tStylingKey=wrapInStaticStylingKey(tData,tNode,tStylingKey,isClassBased),bindingIndex,isHostBindings,isClassBased)}}function wrapInStaticStylingKey(tData,tNode,stylingKey,isClassBased){const hostDirectiveDef=getCurrentDirectiveDef(tData);let residual=isClassBased?tNode.residualClasses:tNode.residualStyles;if(null===hostDirectiveDef)0===(isClassBased?tNode.classBindings:tNode.styleBindings)&&(stylingKey=collectStylingFromTAttrs(stylingKey=collectStylingFromDirectives(null,tData,tNode,stylingKey,isClassBased),tNode.attrs,isClassBased),residual=null);else{const directiveStylingLast=tNode.directiveStylingLast;if(-1===directiveStylingLast||tData[directiveStylingLast]!==hostDirectiveDef)if(stylingKey=collectStylingFromDirectives(hostDirectiveDef,tData,tNode,stylingKey,isClassBased),null===residual){let templateStylingKey=getTemplateHeadTStylingKey(tData,tNode,isClassBased);void 0!==templateStylingKey&&Array.isArray(templateStylingKey)&&(templateStylingKey=collectStylingFromDirectives(null,tData,tNode,templateStylingKey[1],isClassBased),templateStylingKey=collectStylingFromTAttrs(templateStylingKey,tNode.attrs,isClassBased),setTemplateHeadTStylingKey(tData,tNode,isClassBased,templateStylingKey))}else residual=collectResidual(tData,tNode,isClassBased)}return void 0!==residual&&(isClassBased?tNode.residualClasses=residual:tNode.residualStyles=residual),stylingKey}function getTemplateHeadTStylingKey(tData,tNode,isClassBased){const bindings=isClassBased?tNode.classBindings:tNode.styleBindings;if(0!==getTStylingRangeNext(bindings))return tData[getTStylingRangePrev(bindings)]}function setTemplateHeadTStylingKey(tData,tNode,isClassBased,tStylingKey){tData[getTStylingRangePrev(isClassBased?tNode.classBindings:tNode.styleBindings)]=tStylingKey}function collectResidual(tData,tNode,isClassBased){let residual;const directiveEnd=tNode.directiveEnd;for(let i=1+tNode.directiveStylingLast;i<directiveEnd;i++)residual=collectStylingFromTAttrs(residual,tData[i].hostAttrs,isClassBased);return collectStylingFromTAttrs(residual,tNode.attrs,isClassBased)}function collectStylingFromDirectives(hostDirectiveDef,tData,tNode,stylingKey,isClassBased){let currentDirective=null;const directiveEnd=tNode.directiveEnd;let directiveStylingLast=tNode.directiveStylingLast;for(-1===directiveStylingLast?directiveStylingLast=tNode.directiveStart:directiveStylingLast++;directiveStylingLast<directiveEnd&&(currentDirective=tData[directiveStylingLast],stylingKey=collectStylingFromTAttrs(stylingKey,currentDirective.hostAttrs,isClassBased),currentDirective!==hostDirectiveDef);)directiveStylingLast++;return null!==hostDirectiveDef&&(tNode.directiveStylingLast=directiveStylingLast),stylingKey}function collectStylingFromTAttrs(stylingKey,attrs,isClassBased){const desiredMarker=isClassBased?1:2;let currentMarker=-1;if(null!==attrs)for(let i=0;i<attrs.length;i++){const item=attrs[i];"number"==typeof item?currentMarker=item:currentMarker===desiredMarker&&(Array.isArray(stylingKey)||(stylingKey=void 0===stylingKey?[]:["",stylingKey]),keyValueArraySet(stylingKey,item,!!isClassBased||attrs[++i]))}return void 0===stylingKey?null:stylingKey}function toStylingKeyValueArray(keyValueArraySet2,stringParser,value){if(null==value||""===value)return EMPTY_ARRAY;const styleKeyValueArray=[],unwrappedValue=unwrapSafeValue(value);if(Array.isArray(unwrappedValue))for(let i=0;i<unwrappedValue.length;i++)keyValueArraySet2(styleKeyValueArray,unwrappedValue[i],!0);else if("object"==typeof unwrappedValue)for(const key in unwrappedValue)unwrappedValue.hasOwnProperty(key)&&keyValueArraySet2(styleKeyValueArray,key,unwrappedValue[key]);else"string"==typeof unwrappedValue&&stringParser(styleKeyValueArray,unwrappedValue);return styleKeyValueArray}function styleKeyValueArraySet(keyValueArray,key,value){keyValueArraySet(keyValueArray,key,unwrapSafeValue(value))}function classKeyValueArraySet(keyValueArray,key,value){const stringKey=String(key);""!==stringKey&&!stringKey.includes(" ")&&keyValueArraySet(keyValueArray,stringKey,value)}function updateStylingMap(tView,tNode,lView,renderer,oldKeyValueArray,newKeyValueArray,isClassBased,bindingIndex){oldKeyValueArray===NO_CHANGE&&(oldKeyValueArray=EMPTY_ARRAY);let oldIndex=0,newIndex=0,oldKey=0<oldKeyValueArray.length?oldKeyValueArray[0]:null,newKey=0<newKeyValueArray.length?newKeyValueArray[0]:null;for(;null!==oldKey||null!==newKey;){const oldValue=oldIndex<oldKeyValueArray.length?oldKeyValueArray[oldIndex+1]:void 0,newValue=newIndex<newKeyValueArray.length?newKeyValueArray[newIndex+1]:void 0;let setValue,setKey=null;oldKey===newKey?(oldIndex+=2,newIndex+=2,oldValue!==newValue&&(setKey=newKey,setValue=newValue)):null===newKey||null!==oldKey&&oldKey<newKey?(oldIndex+=2,setKey=oldKey):(newIndex+=2,setKey=newKey,setValue=newValue),null!==setKey&&updateStyling(tView,tNode,lView,renderer,setKey,setValue,isClassBased,bindingIndex),oldKey=oldIndex<oldKeyValueArray.length?oldKeyValueArray[oldIndex]:null,newKey=newIndex<newKeyValueArray.length?newKeyValueArray[newIndex]:null}}function updateStyling(tView,tNode,lView,renderer,prop,value,isClassBased,bindingIndex){if(!(3&tNode.type))return;const tData=tView.data,tRange=tData[bindingIndex+1];isStylingValuePresent(getTStylingRangeNextDuplicate(tRange)?findStylingValue(tData,tNode,lView,prop,getTStylingRangeNext(tRange),isClassBased):void 0)||(isStylingValuePresent(value)||getTStylingRangePrevDuplicate(tRange)&&(value=findStylingValue(tData,null,lView,prop,bindingIndex,isClassBased)),applyStyling(renderer,isClassBased,getNativeByIndex(getSelectedIndex(),lView),prop,value))}function findStylingValue(tData,tNode,lView,prop,index,isClassBased){const isPrevDirection=null===tNode;let value;for(;index>0;){const rawKey=tData[index],containsStatics=Array.isArray(rawKey),key=containsStatics?rawKey[1]:rawKey,isStylingMap=null===key;let valueAtLViewIndex=lView[index+1];valueAtLViewIndex===NO_CHANGE&&(valueAtLViewIndex=isStylingMap?EMPTY_ARRAY:void 0);let currentValue=isStylingMap?keyValueArrayGet(valueAtLViewIndex,prop):key===prop?valueAtLViewIndex:void 0;if(containsStatics&&!isStylingValuePresent(currentValue)&&(currentValue=keyValueArrayGet(rawKey,prop)),isStylingValuePresent(currentValue)&&(value=currentValue,isPrevDirection))return value;const tRange=tData[index+1];index=isPrevDirection?getTStylingRangePrev(tRange):getTStylingRangeNext(tRange)}if(null!==tNode){let residual=isClassBased?tNode.residualClasses:tNode.residualStyles;null!=residual&&(value=keyValueArrayGet(residual,prop))}return value}function isStylingValuePresent(value){return void 0!==value}function normalizeSuffix(value,suffix){return null==value||""===value||("string"==typeof suffix?value+=suffix:"object"==typeof value&&(value=stringify(unwrapSafeValue(value)))),value}function hasStylingInputShadow(tNode,isClassBased){return 0!=(tNode.flags&(isClassBased?8:16))}function \u0275\u0275text(index,value=""){const lView=getLView(),tView=getTView(),adjustedIndex=index+HEADER_OFFSET,tNode=tView.firstCreatePass?getOrCreateTNode(tView,adjustedIndex,1,value,null):tView.data[adjustedIndex],textNative=_locateOrCreateTextNode(tView,lView,tNode,value,index);lView[adjustedIndex]=textNative,wasLastNodeCreated()&&appendChild(tView,lView,textNative,tNode),setCurrentTNode(tNode,!1)}__name(getLastParsedKey,"getLastParsedKey"),__name(getLastParsedValue,"getLastParsedValue"),__name(parseClassName,"parseClassName"),__name(parseClassNameNext,"parseClassNameNext"),__name(parseStyle,"parseStyle"),__name(parseStyleNext,"parseStyleNext"),__name(resetParserState,"resetParserState"),__name(consumeWhitespace,"consumeWhitespace"),__name(consumeClassToken,"consumeClassToken"),__name(consumeStyleKey,"consumeStyleKey"),__name(consumeSeparator,"consumeSeparator"),__name(consumeStyleValue,"consumeStyleValue"),__name(consumeQuotedText,"consumeQuotedText"),__name(function malformedStyleError(text,expecting,index){throw throwError(`Malformed style at location ${index} in string '`+text.substring(0,index)+"[>>"+text.substring(index,index+1)+"<<]"+text.slice(index+1)+`'. Expecting '${expecting}'.`)},"malformedStyleError"),__name(\u0275\u0275styleProp,"\u0275\u0275styleProp"),__name(\u0275\u0275classProp,"\u0275\u0275classProp"),__name(\u0275\u0275styleMap,"\u0275\u0275styleMap"),__name(styleStringParser,"styleStringParser"),__name(\u0275\u0275classMap,"\u0275\u0275classMap"),__name(classStringParser,"classStringParser"),__name(checkStylingProperty,"checkStylingProperty"),__name(checkStylingMap,"checkStylingMap"),__name(isInHostBindings,"isInHostBindings"),__name(stylingFirstUpdatePass,"stylingFirstUpdatePass"),__name(wrapInStaticStylingKey,"wrapInStaticStylingKey"),__name(getTemplateHeadTStylingKey,"getTemplateHeadTStylingKey"),__name(setTemplateHeadTStylingKey,"setTemplateHeadTStylingKey"),__name(collectResidual,"collectResidual"),__name(collectStylingFromDirectives,"collectStylingFromDirectives"),__name(collectStylingFromTAttrs,"collectStylingFromTAttrs"),__name(toStylingKeyValueArray,"toStylingKeyValueArray"),__name(styleKeyValueArraySet,"styleKeyValueArraySet"),__name(classKeyValueArraySet,"classKeyValueArraySet"),__name(updateStylingMap,"updateStylingMap"),__name(updateStyling,"updateStyling"),__name(findStylingValue,"findStylingValue"),__name(isStylingValuePresent,"isStylingValuePresent"),__name(normalizeSuffix,"normalizeSuffix"),__name(hasStylingInputShadow,"hasStylingInputShadow"),__name(\u0275\u0275text,"\u0275\u0275text");let _locateOrCreateTextNode=__name((tView,lView,tNode,value,index)=>(lastNodeWasCreated(!0),createTextNode(lView[RENDERER],value)),"_locateOrCreateTextNode");function locateOrCreateTextNodeImpl(tView,lView,tNode,value,index){const hydrationInfo=lView[HYDRATION],isNodeCreationMode=!hydrationInfo||isInSkipHydrationBlock$1()||isDisconnectedNode$1(hydrationInfo,index);return lastNodeWasCreated(isNodeCreationMode),isNodeCreationMode?createTextNode(lView[RENDERER],value):locateNextRNode(hydrationInfo,tView,lView,tNode)}function enableLocateOrCreateTextNodeImpl(){_locateOrCreateTextNode=locateOrCreateTextNodeImpl}function \u0275\u0275textInterpolate(v0){return \u0275\u0275textInterpolate1("",v0,""),\u0275\u0275textInterpolate}function \u0275\u0275textInterpolate1(prefix,v0,suffix){const lView=getLView(),interpolated=interpolation1(lView,prefix,v0,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolate1}function \u0275\u0275textInterpolate2(prefix,v0,i02,v1,suffix){const lView=getLView(),interpolated=interpolation2(lView,prefix,v0,i02,v1,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolate2}function \u0275\u0275textInterpolate3(prefix,v0,i02,v1,i1,v2,suffix){const lView=getLView(),interpolated=interpolation3(lView,prefix,v0,i02,v1,i1,v2,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolate3}function \u0275\u0275textInterpolate4(prefix,v0,i02,v1,i1,v2,i2,v3,suffix){const lView=getLView(),interpolated=interpolation4(lView,prefix,v0,i02,v1,i1,v2,i2,v3,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolate4}function \u0275\u0275textInterpolate5(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix){const lView=getLView(),interpolated=interpolation5(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolate5}function \u0275\u0275textInterpolate6(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix){const lView=getLView(),interpolated=interpolation6(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolate6}function \u0275\u0275textInterpolate7(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix){const lView=getLView(),interpolated=interpolation7(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolate7}function \u0275\u0275textInterpolate8(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix){const lView=getLView(),interpolated=interpolation8(lView,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolate8}function \u0275\u0275textInterpolateV(values){const lView=getLView(),interpolated=interpolationV(lView,values);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),\u0275\u0275textInterpolateV}function \u0275\u0275classMapInterpolate1(prefix,v0,suffix){checkStylingMap(keyValueArraySet,classStringParser,interpolation1(getLView(),prefix,v0,suffix),!0)}function \u0275\u0275classMapInterpolate2(prefix,v0,i02,v1,suffix){checkStylingMap(keyValueArraySet,classStringParser,interpolation2(getLView(),prefix,v0,i02,v1,suffix),!0)}function \u0275\u0275classMapInterpolate3(prefix,v0,i02,v1,i1,v2,suffix){checkStylingMap(keyValueArraySet,classStringParser,interpolation3(getLView(),prefix,v0,i02,v1,i1,v2,suffix),!0)}function \u0275\u0275classMapInterpolate4(prefix,v0,i02,v1,i1,v2,i2,v3,suffix){checkStylingMap(keyValueArraySet,classStringParser,interpolation4(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,suffix),!0)}function \u0275\u0275classMapInterpolate5(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix){checkStylingMap(keyValueArraySet,classStringParser,interpolation5(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix),!0)}function \u0275\u0275classMapInterpolate6(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix){checkStylingMap(keyValueArraySet,classStringParser,interpolation6(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix),!0)}function \u0275\u0275classMapInterpolate7(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix){checkStylingMap(keyValueArraySet,classStringParser,interpolation7(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix),!0)}function \u0275\u0275classMapInterpolate8(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix){checkStylingMap(keyValueArraySet,classStringParser,interpolation8(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix),!0)}function \u0275\u0275classMapInterpolateV(values){checkStylingMap(keyValueArraySet,classStringParser,interpolationV(getLView(),values),!0)}function \u0275\u0275styleMapInterpolate1(prefix,v0,suffix){\u0275\u0275styleMap(interpolation1(getLView(),prefix,v0,suffix))}function \u0275\u0275styleMapInterpolate2(prefix,v0,i02,v1,suffix){\u0275\u0275styleMap(interpolation2(getLView(),prefix,v0,i02,v1,suffix))}function \u0275\u0275styleMapInterpolate3(prefix,v0,i02,v1,i1,v2,suffix){\u0275\u0275styleMap(interpolation3(getLView(),prefix,v0,i02,v1,i1,v2,suffix))}function \u0275\u0275styleMapInterpolate4(prefix,v0,i02,v1,i1,v2,i2,v3,suffix){\u0275\u0275styleMap(interpolation4(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,suffix))}function \u0275\u0275styleMapInterpolate5(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix){\u0275\u0275styleMap(interpolation5(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix))}function \u0275\u0275styleMapInterpolate6(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix){\u0275\u0275styleMap(interpolation6(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix))}function \u0275\u0275styleMapInterpolate7(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix){\u0275\u0275styleMap(interpolation7(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix))}function \u0275\u0275styleMapInterpolate8(prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix){\u0275\u0275styleMap(interpolation8(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix))}function \u0275\u0275styleMapInterpolateV(values){\u0275\u0275styleMap(interpolationV(getLView(),values))}function \u0275\u0275stylePropInterpolate1(prop,prefix,v0,suffix,valueSuffix){return checkStylingProperty(prop,interpolation1(getLView(),prefix,v0,suffix),valueSuffix,!1),\u0275\u0275stylePropInterpolate1}function \u0275\u0275stylePropInterpolate2(prop,prefix,v0,i02,v1,suffix,valueSuffix){return checkStylingProperty(prop,interpolation2(getLView(),prefix,v0,i02,v1,suffix),valueSuffix,!1),\u0275\u0275stylePropInterpolate2}function \u0275\u0275stylePropInterpolate3(prop,prefix,v0,i02,v1,i1,v2,suffix,valueSuffix){return checkStylingProperty(prop,interpolation3(getLView(),prefix,v0,i02,v1,i1,v2,suffix),valueSuffix,!1),\u0275\u0275stylePropInterpolate3}function \u0275\u0275stylePropInterpolate4(prop,prefix,v0,i02,v1,i1,v2,i2,v3,suffix,valueSuffix){return checkStylingProperty(prop,interpolation4(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,suffix),valueSuffix,!1),\u0275\u0275stylePropInterpolate4}function \u0275\u0275stylePropInterpolate5(prop,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix,valueSuffix){return checkStylingProperty(prop,interpolation5(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,suffix),valueSuffix,!1),\u0275\u0275stylePropInterpolate5}function \u0275\u0275stylePropInterpolate6(prop,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix,valueSuffix){return checkStylingProperty(prop,interpolation6(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,suffix),valueSuffix,!1),\u0275\u0275stylePropInterpolate6}function \u0275\u0275stylePropInterpolate7(prop,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix,valueSuffix){return checkStylingProperty(prop,interpolation7(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,suffix),valueSuffix,!1),\u0275\u0275stylePropInterpolate7}function \u0275\u0275stylePropInterpolate8(prop,prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix,valueSuffix){return checkStylingProperty(prop,interpolation8(getLView(),prefix,v0,i02,v1,i1,v2,i2,v3,i3,v4,i4,v5,i5,v6,i6,v7,suffix),valueSuffix,!1),\u0275\u0275stylePropInterpolate8}function \u0275\u0275stylePropInterpolateV(prop,values,valueSuffix){return checkStylingProperty(prop,interpolationV(getLView(),values),valueSuffix,!1),\u0275\u0275stylePropInterpolateV}function \u0275\u0275hostProperty(propName,value,sanitizer){const lView=getLView();return bindingUpdated(lView,nextBindingIndex(),value)&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,value,lView[RENDERER],sanitizer,!0),\u0275\u0275hostProperty}function \u0275\u0275syntheticHostProperty(propName,value,sanitizer){const lView=getLView();if(bindingUpdated(lView,nextBindingIndex(),value)){const tView=getTView(),tNode=getSelectedTNode();elementPropertyInternal(tView,tNode,lView,propName,value,loadComponentRenderer(getCurrentDirectiveDef(tView.data),tNode,lView),sanitizer,!0)}return \u0275\u0275syntheticHostProperty}__name(locateOrCreateTextNodeImpl,"locateOrCreateTextNodeImpl"),__name(enableLocateOrCreateTextNodeImpl,"enableLocateOrCreateTextNodeImpl"),__name(\u0275\u0275textInterpolate,"\u0275\u0275textInterpolate"),__name(\u0275\u0275textInterpolate1,"\u0275\u0275textInterpolate1"),__name(\u0275\u0275textInterpolate2,"\u0275\u0275textInterpolate2"),__name(\u0275\u0275textInterpolate3,"\u0275\u0275textInterpolate3"),__name(\u0275\u0275textInterpolate4,"\u0275\u0275textInterpolate4"),__name(\u0275\u0275textInterpolate5,"\u0275\u0275textInterpolate5"),__name(\u0275\u0275textInterpolate6,"\u0275\u0275textInterpolate6"),__name(\u0275\u0275textInterpolate7,"\u0275\u0275textInterpolate7"),__name(\u0275\u0275textInterpolate8,"\u0275\u0275textInterpolate8"),__name(\u0275\u0275textInterpolateV,"\u0275\u0275textInterpolateV"),__name(\u0275\u0275classMapInterpolate1,"\u0275\u0275classMapInterpolate1"),__name(\u0275\u0275classMapInterpolate2,"\u0275\u0275classMapInterpolate2"),__name(\u0275\u0275classMapInterpolate3,"\u0275\u0275classMapInterpolate3"),__name(\u0275\u0275classMapInterpolate4,"\u0275\u0275classMapInterpolate4"),__name(\u0275\u0275classMapInterpolate5,"\u0275\u0275classMapInterpolate5"),__name(\u0275\u0275classMapInterpolate6,"\u0275\u0275classMapInterpolate6"),__name(\u0275\u0275classMapInterpolate7,"\u0275\u0275classMapInterpolate7"),__name(\u0275\u0275classMapInterpolate8,"\u0275\u0275classMapInterpolate8"),__name(\u0275\u0275classMapInterpolateV,"\u0275\u0275classMapInterpolateV"),__name(\u0275\u0275styleMapInterpolate1,"\u0275\u0275styleMapInterpolate1"),__name(\u0275\u0275styleMapInterpolate2,"\u0275\u0275styleMapInterpolate2"),__name(\u0275\u0275styleMapInterpolate3,"\u0275\u0275styleMapInterpolate3"),__name(\u0275\u0275styleMapInterpolate4,"\u0275\u0275styleMapInterpolate4"),__name(\u0275\u0275styleMapInterpolate5,"\u0275\u0275styleMapInterpolate5"),__name(\u0275\u0275styleMapInterpolate6,"\u0275\u0275styleMapInterpolate6"),__name(\u0275\u0275styleMapInterpolate7,"\u0275\u0275styleMapInterpolate7"),__name(\u0275\u0275styleMapInterpolate8,"\u0275\u0275styleMapInterpolate8"),__name(\u0275\u0275styleMapInterpolateV,"\u0275\u0275styleMapInterpolateV"),__name(\u0275\u0275stylePropInterpolate1,"\u0275\u0275stylePropInterpolate1"),__name(\u0275\u0275stylePropInterpolate2,"\u0275\u0275stylePropInterpolate2"),__name(\u0275\u0275stylePropInterpolate3,"\u0275\u0275stylePropInterpolate3"),__name(\u0275\u0275stylePropInterpolate4,"\u0275\u0275stylePropInterpolate4"),__name(\u0275\u0275stylePropInterpolate5,"\u0275\u0275stylePropInterpolate5"),__name(\u0275\u0275stylePropInterpolate6,"\u0275\u0275stylePropInterpolate6"),__name(\u0275\u0275stylePropInterpolate7,"\u0275\u0275stylePropInterpolate7"),__name(\u0275\u0275stylePropInterpolate8,"\u0275\u0275stylePropInterpolate8"),__name(\u0275\u0275stylePropInterpolateV,"\u0275\u0275stylePropInterpolateV"),__name(\u0275\u0275hostProperty,"\u0275\u0275hostProperty"),__name(\u0275\u0275syntheticHostProperty,"\u0275\u0275syntheticHostProperty");const u=void 0;function plural(val){const i=Math.floor(Math.abs(val)),v=val.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===v?1:5}__name(plural,"plural");var localeEn=["en",[["a","p"],["AM","PM"],u],[["AM","PM"],u,u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",u,"{1} 'at' {0}",u],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",plural];let LOCALE_DATA={};function findLocaleData(locale){const normalizedLocale=normalizeLocale(locale);let match=getLocaleData(normalizedLocale);if(match)return match;const parentLocale=normalizedLocale.split("-")[0];if(match=getLocaleData(parentLocale),match)return match;if("en"===parentLocale)return localeEn;throw new RuntimeError(701,!1)}function getLocalePluralCase(locale){return findLocaleData(locale)[LocaleDataIndex.PluralCase]}function getLocaleData(normalizedLocale){return normalizedLocale in LOCALE_DATA||(LOCALE_DATA[normalizedLocale]=_global.ng&&_global.ng.common&&_global.ng.common.locales&&_global.ng.common.locales[normalizedLocale]),LOCALE_DATA[normalizedLocale]}__name(function registerLocaleData(data,localeId,extraData){"string"!=typeof localeId&&(extraData=localeId,localeId=data[LocaleDataIndex.LocaleId]),localeId=localeId.toLowerCase().replace(/_/g,"-"),LOCALE_DATA[localeId]=data,extraData&&(LOCALE_DATA[localeId][LocaleDataIndex.ExtraData]=extraData)},"registerLocaleData"),__name(findLocaleData,"findLocaleData"),__name(function getLocaleCurrencyCode(locale){return findLocaleData(locale)[LocaleDataIndex.CurrencyCode]||null},"getLocaleCurrencyCode"),__name(getLocalePluralCase,"getLocalePluralCase"),__name(getLocaleData,"getLocaleData"),__name(function unregisterAllLocaleData(){LOCALE_DATA={}},"unregisterAllLocaleData");var LocaleDataIndex=(()=>((LocaleDataIndex=LocaleDataIndex||{})[LocaleDataIndex.LocaleId=0]="LocaleId",LocaleDataIndex[LocaleDataIndex.DayPeriodsFormat=1]="DayPeriodsFormat",LocaleDataIndex[LocaleDataIndex.DayPeriodsStandalone=2]="DayPeriodsStandalone",LocaleDataIndex[LocaleDataIndex.DaysFormat=3]="DaysFormat",LocaleDataIndex[LocaleDataIndex.DaysStandalone=4]="DaysStandalone",LocaleDataIndex[LocaleDataIndex.MonthsFormat=5]="MonthsFormat",LocaleDataIndex[LocaleDataIndex.MonthsStandalone=6]="MonthsStandalone",LocaleDataIndex[LocaleDataIndex.Eras=7]="Eras",LocaleDataIndex[LocaleDataIndex.FirstDayOfWeek=8]="FirstDayOfWeek",LocaleDataIndex[LocaleDataIndex.WeekendRange=9]="WeekendRange",LocaleDataIndex[LocaleDataIndex.DateFormat=10]="DateFormat",LocaleDataIndex[LocaleDataIndex.TimeFormat=11]="TimeFormat",LocaleDataIndex[LocaleDataIndex.DateTimeFormat=12]="DateTimeFormat",LocaleDataIndex[LocaleDataIndex.NumberSymbols=13]="NumberSymbols",LocaleDataIndex[LocaleDataIndex.NumberFormats=14]="NumberFormats",LocaleDataIndex[LocaleDataIndex.CurrencyCode=15]="CurrencyCode",LocaleDataIndex[LocaleDataIndex.CurrencySymbol=16]="CurrencySymbol",LocaleDataIndex[LocaleDataIndex.CurrencyName=17]="CurrencyName",LocaleDataIndex[LocaleDataIndex.Currencies=18]="Currencies",LocaleDataIndex[LocaleDataIndex.Directionality=19]="Directionality",LocaleDataIndex[LocaleDataIndex.PluralCase=20]="PluralCase",LocaleDataIndex[LocaleDataIndex.ExtraData=21]="ExtraData",LocaleDataIndex))();function normalizeLocale(locale){return locale.toLowerCase().replace(/_/g,"-")}__name(normalizeLocale,"normalizeLocale");const pluralMapping=["zero","one","two","few","many"];function getPluralCase(value,locale){const plural2=getLocalePluralCase(locale)(parseInt(value,10)),result=pluralMapping[plural2];return void 0!==result?result:"other"}__name(getPluralCase,"getPluralCase");const DEFAULT_LOCALE_ID="en-US",ELEMENT_MARKER={marker:"element"},ICU_MARKER={marker:"ICU"};var I18nCreateOpCode=(()=>((I18nCreateOpCode=I18nCreateOpCode||{})[I18nCreateOpCode.SHIFT=2]="SHIFT",I18nCreateOpCode[I18nCreateOpCode.APPEND_EAGERLY=1]="APPEND_EAGERLY",I18nCreateOpCode[I18nCreateOpCode.COMMENT=2]="COMMENT",I18nCreateOpCode))();let LOCALE_ID$1=DEFAULT_LOCALE_ID;function setLocaleId(localeId){assertDefined(localeId,"Expected localeId to be defined"),"string"==typeof localeId&&(LOCALE_ID$1=localeId.toLowerCase().replace(/_/g,"-"))}function getLocaleId(){return LOCALE_ID$1}function getInsertInFrontOfRNodeWithI18n(parentTNode,currentTNode,lView){const tNodeInsertBeforeIndex=currentTNode.insertBeforeIndex,insertBeforeIndex=Array.isArray(tNodeInsertBeforeIndex)?tNodeInsertBeforeIndex[0]:tNodeInsertBeforeIndex;return null===insertBeforeIndex?getInsertInFrontOfRNodeWithNoI18n(parentTNode,0,lView):unwrapRNode(lView[insertBeforeIndex])}function processI18nInsertBefore(renderer,childTNode,lView,childRNode,parentRElement){const tNodeInsertBeforeIndex=childTNode.insertBeforeIndex;if(Array.isArray(tNodeInsertBeforeIndex)){let i18nParent=childRNode,anchorRNode=null;if(3&childTNode.type||(anchorRNode=i18nParent,i18nParent=parentRElement),null!==i18nParent&&-1===childTNode.componentOffset)for(let i=1;i<tNodeInsertBeforeIndex.length;i++)nativeInsertBefore(renderer,i18nParent,lView[tNodeInsertBeforeIndex[i]],anchorRNode,!1)}}function addTNodeAndUpdateInsertBeforeIndex(previousTNodes,newTNode){if(previousTNodes.push(newTNode),previousTNodes.length>1)for(let i=previousTNodes.length-2;i>=0;i--){const existingTNode=previousTNodes[i];isI18nText(existingTNode)||isNewTNodeCreatedBefore(existingTNode,newTNode)&&null===getInsertBeforeIndex(existingTNode)&&setInsertBeforeIndex(existingTNode,newTNode.index)}}function isI18nText(tNode){return!(64&tNode.type)}function isNewTNodeCreatedBefore(existingTNode,newTNode){return isI18nText(newTNode)||existingTNode.index>newTNode.index}function getInsertBeforeIndex(tNode){const index=tNode.insertBeforeIndex;return Array.isArray(index)?index[0]:index}function setInsertBeforeIndex(tNode,value){const index=tNode.insertBeforeIndex;Array.isArray(index)?index[0]=value:(setI18nHandling(getInsertInFrontOfRNodeWithI18n,processI18nInsertBefore),tNode.insertBeforeIndex=value)}function getTIcu(tView,index){const value=tView.data[index];return null===value||"string"==typeof value?null:value.hasOwnProperty("currentCaseLViewIndex")?value:value.value}function setTIcu(tView,index,tIcu){const tNode=tView.data[index];null===tNode?tView.data[index]=tIcu:tNode.value=tIcu}function setTNodeInsertBeforeIndex(tNode,index){let insertBeforeIndex=tNode.insertBeforeIndex;null===insertBeforeIndex?(setI18nHandling(getInsertInFrontOfRNodeWithI18n,processI18nInsertBefore),insertBeforeIndex=tNode.insertBeforeIndex=[null,index]):(assertEqual(Array.isArray(insertBeforeIndex),!0,"Expecting array here"),insertBeforeIndex.push(index))}function createTNodePlaceholder(tView,previousTNodes,index){const tNode=createTNodeAtIndex(tView,index,64,null,null);return addTNodeAndUpdateInsertBeforeIndex(previousTNodes,tNode),tNode}function getCurrentICUCaseIndex(tIcu,lView){const currentCase=lView[tIcu.currentCaseLViewIndex];return null===currentCase?currentCase:currentCase<0?~currentCase:currentCase}function getParentFromIcuCreateOpCode(mergedCode){return mergedCode>>>17}function getRefFromIcuCreateOpCode(mergedCode){return(131070&mergedCode)>>>1}function getInstructionFromIcuCreateOpCode(mergedCode){return 1&mergedCode}function icuCreateOpCode(opCode,parentIdx,refIdx){return opCode|parentIdx<<17|refIdx<<1}__name(setLocaleId,"setLocaleId"),__name(getLocaleId,"getLocaleId"),__name(getInsertInFrontOfRNodeWithI18n,"getInsertInFrontOfRNodeWithI18n"),__name(processI18nInsertBefore,"processI18nInsertBefore"),__name(addTNodeAndUpdateInsertBeforeIndex,"addTNodeAndUpdateInsertBeforeIndex"),__name(isI18nText,"isI18nText"),__name(isNewTNodeCreatedBefore,"isNewTNodeCreatedBefore"),__name(getInsertBeforeIndex,"getInsertBeforeIndex"),__name(setInsertBeforeIndex,"setInsertBeforeIndex"),__name(getTIcu,"getTIcu"),__name(setTIcu,"setTIcu"),__name(setTNodeInsertBeforeIndex,"setTNodeInsertBeforeIndex"),__name(createTNodePlaceholder,"createTNodePlaceholder"),__name(getCurrentICUCaseIndex,"getCurrentICUCaseIndex"),__name(getParentFromIcuCreateOpCode,"getParentFromIcuCreateOpCode"),__name(getRefFromIcuCreateOpCode,"getRefFromIcuCreateOpCode"),__name(getInstructionFromIcuCreateOpCode,"getInstructionFromIcuCreateOpCode"),__name(icuCreateOpCode,"icuCreateOpCode");let changeMask=0,changeMaskCounter=0;function setMaskBit(hasChange){hasChange&&(changeMask|=1<<Math.min(changeMaskCounter,31)),changeMaskCounter++}function applyI18n(tView,lView,index){if(changeMaskCounter>0){const tI18n=tView.data[index];applyUpdateOpCodes(tView,lView,Array.isArray(tI18n)?tI18n:tI18n.update,getBindingIndex()-changeMaskCounter-1,changeMask)}changeMask=0,changeMaskCounter=0}function applyCreateOpCodes(lView,createOpCodes,parentRNode,insertInFrontOf){const renderer=lView[RENDERER];for(let i=0;i<createOpCodes.length;i++){const opCode=createOpCodes[i++],text=createOpCodes[i],appendNow=(opCode&I18nCreateOpCode.APPEND_EAGERLY)===I18nCreateOpCode.APPEND_EAGERLY,index=opCode>>>I18nCreateOpCode.SHIFT;let rNode=lView[index];null===rNode&&(rNode=lView[index]=(opCode&I18nCreateOpCode.COMMENT)===I18nCreateOpCode.COMMENT?renderer.createComment(text):createTextNode(renderer,text)),appendNow&&null!==parentRNode&&nativeInsertBefore(renderer,parentRNode,rNode,insertInFrontOf,!1)}}function applyMutableOpCodes(tView,mutableOpCodes,lView,anchorRNode){const renderer=lView[RENDERER];let rootRNode,rootIdx=null;for(let i=0;i<mutableOpCodes.length;i++){const opCode=mutableOpCodes[i];if("string"==typeof opCode){const textNodeIndex=mutableOpCodes[++i];null===lView[textNodeIndex]&&(lView[textNodeIndex]=createTextNode(renderer,opCode))}else if("number"==typeof opCode)switch(1&opCode){case 0:const parentIdx=getParentFromIcuCreateOpCode(opCode);let insertInFrontOf,parentRNode;if(null===rootIdx&&(rootIdx=parentIdx,rootRNode=nativeParentNode(renderer,anchorRNode)),parentIdx===rootIdx?(insertInFrontOf=anchorRNode,parentRNode=rootRNode):(insertInFrontOf=null,parentRNode=unwrapRNode(lView[parentIdx])),null!==parentRNode){const refIdx=getRefFromIcuCreateOpCode(opCode);nativeInsertBefore(renderer,parentRNode,lView[refIdx],insertInFrontOf,!1);const tIcu=getTIcu(tView,refIdx);if(null!==tIcu&&"object"==typeof tIcu){const caseIndex=getCurrentICUCaseIndex(tIcu,lView);null!==caseIndex&&applyMutableOpCodes(tView,tIcu.create[caseIndex],lView,lView[tIcu.anchorIdx])}}break;case 1:const attrName=mutableOpCodes[++i],attrValue=mutableOpCodes[++i];setElementAttribute(renderer,getNativeByIndex(opCode>>>1,lView),null,null,attrName,attrValue,null)}else switch(opCode){case ICU_MARKER:const commentValue=mutableOpCodes[++i],commentNodeIndex=mutableOpCodes[++i];null===lView[commentNodeIndex]&&attachPatchData(lView[commentNodeIndex]=createCommentNode(renderer,commentValue),lView);break;case ELEMENT_MARKER:const tagName=mutableOpCodes[++i],elementNodeIndex=mutableOpCodes[++i];null===lView[elementNodeIndex]&&attachPatchData(lView[elementNodeIndex]=createElementNode(renderer,tagName,null),lView)}}}function applyUpdateOpCodes(tView,lView,updateOpCodes,bindingsStartIndex,changeMask2){for(let i=0;i<updateOpCodes.length;i++){const checkBit=updateOpCodes[i],skipCodes=updateOpCodes[++i];if(checkBit&changeMask2){let value="";for(let j=i+1;j<=i+skipCodes;j++){const opCode=updateOpCodes[j];if("string"==typeof opCode)value+=opCode;else if("number"==typeof opCode)if(opCode<0)value+=renderStringify(lView[bindingsStartIndex-opCode]);else{const nodeIndex=opCode>>>2;switch(3&opCode){case 1:const propName=updateOpCodes[++j],sanitizeFn=updateOpCodes[++j],tNodeOrTagName=tView.data[nodeIndex];"string"==typeof tNodeOrTagName?setElementAttribute(lView[RENDERER],lView[nodeIndex],null,tNodeOrTagName,propName,value,sanitizeFn):elementPropertyInternal(tView,tNodeOrTagName,lView,propName,value,lView[RENDERER],sanitizeFn,!1);break;case 0:const rText=lView[nodeIndex];null!==rText&&updateTextNode(lView[RENDERER],rText,value);break;case 2:applyIcuSwitchCase(tView,getTIcu(tView,nodeIndex),lView,value);break;case 3:applyIcuUpdateCase(tView,getTIcu(tView,nodeIndex),bindingsStartIndex,lView)}}}}else{const opCode=updateOpCodes[i+1];if(opCode>0&&3==(3&opCode)){const tIcu=getTIcu(tView,opCode>>>2);lView[tIcu.currentCaseLViewIndex]<0&&applyIcuUpdateCase(tView,tIcu,bindingsStartIndex,lView)}}i+=skipCodes}}function applyIcuUpdateCase(tView,tIcu,bindingsStartIndex,lView){let activeCaseIndex=lView[tIcu.currentCaseLViewIndex];if(null!==activeCaseIndex){let mask=changeMask;activeCaseIndex<0&&(activeCaseIndex=lView[tIcu.currentCaseLViewIndex]=~activeCaseIndex,mask=-1),applyUpdateOpCodes(tView,lView,tIcu.update[activeCaseIndex],bindingsStartIndex,mask)}}function applyIcuSwitchCase(tView,tIcu,lView,value){const caseIndex=getCaseIndex(tIcu,value);if(getCurrentICUCaseIndex(tIcu,lView)!==caseIndex&&(applyIcuSwitchCaseRemove(tView,tIcu,lView),lView[tIcu.currentCaseLViewIndex]=null===caseIndex?null:~caseIndex,null!==caseIndex)){const anchorRNode=lView[tIcu.anchorIdx];anchorRNode&&applyMutableOpCodes(tView,tIcu.create[caseIndex],lView,anchorRNode)}}function applyIcuSwitchCaseRemove(tView,tIcu,lView){let activeCaseIndex=getCurrentICUCaseIndex(tIcu,lView);if(null!==activeCaseIndex){const removeCodes=tIcu.remove[activeCaseIndex];for(let i=0;i<removeCodes.length;i++){const nodeOrIcuIndex=removeCodes[i];if(nodeOrIcuIndex>0){const rNode=getNativeByIndex(nodeOrIcuIndex,lView);null!==rNode&&nativeRemoveNode(lView[RENDERER],rNode)}else applyIcuSwitchCaseRemove(tView,getTIcu(tView,~nodeOrIcuIndex),lView)}}}function getCaseIndex(icuExpression,bindingValue){let index=icuExpression.cases.indexOf(bindingValue);if(-1===index)switch(icuExpression.type){case 1:{const resolvedCase=getPluralCase(bindingValue,getLocaleId());index=icuExpression.cases.indexOf(resolvedCase),-1===index&&"other"!==resolvedCase&&(index=icuExpression.cases.indexOf("other"));break}case 0:index=icuExpression.cases.indexOf("other")}return-1===index?null:index}function loadIcuContainerVisitor(){const _stack=[];let _lView,_removes,_index=-1;function icuContainerIteratorStart(tIcuContainerNode,lView){for(_lView=lView;_stack.length;)_stack.pop();return enterIcu(tIcuContainerNode.value,lView),icuContainerIteratorNext}function enterIcu(tIcu,lView){_index=0;const currentCase=getCurrentICUCaseIndex(tIcu,lView);_removes=null!==currentCase?tIcu.remove[currentCase]:EMPTY_ARRAY}function icuContainerIteratorNext(){if(_index<_removes.length){const removeOpCode=_removes[_index++];return removeOpCode>0?_lView[removeOpCode]:(_stack.push(_index,_removes),enterIcu(_lView[TVIEW].data[~removeOpCode],_lView),icuContainerIteratorNext())}return 0===_stack.length?null:(_removes=_stack.pop(),_index=_stack.pop(),icuContainerIteratorNext())}return __name(icuContainerIteratorStart,"icuContainerIteratorStart"),__name(enterIcu,"enterIcu"),__name(icuContainerIteratorNext,"icuContainerIteratorNext"),icuContainerIteratorStart}__name(setMaskBit,"setMaskBit"),__name(applyI18n,"applyI18n"),__name(applyCreateOpCodes,"applyCreateOpCodes"),__name(applyMutableOpCodes,"applyMutableOpCodes"),__name(applyUpdateOpCodes,"applyUpdateOpCodes"),__name(applyIcuUpdateCase,"applyIcuUpdateCase"),__name(applyIcuSwitchCase,"applyIcuSwitchCase"),__name(applyIcuSwitchCaseRemove,"applyIcuSwitchCaseRemove"),__name(getCaseIndex,"getCaseIndex"),__name(loadIcuContainerVisitor,"loadIcuContainerVisitor"),__name(function i18nCreateOpCodesToString(opcodes){const createOpCodes=opcodes||(Array.isArray(this)?this:[]);let lines=[];for(let i=0;i<createOpCodes.length;i++){const opCode=createOpCodes[i++],appendNow=(opCode&I18nCreateOpCode.APPEND_EAGERLY)===I18nCreateOpCode.APPEND_EAGERLY,index=opCode>>>I18nCreateOpCode.SHIFT;lines.push(`lView[${index}] = document.${(opCode&I18nCreateOpCode.COMMENT)===I18nCreateOpCode.COMMENT?"createComment":"createText"}(${JSON.stringify(createOpCodes[i])});`),appendNow&&lines.push(`parent.appendChild(lView[${index}]);`)}return lines},"i18nCreateOpCodesToString"),__name(function i18nUpdateOpCodesToString(opcodes){const parser=new OpCodeParser(opcodes||(Array.isArray(this)?this:[]));let lines=[];function consumeOpCode(value){const ref=value>>>2;switch(3&value){case 0:return`(lView[${ref}] as Text).textContent = $$$`;case 1:const attrName=parser.consumeString(),sanitizationFn=parser.consumeFunction();return`(lView[${ref}] as Element).setAttribute('${attrName}', ${sanitizationFn?`(${sanitizationFn})($$$)`:"$$$"})`;case 2:return`icuSwitchCase(${ref}, $$$)`;case 3:return`icuUpdateCase(${ref})`}throw new Error("unexpected OpCode")}for(__name(consumeOpCode,"consumeOpCode");parser.hasMore();){let mask=parser.consumeNumber(),size=parser.consumeNumber();const end=parser.i+size,statements=[];let statement="";for(;parser.i<end;){let value=parser.consumeNumberOrString();if("string"==typeof value)statement+=value;else if(value<0)statement+="${lView[i"+value+"]}";else{const opCodeText=consumeOpCode(value);statements.push(opCodeText.replace("$$$","`"+statement+"`")+";"),statement=""}}lines.push(`if (mask & 0b${mask.toString(2)}) { ${statements.join(" ")} }`)}return lines},"i18nUpdateOpCodesToString"),__name(function icuCreateOpCodesToString(opcodes){const parser=new OpCodeParser(opcodes||(Array.isArray(this)?this:[]));let lines=[];function consumeOpCode(opCode){const parent=getParentFromIcuCreateOpCode(opCode),ref=getRefFromIcuCreateOpCode(opCode);switch(getInstructionFromIcuCreateOpCode(opCode)){case 0:return`(lView[${parent}] as Element).appendChild(lView[${lastRef}])`;case 1:return`(lView[${ref}] as Element).setAttribute("${parser.consumeString()}", "${parser.consumeString()}")`}throw new Error("Unexpected OpCode: "+getInstructionFromIcuCreateOpCode(opCode))}__name(consumeOpCode,"consumeOpCode");let lastRef=-1;for(;parser.hasMore();){let value=parser.consumeNumberStringOrMarker();if(value===ICU_MARKER){const text=parser.consumeString();lastRef=parser.consumeNumber(),lines.push(`lView[${lastRef}] = document.createComment("${text}")`)}else if(value===ELEMENT_MARKER){const text=parser.consumeString();lastRef=parser.consumeNumber(),lines.push(`lView[${lastRef}] = document.createElement("${text}")`)}else if("string"==typeof value)lastRef=parser.consumeNumber(),lines.push(`lView[${lastRef}] = document.createTextNode("${value}")`);else{if("number"!=typeof value)throw new Error("Unexpected value");{const line=consumeOpCode(value);line&&lines.push(line)}}}return lines},"icuCreateOpCodesToString"),__name(function i18nRemoveOpCodesToString(opcodes){const removeCodes=opcodes||(Array.isArray(this)?this:[]);let lines=[];for(let i=0;i<removeCodes.length;i++){const nodeOrIcuIndex=removeCodes[i];lines.push(nodeOrIcuIndex>0?`remove(lView[${nodeOrIcuIndex}])`:`removeNestedICU(${~nodeOrIcuIndex})`)}return lines},"i18nRemoveOpCodesToString");class OpCodeParser{constructor(codes){this.i=0,this.codes=codes}hasMore(){return this.i<this.codes.length}consumeNumber(){let value=this.codes[this.i++];return assertNumber(value,"expecting number in OpCode"),value}consumeString(){let value=this.codes[this.i++];return assertString(value,"expecting string in OpCode"),value}consumeFunction(){let value=this.codes[this.i++];if(null===value||"function"==typeof value)return value;throw new Error("expecting function in OpCode")}consumeNumberOrString(){let value=this.codes[this.i++];return"string"==typeof value||assertNumber(value,"expecting number or string in OpCode"),value}consumeNumberStringOrMarker(){let value=this.codes[this.i++];return"string"==typeof value||"number"==typeof value||value==ICU_MARKER||value==ELEMENT_MARKER||assertNumber(value,"expecting number, string, ICU_MARKER or ELEMENT_MARKER in OpCode"),value}}__name(OpCodeParser,"OpCodeParser");const BINDING_REGEXP=/\ufffd(\d+):?\d*\ufffd/gi,ICU_REGEXP=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,NESTED_ICU=/\ufffd(\d+)\ufffd/,ICU_BLOCK_REGEXP=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,MARKER="\ufffd",SUBTEMPLATE_REGEXP=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,PH_REGEXP=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,NGSP_UNICODE_REGEXP=/\uE500/g;function replaceNgsp(value){return value.replace(NGSP_UNICODE_REGEXP," ")}function i18nStartFirstCreatePass(tView,parentTNodeIndex,lView,index,message,subTemplateIndex){const rootTNode=getCurrentParentTNode(),createOpCodes=[],updateOpCodes=[],existingTNodeStack=[[]],msgParts=replaceNgsp(message=getTranslationForTemplate(message,subTemplateIndex)).split(PH_REGEXP);for(let i=0;i<msgParts.length;i++){let value=msgParts[i];if(1&i){const isClosing=47===value.charCodeAt(0),index2=(value.charCodeAt(isClosing?1:0),HEADER_OFFSET+Number.parseInt(value.substring(isClosing?2:1)));if(isClosing)existingTNodeStack.shift(),setCurrentTNode(getCurrentParentTNode(),!1);else{const tNode=createTNodePlaceholder(tView,existingTNodeStack[0],index2);existingTNodeStack.unshift([]),setCurrentTNode(tNode,!0)}}else{const parts=i18nParseTextIntoPartsAndICU(value);for(let j=0;j<parts.length;j++){let part=parts[j];if(1&j){const icuExpression=part;if("object"!=typeof icuExpression)throw new Error(`Unable to parse ICU expression in "${message}" message.`);icuStart(tView,lView,updateOpCodes,parentTNodeIndex,icuExpression,createTNodeAndAddOpCode(tView,rootTNode,existingTNodeStack[0],lView,createOpCodes,"",!0).index)}else""!==part&&i18nStartFirstCreatePassProcessTextNode(tView,rootTNode,existingTNodeStack[0],createOpCodes,updateOpCodes,lView,part)}}}tView.data[index]={create:createOpCodes,update:updateOpCodes}}function createTNodeAndAddOpCode(tView,rootTNode,existingTNodes,lView,createOpCodes,text,isICU){const i18nNodeIdx=allocExpando(tView,lView,1,null);let opCode=i18nNodeIdx<<I18nCreateOpCode.SHIFT,parentTNode=getCurrentParentTNode();rootTNode===parentTNode&&(parentTNode=null),null===parentTNode&&(opCode|=I18nCreateOpCode.APPEND_EAGERLY),isICU&&(opCode|=I18nCreateOpCode.COMMENT,ensureIcuContainerVisitorLoaded(loadIcuContainerVisitor)),createOpCodes.push(opCode,null===text?"":text);const tNode=createTNodeAtIndex(tView,i18nNodeIdx,isICU?32:1,null===text?"":text,null);addTNodeAndUpdateInsertBeforeIndex(existingTNodes,tNode);const tNodeIdx=tNode.index;return setCurrentTNode(tNode,!1),null!==parentTNode&&rootTNode!==parentTNode&&setTNodeInsertBeforeIndex(parentTNode,tNodeIdx),tNode}function i18nStartFirstCreatePassProcessTextNode(tView,rootTNode,existingTNodes,createOpCodes,updateOpCodes,lView,text){const hasBinding=text.match(BINDING_REGEXP),tNode=createTNodeAndAddOpCode(tView,rootTNode,existingTNodes,lView,createOpCodes,hasBinding?null:text,!1);hasBinding&&generateBindingUpdateOpCodes(updateOpCodes,text,tNode.index,null,0,null)}function i18nAttributesFirstPass(tView,index,values){const previousElementIndex=getCurrentTNode().index,updateOpCodes=[];if(tView.firstCreatePass&&null===tView.data[index]){for(let i=0;i<values.length;i+=2){const attrName=values[i],message=values[i+1];if(""!==message){if(ICU_REGEXP.test(message))throw new Error(`ICU expressions are not supported in attributes. Message: "${message}".`);generateBindingUpdateOpCodes(updateOpCodes,message,previousElementIndex,attrName,countBindings(updateOpCodes),null)}}tView.data[index]=updateOpCodes}}function generateBindingUpdateOpCodes(updateOpCodes,str,destinationNode,attrName,bindingStart,sanitizeFn){const maskIndex=updateOpCodes.length,sizeIndex=maskIndex+1;updateOpCodes.push(null,null);const startIndex=maskIndex+2,textParts=str.split(BINDING_REGEXP);let mask=0;for(let j=0;j<textParts.length;j++){const textValue=textParts[j];if(1&j){const bindingIndex=bindingStart+parseInt(textValue,10);updateOpCodes.push(-1-bindingIndex),mask|=toMaskBit(bindingIndex)}else""!==textValue&&updateOpCodes.push(textValue)}return updateOpCodes.push(destinationNode<<2|(attrName?1:0)),attrName&&updateOpCodes.push(attrName,sanitizeFn),updateOpCodes[maskIndex]=mask,updateOpCodes[sizeIndex]=updateOpCodes.length-startIndex,mask}function countBindings(opCodes){let count=0;for(let i=0;i<opCodes.length;i++){const opCode=opCodes[i];"number"==typeof opCode&&opCode<0&&count++}return count}function toMaskBit(bindingIndex){return 1<<Math.min(bindingIndex,31)}function isRootTemplateMessage(subTemplateIndex){return-1===subTemplateIndex}function removeInnerTemplateTranslation(message){let match,tagMatched,res="",index=0,inTemplate=!1;for(;null!==(match=SUBTEMPLATE_REGEXP.exec(message));)inTemplate?match[0]===`${MARKER}/*${tagMatched}${MARKER}`&&(index=match.index,inTemplate=!1):(res+=message.substring(index,match.index+match[0].length),tagMatched=match[1],inTemplate=!0);return res+=message.slice(index),res}function getTranslationForTemplate(message,subTemplateIndex){if(isRootTemplateMessage(subTemplateIndex))return removeInnerTemplateTranslation(message);{const start=message.indexOf(`:${subTemplateIndex}${MARKER}`)+2+subTemplateIndex.toString().length,end=message.search(new RegExp(`${MARKER}\\/\\*\\d+:${subTemplateIndex}${MARKER}`));return removeInnerTemplateTranslation(message.substring(start,end))}}function icuStart(tView,lView,updateOpCodes,parentIdx,icuExpression,anchorIdx){let bindingMask=0;const tIcu={type:icuExpression.type,currentCaseLViewIndex:allocExpando(tView,lView,1,null),anchorIdx,cases:[],create:[],remove:[],update:[]};addUpdateIcuSwitch(updateOpCodes,icuExpression,anchorIdx),setTIcu(tView,anchorIdx,tIcu);const values=icuExpression.values;for(let i=0;i<values.length;i++){const valueArr=values[i],nestedIcus=[];for(let j=0;j<valueArr.length;j++){const value=valueArr[j];if("string"!=typeof value){const icuIndex=nestedIcus.push(value)-1;valueArr[j]=`\x3c!--\ufffd${icuIndex}\ufffd--\x3e`}}bindingMask=parseIcuCase(tView,tIcu,lView,updateOpCodes,parentIdx,icuExpression.cases[i],valueArr.join(""),nestedIcus)|bindingMask}bindingMask&&addUpdateIcuUpdate(updateOpCodes,bindingMask,anchorIdx)}function parseICUBlock(pattern){const cases=[],values=[];let icuType=1,mainBinding=0;const parts=i18nParseTextIntoPartsAndICU(pattern=pattern.replace(ICU_BLOCK_REGEXP,function(str,binding,type){return icuType="select"===type?0:1,mainBinding=parseInt(binding.slice(1),10),""}));for(let pos=0;pos<parts.length;){let key=parts[pos++].trim();1===icuType&&(key=key.replace(/\s*(?:=)?(\w+)\s*/,"$1")),key.length&&cases.push(key);const blocks=i18nParseTextIntoPartsAndICU(parts[pos++]);cases.length>values.length&&values.push(blocks)}return{type:icuType,mainBinding,cases,values}}function i18nParseTextIntoPartsAndICU(pattern){if(!pattern)return[];let prevPos=0;const braceStack=[],results=[],braces=/[{}]/g;let match;for(braces.lastIndex=0;match=braces.exec(pattern);){const pos=match.index;if("}"==match[0]){if(braceStack.pop(),0==braceStack.length){const block=pattern.substring(prevPos,pos);ICU_BLOCK_REGEXP.test(block)?results.push(parseICUBlock(block)):results.push(block),prevPos=pos+1}}else{if(0==braceStack.length){const substring2=pattern.substring(prevPos,pos);results.push(substring2),prevPos=pos+1}braceStack.push("{")}}const substring=pattern.substring(prevPos);return results.push(substring),results}function parseIcuCase(tView,tIcu,lView,updateOpCodes,parentIdx,caseName,unsafeCaseHtml,nestedIcus){const create=[],remove2=[],update=[];tIcu.cases.push(caseName),tIcu.create.push(create),tIcu.remove.push(remove2),tIcu.update.push(update);const inertBodyElement=getInertBodyHelper(getDocument()).getInertBodyElement(unsafeCaseHtml),inertRootNode=getTemplateContent(inertBodyElement)||inertBodyElement;return inertRootNode?walkIcuTree(tView,tIcu,lView,updateOpCodes,create,remove2,update,inertRootNode,parentIdx,nestedIcus,0):0}function walkIcuTree(tView,tIcu,lView,sharedUpdateOpCodes,create,remove2,update,parentNode,parentIdx,nestedIcus,depth){let bindingMask=0,currentNode=parentNode.firstChild;for(;currentNode;){const newIndex=allocExpando(tView,lView,1,null);switch(currentNode.nodeType){case Node.ELEMENT_NODE:const element=currentNode,tagName=element.tagName.toLowerCase();if(VALID_ELEMENTS.hasOwnProperty(tagName)){addCreateNodeAndAppend(create,ELEMENT_MARKER,tagName,parentIdx,newIndex),tView.data[newIndex]=tagName;const elAttrs=element.attributes;for(let i=0;i<elAttrs.length;i++){const attr=elAttrs.item(i),lowerAttrName=attr.name.toLowerCase();attr.value.match(BINDING_REGEXP)?VALID_ATTRS.hasOwnProperty(lowerAttrName)&&generateBindingUpdateOpCodes(update,attr.value,newIndex,attr.name,0,URI_ATTRS[lowerAttrName]?_sanitizeUrl:null):addCreateAttribute(create,newIndex,attr)}bindingMask=walkIcuTree(tView,tIcu,lView,sharedUpdateOpCodes,create,remove2,update,currentNode,newIndex,nestedIcus,depth+1)|bindingMask,addRemoveNode(remove2,newIndex,depth)}break;case Node.TEXT_NODE:const value=currentNode.textContent||"",hasBinding=value.match(BINDING_REGEXP);addCreateNodeAndAppend(create,null,hasBinding?"":value,parentIdx,newIndex),addRemoveNode(remove2,newIndex,depth),hasBinding&&(bindingMask=generateBindingUpdateOpCodes(update,value,newIndex,null,0,null)|bindingMask);break;case Node.COMMENT_NODE:const isNestedIcu=NESTED_ICU.exec(currentNode.textContent||"");if(isNestedIcu){const icuExpression=nestedIcus[parseInt(isNestedIcu[1],10)];addCreateNodeAndAppend(create,ICU_MARKER,"",parentIdx,newIndex),icuStart(tView,lView,sharedUpdateOpCodes,parentIdx,icuExpression,newIndex),addRemoveNestedIcu(remove2,newIndex,depth)}}currentNode=currentNode.nextSibling}return bindingMask}function addRemoveNode(remove2,index,depth){0===depth&&remove2.push(index)}function addRemoveNestedIcu(remove2,index,depth){0===depth&&(remove2.push(~index),remove2.push(index))}function addUpdateIcuSwitch(update,icuExpression,index){update.push(toMaskBit(icuExpression.mainBinding),2,-1-icuExpression.mainBinding,index<<2|2)}function addUpdateIcuUpdate(update,bindingMask,index){update.push(bindingMask,1,index<<2|3)}function addCreateNodeAndAppend(create,marker,text,appendToParentIdx,createAtIdx){null!==marker&&create.push(marker),create.push(text,createAtIdx,icuCreateOpCode(0,appendToParentIdx,createAtIdx))}function addCreateAttribute(create,newIndex,attr){create.push(newIndex<<1|1,attr.name,attr.value)}__name(replaceNgsp,"replaceNgsp"),__name(function attachDebugGetter(obj,debugGetter){throw new Error("This method should be guarded with `ngDevMode` so that it can be tree shaken in production!")},"attachDebugGetter"),__name(i18nStartFirstCreatePass,"i18nStartFirstCreatePass"),__name(createTNodeAndAddOpCode,"createTNodeAndAddOpCode"),__name(i18nStartFirstCreatePassProcessTextNode,"i18nStartFirstCreatePassProcessTextNode"),__name(i18nAttributesFirstPass,"i18nAttributesFirstPass"),__name(generateBindingUpdateOpCodes,"generateBindingUpdateOpCodes"),__name(countBindings,"countBindings"),__name(toMaskBit,"toMaskBit"),__name(isRootTemplateMessage,"isRootTemplateMessage"),__name(removeInnerTemplateTranslation,"removeInnerTemplateTranslation"),__name(getTranslationForTemplate,"getTranslationForTemplate"),__name(icuStart,"icuStart"),__name(parseICUBlock,"parseICUBlock"),__name(i18nParseTextIntoPartsAndICU,"i18nParseTextIntoPartsAndICU"),__name(parseIcuCase,"parseIcuCase"),__name(walkIcuTree,"walkIcuTree"),__name(addRemoveNode,"addRemoveNode"),__name(addRemoveNestedIcu,"addRemoveNestedIcu"),__name(addUpdateIcuSwitch,"addUpdateIcuSwitch"),__name(addUpdateIcuUpdate,"addUpdateIcuUpdate"),__name(addCreateNodeAndAppend,"addCreateNodeAndAppend"),__name(addCreateAttribute,"addCreateAttribute");const ROOT_TEMPLATE_ID=0,PP_MULTI_VALUE_PLACEHOLDERS_REGEXP=/\[(\ufffd.+?\ufffd?)\]/,PP_PLACEHOLDERS_REGEXP=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,PP_ICU_VARS_REGEXP=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,PP_ICU_PLACEHOLDERS_REGEXP=/{([A-Z0-9_]+)}/g,PP_ICUS_REGEXP=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,PP_CLOSE_TEMPLATE_REGEXP=/\/\*/,PP_TEMPLATE_ID_REGEXP=/\d+\:(\d+)/;function i18nPostprocess(message,replacements={}){let result=message;if(PP_MULTI_VALUE_PLACEHOLDERS_REGEXP.test(message)){const matches={},templateIdsStack=[ROOT_TEMPLATE_ID];result=result.replace(PP_PLACEHOLDERS_REGEXP,(m,phs,tmpl)=>{const content=phs||tmpl,placeholders=matches[content]||[];if(placeholders.length||(content.split("|").forEach(placeholder2=>{const match=placeholder2.match(PP_TEMPLATE_ID_REGEXP),templateId2=match?parseInt(match[1],10):ROOT_TEMPLATE_ID,isCloseTemplateTag2=PP_CLOSE_TEMPLATE_REGEXP.test(placeholder2);placeholders.push([templateId2,isCloseTemplateTag2,placeholder2])}),matches[content]=placeholders),!placeholders.length)throw new Error(`i18n postprocess: unmatched placeholder - ${content}`);const currentTemplateId=templateIdsStack[templateIdsStack.length-1];let idx=0;for(let i=0;i<placeholders.length;i++)if(placeholders[i][0]===currentTemplateId){idx=i;break}const[templateId,isCloseTemplateTag,placeholder]=placeholders[idx];return isCloseTemplateTag?templateIdsStack.pop():currentTemplateId!==templateId&&templateIdsStack.push(templateId),placeholders.splice(idx,1),placeholder})}return Object.keys(replacements).length&&(result=result.replace(PP_ICU_VARS_REGEXP,(match,start,key,_type,_idx,end)=>replacements.hasOwnProperty(key)?`${start}${replacements[key]}${end}`:match),result=result.replace(PP_ICU_PLACEHOLDERS_REGEXP,(match,key)=>replacements.hasOwnProperty(key)?replacements[key]:match),result=result.replace(PP_ICUS_REGEXP,(match,key)=>{if(replacements.hasOwnProperty(key)){const list=replacements[key];if(!list.length)throw new Error(`i18n postprocess: unmatched ICU - ${match} with key: ${key}`);return list.shift()}return match})),result}function \u0275\u0275i18nStart(index,messageIndex,subTemplateIndex=-1){const tView=getTView(),lView=getLView(),adjustedIndex=HEADER_OFFSET+index,message=getConstant(tView.consts,messageIndex),parentTNode=getCurrentParentTNode();tView.firstCreatePass&&i18nStartFirstCreatePass(tView,null===parentTNode?0:parentTNode.index,lView,adjustedIndex,message,subTemplateIndex),2===tView.type?lView[DECLARATION_COMPONENT_VIEW][FLAGS]|=32:lView[FLAGS]|=32;const tI18n=tView.data[adjustedIndex],parentRNode=getClosestRElement(tView,parentTNode===lView[T_HOST]?null:parentTNode,lView);applyCreateOpCodes(lView,tI18n.create,parentRNode,parentTNode&&8&parentTNode.type?lView[parentTNode.index]:null),setInI18nBlock(!0)}function \u0275\u0275i18nEnd(){setInI18nBlock(!1)}function \u0275\u0275i18n(index,messageIndex,subTemplateIndex){\u0275\u0275i18nStart(index,messageIndex,subTemplateIndex),\u0275\u0275i18nEnd()}function \u0275\u0275i18nAttributes(index,attrsIndex){const tView=getTView(),attrs=getConstant(tView.consts,attrsIndex);i18nAttributesFirstPass(tView,index+HEADER_OFFSET,attrs)}function \u0275\u0275i18nExp(value){return setMaskBit(bindingUpdated(getLView(),nextBindingIndex(),value)),\u0275\u0275i18nExp}function \u0275\u0275i18nApply(index){applyI18n(getTView(),getLView(),index+HEADER_OFFSET)}function \u0275\u0275i18nPostprocess(message,replacements={}){return i18nPostprocess(message,replacements)}function providersResolver(def,providers,viewProviders){const tView=getTView();if(tView.firstCreatePass){const isComponent=isComponentDef(def);resolveProvider(viewProviders,tView.data,tView.blueprint,isComponent,!0),resolveProvider(providers,tView.data,tView.blueprint,isComponent,!1)}}function resolveProvider(provider,tInjectables,lInjectablesBlueprint,isComponent,isViewProvider){if(provider=resolveForwardRef(provider),Array.isArray(provider))for(let i=0;i<provider.length;i++)resolveProvider(provider[i],tInjectables,lInjectablesBlueprint,isComponent,isViewProvider);else{const tView=getTView(),lView=getLView();let token=isTypeProvider(provider)?provider:resolveForwardRef(provider.provide),providerFactory=providerToFactory(provider);const tNode=getCurrentTNode(),beginIndex=1048575&tNode.providerIndexes,endIndex=tNode.directiveStart,cptViewProvidersCount=tNode.providerIndexes>>20;if(isTypeProvider(provider)||!provider.multi){const factory=new NodeInjectorFactory(providerFactory,isViewProvider,\u0275\u0275directiveInject),existingFactoryIndex=indexOf(token,tInjectables,isViewProvider?beginIndex:beginIndex+cptViewProvidersCount,endIndex);-1===existingFactoryIndex?(diPublicInInjector(getOrCreateNodeInjectorForNode(tNode,lView),tView,token),registerDestroyHooksIfSupported(tView,provider,tInjectables.length),tInjectables.push(token),tNode.directiveStart++,tNode.directiveEnd++,isViewProvider&&(tNode.providerIndexes+=1048576),lInjectablesBlueprint.push(factory),lView.push(factory)):(lInjectablesBlueprint[existingFactoryIndex]=factory,lView[existingFactoryIndex]=factory)}else{const existingProvidersFactoryIndex=indexOf(token,tInjectables,beginIndex+cptViewProvidersCount,endIndex),existingViewProvidersFactoryIndex=indexOf(token,tInjectables,beginIndex,beginIndex+cptViewProvidersCount),doesViewProvidersFactoryExist=existingViewProvidersFactoryIndex>=0&&lInjectablesBlueprint[existingViewProvidersFactoryIndex];if(isViewProvider&&!doesViewProvidersFactoryExist||!isViewProvider&&!(existingProvidersFactoryIndex>=0&&lInjectablesBlueprint[existingProvidersFactoryIndex])){diPublicInInjector(getOrCreateNodeInjectorForNode(tNode,lView),tView,token);const factory=multiFactory(isViewProvider?multiViewProvidersFactoryResolver:multiProvidersFactoryResolver,lInjectablesBlueprint.length,isViewProvider,isComponent,providerFactory);!isViewProvider&&doesViewProvidersFactoryExist&&(lInjectablesBlueprint[existingViewProvidersFactoryIndex].providerFactory=factory),registerDestroyHooksIfSupported(tView,provider,tInjectables.length,0),tInjectables.push(token),tNode.directiveStart++,tNode.directiveEnd++,isViewProvider&&(tNode.providerIndexes+=1048576),lInjectablesBlueprint.push(factory),lView.push(factory)}else registerDestroyHooksIfSupported(tView,provider,existingProvidersFactoryIndex>-1?existingProvidersFactoryIndex:existingViewProvidersFactoryIndex,multiFactoryAdd(lInjectablesBlueprint[isViewProvider?existingViewProvidersFactoryIndex:existingProvidersFactoryIndex],providerFactory,!isViewProvider&&isComponent));!isViewProvider&&isComponent&&doesViewProvidersFactoryExist&&lInjectablesBlueprint[existingViewProvidersFactoryIndex].componentProviders++}}}function registerDestroyHooksIfSupported(tView,provider,contextIndex,indexInFactory){const providerIsTypeProvider=isTypeProvider(provider),providerIsClassProvider=isClassProvider(provider);if(providerIsTypeProvider||providerIsClassProvider){const ngOnDestroy=(providerIsClassProvider?resolveForwardRef(provider.useClass):provider).prototype.ngOnDestroy;if(ngOnDestroy){const hooks=tView.destroyHooks||(tView.destroyHooks=[]);if(!providerIsTypeProvider&&provider.multi){const existingCallbacksIndex=hooks.indexOf(contextIndex);-1===existingCallbacksIndex?hooks.push(contextIndex,[indexInFactory,ngOnDestroy]):hooks[existingCallbacksIndex+1].push(indexInFactory,ngOnDestroy)}else hooks.push(contextIndex,ngOnDestroy)}}}function multiFactoryAdd(multiFactory2,factory,isComponentProvider){return isComponentProvider&&multiFactory2.componentProviders++,multiFactory2.multi.push(factory)-1}function indexOf(item,arr,begin,end){for(let i=begin;i<end;i++)if(arr[i]===item)return i;return-1}function multiProvidersFactoryResolver(_,tData,lData,tNode){return multiResolve(this.multi,[])}function multiViewProvidersFactoryResolver(_,tData,lView,tNode){const factories=this.multi;let result;if(this.providerFactory){const componentCount=this.providerFactory.componentProviders,multiProviders=getNodeInjectable(lView,lView[TVIEW],this.providerFactory.index,tNode);result=multiProviders.slice(0,componentCount),multiResolve(factories,result);for(let i=componentCount;i<multiProviders.length;i++)result.push(multiProviders[i])}else result=[],multiResolve(factories,result);return result}function multiResolve(factories,result){for(let i=0;i<factories.length;i++)result.push((0,factories[i])());return result}function multiFactory(factoryFn,index,isViewProvider,isComponent,f){const factory=new NodeInjectorFactory(factoryFn,isViewProvider,\u0275\u0275directiveInject);return factory.multi=[],factory.index=index,factory.componentProviders=0,multiFactoryAdd(factory,f,isComponent&&!isViewProvider),factory}function \u0275\u0275ProvidersFeature(providers,viewProviders=[]){return definition=>{definition.providersResolver=(def,processProvidersFn)=>providersResolver(def,processProvidersFn?processProvidersFn(providers):providers,viewProviders)}}__name(i18nPostprocess,"i18nPostprocess"),__name(\u0275\u0275i18nStart,"\u0275\u0275i18nStart"),__name(\u0275\u0275i18nEnd,"\u0275\u0275i18nEnd"),__name(\u0275\u0275i18n,"\u0275\u0275i18n"),__name(\u0275\u0275i18nAttributes,"\u0275\u0275i18nAttributes"),__name(\u0275\u0275i18nExp,"\u0275\u0275i18nExp"),__name(\u0275\u0275i18nApply,"\u0275\u0275i18nApply"),__name(\u0275\u0275i18nPostprocess,"\u0275\u0275i18nPostprocess"),__name(providersResolver,"providersResolver"),__name(resolveProvider,"resolveProvider"),__name(registerDestroyHooksIfSupported,"registerDestroyHooksIfSupported"),__name(multiFactoryAdd,"multiFactoryAdd"),__name(indexOf,"indexOf"),__name(multiProvidersFactoryResolver,"multiProvidersFactoryResolver"),__name(multiViewProvidersFactoryResolver,"multiViewProvidersFactoryResolver"),__name(multiResolve,"multiResolve"),__name(multiFactory,"multiFactory"),__name(\u0275\u0275ProvidersFeature,"\u0275\u0275ProvidersFeature");class NgModuleRef$1{}__name(NgModuleRef$1,"NgModuleRef$1");class NgModuleFactory$1{}function createNgModule(ngModule,parentInjector){return new NgModuleRef(ngModule,parentInjector??null,[])}__name(NgModuleFactory$1,"NgModuleFactory$1"),__name(createNgModule,"createNgModule");class NgModuleRef extends NgModuleRef$1{constructor(ngModuleType,_parent,additionalProviders){super(),this._parent=_parent,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ComponentFactoryResolver(this);const ngModuleDef=getNgModuleDef(ngModuleType);this._bootstrapComponents=maybeUnwrapFn(ngModuleDef.bootstrap),this._r3Injector=createInjectorWithoutInjectorInstances(ngModuleType,_parent,[{provide:NgModuleRef$1,useValue:this},{provide:ComponentFactoryResolver$1,useValue:this.componentFactoryResolver},...additionalProviders],stringify(ngModuleType),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(ngModuleType)}get injector(){return this._r3Injector}destroy(){const injector=this._r3Injector;!injector.destroyed&&injector.destroy(),this.destroyCbs.forEach(fn=>fn()),this.destroyCbs=null}onDestroy(callback){this.destroyCbs.push(callback)}}__name(NgModuleRef,"NgModuleRef");class NgModuleFactory extends NgModuleFactory$1{constructor(moduleType){super(),this.moduleType=moduleType}create(parentInjector){return new NgModuleRef(this.moduleType,parentInjector,[])}}function createNgModuleRefWithProviders(moduleType,parentInjector,additionalProviders){return new NgModuleRef(moduleType,parentInjector,additionalProviders)}__name(NgModuleFactory,"NgModuleFactory"),__name(createNgModuleRefWithProviders,"createNgModuleRefWithProviders");class EnvironmentNgModuleRefAdapter extends NgModuleRef$1{constructor(config){super(),this.componentFactoryResolver=new ComponentFactoryResolver(this),this.instance=null;const injector=new R3Injector([...config.providers,{provide:NgModuleRef$1,useValue:this},{provide:ComponentFactoryResolver$1,useValue:this.componentFactoryResolver}],config.parent||getNullInjector(),config.debugName,new Set(["environment"]));this.injector=injector,config.runEnvironmentInitializers&&injector.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(callback){this.injector.onDestroy(callback)}}function createEnvironmentInjector(providers,parent,debugName=null){return new EnvironmentNgModuleRefAdapter({providers,parent,debugName,runEnvironmentInitializers:!0}).injector}__name(EnvironmentNgModuleRefAdapter,"EnvironmentNgModuleRefAdapter"),__name(createEnvironmentInjector,"createEnvironmentInjector");let StandaloneService=(()=>{class StandaloneService2{constructor(_injector){this._injector=_injector,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(componentDef){if(!componentDef.standalone)return null;if(!this.cachedInjectors.has(componentDef.id)){const providers=internalImportProvidersFrom(0,componentDef.type),standaloneInjector=providers.length>0?createEnvironmentInjector([providers],this._injector,`Standalone[${componentDef.type.name}]`):null;this.cachedInjectors.set(componentDef.id,standaloneInjector)}return this.cachedInjectors.get(componentDef.id)}ngOnDestroy(){try{for(const injector of this.cachedInjectors.values())null!==injector&&injector.destroy()}finally{this.cachedInjectors.clear()}}}return __name(StandaloneService2,"StandaloneService"),StandaloneService2.\u0275prov=\u0275\u0275defineInjectable({token:StandaloneService2,providedIn:"environment",factory:()=>new StandaloneService2(\u0275\u0275inject2(EnvironmentInjector2))}),StandaloneService2})();function \u0275\u0275StandaloneFeature(definition){definition.getStandaloneInjector=parentInjector=>parentInjector.get(StandaloneService).getOrCreateStandaloneInjector(definition)}function getComponent(element){const context=getLContext(element);if(null===context)return null;if(void 0===context.component){const lView=context.lView;if(null===lView)return null;context.component=getComponentAtNodeIndex(context.nodeIndex,lView)}return context.component}function getContext(element){assertDomElement(element);const context=getLContext(element),lView=context?context.lView:null;return null===lView?null:lView[CONTEXT]}function getOwningComponent(elementOrDir){const context=getLContext(elementOrDir);let parent,lView=context?context.lView:null;if(null===lView)return null;for(;2===lView[TVIEW].type&&(parent=getLViewParent(lView));)lView=parent;return 512&lView[FLAGS]?null:lView[CONTEXT]}function getRootComponents(elementOrDir){const lView=readPatchedLView(elementOrDir);return null!==lView?[getRootContext(lView)]:[]}function getInjector(elementOrDir){const context=getLContext(elementOrDir),lView=context?context.lView:null;return null===lView?Injector2.NULL:new NodeInjector(lView[TVIEW].data[context.nodeIndex],lView)}function getInjectionTokens(element){const context=getLContext(element),lView=context?context.lView:null;if(null===lView)return[];const tView=lView[TVIEW],tNode=tView.data[context.nodeIndex],providerTokens=[],endIndex=tNode.directiveEnd;for(let i=1048575&tNode.providerIndexes;i<endIndex;i++){let value=tView.data[i];isDirectiveDefHack(value)&&(value=value.type),providerTokens.push(value)}return providerTokens}function getDirectives(node){if(node instanceof Text)return[];const context=getLContext(node),lView=context?context.lView:null;if(null===lView)return[];const tView=lView[TVIEW],nodeIndex=context.nodeIndex;return tView?.data[nodeIndex]?(void 0===context.directives&&(context.directives=getDirectivesAtNodeIndex(nodeIndex,lView)),null===context.directives?[]:[...context.directives]):[]}function getDirectiveMetadata$1(directiveOrComponentInstance){const{constructor}=directiveOrComponentInstance;if(!constructor)throw new Error("Unable to find the instance constructor");const componentDef=getComponentDef(constructor);if(componentDef)return{inputs:componentDef.inputs,outputs:componentDef.outputs,encapsulation:componentDef.encapsulation,changeDetection:componentDef.onPush?ChangeDetectionStrategy.OnPush:ChangeDetectionStrategy.Default};const directiveDef=getDirectiveDef(constructor);return directiveDef?{inputs:directiveDef.inputs,outputs:directiveDef.outputs}:null}function getLocalRefs(target){const context=getLContext(target);if(null===context)return{};if(void 0===context.localRefs){const lView=context.lView;if(null===lView)return{};context.localRefs=discoverLocalRefs(lView,context.nodeIndex)}return context.localRefs||{}}function getHostElement(componentOrDirective){return getLContext(componentOrDirective).native}function getListeners(element){const lContext=getLContext(element),lView=null===lContext?null:lContext.lView;if(null===lView)return[];const lCleanup=lView[CLEANUP],tCleanup=lView[TVIEW].cleanup,listeners=[];if(tCleanup&&lCleanup)for(let i=0;i<tCleanup.length;){const firstParam=tCleanup[i++],secondParam=tCleanup[i++];if("string"==typeof firstParam){const name=firstParam,listenerElement=unwrapRNode(lView[secondParam]),callback=lCleanup[tCleanup[i++]],useCaptureOrIndx=tCleanup[i++];element==listenerElement&&listeners.push({element,name,callback,useCapture:"boolean"==typeof useCaptureOrIndx&&useCaptureOrIndx,type:"boolean"==typeof useCaptureOrIndx||useCaptureOrIndx>=0?"dom":"output"})}}return listeners.sort(sortListeners),listeners}function sortListeners(a,b){return a.name==b.name?0:a.name<b.name?-1:1}function isDirectiveDefHack(obj){return void 0!==obj.type&&void 0!==obj.declaredInputs&&void 0!==obj.findHostDirectiveDefs}function assertDomElement(value){if(typeof Element<"u"&&!(value instanceof Element))throw new Error("Expecting instance of DOM Element")}function setClassMetadata(type,decorators,ctorParameters,propDecorators){return noSideEffects(()=>{const clazz=type;null!==decorators&&(clazz.hasOwnProperty("decorators")&&void 0!==clazz.decorators?clazz.decorators.push(...decorators):clazz.decorators=decorators),null!==ctorParameters&&(clazz.ctorParameters=ctorParameters),null!==propDecorators&&(clazz.propDecorators=clazz.hasOwnProperty("propDecorators")&&void 0!==clazz.propDecorators?{...clazz.propDecorators,...propDecorators}:propDecorators)})}function \u0275\u0275pureFunction0(slotOffset,pureFn,thisArg){const bindingIndex=getBindingRoot()+slotOffset,lView=getLView();return lView[bindingIndex]===NO_CHANGE?updateBinding(lView,bindingIndex,thisArg?pureFn.call(thisArg):pureFn()):getBinding(lView,bindingIndex)}function \u0275\u0275pureFunction1(slotOffset,pureFn,exp,thisArg){return pureFunction1Internal(getLView(),getBindingRoot(),slotOffset,pureFn,exp,thisArg)}function \u0275\u0275pureFunction2(slotOffset,pureFn,exp1,exp2,thisArg){return pureFunction2Internal(getLView(),getBindingRoot(),slotOffset,pureFn,exp1,exp2,thisArg)}function \u0275\u0275pureFunction3(slotOffset,pureFn,exp1,exp2,exp3,thisArg){return pureFunction3Internal(getLView(),getBindingRoot(),slotOffset,pureFn,exp1,exp2,exp3,thisArg)}function \u0275\u0275pureFunction4(slotOffset,pureFn,exp1,exp2,exp3,exp4,thisArg){return pureFunction4Internal(getLView(),getBindingRoot(),slotOffset,pureFn,exp1,exp2,exp3,exp4,thisArg)}function \u0275\u0275pureFunction5(slotOffset,pureFn,exp1,exp2,exp3,exp4,exp5,thisArg){const bindingIndex=getBindingRoot()+slotOffset,lView=getLView(),different=bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4);return bindingUpdated(lView,bindingIndex+4,exp5)||different?updateBinding(lView,bindingIndex+5,thisArg?pureFn.call(thisArg,exp1,exp2,exp3,exp4,exp5):pureFn(exp1,exp2,exp3,exp4,exp5)):getBinding(lView,bindingIndex+5)}function \u0275\u0275pureFunction6(slotOffset,pureFn,exp1,exp2,exp3,exp4,exp5,exp6,thisArg){const bindingIndex=getBindingRoot()+slotOffset,lView=getLView(),different=bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4);return bindingUpdated2(lView,bindingIndex+4,exp5,exp6)||different?updateBinding(lView,bindingIndex+6,thisArg?pureFn.call(thisArg,exp1,exp2,exp3,exp4,exp5,exp6):pureFn(exp1,exp2,exp3,exp4,exp5,exp6)):getBinding(lView,bindingIndex+6)}function \u0275\u0275pureFunction7(slotOffset,pureFn,exp1,exp2,exp3,exp4,exp5,exp6,exp7,thisArg){const bindingIndex=getBindingRoot()+slotOffset,lView=getLView();let different=bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4);return bindingUpdated3(lView,bindingIndex+4,exp5,exp6,exp7)||different?updateBinding(lView,bindingIndex+7,thisArg?pureFn.call(thisArg,exp1,exp2,exp3,exp4,exp5,exp6,exp7):pureFn(exp1,exp2,exp3,exp4,exp5,exp6,exp7)):getBinding(lView,bindingIndex+7)}function \u0275\u0275pureFunction8(slotOffset,pureFn,exp1,exp2,exp3,exp4,exp5,exp6,exp7,exp8,thisArg){const bindingIndex=getBindingRoot()+slotOffset,lView=getLView(),different=bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4);return bindingUpdated4(lView,bindingIndex+4,exp5,exp6,exp7,exp8)||different?updateBinding(lView,bindingIndex+8,thisArg?pureFn.call(thisArg,exp1,exp2,exp3,exp4,exp5,exp6,exp7,exp8):pureFn(exp1,exp2,exp3,exp4,exp5,exp6,exp7,exp8)):getBinding(lView,bindingIndex+8)}function \u0275\u0275pureFunctionV(slotOffset,pureFn,exps,thisArg){return pureFunctionVInternal(getLView(),getBindingRoot(),slotOffset,pureFn,exps,thisArg)}function getPureFunctionReturnValue(lView,returnValueIndex){const lastReturnValue=lView[returnValueIndex];return lastReturnValue===NO_CHANGE?void 0:lastReturnValue}function pureFunction1Internal(lView,bindingRoot,slotOffset,pureFn,exp,thisArg){const bindingIndex=bindingRoot+slotOffset;return bindingUpdated(lView,bindingIndex,exp)?updateBinding(lView,bindingIndex+1,thisArg?pureFn.call(thisArg,exp):pureFn(exp)):getPureFunctionReturnValue(lView,bindingIndex+1)}function pureFunction2Internal(lView,bindingRoot,slotOffset,pureFn,exp1,exp2,thisArg){const bindingIndex=bindingRoot+slotOffset;return bindingUpdated2(lView,bindingIndex,exp1,exp2)?updateBinding(lView,bindingIndex+2,thisArg?pureFn.call(thisArg,exp1,exp2):pureFn(exp1,exp2)):getPureFunctionReturnValue(lView,bindingIndex+2)}function pureFunction3Internal(lView,bindingRoot,slotOffset,pureFn,exp1,exp2,exp3,thisArg){const bindingIndex=bindingRoot+slotOffset;return bindingUpdated3(lView,bindingIndex,exp1,exp2,exp3)?updateBinding(lView,bindingIndex+3,thisArg?pureFn.call(thisArg,exp1,exp2,exp3):pureFn(exp1,exp2,exp3)):getPureFunctionReturnValue(lView,bindingIndex+3)}function pureFunction4Internal(lView,bindingRoot,slotOffset,pureFn,exp1,exp2,exp3,exp4,thisArg){const bindingIndex=bindingRoot+slotOffset;return bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4)?updateBinding(lView,bindingIndex+4,thisArg?pureFn.call(thisArg,exp1,exp2,exp3,exp4):pureFn(exp1,exp2,exp3,exp4)):getPureFunctionReturnValue(lView,bindingIndex+4)}function pureFunctionVInternal(lView,bindingRoot,slotOffset,pureFn,exps,thisArg){let bindingIndex=bindingRoot+slotOffset,different=!1;for(let i=0;i<exps.length;i++)bindingUpdated(lView,bindingIndex++,exps[i])&&(different=!0);return different?updateBinding(lView,bindingIndex,pureFn.apply(thisArg,exps)):getPureFunctionReturnValue(lView,bindingIndex)}function \u0275\u0275pipe(index,pipeName){const tView=getTView();let pipeDef;const adjustedIndex=index+HEADER_OFFSET;tView.firstCreatePass?(pipeDef=getPipeDef(pipeName,tView.pipeRegistry),tView.data[adjustedIndex]=pipeDef,pipeDef.onDestroy&&(tView.destroyHooks??=[]).push(adjustedIndex,pipeDef.onDestroy)):pipeDef=tView.data[adjustedIndex];const pipeFactory=pipeDef.factory||(pipeDef.factory=getFactoryDef(pipeDef.type)),previousInjectImplementation=setInjectImplementation(\u0275\u0275directiveInject);try{const previousIncludeViewProviders=setIncludeViewProviders(!1),pipeInstance=pipeFactory();return setIncludeViewProviders(previousIncludeViewProviders),store(tView,getLView(),adjustedIndex,pipeInstance),pipeInstance}finally{setInjectImplementation(previousInjectImplementation)}}function getPipeDef(name,registry){if(registry)for(let i=registry.length-1;i>=0;i--){const pipeDef=registry[i];if(name===pipeDef.name)return pipeDef}}function \u0275\u0275pipeBind1(index,slotOffset,v1){const adjustedIndex=index+HEADER_OFFSET,lView=getLView(),pipeInstance=load(lView,adjustedIndex);return isPure(lView,adjustedIndex)?pureFunction1Internal(lView,getBindingRoot(),slotOffset,pipeInstance.transform,v1,pipeInstance):pipeInstance.transform(v1)}function \u0275\u0275pipeBind2(index,slotOffset,v1,v2){const adjustedIndex=index+HEADER_OFFSET,lView=getLView(),pipeInstance=load(lView,adjustedIndex);return isPure(lView,adjustedIndex)?pureFunction2Internal(lView,getBindingRoot(),slotOffset,pipeInstance.transform,v1,v2,pipeInstance):pipeInstance.transform(v1,v2)}function \u0275\u0275pipeBind3(index,slotOffset,v1,v2,v3){const adjustedIndex=index+HEADER_OFFSET,lView=getLView(),pipeInstance=load(lView,adjustedIndex);return isPure(lView,adjustedIndex)?pureFunction3Internal(lView,getBindingRoot(),slotOffset,pipeInstance.transform,v1,v2,v3,pipeInstance):pipeInstance.transform(v1,v2,v3)}function \u0275\u0275pipeBind4(index,slotOffset,v1,v2,v3,v4){const adjustedIndex=index+HEADER_OFFSET,lView=getLView(),pipeInstance=load(lView,adjustedIndex);return isPure(lView,adjustedIndex)?pureFunction4Internal(lView,getBindingRoot(),slotOffset,pipeInstance.transform,v1,v2,v3,v4,pipeInstance):pipeInstance.transform(v1,v2,v3,v4)}function \u0275\u0275pipeBindV(index,slotOffset,values){const adjustedIndex=index+HEADER_OFFSET,lView=getLView(),pipeInstance=load(lView,adjustedIndex);return isPure(lView,adjustedIndex)?pureFunctionVInternal(lView,getBindingRoot(),slotOffset,pipeInstance.transform,values,pipeInstance):pipeInstance.transform.apply(pipeInstance,values)}function isPure(lView,index){return lView[TVIEW].data[index].pure}__name(\u0275\u0275StandaloneFeature,"\u0275\u0275StandaloneFeature"),__name(getComponent,"getComponent"),__name(getContext,"getContext"),__name(getOwningComponent,"getOwningComponent"),__name(getRootComponents,"getRootComponents"),__name(getInjector,"getInjector"),__name(getInjectionTokens,"getInjectionTokens"),__name(getDirectives,"getDirectives"),__name(getDirectiveMetadata$1,"getDirectiveMetadata$1"),__name(getLocalRefs,"getLocalRefs"),__name(getHostElement,"getHostElement"),__name(function getRenderedText(component){return getHostElement(component).textContent||""},"getRenderedText"),__name(getListeners,"getListeners"),__name(sortListeners,"sortListeners"),__name(isDirectiveDefHack,"isDirectiveDefHack"),__name(function getComponentLView(target){const lContext=getLContext(target);return lContext.lView[lContext.nodeIndex]},"getComponentLView"),__name(assertDomElement,"assertDomElement"),__name(setClassMetadata,"setClassMetadata"),__name(\u0275\u0275pureFunction0,"\u0275\u0275pureFunction0"),__name(\u0275\u0275pureFunction1,"\u0275\u0275pureFunction1"),__name(\u0275\u0275pureFunction2,"\u0275\u0275pureFunction2"),__name(\u0275\u0275pureFunction3,"\u0275\u0275pureFunction3"),__name(\u0275\u0275pureFunction4,"\u0275\u0275pureFunction4"),__name(\u0275\u0275pureFunction5,"\u0275\u0275pureFunction5"),__name(\u0275\u0275pureFunction6,"\u0275\u0275pureFunction6"),__name(\u0275\u0275pureFunction7,"\u0275\u0275pureFunction7"),__name(\u0275\u0275pureFunction8,"\u0275\u0275pureFunction8"),__name(\u0275\u0275pureFunctionV,"\u0275\u0275pureFunctionV"),__name(getPureFunctionReturnValue,"getPureFunctionReturnValue"),__name(pureFunction1Internal,"pureFunction1Internal"),__name(pureFunction2Internal,"pureFunction2Internal"),__name(pureFunction3Internal,"pureFunction3Internal"),__name(pureFunction4Internal,"pureFunction4Internal"),__name(pureFunctionVInternal,"pureFunctionVInternal"),__name(\u0275\u0275pipe,"\u0275\u0275pipe"),__name(getPipeDef,"getPipeDef"),__name(function getPipeNotFoundErrorMessage(name){const lView=getLView(),context=lView[DECLARATION_COMPONENT_VIEW][CONTEXT],hostIsStandalone=isHostComponentStandalone(lView);return`The pipe '${name}' could not be found${context?` in the '${context.constructor.name}' component`:""}. ${"Verify that it is "+(hostIsStandalone?"included in the '@Component.imports' of this component":"declared or imported in this module")}`},"getPipeNotFoundErrorMessage"),__name(\u0275\u0275pipeBind1,"\u0275\u0275pipeBind1"),__name(\u0275\u0275pipeBind2,"\u0275\u0275pipeBind2"),__name(\u0275\u0275pipeBind3,"\u0275\u0275pipeBind3"),__name(\u0275\u0275pipeBind4,"\u0275\u0275pipeBind4"),__name(\u0275\u0275pipeBindV,"\u0275\u0275pipeBindV"),__name(isPure,"isPure");class EventEmitter_ extends rxjs__WEBPACK_IMPORTED_MODULE_0__.x{constructor(isAsync=!1){super(),this.__isAsync=isAsync}emit(value){super.next(value)}subscribe(observerOrNext,error,complete){let nextFn=observerOrNext,errorFn=error||(()=>null),completeFn=complete;if(observerOrNext&&"object"==typeof observerOrNext){const observer=observerOrNext;nextFn=observer.next?.bind(observer),errorFn=observer.error?.bind(observer),completeFn=observer.complete?.bind(observer)}this.__isAsync&&(errorFn=_wrapInTimeout(errorFn),nextFn&&(nextFn=_wrapInTimeout(nextFn)),completeFn&&(completeFn=_wrapInTimeout(completeFn)));const sink=super.subscribe({next:nextFn,error:errorFn,complete:completeFn});return observerOrNext instanceof rxjs__WEBPACK_IMPORTED_MODULE_1__.w0&&observerOrNext.add(sink),sink}}function _wrapInTimeout(fn){return value=>{setTimeout(fn,void 0,value)}}__name(EventEmitter_,"EventEmitter_"),__name(_wrapInTimeout,"_wrapInTimeout");const EventEmitter2=EventEmitter_;function symbolIterator(){return this._results[Symbol.iterator]()}__name(symbolIterator,"symbolIterator");class QueryList{get changes(){return this._changes||(this._changes=new EventEmitter2)}constructor(_emitDistinctChangesOnly=!1){this._emitDistinctChangesOnly=_emitDistinctChangesOnly,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const proto=QueryList.prototype;proto[Symbol.iterator]||(proto[Symbol.iterator]=symbolIterator)}get(index){return this._results[index]}map(fn){return this._results.map(fn)}filter(fn){return this._results.filter(fn)}find(fn){return this._results.find(fn)}reduce(fn,init){return this._results.reduce(fn,init)}forEach(fn){this._results.forEach(fn)}some(fn){return this._results.some(fn)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(resultsTree,identityAccessor){this.dirty=!1;const newResultFlat=flatten(resultsTree);(this._changesDetected=!arrayEquals(this._results,newResultFlat,identityAccessor))&&(this._results=newResultFlat,this.length=newResultFlat.length,this.last=newResultFlat[this.length-1],this.first=newResultFlat[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}__name(QueryList,"QueryList");let TemplateRef=(()=>{class TemplateRef2{}return __name(TemplateRef2,"TemplateRef"),TemplateRef2.__NG_ELEMENT_ID__=injectTemplateRef,TemplateRef2})();const ViewEngineTemplateRef=TemplateRef,R3TemplateRef=__name(class extends ViewEngineTemplateRef{constructor(_declarationLView,_declarationTContainer,elementRef){super(),this._declarationLView=_declarationLView,this._declarationTContainer=_declarationTContainer,this.elementRef=elementRef}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(context,injector){return this.createEmbeddedViewImpl(context,injector,null)}createEmbeddedViewImpl(context,injector,hydrationInfo){const embeddedTView=this._declarationTContainer.tView,embeddedLView=createLView(this._declarationLView,embeddedTView,context,16,null,embeddedTView.declTNode,null,null,null,injector||null,hydrationInfo||null);embeddedLView[DECLARATION_LCONTAINER]=this._declarationLView[this._declarationTContainer.index];const declarationViewLQueries=this._declarationLView[QUERIES];return null!==declarationViewLQueries&&(embeddedLView[QUERIES]=declarationViewLQueries.createEmbeddedView(embeddedTView)),renderView(embeddedTView,embeddedLView,context),new ViewRef$1(embeddedLView)}},"TemplateRef");function injectTemplateRef(){return createTemplateRef(getCurrentTNode(),getLView())}function createTemplateRef(hostTNode,hostLView){return 4&hostTNode.type?new R3TemplateRef(hostLView,hostTNode,createElementRef(hostTNode,hostLView)):null}function removeDehydratedViews(lContainer){const views=lContainer[DEHYDRATED_VIEWS]??[],renderer=lContainer[PARENT][RENDERER];for(const view of views)removeDehydratedView(view,renderer);lContainer[DEHYDRATED_VIEWS]=EMPTY_ARRAY}function removeDehydratedView(dehydratedView,renderer){let nodesRemoved=0,currentRNode=dehydratedView.firstChild;if(currentRNode){const numNodes=dehydratedView.data[NUM_ROOT_NODES];for(;nodesRemoved<numNodes;){const nextSibling=currentRNode.nextSibling;nativeRemoveNode(renderer,currentRNode,!1),currentRNode=nextSibling,nodesRemoved++}}}function cleanupLContainer(lContainer){removeDehydratedViews(lContainer);for(let i=CONTAINER_HEADER_OFFSET;i<lContainer.length;i++)cleanupLView(lContainer[i])}function cleanupLView(lView){const tView=lView[TVIEW];for(let i=HEADER_OFFSET;i<tView.bindingStartIndex;i++)isLContainer(lView[i])?cleanupLContainer(lView[i]):Array.isArray(lView[i])&&cleanupLView(lView[i])}function cleanupDehydratedViews(appRef){const viewRefs=appRef._views;for(const viewRef of viewRefs){const lView=getComponentLViewForHydration(viewRef);null!==lView&&null!==lView[HOST]&&cleanupLView(lView)}}function locateDehydratedViewsInContainer(currentRNode,serializedViews){const dehydratedViews=[];for(const serializedView of serializedViews)for(let i=0;i<(serializedView[MULTIPLIER]??1);i++){const view={data:serializedView,firstChild:null};serializedView[NUM_ROOT_NODES]>0&&(view.firstChild=currentRNode,currentRNode=siblingAfter(serializedView[NUM_ROOT_NODES],currentRNode)),dehydratedViews.push(view)}return[currentRNode,dehydratedViews]}__name(injectTemplateRef,"injectTemplateRef"),__name(createTemplateRef,"createTemplateRef"),__name(removeDehydratedViews,"removeDehydratedViews"),__name(removeDehydratedView,"removeDehydratedView"),__name(cleanupLContainer,"cleanupLContainer"),__name(cleanupLView,"cleanupLView"),__name(cleanupDehydratedViews,"cleanupDehydratedViews"),__name(locateDehydratedViewsInContainer,"locateDehydratedViewsInContainer");let _findMatchingDehydratedViewImpl=__name((lContainer,template)=>null,"_findMatchingDehydratedViewImpl");function findMatchingDehydratedViewImpl(lContainer,template){const views=lContainer[DEHYDRATED_VIEWS]??[];return template&&0!==views.length?views[0].data[TEMPLATE_ID]===template?views.shift():(removeDehydratedViews(lContainer),null):null}function enableFindMatchingDehydratedViewImpl(){_findMatchingDehydratedViewImpl=findMatchingDehydratedViewImpl}function findMatchingDehydratedView(lContainer,template){return _findMatchingDehydratedViewImpl(lContainer,template)}__name(findMatchingDehydratedViewImpl,"findMatchingDehydratedViewImpl"),__name(enableFindMatchingDehydratedViewImpl,"enableFindMatchingDehydratedViewImpl"),__name(findMatchingDehydratedView,"findMatchingDehydratedView");let ViewContainerRef=(()=>{class ViewContainerRef2{}return __name(ViewContainerRef2,"ViewContainerRef"),ViewContainerRef2.__NG_ELEMENT_ID__=injectViewContainerRef,ViewContainerRef2})();function injectViewContainerRef(){return createContainerRef(getCurrentTNode(),getLView())}__name(injectViewContainerRef,"injectViewContainerRef");const VE_ViewContainerRef=ViewContainerRef,R3ViewContainerRef=__name(class extends VE_ViewContainerRef{constructor(_lContainer,_hostTNode,_hostLView){super(),this._lContainer=_lContainer,this._hostTNode=_hostTNode,this._hostLView=_hostLView}get element(){return createElementRef(this._hostTNode,this._hostLView)}get injector(){return new NodeInjector(this._hostTNode,this._hostLView)}get parentInjector(){const parentLocation=getParentInjectorLocation(this._hostTNode,this._hostLView);if(hasParentInjector(parentLocation)){const parentView=getParentInjectorView(parentLocation,this._hostLView),injectorIndex=getParentInjectorIndex(parentLocation);return new NodeInjector(parentView[TVIEW].data[injectorIndex+8],parentView)}return new NodeInjector(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(index){const viewRefs=getViewRefs(this._lContainer);return null!==viewRefs&&viewRefs[index]||null}get length(){return this._lContainer.length-CONTAINER_HEADER_OFFSET}createEmbeddedView(templateRef,context,indexOrOptions){let index,injector;"number"==typeof indexOrOptions?index=indexOrOptions:null!=indexOrOptions&&(index=indexOrOptions.index,injector=indexOrOptions.injector);const hydrationInfo=findMatchingDehydratedView(this._lContainer,templateRef.ssrId),viewRef=templateRef.createEmbeddedViewImpl(context||{},injector,hydrationInfo),skipDomInsertion=!!hydrationInfo&&!hasInSkipHydrationBlockFlag(this._hostTNode);return this.insertImpl(viewRef,index,skipDomInsertion),viewRef}createComponent(componentFactoryOrType,indexOrOptions,injector,projectableNodes,environmentInjector){const isComponentFactory=componentFactoryOrType&&!isType(componentFactoryOrType);let index;if(isComponentFactory)index=indexOrOptions;else{const options=indexOrOptions||{};index=options.index,injector=options.injector,projectableNodes=options.projectableNodes,environmentInjector=options.environmentInjector||options.ngModuleRef}const componentFactory=isComponentFactory?componentFactoryOrType:new ComponentFactory(getComponentDef(componentFactoryOrType)),contextInjector=injector||this.parentInjector;if(!environmentInjector&&null==componentFactory.ngModule){const result=(isComponentFactory?contextInjector:this.parentInjector).get(EnvironmentInjector2,null);result&&(environmentInjector=result)}const componentDef=getComponentDef(componentFactory.componentType??{}),dehydratedView=findMatchingDehydratedView(this._lContainer,componentDef?.id??null),componentRef=componentFactory.create(contextInjector,projectableNodes,dehydratedView?.firstChild??null,environmentInjector),skipDomInsertion=!!dehydratedView&&!hasInSkipHydrationBlockFlag(this._hostTNode);return this.insertImpl(componentRef.hostView,index,skipDomInsertion),componentRef}insert(viewRef,index){return this.insertImpl(viewRef,index,!1)}insertImpl(viewRef,index,skipDomInsertion){const lView=viewRef._lView,tView=lView[TVIEW];if(viewAttachedToContainer(lView)){const prevIdx=this.indexOf(viewRef);if(-1!==prevIdx)this.detach(prevIdx);else{const prevLContainer=lView[PARENT],prevVCRef=new R3ViewContainerRef(prevLContainer,prevLContainer[T_HOST],prevLContainer[PARENT]);prevVCRef.detach(prevVCRef.indexOf(viewRef))}}const adjustedIdx=this._adjustIndex(index),lContainer=this._lContainer;if(insertView(tView,lView,lContainer,adjustedIdx),!skipDomInsertion){const beforeNode=getBeforeNodeForView(adjustedIdx,lContainer),renderer=lView[RENDERER],parentRNode=nativeParentNode(renderer,lContainer[NATIVE]);null!==parentRNode&&addViewToContainer(tView,lContainer[T_HOST],renderer,lView,parentRNode,beforeNode)}return viewRef.attachToViewContainerRef(),addToArray(getOrCreateViewRefs(lContainer),adjustedIdx,viewRef),viewRef}move(viewRef,newIndex){return this.insert(viewRef,newIndex)}indexOf(viewRef){const viewRefsArr=getViewRefs(this._lContainer);return null!==viewRefsArr?viewRefsArr.indexOf(viewRef):-1}remove(index){const adjustedIdx=this._adjustIndex(index,-1),detachedView=detachView(this._lContainer,adjustedIdx);detachedView&&(removeFromArray(getOrCreateViewRefs(this._lContainer),adjustedIdx),destroyLView(detachedView[TVIEW],detachedView))}detach(index){const adjustedIdx=this._adjustIndex(index,-1),view=detachView(this._lContainer,adjustedIdx);return view&&null!=removeFromArray(getOrCreateViewRefs(this._lContainer),adjustedIdx)?new ViewRef$1(view):null}_adjustIndex(index,shift=0){return index??this.length+shift}},"ViewContainerRef");function getViewRefs(lContainer){return lContainer[VIEW_REFS]}function getOrCreateViewRefs(lContainer){return lContainer[VIEW_REFS]||(lContainer[VIEW_REFS]=[])}function createContainerRef(hostTNode,hostLView){let lContainer;const slotValue=hostLView[hostTNode.index];return isLContainer(slotValue)?lContainer=slotValue:(lContainer=createLContainer(slotValue,hostLView,null,hostTNode),hostLView[hostTNode.index]=lContainer,addToViewTree(hostLView,lContainer)),_locateOrCreateAnchorNode(lContainer,hostLView,hostTNode,slotValue),new R3ViewContainerRef(lContainer,hostTNode,hostLView)}function insertAnchorNode(hostLView,hostTNode){const renderer=hostLView[RENDERER],commentNode=renderer.createComment(""),hostNative=getNativeByTNode(hostTNode,hostLView);return nativeInsertBefore(renderer,nativeParentNode(renderer,hostNative),commentNode,nativeNextSibling(renderer,hostNative),!1),commentNode}__name(getViewRefs,"getViewRefs"),__name(getOrCreateViewRefs,"getOrCreateViewRefs"),__name(createContainerRef,"createContainerRef"),__name(insertAnchorNode,"insertAnchorNode");let _locateOrCreateAnchorNode=createAnchorNode;function createAnchorNode(lContainer,hostLView,hostTNode,slotValue){if(lContainer[NATIVE])return;let commentNode;commentNode=8&hostTNode.type?unwrapRNode(slotValue):insertAnchorNode(hostLView,hostTNode),lContainer[NATIVE]=commentNode}function locateOrCreateAnchorNode(lContainer,hostLView,hostTNode,slotValue){if(lContainer[NATIVE]&&lContainer[DEHYDRATED_VIEWS])return;const hydrationInfo=hostLView[HYDRATION],noOffsetIndex=hostTNode.index-HEADER_OFFSET,skipHydration=isInSkipHydrationBlock(hostTNode)||hasInSkipHydrationBlockFlag(hostTNode);if(!hydrationInfo||skipHydration||isDisconnectedNode$1(hydrationInfo,noOffsetIndex))return createAnchorNode(lContainer,hostLView,hostTNode,slotValue);const currentRNode=getSegmentHead(hydrationInfo,noOffsetIndex),serializedViews=hydrationInfo.data[CONTAINERS]?.[noOffsetIndex],[commentNode,dehydratedViews]=locateDehydratedViewsInContainer(currentRNode,serializedViews);lContainer[NATIVE]=commentNode,lContainer[DEHYDRATED_VIEWS]=dehydratedViews}function enableLocateOrCreateContainerRefImpl(){_locateOrCreateAnchorNode=locateOrCreateAnchorNode}__name(createAnchorNode,"createAnchorNode"),__name(locateOrCreateAnchorNode,"locateOrCreateAnchorNode"),__name(enableLocateOrCreateContainerRefImpl,"enableLocateOrCreateContainerRefImpl");class LQuery_{constructor(queryList){this.queryList=queryList,this.matches=null}clone(){return new LQuery_(this.queryList)}setDirty(){this.queryList.setDirty()}}__name(LQuery_,"LQuery_");class LQueries_{constructor(queries=[]){this.queries=queries}createEmbeddedView(tView){const tQueries=tView.queries;if(null!==tQueries){const noOfInheritedQueries=null!==tView.contentQueries?tView.contentQueries[0]:tQueries.length,viewLQueries=[];for(let i=0;i<noOfInheritedQueries;i++){const tQuery=tQueries.getByIndex(i);viewLQueries.push(this.queries[tQuery.indexInDeclarationView].clone())}return new LQueries_(viewLQueries)}return null}insertView(tView){this.dirtyQueriesWithMatches(tView)}detachView(tView){this.dirtyQueriesWithMatches(tView)}dirtyQueriesWithMatches(tView){for(let i=0;i<this.queries.length;i++)null!==getTQuery(tView,i).matches&&this.queries[i].setDirty()}}__name(LQueries_,"LQueries_");class TQueryMetadata_{constructor(predicate,flags,read=null){this.predicate=predicate,this.flags=flags,this.read=read}}__name(TQueryMetadata_,"TQueryMetadata_");class TQueries_{constructor(queries=[]){this.queries=queries}elementStart(tView,tNode){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(tView,tNode)}elementEnd(tNode){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(tNode)}embeddedTView(tNode){let queriesForTemplateRef=null;for(let i=0;i<this.length;i++){const childQueryIndex=null!==queriesForTemplateRef?queriesForTemplateRef.length:0,tqueryClone=this.getByIndex(i).embeddedTView(tNode,childQueryIndex);tqueryClone&&(tqueryClone.indexInDeclarationView=i,null!==queriesForTemplateRef?queriesForTemplateRef.push(tqueryClone):queriesForTemplateRef=[tqueryClone])}return null!==queriesForTemplateRef?new TQueries_(queriesForTemplateRef):null}template(tView,tNode){for(let i=0;i<this.queries.length;i++)this.queries[i].template(tView,tNode)}getByIndex(index){return this.queries[index]}get length(){return this.queries.length}track(tquery){this.queries.push(tquery)}}__name(TQueries_,"TQueries_");class TQuery_{constructor(metadata,nodeIndex=-1){this.metadata=metadata,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=nodeIndex}elementStart(tView,tNode){this.isApplyingToNode(tNode)&&this.matchTNode(tView,tNode)}elementEnd(tNode){this._declarationNodeIndex===tNode.index&&(this._appliesToNextNode=!1)}template(tView,tNode){this.elementStart(tView,tNode)}embeddedTView(tNode,childQueryIndex){return this.isApplyingToNode(tNode)?(this.crossesNgTemplate=!0,this.addMatch(-tNode.index,childQueryIndex),new TQuery_(this.metadata)):null}isApplyingToNode(tNode){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const declarationNodeIdx=this._declarationNodeIndex;let parent=tNode.parent;for(;null!==parent&&8&parent.type&&parent.index!==declarationNodeIdx;)parent=parent.parent;return declarationNodeIdx===(null!==parent?parent.index:-1)}return this._appliesToNextNode}matchTNode(tView,tNode){const predicate=this.metadata.predicate;if(Array.isArray(predicate))for(let i=0;i<predicate.length;i++){const name=predicate[i];this.matchTNodeWithReadOption(tView,tNode,getIdxOfMatchingSelector(tNode,name)),this.matchTNodeWithReadOption(tView,tNode,locateDirectiveOrProvider(tNode,tView,name,!1,!1))}else predicate===TemplateRef?4&tNode.type&&this.matchTNodeWithReadOption(tView,tNode,-1):this.matchTNodeWithReadOption(tView,tNode,locateDirectiveOrProvider(tNode,tView,predicate,!1,!1))}matchTNodeWithReadOption(tView,tNode,nodeMatchIdx){if(null!==nodeMatchIdx){const read=this.metadata.read;if(null!==read)if(read===ElementRef2||read===ViewContainerRef||read===TemplateRef&&4&tNode.type)this.addMatch(tNode.index,-2);else{const directiveOrProviderIdx=locateDirectiveOrProvider(tNode,tView,read,!1,!1);null!==directiveOrProviderIdx&&this.addMatch(tNode.index,directiveOrProviderIdx)}else this.addMatch(tNode.index,nodeMatchIdx)}}addMatch(tNodeIdx,matchIdx){null===this.matches?this.matches=[tNodeIdx,matchIdx]:this.matches.push(tNodeIdx,matchIdx)}}function getIdxOfMatchingSelector(tNode,selector){const localNames=tNode.localNames;if(null!==localNames)for(let i=0;i<localNames.length;i+=2)if(localNames[i]===selector)return localNames[i+1];return null}function createResultByTNodeType(tNode,currentView){return 11&tNode.type?createElementRef(tNode,currentView):4&tNode.type?createTemplateRef(tNode,currentView):null}function createResultForNode(lView,tNode,matchingIdx,read){return-1===matchingIdx?createResultByTNodeType(tNode,lView):-2===matchingIdx?createSpecialToken(lView,tNode,read):getNodeInjectable(lView,lView[TVIEW],matchingIdx,tNode)}function createSpecialToken(lView,tNode,read){return read===ElementRef2?createElementRef(tNode,lView):read===TemplateRef?createTemplateRef(tNode,lView):read===ViewContainerRef?createContainerRef(tNode,lView):void 0}function materializeViewResults(tView,lView,tQuery,queryIndex){const lQuery=lView[QUERIES].queries[queryIndex];if(null===lQuery.matches){const tViewData=tView.data,tQueryMatches=tQuery.matches,result=[];for(let i=0;i<tQueryMatches.length;i+=2){const matchedNodeIdx=tQueryMatches[i];result.push(matchedNodeIdx<0?null:createResultForNode(lView,tViewData[matchedNodeIdx],tQueryMatches[i+1],tQuery.metadata.read))}lQuery.matches=result}return lQuery.matches}function collectQueryResults(tView,lView,queryIndex,result){const tQuery=tView.queries.getByIndex(queryIndex),tQueryMatches=tQuery.matches;if(null!==tQueryMatches){const lViewResults=materializeViewResults(tView,lView,tQuery,queryIndex);for(let i=0;i<tQueryMatches.length;i+=2){const tNodeIdx=tQueryMatches[i];if(tNodeIdx>0)result.push(lViewResults[i/2]);else{const childQueryIndex=tQueryMatches[i+1],declarationLContainer=lView[-tNodeIdx];for(let i2=CONTAINER_HEADER_OFFSET;i2<declarationLContainer.length;i2++){const embeddedLView=declarationLContainer[i2];embeddedLView[DECLARATION_LCONTAINER]===embeddedLView[PARENT]&&collectQueryResults(embeddedLView[TVIEW],embeddedLView,childQueryIndex,result)}if(null!==declarationLContainer[MOVED_VIEWS]){const embeddedLViews=declarationLContainer[MOVED_VIEWS];for(let i2=0;i2<embeddedLViews.length;i2++){const embeddedLView=embeddedLViews[i2];collectQueryResults(embeddedLView[TVIEW],embeddedLView,childQueryIndex,result)}}}}}return result}function \u0275\u0275queryRefresh(queryList){const lView=getLView(),tView=getTView(),queryIndex=getCurrentQueryIndex();setCurrentQueryIndex(queryIndex+1);const tQuery=getTQuery(tView,queryIndex);if(queryList.dirty&&isCreationMode(lView)===(2==(2&tQuery.metadata.flags))){if(null===tQuery.matches)queryList.reset([]);else{const result=tQuery.crossesNgTemplate?collectQueryResults(tView,lView,queryIndex,[]):materializeViewResults(tView,lView,tQuery,queryIndex);queryList.reset(result,unwrapElementRef),queryList.notifyOnChanges()}return!0}return!1}function \u0275\u0275viewQuery(predicate,flags,read){const tView=getTView();tView.firstCreatePass&&(createTQuery(tView,new TQueryMetadata_(predicate,flags,read),-1),2==(2&flags)&&(tView.staticViewQueries=!0)),createLQuery(tView,getLView(),flags)}function \u0275\u0275contentQuery(directiveIndex,predicate,flags,read){const tView=getTView();if(tView.firstCreatePass){const tNode=getCurrentTNode();createTQuery(tView,new TQueryMetadata_(predicate,flags,read),tNode.index),saveContentQueryAndDirectiveIndex(tView,directiveIndex),2==(2&flags)&&(tView.staticContentQueries=!0)}createLQuery(tView,getLView(),flags)}function \u0275\u0275loadQuery(){return loadQueryInternal(getLView(),getCurrentQueryIndex())}function loadQueryInternal(lView,queryIndex){return lView[QUERIES].queries[queryIndex].queryList}function createLQuery(tView,lView,flags){const queryList=new QueryList(4==(4&flags));storeCleanupWithContext(tView,lView,queryList,queryList.destroy),null===lView[QUERIES]&&(lView[QUERIES]=new LQueries_),lView[QUERIES].queries.push(new LQuery_(queryList))}function createTQuery(tView,metadata,nodeIndex){null===tView.queries&&(tView.queries=new TQueries_),tView.queries.track(new TQuery_(metadata,nodeIndex))}function saveContentQueryAndDirectiveIndex(tView,directiveIndex){const tViewContentQueries=tView.contentQueries||(tView.contentQueries=[]);directiveIndex!==(tViewContentQueries.length?tViewContentQueries[tViewContentQueries.length-1]:-1)&&tViewContentQueries.push(tView.queries.length-1,directiveIndex)}function getTQuery(tView,index){return tView.queries.getByIndex(index)}function \u0275\u0275templateRefExtractor(tNode,lView){return createTemplateRef(tNode,lView)}__name(TQuery_,"TQuery_"),__name(getIdxOfMatchingSelector,"getIdxOfMatchingSelector"),__name(createResultByTNodeType,"createResultByTNodeType"),__name(createResultForNode,"createResultForNode"),__name(createSpecialToken,"createSpecialToken"),__name(materializeViewResults,"materializeViewResults"),__name(collectQueryResults,"collectQueryResults"),__name(\u0275\u0275queryRefresh,"\u0275\u0275queryRefresh"),__name(\u0275\u0275viewQuery,"\u0275\u0275viewQuery"),__name(\u0275\u0275contentQuery,"\u0275\u0275contentQuery"),__name(\u0275\u0275loadQuery,"\u0275\u0275loadQuery"),__name(loadQueryInternal,"loadQueryInternal"),__name(createLQuery,"createLQuery"),__name(createTQuery,"createTQuery"),__name(saveContentQueryAndDirectiveIndex,"saveContentQueryAndDirectiveIndex"),__name(getTQuery,"getTQuery"),__name(\u0275\u0275templateRefExtractor,"\u0275\u0275templateRefExtractor");const angularCoreEnv=(()=>({\u0275\u0275attribute,\u0275\u0275attributeInterpolate1,\u0275\u0275attributeInterpolate2,\u0275\u0275attributeInterpolate3,\u0275\u0275attributeInterpolate4,\u0275\u0275attributeInterpolate5,\u0275\u0275attributeInterpolate6,\u0275\u0275attributeInterpolate7,\u0275\u0275attributeInterpolate8,\u0275\u0275attributeInterpolateV,\u0275\u0275defineComponent,\u0275\u0275defineDirective,\u0275\u0275defineInjectable,\u0275\u0275defineInjector,\u0275\u0275defineNgModule,\u0275\u0275definePipe,\u0275\u0275directiveInject,\u0275\u0275getInheritedFactory,\u0275\u0275inject:\u0275\u0275inject2,\u0275\u0275injectAttribute,\u0275\u0275invalidFactory,\u0275\u0275invalidFactoryDep,\u0275\u0275templateRefExtractor,\u0275\u0275resetView,\u0275\u0275HostDirectivesFeature,\u0275\u0275NgOnChangesFeature,\u0275\u0275ProvidersFeature,\u0275\u0275CopyDefinitionFeature,\u0275\u0275InheritDefinitionFeature,\u0275\u0275StandaloneFeature,\u0275\u0275nextContext,\u0275\u0275namespaceHTML,\u0275\u0275namespaceMathML,\u0275\u0275namespaceSVG,\u0275\u0275enableBindings,\u0275\u0275disableBindings,\u0275\u0275elementStart,\u0275\u0275elementEnd,\u0275\u0275element,\u0275\u0275elementContainerStart,\u0275\u0275elementContainerEnd,\u0275\u0275elementContainer,\u0275\u0275pureFunction0,\u0275\u0275pureFunction1,\u0275\u0275pureFunction2,\u0275\u0275pureFunction3,\u0275\u0275pureFunction4,\u0275\u0275pureFunction5,\u0275\u0275pureFunction6,\u0275\u0275pureFunction7,\u0275\u0275pureFunction8,\u0275\u0275pureFunctionV,\u0275\u0275getCurrentView,\u0275\u0275restoreView,\u0275\u0275listener,\u0275\u0275projection,\u0275\u0275syntheticHostProperty,\u0275\u0275syntheticHostListener,\u0275\u0275pipeBind1,\u0275\u0275pipeBind2,\u0275\u0275pipeBind3,\u0275\u0275pipeBind4,\u0275\u0275pipeBindV,\u0275\u0275projectionDef,\u0275\u0275hostProperty,\u0275\u0275property,\u0275\u0275propertyInterpolate,\u0275\u0275propertyInterpolate1,\u0275\u0275propertyInterpolate2,\u0275\u0275propertyInterpolate3,\u0275\u0275propertyInterpolate4,\u0275\u0275propertyInterpolate5,\u0275\u0275propertyInterpolate6,\u0275\u0275propertyInterpolate7,\u0275\u0275propertyInterpolate8,\u0275\u0275propertyInterpolateV,\u0275\u0275pipe,\u0275\u0275queryRefresh,\u0275\u0275viewQuery,\u0275\u0275loadQuery,\u0275\u0275contentQuery,\u0275\u0275reference,\u0275\u0275classMap,\u0275\u0275classMapInterpolate1,\u0275\u0275classMapInterpolate2,\u0275\u0275classMapInterpolate3,\u0275\u0275classMapInterpolate4,\u0275\u0275classMapInterpolate5,\u0275\u0275classMapInterpolate6,\u0275\u0275classMapInterpolate7,\u0275\u0275classMapInterpolate8,\u0275\u0275classMapInterpolateV,\u0275\u0275styleMap,\u0275\u0275styleMapInterpolate1,\u0275\u0275styleMapInterpolate2,\u0275\u0275styleMapInterpolate3,\u0275\u0275styleMapInterpolate4,\u0275\u0275styleMapInterpolate5,\u0275\u0275styleMapInterpolate6,\u0275\u0275styleMapInterpolate7,\u0275\u0275styleMapInterpolate8,\u0275\u0275styleMapInterpolateV,\u0275\u0275styleProp,\u0275\u0275stylePropInterpolate1,\u0275\u0275stylePropInterpolate2,\u0275\u0275stylePropInterpolate3,\u0275\u0275stylePropInterpolate4,\u0275\u0275stylePropInterpolate5,\u0275\u0275stylePropInterpolate6,\u0275\u0275stylePropInterpolate7,\u0275\u0275stylePropInterpolate8,\u0275\u0275stylePropInterpolateV,\u0275\u0275classProp,\u0275\u0275advance,\u0275\u0275template,\u0275\u0275text,\u0275\u0275textInterpolate,\u0275\u0275textInterpolate1,\u0275\u0275textInterpolate2,\u0275\u0275textInterpolate3,\u0275\u0275textInterpolate4,\u0275\u0275textInterpolate5,\u0275\u0275textInterpolate6,\u0275\u0275textInterpolate7,\u0275\u0275textInterpolate8,\u0275\u0275textInterpolateV,\u0275\u0275i18n,\u0275\u0275i18nAttributes,\u0275\u0275i18nExp,\u0275\u0275i18nStart,\u0275\u0275i18nEnd,\u0275\u0275i18nApply,\u0275\u0275i18nPostprocess,\u0275\u0275resolveWindow,\u0275\u0275resolveDocument,\u0275\u0275resolveBody,\u0275\u0275setComponentScope,\u0275\u0275setNgModuleScope,\u0275\u0275registerNgModuleType:registerNgModuleType,\u0275\u0275sanitizeHtml,\u0275\u0275sanitizeStyle,\u0275\u0275sanitizeResourceUrl,\u0275\u0275sanitizeScript,\u0275\u0275sanitizeUrl,\u0275\u0275sanitizeUrlOrResourceUrl,\u0275\u0275trustConstantHtml,\u0275\u0275trustConstantResourceUrl,\u0275\u0275validateIframeAttribute,forwardRef,resolveForwardRef}))();let jitOptions=null;function getJitOptions(){return jitOptions}function isModuleWithProviders(value){return void 0!==value.ngModule}function isNgModule(value){return!!getNgModuleDef(value)}__name(function setJitOptions(options){null!==jitOptions&&(options.defaultEncapsulation!==jitOptions.defaultEncapsulation||options.preserveWhitespaces!==jitOptions.preserveWhitespaces)||(jitOptions=options)},"setJitOptions"),__name(getJitOptions,"getJitOptions"),__name(function resetJitOptions(){jitOptions=null},"resetJitOptions"),__name(function patchModuleCompilation(){},"patchModuleCompilation"),__name(isModuleWithProviders,"isModuleWithProviders"),__name(isNgModule,"isNgModule");const moduleQueue=[];function enqueueModuleForDelayedScoping(moduleType,ngModule){moduleQueue.push({moduleType,ngModule})}__name(enqueueModuleForDelayedScoping,"enqueueModuleForDelayedScoping");let flushingModuleQueue=!1;function flushModuleScopingQueueAsMuchAsPossible(){if(!flushingModuleQueue){flushingModuleQueue=!0;try{for(let i=moduleQueue.length-1;i>=0;i--){const{moduleType,ngModule}=moduleQueue[i];ngModule.declarations&&ngModule.declarations.every(isResolvedDeclaration)&&(moduleQueue.splice(i,1),setScopeOnDeclaredComponents(moduleType,ngModule))}}finally{flushingModuleQueue=!1}}}function isResolvedDeclaration(declaration){return Array.isArray(declaration)?declaration.every(isResolvedDeclaration):!!resolveForwardRef(declaration)}function compileNgModuleDefs(moduleType,ngModule,allowDuplicateDeclarationsInRoot=!1){const declarations=flatten(ngModule.declarations||EMPTY_ARRAY);let ngModuleDef=null;Object.defineProperty(moduleType,NG_MOD_DEF,{configurable:!0,get:()=>(null===ngModuleDef&&(ngModuleDef=getCompilerFacade().compileNgModule(angularCoreEnv,`ng:///${moduleType.name}/\u0275mod.js`,{type:moduleType,bootstrap:flatten(ngModule.bootstrap||EMPTY_ARRAY).map(resolveForwardRef),declarations:declarations.map(resolveForwardRef),imports:flatten(ngModule.imports||EMPTY_ARRAY).map(resolveForwardRef).map(expandModuleWithProviders),exports:flatten(ngModule.exports||EMPTY_ARRAY).map(resolveForwardRef).map(expandModuleWithProviders),schemas:ngModule.schemas?flatten(ngModule.schemas):null,id:ngModule.id||null}),ngModuleDef.schemas||(ngModuleDef.schemas=[])),ngModuleDef)});let ngFactoryDef=null;Object.defineProperty(moduleType,NG_FACTORY_DEF,{get:()=>{if(null===ngFactoryDef){const compiler=getCompilerFacade();ngFactoryDef=compiler.compileFactory(angularCoreEnv,`ng:///${moduleType.name}/\u0275fac.js`,{name:moduleType.name,type:moduleType,deps:reflectDependencies(moduleType),target:compiler.FactoryTarget.NgModule,typeArgumentCount:0})}return ngFactoryDef},configurable:!1});let ngInjectorDef=null;Object.defineProperty(moduleType,NG_INJ_DEF,{get:()=>{if(null===ngInjectorDef){const meta={name:moduleType.name,type:moduleType,providers:ngModule.providers||EMPTY_ARRAY,imports:[(ngModule.imports||EMPTY_ARRAY).map(resolveForwardRef),(ngModule.exports||EMPTY_ARRAY).map(resolveForwardRef)]};ngInjectorDef=getCompilerFacade().compileInjector(angularCoreEnv,`ng:///${moduleType.name}/\u0275inj.js`,meta)}return ngInjectorDef},configurable:!1})}function generateStandaloneInDeclarationsError(type,location2){return`Unexpected "${stringifyForError(type)}" found in the "declarations" array of the ${location2}, "${stringifyForError(type)}" is marked as standalone and can't be declared in any NgModule - did you intend to import it instead (by adding it to the "imports" array)?`}function verifySemanticsOfNgModuleDef(moduleType,allowDuplicateDeclarationsInRoot,importingModule){if(verifiedNgModule.get(moduleType)||isStandalone(moduleType))return;let ngModuleDef;if(verifiedNgModule.set(moduleType,!0),moduleType=resolveForwardRef(moduleType),importingModule){if(ngModuleDef=getNgModuleDef(moduleType),!ngModuleDef)throw new Error(`Unexpected value '${moduleType.name}' imported by the module '${importingModule.name}'. Please add an @NgModule annotation.`)}else ngModuleDef=getNgModuleDef(moduleType,!0);const errors=[],declarations=maybeUnwrapFn(ngModuleDef.declarations),imports=maybeUnwrapFn(ngModuleDef.imports);flatten(imports).map(unwrapModuleWithProvidersImports).forEach(modOrStandaloneCmpt=>{verifySemanticsOfNgModuleImport(modOrStandaloneCmpt,moduleType),verifySemanticsOfNgModuleDef(modOrStandaloneCmpt,!1,moduleType)});const exports=maybeUnwrapFn(ngModuleDef.exports);declarations.forEach(verifyDeclarationsHaveDefinitions),declarations.forEach(verifyDirectivesHaveSelector),declarations.forEach(declarationType=>verifyNotStandalone(declarationType,moduleType));const combinedDeclarations=[...declarations.map(resolveForwardRef),...flatten(imports.map(computeCombinedExports)).map(resolveForwardRef)];exports.forEach(verifyExportsAreDeclaredOrReExported),declarations.forEach(decl=>verifyDeclarationIsUnique(decl,allowDuplicateDeclarationsInRoot));const ngModule=getAnnotation(moduleType,"NgModule");if(ngModule&&(ngModule.imports&&flatten(ngModule.imports).map(unwrapModuleWithProvidersImports).forEach(mod=>{verifySemanticsOfNgModuleImport(mod,moduleType),verifySemanticsOfNgModuleDef(mod,!1,moduleType)}),ngModule.bootstrap&&deepForEach(ngModule.bootstrap,verifyCorrectBootstrapType),ngModule.bootstrap&&deepForEach(ngModule.bootstrap,verifyComponentIsPartOfNgModule)),errors.length)throw new Error(errors.join("\n"));function verifyDeclarationsHaveDefinitions(type){getComponentDef(type=resolveForwardRef(type))||getDirectiveDef(type)||getPipeDef$1(type)||errors.push(`Unexpected value '${stringifyForError(type)}' declared by the module '${stringifyForError(moduleType)}'. Please add a @Pipe/@Directive/@Component annotation.`)}function verifyDirectivesHaveSelector(type){const def=getDirectiveDef(type=resolveForwardRef(type));!getComponentDef(type)&&def&&0==def.selectors.length&&errors.push(`Directive ${stringifyForError(type)} has no selector, please add it!`)}function verifyNotStandalone(type,moduleType2){if(type=resolveForwardRef(type),(getComponentDef(type)||getDirectiveDef(type)||getPipeDef$1(type))?.standalone){const location2=`"${stringifyForError(moduleType2)}" NgModule`;errors.push(generateStandaloneInDeclarationsError(type,location2))}}function verifyExportsAreDeclaredOrReExported(type){const kind=(getComponentDef(type=resolveForwardRef(type))?"component":getDirectiveDef(type)&&"directive")||getPipeDef$1(type)&&"pipe";kind&&-1===combinedDeclarations.lastIndexOf(type)&&errors.push(`Can't export ${kind} ${stringifyForError(type)} from ${stringifyForError(moduleType)} as it was neither declared nor imported!`)}function verifyDeclarationIsUnique(type,suppressErrors){type=resolveForwardRef(type);const existingModule=ownerNgModule.get(type);if(existingModule&&existingModule!==moduleType){if(!suppressErrors){const modules2=[existingModule,moduleType].map(stringifyForError).sort();errors.push(`Type ${stringifyForError(type)} is part of the declarations of 2 modules: ${modules2[0]} and ${modules2[1]}! Please consider moving ${stringifyForError(type)} to a higher module that imports ${modules2[0]} and ${modules2[1]}. You can also create a new NgModule that exports and includes ${stringifyForError(type)} then import that NgModule in ${modules2[0]} and ${modules2[1]}.`)}}else ownerNgModule.set(type,moduleType)}function verifyComponentIsPartOfNgModule(type){type=resolveForwardRef(type),!ownerNgModule.get(type)&&!isStandalone(type)&&errors.push(`Component ${stringifyForError(type)} is not part of any NgModule or the module has not been imported into your module.`)}function verifyCorrectBootstrapType(type){getComponentDef(type=resolveForwardRef(type))||errors.push(`${stringifyForError(type)} cannot be used as an entry component.`),isStandalone(type)&&errors.push(`The \`${stringifyForError(type)}\` class is a standalone component, which can not be used in the \`@NgModule.bootstrap\` array. Use the \`bootstrapApplication\` function for bootstrap instead.`)}function verifySemanticsOfNgModuleImport(type,importingModule2){const directiveDef=getComponentDef(type=resolveForwardRef(type))||getDirectiveDef(type);if(null!==directiveDef&&!directiveDef.standalone)throw new Error(`Unexpected directive '${type.name}' imported by the module '${importingModule2.name}'. Please add an @NgModule annotation.`);const pipeDef=getPipeDef$1(type);if(null!==pipeDef&&!pipeDef.standalone)throw new Error(`Unexpected pipe '${type.name}' imported by the module '${importingModule2.name}'. Please add an @NgModule annotation.`)}__name(verifyDeclarationsHaveDefinitions,"verifyDeclarationsHaveDefinitions"),__name(verifyDirectivesHaveSelector,"verifyDirectivesHaveSelector"),__name(verifyNotStandalone,"verifyNotStandalone"),__name(verifyExportsAreDeclaredOrReExported,"verifyExportsAreDeclaredOrReExported"),__name(verifyDeclarationIsUnique,"verifyDeclarationIsUnique"),__name(verifyComponentIsPartOfNgModule,"verifyComponentIsPartOfNgModule"),__name(verifyCorrectBootstrapType,"verifyCorrectBootstrapType"),__name(verifySemanticsOfNgModuleImport,"verifySemanticsOfNgModuleImport")}function unwrapModuleWithProvidersImports(typeOrWithProviders){return(typeOrWithProviders=resolveForwardRef(typeOrWithProviders)).ngModule||typeOrWithProviders}function getAnnotation(type,name){let annotation=null;return collect(type.__annotations__),collect(type.decorators),annotation;function collect(annotations){annotations&&annotations.forEach(readAnnotation)}function readAnnotation(decorator){annotation||(Object.getPrototypeOf(decorator).ngMetadataName==name?annotation=decorator:decorator.type&&Object.getPrototypeOf(decorator.type).ngMetadataName==name&&(annotation=decorator.args[0]))}}__name(flushModuleScopingQueueAsMuchAsPossible,"flushModuleScopingQueueAsMuchAsPossible"),__name(isResolvedDeclaration,"isResolvedDeclaration"),__name(function compileNgModule(moduleType,ngModule={}){compileNgModuleDefs(moduleType,ngModule),void 0!==ngModule.id&&registerNgModuleType(moduleType,ngModule.id),enqueueModuleForDelayedScoping(moduleType,ngModule)},"compileNgModule"),__name(compileNgModuleDefs,"compileNgModuleDefs"),__name(generateStandaloneInDeclarationsError,"generateStandaloneInDeclarationsError"),__name(verifySemanticsOfNgModuleDef,"verifySemanticsOfNgModuleDef"),__name(unwrapModuleWithProvidersImports,"unwrapModuleWithProvidersImports"),__name(getAnnotation,"getAnnotation");let ownerNgModule=new WeakMap,verifiedNgModule=new WeakMap;function computeCombinedExports(type){const ngModuleDef=getNgModuleDef(type=resolveForwardRef(type));return null===ngModuleDef?[type]:flatten(maybeUnwrapFn(ngModuleDef.exports).map(type2=>getNgModuleDef(type2)?(verifySemanticsOfNgModuleDef(type2,!1),computeCombinedExports(type2)):type2))}function setScopeOnDeclaredComponents(moduleType,ngModule){const declarations=flatten(ngModule.declarations||EMPTY_ARRAY),transitiveScopes=transitiveScopesFor(moduleType);declarations.forEach(declaration=>{(declaration=resolveForwardRef(declaration)).hasOwnProperty(NG_COMP_DEF)?patchComponentDefWithScope(getComponentDef(declaration),transitiveScopes):!declaration.hasOwnProperty(NG_DIR_DEF)&&!declaration.hasOwnProperty(NG_PIPE_DEF)&&(declaration.ngSelectorScope=moduleType)})}function patchComponentDefWithScope(componentDef,transitiveScopes){componentDef.directiveDefs=()=>Array.from(transitiveScopes.compilation.directives).map(dir=>dir.hasOwnProperty(NG_COMP_DEF)?getComponentDef(dir):getDirectiveDef(dir)).filter(def=>!!def),componentDef.pipeDefs=()=>Array.from(transitiveScopes.compilation.pipes).map(pipe=>getPipeDef$1(pipe)),componentDef.schemas=transitiveScopes.schemas,componentDef.tView=null}function transitiveScopesFor(type){if(isNgModule(type))return transitiveScopesForNgModule(type);if(isStandalone(type)){if(null!==(getComponentDef(type)||getDirectiveDef(type)))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set([type]),pipes:new Set}};if(null!==getPipeDef$1(type))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set([type])}}}throw new Error(`${type.name} does not have a module def (\u0275mod property)`)}function transitiveScopesForNgModule(moduleType){const def=getNgModuleDef(moduleType,!0);if(null!==def.transitiveCompileScopes)return def.transitiveCompileScopes;const scopes={schemas:def.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return maybeUnwrapFn(def.imports).forEach(imported=>{const importedScope=transitiveScopesFor(imported);importedScope.exported.directives.forEach(entry=>scopes.compilation.directives.add(entry)),importedScope.exported.pipes.forEach(entry=>scopes.compilation.pipes.add(entry))}),maybeUnwrapFn(def.declarations).forEach(declared=>{getPipeDef$1(declared)?scopes.compilation.pipes.add(declared):scopes.compilation.directives.add(declared)}),maybeUnwrapFn(def.exports).forEach(exported=>{const exportedType=exported;if(isNgModule(exportedType)){const exportedScope=transitiveScopesFor(exportedType);exportedScope.exported.directives.forEach(entry=>{scopes.compilation.directives.add(entry),scopes.exported.directives.add(entry)}),exportedScope.exported.pipes.forEach(entry=>{scopes.compilation.pipes.add(entry),scopes.exported.pipes.add(entry)})}else getPipeDef$1(exportedType)?scopes.exported.pipes.add(exportedType):scopes.exported.directives.add(exportedType)}),def.transitiveCompileScopes=scopes,scopes}function expandModuleWithProviders(value){return isModuleWithProviders(value)?value.ngModule:value}__name(function resetCompiledComponents(){ownerNgModule=new WeakMap,verifiedNgModule=new WeakMap,moduleQueue.length=0,GENERATED_COMP_IDS.clear()},"resetCompiledComponents"),__name(computeCombinedExports,"computeCombinedExports"),__name(setScopeOnDeclaredComponents,"setScopeOnDeclaredComponents"),__name(patchComponentDefWithScope,"patchComponentDefWithScope"),__name(transitiveScopesFor,"transitiveScopesFor"),__name(transitiveScopesForNgModule,"transitiveScopesForNgModule"),__name(expandModuleWithProviders,"expandModuleWithProviders");let compilationDepth=0;function getDependencyTypeForError(type){return getComponentDef(type)?"component":getDirectiveDef(type)?"directive":getPipeDef$1(type)?"pipe":"type"}function getStandaloneDefFunctions(type,imports){let cachedDirectiveDefs=null,cachedPipeDefs=null;return{directiveDefs:__name(()=>{if(null===cachedDirectiveDefs){cachedDirectiveDefs=[getComponentDef(type)];const seen=new Set;for(const rawDep of imports){const dep=resolveForwardRef(rawDep);if(!seen.has(dep))if(seen.add(dep),getNgModuleDef(dep)){const scope=transitiveScopesFor(dep);for(const dir of scope.exported.directives){const def=getComponentDef(dir)||getDirectiveDef(dir);def&&!seen.has(dir)&&(seen.add(dir),cachedDirectiveDefs.push(def))}}else{const def=getComponentDef(dep)||getDirectiveDef(dep);def&&cachedDirectiveDefs.push(def)}}}return cachedDirectiveDefs},"directiveDefs"),pipeDefs:__name(()=>{if(null===cachedPipeDefs){cachedPipeDefs=[];const seen=new Set;for(const rawDep of imports){const dep=resolveForwardRef(rawDep);if(!seen.has(dep))if(seen.add(dep),getNgModuleDef(dep)){const scope=transitiveScopesFor(dep);for(const pipe of scope.exported.pipes){const def=getPipeDef$1(pipe);def&&!seen.has(pipe)&&(seen.add(pipe),cachedPipeDefs.push(def))}}else{const def=getPipeDef$1(dep);def&&cachedPipeDefs.push(def)}}}return cachedPipeDefs},"pipeDefs")}}function hasSelectorScope(component){return void 0!==component.ngSelectorScope}function compileDirective(type,directive){let ngDirectiveDef=null;addDirectiveFactoryDef(type,directive||{}),Object.defineProperty(type,NG_DIR_DEF,{get:()=>{if(null===ngDirectiveDef){const meta=getDirectiveMetadata(type,directive||{});ngDirectiveDef=getCompilerFacade().compileDirective(angularCoreEnv,meta.sourceMapUrl,meta.metadata)}return ngDirectiveDef},configurable:!1})}function getDirectiveMetadata(type,metadata){const name=type&&type.name,sourceMapUrl=`ng:///${name}/\u0275dir.js`,compiler=getCompilerFacade(),facade=directiveMetadata(type,metadata);return facade.typeSourceSpan=compiler.createParseSourceSpan("Directive",name,sourceMapUrl),facade.usesInheritance&&addDirectiveDefToUndecoratedParents(type),{metadata:facade,sourceMapUrl}}function addDirectiveFactoryDef(type,metadata){let ngFactoryDef=null;Object.defineProperty(type,NG_FACTORY_DEF,{get:()=>{if(null===ngFactoryDef){const meta=getDirectiveMetadata(type,metadata),compiler=getCompilerFacade();ngFactoryDef=compiler.compileFactory(angularCoreEnv,`ng:///${type.name}/\u0275fac.js`,{name:meta.metadata.name,type:meta.metadata.type,typeArgumentCount:0,deps:reflectDependencies(type),target:compiler.FactoryTarget.Directive})}return ngFactoryDef},configurable:!1})}function extendsDirectlyFromObject(type){return Object.getPrototypeOf(type.prototype)===Object.prototype}function directiveMetadata(type,metadata){const reflect=getReflect(),propMetadata=reflect.ownPropMetadata(type);return{name:type.name,type,selector:void 0!==metadata.selector?metadata.selector:null,host:metadata.host||EMPTY_OBJ,propMetadata,inputs:metadata.inputs||EMPTY_ARRAY,outputs:metadata.outputs||EMPTY_ARRAY,queries:extractQueriesMetadata(type,propMetadata,isContentQuery),lifecycle:{usesOnChanges:reflect.hasLifecycleHook(type,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!extendsDirectlyFromObject(type),exportAs:extractExportAs(metadata.exportAs),providers:metadata.providers||null,viewQueries:extractQueriesMetadata(type,propMetadata,isViewQuery),isStandalone:!!metadata.standalone,hostDirectives:metadata.hostDirectives?.map(directive=>"function"==typeof directive?{directive}:directive)||null}}function addDirectiveDefToUndecoratedParents(type){const objPrototype=Object.prototype;let parent=Object.getPrototypeOf(type.prototype).constructor;for(;parent&&parent!==objPrototype;)!getDirectiveDef(parent)&&!getComponentDef(parent)&&shouldAddAbstractDirective(parent)&&compileDirective(parent,null),parent=Object.getPrototypeOf(parent)}function convertToR3QueryPredicate(selector){return"string"==typeof selector?splitByComma(selector):resolveForwardRef(selector)}function convertToR3QueryMetadata(propertyName,ann){return{propertyName,predicate:convertToR3QueryPredicate(ann.selector),descendants:ann.descendants,first:ann.first,read:ann.read?ann.read:null,static:!!ann.static,emitDistinctChangesOnly:!!ann.emitDistinctChangesOnly}}function extractQueriesMetadata(type,propMetadata,isQueryAnn){const queriesMeta=[];for(const field in propMetadata)if(propMetadata.hasOwnProperty(field)){const annotations=propMetadata[field];annotations.forEach(ann=>{if(isQueryAnn(ann)){if(!ann.selector)throw new Error(`Can't construct a query for the property "${field}" of "${stringifyForError(type)}" since the query selector wasn't defined.`);if(annotations.some(isInputAnnotation))throw new Error("Cannot combine @Input decorators with query decorators");queriesMeta.push(convertToR3QueryMetadata(field,ann))}})}return queriesMeta}function extractExportAs(exportAs){return void 0===exportAs?null:splitByComma(exportAs)}function isContentQuery(value){const name=value.ngMetadataName;return"ContentChild"===name||"ContentChildren"===name}function isViewQuery(value){const name=value.ngMetadataName;return"ViewChild"===name||"ViewChildren"===name}function isInputAnnotation(value){return"Input"===value.ngMetadataName}function splitByComma(value){return value.split(",").map(piece=>piece.trim())}__name(function compileComponent(type,metadata){let ngComponentDef=null;maybeQueueResolutionOfComponentResources(type,metadata),addDirectiveFactoryDef(type,metadata),Object.defineProperty(type,NG_COMP_DEF,{get:()=>{if(null===ngComponentDef){const compiler=getCompilerFacade();if(componentNeedsResolution(metadata)){const error=[`Component '${type.name}' is not resolved:`];throw metadata.templateUrl&&error.push(` - templateUrl: ${metadata.templateUrl}`),metadata.styleUrls&&metadata.styleUrls.length&&error.push(` - styleUrls: ${JSON.stringify(metadata.styleUrls)}`),error.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(error.join("\n"))}const options=getJitOptions();let preserveWhitespaces=metadata.preserveWhitespaces;void 0===preserveWhitespaces&&(preserveWhitespaces=null!==options&&void 0!==options.preserveWhitespaces&&options.preserveWhitespaces);let encapsulation=metadata.encapsulation;void 0===encapsulation&&(encapsulation=null!==options&&void 0!==options.defaultEncapsulation?options.defaultEncapsulation:ViewEncapsulation$1.Emulated);const templateUrl=metadata.templateUrl||`ng:///${type.name}/template.html`,meta={...directiveMetadata(type,metadata),typeSourceSpan:compiler.createParseSourceSpan("Component",type.name,templateUrl),template:metadata.template||"",preserveWhitespaces,styles:metadata.styles||EMPTY_ARRAY,animations:metadata.animations,declarations:[],changeDetection:metadata.changeDetection,encapsulation,interpolation:metadata.interpolation,viewProviders:metadata.viewProviders||null};compilationDepth++;try{if(meta.usesInheritance&&addDirectiveDefToUndecoratedParents(type),ngComponentDef=compiler.compileComponent(angularCoreEnv,templateUrl,meta),metadata.standalone){const imports=flatten(metadata.imports||EMPTY_ARRAY),{directiveDefs,pipeDefs}=getStandaloneDefFunctions(type,imports);ngComponentDef.directiveDefs=directiveDefs,ngComponentDef.pipeDefs=pipeDefs,ngComponentDef.dependencies=()=>imports.map(resolveForwardRef)}}finally{compilationDepth--}if(0===compilationDepth&&flushModuleScopingQueueAsMuchAsPossible(),hasSelectorScope(type)){const scopes=transitiveScopesFor(type.ngSelectorScope);patchComponentDefWithScope(ngComponentDef,scopes)}if(metadata.schemas){if(!metadata.standalone)throw new Error(`The 'schemas' was specified for the ${stringifyForError(type)} but is only valid on a component that is standalone.`);ngComponentDef.schemas=metadata.schemas}else metadata.standalone&&(ngComponentDef.schemas=[])}return ngComponentDef},configurable:!1})},"compileComponent"),__name(getDependencyTypeForError,"getDependencyTypeForError"),__name(function verifyStandaloneImport(depType,importingType){if(isForwardRef(depType)&&!(depType=resolveForwardRef(depType)))throw new Error(`Expected forwardRef function, imported from "${stringifyForError(importingType)}", to return a standalone entity or NgModule but got "${stringifyForError(depType)||depType}".`);if(null==getNgModuleDef(depType)){const def=getComponentDef(depType)||getDirectiveDef(depType)||getPipeDef$1(depType);if(null==def)throw isModuleWithProviders(depType)?new Error(`A module with providers was imported from "${stringifyForError(importingType)}". Modules with providers are not supported in standalone components imports.`):new Error(`The "${stringifyForError(depType)}" type, imported from "${stringifyForError(importingType)}", must be a standalone component / directive / pipe or an NgModule. Did you forget to add the required @Component / @Directive / @Pipe or @NgModule annotation?`);if(!def.standalone)throw new Error(`The "${stringifyForError(depType)}" ${getDependencyTypeForError(depType)}, imported from "${stringifyForError(importingType)}", is not standalone. Did you forget to add the standalone: true flag?`)}},"verifyStandaloneImport"),__name(getStandaloneDefFunctions,"getStandaloneDefFunctions"),__name(hasSelectorScope,"hasSelectorScope"),__name(compileDirective,"compileDirective"),__name(getDirectiveMetadata,"getDirectiveMetadata"),__name(addDirectiveFactoryDef,"addDirectiveFactoryDef"),__name(extendsDirectlyFromObject,"extendsDirectlyFromObject"),__name(directiveMetadata,"directiveMetadata"),__name(addDirectiveDefToUndecoratedParents,"addDirectiveDefToUndecoratedParents"),__name(convertToR3QueryPredicate,"convertToR3QueryPredicate"),__name(convertToR3QueryMetadata,"convertToR3QueryMetadata"),__name(extractQueriesMetadata,"extractQueriesMetadata"),__name(extractExportAs,"extractExportAs"),__name(isContentQuery,"isContentQuery"),__name(isViewQuery,"isViewQuery"),__name(isInputAnnotation,"isInputAnnotation"),__name(splitByComma,"splitByComma");const LIFECYCLE_HOOKS=null;function shouldAddAbstractDirective(type){const reflect=getReflect();if(LIFECYCLE_HOOKS.some(hookName=>reflect.hasLifecycleHook(type,hookName)))return!0;const propMetadata=reflect.propMetadata(type);for(const field in propMetadata){const annotations=propMetadata[field];for(let i=0;i<annotations.length;i++){const current=annotations[i],metadataName=current.ngMetadataName;if(isInputAnnotation(current)||isContentQuery(current)||isViewQuery(current)||"Output"===metadataName||"HostBinding"===metadataName||"HostListener"===metadataName)return!0}}return!1}function getPipeMetadata(type,meta){return{type,name:type.name,pipeName:meta.name,pure:void 0===meta.pure||meta.pure,isStandalone:!!meta.standalone}}__name(shouldAddAbstractDirective,"shouldAddAbstractDirective"),__name(function compilePipe(type,meta){let ngPipeDef=null,ngFactoryDef=null;Object.defineProperty(type,NG_FACTORY_DEF,{get:()=>{if(null===ngFactoryDef){const metadata=getPipeMetadata(type,meta),compiler=getCompilerFacade();ngFactoryDef=compiler.compileFactory(angularCoreEnv,`ng:///${metadata.name}/\u0275fac.js`,{name:metadata.name,type:metadata.type,typeArgumentCount:0,deps:reflectDependencies(type),target:compiler.FactoryTarget.Pipe})}return ngFactoryDef},configurable:!1}),Object.defineProperty(type,NG_PIPE_DEF,{get:()=>{if(null===ngPipeDef){const metadata=getPipeMetadata(type,meta);ngPipeDef=getCompilerFacade().compilePipe(angularCoreEnv,`ng:///${metadata.name}/\u0275pipe.js`,metadata)}return ngPipeDef},configurable:!1})},"compilePipe"),__name(getPipeMetadata,"getPipeMetadata");const APP_INITIALIZER=new InjectionToken("Application Initializer");let ApplicationInitStatus=(()=>{class ApplicationInitStatus2{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((res,rej)=>{this.resolve=res,this.reject=rej}),this.appInits=inject2(APP_INITIALIZER,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const asyncInitPromises=[];for(const appInits of this.appInits){const initResult=appInits();if(isPromise(initResult))asyncInitPromises.push(initResult);else if(isSubscribable(initResult)){const observableAsPromise=new Promise((resolve,reject)=>{initResult.subscribe({complete:resolve,error:reject})});asyncInitPromises.push(observableAsPromise)}}const complete=__name(()=>{this.done=!0,this.resolve()},"complete");Promise.all(asyncInitPromises).then(()=>{complete()}).catch(e=>{this.reject(e)}),0===asyncInitPromises.length&&complete(),this.initialized=!0}}return __name(ApplicationInitStatus2,"ApplicationInitStatus"),ApplicationInitStatus2.\u0275fac=__name(function(t){return new(t||ApplicationInitStatus2)},"ApplicationInitStatus_Factory"),ApplicationInitStatus2.\u0275prov=\u0275\u0275defineInjectable({token:ApplicationInitStatus2,factory:ApplicationInitStatus2.\u0275fac,providedIn:"root"}),ApplicationInitStatus2})(),Console=(()=>{class Console2{log(message){console.log(message)}warn(message){console.warn(message)}}return __name(Console2,"Console"),Console2.\u0275fac=__name(function(t){return new(t||Console2)},"Console_Factory"),Console2.\u0275prov=\u0275\u0275defineInjectable({token:Console2,factory:Console2.\u0275fac,providedIn:"platform"}),Console2})();function getGlobalLocale(){return typeof $localize<"u"&&$localize.locale||DEFAULT_LOCALE_ID}__name(getGlobalLocale,"getGlobalLocale");const LOCALE_ID=new InjectionToken("LocaleId",{providedIn:"root",factory:()=>inject2(LOCALE_ID,InjectFlags.Optional|InjectFlags.SkipSelf)||getGlobalLocale()}),DEFAULT_CURRENCY_CODE=new InjectionToken("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ModuleWithComponentFactories{constructor(ngModuleFactory,componentFactories){this.ngModuleFactory=ngModuleFactory,this.componentFactories=componentFactories}}__name(ModuleWithComponentFactories,"ModuleWithComponentFactories");let Compiler=(()=>{class Compiler2{compileModuleSync(moduleType){return new NgModuleFactory(moduleType)}compileModuleAsync(moduleType){return Promise.resolve(this.compileModuleSync(moduleType))}compileModuleAndAllComponentsSync(moduleType){const ngModuleFactory=this.compileModuleSync(moduleType),componentFactories=maybeUnwrapFn(getNgModuleDef(moduleType).declarations).reduce((factories,declaration)=>{const componentDef=getComponentDef(declaration);return componentDef&&factories.push(new ComponentFactory(componentDef)),factories},[]);return new ModuleWithComponentFactories(ngModuleFactory,componentFactories)}compileModuleAndAllComponentsAsync(moduleType){return Promise.resolve(this.compileModuleAndAllComponentsSync(moduleType))}clearCache(){}clearCacheFor(type){}getModuleId(moduleType){}}return __name(Compiler2,"Compiler"),Compiler2.\u0275fac=__name(function(t){return new(t||Compiler2)},"Compiler_Factory"),Compiler2.\u0275prov=\u0275\u0275defineInjectable({token:Compiler2,factory:Compiler2.\u0275fac,providedIn:"root"}),Compiler2})();function applyChanges(component){markViewDirty(getComponentViewByInstance(component)),getRootComponents(component).forEach(rootComponent=>detectChanges(rootComponent))}__name(class CompilerFactory{},"CompilerFactory"),__name(applyChanges,"applyChanges");let _published=!1;function publishGlobalUtil(name,fn){if((typeof COMPILED>"u"||!COMPILED)&&_global){let container=_global.ng;container||(container=_global.ng={}),container[name]=fn}}__name(function publishDefaultGlobalUtils$1(){_published||(_published=!0,publishGlobalUtil("\u0275setProfiler",setProfiler),publishGlobalUtil("getDirectiveMetadata",getDirectiveMetadata$1),publishGlobalUtil("getComponent",getComponent),publishGlobalUtil("getContext",getContext),publishGlobalUtil("getListeners",getListeners),publishGlobalUtil("getOwningComponent",getOwningComponent),publishGlobalUtil("getHostElement",getHostElement),publishGlobalUtil("getInjector",getInjector),publishGlobalUtil("getRootComponents",getRootComponents),publishGlobalUtil("getDirectives",getDirectives),publishGlobalUtil("applyChanges",applyChanges))},"publishDefaultGlobalUtils$1"),__name(publishGlobalUtil,"publishGlobalUtil");const promise=(()=>Promise.resolve(0))();function scheduleMicroTask(fn){typeof Zone>"u"?promise.then(()=>{fn&&fn.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",fn)}function noop(...args){}function getNativeRequestAnimationFrame(){let nativeRequestAnimationFrame=_global.requestAnimationFrame,nativeCancelAnimationFrame=_global.cancelAnimationFrame;if(typeof Zone<"u"&&nativeRequestAnimationFrame&&nativeCancelAnimationFrame){const unpatchedRequestAnimationFrame=nativeRequestAnimationFrame[Zone.__symbol__("OriginalDelegate")];unpatchedRequestAnimationFrame&&(nativeRequestAnimationFrame=unpatchedRequestAnimationFrame);const unpatchedCancelAnimationFrame=nativeCancelAnimationFrame[Zone.__symbol__("OriginalDelegate")];unpatchedCancelAnimationFrame&&(nativeCancelAnimationFrame=unpatchedCancelAnimationFrame)}return{nativeRequestAnimationFrame,nativeCancelAnimationFrame}}__name(scheduleMicroTask,"scheduleMicroTask"),__name(noop,"noop"),__name(getNativeRequestAnimationFrame,"getNativeRequestAnimationFrame"),__name(class AsyncStackTaggingZoneSpec{constructor(namePrefix,consoleAsyncStackTaggingImpl=console){this.name="asyncStackTagging for "+namePrefix,this.createTask=consoleAsyncStackTaggingImpl?.createTask??(()=>null)}onScheduleTask(delegate,_current,target,task){return task.consoleTask=this.createTask(`Zone - ${task.source||task.type}`),delegate.scheduleTask(target,task)}onInvokeTask(delegate,_currentZone,targetZone,task,applyThis,applyArgs){let ret;return ret=task.consoleTask?task.consoleTask.run(()=>delegate.invokeTask(targetZone,task,applyThis,applyArgs)):delegate.invokeTask(targetZone,task,applyThis,applyArgs),ret}},"AsyncStackTaggingZoneSpec");class NgZone2{constructor({enableLongStackTrace=!1,shouldCoalesceEventChangeDetection=!1,shouldCoalesceRunChangeDetection=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new EventEmitter2(!1),this.onMicrotaskEmpty=new EventEmitter2(!1),this.onStable=new EventEmitter2(!1),this.onError=new EventEmitter2(!1),typeof Zone>"u")throw new RuntimeError(908,!1);Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),enableLongStackTrace&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!shouldCoalesceRunChangeDetection&&shouldCoalesceEventChangeDetection,this.shouldCoalesceRunChangeDetection=shouldCoalesceRunChangeDetection,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=getNativeRequestAnimationFrame().nativeRequestAnimationFrame,forkInnerZoneWithAngularBehavior(this)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!NgZone2.isInAngularZone())throw new RuntimeError(909,!1)}static assertNotInAngularZone(){if(NgZone2.isInAngularZone())throw new RuntimeError(909,!1)}run(fn,applyThis,applyArgs){return this._inner.run(fn,applyThis,applyArgs)}runTask(fn,applyThis,applyArgs,name){const zone=this._inner,task=zone.scheduleEventTask("NgZoneEvent: "+name,fn,EMPTY_PAYLOAD,noop,noop);try{return zone.runTask(task,applyThis,applyArgs)}finally{zone.cancelTask(task)}}runGuarded(fn,applyThis,applyArgs){return this._inner.runGuarded(fn,applyThis,applyArgs)}runOutsideAngular(fn){return this._outer.run(fn)}}__name(NgZone2,"NgZone");const EMPTY_PAYLOAD={};function checkStable(zone){if(0==zone._nesting&&!zone.hasPendingMicrotasks&&!zone.isStable)try{zone._nesting++,zone.onMicrotaskEmpty.emit(null)}finally{if(zone._nesting--,!zone.hasPendingMicrotasks)try{zone.runOutsideAngular(()=>zone.onStable.emit(null))}finally{zone.isStable=!0}}}function delayChangeDetectionForEvents(zone){zone.isCheckStableRunning||-1!==zone.lastRequestAnimationFrameId||(zone.lastRequestAnimationFrameId=zone.nativeRequestAnimationFrame.call(_global,()=>{zone.fakeTopEventTask||(zone.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{zone.lastRequestAnimationFrameId=-1,updateMicroTaskStatus(zone),zone.isCheckStableRunning=!0,checkStable(zone),zone.isCheckStableRunning=!1},void 0,()=>{},()=>{})),zone.fakeTopEventTask.invoke()}),updateMicroTaskStatus(zone))}function forkInnerZoneWithAngularBehavior(zone){const delayChangeDetectionForEventsDelegate=__name(()=>{delayChangeDetectionForEvents(zone)},"delayChangeDetectionForEventsDelegate");zone._inner=zone._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(delegate,current,target,task,applyThis,applyArgs)=>{try{return onEnter(zone),delegate.invokeTask(target,task,applyThis,applyArgs)}finally{(zone.shouldCoalesceEventChangeDetection&&"eventTask"===task.type||zone.shouldCoalesceRunChangeDetection)&&delayChangeDetectionForEventsDelegate(),onLeave(zone)}},onInvoke:(delegate,current,target,callback,applyThis,applyArgs,source)=>{try{return onEnter(zone),delegate.invoke(target,callback,applyThis,applyArgs,source)}finally{zone.shouldCoalesceRunChangeDetection&&delayChangeDetectionForEventsDelegate(),onLeave(zone)}},onHasTask:(delegate,current,target,hasTaskState)=>{delegate.hasTask(target,hasTaskState),current===target&&("microTask"==hasTaskState.change?(zone._hasPendingMicrotasks=hasTaskState.microTask,updateMicroTaskStatus(zone),checkStable(zone)):"macroTask"==hasTaskState.change&&(zone.hasPendingMacrotasks=hasTaskState.macroTask))},onHandleError:(delegate,current,target,error)=>(delegate.handleError(target,error),zone.runOutsideAngular(()=>zone.onError.emit(error)),!1)})}function updateMicroTaskStatus(zone){zone.hasPendingMicrotasks=!!(zone._hasPendingMicrotasks||(zone.shouldCoalesceEventChangeDetection||zone.shouldCoalesceRunChangeDetection)&&-1!==zone.lastRequestAnimationFrameId)}function onEnter(zone){zone._nesting++,zone.isStable&&(zone.isStable=!1,zone.onUnstable.emit(null))}function onLeave(zone){zone._nesting--,checkStable(zone)}__name(checkStable,"checkStable"),__name(delayChangeDetectionForEvents,"delayChangeDetectionForEvents"),__name(forkInnerZoneWithAngularBehavior,"forkInnerZoneWithAngularBehavior"),__name(updateMicroTaskStatus,"updateMicroTaskStatus"),__name(onEnter,"onEnter"),__name(onLeave,"onLeave");class NoopNgZone{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new EventEmitter2,this.onMicrotaskEmpty=new EventEmitter2,this.onStable=new EventEmitter2,this.onError=new EventEmitter2}run(fn,applyThis,applyArgs){return fn.apply(applyThis,applyArgs)}runGuarded(fn,applyThis,applyArgs){return fn.apply(applyThis,applyArgs)}runOutsideAngular(fn){return fn()}runTask(fn,applyThis,applyArgs,name){return fn.apply(applyThis,applyArgs)}}__name(NoopNgZone,"NoopNgZone");const ZONE_IS_STABLE_OBSERVABLE=new InjectionToken("",{providedIn:"root",factory:isStableFactory});function isStableFactory(){const zone=inject2(NgZone2);let _stable=!0;const isCurrentlyStable=new rxjs__WEBPACK_IMPORTED_MODULE_2__.y(observer=>{_stable=zone.isStable&&!zone.hasPendingMacrotasks&&!zone.hasPendingMicrotasks,zone.runOutsideAngular(()=>{observer.next(_stable),observer.complete()})}),isStable=new rxjs__WEBPACK_IMPORTED_MODULE_2__.y(observer=>{let stableSub;zone.runOutsideAngular(()=>{stableSub=zone.onStable.subscribe(()=>{NgZone2.assertNotInAngularZone(),scheduleMicroTask(()=>{!_stable&&!zone.hasPendingMacrotasks&&!zone.hasPendingMicrotasks&&(_stable=!0,observer.next(!0))})})});const unstableSub=zone.onUnstable.subscribe(()=>{NgZone2.assertInAngularZone(),_stable&&(_stable=!1,zone.runOutsideAngular(()=>{observer.next(!1)}))});return()=>{stableSub.unsubscribe(),unstableSub.unsubscribe()}});return(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)(isCurrentlyStable,isStable.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()))}__name(isStableFactory,"isStableFactory");const TESTABILITY=new InjectionToken(""),TESTABILITY_GETTER=new InjectionToken("");let Testability=(()=>{class Testability2{constructor(_ngZone,registry,testabilityGetter){this._ngZone=_ngZone,this.registry=registry,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_testabilityGetter||(setTestabilityGetter(testabilityGetter),testabilityGetter.addToWindow(registry)),this._watchAngularEvents(),_ngZone.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{NgZone2.assertNotInAngularZone(),scheduleMicroTask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())scheduleMicroTask(()=>{for(;0!==this._callbacks.length;){let cb=this._callbacks.pop();clearTimeout(cb.timeoutId),cb.doneCb(this._didWork)}this._didWork=!1});else{let pending=this.getPendingTasks();this._callbacks=this._callbacks.filter(cb=>!cb.updateCb||!cb.updateCb(pending)||(clearTimeout(cb.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(cb,timeout,updateCb){let timeoutId=-1;timeout&&timeout>0&&(timeoutId=setTimeout(()=>{this._callbacks=this._callbacks.filter(cb2=>cb2.timeoutId!==timeoutId),cb(this._didWork,this.getPendingTasks())},timeout)),this._callbacks.push({doneCb:cb,timeoutId,updateCb})}whenStable(doneCb,timeout,updateCb){if(updateCb&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(doneCb,timeout,updateCb),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(token){this.registry.registerApplication(token,this)}unregisterApplication(token){this.registry.unregisterApplication(token)}findProviders(using,provider,exactMatch){return[]}}return __name(Testability2,"Testability"),Testability2.\u0275fac=__name(function(t){return new(t||Testability2)(\u0275\u0275inject2(NgZone2),\u0275\u0275inject2(TestabilityRegistry),\u0275\u0275inject2(TESTABILITY_GETTER))},"Testability_Factory"),Testability2.\u0275prov=\u0275\u0275defineInjectable({token:Testability2,factory:Testability2.\u0275fac}),Testability2})(),TestabilityRegistry=(()=>{class TestabilityRegistry2{constructor(){this._applications=new Map}registerApplication(token,testability){this._applications.set(token,testability)}unregisterApplication(token){this._applications.delete(token)}unregisterAllApplications(){this._applications.clear()}getTestability(elem){return this._applications.get(elem)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(elem,findInAncestors=!0){return _testabilityGetter?.findTestabilityInTree(this,elem,findInAncestors)??null}}return __name(TestabilityRegistry2,"TestabilityRegistry"),TestabilityRegistry2.\u0275fac=__name(function(t){return new(t||TestabilityRegistry2)},"TestabilityRegistry_Factory"),TestabilityRegistry2.\u0275prov=\u0275\u0275defineInjectable({token:TestabilityRegistry2,factory:TestabilityRegistry2.\u0275fac,providedIn:"platform"}),TestabilityRegistry2})();function setTestabilityGetter(getter){_testabilityGetter=getter}__name(setTestabilityGetter,"setTestabilityGetter");let _testabilityGetter,_platformInjector=null;const ALLOW_MULTIPLE_PLATFORMS=new InjectionToken("AllowMultipleToken"),PLATFORM_DESTROY_LISTENERS=new InjectionToken("PlatformDestroyListeners"),APP_BOOTSTRAP_LISTENER2=new InjectionToken("appBootstrapListener");function compileNgModuleFactory(injector,options,moduleType){const moduleFactory=new NgModuleFactory(moduleType);return Promise.resolve(moduleFactory)}function publishSignalConfiguration(){setThrowInvalidWriteToSignalError(()=>{throw new RuntimeError(600,!1)})}function isBoundToModule(cf){return cf.isBoundToModule}__name(compileNgModuleFactory,"compileNgModuleFactory"),__name(function publishDefaultGlobalUtils(){},"publishDefaultGlobalUtils"),__name(publishSignalConfiguration,"publishSignalConfiguration"),__name(isBoundToModule,"isBoundToModule");class NgProbeToken{constructor(name,token){this.name=name,this.token=token}}function createPlatform(injector){if(_platformInjector&&!_platformInjector.get(ALLOW_MULTIPLE_PLATFORMS,!1))throw new RuntimeError(400,!1);publishSignalConfiguration(),_platformInjector=injector;const platform=injector.get(PlatformRef);return runPlatformInitializers(injector),platform}function createOrReusePlatformInjector(providers=[]){if(_platformInjector)return _platformInjector;const injector=createPlatformInjector(providers);return _platformInjector=injector,publishSignalConfiguration(),runPlatformInitializers(injector),injector}function runPlatformInitializers(injector){injector.get(PLATFORM_INITIALIZER,null)?.forEach(init=>init())}function createPlatformFactory(parentPlatformFactory,name,providers=[]){const desc=`Platform: ${name}`,marker=new InjectionToken(desc);return(extraProviders=[])=>{let platform=getPlatform();if(!platform||platform.injector.get(ALLOW_MULTIPLE_PLATFORMS,!1)){const platformProviders=[...providers,...extraProviders,{provide:marker,useValue:!0}];parentPlatformFactory?parentPlatformFactory(platformProviders):createPlatform(createPlatformInjector(platformProviders,desc))}return assertPlatform()}}function assertPlatform(requiredToken){const platform=getPlatform();if(!platform)throw new RuntimeError(401,!1);return platform}function createPlatformInjector(providers=[],name){return Injector2.create({name,providers:[{provide:INJECTOR_SCOPE,useValue:"platform"},{provide:PLATFORM_DESTROY_LISTENERS,useValue:new Set([()=>_platformInjector=null])},...providers]})}function getPlatform(){return _platformInjector?.get(PlatformRef)??null}__name(NgProbeToken,"NgProbeToken"),__name(createPlatform,"createPlatform"),__name(createOrReusePlatformInjector,"createOrReusePlatformInjector"),__name(runPlatformInitializers,"runPlatformInitializers"),__name(function internalCreateApplication(config){try{const{rootComponent,appProviders,platformProviders}=config,platformInjector=createOrReusePlatformInjector(platformProviders),allAppProviders=[provideZoneChangeDetection(),...appProviders||[]],envInjector=new EnvironmentNgModuleRefAdapter({providers:allAppProviders,parent:platformInjector,debugName:"",runEnvironmentInitializers:!1}).injector,ngZone=envInjector.get(NgZone2);return ngZone.run(()=>{envInjector.resolveInjectorInitializers();const exceptionHandler=envInjector.get(ErrorHandler,null);let onErrorSubscription;ngZone.runOutsideAngular(()=>{onErrorSubscription=ngZone.onError.subscribe({next:error=>{exceptionHandler.handleError(error)}})});const destroyListener=__name(()=>envInjector.destroy(),"destroyListener"),onPlatformDestroyListeners=platformInjector.get(PLATFORM_DESTROY_LISTENERS);return onPlatformDestroyListeners.add(destroyListener),envInjector.onDestroy(()=>{onErrorSubscription.unsubscribe(),onPlatformDestroyListeners.delete(destroyListener)}),_callAndReportToErrorHandler(exceptionHandler,ngZone,()=>{const initStatus=envInjector.get(ApplicationInitStatus);return initStatus.runInitializers(),initStatus.donePromise.then(()=>{setLocaleId(envInjector.get(LOCALE_ID,DEFAULT_LOCALE_ID)||DEFAULT_LOCALE_ID);const appRef=envInjector.get(ApplicationRef2);return void 0!==rootComponent&&appRef.bootstrap(rootComponent),appRef})})})}catch(e){return Promise.reject(e)}},"internalCreateApplication"),__name(createPlatformFactory,"createPlatformFactory"),__name(assertPlatform,"assertPlatform"),__name(createPlatformInjector,"createPlatformInjector"),__name(function destroyPlatform(){getPlatform()?.destroy()},"destroyPlatform"),__name(getPlatform,"getPlatform");let PlatformRef=(()=>{class PlatformRef2{constructor(_injector){this._injector=_injector,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(moduleFactory,options){const ngZone=getNgZone(options?.ngZone,getNgZoneOptions({eventCoalescing:options?.ngZoneEventCoalescing,runCoalescing:options?.ngZoneRunCoalescing}));return ngZone.run(()=>{const moduleRef=createNgModuleRefWithProviders(moduleFactory.moduleType,this.injector,internalProvideZoneChangeDetection(()=>ngZone)),exceptionHandler=moduleRef.injector.get(ErrorHandler,null);return ngZone.runOutsideAngular(()=>{const subscription=ngZone.onError.subscribe({next:error=>{exceptionHandler.handleError(error)}});moduleRef.onDestroy(()=>{remove(this._modules,moduleRef),subscription.unsubscribe()})}),_callAndReportToErrorHandler(exceptionHandler,ngZone,()=>{const initStatus=moduleRef.injector.get(ApplicationInitStatus);return initStatus.runInitializers(),initStatus.donePromise.then(()=>(setLocaleId(moduleRef.injector.get(LOCALE_ID,DEFAULT_LOCALE_ID)||DEFAULT_LOCALE_ID),this._moduleDoBootstrap(moduleRef),moduleRef))})})}bootstrapModule(moduleType,compilerOptions=[]){const options=optionsReducer({},compilerOptions);return compileNgModuleFactory(0,0,moduleType).then(moduleFactory=>this.bootstrapModuleFactory(moduleFactory,options))}_moduleDoBootstrap(moduleRef){const appRef=moduleRef.injector.get(ApplicationRef2);if(moduleRef._bootstrapComponents.length>0)moduleRef._bootstrapComponents.forEach(f=>appRef.bootstrap(f));else{if(!moduleRef.instance.ngDoBootstrap)throw new RuntimeError(-403,!1);moduleRef.instance.ngDoBootstrap(appRef)}this._modules.push(moduleRef)}onDestroy(callback){this._destroyListeners.push(callback)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new RuntimeError(404,!1);this._modules.slice().forEach(module=>module.destroy()),this._destroyListeners.forEach(listener=>listener());const destroyListeners=this._injector.get(PLATFORM_DESTROY_LISTENERS,null);destroyListeners&&(destroyListeners.forEach(listener=>listener()),destroyListeners.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return __name(PlatformRef2,"PlatformRef"),PlatformRef2.\u0275fac=__name(function(t){return new(t||PlatformRef2)(\u0275\u0275inject2(Injector2))},"PlatformRef_Factory"),PlatformRef2.\u0275prov=\u0275\u0275defineInjectable({token:PlatformRef2,factory:PlatformRef2.\u0275fac,providedIn:"platform"}),PlatformRef2})();function getNgZoneOptions(options){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:options?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:options?.runCoalescing??!1}}function getNgZone(ngZoneToUse="zone.js",options){return"noop"===ngZoneToUse?new NoopNgZone:"zone.js"===ngZoneToUse?new NgZone2(options):ngZoneToUse}function _callAndReportToErrorHandler(errorHandler,ngZone,callback){try{const result=callback();return isPromise(result)?result.catch(e=>{throw ngZone.runOutsideAngular(()=>errorHandler.handleError(e)),e}):result}catch(e){throw ngZone.runOutsideAngular(()=>errorHandler.handleError(e)),e}}function optionsReducer(dst,objs){return Array.isArray(objs)?objs.reduce(optionsReducer,dst):{...dst,...objs}}__name(getNgZoneOptions,"getNgZoneOptions"),__name(getNgZone,"getNgZone"),__name(_callAndReportToErrorHandler,"_callAndReportToErrorHandler"),__name(optionsReducer,"optionsReducer");let ApplicationRef2=(()=>{class ApplicationRef3{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=inject2(INTERNAL_APPLICATION_ERROR_HANDLER),this.componentTypes=[],this.components=[],this.isStable=inject2(ZONE_IS_STABLE_OBSERVABLE),this._injector=inject2(EnvironmentInjector2)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(componentOrFactory,rootSelectorOrNode){const isComponentFactory=componentOrFactory instanceof ComponentFactory$1;if(!this._injector.get(ApplicationInitStatus).done)throw!isComponentFactory&&isStandalone(componentOrFactory),new RuntimeError(405,!1);let componentFactory;componentFactory=isComponentFactory?componentOrFactory:this._injector.get(ComponentFactoryResolver$1).resolveComponentFactory(componentOrFactory),this.componentTypes.push(componentFactory.componentType);const ngModule=isBoundToModule(componentFactory)?void 0:this._injector.get(NgModuleRef$1),compRef=componentFactory.create(Injector2.NULL,[],rootSelectorOrNode||componentFactory.selector,ngModule),nativeElement=compRef.location.nativeElement,testability=compRef.injector.get(TESTABILITY,null);return testability?.registerApplication(nativeElement),compRef.onDestroy(()=>{this.detachView(compRef.hostView),remove(this.components,compRef),testability?.unregisterApplication(nativeElement)}),this._loadComponent(compRef),compRef}tick(){if(this._runningTick)throw new RuntimeError(101,!1);try{this._runningTick=!0;for(let view of this._views)view.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(viewRef){const view=viewRef;this._views.push(view),view.attachToAppRef(this)}detachView(viewRef){const view=viewRef;remove(this._views,view),view.detachFromAppRef()}_loadComponent(componentRef){this.attachView(componentRef.hostView),this.tick(),this.components.push(componentRef);const listeners=this._injector.get(APP_BOOTSTRAP_LISTENER2,[]);listeners.push(...this._bootstrapListeners),listeners.forEach(listener=>listener(componentRef))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(listener=>listener()),this._views.slice().forEach(view=>view.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(callback){return this._destroyListeners.push(callback),()=>remove(this._destroyListeners,callback)}destroy(){if(this._destroyed)throw new RuntimeError(406,!1);const injector=this._injector;injector.destroy&&!injector.destroyed&&injector.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return __name(ApplicationRef3,"ApplicationRef"),ApplicationRef3.\u0275fac=__name(function(t){return new(t||ApplicationRef3)},"ApplicationRef_Factory"),ApplicationRef3.\u0275prov=\u0275\u0275defineInjectable({token:ApplicationRef3,factory:ApplicationRef3.\u0275fac,providedIn:"root"}),ApplicationRef3})();function remove(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}__name(remove,"remove"),__name(function _lastDefined(args){for(let i=args.length-1;i>=0;i--)if(void 0!==args[i])return args[i]},"_lastDefined");const INTERNAL_APPLICATION_ERROR_HANDLER=new InjectionToken("",{providedIn:"root",factory:()=>inject2(ErrorHandler).handleError.bind(void 0)});function ngZoneApplicationErrorHandlerFactory(){const zone=inject2(NgZone2),userErrorHandler=inject2(ErrorHandler);return e=>zone.runOutsideAngular(()=>userErrorHandler.handleError(e))}__name(ngZoneApplicationErrorHandlerFactory,"ngZoneApplicationErrorHandlerFactory");let NgZoneChangeDetectionScheduler=(()=>{class NgZoneChangeDetectionScheduler2{constructor(){this.zone=inject2(NgZone2),this.applicationRef=inject2(ApplicationRef2)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return __name(NgZoneChangeDetectionScheduler2,"NgZoneChangeDetectionScheduler"),NgZoneChangeDetectionScheduler2.\u0275fac=__name(function(t){return new(t||NgZoneChangeDetectionScheduler2)},"NgZoneChangeDetectionScheduler_Factory"),NgZoneChangeDetectionScheduler2.\u0275prov=\u0275\u0275defineInjectable({token:NgZoneChangeDetectionScheduler2,factory:NgZoneChangeDetectionScheduler2.\u0275fac,providedIn:"root"}),NgZoneChangeDetectionScheduler2})();function internalProvideZoneChangeDetection(ngZoneFactory){return[{provide:NgZone2,useFactory:ngZoneFactory},{provide:ENVIRONMENT_INITIALIZER2,multi:!0,useFactory:()=>{const ngZoneChangeDetectionScheduler=inject2(NgZoneChangeDetectionScheduler,{optional:!0});return()=>ngZoneChangeDetectionScheduler.initialize()}},{provide:INTERNAL_APPLICATION_ERROR_HANDLER,useFactory:ngZoneApplicationErrorHandlerFactory},{provide:ZONE_IS_STABLE_OBSERVABLE,useFactory:isStableFactory}]}function provideZoneChangeDetection(options){return makeEnvironmentProviders2([[],internalProvideZoneChangeDetection(()=>new NgZone2(getNgZoneOptions(options)))])}function noModuleError(id){return new Error(`No module with ID ${id} loaded`)}__name(internalProvideZoneChangeDetection,"internalProvideZoneChangeDetection"),__name(provideZoneChangeDetection,"provideZoneChangeDetection"),__name(function isDevMode(){return!1},"isDevMode"),__name(function enableProdMode(){},"enableProdMode"),__name(function getModuleFactory(id){const type=getRegisteredNgModuleType(id);if(!type)throw noModuleError(id);return new NgModuleFactory(type)},"getModuleFactory"),__name(function getNgModuleById(id){const type=getRegisteredNgModuleType(id);if(!type)throw noModuleError(id);return type},"getNgModuleById"),__name(noModuleError,"noModuleError");let ChangeDetectorRef=(()=>{class ChangeDetectorRef2{}return __name(ChangeDetectorRef2,"ChangeDetectorRef"),ChangeDetectorRef2.__NG_ELEMENT_ID__=injectChangeDetectorRef,ChangeDetectorRef2})();function injectChangeDetectorRef(flags){return createViewRef(getCurrentTNode(),getLView(),16==(16&flags))}function createViewRef(tNode,lView,isPipe){if(isComponentHost(tNode)&&!isPipe){const componentView=getComponentLViewByIndex(tNode.index,lView);return new ViewRef$1(componentView,componentView)}return 47&tNode.type?new ViewRef$1(lView[DECLARATION_COMPONENT_VIEW],lView):null}__name(injectChangeDetectorRef,"injectChangeDetectorRef"),__name(createViewRef,"createViewRef"),__name(class ViewRef extends(null){},"ViewRef"),__name(class EmbeddedViewRef extends(null){},"EmbeddedViewRef"),__name(class DebugEventListener{constructor(name,callback){this.name=name,this.callback=callback}},"DebugEventListener"),__name(function asNativeElements(debugEls){return debugEls.map(el=>el.nativeElement)},"asNativeElements");class DebugNode{constructor(nativeNode){this.nativeNode=nativeNode}get parent(){const parent=this.nativeNode.parentNode;return parent?new DebugElement(parent):null}get injector(){return getInjector(this.nativeNode)}get componentInstance(){const nativeElement=this.nativeNode;return nativeElement&&(getComponent(nativeElement)||getOwningComponent(nativeElement))}get context(){return getComponent(this.nativeNode)||getContext(this.nativeNode)}get listeners(){return getListeners(this.nativeNode).filter(listener=>"dom"===listener.type)}get references(){return getLocalRefs(this.nativeNode)}get providerTokens(){return getInjectionTokens(this.nativeNode)}}__name(DebugNode,"DebugNode");class DebugElement extends(null){constructor(nativeNode){super(nativeNode)}get nativeElement(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}get name(){const context=getLContext(this.nativeNode),lView=context?context.lView:null;return null!==lView?lView[TVIEW].data[context.nodeIndex].value:this.nativeNode.nodeName}get properties(){const context=getLContext(this.nativeNode),lView=context?context.lView:null;if(null===lView)return{};const tData=lView[TVIEW].data,tNode=tData[context.nodeIndex],properties={};return copyDomProperties(this.nativeElement,properties),collectPropertyBindings(properties,tNode,lView,tData),properties}get attributes(){const attributes={},element=this.nativeElement;if(!element)return attributes;const context=getLContext(element),lView=context?context.lView:null;if(null===lView)return{};const tNodeAttrs=lView[TVIEW].data[context.nodeIndex].attrs,lowercaseTNodeAttrs=[];if(tNodeAttrs){let i=0;for(;i<tNodeAttrs.length;){const attrName=tNodeAttrs[i];if("string"!=typeof attrName)break;attributes[attrName]=tNodeAttrs[i+1],lowercaseTNodeAttrs.push(attrName.toLowerCase()),i+=2}}for(const attr of element.attributes)lowercaseTNodeAttrs.includes(attr.name)||(attributes[attr.name]=attr.value);return attributes}get styles(){return this.nativeElement&&this.nativeElement.style?this.nativeElement.style:{}}get classes(){const result={},className=this.nativeElement.className;return("string"!=typeof className?className.baseVal.split(" "):className.split(" ")).forEach(value=>result[value]=!0),result}get childNodes(){const childNodes=this.nativeNode.childNodes,children=[];for(let i=0;i<childNodes.length;i++)children.push(getDebugNode(childNodes[i]));return children}get children(){const nativeElement=this.nativeElement;if(!nativeElement)return[];const childNodes=nativeElement.children,children=[];for(let i=0;i<childNodes.length;i++)children.push(getDebugNode(childNodes[i]));return children}query(predicate){return this.queryAll(predicate)[0]||null}queryAll(predicate){const matches=[];return _queryAll(this,predicate,matches,!0),matches}queryAllNodes(predicate){const matches=[];return _queryAll(this,predicate,matches,!1),matches}triggerEventHandler(eventName,eventObj){const node=this.nativeNode,invokedListeners=[];this.listeners.forEach(listener=>{if(listener.name===eventName){const callback=listener.callback;callback.call(node,eventObj),invokedListeners.push(callback)}}),"function"==typeof node.eventListeners&&node.eventListeners(eventName).forEach(listener=>{if(-1!==listener.toString().indexOf("__ngUnwrap__")){const unwrappedListener=listener("__ngUnwrap__");return-1===invokedListeners.indexOf(unwrappedListener)&&unwrappedListener.call(node,eventObj)}})}}function copyDomProperties(element,properties){if(element){let obj=Object.getPrototypeOf(element);const NodePrototype=Node.prototype;for(;null!==obj&&obj!==NodePrototype;){const descriptors=Object.getOwnPropertyDescriptors(obj);for(let key in descriptors)if(!key.startsWith("__")&&!key.startsWith("on")){const value=element[key];isPrimitiveValue(value)&&(properties[key]=value)}obj=Object.getPrototypeOf(obj)}}}function isPrimitiveValue(value){return"string"==typeof value||"boolean"==typeof value||"number"==typeof value||null===value}function _queryAll(parentElement,predicate,matches,elementsOnly){const context=getLContext(parentElement.nativeNode),lView=context?context.lView:null;null!==lView?_queryNodeChildren(lView[TVIEW].data[context.nodeIndex],lView,predicate,matches,elementsOnly,parentElement.nativeNode):_queryNativeNodeDescendants(parentElement.nativeNode,predicate,matches,elementsOnly)}function _queryNodeChildren(tNode,lView,predicate,matches,elementsOnly,rootNativeNode){const nativeNode=getNativeByTNodeOrNull(tNode,lView);if(11&tNode.type){if(_addQueryMatch(nativeNode,predicate,matches,elementsOnly,rootNativeNode),isComponentHost(tNode)){const componentView=getComponentLViewByIndex(tNode.index,lView);componentView&&componentView[TVIEW].firstChild&&_queryNodeChildren(componentView[TVIEW].firstChild,componentView,predicate,matches,elementsOnly,rootNativeNode)}else tNode.child&&_queryNodeChildren(tNode.child,lView,predicate,matches,elementsOnly,rootNativeNode),nativeNode&&_queryNativeNodeDescendants(nativeNode,predicate,matches,elementsOnly);const nodeOrContainer=lView[tNode.index];isLContainer(nodeOrContainer)&&_queryNodeChildrenInContainer(nodeOrContainer,predicate,matches,elementsOnly,rootNativeNode)}else if(4&tNode.type){const lContainer=lView[tNode.index];_addQueryMatch(lContainer[NATIVE],predicate,matches,elementsOnly,rootNativeNode),_queryNodeChildrenInContainer(lContainer,predicate,matches,elementsOnly,rootNativeNode)}else if(16&tNode.type){const componentView=lView[DECLARATION_COMPONENT_VIEW],head=componentView[T_HOST].projection[tNode.projection];if(Array.isArray(head))for(let nativeNode2 of head)_addQueryMatch(nativeNode2,predicate,matches,elementsOnly,rootNativeNode);else if(head){const nextLView=componentView[PARENT];_queryNodeChildren(nextLView[TVIEW].data[head.index],nextLView,predicate,matches,elementsOnly,rootNativeNode)}}else tNode.child&&_queryNodeChildren(tNode.child,lView,predicate,matches,elementsOnly,rootNativeNode);if(rootNativeNode!==nativeNode){const nextTNode=2&tNode.flags?tNode.projectionNext:tNode.next;nextTNode&&_queryNodeChildren(nextTNode,lView,predicate,matches,elementsOnly,rootNativeNode)}}function _queryNodeChildrenInContainer(lContainer,predicate,matches,elementsOnly,rootNativeNode){for(let i=CONTAINER_HEADER_OFFSET;i<lContainer.length;i++){const childView=lContainer[i],firstChild=childView[TVIEW].firstChild;firstChild&&_queryNodeChildren(firstChild,childView,predicate,matches,elementsOnly,rootNativeNode)}}function _addQueryMatch(nativeNode,predicate,matches,elementsOnly,rootNativeNode){if(rootNativeNode!==nativeNode){const debugNode=getDebugNode(nativeNode);if(!debugNode)return;(elementsOnly&&debugNode instanceof DebugElement&&predicate(debugNode)&&-1===matches.indexOf(debugNode)||!elementsOnly&&predicate(debugNode)&&-1===matches.indexOf(debugNode))&&matches.push(debugNode)}}function _queryNativeNodeDescendants(parentNode,predicate,matches,elementsOnly){const nodes=parentNode.childNodes,length=nodes.length;for(let i=0;i<length;i++){const node=nodes[i],debugNode=getDebugNode(node);debugNode&&((elementsOnly&&debugNode instanceof DebugElement&&predicate(debugNode)&&-1===matches.indexOf(debugNode)||!elementsOnly&&predicate(debugNode)&&-1===matches.indexOf(debugNode))&&matches.push(debugNode),_queryNativeNodeDescendants(node,predicate,matches,elementsOnly))}}function collectPropertyBindings(properties,tNode,lView,tData){let bindingIndexes=tNode.propertyBindings;if(null!==bindingIndexes)for(let i=0;i<bindingIndexes.length;i++){const bindingIndex=bindingIndexes[i],metadataParts=tData[bindingIndex].split(INTERPOLATION_DELIMITER),propertyName=metadataParts[0];if(metadataParts.length>1){let value=metadataParts[1];for(let j=1;j<metadataParts.length-1;j++)value+=renderStringify(lView[bindingIndex+j-1])+metadataParts[j+1];properties[propertyName]=value}else properties[propertyName]=lView[bindingIndex]}}__name(DebugElement,"DebugElement"),__name(copyDomProperties,"copyDomProperties"),__name(isPrimitiveValue,"isPrimitiveValue"),__name(_queryAll,"_queryAll"),__name(_queryNodeChildren,"_queryNodeChildren"),__name(_queryNodeChildrenInContainer,"_queryNodeChildrenInContainer"),__name(_addQueryMatch,"_addQueryMatch"),__name(_queryNativeNodeDescendants,"_queryNativeNodeDescendants"),__name(collectPropertyBindings,"collectPropertyBindings");const _nativeNodeToDebugNode=new Map,NG_DEBUG_PROPERTY="__ng_debug__";function getDebugNode(nativeNode){return nativeNode instanceof Node?(nativeNode.hasOwnProperty(NG_DEBUG_PROPERTY)||(nativeNode[NG_DEBUG_PROPERTY]=nativeNode.nodeType==Node.ELEMENT_NODE?new DebugElement(nativeNode):new DebugNode(nativeNode)),nativeNode[NG_DEBUG_PROPERTY]):null}__name(getDebugNode,"getDebugNode"),__name(function getAllDebugNodes(){return Array.from(_nativeNodeToDebugNode.values())},"getAllDebugNodes"),__name(function indexDebugNode(node){_nativeNodeToDebugNode.set(node.nativeNode,node)},"indexDebugNode"),__name(function removeDebugNodeFromIndex(node){_nativeNodeToDebugNode.delete(node.nativeNode)},"removeDebugNodeFromIndex");class DefaultIterableDifferFactory{constructor(){}supports(obj){return isListLikeIterable(obj)}create(trackByFn){return new DefaultIterableDiffer(trackByFn)}}__name(DefaultIterableDifferFactory,"DefaultIterableDifferFactory");const trackByIdentity=__name((index,item)=>item,"trackByIdentity");class DefaultIterableDiffer{constructor(trackByFn){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=trackByFn||trackByIdentity}forEachItem(fn){let record;for(record=this._itHead;null!==record;record=record._next)fn(record)}forEachOperation(fn){let nextIt=this._itHead,nextRemove=this._removalsHead,addRemoveOffset=0,moveOffsets=null;for(;nextIt||nextRemove;){const record=!nextRemove||nextIt&&nextIt.currentIndex<getPreviousIndex(nextRemove,addRemoveOffset,moveOffsets)?nextIt:nextRemove,adjPreviousIndex=getPreviousIndex(record,addRemoveOffset,moveOffsets),currentIndex=record.currentIndex;if(record===nextRemove)addRemoveOffset--,nextRemove=nextRemove._nextRemoved;else if(nextIt=nextIt._next,null==record.previousIndex)addRemoveOffset++;else{moveOffsets||(moveOffsets=[]);const localMovePreviousIndex=adjPreviousIndex-addRemoveOffset,localCurrentIndex=currentIndex-addRemoveOffset;if(localMovePreviousIndex!=localCurrentIndex){for(let i=0;i<localMovePreviousIndex;i++){const offset=i<moveOffsets.length?moveOffsets[i]:moveOffsets[i]=0,index=offset+i;localCurrentIndex<=index&&index<localMovePreviousIndex&&(moveOffsets[i]=offset+1)}moveOffsets[record.previousIndex]=localCurrentIndex-localMovePreviousIndex}}adjPreviousIndex!==currentIndex&&fn(record,adjPreviousIndex,currentIndex)}}forEachPreviousItem(fn){let record;for(record=this._previousItHead;null!==record;record=record._nextPrevious)fn(record)}forEachAddedItem(fn){let record;for(record=this._additionsHead;null!==record;record=record._nextAdded)fn(record)}forEachMovedItem(fn){let record;for(record=this._movesHead;null!==record;record=record._nextMoved)fn(record)}forEachRemovedItem(fn){let record;for(record=this._removalsHead;null!==record;record=record._nextRemoved)fn(record)}forEachIdentityChange(fn){let record;for(record=this._identityChangesHead;null!==record;record=record._nextIdentityChange)fn(record)}diff(collection){if(null==collection&&(collection=[]),!isListLikeIterable(collection))throw new RuntimeError(900,!1);return this.check(collection)?this:null}onDestroy(){}check(collection){this._reset();let index,item,itemTrackBy,record=this._itHead,mayBeDirty=!1;if(Array.isArray(collection)){this.length=collection.length;for(let index2=0;index2<this.length;index2++)item=collection[index2],itemTrackBy=this._trackByFn(index2,item),null!==record&&Object.is(record.trackById,itemTrackBy)?(mayBeDirty&&(record=this._verifyReinsertion(record,item,itemTrackBy,index2)),Object.is(record.item,item)||this._addIdentityChange(record,item)):(record=this._mismatch(record,item,itemTrackBy,index2),mayBeDirty=!0),record=record._next}else index=0,iterateListLike(collection,item2=>{itemTrackBy=this._trackByFn(index,item2),null!==record&&Object.is(record.trackById,itemTrackBy)?(mayBeDirty&&(record=this._verifyReinsertion(record,item2,itemTrackBy,index)),Object.is(record.item,item2)||this._addIdentityChange(record,item2)):(record=this._mismatch(record,item2,itemTrackBy,index),mayBeDirty=!0),record=record._next,index++}),this.length=index;return this._truncate(record),this.collection=collection,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let record;for(record=this._previousItHead=this._itHead;null!==record;record=record._next)record._nextPrevious=record._next;for(record=this._additionsHead;null!==record;record=record._nextAdded)record.previousIndex=record.currentIndex;for(this._additionsHead=this._additionsTail=null,record=this._movesHead;null!==record;record=record._nextMoved)record.previousIndex=record.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(record,item,itemTrackBy,index){let previousRecord;return null===record?previousRecord=this._itTail:(previousRecord=record._prev,this._remove(record)),null!==(record=null===this._unlinkedRecords?null:this._unlinkedRecords.get(itemTrackBy,null))?(Object.is(record.item,item)||this._addIdentityChange(record,item),this._reinsertAfter(record,previousRecord,index)):null!==(record=null===this._linkedRecords?null:this._linkedRecords.get(itemTrackBy,index))?(Object.is(record.item,item)||this._addIdentityChange(record,item),this._moveAfter(record,previousRecord,index)):record=this._addAfter(new IterableChangeRecord_(item,itemTrackBy),previousRecord,index),record}_verifyReinsertion(record,item,itemTrackBy,index){let reinsertRecord=null===this._unlinkedRecords?null:this._unlinkedRecords.get(itemTrackBy,null);return null!==reinsertRecord?record=this._reinsertAfter(reinsertRecord,record._prev,index):record.currentIndex!=index&&(record.currentIndex=index,this._addToMoves(record,index)),record}_truncate(record){for(;null!==record;){const nextRecord=record._next;this._addToRemovals(this._unlink(record)),record=nextRecord}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(record,prevRecord,index){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(record);const prev=record._prevRemoved,next=record._nextRemoved;return null===prev?this._removalsHead=next:prev._nextRemoved=next,null===next?this._removalsTail=prev:next._prevRemoved=prev,this._insertAfter(record,prevRecord,index),this._addToMoves(record,index),record}_moveAfter(record,prevRecord,index){return this._unlink(record),this._insertAfter(record,prevRecord,index),this._addToMoves(record,index),record}_addAfter(record,prevRecord,index){return this._insertAfter(record,prevRecord,index),this._additionsTail=null===this._additionsTail?this._additionsHead=record:this._additionsTail._nextAdded=record,record}_insertAfter(record,prevRecord,index){const next=null===prevRecord?this._itHead:prevRecord._next;return record._next=next,record._prev=prevRecord,null===next?this._itTail=record:next._prev=record,null===prevRecord?this._itHead=record:prevRecord._next=record,null===this._linkedRecords&&(this._linkedRecords=new _DuplicateMap),this._linkedRecords.put(record),record.currentIndex=index,record}_remove(record){return this._addToRemovals(this._unlink(record))}_unlink(record){null!==this._linkedRecords&&this._linkedRecords.remove(record);const prev=record._prev,next=record._next;return null===prev?this._itHead=next:prev._next=next,null===next?this._itTail=prev:next._prev=prev,record}_addToMoves(record,toIndex){return record.previousIndex===toIndex||(this._movesTail=null===this._movesTail?this._movesHead=record:this._movesTail._nextMoved=record),record}_addToRemovals(record){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _DuplicateMap),this._unlinkedRecords.put(record),record.currentIndex=null,record._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=record,record._prevRemoved=null):(record._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=record),record}_addIdentityChange(record,item){return record.item=item,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=record:this._identityChangesTail._nextIdentityChange=record,record}}__name(DefaultIterableDiffer,"DefaultIterableDiffer");class IterableChangeRecord_{constructor(item,trackById){this.item=item,this.trackById=trackById,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}__name(IterableChangeRecord_,"IterableChangeRecord_");class _DuplicateItemRecordList{constructor(){this._head=null,this._tail=null}add(record){null===this._head?(this._head=this._tail=record,record._nextDup=null,record._prevDup=null):(this._tail._nextDup=record,record._prevDup=this._tail,record._nextDup=null,this._tail=record)}get(trackById,atOrAfterIndex){let record;for(record=this._head;null!==record;record=record._nextDup)if((null===atOrAfterIndex||atOrAfterIndex<=record.currentIndex)&&Object.is(record.trackById,trackById))return record;return null}remove(record){const prev=record._prevDup,next=record._nextDup;return null===prev?this._head=next:prev._nextDup=next,null===next?this._tail=prev:next._prevDup=prev,null===this._head}}__name(_DuplicateItemRecordList,"_DuplicateItemRecordList");class _DuplicateMap{constructor(){this.map=new Map}put(record){const key=record.trackById;let duplicates=this.map.get(key);duplicates||(duplicates=new _DuplicateItemRecordList,this.map.set(key,duplicates)),duplicates.add(record)}get(trackById,atOrAfterIndex){const recordList=this.map.get(trackById);return recordList?recordList.get(trackById,atOrAfterIndex):null}remove(record){const key=record.trackById;return this.map.get(key).remove(record)&&this.map.delete(key),record}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function getPreviousIndex(item,addRemoveOffset,moveOffsets){const previousIndex=item.previousIndex;if(null===previousIndex)return previousIndex;let moveOffset=0;return moveOffsets&&previousIndex<moveOffsets.length&&(moveOffset=moveOffsets[previousIndex]),previousIndex+addRemoveOffset+moveOffset}__name(_DuplicateMap,"_DuplicateMap"),__name(getPreviousIndex,"getPreviousIndex");class DefaultKeyValueDifferFactory{constructor(){}supports(obj){return obj instanceof Map||isJsObject(obj)}create(){return new DefaultKeyValueDiffer}}__name(DefaultKeyValueDifferFactory,"DefaultKeyValueDifferFactory");class DefaultKeyValueDiffer{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(fn){let record;for(record=this._mapHead;null!==record;record=record._next)fn(record)}forEachPreviousItem(fn){let record;for(record=this._previousMapHead;null!==record;record=record._nextPrevious)fn(record)}forEachChangedItem(fn){let record;for(record=this._changesHead;null!==record;record=record._nextChanged)fn(record)}forEachAddedItem(fn){let record;for(record=this._additionsHead;null!==record;record=record._nextAdded)fn(record)}forEachRemovedItem(fn){let record;for(record=this._removalsHead;null!==record;record=record._nextRemoved)fn(record)}diff(map){if(map){if(!(map instanceof Map||isJsObject(map)))throw new RuntimeError(900,!1)}else map=new Map;return this.check(map)?this:null}onDestroy(){}check(map){this._reset();let insertBefore=this._mapHead;if(this._appendAfter=null,this._forEach(map,(value,key)=>{if(insertBefore&&insertBefore.key===key)this._maybeAddToChanges(insertBefore,value),this._appendAfter=insertBefore,insertBefore=insertBefore._next;else{const record=this._getOrCreateRecordForKey(key,value);insertBefore=this._insertBeforeOrAppend(insertBefore,record)}}),insertBefore){insertBefore._prev&&(insertBefore._prev._next=null),this._removalsHead=insertBefore;for(let record=insertBefore;null!==record;record=record._nextRemoved)record===this._mapHead&&(this._mapHead=null),this._records.delete(record.key),record._nextRemoved=record._next,record.previousValue=record.currentValue,record.currentValue=null,record._prev=null,record._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(before,record){if(before){const prev=before._prev;return record._next=before,record._prev=prev,before._prev=record,prev&&(prev._next=record),before===this._mapHead&&(this._mapHead=record),this._appendAfter=before,before}return this._appendAfter?(this._appendAfter._next=record,record._prev=this._appendAfter):this._mapHead=record,this._appendAfter=record,null}_getOrCreateRecordForKey(key,value){if(this._records.has(key)){const record2=this._records.get(key);this._maybeAddToChanges(record2,value);const prev=record2._prev,next=record2._next;return prev&&(prev._next=next),next&&(next._prev=prev),record2._next=null,record2._prev=null,record2}const record=new KeyValueChangeRecord_(key);return this._records.set(key,record),record.currentValue=value,this._addToAdditions(record),record}_reset(){if(this.isDirty){let record;for(this._previousMapHead=this._mapHead,record=this._previousMapHead;null!==record;record=record._next)record._nextPrevious=record._next;for(record=this._changesHead;null!==record;record=record._nextChanged)record.previousValue=record.currentValue;for(record=this._additionsHead;null!=record;record=record._nextAdded)record.previousValue=record.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(record,newValue){Object.is(newValue,record.currentValue)||(record.previousValue=record.currentValue,record.currentValue=newValue,this._addToChanges(record))}_addToAdditions(record){null===this._additionsHead?this._additionsHead=this._additionsTail=record:(this._additionsTail._nextAdded=record,this._additionsTail=record)}_addToChanges(record){null===this._changesHead?this._changesHead=this._changesTail=record:(this._changesTail._nextChanged=record,this._changesTail=record)}_forEach(obj,fn){obj instanceof Map?obj.forEach(fn):Object.keys(obj).forEach(k=>fn(obj[k],k))}}__name(DefaultKeyValueDiffer,"DefaultKeyValueDiffer");class KeyValueChangeRecord_{constructor(key){this.key=key,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function defaultIterableDiffersFactory(){return new IterableDiffers([new DefaultIterableDifferFactory])}__name(KeyValueChangeRecord_,"KeyValueChangeRecord_"),__name(defaultIterableDiffersFactory,"defaultIterableDiffersFactory");let IterableDiffers=(()=>{class IterableDiffers2{constructor(factories){this.factories=factories}static create(factories,parent){if(null!=parent){const copied=parent.factories.slice();factories=factories.concat(copied)}return new IterableDiffers2(factories)}static extend(factories){return{provide:IterableDiffers2,useFactory:parent=>IterableDiffers2.create(factories,parent||defaultIterableDiffersFactory()),deps:[[IterableDiffers2,new SkipSelf,new Optional2]]}}find(iterable){const factory=this.factories.find(f=>f.supports(iterable));if(null!=factory)return factory;throw new RuntimeError(901,!1)}}return __name(IterableDiffers2,"IterableDiffers"),IterableDiffers2.\u0275prov=\u0275\u0275defineInjectable({token:IterableDiffers2,providedIn:"root",factory:defaultIterableDiffersFactory}),IterableDiffers2})();function defaultKeyValueDiffersFactory(){return new KeyValueDiffers([new DefaultKeyValueDifferFactory])}__name(function getTypeNameForDebugging(type){return type.name||typeof type},"getTypeNameForDebugging"),__name(defaultKeyValueDiffersFactory,"defaultKeyValueDiffersFactory");let KeyValueDiffers=(()=>{class KeyValueDiffers2{constructor(factories){this.factories=factories}static create(factories,parent){if(parent){const copied=parent.factories.slice();factories=factories.concat(copied)}return new KeyValueDiffers2(factories)}static extend(factories){return{provide:KeyValueDiffers2,useFactory:parent=>KeyValueDiffers2.create(factories,parent||defaultKeyValueDiffersFactory()),deps:[[KeyValueDiffers2,new SkipSelf,new Optional2]]}}find(kv){const factory=this.factories.find(f=>f.supports(kv));if(factory)return factory;throw new RuntimeError(901,!1)}}return __name(KeyValueDiffers2,"KeyValueDiffers"),KeyValueDiffers2.\u0275prov=\u0275\u0275defineInjectable({token:KeyValueDiffers2,providedIn:"root",factory:defaultKeyValueDiffersFactory}),KeyValueDiffers2})();const platformCore=createPlatformFactory(null,"core",[]);let ApplicationModule=(()=>{class ApplicationModule2{constructor(appRef){}}return __name(ApplicationModule2,"ApplicationModule"),ApplicationModule2.\u0275fac=__name(function(t){return new(t||ApplicationModule2)(\u0275\u0275inject2(ApplicationRef2))},"ApplicationModule_Factory"),ApplicationModule2.\u0275mod=\u0275\u0275defineNgModule({type:ApplicationModule2}),ApplicationModule2.\u0275inj=\u0275\u0275defineInjector({}),ApplicationModule2})();class SerializedViewCollection{constructor(){this.views=[],this.indexByContent=new Map}add(serializedView){const viewAsString=JSON.stringify(serializedView);if(!this.indexByContent.has(viewAsString)){const index=this.views.length;return this.views.push(serializedView),this.indexByContent.set(viewAsString,index),index}return this.indexByContent.get(viewAsString)}getAll(){return this.views}}__name(SerializedViewCollection,"SerializedViewCollection");let tViewSsrId=0;function getSsrId(tView){return tView.ssrId||(tView.ssrId="t"+tViewSsrId++),tView.ssrId}function calcNumRootNodes(tView,lView,tNode){const rootNodes=[];return collectNativeNodes(tView,lView,tNode,rootNodes),rootNodes.length}function serializeLContainer(lContainer,context){const views=[];let lastViewAsString="";for(let i=CONTAINER_HEADER_OFFSET;i<lContainer.length;i++){let childLView=lContainer[i];isRootView(childLView)&&(childLView=childLView[HEADER_OFFSET]);const childTView=childLView[TVIEW];let template,numRootNodes=0;1===childTView.type?(template=childTView.ssrId,numRootNodes=1):(template=getSsrId(childTView),numRootNodes=calcNumRootNodes(childTView,childLView,childTView.firstChild));const view={[TEMPLATE_ID]:template,[NUM_ROOT_NODES]:numRootNodes,...serializeLView(lContainer[i],context)},currentViewAsString=JSON.stringify(view);if(views.length>0&&currentViewAsString===lastViewAsString){const previousView=views[views.length-1];previousView[MULTIPLIER]??=1,previousView[MULTIPLIER]++}else lastViewAsString=currentViewAsString,views.push(view)}return views}function appendSerializedNodePath(ngh,tNode,lView){const noOffsetIndex=tNode.index-HEADER_OFFSET;ngh[NODES]??={},ngh[NODES][noOffsetIndex]=calcPathForNode(tNode,lView)}function appendDisconnectedNodeIndex(ngh,tNode){const noOffsetIndex=tNode.index-HEADER_OFFSET;ngh[DISCONNECTED_NODES]??=[],ngh[DISCONNECTED_NODES].includes(noOffsetIndex)||ngh[DISCONNECTED_NODES].push(noOffsetIndex)}function serializeLView(lView,context){const ngh={},tView=lView[TVIEW];for(let i=HEADER_OFFSET;i<tView.bindingStartIndex;i++){const tNode=tView.data[i],noOffsetIndex=i-HEADER_OFFSET;if(tNode){if(isDisconnectedNode(tNode,lView)&&isContentProjectedNode(tNode)){appendDisconnectedNodeIndex(ngh,tNode);continue}if(Array.isArray(tNode.projection))for(const projectionHeadTNode of tNode.projection)if(projectionHeadTNode){if(Array.isArray(projectionHeadTNode))throw unsupportedProjectionOfDomNodes(unwrapRNode(lView[i]));!isProjectionTNode(projectionHeadTNode)&&!isInSkipHydrationBlock(projectionHeadTNode)&&(isDisconnectedNode(projectionHeadTNode,lView)?appendDisconnectedNodeIndex(ngh,projectionHeadTNode):appendSerializedNodePath(ngh,projectionHeadTNode,lView))}if(isLContainer(lView[i])){const embeddedTView=tNode.tView;null!==embeddedTView&&(ngh[TEMPLATES]??={},ngh[TEMPLATES][noOffsetIndex]=getSsrId(embeddedTView));const hostNode=lView[i][HOST];if(Array.isArray(hostNode)){const targetNode=unwrapRNode(hostNode);targetNode.hasAttribute(SKIP_HYDRATION_ATTR_NAME)||annotateHostElementForHydration(targetNode,hostNode,context)}ngh[CONTAINERS]??={},ngh[CONTAINERS][noOffsetIndex]=serializeLContainer(lView[i],context)}else if(Array.isArray(lView[i])){const targetNode=unwrapRNode(lView[i][HOST]);targetNode.hasAttribute(SKIP_HYDRATION_ATTR_NAME)||annotateHostElementForHydration(targetNode,lView[i],context)}else if(8&tNode.type)ngh[ELEMENT_CONTAINERS]??={},ngh[ELEMENT_CONTAINERS][noOffsetIndex]=calcNumRootNodes(tView,lView,tNode.child);else if(16&tNode.type){let nextTNode=tNode.next;for(;null!==nextTNode&&16&nextTNode.type;)nextTNode=nextTNode.next;nextTNode&&!isInSkipHydrationBlock(nextTNode)&&appendSerializedNodePath(ngh,nextTNode,lView)}else{if(1&tNode.type){const rNode=unwrapRNode(lView[i]);""===rNode.textContent?context.corruptedTextNodes.set(rNode,"ngetn"):rNode.nextSibling?.nodeType===Node.TEXT_NODE&&context.corruptedTextNodes.set(rNode,"ngtns")}tNode.projectionNext&&tNode.projectionNext!==tNode.next&&!isInSkipHydrationBlock(tNode.projectionNext)&&appendSerializedNodePath(ngh,tNode.projectionNext,lView)}}}return ngh}function componentUsesShadowDomEncapsulation(lView){const instance=lView[CONTEXT];return!!instance?.constructor&&getComponentDef(instance.constructor)?.encapsulation===ViewEncapsulation$1.ShadowDom}function annotateHostElementForHydration(element,lView,context){const renderer=lView[RENDERER];if(32==(32&lView[FLAGS])||componentUsesShadowDomEncapsulation(lView))renderer.setAttribute(element,SKIP_HYDRATION_ATTR_NAME,"");else{const ngh=serializeLView(lView,context),index=context.serializedViewCollection.add(ngh);renderer.setAttribute(element,NGH_ATTR_NAME,index.toString())}}function insertCorruptedTextNodeMarkers(corruptedTextNodes,doc){for(const[textNode,marker]of corruptedTextNodes)textNode.after(doc.createComment(marker))}function isContentProjectedNode(tNode){let currentTNode=tNode;for(;null!=currentTNode;){if(isComponentHost(currentTNode))return!0;currentTNode=currentTNode.parent}return!1}function isDisconnectedNode(tNode,lView){return!(16&tNode.type||!lView[tNode.index]||unwrapRNode(lView[tNode.index]).isConnected)}__name(getSsrId,"getSsrId"),__name(calcNumRootNodes,"calcNumRootNodes"),__name(function annotateForHydration(appRef,doc){const serializedViewCollection=new SerializedViewCollection,corruptedTextNodes=new Map,viewRefs=appRef._views;for(const viewRef of viewRefs){const lView=getComponentLViewForHydration(viewRef);if(null!==lView){const hostElement=lView[HOST];hostElement&&!hostElement.hasAttribute(SKIP_HYDRATION_ATTR_NAME)&&(annotateHostElementForHydration(hostElement,lView,{serializedViewCollection,corruptedTextNodes}),insertCorruptedTextNodeMarkers(corruptedTextNodes,doc))}}const serializedViews=serializedViewCollection.getAll();appRef.injector.get(TransferState2).set(NGH_DATA_KEY,serializedViews)},"annotateForHydration"),__name(serializeLContainer,"serializeLContainer"),__name(appendSerializedNodePath,"appendSerializedNodePath"),__name(appendDisconnectedNodeIndex,"appendDisconnectedNodeIndex"),__name(serializeLView,"serializeLView"),__name(componentUsesShadowDomEncapsulation,"componentUsesShadowDomEncapsulation"),__name(annotateHostElementForHydration,"annotateHostElementForHydration"),__name(insertCorruptedTextNodeMarkers,"insertCorruptedTextNodeMarkers"),__name(isContentProjectedNode,"isContentProjectedNode"),__name(isDisconnectedNode,"isDisconnectedNode");let InitialRenderPendingTasks=(()=>{class InitialRenderPendingTasks2{get whenAllTasksComplete(){return 0===this.collection.size&&this.complete(),this.promise}constructor(){this.taskId=0,this.collection=new Set,this.ngZone=inject2(NgZone2),this.completed=!1,this.ngZone.runOutsideAngular(()=>{this.promise=new Promise(resolve=>{this.resolve=resolve})})}add(){if(this.completed)return-1;const taskId=this.taskId++;return this.collection.add(taskId),taskId}remove(taskId){this.completed||(this.collection.delete(taskId),0===this.collection.size&&this.complete())}ngOnDestroy(){this.complete(),this.collection.clear()}complete(){this.completed=!0,this.resolve()}}return __name(InitialRenderPendingTasks2,"InitialRenderPendingTasks"),InitialRenderPendingTasks2.\u0275fac=__name(function(t){return new(t||InitialRenderPendingTasks2)},"InitialRenderPendingTasks_Factory"),InitialRenderPendingTasks2.\u0275prov=\u0275\u0275defineInjectable({token:InitialRenderPendingTasks2,factory:InitialRenderPendingTasks2.\u0275fac,providedIn:"root"}),InitialRenderPendingTasks2})(),isHydrationSupportEnabled=!1;function enableHydrationRuntimeSupport(){isHydrationSupportEnabled||(isHydrationSupportEnabled=!0,enableRetrieveHydrationInfoImpl(),enableLocateOrCreateElementNodeImpl(),enableLocateOrCreateTextNodeImpl(),enableLocateOrCreateElementContainerNodeImpl(),enableLocateOrCreateContainerAnchorImpl(),enableLocateOrCreateContainerRefImpl(),enableFindMatchingDehydratedViewImpl(),enableApplyRootElementTransformImpl())}function isBrowser(){return"browser"===inject2(PLATFORM_ID2)}function whenStable(appRef,pendingTasks,injector){const isStablePromise=appRef.isStable.pipe(first(isStable=>isStable)).toPromise();return Promise.allSettled([isStablePromise,pendingTasks.whenAllTasksComplete])}function coerceToBoolean(value){return"boolean"==typeof value?value:null!=value&&"false"!==value}function getFactoryKind(target){switch(target){case null.Directive:return"directive";case null.Component:return"component";case null.Injectable:return"injectable";case null.Pipe:return"pipe";case null.NgModule:return"NgModule"}}function reflectComponentType(component){const componentDef=getComponentDef(component);if(!componentDef)return null;const factory=new ComponentFactory(componentDef);return{get selector(){return factory.selector},get type(){return factory.componentType},get inputs(){return factory.inputs},get outputs(){return factory.outputs},get ngContentSelectors(){return factory.ngContentSelectors},get isStandalone(){return componentDef.standalone}}}__name(enableHydrationRuntimeSupport,"enableHydrationRuntimeSupport"),__name(isBrowser,"isBrowser"),__name(function printHydrationStats(injector){injector.get(Console).log(`Angular hydrated ${(!1).hydratedComponents} component(s) and ${(!1).hydratedNodes} node(s), ${(!1).componentsSkippedHydration} component(s) were skipped. Note: this feature is in Developer Preview mode. Learn more at https://angular.io/guide/hydration.`)},"printHydrationStats"),__name(whenStable,"whenStable"),__name(function withDomHydration(){return makeEnvironmentProviders2([{provide:IS_HYDRATION_DOM_REUSE_ENABLED,useFactory:()=>{let isEnabled=!0;return isBrowser()&&(isEnabled=!!inject2(TransferState2,{optional:!0})?.get(NGH_DATA_KEY,null)),isEnabled&&inject2(ENABLED_SSR_FEATURES).add("hydration"),isEnabled}},{provide:ENVIRONMENT_INITIALIZER2,useValue:()=>{isBrowser()&&inject2(IS_HYDRATION_DOM_REUSE_ENABLED)&&enableHydrationRuntimeSupport()},multi:!0},{provide:PRESERVE_HOST_CONTENT,useFactory:()=>isBrowser()&&inject2(IS_HYDRATION_DOM_REUSE_ENABLED)},{provide:APP_BOOTSTRAP_LISTENER2,useFactory:()=>{if(isBrowser()&&inject2(IS_HYDRATION_DOM_REUSE_ENABLED)){const appRef=inject2(ApplicationRef2),pendingTasks=inject2(InitialRenderPendingTasks);return inject2(Injector2),()=>{whenStable(appRef,pendingTasks).then(()=>{cleanupDehydratedViews(appRef)})}}return()=>{}},multi:!0}])},"withDomHydration"),__name(function logWarningOnStableTimedout(time,console2){console2.warn(formatRuntimeError(-506,`Angular hydration expected the ApplicationRef.isStable() to emit \`true\`, but it didn't happen within ${time}ms. Angular hydration logic depends on the application becoming stable as a signal to complete hydration process.`))},"logWarningOnStableTimedout"),__name(coerceToBoolean,"coerceToBoolean"),__name(function \u0275\u0275ngDeclareDirective(decl){return getCompilerFacade().compileDirectiveDeclaration(angularCoreEnv,`ng:///${decl.type.name}/\u0275fac.js`,decl)},"\u0275\u0275ngDeclareDirective"),__name(function \u0275\u0275ngDeclareClassMetadata(decl){setClassMetadata(decl.type,decl.decorators,decl.ctorParameters??null,decl.propDecorators??null)},"\u0275\u0275ngDeclareClassMetadata"),__name(function \u0275\u0275ngDeclareComponent(decl){return getCompilerFacade().compileComponentDeclaration(angularCoreEnv,`ng:///${decl.type.name}/\u0275cmp.js`,decl)},"\u0275\u0275ngDeclareComponent"),__name(function \u0275\u0275ngDeclareFactory(decl){return getCompilerFacade(getFactoryKind(decl.target)).compileFactoryDeclaration(angularCoreEnv,`ng:///${decl.type.name}/\u0275fac.js`,decl)},"\u0275\u0275ngDeclareFactory"),__name(getFactoryKind,"getFactoryKind"),__name(function \u0275\u0275ngDeclareInjectable(decl){return getCompilerFacade().compileInjectableDeclaration(angularCoreEnv,`ng:///${decl.type.name}/\u0275prov.js`,decl)},"\u0275\u0275ngDeclareInjectable"),__name(function \u0275\u0275ngDeclareInjector(decl){return getCompilerFacade().compileInjectorDeclaration(angularCoreEnv,`ng:///${decl.type.name}/\u0275inj.js`,decl)},"\u0275\u0275ngDeclareInjector"),__name(function \u0275\u0275ngDeclareNgModule(decl){return getCompilerFacade().compileNgModuleDeclaration(angularCoreEnv,`ng:///${decl.type.name}/\u0275mod.js`,decl)},"\u0275\u0275ngDeclareNgModule"),__name(function \u0275\u0275ngDeclarePipe(decl){return getCompilerFacade().compilePipeDeclaration(angularCoreEnv,`ng:///${decl.type.name}/\u0275pipe.js`,decl)},"\u0275\u0275ngDeclarePipe"),__name(function createComponent(component,options){const componentDef=getComponentDef(component),elementInjector=options.elementInjector||getNullInjector();return new ComponentFactory(componentDef).create(elementInjector,options.projectableNodes,options.hostElement,options.environmentInjector)},"createComponent"),__name(reflectComponentType,"reflectComponentType"),__name(function mergeApplicationConfig(...configs){return configs.reduce((prev,curr)=>Object.assign(prev,curr,{providers:[...prev.providers,...curr.providers]}),{providers:[]})},"mergeApplicationConfig")},5030:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u5:()=>FormsModule});var core=__webpack_require__(2223),common=__webpack_require__(4755),from=__webpack_require__(2076),Observable2=__webpack_require__(9751),argsArgArrayOrObject=__webpack_require__(4742),innerFrom=__webpack_require__(8421),util_args=__webpack_require__(3269),OperatorSubscriber=__webpack_require__(5403),mapOneOrManyArgs=__webpack_require__(3268),createObject=__webpack_require__(1810);function forkJoin(...args){const resultSelector=(0,util_args.jO)(args),{args:sources,keys}=(0,argsArgArrayOrObject.D)(args),result=new Observable2.y(subscriber=>{const{length}=sources;if(!length)return void subscriber.complete();const values=new Array(length);let remainingCompletions=length,remainingEmissions=length;for(let sourceIndex=0;sourceIndex<length;sourceIndex++){let hasValue=!1;(0,innerFrom.Xf)(sources[sourceIndex]).subscribe((0,OperatorSubscriber.x)(subscriber,value=>{hasValue||(hasValue=!0,remainingEmissions--),values[sourceIndex]=value},()=>remainingCompletions--,void 0,()=>{(!remainingCompletions||!hasValue)&&(remainingEmissions||subscriber.next(keys?(0,createObject.n)(keys,values):values),subscriber.complete())}))}});return resultSelector?result.pipe((0,mapOneOrManyArgs.Z)(resultSelector)):result}__name(forkJoin,"forkJoin");var map=__webpack_require__(4004);let BaseControlValueAccessor=(()=>{class BaseControlValueAccessor2{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}setProperty(key,value){this._renderer.setProperty(this._elementRef.nativeElement,key,value)}registerOnTouched(fn){this.onTouched=fn}registerOnChange(fn){this.onChange=fn}setDisabledState(isDisabled){this.setProperty("disabled",isDisabled)}}return __name(BaseControlValueAccessor2,"BaseControlValueAccessor"),BaseControlValueAccessor2.\u0275fac=__name(function(t){return new(t||BaseControlValueAccessor2)(core.Y36(core.Qsj),core.Y36(core.SBq))},"BaseControlValueAccessor_Factory"),BaseControlValueAccessor2.\u0275dir=core.lG2({type:BaseControlValueAccessor2}),BaseControlValueAccessor2})(),BuiltInControlValueAccessor=(()=>{class BuiltInControlValueAccessor2 extends BaseControlValueAccessor{}return __name(BuiltInControlValueAccessor2,"BuiltInControlValueAccessor"),BuiltInControlValueAccessor2.\u0275fac=function(){let \u0275BuiltInControlValueAccessor_BaseFactory;return __name(function(t){return(\u0275BuiltInControlValueAccessor_BaseFactory||(\u0275BuiltInControlValueAccessor_BaseFactory=core.n5z(BuiltInControlValueAccessor2)))(t||BuiltInControlValueAccessor2)},"BuiltInControlValueAccessor_Factory")}(),BuiltInControlValueAccessor2.\u0275dir=core.lG2({type:BuiltInControlValueAccessor2,features:[core.qOj]}),BuiltInControlValueAccessor2})();const DEFAULT_VALUE_ACCESSOR={provide:new core.OlP("NgValueAccessor"),useExisting:(0,core.Gpc)(()=>DefaultValueAccessor),multi:!0};function _isAndroid(){const userAgent=(0,common.q)()?(0,common.q)().getUserAgent():"";return/android (\d+)/.test(userAgent.toLowerCase())}__name(_isAndroid,"_isAndroid");const COMPOSITION_BUFFER_MODE=new core.OlP("CompositionEventMode");let DefaultValueAccessor=(()=>{class DefaultValueAccessor2 extends BaseControlValueAccessor{constructor(renderer,elementRef,_compositionMode){super(renderer,elementRef),this._compositionMode=_compositionMode,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!_isAndroid())}writeValue(value){this.setProperty("value",value??"")}_handleInput(value){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(value)}_compositionStart(){this._composing=!0}_compositionEnd(value){this._composing=!1,this._compositionMode&&this.onChange(value)}}return __name(DefaultValueAccessor2,"DefaultValueAccessor"),DefaultValueAccessor2.\u0275fac=__name(function(t){return new(t||DefaultValueAccessor2)(core.Y36(core.Qsj),core.Y36(core.SBq),core.Y36(COMPOSITION_BUFFER_MODE,8))},"DefaultValueAccessor_Factory"),DefaultValueAccessor2.\u0275dir=core.lG2({type:DefaultValueAccessor2,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("input",__name(function($event){return ctx._handleInput($event.target.value)},"DefaultValueAccessor_input_HostBindingHandler"))("blur",__name(function(){return ctx.onTouched()},"DefaultValueAccessor_blur_HostBindingHandler"))("compositionstart",__name(function(){return ctx._compositionStart()},"DefaultValueAccessor_compositionstart_HostBindingHandler"))("compositionend",__name(function($event){return ctx._compositionEnd($event.target.value)},"DefaultValueAccessor_compositionend_HostBindingHandler"))},"DefaultValueAccessor_HostBindings"),features:[core._Bn([DEFAULT_VALUE_ACCESSOR]),core.qOj]}),DefaultValueAccessor2})();function isEmptyInputValue(value){return null==value||("string"==typeof value||Array.isArray(value))&&0===value.length}function hasValidLength(value){return null!=value&&"number"==typeof value.length}__name(isEmptyInputValue,"isEmptyInputValue"),__name(hasValidLength,"hasValidLength");const NG_VALIDATORS=new core.OlP("NgValidators"),NG_ASYNC_VALIDATORS=new core.OlP("NgAsyncValidators"),EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function minValidator(min){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(min))return null;const value=parseFloat(control.value);return!isNaN(value)&&value<min?{min:{min,actual:control.value}}:null}}function maxValidator(max){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(max))return null;const value=parseFloat(control.value);return!isNaN(value)&&value>max?{max:{max,actual:control.value}}:null}}function requiredValidator(control){return isEmptyInputValue(control.value)?{required:!0}:null}function requiredTrueValidator(control){return!0===control.value?null:{required:!0}}function emailValidator(control){return isEmptyInputValue(control.value)||EMAIL_REGEXP.test(control.value)?null:{email:!0}}function minLengthValidator(minLength){return control=>isEmptyInputValue(control.value)||!hasValidLength(control.value)?null:control.value.length<minLength?{minlength:{requiredLength:minLength,actualLength:control.value.length}}:null}function maxLengthValidator(maxLength){return control=>hasValidLength(control.value)&&control.value.length>maxLength?{maxlength:{requiredLength:maxLength,actualLength:control.value.length}}:null}function patternValidator(pattern){if(!pattern)return nullValidator;let regex,regexStr;return"string"==typeof pattern?(regexStr="","^"!==pattern.charAt(0)&&(regexStr+="^"),regexStr+=pattern,"$"!==pattern.charAt(pattern.length-1)&&(regexStr+="$"),regex=new RegExp(regexStr)):(regexStr=pattern.toString(),regex=pattern),control=>{if(isEmptyInputValue(control.value))return null;const value=control.value;return regex.test(value)?null:{pattern:{requiredPattern:regexStr,actualValue:value}}}}function nullValidator(control){return null}function isPresent(o){return null!=o}function toObservable(value){return(0,core.QGY)(value)?(0,from.D)(value):value}function mergeErrors(arrayOfErrors){let res={};return arrayOfErrors.forEach(errors=>{res=null!=errors?{...res,...errors}:res}),0===Object.keys(res).length?null:res}function executeValidators(control,validators){return validators.map(validator=>validator(control))}function isValidatorFn(validator){return!validator.validate}function normalizeValidators(validators){return validators.map(validator=>isValidatorFn(validator)?validator:c=>validator.validate(c))}function compose(validators){if(!validators)return null;const presentValidators=validators.filter(isPresent);return 0==presentValidators.length?null:function(control){return mergeErrors(executeValidators(control,presentValidators))}}function composeValidators(validators){return null!=validators?compose(normalizeValidators(validators)):null}function composeAsync(validators){if(!validators)return null;const presentValidators=validators.filter(isPresent);return 0==presentValidators.length?null:function(control){return forkJoin(executeValidators(control,presentValidators).map(toObservable)).pipe((0,map.U)(mergeErrors))}}function composeAsyncValidators(validators){return null!=validators?composeAsync(normalizeValidators(validators)):null}function mergeValidators(controlValidators,dirValidator){return null===controlValidators?[dirValidator]:Array.isArray(controlValidators)?[...controlValidators,dirValidator]:[controlValidators,dirValidator]}function getControlValidators(control){return control._rawValidators}function getControlAsyncValidators(control){return control._rawAsyncValidators}function makeValidatorsArray(validators){return validators?Array.isArray(validators)?validators:[validators]:[]}function hasValidator(validators,validator){return Array.isArray(validators)?validators.includes(validator):validators===validator}function addValidators(validators,currentValidators){const current=makeValidatorsArray(currentValidators);return makeValidatorsArray(validators).forEach(v=>{hasValidator(current,v)||current.push(v)}),current}function removeValidators(validators,currentValidators){return makeValidatorsArray(currentValidators).filter(v=>!hasValidator(validators,v))}__name(class Validators{static min(min){return minValidator(min)}static max(max){return maxValidator(max)}static required(control){return requiredValidator(control)}static requiredTrue(control){return requiredTrueValidator(control)}static email(control){return emailValidator(control)}static minLength(minLength){return minLengthValidator(minLength)}static maxLength(maxLength){return maxLengthValidator(maxLength)}static pattern(pattern){return patternValidator(pattern)}static nullValidator(control){return null}static compose(validators){return compose(validators)}static composeAsync(validators){return composeAsync(validators)}},"Validators"),__name(minValidator,"minValidator"),__name(maxValidator,"maxValidator"),__name(requiredValidator,"requiredValidator"),__name(requiredTrueValidator,"requiredTrueValidator"),__name(emailValidator,"emailValidator"),__name(minLengthValidator,"minLengthValidator"),__name(maxLengthValidator,"maxLengthValidator"),__name(patternValidator,"patternValidator"),__name(nullValidator,"nullValidator"),__name(isPresent,"isPresent"),__name(toObservable,"toObservable"),__name(mergeErrors,"mergeErrors"),__name(executeValidators,"executeValidators"),__name(isValidatorFn,"isValidatorFn"),__name(normalizeValidators,"normalizeValidators"),__name(compose,"compose"),__name(composeValidators,"composeValidators"),__name(composeAsync,"composeAsync"),__name(composeAsyncValidators,"composeAsyncValidators"),__name(mergeValidators,"mergeValidators"),__name(getControlValidators,"getControlValidators"),__name(getControlAsyncValidators,"getControlAsyncValidators"),__name(makeValidatorsArray,"makeValidatorsArray"),__name(hasValidator,"hasValidator"),__name(addValidators,"addValidators"),__name(removeValidators,"removeValidators");class AbstractControlDirective{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(validators){this._rawValidators=validators||[],this._composedValidatorFn=composeValidators(this._rawValidators)}_setAsyncValidators(validators){this._rawAsyncValidators=validators||[],this._composedAsyncValidatorFn=composeAsyncValidators(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(fn){this._onDestroyCallbacks.push(fn)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(fn=>fn()),this._onDestroyCallbacks=[]}reset(value=void 0){this.control&&this.control.reset(value)}hasError(errorCode,path){return!!this.control&&this.control.hasError(errorCode,path)}getError(errorCode,path){return this.control?this.control.getError(errorCode,path):null}}__name(AbstractControlDirective,"AbstractControlDirective");class ControlContainer extends AbstractControlDirective{get formDirective(){return null}get path(){return null}}__name(ControlContainer,"ControlContainer");__name(class NgControl extends AbstractControlDirective{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},"NgControl");__name(class AbstractControlStatus{constructor(cd){this._cd=cd}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},"AbstractControlStatus");const formControlNameExample='\n  <div [formGroup]="myGroup">\n    <input formControlName="firstName">\n  </div>\n\n  In your class:\n\n  this.myGroup = new FormGroup({\n      firstName: new FormControl()\n  });',formGroupNameExample='\n  <div [formGroup]="myGroup">\n      <div formGroupName="person">\n        <input formControlName="firstName">\n      </div>\n  </div>\n\n  In your class:\n\n  this.myGroup = new FormGroup({\n      person: new FormGroup({ firstName: new FormControl() })\n  });',ngModelGroupExample='\n  <form>\n      <div ngModelGroup="person">\n        <input [(ngModel)]="person.name" name="firstName">\n      </div>\n  </form>';function ngModelWarning(directiveName){return`\n  It looks like you're using ngModel on the same form field as ${directiveName}.\n  Support for using the ngModel input property and ngModelChange event with\n  reactive form directives has been deprecated in Angular v6 and will be removed\n  in a future version of Angular.\n\n  For more information on this, see our API docs here:\n  https://angular.io/api/forms/${"formControl"===directiveName?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n  `}function describeKey(isFormGroup2,key){return isFormGroup2?`with name: '${key}'`:`at index: ${key}`}function pickValidators(validatorOrOpts){return(isOptionsObj(validatorOrOpts)?validatorOrOpts.validators:validatorOrOpts)||null}function coerceToValidator(validator){return Array.isArray(validator)?composeValidators(validator):validator||null}function pickAsyncValidators(asyncValidator,validatorOrOpts){return(isOptionsObj(validatorOrOpts)?validatorOrOpts.asyncValidators:asyncValidator)||null}function coerceToAsyncValidator(asyncValidator){return Array.isArray(asyncValidator)?composeAsyncValidators(asyncValidator):asyncValidator||null}function isOptionsObj(validatorOrOpts){return null!=validatorOrOpts&&!Array.isArray(validatorOrOpts)&&"object"==typeof validatorOrOpts}function assertControlPresent(parent,isGroup,key){const controls=parent.controls;if(!(isGroup?Object.keys(controls):controls).length)throw new core.vHH(1e3,"");if(!controls[key])throw new core.vHH(1001,"")}function assertAllValuesPresent(control,isGroup,value){control._forEachChild((_,key)=>{if(void 0===value[key])throw new core.vHH(1002,"")})}__name(function controlParentException(){return new core.vHH(1050,`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n    Example:\n\n    ${formControlNameExample}`)},"controlParentException"),__name(function ngModelGroupException(){return new core.vHH(1051,`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n      that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n      Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n      ${formGroupNameExample}\n\n      Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n      ${ngModelGroupExample}`)},"ngModelGroupException"),__name(function missingFormException(){return new core.vHH(1052,`formGroup expects a FormGroup instance. Please pass one in.\n\n      Example:\n\n      ${formControlNameExample}`)},"missingFormException"),__name(function groupParentException(){return new core.vHH(1053,`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n    directive and pass it an existing FormGroup instance (you can create one in your class).\n\n    Example:\n\n    ${formGroupNameExample}`)},"groupParentException"),__name(function arrayParentException(){return new core.vHH(1054,'formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      \n  <div [formGroup]="myGroup">\n    <div formArrayName="cities">\n      <div *ngFor="let city of cityArray.controls; index as i">\n        <input [formControlName]="i">\n      </div>\n    </div>\n  </div>\n\n  In your class:\n\n  this.cityArray = new FormArray([new FormControl(\'SF\')]);\n  this.myGroup = new FormGroup({\n    cities: this.cityArray\n  });')},"arrayParentException"),__name(ngModelWarning,"ngModelWarning"),__name(describeKey,"describeKey"),__name(function noControlsError(isFormGroup2){return`\n    There are no form controls registered with this ${isFormGroup2?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `},"noControlsError"),__name(function missingControlError(isFormGroup2,key){return`Cannot find form control ${describeKey(isFormGroup2,key)}`},"missingControlError"),__name(function missingControlValueError(isFormGroup2,key){return`Must supply a value for form control ${describeKey(isFormGroup2,key)}`},"missingControlValueError"),__name(pickValidators,"pickValidators"),__name(coerceToValidator,"coerceToValidator"),__name(pickAsyncValidators,"pickAsyncValidators"),__name(coerceToAsyncValidator,"coerceToAsyncValidator"),__name(isOptionsObj,"isOptionsObj"),__name(assertControlPresent,"assertControlPresent"),__name(assertAllValuesPresent,"assertAllValuesPresent");class AbstractControl{constructor(validators,asyncValidators){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(validators),this._assignAsyncValidators(asyncValidators)}get validator(){return this._composedValidatorFn}set validator(validatorFn){this._rawValidators=this._composedValidatorFn=validatorFn}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(asyncValidatorFn){this._rawAsyncValidators=this._composedAsyncValidatorFn=asyncValidatorFn}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(validators){this._assignValidators(validators)}setAsyncValidators(validators){this._assignAsyncValidators(validators)}addValidators(validators){this.setValidators(addValidators(validators,this._rawValidators))}addAsyncValidators(validators){this.setAsyncValidators(addValidators(validators,this._rawAsyncValidators))}removeValidators(validators){this.setValidators(removeValidators(validators,this._rawValidators))}removeAsyncValidators(validators){this.setAsyncValidators(removeValidators(validators,this._rawAsyncValidators))}hasValidator(validator){return hasValidator(this._rawValidators,validator)}hasAsyncValidator(validator){return hasValidator(this._rawAsyncValidators,validator)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(opts={}){this.touched=!0,this._parent&&!opts.onlySelf&&this._parent.markAsTouched(opts)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(control=>control.markAllAsTouched())}markAsUntouched(opts={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(control=>{control.markAsUntouched({onlySelf:!0})}),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}markAsDirty(opts={}){this.pristine=!1,this._parent&&!opts.onlySelf&&this._parent.markAsDirty(opts)}markAsPristine(opts={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(control=>{control.markAsPristine({onlySelf:!0})}),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}markAsPending(opts={}){this.status="PENDING",!1!==opts.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!opts.onlySelf&&this._parent.markAsPending(opts)}disable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(control=>{control.disable({...opts,onlySelf:!0})}),this._updateValue(),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...opts,skipPristineCheck}),this._onDisabledChange.forEach(changeFn=>changeFn(!0))}enable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status="VALID",this._forEachChild(control=>{control.enable({...opts,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent}),this._updateAncestors({...opts,skipPristineCheck}),this._onDisabledChange.forEach(changeFn=>changeFn(!1))}_updateAncestors(opts){this._parent&&!opts.onlySelf&&(this._parent.updateValueAndValidity(opts),opts.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(parent){this._parent=parent}getRawValue(){return this.value}updateValueAndValidity(opts={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),("VALID"===this.status||"PENDING"===this.status)&&this._runAsyncValidator(opts.emitEvent)),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!opts.onlySelf&&this._parent.updateValueAndValidity(opts)}_updateTreeValidity(opts={emitEvent:!0}){this._forEachChild(ctrl=>ctrl._updateTreeValidity(opts)),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(emitEvent){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const obs=toObservable(this.asyncValidator(this));this._asyncValidationSubscription=obs.subscribe(errors=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(errors,{emitEvent})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(errors,opts={}){this.errors=errors,this._updateControlsErrors(!1!==opts.emitEvent)}get(path){let currPath=path;return null==currPath||(Array.isArray(currPath)||(currPath=currPath.split(".")),0===currPath.length)?null:currPath.reduce((control,name)=>control&&control._find(name),this)}getError(errorCode,path){const control=path?this.get(path):this;return control&&control.errors?control.errors[errorCode]:null}hasError(errorCode,path){return!!this.getError(errorCode,path)}get root(){let x=this;for(;x._parent;)x=x._parent;return x}_updateControlsErrors(emitEvent){this.status=this._calculateStatus(),emitEvent&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(emitEvent)}_initObservables(){this.valueChanges=new core.vpe,this.statusChanges=new core.vpe}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(status){return this._anyControls(control=>control.status===status)}_anyControlsDirty(){return this._anyControls(control=>control.dirty)}_anyControlsTouched(){return this._anyControls(control=>control.touched)}_updatePristine(opts={}){this.pristine=!this._anyControlsDirty(),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}_updateTouched(opts={}){this.touched=this._anyControlsTouched(),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}_registerOnCollectionChange(fn){this._onCollectionChange=fn}_setUpdateStrategy(opts){isOptionsObj(opts)&&null!=opts.updateOn&&(this._updateOn=opts.updateOn)}_parentMarkedDirty(onlySelf){return!onlySelf&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(name){return null}_assignValidators(validators){this._rawValidators=Array.isArray(validators)?validators.slice():validators,this._composedValidatorFn=coerceToValidator(this._rawValidators)}_assignAsyncValidators(validators){this._rawAsyncValidators=Array.isArray(validators)?validators.slice():validators,this._composedAsyncValidatorFn=coerceToAsyncValidator(this._rawAsyncValidators)}}__name(AbstractControl,"AbstractControl");__name(class FormGroup extends AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(name,control){return this.controls[name]?this.controls[name]:(this.controls[name]=control,control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange),control)}addControl(name,control,options={}){this.registerControl(name,control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}removeControl(name,options={}){this.controls[name]&&this.controls[name]._registerOnCollectionChange(()=>{}),delete this.controls[name],this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}setControl(name,control,options={}){this.controls[name]&&this.controls[name]._registerOnCollectionChange(()=>{}),delete this.controls[name],control&&this.registerControl(name,control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}contains(controlName){return this.controls.hasOwnProperty(controlName)&&this.controls[controlName].enabled}setValue(value,options={}){assertAllValuesPresent(this,0,value),Object.keys(value).forEach(name=>{assertControlPresent(this,!0,name),this.controls[name].setValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}patchValue(value,options={}){null!=value&&(Object.keys(value).forEach(name=>{const control=this.controls[name];control&&control.patchValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options))}reset(value={},options={}){this._forEachChild((control,name)=>{control.reset(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this._reduceChildren({},(acc,control,name)=>(acc[name]=control.getRawValue(),acc))}_syncPendingControls(){let subtreeUpdated=this._reduceChildren(!1,(updated,child)=>!!child._syncPendingControls()||updated);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_forEachChild(cb){Object.keys(this.controls).forEach(key=>{const control=this.controls[key];control&&cb(control,key)})}_setUpControls(){this._forEachChild(control=>{control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(condition){for(const[controlName,control]of Object.entries(this.controls))if(this.contains(controlName)&&condition(control))return!0;return!1}_reduceValue(){return this._reduceChildren({},(acc2,control,name)=>((control.enabled||this.disabled)&&(acc2[name]=control.value),acc2))}_reduceChildren(initValue,fn){let res=initValue;return this._forEachChild((control,name)=>{res=fn(res,control,name)}),res}_allControlsDisabled(){for(const controlName of Object.keys(this.controls))if(this.controls[controlName].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(name){return this.controls.hasOwnProperty(name)?this.controls[name]:null}},"FormGroup");__name(class FormRecord extends(null){},"FormRecord");const CALL_SET_DISABLED_STATE=new core.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>setDisabledStateDefault}),setDisabledStateDefault="always";function controlPath(name,parent){return[...parent.path,name]}function setUpControl(control,dir,callSetDisabledState=setDisabledStateDefault){setUpValidators(control,dir),dir.valueAccessor.writeValue(control.value),(control.disabled||"always"===callSetDisabledState)&&dir.valueAccessor.setDisabledState?.(control.disabled),setUpViewChangePipeline(control,dir),setUpModelChangePipeline(control,dir),setUpBlurPipeline(control,dir),setUpDisabledChangeHandler(control,dir)}function cleanUpControl(control,dir,validateControlPresenceOnChange=!0){const noop=__name(()=>{},"noop");dir.valueAccessor&&(dir.valueAccessor.registerOnChange(noop),dir.valueAccessor.registerOnTouched(noop)),cleanUpValidators(control,dir),control&&(dir._invokeOnDestroyCallbacks(),control._registerOnCollectionChange(()=>{}))}function registerOnValidatorChange(validators,onChange){validators.forEach(validator=>{validator.registerOnValidatorChange&&validator.registerOnValidatorChange(onChange)})}function setUpDisabledChangeHandler(control,dir){if(dir.valueAccessor.setDisabledState){const onDisabledChange=__name(isDisabled=>{dir.valueAccessor.setDisabledState(isDisabled)},"onDisabledChange");control.registerOnDisabledChange(onDisabledChange),dir._registerOnDestroy(()=>{control._unregisterOnDisabledChange(onDisabledChange)})}}function setUpValidators(control,dir){const validators=getControlValidators(control);null!==dir.validator?control.setValidators(mergeValidators(validators,dir.validator)):"function"==typeof validators&&control.setValidators([validators]);const asyncValidators=getControlAsyncValidators(control);null!==dir.asyncValidator?control.setAsyncValidators(mergeValidators(asyncValidators,dir.asyncValidator)):"function"==typeof asyncValidators&&control.setAsyncValidators([asyncValidators]);const onValidatorChange=__name(()=>control.updateValueAndValidity(),"onValidatorChange");registerOnValidatorChange(dir._rawValidators,onValidatorChange),registerOnValidatorChange(dir._rawAsyncValidators,onValidatorChange)}function cleanUpValidators(control,dir){let isControlUpdated=!1;if(null!==control){if(null!==dir.validator){const validators=getControlValidators(control);if(Array.isArray(validators)&&validators.length>0){const updatedValidators=validators.filter(validator=>validator!==dir.validator);updatedValidators.length!==validators.length&&(isControlUpdated=!0,control.setValidators(updatedValidators))}}if(null!==dir.asyncValidator){const asyncValidators=getControlAsyncValidators(control);if(Array.isArray(asyncValidators)&&asyncValidators.length>0){const updatedAsyncValidators=asyncValidators.filter(asyncValidator=>asyncValidator!==dir.asyncValidator);updatedAsyncValidators.length!==asyncValidators.length&&(isControlUpdated=!0,control.setAsyncValidators(updatedAsyncValidators))}}}const noop=__name(()=>{},"noop");return registerOnValidatorChange(dir._rawValidators,noop),registerOnValidatorChange(dir._rawAsyncValidators,noop),isControlUpdated}function setUpViewChangePipeline(control,dir){dir.valueAccessor.registerOnChange(newValue=>{control._pendingValue=newValue,control._pendingChange=!0,control._pendingDirty=!0,"change"===control.updateOn&&updateControl(control,dir)})}function setUpBlurPipeline(control,dir){dir.valueAccessor.registerOnTouched(()=>{control._pendingTouched=!0,"blur"===control.updateOn&&control._pendingChange&&updateControl(control,dir),"submit"!==control.updateOn&&control.markAsTouched()})}function updateControl(control,dir){control._pendingDirty&&control.markAsDirty(),control.setValue(control._pendingValue,{emitModelToViewChange:!1}),dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1}function setUpModelChangePipeline(control,dir){const onChange=__name((newValue,emitModelEvent)=>{dir.valueAccessor.writeValue(newValue),emitModelEvent&&dir.viewToModelUpdate(newValue)},"onChange");control.registerOnChange(onChange),dir._registerOnDestroy(()=>{control._unregisterOnChange(onChange)})}function setUpFormContainer(control,dir){setUpValidators(control,dir)}function cleanUpFormContainer(control,dir){return cleanUpValidators(control,dir)}function _throwError(dir,message){const messageEnd=_describeControlLocation(dir);throw new Error(`${message} ${messageEnd}`)}function _describeControlLocation(dir){const path=dir.path;return path&&path.length>1?`path: '${path.join(" -> ")}'`:path?.[0]?`name: '${path}'`:"unspecified name attribute"}function isBuiltInAccessor(valueAccessor){return Object.getPrototypeOf(valueAccessor.constructor)===BuiltInControlValueAccessor}function syncPendingControls(form,directives){form._syncPendingControls(),directives.forEach(dir=>{const control=dir.control;"submit"===control.updateOn&&control._pendingChange&&(dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1)})}function removeListItem$1(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}function removeListItem(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}function isFormControlState(formState){return"object"==typeof formState&&null!==formState&&2===Object.keys(formState).length&&"value"in formState&&"disabled"in formState}__name(controlPath,"controlPath"),__name(setUpControl,"setUpControl"),__name(cleanUpControl,"cleanUpControl"),__name(registerOnValidatorChange,"registerOnValidatorChange"),__name(setUpDisabledChangeHandler,"setUpDisabledChangeHandler"),__name(setUpValidators,"setUpValidators"),__name(cleanUpValidators,"cleanUpValidators"),__name(setUpViewChangePipeline,"setUpViewChangePipeline"),__name(setUpBlurPipeline,"setUpBlurPipeline"),__name(updateControl,"updateControl"),__name(setUpModelChangePipeline,"setUpModelChangePipeline"),__name(setUpFormContainer,"setUpFormContainer"),__name(cleanUpFormContainer,"cleanUpFormContainer"),__name(function _noControlError(dir){return _throwError(dir,"There is no FormControl instance attached to form control element with")},"_noControlError"),__name(_throwError,"_throwError"),__name(_describeControlLocation,"_describeControlLocation"),__name(function _throwMissingValueAccessorError(dir){const loc=_describeControlLocation(dir);throw new core.vHH(-1203,`No value accessor for form control ${loc}.`)},"_throwMissingValueAccessorError"),__name(function _throwInvalidValueAccessorError(dir){const loc=_describeControlLocation(dir);throw new core.vHH(1200,`Value accessor was not provided as an array for form control with ${loc}. Check that the \`NG_VALUE_ACCESSOR\` token is configured as a \`multi: true\` provider.`)},"_throwInvalidValueAccessorError"),__name(function isPropertyUpdated(changes,viewModel){if(!changes.hasOwnProperty("model"))return!1;const change=changes.model;return!!change.isFirstChange()||!Object.is(viewModel,change.currentValue)},"isPropertyUpdated"),__name(isBuiltInAccessor,"isBuiltInAccessor"),__name(syncPendingControls,"syncPendingControls"),__name(function selectValueAccessor(dir,valueAccessors){if(!valueAccessors)return null;let defaultAccessor,builtinAccessor,customAccessor;return Array.isArray(valueAccessors),valueAccessors.forEach(v=>{v.constructor===DefaultValueAccessor?defaultAccessor=v:isBuiltInAccessor(v)?builtinAccessor=v:customAccessor=v}),customAccessor||builtinAccessor||defaultAccessor||null},"selectValueAccessor"),__name(removeListItem$1,"removeListItem$1"),__name(function _ngModelWarning(name,type,instance,warningConfig){"never"!==warningConfig&&((null===warningConfig||"once"===warningConfig)&&!type._ngModelWarningSentOnce||"always"===warningConfig&&!instance._ngModelWarningSent)&&(console.warn(ngModelWarning(name)),type._ngModelWarningSentOnce=!0,instance._ngModelWarningSent=!0)},"_ngModelWarning"),__name(removeListItem,"removeListItem"),__name(isFormControlState,"isFormControlState");const FormControl=__name(class extends AbstractControl{constructor(formState=null,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(formState),this._setUpdateStrategy(validatorOrOpts),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),isOptionsObj(validatorOrOpts)&&(validatorOrOpts.nonNullable||validatorOrOpts.initialValueIsDefault)&&(this.defaultValue=isFormControlState(formState)?formState.value:formState)}setValue(value,options={}){this.value=this._pendingValue=value,this._onChange.length&&!1!==options.emitModelToViewChange&&this._onChange.forEach(changeFn=>changeFn(this.value,!1!==options.emitViewToModelChange)),this.updateValueAndValidity(options)}patchValue(value,options={}){this.setValue(value,options)}reset(formState=this.defaultValue,options={}){this._applyFormState(formState),this.markAsPristine(options),this.markAsUntouched(options),this.setValue(this.value,options),this._pendingChange=!1}_updateValue(){}_anyControls(condition){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(fn){this._onChange.push(fn)}_unregisterOnChange(fn){removeListItem(this._onChange,fn)}registerOnDisabledChange(fn){this._onDisabledChange.push(fn)}_unregisterOnDisabledChange(fn){removeListItem(this._onDisabledChange,fn)}_forEachChild(cb){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(formState){isFormControlState(formState)?(this.value=this._pendingValue=formState.value,formState.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=formState}},"FormControl"),isFormControl=__name(control=>control instanceof FormControl,"isFormControl");let AbstractFormGroupDirective=(()=>{class AbstractFormGroupDirective2 extends ControlContainer{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return __name(AbstractFormGroupDirective2,"AbstractFormGroupDirective"),AbstractFormGroupDirective2.\u0275fac=function(){let \u0275AbstractFormGroupDirective_BaseFactory;return __name(function(t){return(\u0275AbstractFormGroupDirective_BaseFactory||(\u0275AbstractFormGroupDirective_BaseFactory=core.n5z(AbstractFormGroupDirective2)))(t||AbstractFormGroupDirective2)},"AbstractFormGroupDirective_Factory")}(),AbstractFormGroupDirective2.\u0275dir=core.lG2({type:AbstractFormGroupDirective2,features:[core.qOj]}),AbstractFormGroupDirective2})();__name(function modelParentException(){return new core.vHH(1350,`\n    ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n    formGroup's partner directive "formControlName" instead.  Example:\n\n    ${formControlNameExample}\n\n    Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n    Example:\n\n    \n  <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n      <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n  </div>\n`)},"modelParentException"),__name(function formGroupNameException(){return new core.vHH(1351,`\n    ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n    Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n    ${formGroupNameExample}\n\n    Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n    ${ngModelGroupExample}`)},"formGroupNameException"),__name(function missingNameException(){return new core.vHH(1352,'If ngModel is used within a form tag, either the name attribute must be set or the form\n    control must be defined as \'standalone\' in ngModelOptions.\n\n    Example 1: <input [(ngModel)]="person.firstName" name="first">\n    Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},"missingNameException"),__name(function modelGroupParentException(){return new core.vHH(1353,`\n    ngModelGroup cannot be used with a parent formGroup directive.\n\n    Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n    ${formGroupNameExample}\n\n    Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n    ${ngModelGroupExample}`)},"modelGroupParentException"),__name(function throwNameError(){throw new core.vHH(1202,'\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},"throwNameError");let RadioControlRegistryModule=(()=>{class RadioControlRegistryModule2{}return __name(RadioControlRegistryModule2,"RadioControlRegistryModule"),RadioControlRegistryModule2.\u0275fac=__name(function(t){return new(t||RadioControlRegistryModule2)},"RadioControlRegistryModule_Factory"),RadioControlRegistryModule2.\u0275mod=core.oAB({type:RadioControlRegistryModule2}),RadioControlRegistryModule2.\u0275inj=core.cJS({}),RadioControlRegistryModule2})();const formDirectiveProvider={provide:ControlContainer,useExisting:(0,core.Gpc)(()=>FormGroupDirective)};let FormGroupDirective=(()=>{class FormGroupDirective2 extends ControlContainer{constructor(validators,asyncValidators,callSetDisabledState){super(),this.callSetDisabledState=callSetDisabledState,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new core.vpe,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}ngOnChanges(changes){this._checkFormPresent(),changes.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cleanUpValidators(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(dir){const ctrl=this.form.get(dir.path);return setUpControl(ctrl,dir,this.callSetDisabledState),ctrl.updateValueAndValidity({emitEvent:!1}),this.directives.push(dir),ctrl}getControl(dir){return this.form.get(dir.path)}removeControl(dir){cleanUpControl(dir.control||null,dir,!1),removeListItem$1(this.directives,dir)}addFormGroup(dir){this._setUpFormContainer(dir)}removeFormGroup(dir){this._cleanUpFormContainer(dir)}getFormGroup(dir){return this.form.get(dir.path)}addFormArray(dir){this._setUpFormContainer(dir)}removeFormArray(dir){this._cleanUpFormContainer(dir)}getFormArray(dir){return this.form.get(dir.path)}updateModel(dir,value){this.form.get(dir.path).setValue(value)}onSubmit($event){return this.submitted=!0,syncPendingControls(this.form,this.directives),this.ngSubmit.emit($event),"dialog"===$event?.target?.method}onReset(){this.resetForm()}resetForm(value=void 0){this.form.reset(value),this.submitted=!1}_updateDomValue(){this.directives.forEach(dir=>{const oldCtrl=dir.control,newCtrl=this.form.get(dir.path);oldCtrl!==newCtrl&&(cleanUpControl(oldCtrl||null,dir),isFormControl(newCtrl)&&(setUpControl(newCtrl,dir,this.callSetDisabledState),dir.control=newCtrl))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(dir){const ctrl=this.form.get(dir.path);setUpFormContainer(ctrl,dir),ctrl.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(dir){if(this.form){const ctrl=this.form.get(dir.path);ctrl&&cleanUpFormContainer(ctrl,dir)&&ctrl.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){setUpValidators(this.form,this),this._oldForm&&cleanUpValidators(this._oldForm,this)}_checkFormPresent(){}}return __name(FormGroupDirective2,"FormGroupDirective"),FormGroupDirective2.\u0275fac=__name(function(t){return new(t||FormGroupDirective2)(core.Y36(NG_VALIDATORS,10),core.Y36(NG_ASYNC_VALIDATORS,10),core.Y36(CALL_SET_DISABLED_STATE,8))},"FormGroupDirective_Factory"),FormGroupDirective2.\u0275dir=core.lG2({type:FormGroupDirective2,selectors:[["","formGroup",""]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("submit",__name(function($event){return ctx.onSubmit($event)},"FormGroupDirective_submit_HostBindingHandler"))("reset",__name(function(){return ctx.onReset()},"FormGroupDirective_reset_HostBindingHandler"))},"FormGroupDirective_HostBindings"),inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[core._Bn([formDirectiveProvider]),core.qOj,core.TTD]}),FormGroupDirective2})();const formGroupNameProvider={provide:ControlContainer,useExisting:(0,core.Gpc)(()=>FormGroupName)};let FormGroupName=(()=>{class FormGroupName2 extends AbstractFormGroupDirective{constructor(parent,validators,asyncValidators){super(),this.name=null,this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}_checkParentType(){_hasInvalidParent(this._parent)}}return __name(FormGroupName2,"FormGroupName"),FormGroupName2.\u0275fac=__name(function(t){return new(t||FormGroupName2)(core.Y36(ControlContainer,13),core.Y36(NG_VALIDATORS,10),core.Y36(NG_ASYNC_VALIDATORS,10))},"FormGroupName_Factory"),FormGroupName2.\u0275dir=core.lG2({type:FormGroupName2,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[core._Bn([formGroupNameProvider]),core.qOj]}),FormGroupName2})();const formArrayNameProvider={provide:ControlContainer,useExisting:(0,core.Gpc)(()=>FormArrayName)};let FormArrayName=(()=>{class FormArrayName2 extends ControlContainer{constructor(parent,validators,asyncValidators){super(),this.name=null,this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){_hasInvalidParent(this._parent)}}return __name(FormArrayName2,"FormArrayName"),FormArrayName2.\u0275fac=__name(function(t){return new(t||FormArrayName2)(core.Y36(ControlContainer,13),core.Y36(NG_VALIDATORS,10),core.Y36(NG_ASYNC_VALIDATORS,10))},"FormArrayName_Factory"),FormArrayName2.\u0275dir=core.lG2({type:FormArrayName2,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[core._Bn([formArrayNameProvider]),core.qOj]}),FormArrayName2})();function _hasInvalidParent(parent){return!(parent instanceof FormGroupName||parent instanceof FormGroupDirective||parent instanceof FormArrayName)}__name(_hasInvalidParent,"_hasInvalidParent"),__name(function _buildValueString$1(id,value){return null==id?`${value}`:(value&&"object"==typeof value&&(value="Object"),`${id}: ${value}`.slice(0,50))},"_buildValueString$1"),__name(function _extractId$1(valueString){return valueString.split(":")[0]},"_extractId$1"),__name(function _buildValueString(id,value){return null==id?`${value}`:("string"==typeof value&&(value=`'${value}'`),value&&"object"==typeof value&&(value="Object"),`${id}: ${value}`.slice(0,50))},"_buildValueString"),__name(function _extractId(valueString){return valueString.split(":")[0]},"_extractId"),__name(class HTMLCollection{},"HTMLCollection"),__name(function toInteger(value){return"number"==typeof value?value:parseInt(value,10)},"toInteger"),__name(function toFloat(value){return"number"==typeof value?value:parseFloat(value)},"toFloat");let \u0275InternalFormsSharedModule=(()=>{class \u0275InternalFormsSharedModule2{}return __name(\u0275InternalFormsSharedModule2,"\u0275InternalFormsSharedModule"),\u0275InternalFormsSharedModule2.\u0275fac=__name(function(t){return new(t||\u0275InternalFormsSharedModule2)},"\u0275InternalFormsSharedModule_Factory"),\u0275InternalFormsSharedModule2.\u0275mod=core.oAB({type:\u0275InternalFormsSharedModule2}),\u0275InternalFormsSharedModule2.\u0275inj=core.cJS({imports:[RadioControlRegistryModule]}),\u0275InternalFormsSharedModule2})();__name(class FormArray extends(null){constructor(controls,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(index){return this.controls[this._adjustIndex(index)]}push(control,options={}){this.controls.push(control),this._registerControl(control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}insert(index,control,options={}){this.controls.splice(index,0,control),this._registerControl(control),this.updateValueAndValidity({emitEvent:options.emitEvent})}removeAt(index,options={}){let adjustedIndex=this._adjustIndex(index);adjustedIndex<0&&(adjustedIndex=0),this.controls[adjustedIndex]&&this.controls[adjustedIndex]._registerOnCollectionChange(()=>{}),this.controls.splice(adjustedIndex,1),this.updateValueAndValidity({emitEvent:options.emitEvent})}setControl(index,control,options={}){let adjustedIndex=this._adjustIndex(index);adjustedIndex<0&&(adjustedIndex=0),this.controls[adjustedIndex]&&this.controls[adjustedIndex]._registerOnCollectionChange(()=>{}),this.controls.splice(adjustedIndex,1),control&&(this.controls.splice(adjustedIndex,0,control),this._registerControl(control)),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(value,options={}){assertAllValuesPresent(this,0,value),value.forEach((newValue,index)=>{assertControlPresent(this,!1,index),this.at(index).setValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}patchValue(value,options={}){null!=value&&(value.forEach((newValue,index)=>{this.at(index)&&this.at(index).patchValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options))}reset(value=[],options={}){this._forEachChild((control,index)=>{control.reset(value[index],{onlySelf:!0,emitEvent:options.emitEvent})}),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this.controls.map(control=>control.getRawValue())}clear(options={}){this.controls.length<1||(this._forEachChild(control=>control._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:options.emitEvent}))}_adjustIndex(index){return index<0?index+this.length:index}_syncPendingControls(){let subtreeUpdated=this.controls.reduce((updated,child)=>!!child._syncPendingControls()||updated,!1);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_forEachChild(cb){this.controls.forEach((control,index)=>{cb(control,index)})}_updateValue(){this.value=this.controls.filter(control=>control.enabled||this.disabled).map(control=>control.value)}_anyControls(condition){return this.controls.some(control=>control.enabled&&condition(control))}_setUpControls(){this._forEachChild(control=>this._registerControl(control))}_allControlsDisabled(){for(const control of this.controls)if(control.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(control){control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)}_find(name){return this.at(name)??null}},"FormArray"),__name(function isAbstractControlOptions(options){return!!options&&(void 0!==options.asyncValidators||void 0!==options.validators||void 0!==options.updateOn)},"isAbstractControlOptions");let FormsModule=(()=>{class FormsModule2{static withConfig(opts){return{ngModule:FormsModule2,providers:[{provide:CALL_SET_DISABLED_STATE,useValue:opts.callSetDisabledState??setDisabledStateDefault}]}}}return __name(FormsModule2,"FormsModule"),FormsModule2.\u0275fac=__name(function(t){return new(t||FormsModule2)},"FormsModule_Factory"),FormsModule2.\u0275mod=core.oAB({type:FormsModule2}),FormsModule2.\u0275inj=core.cJS({imports:[\u0275InternalFormsSharedModule]}),FormsModule2})()},4275:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{PW:()=>BrowserAnimationsModule});var core=__webpack_require__(2223),platform_browser=__webpack_require__(6550),animations=__webpack_require__(1591);function invalidTimingValue(exp){return new core.vHH(3e3,!1)}function negativeStepValue(){return new core.vHH(3100,!1)}function negativeDelayValue(){return new core.vHH(3101,!1)}function invalidStyleParams(varName){return new core.vHH(3001,!1)}function invalidParamValue(varName){return new core.vHH(3003,!1)}function invalidNodeType(nodeType){return new core.vHH(3004,!1)}function invalidCssUnitValue(userProvidedProperty,value){return new core.vHH(3005,!1)}function invalidTrigger(){return new core.vHH(3006,!1)}function invalidDefinition(){return new core.vHH(3007,!1)}function invalidState(metadataName,missingSubs){return new core.vHH(3008,!1)}function invalidStyleValue(value){return new core.vHH(3002,!1)}function invalidParallelAnimation(prop,firstStart,firstEnd,secondStart,secondEnd){return new core.vHH(3010,!1)}function invalidKeyframes(){return new core.vHH(3011,!1)}function invalidOffset(){return new core.vHH(3012,!1)}function keyframeOffsetsOutOfOrder(){return new core.vHH(3200,!1)}function keyframesMissingOffsets(){return new core.vHH(3202,!1)}function invalidStagger(){return new core.vHH(3013,!1)}function invalidQuery(selector){return new core.vHH(3014,!1)}function invalidExpression(expr){return new core.vHH(3015,!1)}function invalidTransitionAlias(alias){return new core.vHH(3016,!1)}function validationFailed(errors){return new \u0275RuntimeError(3500,!1)}function buildingFailed(errors){return new \u0275RuntimeError(3501,!1)}function triggerBuildFailed(name,errors){return new core.vHH(3404,!1)}function animationFailed(errors){return new core.vHH(3502,!1)}function registerFailed(errors){return new core.vHH(3503,!1)}function missingOrDestroyedAnimation(){return new core.vHH(3300,!1)}function createAnimationFailed(errors){return new core.vHH(3504,!1)}function missingPlayer(id){return new core.vHH(3301,!1)}function missingTrigger(phase,name){return new core.vHH(3302,!1)}function missingEvent(name){return new core.vHH(3303,!1)}function unsupportedTriggerEvent(phase,name){return new core.vHH(3400,!1)}function unregisteredTrigger(name){return new core.vHH(3401,!1)}function triggerTransitionsFailed(errors){return new core.vHH(3402,!1)}function transitionFailed(name,errors){return new core.vHH(3505,!1)}__name(invalidTimingValue,"invalidTimingValue"),__name(negativeStepValue,"negativeStepValue"),__name(negativeDelayValue,"negativeDelayValue"),__name(invalidStyleParams,"invalidStyleParams"),__name(invalidParamValue,"invalidParamValue"),__name(invalidNodeType,"invalidNodeType"),__name(invalidCssUnitValue,"invalidCssUnitValue"),__name(invalidTrigger,"invalidTrigger"),__name(invalidDefinition,"invalidDefinition"),__name(invalidState,"invalidState"),__name(invalidStyleValue,"invalidStyleValue"),__name(function invalidProperty(prop){return new \u0275RuntimeError(3009,!1)},"invalidProperty"),__name(invalidParallelAnimation,"invalidParallelAnimation"),__name(invalidKeyframes,"invalidKeyframes"),__name(invalidOffset,"invalidOffset"),__name(keyframeOffsetsOutOfOrder,"keyframeOffsetsOutOfOrder"),__name(keyframesMissingOffsets,"keyframesMissingOffsets"),__name(invalidStagger,"invalidStagger"),__name(invalidQuery,"invalidQuery"),__name(invalidExpression,"invalidExpression"),__name(invalidTransitionAlias,"invalidTransitionAlias"),__name(validationFailed,"validationFailed"),__name(buildingFailed,"buildingFailed"),__name(triggerBuildFailed,"triggerBuildFailed"),__name(animationFailed,"animationFailed"),__name(registerFailed,"registerFailed"),__name(missingOrDestroyedAnimation,"missingOrDestroyedAnimation"),__name(createAnimationFailed,"createAnimationFailed"),__name(missingPlayer,"missingPlayer"),__name(missingTrigger,"missingTrigger"),__name(missingEvent,"missingEvent"),__name(unsupportedTriggerEvent,"unsupportedTriggerEvent"),__name(unregisteredTrigger,"unregisteredTrigger"),__name(triggerTransitionsFailed,"triggerTransitionsFailed"),__name(function triggerParsingFailed(name,errors){return new \u0275RuntimeError(3403,!1)},"triggerParsingFailed"),__name(transitionFailed,"transitionFailed");const ANIMATABLE_PROP_SET=new Set(["-moz-outline-radius","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-ms-grid-columns","-ms-grid-rows","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke","-webkit-text-stroke-color","accent-color","all","backdrop-filter","background","background-color","background-position","background-size","block-size","border","border-block-end","border-block-end-color","border-block-end-width","border-block-start","border-block-start-color","border-block-start-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-color","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-slice","border-image-width","border-inline-end","border-inline-end-color","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-width","border-left","border-left-color","border-left-width","border-radius","border-right","border-right-color","border-right-width","border-start-end-radius","border-start-start-radius","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-width","border-width","bottom","box-shadow","caret-color","clip","clip-path","color","column-count","column-gap","column-rule","column-rule-color","column-rule-width","column-width","columns","filter","flex","flex-basis","flex-grow","flex-shrink","font","font-size","font-size-adjust","font-stretch","font-variation-settings","font-weight","gap","grid-column-gap","grid-gap","grid-row-gap","grid-template-columns","grid-template-rows","height","inline-size","input-security","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","left","letter-spacing","line-clamp","line-height","margin","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","mask","mask-border","mask-position","mask-size","max-block-size","max-height","max-inline-size","max-lines","max-width","min-block-size","min-height","min-inline-size","min-width","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","outline","outline-color","outline-offset","outline-width","padding","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","perspective","perspective-origin","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-coordinate","scroll-snap-destination","scrollbar-color","shape-image-threshold","shape-margin","shape-outside","tab-size","text-decoration","text-decoration-color","text-decoration-thickness","text-emphasis","text-emphasis-color","text-indent","text-shadow","text-underline-offset","top","transform","transform-origin","translate","vertical-align","visibility","width","word-spacing","z-index","zoom"]);function optimizeGroupPlayer(players){switch(players.length){case 0:return new animations.ZN;case 1:return players[0];default:return new animations.ZE(players)}}function normalizeKeyframes$1(normalizer,keyframes,preStyles=new Map,postStyles=new Map){const errors=[],normalizedKeyframes=[];let previousOffset=-1,previousKeyframe=null;if(keyframes.forEach(kf=>{const offset=kf.get("offset"),isSameOffset=offset==previousOffset,normalizedKeyframe=isSameOffset&&previousKeyframe||new Map;kf.forEach((val,prop)=>{let normalizedProp=prop,normalizedValue=val;if("offset"!==prop)switch(normalizedProp=normalizer.normalizePropertyName(normalizedProp,errors),normalizedValue){case animations.k1:normalizedValue=preStyles.get(prop);break;case animations.l3:normalizedValue=postStyles.get(prop);break;default:normalizedValue=normalizer.normalizeStyleValue(prop,normalizedProp,normalizedValue,errors)}normalizedKeyframe.set(normalizedProp,normalizedValue)}),isSameOffset||normalizedKeyframes.push(normalizedKeyframe),previousKeyframe=normalizedKeyframe,previousOffset=offset}),errors.length)throw animationFailed();return normalizedKeyframes}function listenOnPlayer(player,eventName,event,callback){switch(eventName){case"start":player.onStart(()=>callback(event&&copyAnimationEvent(event,"start",player)));break;case"done":player.onDone(()=>callback(event&&copyAnimationEvent(event,"done",player)));break;case"destroy":player.onDestroy(()=>callback(event&&copyAnimationEvent(event,"destroy",player)))}}function copyAnimationEvent(e,phaseName,player){const event=makeAnimationEvent(e.element,e.triggerName,e.fromState,e.toState,phaseName||e.phaseName,player.totalTime??e.totalTime,!!player.disabled),data=e._data;return null!=data&&(event._data=data),event}function makeAnimationEvent(element,triggerName,fromState,toState,phaseName="",totalTime=0,disabled){return{element,triggerName,fromState,toState,phaseName,totalTime,disabled:!!disabled}}function getOrSetDefaultValue(map,key,defaultValue){let value=map.get(key);return value||map.set(key,value=defaultValue),value}function parseTimelineCommand(command){const separatorPos=command.indexOf(":");return[command.substring(1,separatorPos),command.slice(separatorPos+1)]}__name(optimizeGroupPlayer,"optimizeGroupPlayer"),__name(normalizeKeyframes$1,"normalizeKeyframes$1"),__name(listenOnPlayer,"listenOnPlayer"),__name(copyAnimationEvent,"copyAnimationEvent"),__name(makeAnimationEvent,"makeAnimationEvent"),__name(getOrSetDefaultValue,"getOrSetDefaultValue"),__name(parseTimelineCommand,"parseTimelineCommand");const documentElement=(()=>typeof document>"u"?null:document.documentElement)();function getParentElement(element){const parent=element.parentNode||element.host||null;return parent===documentElement?null:parent}function containsVendorPrefix(prop){return"ebkit"==prop.substring(1,6)}__name(getParentElement,"getParentElement"),__name(containsVendorPrefix,"containsVendorPrefix");let _CACHED_BODY=null,_IS_WEBKIT=!1;function validateStyleProperty(prop){_CACHED_BODY||(_CACHED_BODY=getBodyNode()||{},_IS_WEBKIT=!!_CACHED_BODY.style&&"WebkitAppearance"in _CACHED_BODY.style);let result=!0;return _CACHED_BODY.style&&!containsVendorPrefix(prop)&&(result=prop in _CACHED_BODY.style,!result&&_IS_WEBKIT&&(result="Webkit"+prop.charAt(0).toUpperCase()+prop.slice(1)in _CACHED_BODY.style)),result}function getBodyNode(){return typeof document<"u"?document.body:null}function containsElement(elm1,elm2){for(;elm2;){if(elm2===elm1)return!0;elm2=getParentElement(elm2)}return!1}function invokeQuery(element,selector,multi){if(multi)return Array.from(element.querySelectorAll(selector));const elem=element.querySelector(selector);return elem?[elem]:[]}__name(validateStyleProperty,"validateStyleProperty"),__name(function validateWebAnimatableStyleProperty(prop){return ANIMATABLE_PROP_SET.has(prop)},"validateWebAnimatableStyleProperty"),__name(getBodyNode,"getBodyNode"),__name(containsElement,"containsElement"),__name(invokeQuery,"invokeQuery"),__name(function hypenatePropsKeys(original){const newMap=new Map;return original.forEach((val,prop)=>{const newProp=prop.replace(/([a-z])([A-Z])/g,"$1-$2");newMap.set(newProp,val)}),newMap},"hypenatePropsKeys");let NoopAnimationDriver=(()=>{class NoopAnimationDriver2{validateStyleProperty(prop){return validateStyleProperty(prop)}matchesElement(_element,_selector){return!1}containsElement(elm1,elm2){return containsElement(elm1,elm2)}getParentElement(element){return getParentElement(element)}query(element,selector,multi){return invokeQuery(element,selector,multi)}computeStyle(element,prop,defaultValue){return defaultValue||""}animate(element,keyframes,duration,delay,easing,previousPlayers=[],scrubberAccessRequested){return new animations.ZN(duration,delay)}}return __name(NoopAnimationDriver2,"NoopAnimationDriver"),NoopAnimationDriver2.\u0275fac=__name(function(t){return new(t||NoopAnimationDriver2)},"NoopAnimationDriver_Factory"),NoopAnimationDriver2.\u0275prov=core.Yz7({token:NoopAnimationDriver2,factory:NoopAnimationDriver2.\u0275fac}),NoopAnimationDriver2})(),AnimationDriver=(()=>{class AnimationDriver2{}return __name(AnimationDriver2,"AnimationDriver"),AnimationDriver2.NOOP=new NoopAnimationDriver,AnimationDriver2})();const ONE_SECOND=1e3,NG_TRIGGER_SELECTOR=".ng-trigger",NG_ANIMATING_SELECTOR=".ng-animating";function resolveTimingValue(value){if("number"==typeof value)return value;const matches=value.match(/^(-?[\.\d]+)(m?s)/);return!matches||matches.length<2?0:_convertTimeValueToMS(parseFloat(matches[1]),matches[2])}function _convertTimeValueToMS(value,unit){return"s"===unit?value*ONE_SECOND:value}function resolveTiming(timings,errors,allowNegativeValues){return timings.hasOwnProperty("duration")?timings:parseTimeExpression(timings,errors,allowNegativeValues)}function parseTimeExpression(exp,errors,allowNegativeValues){let duration,delay=0,easing="";if("string"==typeof exp){const matches=exp.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===matches)return errors.push(invalidTimingValue()),{duration:0,delay:0,easing:""};duration=_convertTimeValueToMS(parseFloat(matches[1]),matches[2]);const delayMatch=matches[3];null!=delayMatch&&(delay=_convertTimeValueToMS(parseFloat(delayMatch),matches[4]));const easingVal=matches[5];easingVal&&(easing=easingVal)}else duration=exp;if(!allowNegativeValues){let containsErrors=!1,startIndex=errors.length;duration<0&&(errors.push(negativeStepValue()),containsErrors=!0),delay<0&&(errors.push(negativeDelayValue()),containsErrors=!0),containsErrors&&errors.splice(startIndex,0,invalidTimingValue())}return{duration,delay,easing}}function copyObj(obj,destination={}){return Object.keys(obj).forEach(prop=>{destination[prop]=obj[prop]}),destination}function convertToMap(obj){const styleMap=new Map;return Object.keys(obj).forEach(prop=>{styleMap.set(prop,obj[prop])}),styleMap}function normalizeKeyframes(keyframes){return keyframes.length?keyframes[0]instanceof Map?keyframes:keyframes.map(kf=>convertToMap(kf)):[]}function normalizeStyles(styles){const normalizedStyles=new Map;return Array.isArray(styles)?styles.forEach(data=>copyStyles(data,normalizedStyles)):copyStyles(styles,normalizedStyles),normalizedStyles}function copyStyles(styles,destination=new Map,backfill){if(backfill)for(let[prop,val]of backfill)destination.set(prop,val);for(let[prop,val]of styles)destination.set(prop,val);return destination}function setStyles(element,styles,formerStyles){styles.forEach((val,prop)=>{const camelProp=dashCaseToCamelCase(prop);formerStyles&&!formerStyles.has(prop)&&formerStyles.set(prop,element.style[camelProp]),element.style[camelProp]=val})}function eraseStyles(element,styles){styles.forEach((_,prop)=>{const camelProp=dashCaseToCamelCase(prop);element.style[camelProp]=""})}function normalizeAnimationEntry(steps){return Array.isArray(steps)?1==steps.length?steps[0]:(0,animations.vP)(steps):steps}function validateStyleParams(value,options,errors){const params=options.params||{},matches=extractStyleParams(value);matches.length&&matches.forEach(varName=>{params.hasOwnProperty(varName)||errors.push(invalidStyleParams())})}__name(resolveTimingValue,"resolveTimingValue"),__name(_convertTimeValueToMS,"_convertTimeValueToMS"),__name(resolveTiming,"resolveTiming"),__name(parseTimeExpression,"parseTimeExpression"),__name(copyObj,"copyObj"),__name(convertToMap,"convertToMap"),__name(normalizeKeyframes,"normalizeKeyframes"),__name(normalizeStyles,"normalizeStyles"),__name(copyStyles,"copyStyles"),__name(setStyles,"setStyles"),__name(eraseStyles,"eraseStyles"),__name(normalizeAnimationEntry,"normalizeAnimationEntry"),__name(validateStyleParams,"validateStyleParams");const PARAM_REGEX=new RegExp("{{\\s*(.+?)\\s*}}","g");function extractStyleParams(value){let params=[];if("string"==typeof value){let match;for(;match=PARAM_REGEX.exec(value);)params.push(match[1]);PARAM_REGEX.lastIndex=0}return params}function interpolateParams(value,params,errors){const original=value.toString(),str=original.replace(PARAM_REGEX,(_,varName)=>{let localVal=params[varName];return null==localVal&&(errors.push(invalidParamValue()),localVal=""),localVal.toString()});return str==original?value:str}function iteratorToArray(iterator){const arr=[];let item=iterator.next();for(;!item.done;)arr.push(item.value),item=iterator.next();return arr}__name(extractStyleParams,"extractStyleParams"),__name(interpolateParams,"interpolateParams"),__name(iteratorToArray,"iteratorToArray");const DASH_CASE_REGEXP=/-+([a-z0-9])/g;function dashCaseToCamelCase(input){return input.replace(DASH_CASE_REGEXP,(...m)=>m[1].toUpperCase())}function allowPreviousPlayerStylesMerge(duration,delay){return 0===duration||0===delay}function balancePreviousStylesIntoKeyframes(element,keyframes,previousStyles){if(previousStyles.size&&keyframes.length){let startingKeyframe=keyframes[0],missingStyleProps=[];if(previousStyles.forEach((val,prop)=>{startingKeyframe.has(prop)||missingStyleProps.push(prop),startingKeyframe.set(prop,val)}),missingStyleProps.length)for(let i=1;i<keyframes.length;i++){let kf=keyframes[i];missingStyleProps.forEach(prop=>kf.set(prop,computeStyle(element,prop)))}}return keyframes}function visitDslNode(visitor,node,context){switch(node.type){case 7:return visitor.visitTrigger(node,context);case 0:return visitor.visitState(node,context);case 1:return visitor.visitTransition(node,context);case 2:return visitor.visitSequence(node,context);case 3:return visitor.visitGroup(node,context);case 4:return visitor.visitAnimate(node,context);case 5:return visitor.visitKeyframes(node,context);case 6:return visitor.visitStyle(node,context);case 8:return visitor.visitReference(node,context);case 9:return visitor.visitAnimateChild(node,context);case 10:return visitor.visitAnimateRef(node,context);case 11:return visitor.visitQuery(node,context);case 12:return visitor.visitStagger(node,context);default:throw invalidNodeType()}}function computeStyle(element,prop){return window.getComputedStyle(element)[prop]}__name(dashCaseToCamelCase,"dashCaseToCamelCase"),__name(function camelCaseToDashCase(input){return input.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},"camelCaseToDashCase"),__name(allowPreviousPlayerStylesMerge,"allowPreviousPlayerStylesMerge"),__name(balancePreviousStylesIntoKeyframes,"balancePreviousStylesIntoKeyframes"),__name(visitDslNode,"visitDslNode"),__name(computeStyle,"computeStyle"),__name(function createListOfWarnings(warnings){return`\n - ${warnings.filter(Boolean).map(warning=>warning).join("\n - ")}`},"createListOfWarnings"),__name(function warnValidation(warnings){},"warnValidation"),__name(function warnTriggerBuild(name,warnings){},"warnTriggerBuild"),__name(function warnRegister(warnings){},"warnRegister"),__name(function triggerParsingWarnings(name,warnings){},"triggerParsingWarnings"),__name(function pushUnrecognizedPropertiesWarning(warnings,props){props.length&&warnings.push(`The following provided properties are not recognized: ${props.join(", ")}`)},"pushUnrecognizedPropertiesWarning");const ANY_STATE="*";function parseTransitionExpr(transitionValue,errors){const expressions=[];return"string"==typeof transitionValue?transitionValue.split(/\s*,\s*/).forEach(str=>parseInnerTransitionStr(str,expressions,errors)):expressions.push(transitionValue),expressions}function parseInnerTransitionStr(eventStr,expressions,errors){if(":"==eventStr[0]){const result=parseAnimationAlias(eventStr,errors);if("function"==typeof result)return void expressions.push(result);eventStr=result}const match=eventStr.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==match||match.length<4)return errors.push(invalidExpression()),expressions;const fromState=match[1],separator=match[2],toState=match[3];expressions.push(makeLambdaFromStates(fromState,toState)),"<"==separator[0]&&(fromState!=ANY_STATE||toState!=ANY_STATE)&&expressions.push(makeLambdaFromStates(toState,fromState))}function parseAnimationAlias(alias,errors){switch(alias){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(fromState,toState)=>parseFloat(toState)>parseFloat(fromState);case":decrement":return(fromState,toState)=>parseFloat(toState)<parseFloat(fromState);default:return errors.push(invalidTransitionAlias()),"* => *"}}__name(parseTransitionExpr,"parseTransitionExpr"),__name(parseInnerTransitionStr,"parseInnerTransitionStr"),__name(parseAnimationAlias,"parseAnimationAlias");const TRUE_BOOLEAN_VALUES=new Set(["true","1"]),FALSE_BOOLEAN_VALUES=new Set(["false","0"]);function makeLambdaFromStates(lhs,rhs){const LHS_MATCH_BOOLEAN=TRUE_BOOLEAN_VALUES.has(lhs)||FALSE_BOOLEAN_VALUES.has(lhs),RHS_MATCH_BOOLEAN=TRUE_BOOLEAN_VALUES.has(rhs)||FALSE_BOOLEAN_VALUES.has(rhs);return(fromState,toState)=>{let lhsMatch=lhs==ANY_STATE||lhs==fromState,rhsMatch=rhs==ANY_STATE||rhs==toState;return!lhsMatch&&LHS_MATCH_BOOLEAN&&"boolean"==typeof fromState&&(lhsMatch=fromState?TRUE_BOOLEAN_VALUES.has(lhs):FALSE_BOOLEAN_VALUES.has(lhs)),!rhsMatch&&RHS_MATCH_BOOLEAN&&"boolean"==typeof toState&&(rhsMatch=toState?TRUE_BOOLEAN_VALUES.has(rhs):FALSE_BOOLEAN_VALUES.has(rhs)),lhsMatch&&rhsMatch}}__name(makeLambdaFromStates,"makeLambdaFromStates");const SELF_TOKEN_REGEX=new RegExp("s*:selfs*,?","g");function buildAnimationAst(driver,metadata,errors,warnings){return new AnimationAstBuilderVisitor(driver).build(metadata,errors,warnings)}__name(buildAnimationAst,"buildAnimationAst");class AnimationAstBuilderVisitor{constructor(_driver){this._driver=_driver}build(metadata,errors,warnings){const context=new AnimationAstBuilderContext(errors);return this._resetContextStyleTimingState(context),visitDslNode(this,normalizeAnimationEntry(metadata),context)}_resetContextStyleTimingState(context){context.currentQuerySelector="",context.collectedStyles=new Map,context.collectedStyles.set("",new Map),context.currentTime=0}visitTrigger(metadata,context){let queryCount=context.queryCount=0,depCount=context.depCount=0;const states=[],transitions=[];return"@"==metadata.name.charAt(0)&&context.errors.push(invalidTrigger()),metadata.definitions.forEach(def=>{if(this._resetContextStyleTimingState(context),0==def.type){const stateDef=def,name=stateDef.name;name.toString().split(/\s*,\s*/).forEach(n=>{stateDef.name=n,states.push(this.visitState(stateDef,context))}),stateDef.name=name}else if(1==def.type){const transition=this.visitTransition(def,context);queryCount+=transition.queryCount,depCount+=transition.depCount,transitions.push(transition)}else context.errors.push(invalidDefinition())}),{type:7,name:metadata.name,states,transitions,queryCount,depCount,options:null}}visitState(metadata,context){const styleAst=this.visitStyle(metadata.styles,context),astParams=metadata.options&&metadata.options.params||null;if(styleAst.containsDynamicStyles){const missingSubs=new Set,params=astParams||{};styleAst.styles.forEach(style=>{style instanceof Map&&style.forEach(value=>{extractStyleParams(value).forEach(sub=>{params.hasOwnProperty(sub)||missingSubs.add(sub)})})}),missingSubs.size&&(iteratorToArray(missingSubs.values()),context.errors.push(invalidState()))}return{type:0,name:metadata.name,style:styleAst,options:astParams?{params:astParams}:null}}visitTransition(metadata,context){context.queryCount=0,context.depCount=0;const animation=visitDslNode(this,normalizeAnimationEntry(metadata.animation),context);return{type:1,matchers:parseTransitionExpr(metadata.expr,context.errors),animation,queryCount:context.queryCount,depCount:context.depCount,options:normalizeAnimationOptions(metadata.options)}}visitSequence(metadata,context){return{type:2,steps:metadata.steps.map(s=>visitDslNode(this,s,context)),options:normalizeAnimationOptions(metadata.options)}}visitGroup(metadata,context){const currentTime=context.currentTime;let furthestTime=0;const steps=metadata.steps.map(step=>{context.currentTime=currentTime;const innerAst=visitDslNode(this,step,context);return furthestTime=Math.max(furthestTime,context.currentTime),innerAst});return context.currentTime=furthestTime,{type:3,steps,options:normalizeAnimationOptions(metadata.options)}}visitAnimate(metadata,context){const timingAst=constructTimingAst(metadata.timings,context.errors);context.currentAnimateTimings=timingAst;let styleAst,styleMetadata=metadata.styles?metadata.styles:(0,animations.oB)({});if(5==styleMetadata.type)styleAst=this.visitKeyframes(styleMetadata,context);else{let styleMetadata2=metadata.styles,isEmpty=!1;if(!styleMetadata2){isEmpty=!0;const newStyleData={};timingAst.easing&&(newStyleData.easing=timingAst.easing),styleMetadata2=(0,animations.oB)(newStyleData)}context.currentTime+=timingAst.duration+timingAst.delay;const _styleAst=this.visitStyle(styleMetadata2,context);_styleAst.isEmptyStep=isEmpty,styleAst=_styleAst}return context.currentAnimateTimings=null,{type:4,timings:timingAst,style:styleAst,options:null}}visitStyle(metadata,context){const ast=this._makeStyleAst(metadata,context);return this._validateStyleAst(ast,context),ast}_makeStyleAst(metadata,context){const styles=[],metadataStyles=Array.isArray(metadata.styles)?metadata.styles:[metadata.styles];for(let styleTuple of metadataStyles)"string"==typeof styleTuple?styleTuple===animations.l3?styles.push(styleTuple):context.errors.push(invalidStyleValue()):styles.push(convertToMap(styleTuple));let containsDynamicStyles=!1,collectedEasing=null;return styles.forEach(styleData=>{if(styleData instanceof Map&&(styleData.has("easing")&&(collectedEasing=styleData.get("easing"),styleData.delete("easing")),!containsDynamicStyles))for(let value of styleData.values())if(value.toString().indexOf("{{")>=0){containsDynamicStyles=!0;break}}),{type:6,styles,easing:collectedEasing,offset:metadata.offset,containsDynamicStyles,options:null}}_validateStyleAst(ast,context){const timings=context.currentAnimateTimings;let endTime=context.currentTime,startTime=context.currentTime;timings&&startTime>0&&(startTime-=timings.duration+timings.delay),ast.styles.forEach(tuple=>{"string"!=typeof tuple&&tuple.forEach((value,prop)=>{const collectedStyles=context.collectedStyles.get(context.currentQuerySelector),collectedEntry=collectedStyles.get(prop);let updateCollectedStyle=!0;collectedEntry&&(startTime!=endTime&&startTime>=collectedEntry.startTime&&endTime<=collectedEntry.endTime&&(context.errors.push(invalidParallelAnimation()),updateCollectedStyle=!1),startTime=collectedEntry.startTime),updateCollectedStyle&&collectedStyles.set(prop,{startTime,endTime}),context.options&&validateStyleParams(value,context.options,context.errors)})})}visitKeyframes(metadata,context){const ast={type:5,styles:[],options:null};if(!context.currentAnimateTimings)return context.errors.push(invalidKeyframes()),ast;let totalKeyframesWithOffsets=0;const offsets=[];let offsetsOutOfOrder=!1,keyframesOutOfRange=!1,previousOffset=0;const keyframes=metadata.steps.map(styles=>{const style=this._makeStyleAst(styles,context);let offsetVal=null!=style.offset?style.offset:consumeOffset(style.styles),offset=0;return null!=offsetVal&&(totalKeyframesWithOffsets++,offset=style.offset=offsetVal),keyframesOutOfRange=keyframesOutOfRange||offset<0||offset>1,offsetsOutOfOrder=offsetsOutOfOrder||offset<previousOffset,previousOffset=offset,offsets.push(offset),style});keyframesOutOfRange&&context.errors.push(invalidOffset()),offsetsOutOfOrder&&context.errors.push(keyframeOffsetsOutOfOrder());const length=metadata.steps.length;let generatedOffset=0;totalKeyframesWithOffsets>0&&totalKeyframesWithOffsets<length?context.errors.push(keyframesMissingOffsets()):0==totalKeyframesWithOffsets&&(generatedOffset=1/(length-1));const limit=length-1,currentTime=context.currentTime,currentAnimateTimings=context.currentAnimateTimings,animateDuration=currentAnimateTimings.duration;return keyframes.forEach((kf,i)=>{const offset=generatedOffset>0?i==limit?1:generatedOffset*i:offsets[i],durationUpToThisFrame=offset*animateDuration;context.currentTime=currentTime+currentAnimateTimings.delay+durationUpToThisFrame,currentAnimateTimings.duration=durationUpToThisFrame,this._validateStyleAst(kf,context),kf.offset=offset,ast.styles.push(kf)}),ast}visitReference(metadata,context){return{type:8,animation:visitDslNode(this,normalizeAnimationEntry(metadata.animation),context),options:normalizeAnimationOptions(metadata.options)}}visitAnimateChild(metadata,context){return context.depCount++,{type:9,options:normalizeAnimationOptions(metadata.options)}}visitAnimateRef(metadata,context){return{type:10,animation:this.visitReference(metadata.animation,context),options:normalizeAnimationOptions(metadata.options)}}visitQuery(metadata,context){const parentSelector=context.currentQuerySelector,options=metadata.options||{};context.queryCount++,context.currentQuery=metadata;const[selector,includeSelf]=normalizeSelector(metadata.selector);context.currentQuerySelector=parentSelector.length?parentSelector+" "+selector:selector,getOrSetDefaultValue(context.collectedStyles,context.currentQuerySelector,new Map);const animation=visitDslNode(this,normalizeAnimationEntry(metadata.animation),context);return context.currentQuery=null,context.currentQuerySelector=parentSelector,{type:11,selector,limit:options.limit||0,optional:!!options.optional,includeSelf,animation,originalSelector:metadata.selector,options:normalizeAnimationOptions(metadata.options)}}visitStagger(metadata,context){context.currentQuery||context.errors.push(invalidStagger());const timings="full"===metadata.timings?{duration:0,delay:0,easing:"full"}:resolveTiming(metadata.timings,context.errors,!0);return{type:12,animation:visitDslNode(this,normalizeAnimationEntry(metadata.animation),context),timings,options:null}}}function normalizeSelector(selector){const hasAmpersand=!!selector.split(/\s*,\s*/).find(token=>":self"==token);return hasAmpersand&&(selector=selector.replace(SELF_TOKEN_REGEX,"")),[selector=selector.replace(/@\*/g,NG_TRIGGER_SELECTOR).replace(/@\w+/g,match=>NG_TRIGGER_SELECTOR+"-"+match.slice(1)).replace(/:animating/g,NG_ANIMATING_SELECTOR),hasAmpersand]}function normalizeParams(obj){return obj?copyObj(obj):null}__name(AnimationAstBuilderVisitor,"AnimationAstBuilderVisitor"),__name(normalizeSelector,"normalizeSelector"),__name(normalizeParams,"normalizeParams");class AnimationAstBuilderContext{constructor(errors){this.errors=errors,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function consumeOffset(styles){if("string"==typeof styles)return null;let offset=null;if(Array.isArray(styles))styles.forEach(styleTuple=>{if(styleTuple instanceof Map&&styleTuple.has("offset")){const obj=styleTuple;offset=parseFloat(obj.get("offset")),obj.delete("offset")}});else if(styles instanceof Map&&styles.has("offset")){const obj=styles;offset=parseFloat(obj.get("offset")),obj.delete("offset")}return offset}function constructTimingAst(value,errors){if(value.hasOwnProperty("duration"))return value;if("number"==typeof value)return makeTimingAst(resolveTiming(value,errors).duration,0,"");const strValue=value;if(strValue.split(/\s+/).some(v=>"{"==v.charAt(0)&&"{"==v.charAt(1))){const ast=makeTimingAst(0,0,"");return ast.dynamic=!0,ast.strValue=strValue,ast}const timings=resolveTiming(strValue,errors);return makeTimingAst(timings.duration,timings.delay,timings.easing)}function normalizeAnimationOptions(options){return options?(options=copyObj(options)).params&&(options.params=normalizeParams(options.params)):options={},options}function makeTimingAst(duration,delay,easing){return{duration,delay,easing}}function createTimelineInstruction(element,keyframes,preStyleProps,postStyleProps,duration,delay,easing=null,subTimeline=!1){return{type:1,element,keyframes,preStyleProps,postStyleProps,duration,delay,totalTime:duration+delay,easing,subTimeline}}__name(AnimationAstBuilderContext,"AnimationAstBuilderContext"),__name(consumeOffset,"consumeOffset"),__name(constructTimingAst,"constructTimingAst"),__name(normalizeAnimationOptions,"normalizeAnimationOptions"),__name(makeTimingAst,"makeTimingAst"),__name(createTimelineInstruction,"createTimelineInstruction");class ElementInstructionMap{constructor(){this._map=new Map}get(element){return this._map.get(element)||[]}append(element,instructions){let existingInstructions=this._map.get(element);existingInstructions||this._map.set(element,existingInstructions=[]),existingInstructions.push(...instructions)}has(element){return this._map.has(element)}clear(){this._map.clear()}}__name(ElementInstructionMap,"ElementInstructionMap");const ENTER_TOKEN_REGEX=new RegExp(":enter","g"),LEAVE_TOKEN_REGEX=new RegExp(":leave","g");function buildAnimationTimelines(driver,rootElement,ast,enterClassName,leaveClassName,startingStyles=new Map,finalStyles=new Map,options,subInstructions,errors=[]){return(new AnimationTimelineBuilderVisitor).buildKeyframes(driver,rootElement,ast,enterClassName,leaveClassName,startingStyles,finalStyles,options,subInstructions,errors)}__name(buildAnimationTimelines,"buildAnimationTimelines");class AnimationTimelineBuilderVisitor{buildKeyframes(driver,rootElement,ast,enterClassName,leaveClassName,startingStyles,finalStyles,options,subInstructions,errors=[]){subInstructions=subInstructions||new ElementInstructionMap;const context=new AnimationTimelineContext(driver,rootElement,subInstructions,enterClassName,leaveClassName,errors,[]);context.options=options;const delay=options.delay?resolveTimingValue(options.delay):0;context.currentTimeline.delayNextStep(delay),context.currentTimeline.setStyles([startingStyles],null,context.errors,options),visitDslNode(this,ast,context);const timelines=context.timelines.filter(timeline=>timeline.containsAnimation());if(timelines.length&&finalStyles.size){let lastRootTimeline;for(let i=timelines.length-1;i>=0;i--){const timeline=timelines[i];if(timeline.element===rootElement){lastRootTimeline=timeline;break}}lastRootTimeline&&!lastRootTimeline.allowOnlyTimelineStyles()&&lastRootTimeline.setStyles([finalStyles],null,context.errors,options)}return timelines.length?timelines.map(timeline=>timeline.buildKeyframes()):[createTimelineInstruction(rootElement,[],[],[],0,delay,"",!1)]}visitTrigger(ast,context){}visitState(ast,context){}visitTransition(ast,context){}visitAnimateChild(ast,context){const elementInstructions=context.subInstructions.get(context.element);if(elementInstructions){const innerContext=context.createSubContext(ast.options),startTime=context.currentTimeline.currentTime,endTime=this._visitSubInstructions(elementInstructions,innerContext,innerContext.options);startTime!=endTime&&context.transformIntoNewTimeline(endTime)}context.previousNode=ast}visitAnimateRef(ast,context){const innerContext=context.createSubContext(ast.options);innerContext.transformIntoNewTimeline(),this._applyAnimationRefDelays([ast.options,ast.animation.options],context,innerContext),this.visitReference(ast.animation,innerContext),context.transformIntoNewTimeline(innerContext.currentTimeline.currentTime),context.previousNode=ast}_applyAnimationRefDelays(animationsRefsOptions,context,innerContext){for(const animationRefOptions of animationsRefsOptions){const animationDelay=animationRefOptions?.delay;if(animationDelay){const animationDelayValue="number"==typeof animationDelay?animationDelay:resolveTimingValue(interpolateParams(animationDelay,animationRefOptions?.params??{},context.errors));innerContext.delayNextStep(animationDelayValue)}}}_visitSubInstructions(instructions,context,options){let furthestTime=context.currentTimeline.currentTime;const duration=null!=options.duration?resolveTimingValue(options.duration):null,delay=null!=options.delay?resolveTimingValue(options.delay):null;return 0!==duration&&instructions.forEach(instruction=>{const instructionTimings=context.appendInstructionToTimeline(instruction,duration,delay);furthestTime=Math.max(furthestTime,instructionTimings.duration+instructionTimings.delay)}),furthestTime}visitReference(ast,context){context.updateOptions(ast.options,!0),visitDslNode(this,ast.animation,context),context.previousNode=ast}visitSequence(ast,context){const subContextCount=context.subContextCount;let ctx=context;const options=ast.options;if(options&&(options.params||options.delay)&&(ctx=context.createSubContext(options),ctx.transformIntoNewTimeline(),null!=options.delay)){6==ctx.previousNode.type&&(ctx.currentTimeline.snapshotCurrentStyles(),ctx.previousNode=DEFAULT_NOOP_PREVIOUS_NODE);const delay=resolveTimingValue(options.delay);ctx.delayNextStep(delay)}ast.steps.length&&(ast.steps.forEach(s=>visitDslNode(this,s,ctx)),ctx.currentTimeline.applyStylesToKeyframe(),ctx.subContextCount>subContextCount&&ctx.transformIntoNewTimeline()),context.previousNode=ast}visitGroup(ast,context){const innerTimelines=[];let furthestTime=context.currentTimeline.currentTime;const delay=ast.options&&ast.options.delay?resolveTimingValue(ast.options.delay):0;ast.steps.forEach(s=>{const innerContext=context.createSubContext(ast.options);delay&&innerContext.delayNextStep(delay),visitDslNode(this,s,innerContext),furthestTime=Math.max(furthestTime,innerContext.currentTimeline.currentTime),innerTimelines.push(innerContext.currentTimeline)}),innerTimelines.forEach(timeline=>context.currentTimeline.mergeTimelineCollectedStyles(timeline)),context.transformIntoNewTimeline(furthestTime),context.previousNode=ast}_visitTiming(ast,context){if(ast.dynamic){const strValue=ast.strValue;return resolveTiming(context.params?interpolateParams(strValue,context.params,context.errors):strValue,context.errors)}return{duration:ast.duration,delay:ast.delay,easing:ast.easing}}visitAnimate(ast,context){const timings=context.currentAnimateTimings=this._visitTiming(ast.timings,context),timeline=context.currentTimeline;timings.delay&&(context.incrementTime(timings.delay),timeline.snapshotCurrentStyles());const style=ast.style;5==style.type?this.visitKeyframes(style,context):(context.incrementTime(timings.duration),this.visitStyle(style,context),timeline.applyStylesToKeyframe()),context.currentAnimateTimings=null,context.previousNode=ast}visitStyle(ast,context){const timeline=context.currentTimeline,timings=context.currentAnimateTimings;!timings&&timeline.hasCurrentStyleProperties()&&timeline.forwardFrame();const easing=timings&&timings.easing||ast.easing;ast.isEmptyStep?timeline.applyEmptyStep(easing):timeline.setStyles(ast.styles,easing,context.errors,context.options),context.previousNode=ast}visitKeyframes(ast,context){const currentAnimateTimings=context.currentAnimateTimings,startTime=context.currentTimeline.duration,duration=currentAnimateTimings.duration,innerTimeline=context.createSubContext().currentTimeline;innerTimeline.easing=currentAnimateTimings.easing,ast.styles.forEach(step=>{innerTimeline.forwardTime((step.offset||0)*duration),innerTimeline.setStyles(step.styles,step.easing,context.errors,context.options),innerTimeline.applyStylesToKeyframe()}),context.currentTimeline.mergeTimelineCollectedStyles(innerTimeline),context.transformIntoNewTimeline(startTime+duration),context.previousNode=ast}visitQuery(ast,context){const startTime=context.currentTimeline.currentTime,options=ast.options||{},delay=options.delay?resolveTimingValue(options.delay):0;delay&&(6===context.previousNode.type||0==startTime&&context.currentTimeline.hasCurrentStyleProperties())&&(context.currentTimeline.snapshotCurrentStyles(),context.previousNode=DEFAULT_NOOP_PREVIOUS_NODE);let furthestTime=startTime;const elms=context.invokeQuery(ast.selector,ast.originalSelector,ast.limit,ast.includeSelf,!!options.optional,context.errors);context.currentQueryTotal=elms.length;let sameElementTimeline=null;elms.forEach((element,i)=>{context.currentQueryIndex=i;const innerContext=context.createSubContext(ast.options,element);delay&&innerContext.delayNextStep(delay),element===context.element&&(sameElementTimeline=innerContext.currentTimeline),visitDslNode(this,ast.animation,innerContext),innerContext.currentTimeline.applyStylesToKeyframe(),furthestTime=Math.max(furthestTime,innerContext.currentTimeline.currentTime)}),context.currentQueryIndex=0,context.currentQueryTotal=0,context.transformIntoNewTimeline(furthestTime),sameElementTimeline&&(context.currentTimeline.mergeTimelineCollectedStyles(sameElementTimeline),context.currentTimeline.snapshotCurrentStyles()),context.previousNode=ast}visitStagger(ast,context){const parentContext=context.parentContext,tl=context.currentTimeline,timings=ast.timings,duration=Math.abs(timings.duration),maxTime=duration*(context.currentQueryTotal-1);let delay=duration*context.currentQueryIndex;switch(timings.duration<0?"reverse":timings.easing){case"reverse":delay=maxTime-delay;break;case"full":delay=parentContext.currentStaggerTime}const timeline=context.currentTimeline;delay&&timeline.delayNextStep(delay);const startingTime=timeline.currentTime;visitDslNode(this,ast.animation,context),context.previousNode=ast,parentContext.currentStaggerTime=tl.currentTime-startingTime+(tl.startTime-parentContext.currentTimeline.startTime)}}__name(AnimationTimelineBuilderVisitor,"AnimationTimelineBuilderVisitor");const DEFAULT_NOOP_PREVIOUS_NODE={};class AnimationTimelineContext{constructor(_driver,element,subInstructions,_enterClassName,_leaveClassName,errors,timelines,initialTimeline){this._driver=_driver,this.element=element,this.subInstructions=subInstructions,this._enterClassName=_enterClassName,this._leaveClassName=_leaveClassName,this.errors=errors,this.timelines=timelines,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=DEFAULT_NOOP_PREVIOUS_NODE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=initialTimeline||new TimelineBuilder(this._driver,element,0),timelines.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(options,skipIfExists){if(!options)return;const newOptions=options;let optionsToUpdate=this.options;null!=newOptions.duration&&(optionsToUpdate.duration=resolveTimingValue(newOptions.duration)),null!=newOptions.delay&&(optionsToUpdate.delay=resolveTimingValue(newOptions.delay));const newParams=newOptions.params;if(newParams){let paramsToUpdate=optionsToUpdate.params;paramsToUpdate||(paramsToUpdate=this.options.params={}),Object.keys(newParams).forEach(name=>{(!skipIfExists||!paramsToUpdate.hasOwnProperty(name))&&(paramsToUpdate[name]=interpolateParams(newParams[name],paramsToUpdate,this.errors))})}}_copyOptions(){const options={};if(this.options){const oldParams=this.options.params;if(oldParams){const params=options.params={};Object.keys(oldParams).forEach(name=>{params[name]=oldParams[name]})}}return options}createSubContext(options=null,element,newTime){const target=element||this.element,context=new AnimationTimelineContext(this._driver,target,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(target,newTime||0));return context.previousNode=this.previousNode,context.currentAnimateTimings=this.currentAnimateTimings,context.options=this._copyOptions(),context.updateOptions(options),context.currentQueryIndex=this.currentQueryIndex,context.currentQueryTotal=this.currentQueryTotal,context.parentContext=this,this.subContextCount++,context}transformIntoNewTimeline(newTime){return this.previousNode=DEFAULT_NOOP_PREVIOUS_NODE,this.currentTimeline=this.currentTimeline.fork(this.element,newTime),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(instruction,duration,delay){const updatedTimings={duration:duration??instruction.duration,delay:this.currentTimeline.currentTime+(delay??0)+instruction.delay,easing:""},builder=new SubTimelineBuilder(this._driver,instruction.element,instruction.keyframes,instruction.preStyleProps,instruction.postStyleProps,updatedTimings,instruction.stretchStartingKeyframe);return this.timelines.push(builder),updatedTimings}incrementTime(time){this.currentTimeline.forwardTime(this.currentTimeline.duration+time)}delayNextStep(delay){delay>0&&this.currentTimeline.delayNextStep(delay)}invokeQuery(selector,originalSelector,limit,includeSelf,optional,errors){let results=[];if(includeSelf&&results.push(this.element),selector.length>0){selector=(selector=selector.replace(ENTER_TOKEN_REGEX,"."+this._enterClassName)).replace(LEAVE_TOKEN_REGEX,"."+this._leaveClassName);let elements=this._driver.query(this.element,selector,1!=limit);0!==limit&&(elements=limit<0?elements.slice(elements.length+limit,elements.length):elements.slice(0,limit)),results.push(...elements)}return!optional&&0==results.length&&errors.push(invalidQuery()),results}}__name(AnimationTimelineContext,"AnimationTimelineContext");class TimelineBuilder{constructor(_driver,element,startTime,_elementTimelineStylesLookup){this._driver=_driver,this.element=element,this.startTime=startTime,this._elementTimelineStylesLookup=_elementTimelineStylesLookup,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(element),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(element,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(delay){const hasPreStyleStep=1===this._keyframes.size&&this._pendingStyles.size;this.duration||hasPreStyleStep?(this.forwardTime(this.currentTime+delay),hasPreStyleStep&&this.snapshotCurrentStyles()):this.startTime+=delay}fork(element,currentTime){return this.applyStylesToKeyframe(),new TimelineBuilder(this._driver,element,currentTime||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(time){this.applyStylesToKeyframe(),this.duration=time,this._loadKeyframe()}_updateStyle(prop,value){this._localTimelineStyles.set(prop,value),this._globalTimelineStyles.set(prop,value),this._styleSummary.set(prop,{time:this.currentTime,value})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(easing){easing&&this._previousKeyframe.set("easing",easing);for(let[prop,value]of this._globalTimelineStyles)this._backFill.set(prop,value||animations.l3),this._currentKeyframe.set(prop,animations.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(input,easing,errors,options){easing&&this._previousKeyframe.set("easing",easing);const params=options&&options.params||{},styles=flattenStyles(input,this._globalTimelineStyles);for(let[prop,value]of styles){const val=interpolateParams(value,params,errors);this._pendingStyles.set(prop,val),this._localTimelineStyles.has(prop)||this._backFill.set(prop,this._globalTimelineStyles.get(prop)??animations.l3),this._updateStyle(prop,val)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((val,prop)=>{this._currentKeyframe.set(prop,val)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((val,prop)=>{this._currentKeyframe.has(prop)||this._currentKeyframe.set(prop,val)}))}snapshotCurrentStyles(){for(let[prop,val]of this._localTimelineStyles)this._pendingStyles.set(prop,val),this._updateStyle(prop,val)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const properties=[];for(let prop in this._currentKeyframe)properties.push(prop);return properties}mergeTimelineCollectedStyles(timeline){timeline._styleSummary.forEach((details1,prop)=>{const details0=this._styleSummary.get(prop);(!details0||details1.time>details0.time)&&this._updateStyle(prop,details1.value)})}buildKeyframes(){this.applyStylesToKeyframe();const preStyleProps=new Set,postStyleProps=new Set,isEmpty=1===this._keyframes.size&&0===this.duration;let finalKeyframes=[];this._keyframes.forEach((keyframe,time)=>{const finalKeyframe=copyStyles(keyframe,new Map,this._backFill);finalKeyframe.forEach((value,prop)=>{value===animations.k1?preStyleProps.add(prop):value===animations.l3&&postStyleProps.add(prop)}),isEmpty||finalKeyframe.set("offset",time/this.duration),finalKeyframes.push(finalKeyframe)});const preProps=preStyleProps.size?iteratorToArray(preStyleProps.values()):[],postProps=postStyleProps.size?iteratorToArray(postStyleProps.values()):[];if(isEmpty){const kf0=finalKeyframes[0],kf1=new Map(kf0);kf0.set("offset",0),kf1.set("offset",1),finalKeyframes=[kf0,kf1]}return createTimelineInstruction(this.element,finalKeyframes,preProps,postProps,this.duration,this.startTime,this.easing,!1)}}__name(TimelineBuilder,"TimelineBuilder");class SubTimelineBuilder extends TimelineBuilder{constructor(driver,element,keyframes,preStyleProps,postStyleProps,timings,_stretchStartingKeyframe=!1){super(driver,element,timings.delay),this.keyframes=keyframes,this.preStyleProps=preStyleProps,this.postStyleProps=postStyleProps,this._stretchStartingKeyframe=_stretchStartingKeyframe,this.timings={duration:timings.duration,delay:timings.delay,easing:timings.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let keyframes=this.keyframes,{delay,duration,easing}=this.timings;if(this._stretchStartingKeyframe&&delay){const newKeyframes=[],totalTime=duration+delay,startingGap=delay/totalTime,newFirstKeyframe=copyStyles(keyframes[0]);newFirstKeyframe.set("offset",0),newKeyframes.push(newFirstKeyframe);const oldFirstKeyframe=copyStyles(keyframes[0]);oldFirstKeyframe.set("offset",roundOffset(startingGap)),newKeyframes.push(oldFirstKeyframe);const limit=keyframes.length-1;for(let i=1;i<=limit;i++){let kf=copyStyles(keyframes[i]);const oldOffset=kf.get("offset");kf.set("offset",roundOffset((delay+oldOffset*duration)/totalTime)),newKeyframes.push(kf)}duration=totalTime,delay=0,easing="",keyframes=newKeyframes}return createTimelineInstruction(this.element,keyframes,this.preStyleProps,this.postStyleProps,duration,delay,easing,!0)}}function roundOffset(offset,decimalPoints=3){const mult=Math.pow(10,decimalPoints-1);return Math.round(offset*mult)/mult}function flattenStyles(input,allStyles){const styles=new Map;let allProperties;return input.forEach(token=>{if("*"===token){allProperties=allProperties||allStyles.keys();for(let prop of allProperties)styles.set(prop,animations.l3)}else copyStyles(token,styles)}),styles}__name(SubTimelineBuilder,"SubTimelineBuilder"),__name(roundOffset,"roundOffset"),__name(flattenStyles,"flattenStyles"),__name(class Animation{constructor(_driver,input){this._driver=_driver;const errors=[],ast=buildAnimationAst(_driver,input,errors,[]);if(errors.length)throw validationFailed();this._animationAst=ast}buildTimelines(element,startingStyles,destinationStyles,options,subInstructions){const start=Array.isArray(startingStyles)?normalizeStyles(startingStyles):startingStyles,dest=Array.isArray(destinationStyles)?normalizeStyles(destinationStyles):destinationStyles,errors=[];subInstructions=subInstructions||new ElementInstructionMap;const result=buildAnimationTimelines(this._driver,element,this._animationAst,"ng-enter","ng-leave",start,dest,options,subInstructions,errors);if(errors.length)throw buildingFailed();return result}},"Animation");class AnimationStyleNormalizer{}__name(AnimationStyleNormalizer,"AnimationStyleNormalizer"),__name(class NoopAnimationStyleNormalizer{normalizePropertyName(propertyName,errors){return propertyName}normalizeStyleValue(userProvidedProperty,normalizedProperty,value,errors){return value}},"NoopAnimationStyleNormalizer");const DIMENSIONAL_PROP_SET=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class WebAnimationsStyleNormalizer extends AnimationStyleNormalizer{normalizePropertyName(propertyName,errors){return dashCaseToCamelCase(propertyName)}normalizeStyleValue(userProvidedProperty,normalizedProperty,value,errors){let unit="";const strVal=value.toString().trim();if(DIMENSIONAL_PROP_SET.has(normalizedProperty)&&0!==value&&"0"!==value)if("number"==typeof value)unit="px";else{const valAndSuffixMatch=value.match(/^[+-]?[\d\.]+([a-z]*)$/);valAndSuffixMatch&&0==valAndSuffixMatch[1].length&&errors.push(invalidCssUnitValue())}return strVal+unit}}function createTransitionInstruction(element,triggerName,fromState,toState,isRemovalTransition,fromStyles,toStyles,timelines,queriedElements,preStyleProps,postStyleProps,totalTime,errors){return{type:0,element,triggerName,isRemovalTransition,fromState,fromStyles,toState,toStyles,timelines,queriedElements,preStyleProps,postStyleProps,totalTime,errors}}__name(WebAnimationsStyleNormalizer,"WebAnimationsStyleNormalizer"),__name(createTransitionInstruction,"createTransitionInstruction");const EMPTY_OBJECT={};class AnimationTransitionFactory{constructor(_triggerName,ast,_stateStyles){this._triggerName=_triggerName,this.ast=ast,this._stateStyles=_stateStyles}match(currentState,nextState,element,params){return oneOrMoreTransitionsMatch(this.ast.matchers,currentState,nextState,element,params)}buildStyles(stateName,params,errors){let styler=this._stateStyles.get("*");return void 0!==stateName&&(styler=this._stateStyles.get(stateName?.toString())||styler),styler?styler.buildStyles(params,errors):new Map}build(driver,element,currentState,nextState,enterClassName,leaveClassName,currentOptions,nextOptions,subInstructions,skipAstBuild){const errors=[],transitionAnimationParams=this.ast.options&&this.ast.options.params||EMPTY_OBJECT,currentStateStyles=this.buildStyles(currentState,currentOptions&&currentOptions.params||EMPTY_OBJECT,errors),nextAnimationParams=nextOptions&&nextOptions.params||EMPTY_OBJECT,nextStateStyles=this.buildStyles(nextState,nextAnimationParams,errors),queriedElements=new Set,preStyleMap=new Map,postStyleMap=new Map,isRemoval="void"===nextState,animationOptions={params:applyParamDefaults(nextAnimationParams,transitionAnimationParams),delay:this.ast.options?.delay},timelines=skipAstBuild?[]:buildAnimationTimelines(driver,element,this.ast.animation,enterClassName,leaveClassName,currentStateStyles,nextStateStyles,animationOptions,subInstructions,errors);let totalTime=0;if(timelines.forEach(tl=>{totalTime=Math.max(tl.duration+tl.delay,totalTime)}),errors.length)return createTransitionInstruction(element,this._triggerName,currentState,nextState,isRemoval,currentStateStyles,nextStateStyles,[],[],preStyleMap,postStyleMap,totalTime,errors);timelines.forEach(tl=>{const elm=tl.element,preProps=getOrSetDefaultValue(preStyleMap,elm,new Set);tl.preStyleProps.forEach(prop=>preProps.add(prop));const postProps=getOrSetDefaultValue(postStyleMap,elm,new Set);tl.postStyleProps.forEach(prop=>postProps.add(prop)),elm!==element&&queriedElements.add(elm)});const queriedElementsList=iteratorToArray(queriedElements.values());return createTransitionInstruction(element,this._triggerName,currentState,nextState,isRemoval,currentStateStyles,nextStateStyles,timelines,queriedElementsList,preStyleMap,postStyleMap,totalTime)}}function oneOrMoreTransitionsMatch(matchFns,currentState,nextState,element,params){return matchFns.some(fn=>fn(currentState,nextState,element,params))}function applyParamDefaults(userParams,defaults){const result=copyObj(defaults);for(const key in userParams)userParams.hasOwnProperty(key)&&null!=userParams[key]&&(result[key]=userParams[key]);return result}__name(AnimationTransitionFactory,"AnimationTransitionFactory"),__name(function checkNonAnimatableInTimelines(timelines,triggerName,driver){if(!driver.validateAnimatableStyleProperty)return;const allowedNonAnimatableProps=new Set(["easing"]),invalidNonAnimatableProps=new Set;timelines.forEach(({keyframes})=>{const nonAnimatablePropsInitialValues=new Map;keyframes.forEach(keyframe=>{const entriesToCheck=Array.from(keyframe.entries()).filter(([prop])=>!allowedNonAnimatableProps.has(prop));for(const[prop,value]of entriesToCheck)driver.validateAnimatableStyleProperty(prop)||(nonAnimatablePropsInitialValues.has(prop)&&!invalidNonAnimatableProps.has(prop)?nonAnimatablePropsInitialValues.get(prop)!==value&&invalidNonAnimatableProps.add(prop):nonAnimatablePropsInitialValues.set(prop,value))})}),invalidNonAnimatableProps.size>0&&console.warn(`Warning: The animation trigger "${triggerName}" is attempting to animate the following not animatable properties: `+Array.from(invalidNonAnimatableProps).join(", ")+"\n(to check the list of all animatable properties visit https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties)")},"checkNonAnimatableInTimelines"),__name(oneOrMoreTransitionsMatch,"oneOrMoreTransitionsMatch"),__name(applyParamDefaults,"applyParamDefaults");class AnimationStateStyles{constructor(styles,defaultParams,normalizer){this.styles=styles,this.defaultParams=defaultParams,this.normalizer=normalizer}buildStyles(params,errors){const finalStyles=new Map,combinedParams=copyObj(this.defaultParams);return Object.keys(params).forEach(key=>{const value=params[key];null!==value&&(combinedParams[key]=value)}),this.styles.styles.forEach(value=>{"string"!=typeof value&&value.forEach((val,prop)=>{val&&(val=interpolateParams(val,combinedParams,errors));const normalizedProp=this.normalizer.normalizePropertyName(prop,errors);val=this.normalizer.normalizeStyleValue(prop,normalizedProp,val,errors),finalStyles.set(prop,val)})}),finalStyles}}function buildTrigger(name,ast,normalizer){return new AnimationTrigger(name,ast,normalizer)}__name(AnimationStateStyles,"AnimationStateStyles"),__name(buildTrigger,"buildTrigger");class AnimationTrigger{constructor(name,ast,_normalizer){this.name=name,this.ast=ast,this._normalizer=_normalizer,this.transitionFactories=[],this.states=new Map,ast.states.forEach(ast2=>{this.states.set(ast2.name,new AnimationStateStyles(ast2.style,ast2.options&&ast2.options.params||{},_normalizer))}),balanceProperties(this.states,"true","1"),balanceProperties(this.states,"false","0"),ast.transitions.forEach(ast2=>{this.transitionFactories.push(new AnimationTransitionFactory(name,ast2,this.states))}),this.fallbackTransition=createFallbackTransition(name,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(currentState,nextState,element,params){return this.transitionFactories.find(f=>f.match(currentState,nextState,element,params))||null}matchStyles(currentState,params,errors){return this.fallbackTransition.buildStyles(currentState,params,errors)}}function createFallbackTransition(triggerName,states,normalizer){return new AnimationTransitionFactory(triggerName,{type:1,animation:{type:2,steps:[],options:null},matchers:[(fromState,toState)=>!0],options:null,queryCount:0,depCount:0},states)}function balanceProperties(stateMap,key1,key2){stateMap.has(key1)?stateMap.has(key2)||stateMap.set(key2,stateMap.get(key1)):stateMap.has(key2)&&stateMap.set(key1,stateMap.get(key2))}__name(AnimationTrigger,"AnimationTrigger"),__name(createFallbackTransition,"createFallbackTransition"),__name(balanceProperties,"balanceProperties");const EMPTY_INSTRUCTION_MAP=new ElementInstructionMap;class TimelineAnimationEngine{constructor(bodyNode,_driver,_normalizer){this.bodyNode=bodyNode,this._driver=_driver,this._normalizer=_normalizer,this._animations=new Map,this._playersById=new Map,this.players=[]}register(id,metadata){const errors=[],ast=buildAnimationAst(this._driver,metadata,errors,[]);if(errors.length)throw registerFailed();this._animations.set(id,ast)}_buildPlayer(i,preStyles,postStyles){const element=i.element,keyframes=normalizeKeyframes$1(this._normalizer,i.keyframes,preStyles,postStyles);return this._driver.animate(element,keyframes,i.duration,i.delay,i.easing,[],!0)}create(id,element,options={}){const errors=[],ast=this._animations.get(id);let instructions;const autoStylesMap=new Map;if(ast?(instructions=buildAnimationTimelines(this._driver,element,ast,"ng-enter","ng-leave",new Map,new Map,options,EMPTY_INSTRUCTION_MAP,errors),instructions.forEach(inst=>{const styles=getOrSetDefaultValue(autoStylesMap,inst.element,new Map);inst.postStyleProps.forEach(prop=>styles.set(prop,null))})):(errors.push(missingOrDestroyedAnimation()),instructions=[]),errors.length)throw createAnimationFailed();autoStylesMap.forEach((styles,element2)=>{styles.forEach((_,prop)=>{styles.set(prop,this._driver.computeStyle(element2,prop,animations.l3))})});const player=optimizeGroupPlayer(instructions.map(i=>{const styles=autoStylesMap.get(i.element);return this._buildPlayer(i,new Map,styles)}));return this._playersById.set(id,player),player.onDestroy(()=>this.destroy(id)),this.players.push(player),player}destroy(id){const player=this._getPlayer(id);player.destroy(),this._playersById.delete(id);const index=this.players.indexOf(player);index>=0&&this.players.splice(index,1)}_getPlayer(id){const player=this._playersById.get(id);if(!player)throw missingPlayer();return player}listen(id,element,eventName,callback){const baseEvent=makeAnimationEvent(element,"","","");return listenOnPlayer(this._getPlayer(id),eventName,baseEvent,callback),()=>{}}command(id,element,command,args){if("register"==command)return void this.register(id,args[0]);if("create"==command)return void this.create(id,element,args[0]||{});const player=this._getPlayer(id);switch(command){case"play":player.play();break;case"pause":player.pause();break;case"reset":player.reset();break;case"restart":player.restart();break;case"finish":player.finish();break;case"init":player.init();break;case"setPosition":player.setPosition(parseFloat(args[0]));break;case"destroy":this.destroy(id)}}}__name(TimelineAnimationEngine,"TimelineAnimationEngine");const EMPTY_PLAYER_ARRAY=[],NULL_REMOVAL_STATE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},NULL_REMOVED_QUERIED_STATE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},REMOVAL_FLAG="__ng_removed";class StateValue{get params(){return this.options.params}constructor(input,namespaceId=""){this.namespaceId=namespaceId;const isObj=input&&input.hasOwnProperty("value");if(this.value=normalizeTriggerValue(isObj?input.value:input),isObj){const options=copyObj(input);delete options.value,this.options=options}else this.options={};this.options.params||(this.options.params={})}absorbOptions(options){const newParams=options.params;if(newParams){const oldParams=this.options.params;Object.keys(newParams).forEach(prop=>{null==oldParams[prop]&&(oldParams[prop]=newParams[prop])})}}}__name(StateValue,"StateValue");const DEFAULT_STATE_VALUE=new StateValue("void");class AnimationTransitionNamespace{constructor(id,hostElement,_engine){this.id=id,this.hostElement=hostElement,this._engine=_engine,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+id,addClass(hostElement,this._hostClassName)}listen(element,name,phase,callback){if(!this._triggers.has(name))throw missingTrigger();if(null==phase||0==phase.length)throw missingEvent();if(!isTriggerEventValid(phase))throw unsupportedTriggerEvent();const listeners=getOrSetDefaultValue(this._elementListeners,element,[]),data={name,phase,callback};listeners.push(data);const triggersWithStates=getOrSetDefaultValue(this._engine.statesByElement,element,new Map);return triggersWithStates.has(name)||(addClass(element,"ng-trigger"),addClass(element,"ng-trigger-"+name),triggersWithStates.set(name,DEFAULT_STATE_VALUE)),()=>{this._engine.afterFlush(()=>{const index=listeners.indexOf(data);index>=0&&listeners.splice(index,1),this._triggers.has(name)||triggersWithStates.delete(name)})}}register(name,ast){return!this._triggers.has(name)&&(this._triggers.set(name,ast),!0)}_getTrigger(name){const trigger=this._triggers.get(name);if(!trigger)throw unregisteredTrigger();return trigger}trigger(element,triggerName,value,defaultToFallback=!0){const trigger=this._getTrigger(triggerName),player=new TransitionAnimationPlayer(this.id,triggerName,element);let triggersWithStates=this._engine.statesByElement.get(element);triggersWithStates||(addClass(element,"ng-trigger"),addClass(element,"ng-trigger-"+triggerName),this._engine.statesByElement.set(element,triggersWithStates=new Map));let fromState=triggersWithStates.get(triggerName);const toState=new StateValue(value,this.id);if(!(value&&value.hasOwnProperty("value"))&&fromState&&toState.absorbOptions(fromState.options),triggersWithStates.set(triggerName,toState),fromState||(fromState=DEFAULT_STATE_VALUE),"void"!==toState.value&&fromState.value===toState.value){if(!objEquals(fromState.params,toState.params)){const errors=[],fromStyles=trigger.matchStyles(fromState.value,fromState.params,errors),toStyles=trigger.matchStyles(toState.value,toState.params,errors);errors.length?this._engine.reportError(errors):this._engine.afterFlush(()=>{eraseStyles(element,fromStyles),setStyles(element,toStyles)})}return}const playersOnElement=getOrSetDefaultValue(this._engine.playersByElement,element,[]);playersOnElement.forEach(player2=>{player2.namespaceId==this.id&&player2.triggerName==triggerName&&player2.queued&&player2.destroy()});let transition=trigger.matchTransition(fromState.value,toState.value,element,toState.params),isFallbackTransition=!1;if(!transition){if(!defaultToFallback)return;transition=trigger.fallbackTransition,isFallbackTransition=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element,triggerName,transition,fromState,toState,player,isFallbackTransition}),isFallbackTransition||(addClass(element,"ng-animate-queued"),player.onStart(()=>{removeClass(element,"ng-animate-queued")})),player.onDone(()=>{let index=this.players.indexOf(player);index>=0&&this.players.splice(index,1);const players=this._engine.playersByElement.get(element);if(players){let index2=players.indexOf(player);index2>=0&&players.splice(index2,1)}}),this.players.push(player),playersOnElement.push(player),player}deregister(name){this._triggers.delete(name),this._engine.statesByElement.forEach(stateMap=>stateMap.delete(name)),this._elementListeners.forEach((listeners,element)=>{this._elementListeners.set(element,listeners.filter(entry=>entry.name!=name))})}clearElementCache(element){this._engine.statesByElement.delete(element),this._elementListeners.delete(element);const elementPlayers=this._engine.playersByElement.get(element);elementPlayers&&(elementPlayers.forEach(player=>player.destroy()),this._engine.playersByElement.delete(element))}_signalRemovalForInnerTriggers(rootElement,context){const elements=this._engine.driver.query(rootElement,NG_TRIGGER_SELECTOR,!0);elements.forEach(elm=>{if(elm[REMOVAL_FLAG])return;const namespaces=this._engine.fetchNamespacesByElement(elm);namespaces.size?namespaces.forEach(ns=>ns.triggerLeaveAnimation(elm,context,!1,!0)):this.clearElementCache(elm)}),this._engine.afterFlushAnimationsDone(()=>elements.forEach(elm=>this.clearElementCache(elm)))}triggerLeaveAnimation(element,context,destroyAfterComplete,defaultToFallback){const triggerStates=this._engine.statesByElement.get(element),previousTriggersValues=new Map;if(triggerStates){const players=[];if(triggerStates.forEach((state,triggerName)=>{if(previousTriggersValues.set(triggerName,state.value),this._triggers.has(triggerName)){const player=this.trigger(element,triggerName,"void",defaultToFallback);player&&players.push(player)}}),players.length)return this._engine.markElementAsRemoved(this.id,element,!0,context,previousTriggersValues),destroyAfterComplete&&optimizeGroupPlayer(players).onDone(()=>this._engine.processLeaveNode(element)),!0}return!1}prepareLeaveAnimationListeners(element){const listeners=this._elementListeners.get(element),elementStates=this._engine.statesByElement.get(element);if(listeners&&elementStates){const visitedTriggers=new Set;listeners.forEach(listener=>{const triggerName=listener.name;if(visitedTriggers.has(triggerName))return;visitedTriggers.add(triggerName);const transition=this._triggers.get(triggerName).fallbackTransition,fromState=elementStates.get(triggerName)||DEFAULT_STATE_VALUE,toState=new StateValue("void"),player=new TransitionAnimationPlayer(this.id,triggerName,element);this._engine.totalQueuedPlayers++,this._queue.push({element,triggerName,transition,fromState,toState,player,isFallbackTransition:!0})})}}removeNode(element,context){const engine=this._engine;if(element.childElementCount&&this._signalRemovalForInnerTriggers(element,context),this.triggerLeaveAnimation(element,context,!0))return;let containsPotentialParentTransition=!1;if(engine.totalAnimations){const currentPlayers=engine.players.length?engine.playersByQueriedElement.get(element):[];if(currentPlayers&&currentPlayers.length)containsPotentialParentTransition=!0;else{let parent=element;for(;parent=parent.parentNode;)if(engine.statesByElement.get(parent)){containsPotentialParentTransition=!0;break}}}if(this.prepareLeaveAnimationListeners(element),containsPotentialParentTransition)engine.markElementAsRemoved(this.id,element,!1,context);else{const removalFlag=element[REMOVAL_FLAG];(!removalFlag||removalFlag===NULL_REMOVAL_STATE)&&(engine.afterFlush(()=>this.clearElementCache(element)),engine.destroyInnerAnimations(element),engine._onRemovalComplete(element,context))}}insertNode(element,parent){addClass(element,this._hostClassName)}drainQueuedTransitions(microtaskId){const instructions=[];return this._queue.forEach(entry=>{const player=entry.player;if(player.destroyed)return;const element=entry.element,listeners=this._elementListeners.get(element);listeners&&listeners.forEach(listener=>{if(listener.name==entry.triggerName){const baseEvent=makeAnimationEvent(element,entry.triggerName,entry.fromState.value,entry.toState.value);baseEvent._data=microtaskId,listenOnPlayer(entry.player,listener.phase,baseEvent,listener.callback)}}),player.markedForDestroy?this._engine.afterFlush(()=>{player.destroy()}):instructions.push(entry)}),this._queue=[],instructions.sort((a,b)=>{const d0=a.transition.ast.depCount,d1=b.transition.ast.depCount;return 0==d0||0==d1?d0-d1:this._engine.driver.containsElement(a.element,b.element)?1:-1})}destroy(context){this.players.forEach(p=>p.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,context)}elementContainsData(element){let containsData=!1;return this._elementListeners.has(element)&&(containsData=!0),containsData=!!this._queue.find(entry=>entry.element===element)||containsData,containsData}}__name(AnimationTransitionNamespace,"AnimationTransitionNamespace");class TransitionAnimationEngine{_onRemovalComplete(element,context){this.onRemovalComplete(element,context)}constructor(bodyNode,driver,_normalizer){this.bodyNode=bodyNode,this.driver=driver,this._normalizer=_normalizer,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(element,context)=>{}}get queuedPlayers(){const players=[];return this._namespaceList.forEach(ns=>{ns.players.forEach(player=>{player.queued&&players.push(player)})}),players}createNamespace(namespaceId,hostElement){const ns=new AnimationTransitionNamespace(namespaceId,hostElement,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,hostElement)?this._balanceNamespaceList(ns,hostElement):(this.newHostElements.set(hostElement,ns),this.collectEnterElement(hostElement)),this._namespaceLookup[namespaceId]=ns}_balanceNamespaceList(ns,hostElement){const namespaceList=this._namespaceList,namespacesByHostElement=this.namespacesByHostElement;if(namespaceList.length-1>=0){let found=!1,ancestor=this.driver.getParentElement(hostElement);for(;ancestor;){const ancestorNs=namespacesByHostElement.get(ancestor);if(ancestorNs){const index=namespaceList.indexOf(ancestorNs);namespaceList.splice(index+1,0,ns),found=!0;break}ancestor=this.driver.getParentElement(ancestor)}found||namespaceList.unshift(ns)}else namespaceList.push(ns);return namespacesByHostElement.set(hostElement,ns),ns}register(namespaceId,hostElement){let ns=this._namespaceLookup[namespaceId];return ns||(ns=this.createNamespace(namespaceId,hostElement)),ns}registerTrigger(namespaceId,name,trigger){let ns=this._namespaceLookup[namespaceId];ns&&ns.register(name,trigger)&&this.totalAnimations++}destroy(namespaceId,context){if(!namespaceId)return;const ns=this._fetchNamespace(namespaceId);this.afterFlush(()=>{this.namespacesByHostElement.delete(ns.hostElement),delete this._namespaceLookup[namespaceId];const index=this._namespaceList.indexOf(ns);index>=0&&this._namespaceList.splice(index,1)}),this.afterFlushAnimationsDone(()=>ns.destroy(context))}_fetchNamespace(id){return this._namespaceLookup[id]}fetchNamespacesByElement(element){const namespaces=new Set,elementStates=this.statesByElement.get(element);if(elementStates)for(let stateValue of elementStates.values())if(stateValue.namespaceId){const ns=this._fetchNamespace(stateValue.namespaceId);ns&&namespaces.add(ns)}return namespaces}trigger(namespaceId,element,name,value){if(isElementNode(element)){const ns=this._fetchNamespace(namespaceId);if(ns)return ns.trigger(element,name,value),!0}return!1}insertNode(namespaceId,element,parent,insertBefore){if(!isElementNode(element))return;const details=element[REMOVAL_FLAG];if(details&&details.setForRemoval){details.setForRemoval=!1,details.setForMove=!0;const index=this.collectedLeaveElements.indexOf(element);index>=0&&this.collectedLeaveElements.splice(index,1)}if(namespaceId){const ns=this._fetchNamespace(namespaceId);ns&&ns.insertNode(element,parent)}insertBefore&&this.collectEnterElement(element)}collectEnterElement(element){this.collectedEnterElements.push(element)}markElementAsDisabled(element,value){value?this.disabledNodes.has(element)||(this.disabledNodes.add(element),addClass(element,"ng-animate-disabled")):this.disabledNodes.has(element)&&(this.disabledNodes.delete(element),removeClass(element,"ng-animate-disabled"))}removeNode(namespaceId,element,isHostElement,context){if(isElementNode(element)){const ns=namespaceId?this._fetchNamespace(namespaceId):null;if(ns?ns.removeNode(element,context):this.markElementAsRemoved(namespaceId,element,!1,context),isHostElement){const hostNS=this.namespacesByHostElement.get(element);hostNS&&hostNS.id!==namespaceId&&hostNS.removeNode(element,context)}}else this._onRemovalComplete(element,context)}markElementAsRemoved(namespaceId,element,hasAnimation,context,previousTriggersValues){this.collectedLeaveElements.push(element),element[REMOVAL_FLAG]={namespaceId,setForRemoval:context,hasAnimation,removedBeforeQueried:!1,previousTriggersValues}}listen(namespaceId,element,name,phase,callback){return isElementNode(element)?this._fetchNamespace(namespaceId).listen(element,name,phase,callback):()=>{}}_buildInstruction(entry,subTimelines,enterClassName,leaveClassName,skipBuildAst){return entry.transition.build(this.driver,entry.element,entry.fromState.value,entry.toState.value,enterClassName,leaveClassName,entry.fromState.options,entry.toState.options,subTimelines,skipBuildAst)}destroyInnerAnimations(containerElement){let elements=this.driver.query(containerElement,NG_TRIGGER_SELECTOR,!0);elements.forEach(element=>this.destroyActiveAnimationsForElement(element)),0!=this.playersByQueriedElement.size&&(elements=this.driver.query(containerElement,NG_ANIMATING_SELECTOR,!0),elements.forEach(element=>this.finishActiveQueriedAnimationOnElement(element)))}destroyActiveAnimationsForElement(element){const players=this.playersByElement.get(element);players&&players.forEach(player=>{player.queued?player.markedForDestroy=!0:player.destroy()})}finishActiveQueriedAnimationOnElement(element){const players=this.playersByQueriedElement.get(element);players&&players.forEach(player=>player.finish())}whenRenderingDone(){return new Promise(resolve=>{if(this.players.length)return optimizeGroupPlayer(this.players).onDone(()=>resolve());resolve()})}processLeaveNode(element){const details=element[REMOVAL_FLAG];if(details&&details.setForRemoval){if(element[REMOVAL_FLAG]=NULL_REMOVAL_STATE,details.namespaceId){this.destroyInnerAnimations(element);const ns=this._fetchNamespace(details.namespaceId);ns&&ns.clearElementCache(element)}this._onRemovalComplete(element,details.setForRemoval)}element.classList?.contains("ng-animate-disabled")&&this.markElementAsDisabled(element,!1),this.driver.query(element,".ng-animate-disabled",!0).forEach(node=>{this.markElementAsDisabled(node,!1)})}flush(microtaskId=-1){let players=[];if(this.newHostElements.size&&(this.newHostElements.forEach((ns,element)=>this._balanceNamespaceList(ns,element)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)addClass(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const cleanupFns=[];try{players=this._flushAnimations(cleanupFns,microtaskId)}finally{for(let i=0;i<cleanupFns.length;i++)cleanupFns[i]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(fn=>fn()),this._flushFns=[],this._whenQuietFns.length){const quietFns=this._whenQuietFns;this._whenQuietFns=[],players.length?optimizeGroupPlayer(players).onDone(()=>{quietFns.forEach(fn=>fn())}):quietFns.forEach(fn=>fn())}}reportError(errors){throw triggerTransitionsFailed()}_flushAnimations(cleanupFns,microtaskId){const subTimelines=new ElementInstructionMap,skippedPlayers=[],skippedPlayersMap=new Map,queuedInstructions=[],queriedElements=new Map,allPreStyleElements=new Map,allPostStyleElements=new Map,disabledElementsSet=new Set;this.disabledNodes.forEach(node=>{disabledElementsSet.add(node);const nodesThatAreDisabled=this.driver.query(node,".ng-animate-queued",!0);for(let i2=0;i2<nodesThatAreDisabled.length;i2++)disabledElementsSet.add(nodesThatAreDisabled[i2])});const bodyNode=this.bodyNode,allTriggerElements=Array.from(this.statesByElement.keys()),enterNodeMap=buildRootMap(allTriggerElements,this.collectedEnterElements),enterNodeMapIds=new Map;let i=0;enterNodeMap.forEach((nodes,root)=>{const className="ng-enter"+i++;enterNodeMapIds.set(root,className),nodes.forEach(node=>addClass(node,className))});const allLeaveNodes=[],mergedLeaveNodes=new Set,leaveNodesWithoutAnimations=new Set;for(let i2=0;i2<this.collectedLeaveElements.length;i2++){const element=this.collectedLeaveElements[i2],details=element[REMOVAL_FLAG];details&&details.setForRemoval&&(allLeaveNodes.push(element),mergedLeaveNodes.add(element),details.hasAnimation?this.driver.query(element,".ng-star-inserted",!0).forEach(elm=>mergedLeaveNodes.add(elm)):leaveNodesWithoutAnimations.add(element))}const leaveNodeMapIds=new Map,leaveNodeMap=buildRootMap(allTriggerElements,Array.from(mergedLeaveNodes));leaveNodeMap.forEach((nodes,root)=>{const className="ng-leave"+i++;leaveNodeMapIds.set(root,className),nodes.forEach(node=>addClass(node,className))}),cleanupFns.push(()=>{enterNodeMap.forEach((nodes,root)=>{const className=enterNodeMapIds.get(root);nodes.forEach(node=>removeClass(node,className))}),leaveNodeMap.forEach((nodes,root)=>{const className=leaveNodeMapIds.get(root);nodes.forEach(node=>removeClass(node,className))}),allLeaveNodes.forEach(element=>{this.processLeaveNode(element)})});const allPlayers=[],erroneousTransitions=[];for(let i2=this._namespaceList.length-1;i2>=0;i2--)this._namespaceList[i2].drainQueuedTransitions(microtaskId).forEach(entry=>{const player=entry.player,element=entry.element;if(allPlayers.push(player),this.collectedEnterElements.length){const details=element[REMOVAL_FLAG];if(details&&details.setForMove){if(details.previousTriggersValues&&details.previousTriggersValues.has(entry.triggerName)){const previousValue=details.previousTriggersValues.get(entry.triggerName),triggersWithStates=this.statesByElement.get(entry.element);if(triggersWithStates&&triggersWithStates.has(entry.triggerName)){const state=triggersWithStates.get(entry.triggerName);state.value=previousValue,triggersWithStates.set(entry.triggerName,state)}}return void player.destroy()}}const nodeIsOrphaned=!bodyNode||!this.driver.containsElement(bodyNode,element),leaveClassName=leaveNodeMapIds.get(element),enterClassName=enterNodeMapIds.get(element),instruction=this._buildInstruction(entry,subTimelines,enterClassName,leaveClassName,nodeIsOrphaned);if(instruction.errors&&instruction.errors.length)return void erroneousTransitions.push(instruction);if(nodeIsOrphaned)return player.onStart(()=>eraseStyles(element,instruction.fromStyles)),player.onDestroy(()=>setStyles(element,instruction.toStyles)),void skippedPlayers.push(player);if(entry.isFallbackTransition)return player.onStart(()=>eraseStyles(element,instruction.fromStyles)),player.onDestroy(()=>setStyles(element,instruction.toStyles)),void skippedPlayers.push(player);const timelines=[];instruction.timelines.forEach(tl=>{tl.stretchStartingKeyframe=!0,this.disabledNodes.has(tl.element)||timelines.push(tl)}),instruction.timelines=timelines,subTimelines.append(element,instruction.timelines),queuedInstructions.push({instruction,player,element}),instruction.queriedElements.forEach(element2=>getOrSetDefaultValue(queriedElements,element2,[]).push(player)),instruction.preStyleProps.forEach((stringMap,element2)=>{if(stringMap.size){let setVal=allPreStyleElements.get(element2);setVal||allPreStyleElements.set(element2,setVal=new Set),stringMap.forEach((_,prop)=>setVal.add(prop))}}),instruction.postStyleProps.forEach((stringMap,element2)=>{let setVal=allPostStyleElements.get(element2);setVal||allPostStyleElements.set(element2,setVal=new Set),stringMap.forEach((_,prop)=>setVal.add(prop))})});if(erroneousTransitions.length){const errors=[];erroneousTransitions.forEach(instruction=>{errors.push(transitionFailed())}),allPlayers.forEach(player=>player.destroy()),this.reportError(errors)}const allPreviousPlayersMap=new Map,animationElementMap=new Map;queuedInstructions.forEach(entry=>{const element=entry.element;subTimelines.has(element)&&(animationElementMap.set(element,element),this._beforeAnimationBuild(entry.player.namespaceId,entry.instruction,allPreviousPlayersMap))}),skippedPlayers.forEach(player=>{const element=player.element;this._getPreviousPlayers(element,!1,player.namespaceId,player.triggerName,null).forEach(prevPlayer=>{getOrSetDefaultValue(allPreviousPlayersMap,element,[]).push(prevPlayer),prevPlayer.destroy()})});const replaceNodes=allLeaveNodes.filter(node=>replacePostStylesAsPre(node,allPreStyleElements,allPostStyleElements)),postStylesMap=new Map;cloakAndComputeStyles(postStylesMap,this.driver,leaveNodesWithoutAnimations,allPostStyleElements,animations.l3).forEach(node=>{replacePostStylesAsPre(node,allPreStyleElements,allPostStyleElements)&&replaceNodes.push(node)});const preStylesMap=new Map;enterNodeMap.forEach((nodes,root)=>{cloakAndComputeStyles(preStylesMap,this.driver,new Set(nodes),allPreStyleElements,animations.k1)}),replaceNodes.forEach(node=>{const post=postStylesMap.get(node),pre=preStylesMap.get(node);postStylesMap.set(node,new Map([...post?.entries()??[],...pre?.entries()??[]]))});const rootPlayers=[],subPlayers=[],NO_PARENT_ANIMATION_ELEMENT_DETECTED={};queuedInstructions.forEach(entry=>{const{element,player,instruction}=entry;if(subTimelines.has(element)){if(disabledElementsSet.has(element))return player.onDestroy(()=>setStyles(element,instruction.toStyles)),player.disabled=!0,player.overrideTotalTime(instruction.totalTime),void skippedPlayers.push(player);let parentWithAnimation=NO_PARENT_ANIMATION_ELEMENT_DETECTED;if(animationElementMap.size>1){let elm=element;const parentsToAdd=[];for(;elm=elm.parentNode;){const detectedParent=animationElementMap.get(elm);if(detectedParent){parentWithAnimation=detectedParent;break}parentsToAdd.push(elm)}parentsToAdd.forEach(parent=>animationElementMap.set(parent,parentWithAnimation))}const innerPlayer=this._buildAnimation(player.namespaceId,instruction,allPreviousPlayersMap,skippedPlayersMap,preStylesMap,postStylesMap);if(player.setRealPlayer(innerPlayer),parentWithAnimation===NO_PARENT_ANIMATION_ELEMENT_DETECTED)rootPlayers.push(player);else{const parentPlayers=this.playersByElement.get(parentWithAnimation);parentPlayers&&parentPlayers.length&&(player.parentPlayer=optimizeGroupPlayer(parentPlayers)),skippedPlayers.push(player)}}else eraseStyles(element,instruction.fromStyles),player.onDestroy(()=>setStyles(element,instruction.toStyles)),subPlayers.push(player),disabledElementsSet.has(element)&&skippedPlayers.push(player)}),subPlayers.forEach(player=>{const playersForElement=skippedPlayersMap.get(player.element);if(playersForElement&&playersForElement.length){const innerPlayer=optimizeGroupPlayer(playersForElement);player.setRealPlayer(innerPlayer)}}),skippedPlayers.forEach(player=>{player.parentPlayer?player.syncPlayerEvents(player.parentPlayer):player.destroy()});for(let i2=0;i2<allLeaveNodes.length;i2++){const element=allLeaveNodes[i2],details=element[REMOVAL_FLAG];if(removeClass(element,"ng-leave"),details&&details.hasAnimation)continue;let players=[];if(queriedElements.size){let queriedPlayerResults=queriedElements.get(element);queriedPlayerResults&&queriedPlayerResults.length&&players.push(...queriedPlayerResults);let queriedInnerElements=this.driver.query(element,NG_ANIMATING_SELECTOR,!0);for(let j=0;j<queriedInnerElements.length;j++){let queriedPlayers=queriedElements.get(queriedInnerElements[j]);queriedPlayers&&queriedPlayers.length&&players.push(...queriedPlayers)}}const activePlayers=players.filter(p=>!p.destroyed);activePlayers.length?removeNodesAfterAnimationDone(this,element,activePlayers):this.processLeaveNode(element)}return allLeaveNodes.length=0,rootPlayers.forEach(player=>{this.players.push(player),player.onDone(()=>{player.destroy();const index=this.players.indexOf(player);this.players.splice(index,1)}),player.play()}),rootPlayers}elementContainsData(namespaceId,element){let containsData=!1;const details=element[REMOVAL_FLAG];return details&&details.setForRemoval&&(containsData=!0),this.playersByElement.has(element)&&(containsData=!0),this.playersByQueriedElement.has(element)&&(containsData=!0),this.statesByElement.has(element)&&(containsData=!0),this._fetchNamespace(namespaceId).elementContainsData(element)||containsData}afterFlush(callback){this._flushFns.push(callback)}afterFlushAnimationsDone(callback){this._whenQuietFns.push(callback)}_getPreviousPlayers(element,isQueriedElement,namespaceId,triggerName,toStateValue){let players=[];if(isQueriedElement){const queriedElementPlayers=this.playersByQueriedElement.get(element);queriedElementPlayers&&(players=queriedElementPlayers)}else{const elementPlayers=this.playersByElement.get(element);if(elementPlayers){const isRemovalAnimation=!toStateValue||"void"==toStateValue;elementPlayers.forEach(player=>{player.queued||!isRemovalAnimation&&player.triggerName!=triggerName||players.push(player)})}}return(namespaceId||triggerName)&&(players=players.filter(player=>!(namespaceId&&namespaceId!=player.namespaceId||triggerName&&triggerName!=player.triggerName))),players}_beforeAnimationBuild(namespaceId,instruction,allPreviousPlayersMap){const rootElement=instruction.element,targetNameSpaceId=instruction.isRemovalTransition?void 0:namespaceId,targetTriggerName=instruction.isRemovalTransition?void 0:instruction.triggerName;for(const timelineInstruction of instruction.timelines){const element=timelineInstruction.element,isQueriedElement=element!==rootElement,players=getOrSetDefaultValue(allPreviousPlayersMap,element,[]);this._getPreviousPlayers(element,isQueriedElement,targetNameSpaceId,targetTriggerName,instruction.toState).forEach(player=>{const realPlayer=player.getRealPlayer();realPlayer.beforeDestroy&&realPlayer.beforeDestroy(),player.destroy(),players.push(player)})}eraseStyles(rootElement,instruction.fromStyles)}_buildAnimation(namespaceId,instruction,allPreviousPlayersMap,skippedPlayersMap,preStylesMap,postStylesMap){const triggerName=instruction.triggerName,rootElement=instruction.element,allQueriedPlayers=[],allConsumedElements=new Set,allSubElements=new Set,allNewPlayers=instruction.timelines.map(timelineInstruction=>{const element=timelineInstruction.element;allConsumedElements.add(element);const details=element[REMOVAL_FLAG];if(details&&details.removedBeforeQueried)return new animations.ZN(timelineInstruction.duration,timelineInstruction.delay);const isQueriedElement=element!==rootElement,previousPlayers=flattenGroupPlayers((allPreviousPlayersMap.get(element)||EMPTY_PLAYER_ARRAY).map(p=>p.getRealPlayer())).filter(p=>!!p.element&&p.element===element),preStyles=preStylesMap.get(element),postStyles=postStylesMap.get(element),keyframes=normalizeKeyframes$1(this._normalizer,timelineInstruction.keyframes,preStyles,postStyles),player2=this._buildPlayer(timelineInstruction,keyframes,previousPlayers);if(timelineInstruction.subTimeline&&skippedPlayersMap&&allSubElements.add(element),isQueriedElement){const wrappedPlayer=new TransitionAnimationPlayer(namespaceId,triggerName,element);wrappedPlayer.setRealPlayer(player2),allQueriedPlayers.push(wrappedPlayer)}return player2});allQueriedPlayers.forEach(player2=>{getOrSetDefaultValue(this.playersByQueriedElement,player2.element,[]).push(player2),player2.onDone(()=>deleteOrUnsetInMap(this.playersByQueriedElement,player2.element,player2))}),allConsumedElements.forEach(element=>addClass(element,"ng-animating"));const player=optimizeGroupPlayer(allNewPlayers);return player.onDestroy(()=>{allConsumedElements.forEach(element=>removeClass(element,"ng-animating")),setStyles(rootElement,instruction.toStyles)}),allSubElements.forEach(element=>{getOrSetDefaultValue(skippedPlayersMap,element,[]).push(player)}),player}_buildPlayer(instruction,keyframes,previousPlayers){return keyframes.length>0?this.driver.animate(instruction.element,keyframes,instruction.duration,instruction.delay,instruction.easing,previousPlayers):new animations.ZN(instruction.duration,instruction.delay)}}__name(TransitionAnimationEngine,"TransitionAnimationEngine");class TransitionAnimationPlayer{constructor(namespaceId,triggerName,element){this.namespaceId=namespaceId,this.triggerName=triggerName,this.element=element,this._player=new animations.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(player){this._containsRealPlayer||(this._player=player,this._queuedCallbacks.forEach((callbacks,phase)=>{callbacks.forEach(callback=>listenOnPlayer(player,phase,void 0,callback))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(player.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(totalTime){this.totalTime=totalTime}syncPlayerEvents(player){const p=this._player;p.triggerCallback&&player.onStart(()=>p.triggerCallback("start")),player.onDone(()=>this.finish()),player.onDestroy(()=>this.destroy())}_queueEvent(name,callback){getOrSetDefaultValue(this._queuedCallbacks,name,[]).push(callback)}onDone(fn){this.queued&&this._queueEvent("done",fn),this._player.onDone(fn)}onStart(fn){this.queued&&this._queueEvent("start",fn),this._player.onStart(fn)}onDestroy(fn){this.queued&&this._queueEvent("destroy",fn),this._player.onDestroy(fn)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(p){this.queued||this._player.setPosition(p)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(phaseName){const p=this._player;p.triggerCallback&&p.triggerCallback(phaseName)}}function deleteOrUnsetInMap(map,key,value){let currentValues=map.get(key);if(currentValues){if(currentValues.length){const index=currentValues.indexOf(value);currentValues.splice(index,1)}0==currentValues.length&&map.delete(key)}return currentValues}function normalizeTriggerValue(value){return value??null}function isElementNode(node){return node&&1===node.nodeType}function isTriggerEventValid(eventName){return"start"==eventName||"done"==eventName}function cloakElement(element,value){const oldValue=element.style.display;return element.style.display=value??"none",oldValue}function cloakAndComputeStyles(valuesMap,driver,elements,elementPropsMap,defaultStyle){const cloakVals=[];elements.forEach(element=>cloakVals.push(cloakElement(element)));const failedElements=[];elementPropsMap.forEach((props,element)=>{const styles=new Map;props.forEach(prop=>{const value=driver.computeStyle(element,prop,defaultStyle);styles.set(prop,value),(!value||0==value.length)&&(element[REMOVAL_FLAG]=NULL_REMOVED_QUERIED_STATE,failedElements.push(element))}),valuesMap.set(element,styles)});let i=0;return elements.forEach(element=>cloakElement(element,cloakVals[i++])),failedElements}function buildRootMap(roots,nodes){const rootMap=new Map;if(roots.forEach(root=>rootMap.set(root,[])),0==nodes.length)return rootMap;const NULL_NODE=1,nodeSet=new Set(nodes),localRootMap=new Map;function getRoot(node){if(!node)return NULL_NODE;let root=localRootMap.get(node);if(root)return root;const parent=node.parentNode;return root=rootMap.has(parent)?parent:nodeSet.has(parent)?NULL_NODE:getRoot(parent),localRootMap.set(node,root),root}return __name(getRoot,"getRoot"),nodes.forEach(node=>{const root=getRoot(node);root!==NULL_NODE&&rootMap.get(root).push(node)}),rootMap}function addClass(element,className){element.classList?.add(className)}function removeClass(element,className){element.classList?.remove(className)}function removeNodesAfterAnimationDone(engine,element,players){optimizeGroupPlayer(players).onDone(()=>engine.processLeaveNode(element))}function flattenGroupPlayers(players){const finalPlayers=[];return _flattenGroupPlayersRecur(players,finalPlayers),finalPlayers}function _flattenGroupPlayersRecur(players,finalPlayers){for(let i=0;i<players.length;i++){const player=players[i];player instanceof animations.ZE?_flattenGroupPlayersRecur(player.players,finalPlayers):finalPlayers.push(player)}}function objEquals(a,b){const k1=Object.keys(a),k2=Object.keys(b);if(k1.length!=k2.length)return!1;for(let i=0;i<k1.length;i++){const prop=k1[i];if(!b.hasOwnProperty(prop)||a[prop]!==b[prop])return!1}return!0}function replacePostStylesAsPre(element,allPreStyleElements,allPostStyleElements){const postEntry=allPostStyleElements.get(element);if(!postEntry)return!1;let preEntry=allPreStyleElements.get(element);return preEntry?postEntry.forEach(data=>preEntry.add(data)):allPreStyleElements.set(element,postEntry),allPostStyleElements.delete(element),!0}__name(TransitionAnimationPlayer,"TransitionAnimationPlayer"),__name(deleteOrUnsetInMap,"deleteOrUnsetInMap"),__name(normalizeTriggerValue,"normalizeTriggerValue"),__name(isElementNode,"isElementNode"),__name(isTriggerEventValid,"isTriggerEventValid"),__name(cloakElement,"cloakElement"),__name(cloakAndComputeStyles,"cloakAndComputeStyles"),__name(buildRootMap,"buildRootMap"),__name(addClass,"addClass"),__name(removeClass,"removeClass"),__name(removeNodesAfterAnimationDone,"removeNodesAfterAnimationDone"),__name(flattenGroupPlayers,"flattenGroupPlayers"),__name(_flattenGroupPlayersRecur,"_flattenGroupPlayersRecur"),__name(objEquals,"objEquals"),__name(replacePostStylesAsPre,"replacePostStylesAsPre");class AnimationEngine{constructor(bodyNode,_driver,_normalizer){this.bodyNode=bodyNode,this._driver=_driver,this._normalizer=_normalizer,this._triggerCache={},this.onRemovalComplete=(element,context)=>{},this._transitionEngine=new TransitionAnimationEngine(bodyNode,_driver,_normalizer),this._timelineEngine=new TimelineAnimationEngine(bodyNode,_driver,_normalizer),this._transitionEngine.onRemovalComplete=(element,context)=>this.onRemovalComplete(element,context)}registerTrigger(componentId,namespaceId,hostElement,name,metadata){const cacheKey=componentId+"-"+name;let trigger=this._triggerCache[cacheKey];if(!trigger){const errors=[],ast=buildAnimationAst(this._driver,metadata,errors,[]);if(errors.length)throw triggerBuildFailed();trigger=buildTrigger(name,ast,this._normalizer),this._triggerCache[cacheKey]=trigger}this._transitionEngine.registerTrigger(namespaceId,name,trigger)}register(namespaceId,hostElement){this._transitionEngine.register(namespaceId,hostElement)}destroy(namespaceId,context){this._transitionEngine.destroy(namespaceId,context)}onInsert(namespaceId,element,parent,insertBefore){this._transitionEngine.insertNode(namespaceId,element,parent,insertBefore)}onRemove(namespaceId,element,context,isHostElement){this._transitionEngine.removeNode(namespaceId,element,isHostElement||!1,context)}disableAnimations(element,disable){this._transitionEngine.markElementAsDisabled(element,disable)}process(namespaceId,element,property,value){if("@"==property.charAt(0)){const[id,action]=parseTimelineCommand(property);this._timelineEngine.command(id,element,action,value)}else this._transitionEngine.trigger(namespaceId,element,property,value)}listen(namespaceId,element,eventName,eventPhase,callback){if("@"==eventName.charAt(0)){const[id,action]=parseTimelineCommand(eventName);return this._timelineEngine.listen(id,element,action,callback)}return this._transitionEngine.listen(namespaceId,element,eventName,eventPhase,callback)}flush(microtaskId=-1){this._transitionEngine.flush(microtaskId)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function packageNonAnimatableStyles(element,styles){let startStyles=null,endStyles=null;return Array.isArray(styles)&&styles.length?(startStyles=filterNonAnimatableStyles(styles[0]),styles.length>1&&(endStyles=filterNonAnimatableStyles(styles[styles.length-1]))):styles instanceof Map&&(startStyles=filterNonAnimatableStyles(styles)),startStyles||endStyles?new SpecialCasedStyles(element,startStyles,endStyles):null}__name(AnimationEngine,"AnimationEngine"),__name(packageNonAnimatableStyles,"packageNonAnimatableStyles");let SpecialCasedStyles=(()=>{class SpecialCasedStyles2{constructor(_element,_startStyles,_endStyles){this._element=_element,this._startStyles=_startStyles,this._endStyles=_endStyles,this._state=0;let initialStyles=SpecialCasedStyles2.initialStylesByElement.get(_element);initialStyles||SpecialCasedStyles2.initialStylesByElement.set(_element,initialStyles=new Map),this._initialStyles=initialStyles}start(){this._state<1&&(this._startStyles&&setStyles(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(setStyles(this._element,this._initialStyles),this._endStyles&&(setStyles(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(SpecialCasedStyles2.initialStylesByElement.delete(this._element),this._startStyles&&(eraseStyles(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(eraseStyles(this._element,this._endStyles),this._endStyles=null),setStyles(this._element,this._initialStyles),this._state=3)}}return __name(SpecialCasedStyles2,"SpecialCasedStyles"),SpecialCasedStyles2.initialStylesByElement=new WeakMap,SpecialCasedStyles2})();function filterNonAnimatableStyles(styles){let result=null;return styles.forEach((val,prop)=>{isNonAnimatableStyle(prop)&&(result=result||new Map,result.set(prop,val))}),result}function isNonAnimatableStyle(prop){return"display"===prop||"position"===prop}__name(filterNonAnimatableStyles,"filterNonAnimatableStyles"),__name(isNonAnimatableStyle,"isNonAnimatableStyle");class WebAnimationsPlayer{constructor(element,keyframes,options,_specialStyles){this.element=element,this.keyframes=keyframes,this.options=options,this._specialStyles=_specialStyles,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=options.duration,this._delay=options.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(fn=>fn()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const keyframes=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,keyframes,this.options),this._finalKeyframe=keyframes.length?keyframes[keyframes.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(keyframes){const kfs=[];return keyframes.forEach(frame=>{kfs.push(Object.fromEntries(frame))}),kfs}_triggerWebAnimation(element,keyframes,options){return element.animate(this._convertKeyframesToObject(keyframes),options)}onStart(fn){this._originalOnStartFns.push(fn),this._onStartFns.push(fn)}onDone(fn){this._originalOnDoneFns.push(fn),this._onDoneFns.push(fn)}onDestroy(fn){this._onDestroyFns.push(fn)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(fn=>fn()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(fn=>fn()),this._onDestroyFns=[])}setPosition(p){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=p*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const styles=new Map;this.hasStarted()&&this._finalKeyframe.forEach((val,prop)=>{"offset"!==prop&&styles.set(prop,this._finished?val:computeStyle(this.element,prop))}),this.currentSnapshot=styles}triggerCallback(phaseName){const methods="start"===phaseName?this._onStartFns:this._onDoneFns;methods.forEach(fn=>fn()),methods.length=0}}__name(WebAnimationsPlayer,"WebAnimationsPlayer");class WebAnimationsDriver{validateStyleProperty(prop){return!0}validateAnimatableStyleProperty(prop){return!0}matchesElement(_element,_selector){return!1}containsElement(elm1,elm2){return containsElement(elm1,elm2)}getParentElement(element){return getParentElement(element)}query(element,selector,multi){return invokeQuery(element,selector,multi)}computeStyle(element,prop,defaultValue){return window.getComputedStyle(element)[prop]}animate(element,keyframes,duration,delay,easing,previousPlayers=[]){const playerOptions={duration,delay,fill:0==delay?"both":"forwards"};easing&&(playerOptions.easing=easing);const previousStyles=new Map,previousWebAnimationPlayers=previousPlayers.filter(player=>player instanceof WebAnimationsPlayer);allowPreviousPlayerStylesMerge(duration,delay)&&previousWebAnimationPlayers.forEach(player=>{player.currentSnapshot.forEach((val,prop)=>previousStyles.set(prop,val))});let _keyframes=normalizeKeyframes(keyframes).map(styles=>copyStyles(styles));_keyframes=balancePreviousStylesIntoKeyframes(element,_keyframes,previousStyles);const specialStyles=packageNonAnimatableStyles(element,_keyframes);return new WebAnimationsPlayer(element,_keyframes,playerOptions,specialStyles)}}__name(WebAnimationsDriver,"WebAnimationsDriver");var common=__webpack_require__(4755);let BrowserAnimationBuilder=(()=>{class BrowserAnimationBuilder2 extends animations._j{constructor(rootRenderer,doc){super(),this._nextAnimationId=0,this._renderer=rootRenderer.createRenderer(doc.body,{id:"0",encapsulation:core.ifc.None,styles:[],data:{animation:[]}})}build(animation){const id=this._nextAnimationId.toString();this._nextAnimationId++;const entry=Array.isArray(animation)?(0,animations.vP)(animation):animation;return issueAnimationCommand(this._renderer,null,id,"register",[entry]),new BrowserAnimationFactory(id,this._renderer)}}return __name(BrowserAnimationBuilder2,"BrowserAnimationBuilder"),BrowserAnimationBuilder2.\u0275fac=__name(function(t){return new(t||BrowserAnimationBuilder2)(core.LFG(core.FYo),core.LFG(common.K0))},"BrowserAnimationBuilder_Factory"),BrowserAnimationBuilder2.\u0275prov=core.Yz7({token:BrowserAnimationBuilder2,factory:BrowserAnimationBuilder2.\u0275fac}),BrowserAnimationBuilder2})();class BrowserAnimationFactory extends animations.LC{constructor(_id,_renderer){super(),this._id=_id,this._renderer=_renderer}create(element,options){return new RendererAnimationPlayer(this._id,element,options||{},this._renderer)}}__name(BrowserAnimationFactory,"BrowserAnimationFactory");class RendererAnimationPlayer{constructor(id,element,options,_renderer){this.id=id,this.element=element,this._renderer=_renderer,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",options)}_listen(eventName,callback){return this._renderer.listen(this.element,`@@${this.id}:${eventName}`,callback)}_command(command,...args){return issueAnimationCommand(this._renderer,this.element,this.id,command,args)}onDone(fn){this._listen("done",fn)}onStart(fn){this._listen("start",fn)}onDestroy(fn){this._listen("destroy",fn)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(p){this._command("setPosition",p)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function issueAnimationCommand(renderer,element,id,command,args){return renderer.setProperty(element,`@@${id}:${command}`,args)}__name(RendererAnimationPlayer,"RendererAnimationPlayer"),__name(issueAnimationCommand,"issueAnimationCommand");let AnimationRendererFactory=(()=>{class AnimationRendererFactory2{constructor(delegate,engine,_zone){this.delegate=delegate,this.engine=engine,this._zone=_zone,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),engine.onRemovalComplete=(element,delegate2)=>{const parentNode=delegate2?.parentNode(element);parentNode&&delegate2.removeChild(parentNode,element)}}createRenderer(hostElement,type){const delegate=this.delegate.createRenderer(hostElement,type);if(!(hostElement&&type&&type.data&&type.data.animation)){let renderer=this._rendererCache.get(delegate);return renderer||(renderer=new BaseAnimationRenderer("",delegate,this.engine,__name(()=>this._rendererCache.delete(delegate),"onRendererDestroy")),this._rendererCache.set(delegate,renderer)),renderer}const componentId=type.id,namespaceId=type.id+"-"+this._currentId;this._currentId++,this.engine.register(namespaceId,hostElement);const registerTrigger=__name(trigger=>{Array.isArray(trigger)?trigger.forEach(registerTrigger):this.engine.registerTrigger(componentId,namespaceId,hostElement,trigger.name,trigger)},"registerTrigger");return type.data.animation.forEach(registerTrigger),new AnimationRenderer(this,namespaceId,delegate,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(count,fn,data){count>=0&&count<this._microtaskId?this._zone.run(()=>fn(data)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(tuple=>{const[fn2,data2]=tuple;fn2(data2)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([fn,data]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return __name(AnimationRendererFactory2,"AnimationRendererFactory"),AnimationRendererFactory2.\u0275fac=__name(function(t){return new(t||AnimationRendererFactory2)(core.LFG(core.FYo),core.LFG(AnimationEngine),core.LFG(core.R0b))},"AnimationRendererFactory_Factory"),AnimationRendererFactory2.\u0275prov=core.Yz7({token:AnimationRendererFactory2,factory:AnimationRendererFactory2.\u0275fac}),AnimationRendererFactory2})();class BaseAnimationRenderer{constructor(namespaceId,delegate,engine,_onDestroy){this.namespaceId=namespaceId,this.delegate=delegate,this.engine=engine,this._onDestroy=_onDestroy,this.destroyNode=this.delegate.destroyNode?n=>delegate.destroyNode(n):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(name,namespace){return this.delegate.createElement(name,namespace)}createComment(value){return this.delegate.createComment(value)}createText(value){return this.delegate.createText(value)}appendChild(parent,newChild){this.delegate.appendChild(parent,newChild),this.engine.onInsert(this.namespaceId,newChild,parent,!1)}insertBefore(parent,newChild,refChild,isMove=!0){this.delegate.insertBefore(parent,newChild,refChild),this.engine.onInsert(this.namespaceId,newChild,parent,isMove)}removeChild(parent,oldChild,isHostElement){this.engine.onRemove(this.namespaceId,oldChild,this.delegate,isHostElement)}selectRootElement(selectorOrNode,preserveContent){return this.delegate.selectRootElement(selectorOrNode,preserveContent)}parentNode(node){return this.delegate.parentNode(node)}nextSibling(node){return this.delegate.nextSibling(node)}setAttribute(el,name,value,namespace){this.delegate.setAttribute(el,name,value,namespace)}removeAttribute(el,name,namespace){this.delegate.removeAttribute(el,name,namespace)}addClass(el,name){this.delegate.addClass(el,name)}removeClass(el,name){this.delegate.removeClass(el,name)}setStyle(el,style,value,flags){this.delegate.setStyle(el,style,value,flags)}removeStyle(el,style,flags){this.delegate.removeStyle(el,style,flags)}setProperty(el,name,value){"@"==name.charAt(0)&&"@.disabled"==name?this.disableAnimations(el,!!value):this.delegate.setProperty(el,name,value)}setValue(node,value){this.delegate.setValue(node,value)}listen(target,eventName,callback){return this.delegate.listen(target,eventName,callback)}disableAnimations(element,value){this.engine.disableAnimations(element,value)}}__name(BaseAnimationRenderer,"BaseAnimationRenderer");class AnimationRenderer extends BaseAnimationRenderer{constructor(factory,namespaceId,delegate,engine,onDestroy){super(namespaceId,delegate,engine,onDestroy),this.factory=factory,this.namespaceId=namespaceId}setProperty(el,name,value){"@"==name.charAt(0)?"."==name.charAt(1)&&"@.disabled"==name?this.disableAnimations(el,value=void 0===value||!!value):this.engine.process(this.namespaceId,el,name.slice(1),value):this.delegate.setProperty(el,name,value)}listen(target,eventName,callback){if("@"==eventName.charAt(0)){const element=resolveElementFromTarget(target);let name=eventName.slice(1),phase="";return"@"!=name.charAt(0)&&([name,phase]=parseTriggerCallbackName(name)),this.engine.listen(this.namespaceId,element,name,phase,event=>{this.factory.scheduleListenerCallback(event._data||-1,callback,event)})}return this.delegate.listen(target,eventName,callback)}}function resolveElementFromTarget(target){switch(target){case"body":return document.body;case"document":return document;case"window":return window;default:return target}}function parseTriggerCallbackName(triggerName){const dotIndex=triggerName.indexOf(".");return[triggerName.substring(0,dotIndex),triggerName.slice(dotIndex+1)]}__name(AnimationRenderer,"AnimationRenderer"),__name(resolveElementFromTarget,"resolveElementFromTarget"),__name(parseTriggerCallbackName,"parseTriggerCallbackName");let InjectableAnimationEngine=(()=>{class InjectableAnimationEngine2 extends AnimationEngine{constructor(doc,driver,normalizer,appRef){super(doc.body,driver,normalizer)}ngOnDestroy(){this.flush()}}return __name(InjectableAnimationEngine2,"InjectableAnimationEngine"),InjectableAnimationEngine2.\u0275fac=__name(function(t){return new(t||InjectableAnimationEngine2)(core.LFG(common.K0),core.LFG(AnimationDriver),core.LFG(AnimationStyleNormalizer),core.LFG(core.z2F))},"InjectableAnimationEngine_Factory"),InjectableAnimationEngine2.\u0275prov=core.Yz7({token:InjectableAnimationEngine2,factory:InjectableAnimationEngine2.\u0275fac}),InjectableAnimationEngine2})();function instantiateDefaultStyleNormalizer(){return new WebAnimationsStyleNormalizer}function instantiateRendererFactory(renderer,engine,zone){return new AnimationRendererFactory(renderer,engine,zone)}__name(instantiateDefaultStyleNormalizer,"instantiateDefaultStyleNormalizer"),__name(instantiateRendererFactory,"instantiateRendererFactory");const SHARED_ANIMATION_PROVIDERS=[{provide:animations._j,useClass:BrowserAnimationBuilder},{provide:AnimationStyleNormalizer,useFactory:instantiateDefaultStyleNormalizer},{provide:AnimationEngine,useClass:InjectableAnimationEngine},{provide:core.FYo,useFactory:instantiateRendererFactory,deps:[platform_browser.se,AnimationEngine,core.R0b]}],BROWSER_ANIMATIONS_PROVIDERS=[{provide:AnimationDriver,useFactory:()=>new WebAnimationsDriver},{provide:core.QbO,useValue:"BrowserAnimations"},...SHARED_ANIMATION_PROVIDERS],BROWSER_NOOP_ANIMATIONS_PROVIDERS=[{provide:AnimationDriver,useClass:NoopAnimationDriver},{provide:core.QbO,useValue:"NoopAnimations"},...SHARED_ANIMATION_PROVIDERS];let BrowserAnimationsModule=(()=>{class BrowserAnimationsModule2{static withConfig(config){return{ngModule:BrowserAnimationsModule2,providers:config.disableAnimations?BROWSER_NOOP_ANIMATIONS_PROVIDERS:BROWSER_ANIMATIONS_PROVIDERS}}}return __name(BrowserAnimationsModule2,"BrowserAnimationsModule"),BrowserAnimationsModule2.\u0275fac=__name(function(t){return new(t||BrowserAnimationsModule2)},"BrowserAnimationsModule_Factory"),BrowserAnimationsModule2.\u0275mod=core.oAB({type:BrowserAnimationsModule2}),BrowserAnimationsModule2.\u0275inj=core.cJS({providers:BROWSER_ANIMATIONS_PROVIDERS,imports:[platform_browser.b2]}),BrowserAnimationsModule2})();__name(function provideAnimations(){return[...BROWSER_ANIMATIONS_PROVIDERS]},"provideAnimations"),__name(function provideNoopAnimations(){return[...BROWSER_NOOP_ANIMATIONS_PROVIDERS]},"provideNoopAnimations")},6550:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Dx:()=>Title,H7:()=>DomSanitizer,b2:()=>BrowserModule2,q6:()=>platformBrowser,se:()=>DomRendererFactory2});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2223),_angular_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4755);class GenericBrowserDomAdapter extends _angular_common__WEBPACK_IMPORTED_MODULE_0__.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}__name(GenericBrowserDomAdapter,"GenericBrowserDomAdapter");class BrowserDomAdapter extends GenericBrowserDomAdapter{static makeCurrent(){(0,_angular_common__WEBPACK_IMPORTED_MODULE_0__.HT)(new BrowserDomAdapter)}onAndCancel(el,evt,listener){return el.addEventListener(evt,listener),()=>{el.removeEventListener(evt,listener)}}dispatchEvent(el,evt){el.dispatchEvent(evt)}remove(node){node.parentNode&&node.parentNode.removeChild(node)}createElement(tagName,doc){return(doc=doc||this.getDefaultDocument()).createElement(tagName)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(node){return node.nodeType===Node.ELEMENT_NODE}isShadowRoot(node){return node instanceof DocumentFragment}getGlobalEventTarget(doc,target){return"window"===target?window:"document"===target?doc:"body"===target?doc.body:null}getBaseHref(doc){const href=getBaseElementHref();return null==href?null:relativePath(href)}resetBaseElement(){baseElement=null}getUserAgent(){return window.navigator.userAgent}getCookie(name){return(0,_angular_common__WEBPACK_IMPORTED_MODULE_0__.Mx)(document.cookie,name)}}__name(BrowserDomAdapter,"BrowserDomAdapter");let urlParsingNode,baseElement=null;function getBaseElementHref(){return baseElement=baseElement||document.querySelector("base"),baseElement?baseElement.getAttribute("href"):null}function relativePath(url){urlParsingNode=urlParsingNode||document.createElement("a"),urlParsingNode.setAttribute("href",url);const pathName=urlParsingNode.pathname;return"/"===pathName.charAt(0)?pathName:`/${pathName}`}__name(getBaseElementHref,"getBaseElementHref"),__name(relativePath,"relativePath");class BrowserGetTestability{addToWindow(registry){_angular_core__WEBPACK_IMPORTED_MODULE_1__.dqk.getAngularTestability=(elem,findInAncestors=!0)=>{const testability=registry.findTestabilityInTree(elem,findInAncestors);if(null==testability)throw new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vHH(5103,!1);return testability},_angular_core__WEBPACK_IMPORTED_MODULE_1__.dqk.getAllAngularTestabilities=()=>registry.getAllTestabilities(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.dqk.getAllAngularRootElements=()=>registry.getAllRootElements();const whenAllStable=__name(callback=>{const testabilities=_angular_core__WEBPACK_IMPORTED_MODULE_1__.dqk.getAllAngularTestabilities();let count=testabilities.length,didWork=!1;const decrement=__name(function(didWork_){didWork=didWork||didWork_,count--,0==count&&callback(didWork)},"decrement");testabilities.forEach(function(testability){testability.whenStable(decrement)})},"whenAllStable");_angular_core__WEBPACK_IMPORTED_MODULE_1__.dqk.frameworkStabilizers||(_angular_core__WEBPACK_IMPORTED_MODULE_1__.dqk.frameworkStabilizers=[]),_angular_core__WEBPACK_IMPORTED_MODULE_1__.dqk.frameworkStabilizers.push(whenAllStable)}findTestabilityInTree(registry,elem,findInAncestors){return null==elem?null:registry.getTestability(elem)??(findInAncestors?(0,_angular_common__WEBPACK_IMPORTED_MODULE_0__.q)().isShadowRoot(elem)?this.findTestabilityInTree(registry,elem.host,!0):this.findTestabilityInTree(registry,elem.parentElement,!0):null)}}__name(BrowserGetTestability,"BrowserGetTestability");let BrowserXhr=(()=>{class BrowserXhr2{build(){return new XMLHttpRequest}}return __name(BrowserXhr2,"BrowserXhr"),BrowserXhr2.\u0275fac=__name(function(t){return new(t||BrowserXhr2)},"BrowserXhr_Factory"),BrowserXhr2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:BrowserXhr2,factory:BrowserXhr2.\u0275fac}),BrowserXhr2})();const EVENT_MANAGER_PLUGINS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP("EventManagerPlugins");let EventManager=(()=>{class EventManager2{constructor(plugins,_zone){this._zone=_zone,this._eventNameToPlugin=new Map,plugins.forEach(plugin=>{plugin.manager=this}),this._plugins=plugins.slice().reverse()}addEventListener(element,eventName,handler){return this._findPluginFor(eventName).addEventListener(element,eventName,handler)}getZone(){return this._zone}_findPluginFor(eventName){let plugin=this._eventNameToPlugin.get(eventName);if(plugin)return plugin;if(plugin=this._plugins.find(plugin2=>plugin2.supports(eventName)),!plugin)throw new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vHH(5101,!1);return this._eventNameToPlugin.set(eventName,plugin),plugin}}return __name(EventManager2,"EventManager"),EventManager2.\u0275fac=__name(function(t){return new(t||EventManager2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(EVENT_MANAGER_PLUGINS),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.R0b))},"EventManager_Factory"),EventManager2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:EventManager2,factory:EventManager2.\u0275fac}),EventManager2})();class EventManagerPlugin{constructor(_doc){this._doc=_doc}}__name(EventManagerPlugin,"EventManagerPlugin");let SharedStylesHost=(()=>{class SharedStylesHost2{constructor(doc,appId,nonce,platformId={}){this.doc=doc,this.appId=appId,this.nonce=nonce,this.platformId=platformId,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,_angular_common__WEBPACK_IMPORTED_MODULE_0__.PM)(platformId),this.resetHostNodes()}addStyles(styles){for(const style of styles)1===this.changeUsageCount(style,1)&&this.onStyleAdded(style)}removeStyles(styles){for(const style of styles)this.changeUsageCount(style,-1)<=0&&this.onStyleRemoved(style)}ngOnDestroy(){const styleNodesInDOM=this.styleNodesInDOM;styleNodesInDOM&&(styleNodesInDOM.forEach(node=>node.remove()),styleNodesInDOM.clear());for(const style of this.getAllStyles())this.onStyleRemoved(style);this.resetHostNodes()}addHost(hostNode){this.hostNodes.add(hostNode);for(const style of this.getAllStyles())this.addStyleToHost(hostNode,style)}removeHost(hostNode){this.hostNodes.delete(hostNode)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(style){for(const host of this.hostNodes)this.addStyleToHost(host,style)}onStyleRemoved(style){const styleRef=this.styleRef;styleRef.get(style)?.elements?.forEach(node=>node.remove()),styleRef.delete(style)}collectServerRenderedStyles(){const styles=this.doc.head?.querySelectorAll(`style[ng-app-id="${this.appId}"]`);if(styles?.length){const styleMap=new Map;return styles.forEach(style=>{null!=style.textContent&&styleMap.set(style.textContent,style)}),styleMap}return null}changeUsageCount(style,delta){const map=this.styleRef;if(map.has(style)){const styleRefValue=map.get(style);return styleRefValue.usage+=delta,styleRefValue.usage}return map.set(style,{usage:delta,elements:[]}),delta}getStyleElement(host,style){const styleNodesInDOM=this.styleNodesInDOM,styleEl=styleNodesInDOM?.get(style);if(styleEl?.parentNode===host)return styleNodesInDOM.delete(style),styleEl.removeAttribute("ng-app-id"),styleEl;{const styleEl2=this.doc.createElement("style");return this.nonce&&styleEl2.setAttribute("nonce",this.nonce),styleEl2.textContent=style,this.platformIsServer&&styleEl2.setAttribute("ng-app-id",this.appId),styleEl2}}addStyleToHost(host,style){const styleEl=this.getStyleElement(host,style);host.appendChild(styleEl);const styleRef=this.styleRef,styleElRef=styleRef.get(style)?.elements;styleElRef?styleElRef.push(styleEl):styleRef.set(style,{elements:[styleEl],usage:1})}resetHostNodes(){const hostNodes=this.hostNodes;hostNodes.clear(),hostNodes.add(this.doc.head)}}return __name(SharedStylesHost2,"SharedStylesHost"),SharedStylesHost2.\u0275fac=__name(function(t){return new(t||SharedStylesHost2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.AFp),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ojb,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lbi))},"SharedStylesHost_Factory"),SharedStylesHost2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:SharedStylesHost2,factory:SharedStylesHost2.\u0275fac}),SharedStylesHost2})();const NAMESPACE_URIS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},COMPONENT_REGEX=/%COMP%/g,REMOVE_STYLES_ON_COMPONENT_DESTROY=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function shimContentAttribute(componentShortId){return"_ngcontent-%COMP%".replace(COMPONENT_REGEX,componentShortId)}function shimHostAttribute(componentShortId){return"_nghost-%COMP%".replace(COMPONENT_REGEX,componentShortId)}function shimStylesContent(compId,styles){return styles.map(s=>s.replace(COMPONENT_REGEX,compId))}__name(shimContentAttribute,"shimContentAttribute"),__name(shimHostAttribute,"shimHostAttribute"),__name(shimStylesContent,"shimStylesContent");let DomRendererFactory2=(()=>{class DomRendererFactory22{constructor(eventManager,sharedStylesHost,appId,removeStylesOnCompDestory,doc,platformId,ngZone,nonce=null){this.eventManager=eventManager,this.sharedStylesHost=sharedStylesHost,this.appId=appId,this.removeStylesOnCompDestory=removeStylesOnCompDestory,this.doc=doc,this.platformId=platformId,this.ngZone=ngZone,this.nonce=nonce,this.rendererByCompId=new Map,this.platformIsServer=(0,_angular_common__WEBPACK_IMPORTED_MODULE_0__.PM)(platformId),this.defaultRenderer=new DefaultDomRenderer2(eventManager,doc,ngZone,this.platformIsServer)}createRenderer(element,type){if(!element||!type)return this.defaultRenderer;this.platformIsServer&&type.encapsulation===_angular_core__WEBPACK_IMPORTED_MODULE_1__.ifc.ShadowDom&&(type={...type,encapsulation:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ifc.Emulated});const renderer=this.getOrCreateRenderer(element,type);return renderer instanceof EmulatedEncapsulationDomRenderer2?renderer.applyToHost(element):renderer instanceof NoneEncapsulationDomRenderer&&renderer.applyStyles(),renderer}getOrCreateRenderer(element,type){const rendererByCompId=this.rendererByCompId;let renderer=rendererByCompId.get(type.id);if(!renderer){const doc=this.doc,ngZone=this.ngZone,eventManager=this.eventManager,sharedStylesHost=this.sharedStylesHost,removeStylesOnCompDestory=this.removeStylesOnCompDestory,platformIsServer=this.platformIsServer;switch(type.encapsulation){case _angular_core__WEBPACK_IMPORTED_MODULE_1__.ifc.Emulated:renderer=new EmulatedEncapsulationDomRenderer2(eventManager,sharedStylesHost,type,this.appId,removeStylesOnCompDestory,doc,ngZone,platformIsServer);break;case _angular_core__WEBPACK_IMPORTED_MODULE_1__.ifc.ShadowDom:return new ShadowDomRenderer(eventManager,sharedStylesHost,element,type,doc,ngZone,this.nonce,platformIsServer);default:renderer=new NoneEncapsulationDomRenderer(eventManager,sharedStylesHost,type,removeStylesOnCompDestory,doc,ngZone,platformIsServer)}renderer.onDestroy=()=>rendererByCompId.delete(type.id),rendererByCompId.set(type.id,renderer)}return renderer}ngOnDestroy(){this.rendererByCompId.clear()}}return __name(DomRendererFactory22,"DomRendererFactory2"),DomRendererFactory22.\u0275fac=__name(function(t){return new(t||DomRendererFactory22)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(EventManager),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(SharedStylesHost),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.AFp),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(REMOVE_STYLES_ON_COMPONENT_DESTROY),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lbi),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.R0b),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ojb))},"DomRendererFactory2_Factory"),DomRendererFactory22.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:DomRendererFactory22,factory:DomRendererFactory22.\u0275fac}),DomRendererFactory22})();class DefaultDomRenderer2{constructor(eventManager,doc,ngZone,platformIsServer){this.eventManager=eventManager,this.doc=doc,this.ngZone=ngZone,this.platformIsServer=platformIsServer,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(name,namespace){return namespace?this.doc.createElementNS(NAMESPACE_URIS[namespace]||namespace,name):this.doc.createElement(name)}createComment(value){return this.doc.createComment(value)}createText(value){return this.doc.createTextNode(value)}appendChild(parent,newChild){(isTemplateNode(parent)?parent.content:parent).appendChild(newChild)}insertBefore(parent,newChild,refChild){parent&&(isTemplateNode(parent)?parent.content:parent).insertBefore(newChild,refChild)}removeChild(parent,oldChild){parent&&parent.removeChild(oldChild)}selectRootElement(selectorOrNode,preserveContent){let el="string"==typeof selectorOrNode?this.doc.querySelector(selectorOrNode):selectorOrNode;if(!el)throw new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vHH(5104,!1);return preserveContent||(el.textContent=""),el}parentNode(node){return node.parentNode}nextSibling(node){return node.nextSibling}setAttribute(el,name,value,namespace){if(namespace){name=namespace+":"+name;const namespaceUri=NAMESPACE_URIS[namespace];namespaceUri?el.setAttributeNS(namespaceUri,name,value):el.setAttribute(name,value)}else el.setAttribute(name,value)}removeAttribute(el,name,namespace){if(namespace){const namespaceUri=NAMESPACE_URIS[namespace];namespaceUri?el.removeAttributeNS(namespaceUri,name):el.removeAttribute(`${namespace}:${name}`)}else el.removeAttribute(name)}addClass(el,name){el.classList.add(name)}removeClass(el,name){el.classList.remove(name)}setStyle(el,style,value,flags){flags&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.JOm.DashCase|_angular_core__WEBPACK_IMPORTED_MODULE_1__.JOm.Important)?el.style.setProperty(style,value,flags&_angular_core__WEBPACK_IMPORTED_MODULE_1__.JOm.Important?"important":""):el.style[style]=value}removeStyle(el,style,flags){flags&_angular_core__WEBPACK_IMPORTED_MODULE_1__.JOm.DashCase?el.style.removeProperty(style):el.style[style]=""}setProperty(el,name,value){el[name]=value}setValue(node,value){node.nodeValue=value}listen(target,event,callback){if("string"==typeof target&&!(target=(0,_angular_common__WEBPACK_IMPORTED_MODULE_0__.q)().getGlobalEventTarget(this.doc,target)))throw new Error(`Unsupported event target ${target} for event ${event}`);return this.eventManager.addEventListener(target,event,this.decoratePreventDefault(callback))}decoratePreventDefault(eventHandler){return event=>{if("__ngUnwrap__"===event)return eventHandler;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>eventHandler(event)):eventHandler(event))&&event.preventDefault()}}}__name(DefaultDomRenderer2,"DefaultDomRenderer2");const AT_CHARCODE=(()=>"@".charCodeAt(0))();function isTemplateNode(node){return"TEMPLATE"===node.tagName&&void 0!==node.content}__name(function checkNoSyntheticProp(name,nameKind){if(name.charCodeAt(0)===AT_CHARCODE)throw new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vHH(5105,`Unexpected synthetic ${nameKind} ${name} found. Please make sure that:\n  - Either \`BrowserAnimationsModule\` or \`NoopAnimationsModule\` are imported in your application.\n  - There is corresponding configuration for the animation named \`${name}\` defined in the \`animations\` field of the \`@Component\` decorator (see https://angular.io/api/core/Component#animations).`)},"checkNoSyntheticProp"),__name(isTemplateNode,"isTemplateNode");class ShadowDomRenderer extends DefaultDomRenderer2{constructor(eventManager,sharedStylesHost,hostEl,component,doc,ngZone,nonce,platformIsServer){super(eventManager,doc,ngZone,platformIsServer),this.sharedStylesHost=sharedStylesHost,this.hostEl=hostEl,this.shadowRoot=hostEl.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const styles=shimStylesContent(component.id,component.styles);for(const style of styles){const styleEl=document.createElement("style");nonce&&styleEl.setAttribute("nonce",nonce),styleEl.textContent=style,this.shadowRoot.appendChild(styleEl)}}nodeOrShadowRoot(node){return node===this.hostEl?this.shadowRoot:node}appendChild(parent,newChild){return super.appendChild(this.nodeOrShadowRoot(parent),newChild)}insertBefore(parent,newChild,refChild){return super.insertBefore(this.nodeOrShadowRoot(parent),newChild,refChild)}removeChild(parent,oldChild){return super.removeChild(this.nodeOrShadowRoot(parent),oldChild)}parentNode(node){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(node)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}__name(ShadowDomRenderer,"ShadowDomRenderer");class NoneEncapsulationDomRenderer extends DefaultDomRenderer2{constructor(eventManager,sharedStylesHost,component,removeStylesOnCompDestory,doc,ngZone,platformIsServer,compId){super(eventManager,doc,ngZone,platformIsServer),this.sharedStylesHost=sharedStylesHost,this.removeStylesOnCompDestory=removeStylesOnCompDestory,this.rendererUsageCount=0,this.styles=compId?shimStylesContent(compId,component.styles):component.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}__name(NoneEncapsulationDomRenderer,"NoneEncapsulationDomRenderer");class EmulatedEncapsulationDomRenderer2 extends NoneEncapsulationDomRenderer{constructor(eventManager,sharedStylesHost,component,appId,removeStylesOnCompDestory,doc,ngZone,platformIsServer){const compId=appId+"-"+component.id;super(eventManager,sharedStylesHost,component,removeStylesOnCompDestory,doc,ngZone,platformIsServer,compId),this.contentAttr=shimContentAttribute(compId),this.hostAttr=shimHostAttribute(compId)}applyToHost(element){this.applyStyles(),this.setAttribute(element,this.hostAttr,"")}createElement(parent,name){const el=super.createElement(parent,name);return super.setAttribute(el,this.contentAttr,""),el}}__name(EmulatedEncapsulationDomRenderer2,"EmulatedEncapsulationDomRenderer2");let DomEventsPlugin=(()=>{class DomEventsPlugin2 extends EventManagerPlugin{constructor(doc){super(doc)}supports(eventName){return!0}addEventListener(element,eventName,handler){return element.addEventListener(eventName,handler,!1),()=>this.removeEventListener(element,eventName,handler)}removeEventListener(target,eventName,callback){return target.removeEventListener(eventName,callback)}}return __name(DomEventsPlugin2,"DomEventsPlugin"),DomEventsPlugin2.\u0275fac=__name(function(t){return new(t||DomEventsPlugin2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0))},"DomEventsPlugin_Factory"),DomEventsPlugin2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:DomEventsPlugin2,factory:DomEventsPlugin2.\u0275fac}),DomEventsPlugin2})();const MODIFIER_KEYS=["alt","control","meta","shift"],_keyMap={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MODIFIER_KEY_GETTERS={alt:event=>event.altKey,control:event=>event.ctrlKey,meta:event=>event.metaKey,shift:event=>event.shiftKey};let KeyEventsPlugin=(()=>{class KeyEventsPlugin2 extends EventManagerPlugin{constructor(doc){super(doc)}supports(eventName){return null!=KeyEventsPlugin2.parseEventName(eventName)}addEventListener(element,eventName,handler){const parsedEvent=KeyEventsPlugin2.parseEventName(eventName),outsideHandler=KeyEventsPlugin2.eventCallback(parsedEvent.fullKey,handler,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_angular_common__WEBPACK_IMPORTED_MODULE_0__.q)().onAndCancel(element,parsedEvent.domEventName,outsideHandler))}static parseEventName(eventName){const parts=eventName.toLowerCase().split("."),domEventName=parts.shift();if(0===parts.length||"keydown"!==domEventName&&"keyup"!==domEventName)return null;const key=KeyEventsPlugin2._normalizeKey(parts.pop());let fullKey="",codeIX=parts.indexOf("code");if(codeIX>-1&&(parts.splice(codeIX,1),fullKey="code."),MODIFIER_KEYS.forEach(modifierName=>{const index=parts.indexOf(modifierName);index>-1&&(parts.splice(index,1),fullKey+=modifierName+".")}),fullKey+=key,0!=parts.length||0===key.length)return null;const result={};return result.domEventName=domEventName,result.fullKey=fullKey,result}static matchEventFullKeyCode(event,fullKeyCode){let keycode=_keyMap[event.key]||event.key,key="";return fullKeyCode.indexOf("code.")>-1&&(keycode=event.code,key="code."),!(null==keycode||!keycode)&&(keycode=keycode.toLowerCase()," "===keycode?keycode="space":"."===keycode&&(keycode="dot"),MODIFIER_KEYS.forEach(modifierName=>{modifierName!==keycode&&(0,MODIFIER_KEY_GETTERS[modifierName])(event)&&(key+=modifierName+".")}),key+=keycode,key===fullKeyCode)}static eventCallback(fullKey,handler,zone){return event=>{KeyEventsPlugin2.matchEventFullKeyCode(event,fullKey)&&zone.runGuarded(()=>handler(event))}}static _normalizeKey(keyName){return"esc"===keyName?"escape":keyName}}return __name(KeyEventsPlugin2,"KeyEventsPlugin"),KeyEventsPlugin2.\u0275fac=__name(function(t){return new(t||KeyEventsPlugin2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0))},"KeyEventsPlugin_Factory"),KeyEventsPlugin2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:KeyEventsPlugin2,factory:KeyEventsPlugin2.\u0275fac}),KeyEventsPlugin2})();function createProvidersConfig(options){return{appProviders:[...BROWSER_MODULE_PROVIDERS,...options?.providers??[]],platformProviders:INTERNAL_BROWSER_PLATFORM_PROVIDERS}}function initDomAdapter(){BrowserDomAdapter.makeCurrent()}function errorHandler(){return new _angular_core__WEBPACK_IMPORTED_MODULE_1__.qLn}function _document(){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.RDi)(document),document}__name(function bootstrapApplication(rootComponent,options){return \u0275internalCreateApplication({rootComponent,...createProvidersConfig(options)})},"bootstrapApplication"),__name(function createApplication(options){return \u0275internalCreateApplication(createProvidersConfig(options))},"createApplication"),__name(createProvidersConfig,"createProvidersConfig"),__name(function provideProtractorTestingSupport(){return[...TESTABILITY_PROVIDERS]},"provideProtractorTestingSupport"),__name(initDomAdapter,"initDomAdapter"),__name(errorHandler,"errorHandler"),__name(_document,"_document");const INTERNAL_BROWSER_PLATFORM_PROVIDERS=[{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lbi,useValue:_angular_common__WEBPACK_IMPORTED_MODULE_0__.bD},{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.g9A,useValue:initDomAdapter,multi:!0},{provide:_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0,useFactory:_document,deps:[]}],platformBrowser=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.eFA)(_angular_core__WEBPACK_IMPORTED_MODULE_1__._c5,"browser",INTERNAL_BROWSER_PLATFORM_PROVIDERS),BROWSER_MODULE_PROVIDERS_MARKER=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP(""),TESTABILITY_PROVIDERS=[{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.rWj,useClass:BrowserGetTestability,deps:[]},{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.lri,useClass:_angular_core__WEBPACK_IMPORTED_MODULE_1__.dDg,deps:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.R0b,_angular_core__WEBPACK_IMPORTED_MODULE_1__.eoX,_angular_core__WEBPACK_IMPORTED_MODULE_1__.rWj]},{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.dDg,useClass:_angular_core__WEBPACK_IMPORTED_MODULE_1__.dDg,deps:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.R0b,_angular_core__WEBPACK_IMPORTED_MODULE_1__.eoX,_angular_core__WEBPACK_IMPORTED_MODULE_1__.rWj]}],BROWSER_MODULE_PROVIDERS=[{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.zSh,useValue:"root"},{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.qLn,useFactory:errorHandler,deps:[]},{provide:EVENT_MANAGER_PLUGINS,useClass:DomEventsPlugin,multi:!0,deps:[_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.R0b,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lbi]},{provide:EVENT_MANAGER_PLUGINS,useClass:KeyEventsPlugin,multi:!0,deps:[_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0]},DomRendererFactory2,SharedStylesHost,EventManager,{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.FYo,useExisting:DomRendererFactory2},{provide:_angular_common__WEBPACK_IMPORTED_MODULE_0__.JF,useClass:BrowserXhr,deps:[]},[]];let BrowserModule2=(()=>{class BrowserModule3{constructor(providersAlreadyPresent){}static withServerTransition(params){return{ngModule:BrowserModule3,providers:[{provide:_angular_core__WEBPACK_IMPORTED_MODULE_1__.AFp,useValue:params.appId}]}}}return __name(BrowserModule3,"BrowserModule"),BrowserModule3.\u0275fac=__name(function(t){return new(t||BrowserModule3)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(BROWSER_MODULE_PROVIDERS_MARKER,12))},"BrowserModule_Factory"),BrowserModule3.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:BrowserModule3}),BrowserModule3.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({providers:[...BROWSER_MODULE_PROVIDERS,...TESTABILITY_PROVIDERS],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_0__.ez,_angular_core__WEBPACK_IMPORTED_MODULE_1__.hGG]}),BrowserModule3})();__name(function createMeta(){return new Meta(\u0275\u0275inject(DOCUMENT))},"createMeta");let Meta=null;function createTitle(){return new Title((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG)(_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0))}__name(createTitle,"createTitle");let Title=(()=>{class Title2{constructor(_doc){this._doc=_doc}getTitle(){return this._doc.title}setTitle(newTitle){this._doc.title=newTitle||""}}return __name(Title2,"Title"),Title2.\u0275fac=__name(function(t){return new(t||Title2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0))},"Title_Factory"),Title2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:Title2,factory:__name(function(t){let r=null;return r=t?new t:createTitle(),r},"Title_Factory"),providedIn:"root"}),Title2})();function exportNgVar(name,value){(typeof COMPILED>"u"||!COMPILED)&&((\u0275global.ng=\u0275global.ng||{})[name]=value)}__name(exportNgVar,"exportNgVar");const win=typeof window<"u"&&window||{};class ChangeDetectionPerfRecord{constructor(msPerTick,numTicks){this.msPerTick=msPerTick,this.numTicks=numTicks}}__name(ChangeDetectionPerfRecord,"ChangeDetectionPerfRecord");class AngularProfiler{constructor(ref){this.appRef=ref.injector.get(ApplicationRef)}timeChangeDetection(config){const record=config&&config.record,isProfilerAvailable=null!=win.console.profile;record&&isProfilerAvailable&&win.console.profile("Change Detection");const start=performanceNow();let numTicks=0;for(;numTicks<5||performanceNow()-start<500;)this.appRef.tick(),numTicks++;const end=performanceNow();record&&isProfilerAvailable&&win.console.profileEnd("Change Detection");const msPerTick=(end-start)/numTicks;return win.console.log(`ran ${numTicks} change detection cycles`),win.console.log(`${msPerTick.toFixed(2)} ms per check`),new ChangeDetectionPerfRecord(msPerTick,numTicks)}}function performanceNow(){return win.performance&&win.performance.now?win.performance.now():(new Date).getTime()}__name(AngularProfiler,"AngularProfiler"),__name(performanceNow,"performanceNow");function elementMatches(n,selector){return!!\u0275getDOM().isElementNode(n)&&(n.matches&&n.matches(selector)||n.msMatchesSelector&&n.msMatchesSelector(selector)||n.webkitMatchesSelector&&n.webkitMatchesSelector(selector))}__name(function enableDebugTools(ref){return exportNgVar("profiler",new AngularProfiler(ref)),ref},"enableDebugTools"),__name(function disableDebugTools(){exportNgVar("profiler",null)},"disableDebugTools"),__name(class By{static all(){return()=>!0}static css(selector){return debugElement=>null!=debugElement.nativeElement&&elementMatches(debugElement.nativeElement,selector)}static directive(type){return debugNode=>-1!==debugNode.providerTokens.indexOf(type)}},"By"),__name(elementMatches,"elementMatches");let DomSanitizer=(()=>{class DomSanitizer2{}return __name(DomSanitizer2,"DomSanitizer"),DomSanitizer2.\u0275fac=__name(function(t){return new(t||DomSanitizer2)},"DomSanitizer_Factory"),DomSanitizer2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:DomSanitizer2,factory:__name(function(t){let r=null;return r=t?new(t||DomSanitizer2):_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(DomSanitizerImpl),r},"DomSanitizer_Factory"),providedIn:"root"}),DomSanitizer2})();function domSanitizerImplFactory(injector){return new DomSanitizerImpl(injector.get(_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0))}__name(domSanitizerImplFactory,"domSanitizerImplFactory");let DomSanitizerImpl=(()=>{class DomSanitizerImpl2 extends DomSanitizer{constructor(_doc){super(),this._doc=_doc}sanitize(ctx,value){if(null==value)return null;switch(ctx){case _angular_core__WEBPACK_IMPORTED_MODULE_1__.q3G.NONE:return value;case _angular_core__WEBPACK_IMPORTED_MODULE_1__.q3G.HTML:return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.qzn)(value,"HTML")?(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.z3N)(value):(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.EiD)(this._doc,String(value)).toString();case _angular_core__WEBPACK_IMPORTED_MODULE_1__.q3G.STYLE:return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.qzn)(value,"Style")?(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.z3N)(value):value;case _angular_core__WEBPACK_IMPORTED_MODULE_1__.q3G.SCRIPT:if((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.qzn)(value,"Script"))return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.z3N)(value);throw new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vHH(5200,!1);case _angular_core__WEBPACK_IMPORTED_MODULE_1__.q3G.URL:return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.qzn)(value,"URL")?(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.z3N)(value):(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.mCW)(String(value));case _angular_core__WEBPACK_IMPORTED_MODULE_1__.q3G.RESOURCE_URL:if((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.qzn)(value,"ResourceURL"))return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.z3N)(value);throw new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vHH(5201,!1);default:throw new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vHH(5202,!1)}}bypassSecurityTrustHtml(value){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.JVY)(value)}bypassSecurityTrustStyle(value){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.L6k)(value)}bypassSecurityTrustScript(value){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBb)(value)}bypassSecurityTrustUrl(value){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.LAX)(value)}bypassSecurityTrustResourceUrl(value){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.pB0)(value)}}return __name(DomSanitizerImpl2,"DomSanitizerImpl"),DomSanitizerImpl2.\u0275fac=__name(function(t){return new(t||DomSanitizerImpl2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_0__.K0))},"DomSanitizerImpl_Factory"),DomSanitizerImpl2.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:DomSanitizerImpl2,factory:__name(function(t){let r=null;return r=t?new t:domSanitizerImplFactory(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.zs3)),r},"DomSanitizerImpl_Factory"),providedIn:"root"}),DomSanitizerImpl2})();function hydrationFeature(kind,providers=[]){return{\u0275kind:kind,\u0275providers:providers}}__name(hydrationFeature,"hydrationFeature"),__name(function withNoDomReuse(){return hydrationFeature(0)},"withNoDomReuse"),__name(function withNoHttpTransferCache(){return hydrationFeature(1)},"withNoHttpTransferCache"),__name(function provideZoneJsCompatibilityDetector(){return[{provide:ENVIRONMENT_INITIALIZER,useValue:()=>{if(inject(NgZone).constructor!==NgZone){const console2=inject(\u0275Console),message=\u0275formatRuntimeError(-5e3,"Angular detected that hydration was enabled for an application that uses a custom or a noop Zone.js implementation. This is not yet a fully supported configuration.");console2.warn(message)}},multi:!0}]},"provideZoneJsCompatibilityDetector"),__name(function provideClientHydration(...features){const providers=[],featuresKind=new Set;for(const{\u0275providers,\u0275kind}of features)featuresKind.add(\u0275kind),\u0275providers.length&&providers.push(\u0275providers);return makeEnvironmentProviders([[],featuresKind.has(0)?[]:\u0275withDomHydration(),featuresKind.has(1)?[]:\u0275withHttpTransferCache(),providers])},"provideClientHydration")},1894:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{gz:()=>ActivatedRoute,F0:()=>Router,Bz:()=>RouterModule,lC:()=>RouterOutlet});var core=__webpack_require__(2223),Observable2=__webpack_require__(9751),isFunction=__webpack_require__(576);function isObservable(obj){return!!obj&&(obj instanceof Observable2.y||(0,isFunction.m)(obj.lift)&&(0,isFunction.m)(obj.subscribe))}__name(isObservable,"isObservable");var from=__webpack_require__(2076),observable_of=__webpack_require__(9646),BehaviorSubject=__webpack_require__(1135),argsArgArrayOrObject=__webpack_require__(4742),identity=__webpack_require__(4671),mapOneOrManyArgs=__webpack_require__(3268),util_args=__webpack_require__(3269),createObject=__webpack_require__(1810),OperatorSubscriber=__webpack_require__(5403),executeSchedule=__webpack_require__(9672);function combineLatest(...args){const scheduler=(0,util_args.yG)(args),resultSelector=(0,util_args.jO)(args),{args:observables,keys}=(0,argsArgArrayOrObject.D)(args);if(0===observables.length)return(0,from.D)([],scheduler);const result=new Observable2.y(combineLatestInit(observables,scheduler,keys?values=>(0,createObject.n)(keys,values):identity.y));return resultSelector?result.pipe((0,mapOneOrManyArgs.Z)(resultSelector)):result}function combineLatestInit(observables,scheduler,valueTransform=identity.y){return subscriber=>{maybeSchedule(scheduler,()=>{const{length}=observables,values=new Array(length);let active=length,remainingFirstValues=length;for(let i=0;i<length;i++)maybeSchedule(scheduler,()=>{const source=(0,from.D)(observables[i],scheduler);let hasFirstValue=!1;source.subscribe((0,OperatorSubscriber.x)(subscriber,value=>{values[i]=value,hasFirstValue||(hasFirstValue=!0,remainingFirstValues--),remainingFirstValues||subscriber.next(valueTransform(values.slice()))},()=>{--active||subscriber.complete()}))},subscriber)},subscriber)}}function maybeSchedule(scheduler,execute,subscription){scheduler?(0,executeSchedule.f)(subscription,scheduler,execute):execute()}__name(combineLatest,"combineLatest"),__name(combineLatestInit,"combineLatestInit"),__name(maybeSchedule,"maybeSchedule");var EmptyError=__webpack_require__(6805),concat=__webpack_require__(7272),innerFrom=__webpack_require__(8421);function defer(observableFactory){return new Observable2.y(subscriber=>{(0,innerFrom.Xf)(observableFactory()).subscribe(subscriber)})}__name(defer,"defer");var pipe=__webpack_require__(9635);function throwError(errorOrErrorFactory,scheduler){const errorFactory=(0,isFunction.m)(errorOrErrorFactory)?errorOrErrorFactory:()=>errorOrErrorFactory,init=__name(subscriber=>subscriber.error(errorFactory()),"init");return new Observable2.y(scheduler?subscriber=>scheduler.schedule(init,0,subscriber):init)}__name(throwError,"throwError");var empty=__webpack_require__(515),Subscription=__webpack_require__(727),lift=__webpack_require__(4482);function refCount(){return(0,lift.e)((source,subscriber)=>{let connection=null;source._refCount++;const refCounter=(0,OperatorSubscriber.x)(subscriber,void 0,void 0,void 0,()=>{if(!source||source._refCount<=0||0<--source._refCount)return void(connection=null);const sharedConnection=source._connection,conn=connection;connection=null,sharedConnection&&(!conn||sharedConnection===conn)&&sharedConnection.unsubscribe(),subscriber.unsubscribe()});source.subscribe(refCounter),refCounter.closed||(connection=source.connect())})}__name(refCount,"refCount");class ConnectableObservable extends Observable2.y{constructor(source,subjectFactory){super(),this.source=source,this.subjectFactory=subjectFactory,this._subject=null,this._refCount=0,this._connection=null,(0,lift.A)(source)&&(this.lift=source.lift)}_subscribe(subscriber){return this.getSubject().subscribe(subscriber)}getSubject(){const subject=this._subject;return(!subject||subject.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection}=this;this._subject=this._connection=null,_connection?.unsubscribe()}connect(){let connection=this._connection;if(!connection){connection=this._connection=new Subscription.w0;const subject=this.getSubject();connection.add(this.source.subscribe((0,OperatorSubscriber.x)(subject,void 0,()=>{this._teardown(),subject.complete()},err=>{this._teardown(),subject.error(err)},()=>this._teardown()))),connection.closed&&(this._connection=null,connection=Subscription.w0.EMPTY)}return connection}refCount(){return refCount()(this)}}__name(ConnectableObservable,"ConnectableObservable");var Subject=__webpack_require__(7579),common=__webpack_require__(4755),map=__webpack_require__(4004),switchMap=__webpack_require__(3900),take=__webpack_require__(5698),startWith=__webpack_require__(8675),filter=__webpack_require__(9300),mergeMap=__webpack_require__(5577),first2=__webpack_require__(590),concatMap=__webpack_require__(4351);function tap2(observerOrNext,error,complete){const tapObserver=(0,isFunction.m)(observerOrNext)||error||complete?{next:observerOrNext,error,complete}:observerOrNext;return tapObserver?(0,lift.e)((source,subscriber)=>{var _a;null===(_a=tapObserver.subscribe)||void 0===_a||_a.call(tapObserver);let isUnsub=!0;source.subscribe((0,OperatorSubscriber.x)(subscriber,value=>{var _a2;null===(_a2=tapObserver.next)||void 0===_a2||_a2.call(tapObserver,value),subscriber.next(value)},()=>{var _a2;isUnsub=!1,null===(_a2=tapObserver.complete)||void 0===_a2||_a2.call(tapObserver),subscriber.complete()},err=>{var _a2;isUnsub=!1,null===(_a2=tapObserver.error)||void 0===_a2||_a2.call(tapObserver,err),subscriber.error(err)},()=>{var _a2,_b;isUnsub&&(null===(_a2=tapObserver.unsubscribe)||void 0===_a2||_a2.call(tapObserver)),null===(_b=tapObserver.finalize)||void 0===_b||_b.call(tapObserver)}))}):identity.y}function catchError_catchError(selector){return(0,lift.e)((source,subscriber)=>{let handledResult,innerSub=null,syncUnsub=!1;innerSub=source.subscribe((0,OperatorSubscriber.x)(subscriber,void 0,void 0,err=>{handledResult=(0,innerFrom.Xf)(selector(err,catchError_catchError(selector)(source))),innerSub?(innerSub.unsubscribe(),innerSub=null,handledResult.subscribe(subscriber)):syncUnsub=!0})),syncUnsub&&(innerSub.unsubscribe(),innerSub=null,handledResult.subscribe(subscriber))})}function scanInternals(accumulator,seed,hasSeed,emitOnNext,emitBeforeComplete){return(source,subscriber)=>{let hasState=hasSeed,state=seed,index=0;source.subscribe((0,OperatorSubscriber.x)(subscriber,value=>{const i=index++;state=hasState?accumulator(state,value,i):(hasState=!0,value),emitOnNext&&subscriber.next(state)},emitBeforeComplete&&(()=>{hasState&&subscriber.next(state),subscriber.complete()})))}}function scan(accumulator,seed){return(0,lift.e)(scanInternals(accumulator,seed,arguments.length>=2,!0))}__name(tap2,"tap"),__name(catchError_catchError,"catchError_catchError"),__name(scanInternals,"scanInternals"),__name(scan,"scan");var defaultIfEmpty=__webpack_require__(6590);function takeLast(count){return count<=0?()=>empty.E:(0,lift.e)((source,subscriber)=>{let buffer=[];source.subscribe((0,OperatorSubscriber.x)(subscriber,value=>{buffer.push(value),count<buffer.length&&buffer.shift()},()=>{for(const value of buffer)subscriber.next(value);subscriber.complete()},void 0,()=>{buffer=null}))})}__name(takeLast,"takeLast");var throwIfEmpty=__webpack_require__(8068);function last(predicate,defaultValue){const hasDefaultValue=arguments.length>=2;return source=>source.pipe(predicate?(0,filter.h)((v,i)=>predicate(v,i,source)):identity.y,takeLast(1),hasDefaultValue?(0,defaultIfEmpty.d)(defaultValue):(0,throwIfEmpty.T)(()=>new EmptyError.K))}__name(last,"last");var mapTo=__webpack_require__(9718);function finalize(callback){return(0,lift.e)((source,subscriber)=>{try{source.subscribe(subscriber)}finally{subscriber.add(callback)}})}__name(finalize,"finalize");var mergeAll=__webpack_require__(8189),platform_browser=__webpack_require__(6550);const PRIMARY_OUTLET="primary",RouteTitleKey=Symbol("RouteTitle");class ParamsAsMap{constructor(params){this.params=params||{}}has(name){return Object.prototype.hasOwnProperty.call(this.params,name)}get(name){if(this.has(name)){const v=this.params[name];return Array.isArray(v)?v[0]:v}return null}getAll(name){if(this.has(name)){const v=this.params[name];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function convertToParamMap(params){return new ParamsAsMap(params)}function defaultUrlMatcher(segments,segmentGroup,route){const parts=route.path.split("/");if(parts.length>segments.length||"full"===route.pathMatch&&(segmentGroup.hasChildren()||parts.length<segments.length))return null;const posParams={};for(let index=0;index<parts.length;index++){const part=parts[index],segment=segments[index];if(part.startsWith(":"))posParams[part.substring(1)]=segment;else if(part!==segment.path)return null}return{consumed:segments.slice(0,parts.length),posParams}}function shallowEqualArrays(a,b){if(a.length!==b.length)return!1;for(let i=0;i<a.length;++i)if(!shallowEqual(a[i],b[i]))return!1;return!0}function shallowEqual(a,b){const k1=a?Object.keys(a):void 0,k2=b?Object.keys(b):void 0;if(!k1||!k2||k1.length!=k2.length)return!1;let key;for(let i=0;i<k1.length;i++)if(key=k1[i],!equalArraysOrString(a[key],b[key]))return!1;return!0}function equalArraysOrString(a,b){if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;const aSorted=[...a].sort(),bSorted=[...b].sort();return aSorted.every((val,index)=>bSorted[index]===val)}return a===b}function router_last(a){return a.length>0?a[a.length-1]:null}function wrapIntoObservable(value){return isObservable(value)?value:(0,core.QGY)(value)?(0,from.D)(Promise.resolve(value)):(0,observable_of.of)(value)}__name(ParamsAsMap,"ParamsAsMap"),__name(convertToParamMap,"convertToParamMap"),__name(defaultUrlMatcher,"defaultUrlMatcher"),__name(shallowEqualArrays,"shallowEqualArrays"),__name(shallowEqual,"shallowEqual"),__name(equalArraysOrString,"equalArraysOrString"),__name(router_last,"router_last"),__name(wrapIntoObservable,"wrapIntoObservable");const pathCompareMap={exact:equalSegmentGroups,subset:containsSegmentGroup},paramCompareMap={exact:equalParams,subset:containsParams,ignored:()=>!0};function containsTree(container,containee,options){return pathCompareMap[options.paths](container.root,containee.root,options.matrixParams)&&paramCompareMap[options.queryParams](container.queryParams,containee.queryParams)&&!("exact"===options.fragment&&container.fragment!==containee.fragment)}function equalParams(container,containee){return shallowEqual(container,containee)}function equalSegmentGroups(container,containee,matrixParams){if(!equalPath(container.segments,containee.segments)||!matrixParamsMatch(container.segments,containee.segments,matrixParams)||container.numberOfChildren!==containee.numberOfChildren)return!1;for(const c in containee.children)if(!container.children[c]||!equalSegmentGroups(container.children[c],containee.children[c],matrixParams))return!1;return!0}function containsParams(container,containee){return Object.keys(containee).length<=Object.keys(container).length&&Object.keys(containee).every(key=>equalArraysOrString(container[key],containee[key]))}function containsSegmentGroup(container,containee,matrixParams){return containsSegmentGroupHelper(container,containee,containee.segments,matrixParams)}function containsSegmentGroupHelper(container,containee,containeePaths,matrixParams){if(container.segments.length>containeePaths.length){const current=container.segments.slice(0,containeePaths.length);return!(!equalPath(current,containeePaths)||containee.hasChildren()||!matrixParamsMatch(current,containeePaths,matrixParams))}if(container.segments.length===containeePaths.length){if(!equalPath(container.segments,containeePaths)||!matrixParamsMatch(container.segments,containeePaths,matrixParams))return!1;for(const c in containee.children)if(!container.children[c]||!containsSegmentGroup(container.children[c],containee.children[c],matrixParams))return!1;return!0}{const current=containeePaths.slice(0,container.segments.length),next=containeePaths.slice(container.segments.length);return!!(equalPath(container.segments,current)&&matrixParamsMatch(container.segments,current,matrixParams)&&container.children[PRIMARY_OUTLET])&&containsSegmentGroupHelper(container.children[PRIMARY_OUTLET],containee,next,matrixParams)}}function matrixParamsMatch(containerPaths,containeePaths,options){return containeePaths.every((containeeSegment,i)=>paramCompareMap[options](containerPaths[i].parameters,containeeSegment.parameters))}__name(containsTree,"containsTree"),__name(equalParams,"equalParams"),__name(equalSegmentGroups,"equalSegmentGroups"),__name(containsParams,"containsParams"),__name(containsSegmentGroup,"containsSegmentGroup"),__name(containsSegmentGroupHelper,"containsSegmentGroupHelper"),__name(matrixParamsMatch,"matrixParamsMatch");class UrlTree{constructor(root=new UrlSegmentGroup([],{}),queryParams={},fragment=null){this.root=root,this.queryParams=queryParams,this.fragment=fragment}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=convertToParamMap(this.queryParams)),this._queryParamMap}toString(){return DEFAULT_SERIALIZER.serialize(this)}}__name(UrlTree,"UrlTree");class UrlSegmentGroup{constructor(segments,children){this.segments=segments,this.children=children,this.parent=null,Object.values(children).forEach(v=>v.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return serializePaths(this)}}__name(UrlSegmentGroup,"UrlSegmentGroup");class UrlSegment{constructor(path,parameters){this.path=path,this.parameters=parameters}get parameterMap(){return this._parameterMap||(this._parameterMap=convertToParamMap(this.parameters)),this._parameterMap}toString(){return serializePath(this)}}function equalSegments(as,bs){return equalPath(as,bs)&&as.every((a,i)=>shallowEqual(a.parameters,bs[i].parameters))}function equalPath(as,bs){return as.length===bs.length&&as.every((a,i)=>a.path===bs[i].path)}function mapChildrenIntoArray(segment,fn){let res=[];return Object.entries(segment.children).forEach(([childOutlet,child])=>{childOutlet===PRIMARY_OUTLET&&(res=res.concat(fn(child,childOutlet)))}),Object.entries(segment.children).forEach(([childOutlet,child])=>{childOutlet!==PRIMARY_OUTLET&&(res=res.concat(fn(child,childOutlet)))}),res}__name(UrlSegment,"UrlSegment"),__name(equalSegments,"equalSegments"),__name(equalPath,"equalPath"),__name(mapChildrenIntoArray,"mapChildrenIntoArray");let UrlSerializer=(()=>{class UrlSerializer2{}return __name(UrlSerializer2,"UrlSerializer"),UrlSerializer2.\u0275fac=__name(function(t){return new(t||UrlSerializer2)},"UrlSerializer_Factory"),UrlSerializer2.\u0275prov=core.Yz7({token:UrlSerializer2,factory:function(){return new DefaultUrlSerializer},providedIn:"root"}),UrlSerializer2})();class DefaultUrlSerializer{parse(url){const p=new UrlParser(url);return new UrlTree(p.parseRootSegment(),p.parseQueryParams(),p.parseFragment())}serialize(tree2){return`/${serializeSegment(tree2.root,!0)}${serializeQueryParams(tree2.queryParams)}${"string"==typeof tree2.fragment?`#${encodeUriFragment(tree2.fragment)}`:""}`}}__name(DefaultUrlSerializer,"DefaultUrlSerializer");const DEFAULT_SERIALIZER=new DefaultUrlSerializer;function serializePaths(segment){return segment.segments.map(p=>serializePath(p)).join("/")}function serializeSegment(segment,root){if(!segment.hasChildren())return serializePaths(segment);if(root){const primary=segment.children[PRIMARY_OUTLET]?serializeSegment(segment.children[PRIMARY_OUTLET],!1):"",children=[];return Object.entries(segment.children).forEach(([k,v])=>{k!==PRIMARY_OUTLET&&children.push(`${k}:${serializeSegment(v,!1)}`)}),children.length>0?`${primary}(${children.join("//")})`:primary}{const children=mapChildrenIntoArray(segment,(v,k)=>k===PRIMARY_OUTLET?[serializeSegment(segment.children[PRIMARY_OUTLET],!1)]:[`${k}:${serializeSegment(v,!1)}`]);return 1===Object.keys(segment.children).length&&null!=segment.children[PRIMARY_OUTLET]?`${serializePaths(segment)}/${children[0]}`:`${serializePaths(segment)}/(${children.join("//")})`}}function encodeUriString(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function encodeUriQuery(s){return encodeUriString(s).replace(/%3B/gi,";")}function encodeUriFragment(s){return encodeURI(s)}function encodeUriSegment(s){return encodeUriString(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function decode(s){return decodeURIComponent(s)}function decodeQuery(s){return decode(s.replace(/\+/g,"%20"))}function serializePath(path){return`${encodeUriSegment(path.path)}${serializeMatrixParams(path.parameters)}`}function serializeMatrixParams(params){return Object.keys(params).map(key=>`;${encodeUriSegment(key)}=${encodeUriSegment(params[key])}`).join("")}function serializeQueryParams(params){const strParams=Object.keys(params).map(name=>{const value=params[name];return Array.isArray(value)?value.map(v=>`${encodeUriQuery(name)}=${encodeUriQuery(v)}`).join("&"):`${encodeUriQuery(name)}=${encodeUriQuery(value)}`}).filter(s=>!!s);return strParams.length?`?${strParams.join("&")}`:""}__name(serializePaths,"serializePaths"),__name(serializeSegment,"serializeSegment"),__name(encodeUriString,"encodeUriString"),__name(encodeUriQuery,"encodeUriQuery"),__name(encodeUriFragment,"encodeUriFragment"),__name(encodeUriSegment,"encodeUriSegment"),__name(decode,"decode"),__name(decodeQuery,"decodeQuery"),__name(serializePath,"serializePath"),__name(serializeMatrixParams,"serializeMatrixParams"),__name(serializeQueryParams,"serializeQueryParams");const SEGMENT_RE=/^[^\/()?;#]+/;function matchSegments(str){const match2=str.match(SEGMENT_RE);return match2?match2[0]:""}__name(matchSegments,"matchSegments");const MATRIX_PARAM_SEGMENT_RE=/^[^\/()?;=#]+/;function matchMatrixKeySegments(str){const match2=str.match(MATRIX_PARAM_SEGMENT_RE);return match2?match2[0]:""}__name(matchMatrixKeySegments,"matchMatrixKeySegments");const QUERY_PARAM_RE=/^[^=?&#]+/;function matchQueryParams(str){const match2=str.match(QUERY_PARAM_RE);return match2?match2[0]:""}__name(matchQueryParams,"matchQueryParams");const QUERY_PARAM_VALUE_RE=/^[^&#]+/;function matchUrlQueryParamValue(str){const match2=str.match(QUERY_PARAM_VALUE_RE);return match2?match2[0]:""}__name(matchUrlQueryParamValue,"matchUrlQueryParamValue");class UrlParser{constructor(url){this.url=url,this.remaining=url}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new UrlSegmentGroup([],{}):new UrlSegmentGroup([],this.parseChildren())}parseQueryParams(){const params={};if(this.consumeOptional("?"))do{this.parseQueryParam(params)}while(this.consumeOptional("&"));return params}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const segments=[];for(this.peekStartsWith("(")||segments.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),segments.push(this.parseSegment());let children={};this.peekStartsWith("/(")&&(this.capture("/"),children=this.parseParens(!0));let res={};return this.peekStartsWith("(")&&(res=this.parseParens(!1)),(segments.length>0||Object.keys(children).length>0)&&(res[PRIMARY_OUTLET]=new UrlSegmentGroup(segments,children)),res}parseSegment(){const path=matchSegments(this.remaining);if(""===path&&this.peekStartsWith(";"))throw new core.vHH(4009,!1);return this.capture(path),new UrlSegment(decode(path),this.parseMatrixParams())}parseMatrixParams(){const params={};for(;this.consumeOptional(";");)this.parseParam(params);return params}parseParam(params){const key=matchMatrixKeySegments(this.remaining);if(!key)return;this.capture(key);let value="";if(this.consumeOptional("=")){const valueMatch=matchSegments(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}params[decode(key)]=decode(value)}parseQueryParam(params){const key=matchQueryParams(this.remaining);if(!key)return;this.capture(key);let value="";if(this.consumeOptional("=")){const valueMatch=matchUrlQueryParamValue(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}const decodedKey=decodeQuery(key),decodedVal=decodeQuery(value);if(params.hasOwnProperty(decodedKey)){let currentVal=params[decodedKey];Array.isArray(currentVal)||(currentVal=[currentVal],params[decodedKey]=currentVal),currentVal.push(decodedVal)}else params[decodedKey]=decodedVal}parseParens(allowPrimary){const segments={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const path=matchSegments(this.remaining),next=this.remaining[path.length];if("/"!==next&&")"!==next&&";"!==next)throw new core.vHH(4010,!1);let outletName;path.indexOf(":")>-1?(outletName=path.slice(0,path.indexOf(":")),this.capture(outletName),this.capture(":")):allowPrimary&&(outletName=PRIMARY_OUTLET);const children=this.parseChildren();segments[outletName]=1===Object.keys(children).length?children[PRIMARY_OUTLET]:new UrlSegmentGroup([],children),this.consumeOptional("//")}return segments}peekStartsWith(str){return this.remaining.startsWith(str)}consumeOptional(str){return!!this.peekStartsWith(str)&&(this.remaining=this.remaining.substring(str.length),!0)}capture(str){if(!this.consumeOptional(str))throw new core.vHH(4011,!1)}}function createRoot(rootCandidate){return rootCandidate.segments.length>0?new UrlSegmentGroup([],{[PRIMARY_OUTLET]:rootCandidate}):rootCandidate}function squashSegmentGroup(segmentGroup){const newChildren={};for(const childOutlet of Object.keys(segmentGroup.children)){const childCandidate=squashSegmentGroup(segmentGroup.children[childOutlet]);if(childOutlet===PRIMARY_OUTLET&&0===childCandidate.segments.length&&childCandidate.hasChildren())for(const[grandChildOutlet,grandChild]of Object.entries(childCandidate.children))newChildren[grandChildOutlet]=grandChild;else(childCandidate.segments.length>0||childCandidate.hasChildren())&&(newChildren[childOutlet]=childCandidate)}return mergeTrivialChildren(new UrlSegmentGroup(segmentGroup.segments,newChildren))}function mergeTrivialChildren(s){if(1===s.numberOfChildren&&s.children[PRIMARY_OUTLET]){const c=s.children[PRIMARY_OUTLET];return new UrlSegmentGroup(s.segments.concat(c.segments),c.children)}return s}function isUrlTree(v){return v instanceof UrlTree}function createUrlTreeFromSnapshot(relativeTo,commands,queryParams=null,fragment=null){return createUrlTreeFromSegmentGroup(createSegmentGroupFromRoute(relativeTo),commands,queryParams,fragment)}function createSegmentGroupFromRoute(route){let targetGroup;function createSegmentGroupFromRouteRecursive(currentRoute){const childOutlets={};for(const childSnapshot of currentRoute.children){const root=createSegmentGroupFromRouteRecursive(childSnapshot);childOutlets[childSnapshot.outlet]=root}const segmentGroup=new UrlSegmentGroup(currentRoute.url,childOutlets);return currentRoute===route&&(targetGroup=segmentGroup),segmentGroup}__name(createSegmentGroupFromRouteRecursive,"createSegmentGroupFromRouteRecursive");const rootSegmentGroup=createRoot(createSegmentGroupFromRouteRecursive(route.root));return targetGroup??rootSegmentGroup}function createUrlTreeFromSegmentGroup(relativeTo,commands,queryParams,fragment){let root=relativeTo;for(;root.parent;)root=root.parent;if(0===commands.length)return tree(root,root,root,queryParams,fragment);const nav=computeNavigation(commands);if(nav.toRoot())return tree(root,root,new UrlSegmentGroup([],{}),queryParams,fragment);const position=findStartingPositionForTargetGroup(nav,root,relativeTo),newSegmentGroup=position.processChildren?updateSegmentGroupChildren(position.segmentGroup,position.index,nav.commands):updateSegmentGroup(position.segmentGroup,position.index,nav.commands);return tree(root,position.segmentGroup,newSegmentGroup,queryParams,fragment)}function isMatrixParams(command){return"object"==typeof command&&null!=command&&!command.outlets&&!command.segmentPath}function isCommandWithOutlets(command){return"object"==typeof command&&null!=command&&command.outlets}function tree(oldRoot,oldSegmentGroup,newSegmentGroup,queryParams,fragment){let rootCandidate,qp={};queryParams&&Object.entries(queryParams).forEach(([name,value])=>{qp[name]=Array.isArray(value)?value.map(v=>`${v}`):`${value}`}),rootCandidate=oldRoot===oldSegmentGroup?newSegmentGroup:replaceSegment(oldRoot,oldSegmentGroup,newSegmentGroup);const newRoot=createRoot(squashSegmentGroup(rootCandidate));return new UrlTree(newRoot,qp,fragment)}function replaceSegment(current,oldSegment,newSegment){const children={};return Object.entries(current.children).forEach(([outletName,c])=>{children[outletName]=c===oldSegment?newSegment:replaceSegment(c,oldSegment,newSegment)}),new UrlSegmentGroup(current.segments,children)}__name(UrlParser,"UrlParser"),__name(createRoot,"createRoot"),__name(squashSegmentGroup,"squashSegmentGroup"),__name(mergeTrivialChildren,"mergeTrivialChildren"),__name(isUrlTree,"isUrlTree"),__name(createUrlTreeFromSnapshot,"createUrlTreeFromSnapshot"),__name(createSegmentGroupFromRoute,"createSegmentGroupFromRoute"),__name(createUrlTreeFromSegmentGroup,"createUrlTreeFromSegmentGroup"),__name(isMatrixParams,"isMatrixParams"),__name(isCommandWithOutlets,"isCommandWithOutlets"),__name(tree,"tree"),__name(replaceSegment,"replaceSegment");class Navigation{constructor(isAbsolute,numberOfDoubleDots,commands){if(this.isAbsolute=isAbsolute,this.numberOfDoubleDots=numberOfDoubleDots,this.commands=commands,isAbsolute&&commands.length>0&&isMatrixParams(commands[0]))throw new core.vHH(4003,!1);const cmdWithOutlet=commands.find(isCommandWithOutlets);if(cmdWithOutlet&&cmdWithOutlet!==router_last(commands))throw new core.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}function computeNavigation(commands){if("string"==typeof commands[0]&&1===commands.length&&"/"===commands[0])return new Navigation(!0,0,commands);let numberOfDoubleDots=0,isAbsolute=!1;const res=commands.reduce((res2,cmd,cmdIdx)=>{if("object"==typeof cmd&&null!=cmd){if(cmd.outlets){const outlets={};return Object.entries(cmd.outlets).forEach(([name,commands2])=>{outlets[name]="string"==typeof commands2?commands2.split("/"):commands2}),[...res2,{outlets}]}if(cmd.segmentPath)return[...res2,cmd.segmentPath]}return"string"!=typeof cmd?[...res2,cmd]:0===cmdIdx?(cmd.split("/").forEach((urlPart,partIndex)=>{0==partIndex&&"."===urlPart||(0==partIndex&&""===urlPart?isAbsolute=!0:".."===urlPart?numberOfDoubleDots++:""!=urlPart&&res2.push(urlPart))}),res2):[...res2,cmd]},[]);return new Navigation(isAbsolute,numberOfDoubleDots,res)}__name(Navigation,"Navigation"),__name(computeNavigation,"computeNavigation");class Position{constructor(segmentGroup,processChildren,index){this.segmentGroup=segmentGroup,this.processChildren=processChildren,this.index=index}}function findStartingPositionForTargetGroup(nav,root,target){if(nav.isAbsolute)return new Position(root,!0,0);if(!target)return new Position(root,!1,NaN);if(null===target.parent)return new Position(target,!0,0);const modifier=isMatrixParams(nav.commands[0])?0:1;return createPositionApplyingDoubleDots(target,target.segments.length-1+modifier,nav.numberOfDoubleDots)}function createPositionApplyingDoubleDots(group,index,numberOfDoubleDots){let g=group,ci=index,dd=numberOfDoubleDots;for(;dd>ci;){if(dd-=ci,g=g.parent,!g)throw new core.vHH(4005,!1);ci=g.segments.length}return new Position(g,!1,ci-dd)}function getOutlets(commands){return isCommandWithOutlets(commands[0])?commands[0].outlets:{[PRIMARY_OUTLET]:commands}}function updateSegmentGroup(segmentGroup,startIndex,commands){if(segmentGroup||(segmentGroup=new UrlSegmentGroup([],{})),0===segmentGroup.segments.length&&segmentGroup.hasChildren())return updateSegmentGroupChildren(segmentGroup,startIndex,commands);const m=prefixedWith(segmentGroup,startIndex,commands),slicedCommands=commands.slice(m.commandIndex);if(m.match&&m.pathIndex<segmentGroup.segments.length){const g=new UrlSegmentGroup(segmentGroup.segments.slice(0,m.pathIndex),{});return g.children[PRIMARY_OUTLET]=new UrlSegmentGroup(segmentGroup.segments.slice(m.pathIndex),segmentGroup.children),updateSegmentGroupChildren(g,0,slicedCommands)}return m.match&&0===slicedCommands.length?new UrlSegmentGroup(segmentGroup.segments,{}):m.match&&!segmentGroup.hasChildren()?createNewSegmentGroup(segmentGroup,startIndex,commands):m.match?updateSegmentGroupChildren(segmentGroup,0,slicedCommands):createNewSegmentGroup(segmentGroup,startIndex,commands)}function updateSegmentGroupChildren(segmentGroup,startIndex,commands){if(0===commands.length)return new UrlSegmentGroup(segmentGroup.segments,{});{const outlets=getOutlets(commands),children={};if(!outlets[PRIMARY_OUTLET]&&segmentGroup.children[PRIMARY_OUTLET]&&1===segmentGroup.numberOfChildren&&0===segmentGroup.children[PRIMARY_OUTLET].segments.length){const childrenOfEmptyChild=updateSegmentGroupChildren(segmentGroup.children[PRIMARY_OUTLET],startIndex,commands);return new UrlSegmentGroup(segmentGroup.segments,childrenOfEmptyChild.children)}return Object.entries(outlets).forEach(([outlet,commands2])=>{"string"==typeof commands2&&(commands2=[commands2]),null!==commands2&&(children[outlet]=updateSegmentGroup(segmentGroup.children[outlet],startIndex,commands2))}),Object.entries(segmentGroup.children).forEach(([childOutlet,child])=>{void 0===outlets[childOutlet]&&(children[childOutlet]=child)}),new UrlSegmentGroup(segmentGroup.segments,children)}}function prefixedWith(segmentGroup,startIndex,commands){let currentCommandIndex=0,currentPathIndex=startIndex;const noMatch2={match:!1,pathIndex:0,commandIndex:0};for(;currentPathIndex<segmentGroup.segments.length;){if(currentCommandIndex>=commands.length)return noMatch2;const path=segmentGroup.segments[currentPathIndex],command=commands[currentCommandIndex];if(isCommandWithOutlets(command))break;const curr=`${command}`,next=currentCommandIndex<commands.length-1?commands[currentCommandIndex+1]:null;if(currentPathIndex>0&&void 0===curr)break;if(curr&&next&&"object"==typeof next&&void 0===next.outlets){if(!compare(curr,next,path))return noMatch2;currentCommandIndex+=2}else{if(!compare(curr,{},path))return noMatch2;currentCommandIndex++}currentPathIndex++}return{match:!0,pathIndex:currentPathIndex,commandIndex:currentCommandIndex}}function createNewSegmentGroup(segmentGroup,startIndex,commands){const paths=segmentGroup.segments.slice(0,startIndex);let i=0;for(;i<commands.length;){const command=commands[i];if(isCommandWithOutlets(command)){const children=createNewSegmentChildren(command.outlets);return new UrlSegmentGroup(paths,children)}if(0===i&&isMatrixParams(commands[0])){paths.push(new UrlSegment(segmentGroup.segments[startIndex].path,stringify(commands[0]))),i++;continue}const curr=isCommandWithOutlets(command)?command.outlets[PRIMARY_OUTLET]:`${command}`,next=i<commands.length-1?commands[i+1]:null;curr&&next&&isMatrixParams(next)?(paths.push(new UrlSegment(curr,stringify(next))),i+=2):(paths.push(new UrlSegment(curr,{})),i++)}return new UrlSegmentGroup(paths,{})}function createNewSegmentChildren(outlets){const children={};return Object.entries(outlets).forEach(([outlet,commands])=>{"string"==typeof commands&&(commands=[commands]),null!==commands&&(children[outlet]=createNewSegmentGroup(new UrlSegmentGroup([],{}),0,commands))}),children}function stringify(params){const res={};return Object.entries(params).forEach(([k,v])=>res[k]=`${v}`),res}function compare(path,params,segment){return path==segment.path&&shallowEqual(params,segment.parameters)}__name(Position,"Position"),__name(findStartingPositionForTargetGroup,"findStartingPositionForTargetGroup"),__name(createPositionApplyingDoubleDots,"createPositionApplyingDoubleDots"),__name(getOutlets,"getOutlets"),__name(updateSegmentGroup,"updateSegmentGroup"),__name(updateSegmentGroupChildren,"updateSegmentGroupChildren"),__name(prefixedWith,"prefixedWith"),__name(createNewSegmentGroup,"createNewSegmentGroup"),__name(createNewSegmentChildren,"createNewSegmentChildren"),__name(stringify,"stringify"),__name(compare,"compare");const IMPERATIVE_NAVIGATION="imperative";class RouterEvent{constructor(id,url){this.id=id,this.url=url}}__name(RouterEvent,"RouterEvent");class NavigationStart extends RouterEvent{constructor(id,url,navigationTrigger="imperative",restoredState=null){super(id,url),this.type=0,this.navigationTrigger=navigationTrigger,this.restoredState=restoredState}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}__name(NavigationStart,"NavigationStart");class NavigationEnd extends RouterEvent{constructor(id,url,urlAfterRedirects){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}__name(NavigationEnd,"NavigationEnd");class NavigationCancel extends RouterEvent{constructor(id,url,reason,code){super(id,url),this.reason=reason,this.code=code,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}__name(NavigationCancel,"NavigationCancel");class NavigationSkipped extends RouterEvent{constructor(id,url,reason,code){super(id,url),this.reason=reason,this.code=code,this.type=16}}__name(NavigationSkipped,"NavigationSkipped");class NavigationError extends RouterEvent{constructor(id,url,error,target){super(id,url),this.error=error,this.target=target,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}__name(NavigationError,"NavigationError");class RoutesRecognized extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}__name(RoutesRecognized,"RoutesRecognized");class GuardsCheckStart extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}__name(GuardsCheckStart,"GuardsCheckStart");class GuardsCheckEnd extends RouterEvent{constructor(id,url,urlAfterRedirects,state,shouldActivate){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state,this.shouldActivate=shouldActivate,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}__name(GuardsCheckEnd,"GuardsCheckEnd");class ResolveStart extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}__name(ResolveStart,"ResolveStart");class ResolveEnd extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}__name(ResolveEnd,"ResolveEnd");class RouteConfigLoadStart{constructor(route){this.route=route,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}__name(RouteConfigLoadStart,"RouteConfigLoadStart");class RouteConfigLoadEnd{constructor(route){this.route=route,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}__name(RouteConfigLoadEnd,"RouteConfigLoadEnd");class ChildActivationStart{constructor(snapshot){this.snapshot=snapshot,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}__name(ChildActivationStart,"ChildActivationStart");class ChildActivationEnd{constructor(snapshot){this.snapshot=snapshot,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}__name(ChildActivationEnd,"ChildActivationEnd");class ActivationStart{constructor(snapshot){this.snapshot=snapshot,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}__name(ActivationStart,"ActivationStart");class ActivationEnd{constructor(snapshot){this.snapshot=snapshot,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}__name(ActivationEnd,"ActivationEnd");class Scroll{constructor(routerEvent,position,anchor){this.routerEvent=routerEvent,this.position=position,this.anchor=anchor,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}__name(Scroll,"Scroll"),__name(function stringifyEvent(routerEvent){switch(routerEvent.type){case 14:return`ActivationEnd(path: '${routerEvent.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${routerEvent.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${routerEvent.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${routerEvent.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}', state: ${routerEvent.state}, shouldActivate: ${routerEvent.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}', state: ${routerEvent.state})`;case 2:return`NavigationCancel(id: ${routerEvent.id}, url: '${routerEvent.url}')`;case 16:return`NavigationSkipped(id: ${routerEvent.id}, url: '${routerEvent.url}')`;case 1:return`NavigationEnd(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${routerEvent.id}, url: '${routerEvent.url}', error: ${routerEvent.error})`;case 0:return`NavigationStart(id: ${routerEvent.id}, url: '${routerEvent.url}')`;case 6:return`ResolveEnd(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}', state: ${routerEvent.state})`;case 5:return`ResolveStart(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}', state: ${routerEvent.state})`;case 10:return`RouteConfigLoadEnd(path: ${routerEvent.route.path})`;case 9:return`RouteConfigLoadStart(path: ${routerEvent.route.path})`;case 4:return`RoutesRecognized(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}', state: ${routerEvent.state})`;case 15:return`Scroll(anchor: '${routerEvent.anchor}', position: '${routerEvent.position?`${routerEvent.position[0]}, ${routerEvent.position[1]}`:null}')`}},"stringifyEvent");class OutletContext{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ChildrenOutletContexts,this.attachRef=null}}__name(OutletContext,"OutletContext");let ChildrenOutletContexts=(()=>{class ChildrenOutletContexts2{constructor(){this.contexts=new Map}onChildOutletCreated(childName,outlet){const context=this.getOrCreateContext(childName);context.outlet=outlet,this.contexts.set(childName,context)}onChildOutletDestroyed(childName){const context=this.getContext(childName);context&&(context.outlet=null,context.attachRef=null)}onOutletDeactivated(){const contexts=this.contexts;return this.contexts=new Map,contexts}onOutletReAttached(contexts){this.contexts=contexts}getOrCreateContext(childName){let context=this.getContext(childName);return context||(context=new OutletContext,this.contexts.set(childName,context)),context}getContext(childName){return this.contexts.get(childName)||null}}return __name(ChildrenOutletContexts2,"ChildrenOutletContexts"),ChildrenOutletContexts2.\u0275fac=__name(function(t){return new(t||ChildrenOutletContexts2)},"ChildrenOutletContexts_Factory"),ChildrenOutletContexts2.\u0275prov=core.Yz7({token:ChildrenOutletContexts2,factory:ChildrenOutletContexts2.\u0275fac,providedIn:"root"}),ChildrenOutletContexts2})();class Tree{constructor(root){this._root=root}get root(){return this._root.value}parent(t){const p=this.pathFromRoot(t);return p.length>1?p[p.length-2]:null}children(t){const n=findNode(t,this._root);return n?n.children.map(t2=>t2.value):[]}firstChild(t){const n=findNode(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const p=findPath(t,this._root);return p.length<2?[]:p[p.length-2].children.map(c2=>c2.value).filter(cc=>cc!==t)}pathFromRoot(t){return findPath(t,this._root).map(s=>s.value)}}function findNode(value,node){if(value===node.value)return node;for(const child of node.children){const node2=findNode(value,child);if(node2)return node2}return null}function findPath(value,node){if(value===node.value)return[node];for(const child of node.children){const path=findPath(value,child);if(path.length)return path.unshift(node),path}return[]}__name(Tree,"Tree"),__name(findNode,"findNode"),__name(findPath,"findPath");class TreeNode{constructor(value,children){this.value=value,this.children=children}toString(){return`TreeNode(${this.value})`}}function nodeChildrenAsMap(node){const map2={};return node&&node.children.forEach(child=>map2[child.value.outlet]=child),map2}__name(TreeNode,"TreeNode"),__name(nodeChildrenAsMap,"nodeChildrenAsMap");class RouterState extends Tree{constructor(root,snapshot){super(root),this.snapshot=snapshot,setRouterState(this,root)}toString(){return this.snapshot.toString()}}function createEmptyState(urlTree,rootComponent){const snapshot=createEmptyStateSnapshot(0,rootComponent),emptyUrl=new BehaviorSubject.X([new UrlSegment("",{})]),emptyParams=new BehaviorSubject.X({}),emptyData=new BehaviorSubject.X({}),emptyQueryParams=new BehaviorSubject.X({}),fragment=new BehaviorSubject.X(""),activated=new ActivatedRoute(emptyUrl,emptyParams,emptyQueryParams,fragment,emptyData,PRIMARY_OUTLET,rootComponent,snapshot.root);return activated.snapshot=snapshot.root,new RouterState(new TreeNode(activated,[]),snapshot)}function createEmptyStateSnapshot(urlTree,rootComponent){const activated=new ActivatedRouteSnapshot([],{},{},"",{},PRIMARY_OUTLET,rootComponent,null,{});return new RouterStateSnapshot("",new TreeNode(activated,[]))}__name(RouterState,"RouterState"),__name(createEmptyState,"createEmptyState"),__name(createEmptyStateSnapshot,"createEmptyStateSnapshot");class ActivatedRoute{constructor(urlSubject,paramsSubject,queryParamsSubject,fragmentSubject,dataSubject,outlet,component,futureSnapshot){this.urlSubject=urlSubject,this.paramsSubject=paramsSubject,this.queryParamsSubject=queryParamsSubject,this.fragmentSubject=fragmentSubject,this.dataSubject=dataSubject,this.outlet=outlet,this.component=component,this._futureSnapshot=futureSnapshot,this.title=this.dataSubject?.pipe((0,map.U)(d=>d[RouteTitleKey]))??(0,observable_of.of)(void 0),this.url=urlSubject,this.params=paramsSubject,this.queryParams=queryParamsSubject,this.fragment=fragmentSubject,this.data=dataSubject}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,map.U)(p=>convertToParamMap(p)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,map.U)(p=>convertToParamMap(p)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function inheritedParamsDataResolve(route,paramsInheritanceStrategy="emptyOnly"){const pathFromRoot=route.pathFromRoot;let inheritingStartingFrom=0;if("always"!==paramsInheritanceStrategy)for(inheritingStartingFrom=pathFromRoot.length-1;inheritingStartingFrom>=1;){const current=pathFromRoot[inheritingStartingFrom],parent=pathFromRoot[inheritingStartingFrom-1];if(current.routeConfig&&""===current.routeConfig.path)inheritingStartingFrom--;else{if(parent.component)break;inheritingStartingFrom--}}return flattenInherited(pathFromRoot.slice(inheritingStartingFrom))}function flattenInherited(pathFromRoot){return pathFromRoot.reduce((res,curr)=>({params:{...res.params,...curr.params},data:{...res.data,...curr.data},resolve:{...curr.data,...res.resolve,...curr.routeConfig?.data,...curr._resolvedData}}),{params:{},data:{},resolve:{}})}__name(ActivatedRoute,"ActivatedRoute"),__name(inheritedParamsDataResolve,"inheritedParamsDataResolve"),__name(flattenInherited,"flattenInherited");class ActivatedRouteSnapshot{get title(){return this.data?.[RouteTitleKey]}constructor(url,params,queryParams,fragment,data,outlet,component,routeConfig,resolve){this.url=url,this.params=params,this.queryParams=queryParams,this.fragment=fragment,this.data=data,this.outlet=outlet,this.component=component,this.routeConfig=routeConfig,this._resolve=resolve}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=convertToParamMap(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=convertToParamMap(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(segment=>segment.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}__name(ActivatedRouteSnapshot,"ActivatedRouteSnapshot");class RouterStateSnapshot extends Tree{constructor(url,root){super(root),this.url=url,setRouterState(this,root)}toString(){return serializeNode(this._root)}}function setRouterState(state,node){node.value._routerState=state,node.children.forEach(c=>setRouterState(state,c))}function serializeNode(node){const c=node.children.length>0?` { ${node.children.map(serializeNode).join(", ")} } `:"";return`${node.value}${c}`}function advanceActivatedRoute(route){if(route.snapshot){const currentSnapshot=route.snapshot,nextSnapshot=route._futureSnapshot;route.snapshot=nextSnapshot,shallowEqual(currentSnapshot.queryParams,nextSnapshot.queryParams)||route.queryParamsSubject.next(nextSnapshot.queryParams),currentSnapshot.fragment!==nextSnapshot.fragment&&route.fragmentSubject.next(nextSnapshot.fragment),shallowEqual(currentSnapshot.params,nextSnapshot.params)||route.paramsSubject.next(nextSnapshot.params),shallowEqualArrays(currentSnapshot.url,nextSnapshot.url)||route.urlSubject.next(nextSnapshot.url),shallowEqual(currentSnapshot.data,nextSnapshot.data)||route.dataSubject.next(nextSnapshot.data)}else route.snapshot=route._futureSnapshot,route.dataSubject.next(route._futureSnapshot.data)}function equalParamsAndUrlSegments(a,b){return shallowEqual(a.params,b.params)&&equalSegments(a.url,b.url)&&!(!a.parent!=!b.parent)&&(!a.parent||equalParamsAndUrlSegments(a.parent,b.parent))}__name(RouterStateSnapshot,"RouterStateSnapshot"),__name(setRouterState,"setRouterState"),__name(serializeNode,"serializeNode"),__name(advanceActivatedRoute,"advanceActivatedRoute"),__name(equalParamsAndUrlSegments,"equalParamsAndUrlSegments");let RouterOutlet=(()=>{class RouterOutlet2{constructor(){this.activated=null,this._activatedRoute=null,this.name=PRIMARY_OUTLET,this.activateEvents=new core.vpe,this.deactivateEvents=new core.vpe,this.attachEvents=new core.vpe,this.detachEvents=new core.vpe,this.parentContexts=(0,core.f3M)(ChildrenOutletContexts),this.location=(0,core.f3M)(core.s_b),this.changeDetector=(0,core.f3M)(core.sBO),this.environmentInjector=(0,core.f3M)(core.lqb),this.inputBinder=(0,core.f3M)(INPUT_BINDER,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(changes){if(changes.name){const{firstChange,previousValue}=changes.name;if(firstChange)return;this.isTrackedInParentContexts(previousValue)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(previousValue)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(outletName){return this.parentContexts.getContext(outletName)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const context=this.parentContexts.getContext(this.name);context?.route&&(context.attachRef?this.attach(context.attachRef,context.route):this.activateWith(context.route,context.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new core.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new core.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new core.vHH(4012,!1);this.location.detach();const cmp=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(cmp.instance),cmp}attach(ref,activatedRoute){this.activated=ref,this._activatedRoute=activatedRoute,this.location.insert(ref.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(ref.instance)}deactivate(){if(this.activated){const c=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(c)}}activateWith(activatedRoute,environmentInjector){if(this.isActivated)throw new core.vHH(4013,!1);this._activatedRoute=activatedRoute;const location2=this.location,component=activatedRoute.snapshot.component,childContexts=this.parentContexts.getOrCreateContext(this.name).children,injector=new OutletInjector(activatedRoute,childContexts,location2.injector);this.activated=location2.createComponent(component,{index:location2.length,injector,environmentInjector:environmentInjector??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return __name(RouterOutlet2,"RouterOutlet"),RouterOutlet2.\u0275fac=__name(function(t){return new(t||RouterOutlet2)},"RouterOutlet_Factory"),RouterOutlet2.\u0275dir=core.lG2({type:RouterOutlet2,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[core.TTD]}),RouterOutlet2})();class OutletInjector{constructor(route,childContexts,parent){this.route=route,this.childContexts=childContexts,this.parent=parent}get(token,notFoundValue){return token===ActivatedRoute?this.route:token===ChildrenOutletContexts?this.childContexts:this.parent.get(token,notFoundValue)}}__name(OutletInjector,"OutletInjector");const INPUT_BINDER=new core.OlP("");let RoutedComponentInputBinder=(()=>{class RoutedComponentInputBinder2{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(outlet){this.unsubscribeFromRouteData(outlet),this.subscribeToRouteData(outlet)}unsubscribeFromRouteData(outlet){this.outletDataSubscriptions.get(outlet)?.unsubscribe(),this.outletDataSubscriptions.delete(outlet)}subscribeToRouteData(outlet){const{activatedRoute}=outlet,dataSubscription=combineLatest([activatedRoute.queryParams,activatedRoute.params,activatedRoute.data]).pipe((0,switchMap.w)(([queryParams,params,data],index)=>(data={...queryParams,...params,...data},0===index?(0,observable_of.of)(data):Promise.resolve(data)))).subscribe(data=>{if(!outlet.isActivated||!outlet.activatedComponentRef||outlet.activatedRoute!==activatedRoute||null===activatedRoute.component)return void this.unsubscribeFromRouteData(outlet);const mirror=(0,core.qFp)(activatedRoute.component);if(mirror)for(const{templateName}of mirror.inputs)outlet.activatedComponentRef.setInput(templateName,data[templateName]);else this.unsubscribeFromRouteData(outlet)});this.outletDataSubscriptions.set(outlet,dataSubscription)}}return __name(RoutedComponentInputBinder2,"RoutedComponentInputBinder"),RoutedComponentInputBinder2.\u0275fac=__name(function(t){return new(t||RoutedComponentInputBinder2)},"RoutedComponentInputBinder_Factory"),RoutedComponentInputBinder2.\u0275prov=core.Yz7({token:RoutedComponentInputBinder2,factory:RoutedComponentInputBinder2.\u0275fac}),RoutedComponentInputBinder2})();function createRouterState(routeReuseStrategy,curr,prevState){const root=createNode(routeReuseStrategy,curr._root,prevState?prevState._root:void 0);return new RouterState(root,curr)}function createNode(routeReuseStrategy,curr,prevState){if(prevState&&routeReuseStrategy.shouldReuseRoute(curr.value,prevState.value.snapshot)){const value=prevState.value;value._futureSnapshot=curr.value;const children=createOrReuseChildren(routeReuseStrategy,curr,prevState);return new TreeNode(value,children)}{if(routeReuseStrategy.shouldAttach(curr.value)){const detachedRouteHandle=routeReuseStrategy.retrieve(curr.value);if(null!==detachedRouteHandle){const tree2=detachedRouteHandle.route;return tree2.value._futureSnapshot=curr.value,tree2.children=curr.children.map(c=>createNode(routeReuseStrategy,c)),tree2}}const value=createActivatedRoute(curr.value),children=curr.children.map(c=>createNode(routeReuseStrategy,c));return new TreeNode(value,children)}}function createOrReuseChildren(routeReuseStrategy,curr,prevState){return curr.children.map(child=>{for(const p of prevState.children)if(routeReuseStrategy.shouldReuseRoute(child.value,p.value.snapshot))return createNode(routeReuseStrategy,child,p);return createNode(routeReuseStrategy,child)})}function createActivatedRoute(c){return new ActivatedRoute(new BehaviorSubject.X(c.url),new BehaviorSubject.X(c.params),new BehaviorSubject.X(c.queryParams),new BehaviorSubject.X(c.fragment),new BehaviorSubject.X(c.data),c.outlet,c.component,c)}__name(createRouterState,"createRouterState"),__name(createNode,"createNode"),__name(createOrReuseChildren,"createOrReuseChildren"),__name(createActivatedRoute,"createActivatedRoute");const NAVIGATION_CANCELING_ERROR="ngNavigationCancelingError";function redirectingNavigationError(urlSerializer,redirect){const{redirectTo,navigationBehaviorOptions}=isUrlTree(redirect)?{redirectTo:redirect,navigationBehaviorOptions:void 0}:redirect,error=navigationCancelingError(!1,0,redirect);return error.url=redirectTo,error.navigationBehaviorOptions=navigationBehaviorOptions,error}function navigationCancelingError(message,code,redirectUrl){const error=new Error("NavigationCancelingError: "+(message||""));return error[NAVIGATION_CANCELING_ERROR]=!0,error.cancellationCode=code,redirectUrl&&(error.url=redirectUrl),error}function isRedirectingNavigationCancelingError$1(error){return isNavigationCancelingError$1(error)&&isUrlTree(error.url)}function isNavigationCancelingError$1(error){return error&&error[NAVIGATION_CANCELING_ERROR]}__name(redirectingNavigationError,"redirectingNavigationError"),__name(navigationCancelingError,"navigationCancelingError"),__name(isRedirectingNavigationCancelingError$1,"isRedirectingNavigationCancelingError$1"),__name(isNavigationCancelingError$1,"isNavigationCancelingError$1");let \u0275EmptyOutletComponent=(()=>{class \u0275EmptyOutletComponent2{}return __name(\u0275EmptyOutletComponent2,"\u0275EmptyOutletComponent"),\u0275EmptyOutletComponent2.\u0275fac=__name(function(t){return new(t||\u0275EmptyOutletComponent2)},"\u0275EmptyOutletComponent_Factory"),\u0275EmptyOutletComponent2.\u0275cmp=core.Xpm({type:\u0275EmptyOutletComponent2,selectors:[["ng-component"]],standalone:!0,features:[core.jDz],decls:1,vars:0,template:__name(function(rf,ctx){1&rf&&core._UZ(0,"router-outlet")},"\u0275EmptyOutletComponent_Template"),dependencies:[RouterOutlet],encapsulation:2}),\u0275EmptyOutletComponent2})();function getOrCreateRouteInjectorIfNeeded(route,currentInjector){return route.providers&&!route._injector&&(route._injector=(0,core.MMx)(route.providers,currentInjector,`Route: ${route.path}`)),route._injector??currentInjector}function validateConfig(config,parentPath="",requireStandaloneComponents=!1){for(let i=0;i<config.length;i++){const route=config[i];validateNode(route,getFullPath(parentPath,route),requireStandaloneComponents)}}function validateNode(route,fullPath,requireStandaloneComponents){route.children&&validateConfig(route.children,fullPath,requireStandaloneComponents)}function getFullPath(parentPath,currentRoute){return currentRoute?parentPath||currentRoute.path?parentPath&&!currentRoute.path?`${parentPath}/`:!parentPath&&currentRoute.path?currentRoute.path:`${parentPath}/${currentRoute.path}`:"":parentPath}function standardizeConfig(r){const children=r.children&&r.children.map(standardizeConfig),c=children?{...r,children}:{...r};return!c.component&&!c.loadComponent&&(children||c.loadChildren)&&c.outlet&&c.outlet!==PRIMARY_OUTLET&&(c.component=\u0275EmptyOutletComponent),c}function getOutlet(route){return route.outlet||PRIMARY_OUTLET}function sortByMatchingOutlets(routes,outletName){const sortedConfig=routes.filter(r=>getOutlet(r)===outletName);return sortedConfig.push(...routes.filter(r=>getOutlet(r)!==outletName)),sortedConfig}function getClosestRouteInjector(snapshot){if(!snapshot)return null;if(snapshot.routeConfig?._injector)return snapshot.routeConfig._injector;for(let s=snapshot.parent;s;s=s.parent){const route=s.routeConfig;if(route?._loadedInjector)return route._loadedInjector;if(route?._injector)return route._injector}return null}__name(getOrCreateRouteInjectorIfNeeded,"getOrCreateRouteInjectorIfNeeded"),__name(function getLoadedRoutes(route){return route._loadedRoutes},"getLoadedRoutes"),__name(function getLoadedInjector(route){return route._loadedInjector},"getLoadedInjector"),__name(function getLoadedComponent(route){return route._loadedComponent},"getLoadedComponent"),__name(function getProvidersInjector(route){return route._injector},"getProvidersInjector"),__name(validateConfig,"validateConfig"),__name(function assertStandalone(fullPath,component){if(component&&(0,core.eJc)(component))throw new core.vHH(4014,`Invalid configuration of route '${fullPath}'. You are using 'loadComponent' with a module, but it must be used with standalone components. Use 'loadChildren' instead.`);if(component&&!(0,core.$WT)(component))throw new core.vHH(4014,`Invalid configuration of route '${fullPath}'. The component must be standalone.`)},"assertStandalone"),__name(validateNode,"validateNode"),__name(getFullPath,"getFullPath"),__name(standardizeConfig,"standardizeConfig"),__name(getOutlet,"getOutlet"),__name(sortByMatchingOutlets,"sortByMatchingOutlets"),__name(getClosestRouteInjector,"getClosestRouteInjector");const activateRoutes=__name((rootContexts,routeReuseStrategy,forwardEvent,inputBindingEnabled)=>(0,map.U)(t=>(new ActivateRoutes(routeReuseStrategy,t.targetRouterState,t.currentRouterState,forwardEvent,inputBindingEnabled).activate(rootContexts),t)),"activateRoutes");class ActivateRoutes{constructor(routeReuseStrategy,futureState,currState,forwardEvent,inputBindingEnabled){this.routeReuseStrategy=routeReuseStrategy,this.futureState=futureState,this.currState=currState,this.forwardEvent=forwardEvent,this.inputBindingEnabled=inputBindingEnabled}activate(parentContexts){const futureRoot=this.futureState._root,currRoot=this.currState?this.currState._root:null;this.deactivateChildRoutes(futureRoot,currRoot,parentContexts),advanceActivatedRoute(this.futureState.root),this.activateChildRoutes(futureRoot,currRoot,parentContexts)}deactivateChildRoutes(futureNode,currNode,contexts){const children=nodeChildrenAsMap(currNode);futureNode.children.forEach(futureChild=>{const childOutletName=futureChild.value.outlet;this.deactivateRoutes(futureChild,children[childOutletName],contexts),delete children[childOutletName]}),Object.values(children).forEach(v=>{this.deactivateRouteAndItsChildren(v,contexts)})}deactivateRoutes(futureNode,currNode,parentContext){const future=futureNode.value,curr=currNode?currNode.value:null;if(future===curr)if(future.component){const context=parentContext.getContext(future.outlet);context&&this.deactivateChildRoutes(futureNode,currNode,context.children)}else this.deactivateChildRoutes(futureNode,currNode,parentContext);else curr&&this.deactivateRouteAndItsChildren(currNode,parentContext)}deactivateRouteAndItsChildren(route,parentContexts){route.value.component&&this.routeReuseStrategy.shouldDetach(route.value.snapshot)?this.detachAndStoreRouteSubtree(route,parentContexts):this.deactivateRouteAndOutlet(route,parentContexts)}detachAndStoreRouteSubtree(route,parentContexts){const context=parentContexts.getContext(route.value.outlet),contexts=context&&route.value.component?context.children:parentContexts,children=nodeChildrenAsMap(route);for(const childOutlet of Object.keys(children))this.deactivateRouteAndItsChildren(children[childOutlet],contexts);if(context&&context.outlet){const componentRef=context.outlet.detach(),contexts2=context.children.onOutletDeactivated();this.routeReuseStrategy.store(route.value.snapshot,{componentRef,route,contexts:contexts2})}}deactivateRouteAndOutlet(route,parentContexts){const context=parentContexts.getContext(route.value.outlet),contexts=context&&route.value.component?context.children:parentContexts,children=nodeChildrenAsMap(route);for(const childOutlet of Object.keys(children))this.deactivateRouteAndItsChildren(children[childOutlet],contexts);context&&(context.outlet&&(context.outlet.deactivate(),context.children.onOutletDeactivated()),context.attachRef=null,context.route=null)}activateChildRoutes(futureNode,currNode,contexts){const children=nodeChildrenAsMap(currNode);futureNode.children.forEach(c=>{this.activateRoutes(c,children[c.value.outlet],contexts),this.forwardEvent(new ActivationEnd(c.value.snapshot))}),futureNode.children.length&&this.forwardEvent(new ChildActivationEnd(futureNode.value.snapshot))}activateRoutes(futureNode,currNode,parentContexts){const future=futureNode.value,curr=currNode?currNode.value:null;if(advanceActivatedRoute(future),future===curr)if(future.component){const context=parentContexts.getOrCreateContext(future.outlet);this.activateChildRoutes(futureNode,currNode,context.children)}else this.activateChildRoutes(futureNode,currNode,parentContexts);else if(future.component){const context=parentContexts.getOrCreateContext(future.outlet);if(this.routeReuseStrategy.shouldAttach(future.snapshot)){const stored=this.routeReuseStrategy.retrieve(future.snapshot);this.routeReuseStrategy.store(future.snapshot,null),context.children.onOutletReAttached(stored.contexts),context.attachRef=stored.componentRef,context.route=stored.route.value,context.outlet&&context.outlet.attach(stored.componentRef,stored.route.value),advanceActivatedRoute(stored.route.value),this.activateChildRoutes(futureNode,null,context.children)}else{const injector=getClosestRouteInjector(future.snapshot);context.attachRef=null,context.route=future,context.injector=injector,context.outlet&&context.outlet.activateWith(future,context.injector),this.activateChildRoutes(futureNode,null,context.children)}}else this.activateChildRoutes(futureNode,null,parentContexts)}}__name(ActivateRoutes,"ActivateRoutes");class CanActivate{constructor(path){this.path=path,this.route=this.path[this.path.length-1]}}__name(CanActivate,"CanActivate");class CanDeactivate{constructor(component,route){this.component=component,this.route=route}}function getAllRouteGuards(future,curr,parentContexts){const futureRoot=future._root;return getChildRouteGuards(futureRoot,curr?curr._root:null,parentContexts,[futureRoot.value])}function getCanActivateChild(p){const canActivateChild=p.routeConfig?p.routeConfig.canActivateChild:null;return canActivateChild&&0!==canActivateChild.length?{node:p,guards:canActivateChild}:null}function getTokenOrFunctionIdentity(tokenOrFunction,injector){const NOT_FOUND=Symbol(),result=injector.get(tokenOrFunction,NOT_FOUND);return result===NOT_FOUND?"function"!=typeof tokenOrFunction||(0,core.Z0I)(tokenOrFunction)?injector.get(tokenOrFunction):tokenOrFunction:result}function getChildRouteGuards(futureNode,currNode,contexts,futurePath,checks={canDeactivateChecks:[],canActivateChecks:[]}){const prevChildren=nodeChildrenAsMap(currNode);return futureNode.children.forEach(c=>{getRouteGuards(c,prevChildren[c.value.outlet],contexts,futurePath.concat([c.value]),checks),delete prevChildren[c.value.outlet]}),Object.entries(prevChildren).forEach(([k,v])=>deactivateRouteAndItsChildren(v,contexts.getContext(k),checks)),checks}function getRouteGuards(futureNode,currNode,parentContexts,futurePath,checks={canDeactivateChecks:[],canActivateChecks:[]}){const future=futureNode.value,curr=currNode?currNode.value:null,context=parentContexts?parentContexts.getContext(futureNode.value.outlet):null;if(curr&&future.routeConfig===curr.routeConfig){const shouldRun=shouldRunGuardsAndResolvers(curr,future,future.routeConfig.runGuardsAndResolvers);shouldRun?checks.canActivateChecks.push(new CanActivate(futurePath)):(future.data=curr.data,future._resolvedData=curr._resolvedData),getChildRouteGuards(futureNode,currNode,future.component?context?context.children:null:parentContexts,futurePath,checks),shouldRun&&context&&context.outlet&&context.outlet.isActivated&&checks.canDeactivateChecks.push(new CanDeactivate(context.outlet.component,curr))}else curr&&deactivateRouteAndItsChildren(currNode,context,checks),checks.canActivateChecks.push(new CanActivate(futurePath)),getChildRouteGuards(futureNode,null,future.component?context?context.children:null:parentContexts,futurePath,checks);return checks}function shouldRunGuardsAndResolvers(curr,future,mode){if("function"==typeof mode)return mode(curr,future);switch(mode){case"pathParamsChange":return!equalPath(curr.url,future.url);case"pathParamsOrQueryParamsChange":return!equalPath(curr.url,future.url)||!shallowEqual(curr.queryParams,future.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!equalParamsAndUrlSegments(curr,future)||!shallowEqual(curr.queryParams,future.queryParams);default:return!equalParamsAndUrlSegments(curr,future)}}function deactivateRouteAndItsChildren(route,context,checks){const children=nodeChildrenAsMap(route),r=route.value;Object.entries(children).forEach(([childName,node])=>{deactivateRouteAndItsChildren(node,r.component?context?context.children.getContext(childName):null:context,checks)}),checks.canDeactivateChecks.push(new CanDeactivate(r.component&&context&&context.outlet&&context.outlet.isActivated?context.outlet.component:null,r))}function router_isFunction(v){return"function"==typeof v}function isBoolean(v){return"boolean"==typeof v}function isCanLoad(guard){return guard&&router_isFunction(guard.canLoad)}function isCanActivate(guard){return guard&&router_isFunction(guard.canActivate)}function isCanActivateChild(guard){return guard&&router_isFunction(guard.canActivateChild)}function isCanDeactivate(guard){return guard&&router_isFunction(guard.canDeactivate)}function isCanMatch(guard){return guard&&router_isFunction(guard.canMatch)}function isNavigationCancelingError(error){return error&&error[NAVIGATION_CANCELING_ERROR]}function isEmptyError(e){return e instanceof EmptyError.K||"EmptyError"===e?.name}__name(CanDeactivate,"CanDeactivate"),__name(getAllRouteGuards,"getAllRouteGuards"),__name(getCanActivateChild,"getCanActivateChild"),__name(getTokenOrFunctionIdentity,"getTokenOrFunctionIdentity"),__name(getChildRouteGuards,"getChildRouteGuards"),__name(getRouteGuards,"getRouteGuards"),__name(shouldRunGuardsAndResolvers,"shouldRunGuardsAndResolvers"),__name(deactivateRouteAndItsChildren,"deactivateRouteAndItsChildren"),__name(router_isFunction,"router_isFunction"),__name(isBoolean,"isBoolean"),__name(isCanLoad,"isCanLoad"),__name(isCanActivate,"isCanActivate"),__name(isCanActivateChild,"isCanActivateChild"),__name(isCanDeactivate,"isCanDeactivate"),__name(isCanMatch,"isCanMatch"),__name(function isRedirectingNavigationCancelingError(error){return isNavigationCancelingError(error)&&isUrlTree(error.url)},"isRedirectingNavigationCancelingError"),__name(isNavigationCancelingError,"isNavigationCancelingError"),__name(isEmptyError,"isEmptyError");const INITIAL_VALUE=Symbol("INITIAL_VALUE");function prioritizedGuardValue(){return(0,switchMap.w)(obs=>combineLatest(obs.map(o=>o.pipe((0,take.q)(1),(0,startWith.O)(INITIAL_VALUE)))).pipe((0,map.U)(results=>{for(const result of results)if(!0!==result){if(result===INITIAL_VALUE)return INITIAL_VALUE;if(!1===result||result instanceof UrlTree)return result}return!0}),(0,filter.h)(item=>item!==INITIAL_VALUE),(0,take.q)(1)))}function checkGuards(injector,forwardEvent){return(0,mergeMap.z)(t=>{const{targetSnapshot,currentSnapshot,guards:{canActivateChecks,canDeactivateChecks}}=t;return 0===canDeactivateChecks.length&&0===canActivateChecks.length?(0,observable_of.of)({...t,guardsResult:!0}):runCanDeactivateChecks(canDeactivateChecks,targetSnapshot,currentSnapshot,injector).pipe((0,mergeMap.z)(canDeactivate=>canDeactivate&&isBoolean(canDeactivate)?runCanActivateChecks(targetSnapshot,canActivateChecks,injector,forwardEvent):(0,observable_of.of)(canDeactivate)),(0,map.U)(guardsResult=>({...t,guardsResult})))})}function runCanDeactivateChecks(checks,futureRSS,currRSS,injector){return(0,from.D)(checks).pipe((0,mergeMap.z)(check=>runCanDeactivate(check.component,check.route,currRSS,futureRSS,injector)),(0,first2.P)(result=>!0!==result,!0))}function runCanActivateChecks(futureSnapshot,checks,injector,forwardEvent){return(0,from.D)(checks).pipe((0,concatMap.b)(check=>(0,concat.z)(fireChildActivationStart(check.route.parent,forwardEvent),fireActivationStart(check.route,forwardEvent),runCanActivateChild(futureSnapshot,check.path,injector),runCanActivate(futureSnapshot,check.route,injector))),(0,first2.P)(result=>!0!==result,!0))}function fireActivationStart(snapshot,forwardEvent){return null!==snapshot&&forwardEvent&&forwardEvent(new ActivationStart(snapshot)),(0,observable_of.of)(!0)}function fireChildActivationStart(snapshot,forwardEvent){return null!==snapshot&&forwardEvent&&forwardEvent(new ChildActivationStart(snapshot)),(0,observable_of.of)(!0)}function runCanActivate(futureRSS,futureARS,injector){const canActivate=futureARS.routeConfig?futureARS.routeConfig.canActivate:null;if(!canActivate||0===canActivate.length)return(0,observable_of.of)(!0);const canActivateObservables=canActivate.map(canActivate2=>defer(()=>{const closestInjector=getClosestRouteInjector(futureARS)??injector,guard=getTokenOrFunctionIdentity(canActivate2,closestInjector);return wrapIntoObservable(isCanActivate(guard)?guard.canActivate(futureARS,futureRSS):closestInjector.runInContext(()=>guard(futureARS,futureRSS))).pipe((0,first2.P)())}));return(0,observable_of.of)(canActivateObservables).pipe(prioritizedGuardValue())}function runCanActivateChild(futureRSS,path,injector){const futureARS=path[path.length-1],canActivateChildGuardsMapped=path.slice(0,path.length-1).reverse().map(p=>getCanActivateChild(p)).filter(_=>null!==_).map(d=>defer(()=>{const guardsMapped=d.guards.map(canActivateChild=>{const closestInjector=getClosestRouteInjector(d.node)??injector,guard=getTokenOrFunctionIdentity(canActivateChild,closestInjector);return wrapIntoObservable(isCanActivateChild(guard)?guard.canActivateChild(futureARS,futureRSS):closestInjector.runInContext(()=>guard(futureARS,futureRSS))).pipe((0,first2.P)())});return(0,observable_of.of)(guardsMapped).pipe(prioritizedGuardValue())}));return(0,observable_of.of)(canActivateChildGuardsMapped).pipe(prioritizedGuardValue())}function runCanDeactivate(component,currARS,currRSS,futureRSS,injector){const canDeactivate=currARS&&currARS.routeConfig?currARS.routeConfig.canDeactivate:null;if(!canDeactivate||0===canDeactivate.length)return(0,observable_of.of)(!0);const canDeactivateObservables=canDeactivate.map(c=>{const closestInjector=getClosestRouteInjector(currARS)??injector,guard=getTokenOrFunctionIdentity(c,closestInjector);return wrapIntoObservable(isCanDeactivate(guard)?guard.canDeactivate(component,currARS,currRSS,futureRSS):closestInjector.runInContext(()=>guard(component,currARS,currRSS,futureRSS))).pipe((0,first2.P)())});return(0,observable_of.of)(canDeactivateObservables).pipe(prioritizedGuardValue())}function runCanLoadGuards(injector,route,segments,urlSerializer){const canLoad=route.canLoad;if(void 0===canLoad||0===canLoad.length)return(0,observable_of.of)(!0);const canLoadObservables=canLoad.map(injectionToken=>{const guard=getTokenOrFunctionIdentity(injectionToken,injector);return wrapIntoObservable(isCanLoad(guard)?guard.canLoad(route,segments):injector.runInContext(()=>guard(route,segments)))});return(0,observable_of.of)(canLoadObservables).pipe(prioritizedGuardValue(),redirectIfUrlTree())}function redirectIfUrlTree(urlSerializer){return(0,pipe.z)(tap2(result=>{if(isUrlTree(result))throw redirectingNavigationError(0,result)}),(0,map.U)(result=>!0===result))}function runCanMatchGuards(injector,route,segments,urlSerializer){const canMatch=route.canMatch;if(!canMatch||0===canMatch.length)return(0,observable_of.of)(!0);const canMatchObservables=canMatch.map(injectionToken=>{const guard=getTokenOrFunctionIdentity(injectionToken,injector);return wrapIntoObservable(isCanMatch(guard)?guard.canMatch(route,segments):injector.runInContext(()=>guard(route,segments)))});return(0,observable_of.of)(canMatchObservables).pipe(prioritizedGuardValue(),redirectIfUrlTree())}__name(prioritizedGuardValue,"prioritizedGuardValue"),__name(checkGuards,"checkGuards"),__name(runCanDeactivateChecks,"runCanDeactivateChecks"),__name(runCanActivateChecks,"runCanActivateChecks"),__name(fireActivationStart,"fireActivationStart"),__name(fireChildActivationStart,"fireChildActivationStart"),__name(runCanActivate,"runCanActivate"),__name(runCanActivateChild,"runCanActivateChild"),__name(runCanDeactivate,"runCanDeactivate"),__name(runCanLoadGuards,"runCanLoadGuards"),__name(redirectIfUrlTree,"redirectIfUrlTree"),__name(runCanMatchGuards,"runCanMatchGuards");class NoMatch{constructor(segmentGroup){this.segmentGroup=segmentGroup||null}}__name(NoMatch,"NoMatch");class AbsoluteRedirect{constructor(urlTree){this.urlTree=urlTree}}function noMatch$1(segmentGroup){return throwError(new NoMatch(segmentGroup))}function absoluteRedirect(newTree){return throwError(new AbsoluteRedirect(newTree))}function namedOutletsRedirect(redirectTo){return throwError(new core.vHH(4e3,!1))}function canLoadFails(route){return throwError(navigationCancelingError(!1,3))}__name(AbsoluteRedirect,"AbsoluteRedirect"),__name(noMatch$1,"noMatch$1"),__name(absoluteRedirect,"absoluteRedirect"),__name(namedOutletsRedirect,"namedOutletsRedirect"),__name(canLoadFails,"canLoadFails");class ApplyRedirects{constructor(urlSerializer,urlTree){this.urlSerializer=urlSerializer,this.urlTree=urlTree}noMatchError(e){return new core.vHH(4002,!1)}lineralizeSegments(route,urlTree){let res=[],c=urlTree.root;for(;;){if(res=res.concat(c.segments),0===c.numberOfChildren)return(0,observable_of.of)(res);if(c.numberOfChildren>1||!c.children[PRIMARY_OUTLET])return namedOutletsRedirect();c=c.children[PRIMARY_OUTLET]}}applyRedirectCommands(segments,redirectTo,posParams){return this.applyRedirectCreateUrlTree(redirectTo,this.urlSerializer.parse(redirectTo),segments,posParams)}applyRedirectCreateUrlTree(redirectTo,urlTree,segments,posParams){const newRoot=this.createSegmentGroup(redirectTo,urlTree.root,segments,posParams);return new UrlTree(newRoot,this.createQueryParams(urlTree.queryParams,this.urlTree.queryParams),urlTree.fragment)}createQueryParams(redirectToParams,actualParams){const res={};return Object.entries(redirectToParams).forEach(([k,v])=>{if("string"==typeof v&&v.startsWith(":")){const sourceName=v.substring(1);res[k]=actualParams[sourceName]}else res[k]=v}),res}createSegmentGroup(redirectTo,group,segments,posParams){const updatedSegments=this.createSegments(redirectTo,group.segments,segments,posParams);let children={};return Object.entries(group.children).forEach(([name,child])=>{children[name]=this.createSegmentGroup(redirectTo,child,segments,posParams)}),new UrlSegmentGroup(updatedSegments,children)}createSegments(redirectTo,redirectToSegments,actualSegments,posParams){return redirectToSegments.map(s=>s.path.startsWith(":")?this.findPosParam(redirectTo,s,posParams):this.findOrReturn(s,actualSegments))}findPosParam(redirectTo,redirectToUrlSegment,posParams){const pos=posParams[redirectToUrlSegment.path.substring(1)];if(!pos)throw new core.vHH(4001,!1);return pos}findOrReturn(redirectToUrlSegment,actualSegments){let idx=0;for(const s of actualSegments){if(s.path===redirectToUrlSegment.path)return actualSegments.splice(idx),s;idx++}return redirectToUrlSegment}}__name(ApplyRedirects,"ApplyRedirects");const noMatch={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function matchWithChecks(segmentGroup,route,segments,injector,urlSerializer){const result=match(segmentGroup,route,segments);return result.matched?runCanMatchGuards(injector=getOrCreateRouteInjectorIfNeeded(route,injector),route,segments).pipe((0,map.U)(v=>!0===v?result:{...noMatch})):(0,observable_of.of)(result)}function match(segmentGroup,route,segments){if(""===route.path)return"full"===route.pathMatch&&(segmentGroup.hasChildren()||segments.length>0)?{...noMatch}:{matched:!0,consumedSegments:[],remainingSegments:segments,parameters:{},positionalParamSegments:{}};const res=(route.matcher||defaultUrlMatcher)(segments,segmentGroup,route);if(!res)return{...noMatch};const posParams={};Object.entries(res.posParams??{}).forEach(([k,v])=>{posParams[k]=v.path});const parameters=res.consumed.length>0?{...posParams,...res.consumed[res.consumed.length-1].parameters}:posParams;return{matched:!0,consumedSegments:res.consumed,remainingSegments:segments.slice(res.consumed.length),parameters,positionalParamSegments:res.posParams??{}}}function split(segmentGroup,consumedSegments,slicedSegments,config){return slicedSegments.length>0&&containsEmptyPathMatchesWithNamedOutlets(segmentGroup,slicedSegments,config)?{segmentGroup:new UrlSegmentGroup(consumedSegments,createChildrenForEmptyPaths(config,new UrlSegmentGroup(slicedSegments,segmentGroup.children))),slicedSegments:[]}:0===slicedSegments.length&&containsEmptyPathMatches(segmentGroup,slicedSegments,config)?{segmentGroup:new UrlSegmentGroup(segmentGroup.segments,addEmptyPathsToChildrenIfNeeded(segmentGroup,0,slicedSegments,config,segmentGroup.children)),slicedSegments}:{segmentGroup:new UrlSegmentGroup(segmentGroup.segments,segmentGroup.children),slicedSegments}}function addEmptyPathsToChildrenIfNeeded(segmentGroup,consumedSegments,slicedSegments,routes,children){const res={};for(const r of routes)if(emptyPathMatch(segmentGroup,slicedSegments,r)&&!children[getOutlet(r)]){const s=new UrlSegmentGroup([],{});res[getOutlet(r)]=s}return{...children,...res}}function createChildrenForEmptyPaths(routes,primarySegment){const res={};res[PRIMARY_OUTLET]=primarySegment;for(const r of routes)if(""===r.path&&getOutlet(r)!==PRIMARY_OUTLET){const s=new UrlSegmentGroup([],{});res[getOutlet(r)]=s}return res}function containsEmptyPathMatchesWithNamedOutlets(segmentGroup,slicedSegments,routes){return routes.some(r=>emptyPathMatch(segmentGroup,slicedSegments,r)&&getOutlet(r)!==PRIMARY_OUTLET)}function containsEmptyPathMatches(segmentGroup,slicedSegments,routes){return routes.some(r=>emptyPathMatch(segmentGroup,slicedSegments,r))}function emptyPathMatch(segmentGroup,slicedSegments,r){return(!(segmentGroup.hasChildren()||slicedSegments.length>0)||"full"!==r.pathMatch)&&""===r.path}function isImmediateMatch(route,rawSegment,segments,outlet){return!!(getOutlet(route)===outlet||outlet!==PRIMARY_OUTLET&&emptyPathMatch(rawSegment,segments,route))&&("**"===route.path||match(rawSegment,route,segments).matched)}function noLeftoversInUrl(segmentGroup,segments,outlet){return 0===segments.length&&!segmentGroup.children[outlet]}function recognize$1(injector,configLoader,rootComponentType,config,urlTree,urlSerializer,paramsInheritanceStrategy="emptyOnly"){return new Recognizer(injector,configLoader,rootComponentType,config,urlTree,paramsInheritanceStrategy,urlSerializer).recognize()}__name(matchWithChecks,"matchWithChecks"),__name(match,"match"),__name(split,"split"),__name(addEmptyPathsToChildrenIfNeeded,"addEmptyPathsToChildrenIfNeeded"),__name(createChildrenForEmptyPaths,"createChildrenForEmptyPaths"),__name(containsEmptyPathMatchesWithNamedOutlets,"containsEmptyPathMatchesWithNamedOutlets"),__name(containsEmptyPathMatches,"containsEmptyPathMatches"),__name(emptyPathMatch,"emptyPathMatch"),__name(isImmediateMatch,"isImmediateMatch"),__name(noLeftoversInUrl,"noLeftoversInUrl"),__name(recognize$1,"recognize$1");class Recognizer{constructor(injector,configLoader,rootComponentType,config,urlTree,paramsInheritanceStrategy,urlSerializer){this.injector=injector,this.configLoader=configLoader,this.rootComponentType=rootComponentType,this.config=config,this.urlTree=urlTree,this.paramsInheritanceStrategy=paramsInheritanceStrategy,this.urlSerializer=urlSerializer,this.allowRedirects=!0,this.applyRedirects=new ApplyRedirects(this.urlSerializer,this.urlTree)}noMatchError(e){return new core.vHH(4002,!1)}recognize(){const rootSegmentGroup=split(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,rootSegmentGroup,PRIMARY_OUTLET).pipe(catchError_catchError(e=>{if(e instanceof AbsoluteRedirect)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof NoMatch?this.noMatchError(e):e}),(0,map.U)(children=>{const root=new ActivatedRouteSnapshot([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},PRIMARY_OUTLET,this.rootComponentType,null,{}),rootNode=new TreeNode(root,children),routeState=new RouterStateSnapshot("",rootNode),tree2=createUrlTreeFromSnapshot(root,[],this.urlTree.queryParams,this.urlTree.fragment);return tree2.queryParams=this.urlTree.queryParams,routeState.url=this.urlSerializer.serialize(tree2),this.inheritParamsAndData(routeState._root),{state:routeState,tree:tree2}}))}match(tree2){return this.processSegmentGroup(this.injector,this.config,tree2.root,PRIMARY_OUTLET).pipe(catchError_catchError(e=>{throw e instanceof NoMatch?this.noMatchError(e):e}))}inheritParamsAndData(routeNode){const route=routeNode.value,i=inheritedParamsDataResolve(route,this.paramsInheritanceStrategy);route.params=Object.freeze(i.params),route.data=Object.freeze(i.data),routeNode.children.forEach(n=>this.inheritParamsAndData(n))}processSegmentGroup(injector,config,segmentGroup,outlet){return 0===segmentGroup.segments.length&&segmentGroup.hasChildren()?this.processChildren(injector,config,segmentGroup):this.processSegment(injector,config,segmentGroup,segmentGroup.segments,outlet,!0)}processChildren(injector,config,segmentGroup){const childOutlets=[];for(const child of Object.keys(segmentGroup.children))"primary"===child?childOutlets.unshift(child):childOutlets.push(child);return(0,from.D)(childOutlets).pipe((0,concatMap.b)(childOutlet=>{const child=segmentGroup.children[childOutlet],sortedConfig=sortByMatchingOutlets(config,childOutlet);return this.processSegmentGroup(injector,sortedConfig,child,childOutlet)}),scan((children,outletChildren)=>(children.push(...outletChildren),children)),(0,defaultIfEmpty.d)(null),last(),(0,mergeMap.z)(children=>{if(null===children)return noMatch$1(segmentGroup);const mergedChildren=mergeEmptyPathMatches(children);return sortActivatedRouteSnapshots(mergedChildren),(0,observable_of.of)(mergedChildren)}))}processSegment(injector,routes,segmentGroup,segments,outlet,allowRedirects){return(0,from.D)(routes).pipe((0,concatMap.b)(r=>this.processSegmentAgainstRoute(r._injector??injector,routes,r,segmentGroup,segments,outlet,allowRedirects).pipe(catchError_catchError(e=>{if(e instanceof NoMatch)return(0,observable_of.of)(null);throw e}))),(0,first2.P)(x=>!!x),catchError_catchError(e=>{if(isEmptyError(e))return noLeftoversInUrl(segmentGroup,segments,outlet)?(0,observable_of.of)([]):noMatch$1(segmentGroup);throw e}))}processSegmentAgainstRoute(injector,routes,route,rawSegment,segments,outlet,allowRedirects){return isImmediateMatch(route,rawSegment,segments,outlet)?void 0===route.redirectTo?this.matchSegmentAgainstRoute(injector,rawSegment,route,segments,outlet,allowRedirects):allowRedirects&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(injector,rawSegment,routes,route,segments,outlet):noMatch$1(rawSegment):noMatch$1(rawSegment)}expandSegmentAgainstRouteUsingRedirect(injector,segmentGroup,routes,route,segments,outlet){return"**"===route.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(injector,routes,route,outlet):this.expandRegularSegmentAgainstRouteUsingRedirect(injector,segmentGroup,routes,route,segments,outlet)}expandWildCardWithParamsAgainstRouteUsingRedirect(injector,routes,route,outlet){const newTree=this.applyRedirects.applyRedirectCommands([],route.redirectTo,{});return route.redirectTo.startsWith("/")?absoluteRedirect(newTree):this.applyRedirects.lineralizeSegments(route,newTree).pipe((0,mergeMap.z)(newSegments=>{const group=new UrlSegmentGroup(newSegments,{});return this.processSegment(injector,routes,group,newSegments,outlet,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(injector,segmentGroup,routes,route,segments,outlet){const{matched,consumedSegments,remainingSegments,positionalParamSegments}=match(segmentGroup,route,segments);if(!matched)return noMatch$1(segmentGroup);const newTree=this.applyRedirects.applyRedirectCommands(consumedSegments,route.redirectTo,positionalParamSegments);return route.redirectTo.startsWith("/")?absoluteRedirect(newTree):this.applyRedirects.lineralizeSegments(route,newTree).pipe((0,mergeMap.z)(newSegments=>this.processSegment(injector,routes,segmentGroup,newSegments.concat(remainingSegments),outlet,!1)))}matchSegmentAgainstRoute(injector,rawSegment,route,segments,outlet,allowRedirects){let matchResult;if("**"===route.path){const params=segments.length>0?router_last(segments).parameters:{},snapshot=new ActivatedRouteSnapshot(segments,params,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,getData(route),getOutlet(route),route.component??route._loadedComponent??null,route,getResolve(route));matchResult=(0,observable_of.of)({snapshot,consumedSegments:[],remainingSegments:[]}),rawSegment.children={}}else matchResult=matchWithChecks(rawSegment,route,segments,injector).pipe((0,map.U)(({matched,consumedSegments,remainingSegments,parameters})=>matched?{snapshot:new ActivatedRouteSnapshot(consumedSegments,parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,getData(route),getOutlet(route),route.component??route._loadedComponent??null,route,getResolve(route)),consumedSegments,remainingSegments}:null));return matchResult.pipe((0,switchMap.w)(result=>null===result?noMatch$1(rawSegment):this.getChildConfig(injector=route._injector??injector,route,segments).pipe((0,switchMap.w)(({routes:childConfig})=>{const childInjector=route._loadedInjector??injector,{snapshot,consumedSegments,remainingSegments}=result,{segmentGroup,slicedSegments}=split(rawSegment,consumedSegments,remainingSegments,childConfig);if(0===slicedSegments.length&&segmentGroup.hasChildren())return this.processChildren(childInjector,childConfig,segmentGroup).pipe((0,map.U)(children=>null===children?null:[new TreeNode(snapshot,children)]));if(0===childConfig.length&&0===slicedSegments.length)return(0,observable_of.of)([new TreeNode(snapshot,[])]);const matchedOnOutlet=getOutlet(route)===outlet;return this.processSegment(childInjector,childConfig,segmentGroup,slicedSegments,matchedOnOutlet?PRIMARY_OUTLET:outlet,!0).pipe((0,map.U)(children=>[new TreeNode(snapshot,children)]))}))))}getChildConfig(injector,route,segments){return route.children?(0,observable_of.of)({routes:route.children,injector}):route.loadChildren?void 0!==route._loadedRoutes?(0,observable_of.of)({routes:route._loadedRoutes,injector:route._loadedInjector}):runCanLoadGuards(injector,route,segments).pipe((0,mergeMap.z)(shouldLoadResult=>shouldLoadResult?this.configLoader.loadChildren(injector,route).pipe(tap2(cfg=>{route._loadedRoutes=cfg.routes,route._loadedInjector=cfg.injector})):canLoadFails())):(0,observable_of.of)({routes:[],injector})}}function sortActivatedRouteSnapshots(nodes){nodes.sort((a,b)=>a.value.outlet===PRIMARY_OUTLET?-1:b.value.outlet===PRIMARY_OUTLET?1:a.value.outlet.localeCompare(b.value.outlet))}function hasEmptyPathConfig(node){const config=node.value.routeConfig;return config&&""===config.path}function mergeEmptyPathMatches(nodes){const result=[],mergedNodes=new Set;for(const node of nodes){if(!hasEmptyPathConfig(node)){result.push(node);continue}const duplicateEmptyPathNode=result.find(resultNode=>node.value.routeConfig===resultNode.value.routeConfig);void 0!==duplicateEmptyPathNode?(duplicateEmptyPathNode.children.push(...node.children),mergedNodes.add(duplicateEmptyPathNode)):result.push(node)}for(const mergedNode of mergedNodes){const mergedChildren=mergeEmptyPathMatches(mergedNode.children);result.push(new TreeNode(mergedNode.value,mergedChildren))}return result.filter(n=>!mergedNodes.has(n))}function getData(route){return route.data||{}}function getResolve(route){return route.resolve||{}}function recognize(injector,configLoader,rootComponentType,config,serializer,paramsInheritanceStrategy){return(0,mergeMap.z)(t=>recognize$1(injector,configLoader,rootComponentType,config,t.extractedUrl,serializer,paramsInheritanceStrategy).pipe((0,map.U)(({state:targetSnapshot,tree:urlAfterRedirects})=>({...t,targetSnapshot,urlAfterRedirects}))))}function resolveData(paramsInheritanceStrategy,injector){return(0,mergeMap.z)(t=>{const{targetSnapshot,guards:{canActivateChecks}}=t;if(!canActivateChecks.length)return(0,observable_of.of)(t);let canActivateChecksResolved=0;return(0,from.D)(canActivateChecks).pipe((0,concatMap.b)(check=>runResolve(check.route,targetSnapshot,paramsInheritanceStrategy,injector)),tap2(()=>canActivateChecksResolved++),takeLast(1),(0,mergeMap.z)(_=>canActivateChecksResolved===canActivateChecks.length?(0,observable_of.of)(t):empty.E))})}function runResolve(futureARS,futureRSS,paramsInheritanceStrategy,injector){const config=futureARS.routeConfig,resolve=futureARS._resolve;return void 0!==config?.title&&!hasStaticTitle(config)&&(resolve[RouteTitleKey]=config.title),resolveNode(resolve,futureARS,futureRSS,injector).pipe((0,map.U)(resolvedData=>(futureARS._resolvedData=resolvedData,futureARS.data=inheritedParamsDataResolve(futureARS,paramsInheritanceStrategy).resolve,config&&hasStaticTitle(config)&&(futureARS.data[RouteTitleKey]=config.title),null)))}function resolveNode(resolve,futureARS,futureRSS,injector){const keys=getDataKeys(resolve);if(0===keys.length)return(0,observable_of.of)({});const data={};return(0,from.D)(keys).pipe((0,mergeMap.z)(key=>getResolver(resolve[key],futureARS,futureRSS,injector).pipe((0,first2.P)(),tap2(value=>{data[key]=value}))),takeLast(1),(0,mapTo.h)(data),catchError_catchError(e=>isEmptyError(e)?empty.E:throwError(e)))}function getDataKeys(obj){return[...Object.keys(obj),...Object.getOwnPropertySymbols(obj)]}function getResolver(injectionToken,futureARS,futureRSS,injector){const closestInjector=getClosestRouteInjector(futureARS)??injector,resolver=getTokenOrFunctionIdentity(injectionToken,closestInjector);return wrapIntoObservable(resolver.resolve?resolver.resolve(futureARS,futureRSS):closestInjector.runInContext(()=>resolver(futureARS,futureRSS)))}function hasStaticTitle(config){return"string"==typeof config.title||null===config.title}function switchTap(next){return(0,switchMap.w)(v=>{const nextResult=next(v);return nextResult?(0,from.D)(nextResult).pipe((0,map.U)(()=>v)):(0,observable_of.of)(v)})}__name(Recognizer,"Recognizer"),__name(sortActivatedRouteSnapshots,"sortActivatedRouteSnapshots"),__name(hasEmptyPathConfig,"hasEmptyPathConfig"),__name(mergeEmptyPathMatches,"mergeEmptyPathMatches"),__name(function checkOutletNameUniqueness(nodes){const names={};nodes.forEach(n=>{const routeWithSameOutletName=names[n.value.outlet];if(routeWithSameOutletName)throw routeWithSameOutletName.url.map(s=>s.toString()).join("/"),n.value.url.map(s=>s.toString()).join("/"),new core.vHH(4006,!1);names[n.value.outlet]=n.value})},"checkOutletNameUniqueness"),__name(getData,"getData"),__name(getResolve,"getResolve"),__name(recognize,"recognize"),__name(resolveData,"resolveData"),__name(runResolve,"runResolve"),__name(resolveNode,"resolveNode"),__name(getDataKeys,"getDataKeys"),__name(getResolver,"getResolver"),__name(hasStaticTitle,"hasStaticTitle"),__name(switchTap,"switchTap");const ROUTES=new core.OlP("ROUTES");let RouterConfigLoader=(()=>{class RouterConfigLoader2{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,core.f3M)(core.Sil)}loadComponent(route){if(this.componentLoaders.get(route))return this.componentLoaders.get(route);if(route._loadedComponent)return(0,observable_of.of)(route._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(route);const loadRunner=wrapIntoObservable(route.loadComponent()).pipe((0,map.U)(maybeUnwrapDefaultExport),tap2(component=>{this.onLoadEndListener&&this.onLoadEndListener(route),route._loadedComponent=component}),finalize(()=>{this.componentLoaders.delete(route)})),loader=new ConnectableObservable(loadRunner,()=>new Subject.x).pipe(refCount());return this.componentLoaders.set(route,loader),loader}loadChildren(parentInjector,route){if(this.childrenLoaders.get(route))return this.childrenLoaders.get(route);if(route._loadedRoutes)return(0,observable_of.of)({routes:route._loadedRoutes,injector:route._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(route);const loadRunner=this.loadModuleFactoryOrRoutes(route.loadChildren).pipe((0,map.U)(factoryOrRoutes=>{this.onLoadEndListener&&this.onLoadEndListener(route);let injector,rawRoutes;return Array.isArray(factoryOrRoutes)?rawRoutes=factoryOrRoutes:(injector=factoryOrRoutes.create(parentInjector).injector,rawRoutes=injector.get(ROUTES,[],core.XFs.Self|core.XFs.Optional).flat()),{routes:rawRoutes.map(standardizeConfig),injector}}),finalize(()=>{this.childrenLoaders.delete(route)})),loader=new ConnectableObservable(loadRunner,()=>new Subject.x).pipe(refCount());return this.childrenLoaders.set(route,loader),loader}loadModuleFactoryOrRoutes(loadChildren){return wrapIntoObservable(loadChildren()).pipe((0,map.U)(maybeUnwrapDefaultExport),(0,mergeMap.z)(t=>t instanceof core.YKP||Array.isArray(t)?(0,observable_of.of)(t):(0,from.D)(this.compiler.compileModuleAsync(t))))}}return __name(RouterConfigLoader2,"RouterConfigLoader"),RouterConfigLoader2.\u0275fac=__name(function(t){return new(t||RouterConfigLoader2)},"RouterConfigLoader_Factory"),RouterConfigLoader2.\u0275prov=core.Yz7({token:RouterConfigLoader2,factory:RouterConfigLoader2.\u0275fac,providedIn:"root"}),RouterConfigLoader2})();function isWrappedDefaultExport(value){return value&&"object"==typeof value&&"default"in value}function maybeUnwrapDefaultExport(input){return isWrappedDefaultExport(input)?input.default:input}__name(isWrappedDefaultExport,"isWrappedDefaultExport"),__name(maybeUnwrapDefaultExport,"maybeUnwrapDefaultExport");let NavigationTransitions=(()=>{class NavigationTransitions2{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Subject.x,this.configLoader=(0,core.f3M)(RouterConfigLoader),this.environmentInjector=(0,core.f3M)(core.lqb),this.urlSerializer=(0,core.f3M)(UrlSerializer),this.rootContexts=(0,core.f3M)(ChildrenOutletContexts),this.inputBindingEnabled=null!==(0,core.f3M)(INPUT_BINDER,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,observable_of.of)(void 0),this.rootComponentType=null;const onLoadStart=__name(r=>this.events.next(new RouteConfigLoadStart(r)),"onLoadStart");this.configLoader.onLoadEndListener=__name(r=>this.events.next(new RouteConfigLoadEnd(r)),"onLoadEnd"),this.configLoader.onLoadStartListener=onLoadStart}complete(){this.transitions?.complete()}handleNavigationRequest(request){const id=++this.navigationId;this.transitions?.next({...this.transitions.value,...request,id})}setupNavigations(router){return this.transitions=new BehaviorSubject.X({id:0,currentUrlTree:router.currentUrlTree,currentRawUrl:router.currentUrlTree,extractedUrl:router.urlHandlingStrategy.extract(router.currentUrlTree),urlAfterRedirects:router.urlHandlingStrategy.extract(router.currentUrlTree),rawUrl:router.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:IMPERATIVE_NAVIGATION,restoredState:null,currentSnapshot:router.routerState.snapshot,targetSnapshot:null,currentRouterState:router.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,filter.h)(t=>0!==t.id),(0,map.U)(t=>({...t,extractedUrl:router.urlHandlingStrategy.extract(t.rawUrl)})),(0,switchMap.w)(overallTransitionState=>{let completed=!1,errored=!1;return(0,observable_of.of)(overallTransitionState).pipe(tap2(t=>{this.currentNavigation={id:t.id,initialUrl:t.rawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,switchMap.w)(t=>{const browserUrlTree=router.browserUrlTree.toString(),urlTransition=!router.navigated||t.extractedUrl.toString()!==browserUrlTree||browserUrlTree!==router.currentUrlTree.toString();if(!urlTransition&&"reload"!==(t.extras.onSameUrlNavigation??router.onSameUrlNavigation)){const reason="";return this.events.next(new NavigationSkipped(t.id,router.serializeUrl(overallTransitionState.rawUrl),reason,0)),router.rawUrlTree=t.rawUrl,t.resolve(null),empty.E}if(router.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return isBrowserTriggeredNavigation(t.source)&&(router.browserUrlTree=t.extractedUrl),(0,observable_of.of)(t).pipe((0,switchMap.w)(t2=>{const transition=this.transitions?.getValue();return this.events.next(new NavigationStart(t2.id,this.urlSerializer.serialize(t2.extractedUrl),t2.source,t2.restoredState)),transition!==this.transitions?.getValue()?empty.E:Promise.resolve(t2)}),recognize(this.environmentInjector,this.configLoader,this.rootComponentType,router.config,this.urlSerializer,router.paramsInheritanceStrategy),tap2(t2=>{if(overallTransitionState.targetSnapshot=t2.targetSnapshot,overallTransitionState.urlAfterRedirects=t2.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:t2.urlAfterRedirects},"eager"===router.urlUpdateStrategy){if(!t2.extras.skipLocationChange){const rawUrl=router.urlHandlingStrategy.merge(t2.urlAfterRedirects,t2.rawUrl);router.setBrowserUrl(rawUrl,t2)}router.browserUrlTree=t2.urlAfterRedirects}const routesRecognized=new RoutesRecognized(t2.id,this.urlSerializer.serialize(t2.extractedUrl),this.urlSerializer.serialize(t2.urlAfterRedirects),t2.targetSnapshot);this.events.next(routesRecognized)}));if(urlTransition&&router.urlHandlingStrategy.shouldProcessUrl(router.rawUrlTree)){const{id,extractedUrl,source,restoredState,extras}=t,navStart=new NavigationStart(id,this.urlSerializer.serialize(extractedUrl),source,restoredState);this.events.next(navStart);const targetSnapshot=createEmptyState(0,this.rootComponentType).snapshot;return overallTransitionState={...t,targetSnapshot,urlAfterRedirects:extractedUrl,extras:{...extras,skipLocationChange:!1,replaceUrl:!1}},(0,observable_of.of)(overallTransitionState)}{const reason="";return this.events.next(new NavigationSkipped(t.id,router.serializeUrl(overallTransitionState.extractedUrl),reason,1)),router.rawUrlTree=t.rawUrl,t.resolve(null),empty.E}}),tap2(t=>{const guardsStart=new GuardsCheckStart(t.id,this.urlSerializer.serialize(t.extractedUrl),this.urlSerializer.serialize(t.urlAfterRedirects),t.targetSnapshot);this.events.next(guardsStart)}),(0,map.U)(t=>overallTransitionState={...t,guards:getAllRouteGuards(t.targetSnapshot,t.currentSnapshot,this.rootContexts)}),checkGuards(this.environmentInjector,evt=>this.events.next(evt)),tap2(t=>{if(overallTransitionState.guardsResult=t.guardsResult,isUrlTree(t.guardsResult))throw redirectingNavigationError(0,t.guardsResult);const guardsEnd=new GuardsCheckEnd(t.id,this.urlSerializer.serialize(t.extractedUrl),this.urlSerializer.serialize(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.events.next(guardsEnd)}),(0,filter.h)(t=>!!t.guardsResult||(router.restoreHistory(t),this.cancelNavigationTransition(t,"",3),!1)),switchTap(t=>{if(t.guards.canActivateChecks.length)return(0,observable_of.of)(t).pipe(tap2(t2=>{const resolveStart=new ResolveStart(t2.id,this.urlSerializer.serialize(t2.extractedUrl),this.urlSerializer.serialize(t2.urlAfterRedirects),t2.targetSnapshot);this.events.next(resolveStart)}),(0,switchMap.w)(t2=>{let dataResolved=!1;return(0,observable_of.of)(t2).pipe(resolveData(router.paramsInheritanceStrategy,this.environmentInjector),tap2({next:()=>dataResolved=!0,complete:()=>{dataResolved||(router.restoreHistory(t2),this.cancelNavigationTransition(t2,"",2))}}))}),tap2(t2=>{const resolveEnd=new ResolveEnd(t2.id,this.urlSerializer.serialize(t2.extractedUrl),this.urlSerializer.serialize(t2.urlAfterRedirects),t2.targetSnapshot);this.events.next(resolveEnd)}))}),switchTap(t=>{const loadComponents=__name(route=>{const loaders=[];route.routeConfig?.loadComponent&&!route.routeConfig._loadedComponent&&loaders.push(this.configLoader.loadComponent(route.routeConfig).pipe(tap2(loadedComponent=>{route.component=loadedComponent}),(0,map.U)(()=>{})));for(const child of route.children)loaders.push(...loadComponents(child));return loaders},"loadComponents");return combineLatest(loadComponents(t.targetSnapshot.root)).pipe((0,defaultIfEmpty.d)(),(0,take.q)(1))}),switchTap(()=>this.afterPreactivation()),(0,map.U)(t=>{const targetRouterState=createRouterState(router.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return overallTransitionState={...t,targetRouterState}}),tap2(t=>{router.currentUrlTree=t.urlAfterRedirects,router.rawUrlTree=router.urlHandlingStrategy.merge(t.urlAfterRedirects,t.rawUrl),router.routerState=t.targetRouterState,"deferred"===router.urlUpdateStrategy&&(t.extras.skipLocationChange||router.setBrowserUrl(router.rawUrlTree,t),router.browserUrlTree=t.urlAfterRedirects)}),activateRoutes(this.rootContexts,router.routeReuseStrategy,evt=>this.events.next(evt),this.inputBindingEnabled),(0,take.q)(1),tap2({next:t=>{completed=!0,this.lastSuccessfulNavigation=this.currentNavigation,router.navigated=!0,this.events.next(new NavigationEnd(t.id,this.urlSerializer.serialize(t.extractedUrl),this.urlSerializer.serialize(router.currentUrlTree))),router.titleStrategy?.updateTitle(t.targetRouterState.snapshot),t.resolve(!0)},complete:()=>{completed=!0}}),finalize(()=>{completed||errored||this.cancelNavigationTransition(overallTransitionState,"",1),this.currentNavigation?.id===overallTransitionState.id&&(this.currentNavigation=null)}),catchError_catchError(e=>{if(errored=!0,isNavigationCancelingError$1(e)){isRedirectingNavigationCancelingError$1(e)||(router.navigated=!0,router.restoreHistory(overallTransitionState,!0));const navCancel=new NavigationCancel(overallTransitionState.id,this.urlSerializer.serialize(overallTransitionState.extractedUrl),e.message,e.cancellationCode);if(this.events.next(navCancel),isRedirectingNavigationCancelingError$1(e)){const mergedTree=router.urlHandlingStrategy.merge(e.url,router.rawUrlTree),extras={skipLocationChange:overallTransitionState.extras.skipLocationChange,replaceUrl:"eager"===router.urlUpdateStrategy||isBrowserTriggeredNavigation(overallTransitionState.source)};router.scheduleNavigation(mergedTree,IMPERATIVE_NAVIGATION,null,extras,{resolve:overallTransitionState.resolve,reject:overallTransitionState.reject,promise:overallTransitionState.promise})}else overallTransitionState.resolve(!1)}else{router.restoreHistory(overallTransitionState,!0);const navError=new NavigationError(overallTransitionState.id,this.urlSerializer.serialize(overallTransitionState.extractedUrl),e,overallTransitionState.targetSnapshot??void 0);this.events.next(navError);try{overallTransitionState.resolve(router.errorHandler(e))}catch(ee){overallTransitionState.reject(ee)}}return empty.E}))}))}cancelNavigationTransition(t,reason,code){const navCancel=new NavigationCancel(t.id,this.urlSerializer.serialize(t.extractedUrl),reason,code);this.events.next(navCancel),t.resolve(!1)}}return __name(NavigationTransitions2,"NavigationTransitions"),NavigationTransitions2.\u0275fac=__name(function(t){return new(t||NavigationTransitions2)},"NavigationTransitions_Factory"),NavigationTransitions2.\u0275prov=core.Yz7({token:NavigationTransitions2,factory:NavigationTransitions2.\u0275fac,providedIn:"root"}),NavigationTransitions2})();function isBrowserTriggeredNavigation(source){return source!==IMPERATIVE_NAVIGATION}__name(isBrowserTriggeredNavigation,"isBrowserTriggeredNavigation");let TitleStrategy=(()=>{class TitleStrategy2{buildTitle(snapshot){let pageTitle,route=snapshot.root;for(;void 0!==route;)pageTitle=this.getResolvedTitleForRoute(route)??pageTitle,route=route.children.find(child=>child.outlet===PRIMARY_OUTLET);return pageTitle}getResolvedTitleForRoute(snapshot){return snapshot.data[RouteTitleKey]}}return __name(TitleStrategy2,"TitleStrategy"),TitleStrategy2.\u0275fac=__name(function(t){return new(t||TitleStrategy2)},"TitleStrategy_Factory"),TitleStrategy2.\u0275prov=core.Yz7({token:TitleStrategy2,factory:function(){return(0,core.f3M)(DefaultTitleStrategy)},providedIn:"root"}),TitleStrategy2})(),DefaultTitleStrategy=(()=>{class DefaultTitleStrategy2 extends TitleStrategy{constructor(title){super(),this.title=title}updateTitle(snapshot){const title=this.buildTitle(snapshot);void 0!==title&&this.title.setTitle(title)}}return __name(DefaultTitleStrategy2,"DefaultTitleStrategy"),DefaultTitleStrategy2.\u0275fac=__name(function(t){return new(t||DefaultTitleStrategy2)(core.LFG(platform_browser.Dx))},"DefaultTitleStrategy_Factory"),DefaultTitleStrategy2.\u0275prov=core.Yz7({token:DefaultTitleStrategy2,factory:DefaultTitleStrategy2.\u0275fac,providedIn:"root"}),DefaultTitleStrategy2})(),RouteReuseStrategy=(()=>{class RouteReuseStrategy2{}return __name(RouteReuseStrategy2,"RouteReuseStrategy"),RouteReuseStrategy2.\u0275fac=__name(function(t){return new(t||RouteReuseStrategy2)},"RouteReuseStrategy_Factory"),RouteReuseStrategy2.\u0275prov=core.Yz7({token:RouteReuseStrategy2,factory:function(){return(0,core.f3M)(DefaultRouteReuseStrategy)},providedIn:"root"}),RouteReuseStrategy2})();class BaseRouteReuseStrategy{shouldDetach(route){return!1}store(route,detachedTree){}shouldAttach(route){return!1}retrieve(route){return null}shouldReuseRoute(future,curr){return future.routeConfig===curr.routeConfig}}__name(BaseRouteReuseStrategy,"BaseRouteReuseStrategy");let DefaultRouteReuseStrategy=(()=>{class DefaultRouteReuseStrategy2 extends BaseRouteReuseStrategy{}return __name(DefaultRouteReuseStrategy2,"DefaultRouteReuseStrategy"),DefaultRouteReuseStrategy2.\u0275fac=function(){let \u0275DefaultRouteReuseStrategy_BaseFactory;return __name(function(t){return(\u0275DefaultRouteReuseStrategy_BaseFactory||(\u0275DefaultRouteReuseStrategy_BaseFactory=core.n5z(DefaultRouteReuseStrategy2)))(t||DefaultRouteReuseStrategy2)},"DefaultRouteReuseStrategy_Factory")}(),DefaultRouteReuseStrategy2.\u0275prov=core.Yz7({token:DefaultRouteReuseStrategy2,factory:DefaultRouteReuseStrategy2.\u0275fac,providedIn:"root"}),DefaultRouteReuseStrategy2})();const ROUTER_CONFIGURATION=new core.OlP("",{providedIn:"root",factory:()=>({})});let UrlHandlingStrategy=(()=>{class UrlHandlingStrategy2{}return __name(UrlHandlingStrategy2,"UrlHandlingStrategy"),UrlHandlingStrategy2.\u0275fac=__name(function(t){return new(t||UrlHandlingStrategy2)},"UrlHandlingStrategy_Factory"),UrlHandlingStrategy2.\u0275prov=core.Yz7({token:UrlHandlingStrategy2,factory:function(){return(0,core.f3M)(DefaultUrlHandlingStrategy)},providedIn:"root"}),UrlHandlingStrategy2})(),DefaultUrlHandlingStrategy=(()=>{class DefaultUrlHandlingStrategy2{shouldProcessUrl(url){return!0}extract(url){return url}merge(newUrlPart,wholeUrl){return newUrlPart}}return __name(DefaultUrlHandlingStrategy2,"DefaultUrlHandlingStrategy"),DefaultUrlHandlingStrategy2.\u0275fac=__name(function(t){return new(t||DefaultUrlHandlingStrategy2)},"DefaultUrlHandlingStrategy_Factory"),DefaultUrlHandlingStrategy2.\u0275prov=core.Yz7({token:DefaultUrlHandlingStrategy2,factory:DefaultUrlHandlingStrategy2.\u0275fac,providedIn:"root"}),DefaultUrlHandlingStrategy2})();var NavigationResult=(()=>((NavigationResult=NavigationResult||{})[NavigationResult.COMPLETE=0]="COMPLETE",NavigationResult[NavigationResult.FAILED=1]="FAILED",NavigationResult[NavigationResult.REDIRECTING=2]="REDIRECTING",NavigationResult))();function afterNextNavigation(router,action){router.events.pipe((0,filter.h)(e=>e instanceof NavigationEnd||e instanceof NavigationCancel||e instanceof NavigationError||e instanceof NavigationSkipped),(0,map.U)(e=>e instanceof NavigationEnd||e instanceof NavigationSkipped?NavigationResult.COMPLETE:e instanceof NavigationCancel&&(0===e.code||1===e.code)?NavigationResult.REDIRECTING:NavigationResult.FAILED),(0,filter.h)(result=>result!==NavigationResult.REDIRECTING),(0,take.q)(1)).subscribe(()=>{action()})}function defaultErrorHandler(error){throw error}function defaultMalformedUriErrorHandler(error,urlSerializer,url){return urlSerializer.parse("/")}__name(afterNextNavigation,"afterNextNavigation"),__name(defaultErrorHandler,"defaultErrorHandler"),__name(defaultMalformedUriErrorHandler,"defaultMalformedUriErrorHandler");const exactMatchOptions={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},subsetMatchOptions={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Router=(()=>{class Router2{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,core.f3M)(core.c2e),this.isNgZoneEnabled=!1,this.options=(0,core.f3M)(ROUTER_CONFIGURATION,{optional:!0})||{},this.pendingTasks=(0,core.f3M)(core.HDt),this.errorHandler=this.options.errorHandler||defaultErrorHandler,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||defaultMalformedUriErrorHandler,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,core.f3M)(UrlHandlingStrategy),this.routeReuseStrategy=(0,core.f3M)(RouteReuseStrategy),this.titleStrategy=(0,core.f3M)(TitleStrategy),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,core.f3M)(ROUTES,{optional:!0})?.flat()??[],this.navigationTransitions=(0,core.f3M)(NavigationTransitions),this.urlSerializer=(0,core.f3M)(UrlSerializer),this.location=(0,core.f3M)(common.Ye),this.componentInputBindingEnabled=!!(0,core.f3M)(INPUT_BINDER,{optional:!0}),this.isNgZoneEnabled=(0,core.f3M)(core.R0b)instanceof core.R0b&&core.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new UrlTree,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=createEmptyState(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(rootComponentType){this.routerState.root.component=rootComponentType,this.navigationTransitions.rootComponentType=rootComponentType}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const state=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),IMPERATIVE_NAVIGATION,state)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(event=>{const source="popstate"===event.type?"popstate":"hashchange";"popstate"===source&&setTimeout(()=>{this.navigateToSyncWithBrowser(event.url,source,event.state)},0)}))}navigateToSyncWithBrowser(url,source,state){const extras={replaceUrl:!0},restoredState=state?.navigationId?state:null;if(state){const stateCopy={...state};delete stateCopy.navigationId,delete stateCopy.\u0275routerPageId,0!==Object.keys(stateCopy).length&&(extras.state=stateCopy)}const urlTree=this.parseUrl(url);this.scheduleNavigation(urlTree,source,restoredState,extras)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(config){this.config=config.map(standardizeConfig),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(commands,navigationExtras={}){const{relativeTo,queryParams,fragment,queryParamsHandling,preserveFragment}=navigationExtras,f=preserveFragment?this.currentUrlTree.fragment:fragment;let relativeToUrlSegmentGroup,q=null;switch(queryParamsHandling){case"merge":q={...this.currentUrlTree.queryParams,...queryParams};break;case"preserve":q=this.currentUrlTree.queryParams;break;default:q=queryParams||null}null!==q&&(q=this.removeEmptyProps(q));try{relativeToUrlSegmentGroup=createSegmentGroupFromRoute(relativeTo?relativeTo.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof commands[0]||!commands[0].startsWith("/"))&&(commands=[]),relativeToUrlSegmentGroup=this.currentUrlTree.root}return createUrlTreeFromSegmentGroup(relativeToUrlSegmentGroup,commands,q,f??null)}navigateByUrl(url,extras={skipLocationChange:!1}){const urlTree=isUrlTree(url)?url:this.parseUrl(url),mergedTree=this.urlHandlingStrategy.merge(urlTree,this.rawUrlTree);return this.scheduleNavigation(mergedTree,IMPERATIVE_NAVIGATION,null,extras)}navigate(commands,extras={skipLocationChange:!1}){return validateCommands(commands),this.navigateByUrl(this.createUrlTree(commands,extras),extras)}serializeUrl(url){return this.urlSerializer.serialize(url)}parseUrl(url){let urlTree;try{urlTree=this.urlSerializer.parse(url)}catch(e){urlTree=this.malformedUriErrorHandler(e,this.urlSerializer,url)}return urlTree}isActive(url,matchOptions){let options;if(options=!0===matchOptions?{...exactMatchOptions}:!1===matchOptions?{...subsetMatchOptions}:matchOptions,isUrlTree(url))return containsTree(this.currentUrlTree,url,options);const urlTree=this.parseUrl(url);return containsTree(this.currentUrlTree,urlTree,options)}removeEmptyProps(params){return Object.keys(params).reduce((result,key)=>{const value=params[key];return null!=value&&(result[key]=value),result},{})}scheduleNavigation(rawUrl,source,restoredState,extras,priorPromise){if(this.disposed)return Promise.resolve(!1);let resolve,reject,promise;priorPromise?(resolve=priorPromise.resolve,reject=priorPromise.reject,promise=priorPromise.promise):promise=new Promise((res,rej)=>{resolve=res,reject=rej});const taskId=this.pendingTasks.add();return afterNextNavigation(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(taskId))}),this.navigationTransitions.handleNavigationRequest({source,restoredState,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl,extras,resolve,reject,promise,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),promise.catch(e=>Promise.reject(e))}setBrowserUrl(url,transition){const path=this.urlSerializer.serialize(url);if(this.location.isCurrentPathEqualTo(path)||transition.extras.replaceUrl){const state={...transition.extras.state,...this.generateNgRouterState(transition.id,this.browserPageId)};this.location.replaceState(path,"",state)}else{const state={...transition.extras.state,...this.generateNgRouterState(transition.id,(this.browserPageId??0)+1)};this.location.go(path,"",state)}}restoreHistory(transition,restoringFromCaughtError=!1){if("computed"===this.canceledNavigationResolution){const targetPagePosition=this.currentPageId-(this.browserPageId??this.currentPageId);0!==targetPagePosition?this.location.historyGo(targetPagePosition):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===targetPagePosition&&(this.resetState(transition),this.browserUrlTree=transition.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(restoringFromCaughtError&&this.resetState(transition),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(navigationId,routerPageId){return"computed"===this.canceledNavigationResolution?{navigationId,\u0275routerPageId:routerPageId}:{navigationId}}}return __name(Router2,"Router"),Router2.\u0275fac=__name(function(t){return new(t||Router2)},"Router_Factory"),Router2.\u0275prov=core.Yz7({token:Router2,factory:Router2.\u0275fac,providedIn:"root"}),Router2})();function validateCommands(commands){for(let i=0;i<commands.length;i++)if(null==commands[i])throw new core.vHH(4008,!1)}__name(validateCommands,"validateCommands"),__name(function isActiveMatchOptions(options){return!!options.paths},"isActiveMatchOptions");class PreloadingStrategy{}__name(PreloadingStrategy,"PreloadingStrategy");let RouterPreloader=(()=>{class RouterPreloader2{constructor(router,compiler,injector,preloadingStrategy,loader){this.router=router,this.injector=injector,this.preloadingStrategy=preloadingStrategy,this.loader=loader}setUpPreloading(){this.subscription=this.router.events.pipe((0,filter.h)(e=>e instanceof NavigationEnd),(0,concatMap.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(injector,routes){const res=[];for(const route of routes){route.providers&&!route._injector&&(route._injector=(0,core.MMx)(route.providers,injector,`Route: ${route.path}`));const injectorForCurrentRoute=route._injector??injector,injectorForChildren=route._loadedInjector??injectorForCurrentRoute;(route.loadChildren&&!route._loadedRoutes&&void 0===route.canLoad||route.loadComponent&&!route._loadedComponent)&&res.push(this.preloadConfig(injectorForCurrentRoute,route)),(route.children||route._loadedRoutes)&&res.push(this.processRoutes(injectorForChildren,route.children??route._loadedRoutes))}return(0,from.D)(res).pipe((0,mergeAll.J)())}preloadConfig(injector,route){return this.preloadingStrategy.preload(route,()=>{let loadedChildren$;loadedChildren$=route.loadChildren&&void 0===route.canLoad?this.loader.loadChildren(injector,route):(0,observable_of.of)(null);const recursiveLoadChildren$=loadedChildren$.pipe((0,mergeMap.z)(config=>null===config?(0,observable_of.of)(void 0):(route._loadedRoutes=config.routes,route._loadedInjector=config.injector,this.processRoutes(config.injector??injector,config.routes))));if(route.loadComponent&&!route._loadedComponent){const loadComponent$=this.loader.loadComponent(route);return(0,from.D)([recursiveLoadChildren$,loadComponent$]).pipe((0,mergeAll.J)())}return recursiveLoadChildren$})}}return __name(RouterPreloader2,"RouterPreloader"),RouterPreloader2.\u0275fac=__name(function(t){return new(t||RouterPreloader2)(core.LFG(Router),core.LFG(core.Sil),core.LFG(core.lqb),core.LFG(PreloadingStrategy),core.LFG(RouterConfigLoader))},"RouterPreloader_Factory"),RouterPreloader2.\u0275prov=core.Yz7({token:RouterPreloader2,factory:RouterPreloader2.\u0275fac,providedIn:"root"}),RouterPreloader2})();const ROUTER_SCROLLER=new core.OlP("");let RouterScroller=(()=>{class RouterScroller2{constructor(urlSerializer,transitions,viewportScroller,zone,options={}){this.urlSerializer=urlSerializer,this.transitions=transitions,this.viewportScroller=viewportScroller,this.zone=zone,this.options=options,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},options.scrollPositionRestoration=options.scrollPositionRestoration||"disabled",options.anchorScrolling=options.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof NavigationStart?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof NavigationEnd?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof NavigationSkipped&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Scroll&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(routerEvent,anchor){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Scroll(routerEvent,"popstate"===this.lastSource?this.store[this.restoredId]:null,anchor))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return __name(RouterScroller2,"RouterScroller"),RouterScroller2.\u0275fac=__name(function(t){core.$Z()},"RouterScroller_Factory"),RouterScroller2.\u0275prov=core.Yz7({token:RouterScroller2,factory:RouterScroller2.\u0275fac}),RouterScroller2})();function rootRoute(router){return router.routerState.root}function routerFeature(kind,providers){return{\u0275kind:kind,\u0275providers:providers}}function getBootstrapListener(){const injector=(0,core.f3M)(core.zs3);return bootstrappedComponentRef=>{const ref=injector.get(core.z2F);if(bootstrappedComponentRef!==ref.components[0])return;const router=injector.get(Router),bootstrapDone=injector.get(BOOTSTRAP_DONE);1===injector.get(INITIAL_NAVIGATION)&&router.initialNavigation(),injector.get(ROUTER_PRELOADER,null,core.XFs.Optional)?.setUpPreloading(),injector.get(ROUTER_SCROLLER,null,core.XFs.Optional)?.init(),router.resetRootComponentType(ref.componentTypes[0]),bootstrapDone.closed||(bootstrapDone.next(),bootstrapDone.complete(),bootstrapDone.unsubscribe())}}__name(function provideRouter(routes,...features){return makeEnvironmentProviders([{provide:ROUTES,multi:!0,useValue:routes},[],{provide:ActivatedRoute,useFactory:rootRoute,deps:[Router]},{provide:APP_BOOTSTRAP_LISTENER,multi:!0,useFactory:getBootstrapListener},features.map(feature=>feature.\u0275providers)])},"provideRouter"),__name(rootRoute,"rootRoute"),__name(routerFeature,"routerFeature"),__name(function provideRoutes(routes){return[{provide:ROUTES,multi:!0,useValue:routes},[]]},"provideRoutes"),__name(function withInMemoryScrolling(options={}){return routerFeature(4,[{provide:ROUTER_SCROLLER,useFactory:()=>{const viewportScroller=inject(ViewportScroller),zone=inject(NgZone),transitions=inject(NavigationTransitions),urlSerializer=inject(UrlSerializer);return new RouterScroller(urlSerializer,transitions,viewportScroller,zone,options)}}])},"withInMemoryScrolling"),__name(getBootstrapListener,"getBootstrapListener");const BOOTSTRAP_DONE=new core.OlP("",{factory:()=>new Subject.x}),INITIAL_NAVIGATION=new core.OlP("",{providedIn:"root",factory:()=>1});function withEnabledBlockingInitialNavigation(){return routerFeature(2,[{provide:INITIAL_NAVIGATION,useValue:0},{provide:core.ip1,multi:!0,deps:[core.zs3],useFactory:injector=>{const locationInitialized=injector.get(common.V_,Promise.resolve());return()=>locationInitialized.then(()=>new Promise(resolve=>{const router=injector.get(Router),bootstrapDone=injector.get(BOOTSTRAP_DONE);afterNextNavigation(router,()=>{resolve(!0)}),injector.get(NavigationTransitions).afterPreactivation=()=>(resolve(!0),bootstrapDone.closed?(0,observable_of.of)(void 0):bootstrapDone),router.initialNavigation()}))}}])}function withDisabledInitialNavigation(){return routerFeature(3,[{provide:core.ip1,multi:!0,useFactory:()=>{const router=(0,core.f3M)(Router);return()=>{router.setUpLocationChangeListener()}}},{provide:INITIAL_NAVIGATION,useValue:2}])}__name(withEnabledBlockingInitialNavigation,"withEnabledBlockingInitialNavigation"),__name(withDisabledInitialNavigation,"withDisabledInitialNavigation"),__name(function withDebugTracing(){let providers=[];return providers=[],routerFeature(1,providers)},"withDebugTracing");const ROUTER_PRELOADER=new core.OlP("");function withPreloading(preloadingStrategy){return routerFeature(0,[{provide:ROUTER_PRELOADER,useExisting:RouterPreloader},{provide:PreloadingStrategy,useExisting:preloadingStrategy}])}function withComponentInputBinding(){return routerFeature(8,[RoutedComponentInputBinder,{provide:INPUT_BINDER,useExisting:RoutedComponentInputBinder}])}__name(withPreloading,"withPreloading"),__name(function withRouterConfig(options){return routerFeature(5,[{provide:ROUTER_CONFIGURATION,useValue:options}])},"withRouterConfig"),__name(function withHashLocation(){return routerFeature(5,[{provide:LocationStrategy,useClass:HashLocationStrategy}])},"withHashLocation"),__name(function withNavigationErrorHandler(fn){return routerFeature(7,[{provide:ENVIRONMENT_INITIALIZER,multi:!0,useValue:()=>{const injector=inject(EnvironmentInjector);inject(Router).events.subscribe(e=>{e instanceof NavigationError&&injector.runInContext(()=>fn(e))})}}])},"withNavigationErrorHandler"),__name(withComponentInputBinding,"withComponentInputBinding");const ROUTER_FORROOT_GUARD=new core.OlP("ROUTER_FORROOT_GUARD"),ROUTER_PROVIDERS=[common.Ye,{provide:UrlSerializer,useClass:DefaultUrlSerializer},Router,ChildrenOutletContexts,{provide:ActivatedRoute,useFactory:rootRoute,deps:[Router]},RouterConfigLoader,[]];function routerNgProbeToken(){return new core.PXZ("Router",Router)}__name(routerNgProbeToken,"routerNgProbeToken");let RouterModule=(()=>{class RouterModule2{constructor(guard){}static forRoot(routes,config){return{ngModule:RouterModule2,providers:[ROUTER_PROVIDERS,[],{provide:ROUTES,multi:!0,useValue:routes},{provide:ROUTER_FORROOT_GUARD,useFactory:provideForRootGuard,deps:[[Router,new core.FiY,new core.tp0]]},{provide:ROUTER_CONFIGURATION,useValue:config||{}},config?.useHash?provideHashLocationStrategy():providePathLocationStrategy(),provideRouterScroller(),config?.preloadingStrategy?withPreloading(config.preloadingStrategy).\u0275providers:[],{provide:core.PXZ,multi:!0,useFactory:routerNgProbeToken},config?.initialNavigation?provideInitialNavigation(config):[],config?.bindToComponentInputs?withComponentInputBinding().\u0275providers:[],provideRouterInitializer()]}}static forChild(routes){return{ngModule:RouterModule2,providers:[{provide:ROUTES,multi:!0,useValue:routes}]}}}return __name(RouterModule2,"RouterModule"),RouterModule2.\u0275fac=__name(function(t){return new(t||RouterModule2)(core.LFG(ROUTER_FORROOT_GUARD,8))},"RouterModule_Factory"),RouterModule2.\u0275mod=core.oAB({type:RouterModule2}),RouterModule2.\u0275inj=core.cJS({}),RouterModule2})();function provideRouterScroller(){return{provide:ROUTER_SCROLLER,useFactory:()=>{const viewportScroller=(0,core.f3M)(common.EM),zone=(0,core.f3M)(core.R0b),config=(0,core.f3M)(ROUTER_CONFIGURATION),transitions=(0,core.f3M)(NavigationTransitions),urlSerializer=(0,core.f3M)(UrlSerializer);return config.scrollOffset&&viewportScroller.setOffset(config.scrollOffset),new RouterScroller(urlSerializer,transitions,viewportScroller,zone,config)}}}function provideHashLocationStrategy(){return{provide:common.S$,useClass:common.Do}}function providePathLocationStrategy(){return{provide:common.S$,useClass:common.b0}}function provideForRootGuard(router){return"guarded"}function provideInitialNavigation(config){return["disabled"===config.initialNavigation?withDisabledInitialNavigation().\u0275providers:[],"enabledBlocking"===config.initialNavigation?withEnabledBlockingInitialNavigation().\u0275providers:[]]}__name(provideRouterScroller,"provideRouterScroller"),__name(provideHashLocationStrategy,"provideHashLocationStrategy"),__name(providePathLocationStrategy,"providePathLocationStrategy"),__name(provideForRootGuard,"provideForRootGuard"),__name(provideInitialNavigation,"provideInitialNavigation");const ROUTER_INITIALIZER=new core.OlP("");function provideRouterInitializer(){return[{provide:ROUTER_INITIALIZER,useFactory:getBootstrapListener},{provide:core.tb,multi:!0,useExisting:ROUTER_INITIALIZER}]}__name(provideRouterInitializer,"provideRouterInitializer"),__name(function mapToCanMatch(providers){return providers.map(provider=>(...params)=>inject(provider).canMatch(...params))},"mapToCanMatch"),__name(function mapToCanActivate(providers){return providers.map(provider=>(...params)=>inject(provider).canActivate(...params))},"mapToCanActivate"),__name(function mapToCanActivateChild(providers){return providers.map(provider=>(...params)=>inject(provider).canActivateChild(...params))},"mapToCanActivateChild"),__name(function mapToCanDeactivate(providers){return providers.map(provider=>(...params)=>inject(provider).canDeactivate(...params))},"mapToCanDeactivate"),__name(function mapToResolve(provider){return(...params)=>inject(provider).resolve(...params)},"mapToResolve")},926:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>HasSlotController});var HasSlotController=__name(class{constructor(host,...slotNames){this.slotNames=[],(this.host=host).addController(this),this.slotNames=slotNames,this.handleSlotChange=this.handleSlotChange.bind(this)}hasDefaultSlot(){return[...this.host.childNodes].some(node=>{if(node.nodeType===node.TEXT_NODE&&""!==node.textContent.trim())return!0;if(node.nodeType===node.ELEMENT_NODE){const el=node;if("sl-visually-hidden"===el.tagName.toLowerCase())return!1;if(!el.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(name){return null!==this.host.querySelector(`:scope > [slot="${name}"]`)}test(slotName){return"[default]"===slotName?this.hasDefaultSlot():this.hasNamedSlot(slotName)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}handleSlotChange(event){const slot=event.target;(this.slotNames.includes("[default]")&&!slot.name||slot.name&&this.slotNames.includes(slot.name))&&this.host.requestUpdate()}},"HasSlotController");__name(function getTextContent(slot){if(!slot)return"";const nodes=slot.assignedNodes({flatten:!0});let text="";return[...nodes].forEach(node=>{node.nodeType===Node.TEXT_NODE&&(text+=node.textContent)}),text},"getTextContent")},7082:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>getBasePath,t:()=>setBasePath});var basePath="";function setBasePath(path){basePath=path}function getBasePath(subpath=""){if(!basePath){const scripts=[...document.getElementsByTagName("script")],configScript=scripts.find(script=>script.hasAttribute("data-shoelace"));if(configScript)setBasePath(configScript.getAttribute("data-shoelace"));else{const fallbackScript=scripts.find(s=>/shoelace(\.min)?\.js($|\?)/.test(s.src)||/shoelace-autoloader(\.min)?\.js($|\?)/.test(s.src));let path="";fallbackScript&&(path=fallbackScript.getAttribute("src")),setBasePath(path.split("/").slice(0,-1).join("/"))}}return basePath.replace(/\/$/,"")+(subpath?`/${subpath.replace(/^\//,"")}`:"")}__name(setBasePath,"setBasePath"),__name(getBasePath,"getBasePath")},7367:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{RA:()=>parseDuration,U_:()=>stopAnimations,nv:()=>animateTo});var _chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9056);function animateTo(el,keyframes,options){return new Promise(resolve=>{if(options?.duration===1/0)throw new Error("Promise-based animations must be finite.");const animation=el.animate(keyframes,(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_0__.EZ)((0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_0__.ih)({},options),{duration:prefersReducedMotion()?0:options.duration}));animation.addEventListener("cancel",resolve,{once:!0}),animation.addEventListener("finish",resolve,{once:!0})})}function parseDuration(delay){return(delay=delay.toString().toLowerCase()).indexOf("ms")>-1?parseFloat(delay):delay.indexOf("s")>-1?1e3*parseFloat(delay):parseFloat(delay)}function prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function stopAnimations(el){return Promise.all(el.getAnimations().map(animation=>new Promise(resolve=>{const handleAnimationEvent=requestAnimationFrame(resolve);animation.addEventListener("cancel",()=>handleAnimationEvent,{once:!0}),animation.addEventListener("finish",()=>handleAnimationEvent,{once:!0}),animation.cancel()})))}__name(animateTo,"animateTo"),__name(parseDuration,"parseDuration"),__name(prefersReducedMotion,"prefersReducedMotion"),__name(stopAnimations,"stopAnimations"),__name(function shimKeyframesHeightAuto(keyframes,calculatedHeight){return keyframes.map(keyframe=>__spreadProps(__spreadValues({},keyframe),{height:"auto"===keyframe.height?`${calculatedHeight}px`:keyframe.height}))},"shimKeyframesHeightAuto")},588:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";var _chunk_TA75SLJE_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7615),_chunk_MQ6XKY3Z_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7917),_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2019),_chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3118),_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9056),SlSpinner=__name(class extends _chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_2__.P{constructor(){super(...arguments),this.localize=new _chunk_MQ6XKY3Z_js__WEBPACK_IMPORTED_MODULE_1__.V(this)}render(){return _chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_3__.y`
      <svg part="base" class="spinner" role="progressbar" aria-valuetext=${this.localize.term("loading")}>
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}},"SlSpinner");SlSpinner.styles=_chunk_TA75SLJE_js__WEBPACK_IMPORTED_MODULE_0__.D,SlSpinner=(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_2__.e)("sl-spinner")],SlSpinner)},9573:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";var parser,_home_runner_work_galaxy_galaxy_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9671),_chunk_VG6XY36X_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5503),_chunk_DAGT3MMF_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5793),_chunk_VQ3XOPCT_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6596),_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2019),_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9056),CACHEABLE_ERROR=Symbol(),RETRYABLE_ERROR=Symbol(),iconCache=new Map,SlIcon=__name(class extends _chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_3__.P{constructor(){super(...arguments),this.svg=null,this.label="",this.library="default"}static resolveIcon(url){return(0,_home_runner_work_galaxy_galaxy_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)(function*(){var _a;let fileData;try{if(fileData=yield fetch(url,{mode:"cors"}),!fileData.ok)return 410===fileData.status?CACHEABLE_ERROR:RETRYABLE_ERROR}catch{return RETRYABLE_ERROR}try{const div=document.createElement("div");div.innerHTML=yield fileData.text();const svg=div.firstElementChild;if("svg"!==(null==(_a=svg?.tagName)?void 0:_a.toLowerCase()))return CACHEABLE_ERROR;parser||(parser=new DOMParser);const svgEl=parser.parseFromString(svg.outerHTML,"text/html").body.querySelector("svg");return svgEl?(svgEl.part.add("svg"),document.adoptNode(svgEl)):CACHEABLE_ERROR}catch{return CACHEABLE_ERROR}})()}connectedCallback(){super.connectedCallback(),(0,_chunk_VG6XY36X_js__WEBPACK_IMPORTED_MODULE_0__.E4)(this)}firstUpdated(){this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),(0,_chunk_VG6XY36X_js__WEBPACK_IMPORTED_MODULE_0__.Sw)(this)}getUrl(){const library=(0,_chunk_VG6XY36X_js__WEBPACK_IMPORTED_MODULE_0__.Tb)(this.library);return this.name&&library?library.resolver(this.name):this.src}handleLabelChange(){"string"==typeof this.label&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}setIcon(){var _this=this;return(0,_home_runner_work_galaxy_galaxy_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)(function*(){var _a;const library=(0,_chunk_VG6XY36X_js__WEBPACK_IMPORTED_MODULE_0__.Tb)(_this.library),url=_this.getUrl();if(!url)return void(_this.svg=null);let iconResolver=iconCache.get(url);iconResolver||(iconResolver=SlIcon.resolveIcon(url),iconCache.set(url,iconResolver));const svg=yield iconResolver;if(svg===RETRYABLE_ERROR&&iconCache.delete(url),url===_this.getUrl())switch(svg){case RETRYABLE_ERROR:case CACHEABLE_ERROR:_this.svg=null,_this.emit("sl-error");break;default:_this.svg=svg.cloneNode(!0),null==(_a=library?.mutator)||_a.call(library,_this.svg),_this.emit("sl-load")}})()}render(){return this.svg}},"SlIcon");SlIcon.styles=_chunk_DAGT3MMF_js__WEBPACK_IMPORTED_MODULE_1__.W,(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_3__.t)()],SlIcon.prototype,"svg",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_3__.e2)({reflect:!0})],SlIcon.prototype,"name",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_3__.e2)()],SlIcon.prototype,"src",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_3__.e2)()],SlIcon.prototype,"label",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_3__.e2)({reflect:!0})],SlIcon.prototype,"library",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_VQ3XOPCT_js__WEBPACK_IMPORTED_MODULE_2__.Y)("label")],SlIcon.prototype,"handleLabelChange",1),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_VQ3XOPCT_js__WEBPACK_IMPORTED_MODULE_2__.Y)(["name","src","library"])],SlIcon.prototype,"setIcon",1),SlIcon=(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_4__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_3__.e)("sl-icon")],SlIcon)},2475:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";function waitForEvent(el,eventName){return new Promise(resolve=>{function done(event){event.target===el&&(el.removeEventListener(eventName,done),resolve())}__name(done,"done"),el.addEventListener(eventName,done)})}__webpack_require__.d(__webpack_exports__,{m:()=>waitForEvent}),__name(waitForEvent,"waitForEvent")},3390:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>component_styles_default});var component_styles_default=__webpack_require__(3118).i`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`},5793:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>icon_styles_default});var _chunk_BCEYT3RT_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3390),icon_styles_default=__webpack_require__(3118).i`
  ${_chunk_BCEYT3RT_js__WEBPACK_IMPORTED_MODULE_0__.N}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`},3118:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>b,i:()=>i,s:()=>s4,w:()=>w,x:()=>x,y:()=>y});var s2,_home_runner_work_galaxy_galaxy_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9671),t=window,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),n=new WeakMap,o=__name(class{constructor(t3,e4,n5){if(this._$cssResult$=!0,n5!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t3,this.t=e4}get styleSheet(){let t3=this.o;const s5=this.t;if(e&&void 0===t3){const e4=void 0!==s5&&1===s5.length;e4&&(t3=n.get(s5)),void 0===t3&&((this.o=t3=new CSSStyleSheet).replaceSync(this.cssText),e4&&n.set(s5,t3))}return t3}toString(){return this.cssText}},"o"),r=__name(t3=>new o("string"==typeof t3?t3:t3+"",void 0,s),"r"),i=__name((t3,...e4)=>{const n5=1===t3.length?t3[0]:e4.reduce((e5,s5,n6)=>e5+(t4=>{if(!0===t4._$cssResult$)return t4.cssText;if("number"==typeof t4)return t4;throw Error("Value passed to 'css' function must be a 'css' function result: "+t4+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s5)+t3[n6+1],t3[0]);return new o(n5,t3,s)},"i"),S=__name((s5,n5)=>{e?s5.adoptedStyleSheets=n5.map(t3=>t3 instanceof CSSStyleSheet?t3:t3.styleSheet):n5.forEach(e4=>{const n6=document.createElement("style"),o5=t.litNonce;void 0!==o5&&n6.setAttribute("nonce",o5),n6.textContent=e4.cssText,s5.appendChild(n6)})},"S"),c=e?t3=>t3:t3=>t3 instanceof CSSStyleSheet?(t4=>{let e4="";for(const s5 of t4.cssRules)e4+=s5.cssText;return r(e4)})(t3):t3,e2=window,r2=e2.trustedTypes,h=r2?r2.emptyScript:"",o2=e2.reactiveElementPolyfillSupport,n2={toAttribute(t3,i3){switch(i3){case Boolean:t3=t3?h:null;break;case Object:case Array:t3=null==t3?t3:JSON.stringify(t3)}return t3},fromAttribute(t3,i3){let s5=t3;switch(i3){case Boolean:s5=null!==t3;break;case Number:s5=null===t3?null:Number(t3);break;case Object:case Array:try{s5=JSON.parse(t3)}catch{s5=null}}return s5}},a=__name((t3,i3)=>i3!==t3&&(i3==i3||t3==t3),"a"),l={attribute:!0,type:String,converter:n2,reflect:!1,hasChanged:a},d=__name(class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t3){var i3;this.finalize(),(null!==(i3=this.h)&&void 0!==i3?i3:this.h=[]).push(t3)}static get observedAttributes(){this.finalize();const t3=[];return this.elementProperties.forEach((i3,s5)=>{const e4=this._$Ep(s5,i3);void 0!==e4&&(this._$Ev.set(e4,s5),t3.push(e4))}),t3}static createProperty(t3,i3=l){if(i3.state&&(i3.attribute=!1),this.finalize(),this.elementProperties.set(t3,i3),!i3.noAccessor&&!this.prototype.hasOwnProperty(t3)){const s5="symbol"==typeof t3?Symbol():"__"+t3,e4=this.getPropertyDescriptor(t3,s5,i3);void 0!==e4&&Object.defineProperty(this.prototype,t3,e4)}}static getPropertyDescriptor(t3,i3,s5){return{get(){return this[i3]},set(e4){const r4=this[t3];this[i3]=e4,this.requestUpdate(t3,r4,s5)},configurable:!0,enumerable:!0}}static getPropertyOptions(t3){return this.elementProperties.get(t3)||l}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t3=Object.getPrototypeOf(this);if(t3.finalize(),void 0!==t3.h&&(this.h=[...t3.h]),this.elementProperties=new Map(t3.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t4=this.properties,i3=[...Object.getOwnPropertyNames(t4),...Object.getOwnPropertySymbols(t4)];for(const s5 of i3)this.createProperty(s5,t4[s5])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i3){const s5=[];if(Array.isArray(i3)){const e4=new Set(i3.flat(1/0).reverse());for(const i4 of e4)s5.unshift(c(i4))}else void 0!==i3&&s5.push(c(i3));return s5}static _$Ep(t3,i3){const s5=i3.attribute;return!1===s5?void 0:"string"==typeof s5?s5:"string"==typeof t3?t3.toLowerCase():void 0}u(){var t3;this._$E_=new Promise(t4=>this.enableUpdating=t4),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t3=this.constructor.h)||void 0===t3||t3.forEach(t4=>t4(this))}addController(t3){var i3,s5;(null!==(i3=this._$ES)&&void 0!==i3?i3:this._$ES=[]).push(t3),void 0!==this.renderRoot&&this.isConnected&&(null===(s5=t3.hostConnected)||void 0===s5||s5.call(t3))}removeController(t3){var i3;null===(i3=this._$ES)||void 0===i3||i3.splice(this._$ES.indexOf(t3)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t3,i3)=>{this.hasOwnProperty(i3)&&(this._$Ei.set(i3,this[i3]),delete this[i3])})}createRenderRoot(){var t3;const s5=null!==(t3=this.shadowRoot)&&void 0!==t3?t3:this.attachShadow(this.constructor.shadowRootOptions);return S(s5,this.constructor.elementStyles),s5}connectedCallback(){var t3;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t3=this._$ES)||void 0===t3||t3.forEach(t4=>{var i3;return null===(i3=t4.hostConnected)||void 0===i3?void 0:i3.call(t4)})}enableUpdating(t3){}disconnectedCallback(){var t3;null===(t3=this._$ES)||void 0===t3||t3.forEach(t4=>{var i3;return null===(i3=t4.hostDisconnected)||void 0===i3?void 0:i3.call(t4)})}attributeChangedCallback(t3,i3,s5){this._$AK(t3,s5)}_$EO(t3,i3,s5=l){var e4;const r4=this.constructor._$Ep(t3,s5);if(void 0!==r4&&!0===s5.reflect){const h3=(void 0!==(null===(e4=s5.converter)||void 0===e4?void 0:e4.toAttribute)?s5.converter:n2).toAttribute(i3,s5.type);this._$El=t3,null==h3?this.removeAttribute(r4):this.setAttribute(r4,h3),this._$El=null}}_$AK(t3,i3){var s5;const e4=this.constructor,r4=e4._$Ev.get(t3);if(void 0!==r4&&this._$El!==r4){const t4=e4.getPropertyOptions(r4),h3="function"==typeof t4.converter?{fromAttribute:t4.converter}:void 0!==(null===(s5=t4.converter)||void 0===s5?void 0:s5.fromAttribute)?t4.converter:n2;this._$El=r4,this[r4]=h3.fromAttribute(i3,t4.type),this._$El=null}}requestUpdate(t3,i3,s5){let e4=!0;void 0!==t3&&(((s5=s5||this.constructor.getPropertyOptions(t3)).hasChanged||a)(this[t3],i3)?(this._$AL.has(t3)||this._$AL.set(t3,i3),!0===s5.reflect&&this._$El!==t3&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t3,s5))):e4=!1),!this.isUpdatePending&&e4&&(this._$E_=this._$Ej())}_$Ej(){var _this=this;return(0,_home_runner_work_galaxy_galaxy_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)(function*(){_this.isUpdatePending=!0;try{yield _this._$E_}catch(t4){Promise.reject(t4)}const t3=_this.scheduleUpdate();return null!=t3&&(yield t3),!_this.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t3;if(!this.isUpdatePending)return;this._$Ei&&(this._$Ei.forEach((t4,i4)=>this[i4]=t4),this._$Ei=void 0);let i3=!1;const s5=this._$AL;try{i3=this.shouldUpdate(s5),i3?(this.willUpdate(s5),null===(t3=this._$ES)||void 0===t3||t3.forEach(t4=>{var i4;return null===(i4=t4.hostUpdate)||void 0===i4?void 0:i4.call(t4)}),this.update(s5)):this._$Ek()}catch(t4){throw i3=!1,this._$Ek(),t4}i3&&this._$AE(s5)}willUpdate(t3){}_$AE(t3){var i3;null===(i3=this._$ES)||void 0===i3||i3.forEach(t4=>{var i4;return null===(i4=t4.hostUpdated)||void 0===i4?void 0:i4.call(t4)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t3)),this.updated(t3)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t3){return!0}update(t3){void 0!==this._$EC&&(this._$EC.forEach((t4,i3)=>this._$EO(i3,this[i3],t4)),this._$EC=void 0),this._$Ek()}updated(t3){}firstUpdated(t3){}},"d");d.finalized=!0,d.elementProperties=new Map,d.elementStyles=[],d.shadowRootOptions={mode:"open"},o2?.({ReactiveElement:d}),(null!==(s2=e2.reactiveElementVersions)&&void 0!==s2?s2:e2.reactiveElementVersions=[]).push("1.6.1");var t2,i2=window,s3=i2.trustedTypes,e3=s3?s3.createPolicy("lit-html",{createHTML:t3=>t3}):void 0,o3=`lit$${(Math.random()+"").slice(9)}$`,n3="?"+o3,l2=`<${n3}>`,h2=document,r3=__name((t3="")=>h2.createComment(t3),"r3"),d2=__name(t3=>null===t3||"object"!=typeof t3&&"function"!=typeof t3,"d2"),u=Array.isArray,c2=__name(t3=>u(t3)||"function"==typeof t3?.[Symbol.iterator],"c2"),v=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a2=/-->/g,f=/>/g,_=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),m=/'/g,p=/"/g,$=/^(?:script|style|textarea|title)$/i,g=__name(t3=>(i3,...s5)=>({_$litType$:t3,strings:i3,values:s5}),"g"),y=g(1),w=g(2),x=Symbol.for("lit-noChange"),b=Symbol.for("lit-nothing"),T=new WeakMap,A=h2.createTreeWalker(h2,129,null,!1),E=__name((t3,i3)=>{const s5=t3.length-1,n5=[];let h3,r4=2===i3?"<svg>":"",d3=v;for(let i4=0;i4<s5;i4++){const s6=t3[i4];let e4,u3,c3=-1,g2=0;for(;g2<s6.length&&(d3.lastIndex=g2,u3=d3.exec(s6),null!==u3);)g2=d3.lastIndex,d3===v?"!--"===u3[1]?d3=a2:void 0!==u3[1]?d3=f:void 0!==u3[2]?($.test(u3[2])&&(h3=RegExp("</"+u3[2],"g")),d3=_):void 0!==u3[3]&&(d3=_):d3===_?">"===u3[0]?(d3=h3??v,c3=-1):void 0===u3[1]?c3=-2:(c3=d3.lastIndex-u3[2].length,e4=u3[1],d3=void 0===u3[3]?_:'"'===u3[3]?p:m):d3===p||d3===m?d3=_:d3===a2||d3===f?d3=v:(d3=_,h3=void 0);const y2=d3===_&&t3[i4+1].startsWith("/>")?" ":"";r4+=d3===v?s6+l2:c3>=0?(n5.push(e4),s6.slice(0,c3)+"$lit$"+s6.slice(c3)+o3+y2):s6+o3+(-2===c3?(n5.push(void 0),i4):y2)}const u2=r4+(t3[s5]||"<?>")+(2===i3?"</svg>":"");if(!Array.isArray(t3)||!t3.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==e3?e3.createHTML(u2):u2,n5]},"E"),C=__name(class{constructor({strings:t3,_$litType$:i3},e4){let l4;this.parts=[];let h3=0,d3=0;const u2=t3.length-1,c3=this.parts,[v2,a3]=E(t3,i3);if(this.el=C.createElement(v2,e4),A.currentNode=this.el.content,2===i3){const t4=this.el.content,i4=t4.firstChild;i4.remove(),t4.append(...i4.childNodes)}for(;null!==(l4=A.nextNode())&&c3.length<u2;){if(1===l4.nodeType){if(l4.hasAttributes()){const t4=[];for(const i4 of l4.getAttributeNames())if(i4.endsWith("$lit$")||i4.startsWith(o3)){const s5=a3[d3++];if(t4.push(i4),void 0!==s5){const t5=l4.getAttribute(s5.toLowerCase()+"$lit$").split(o3),i5=/([.?@])?(.*)/.exec(s5);c3.push({type:1,index:h3,name:i5[2],strings:t5,ctor:"."===i5[1]?M:"?"===i5[1]?k:"@"===i5[1]?H:S2})}else c3.push({type:6,index:h3})}for(const i4 of t4)l4.removeAttribute(i4)}if($.test(l4.tagName)){const t4=l4.textContent.split(o3),i4=t4.length-1;if(i4>0){l4.textContent=s3?s3.emptyScript:"";for(let s5=0;s5<i4;s5++)l4.append(t4[s5],r3()),A.nextNode(),c3.push({type:2,index:++h3});l4.append(t4[i4],r3())}}}else if(8===l4.nodeType)if(l4.data===n3)c3.push({type:2,index:h3});else{let t4=-1;for(;-1!==(t4=l4.data.indexOf(o3,t4+1));)c3.push({type:7,index:h3}),t4+=o3.length-1}h3++}}static createElement(t3,i3){const s5=h2.createElement("template");return s5.innerHTML=t3,s5}},"C");function P(t3,i3,s5=t3,e4){var o5,n5,l4,h3;if(i3===x)return i3;let r4=void 0!==e4?null===(o5=s5._$Co)||void 0===o5?void 0:o5[e4]:s5._$Cl;const u2=d2(i3)?void 0:i3._$litDirective$;return r4?.constructor!==u2&&(null===(n5=r4?._$AO)||void 0===n5||n5.call(r4,!1),void 0===u2?r4=void 0:(r4=new u2(t3),r4._$AT(t3,s5,e4)),void 0!==e4?(null!==(l4=(h3=s5)._$Co)&&void 0!==l4?l4:h3._$Co=[])[e4]=r4:s5._$Cl=r4),void 0!==r4&&(i3=P(t3,r4._$AS(t3,i3.values),r4,e4)),i3}__name(P,"P");var V=__name(class{constructor(t3,i3){this.u=[],this._$AN=void 0,this._$AD=t3,this._$AM=i3}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t3){var i3;const{el:{content:s5},parts:e4}=this._$AD,o5=(null!==(i3=t3?.creationScope)&&void 0!==i3?i3:h2).importNode(s5,!0);A.currentNode=o5;let n5=A.nextNode(),l4=0,r4=0,d3=e4[0];for(;void 0!==d3;){if(l4===d3.index){let i4;2===d3.type?i4=new N(n5,n5.nextSibling,this,t3):1===d3.type?i4=new d3.ctor(n5,d3.name,d3.strings,this,t3):6===d3.type&&(i4=new I(n5,this,t3)),this.u.push(i4),d3=e4[++r4]}l4!==d3?.index&&(n5=A.nextNode(),l4++)}return o5}p(t3){let i3=0;for(const s5 of this.u)void 0!==s5&&(void 0!==s5.strings?(s5._$AI(t3,s5,i3),i3+=s5.strings.length-2):s5._$AI(t3[i3])),i3++}},"V"),N=__name(class{constructor(t3,i3,s5,e4){var o5;this.type=2,this._$AH=b,this._$AN=void 0,this._$AA=t3,this._$AB=i3,this._$AM=s5,this.options=e4,this._$Cm=null===(o5=e4?.isConnected)||void 0===o5||o5}get _$AU(){var t3,i3;return null!==(i3=null===(t3=this._$AM)||void 0===t3?void 0:t3._$AU)&&void 0!==i3?i3:this._$Cm}get parentNode(){let t3=this._$AA.parentNode;const i3=this._$AM;return void 0!==i3&&11===t3.nodeType&&(t3=i3.parentNode),t3}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t3,i3=this){t3=P(this,t3,i3),d2(t3)?t3===b||null==t3||""===t3?(this._$AH!==b&&this._$AR(),this._$AH=b):t3!==this._$AH&&t3!==x&&this.g(t3):void 0!==t3._$litType$?this.$(t3):void 0!==t3.nodeType?this.T(t3):c2(t3)?this.k(t3):this.g(t3)}O(t3,i3=this._$AB){return this._$AA.parentNode.insertBefore(t3,i3)}T(t3){this._$AH!==t3&&(this._$AR(),this._$AH=this.O(t3))}g(t3){this._$AH!==b&&d2(this._$AH)?this._$AA.nextSibling.data=t3:this.T(h2.createTextNode(t3)),this._$AH=t3}$(t3){var i3;const{values:s5,_$litType$:e4}=t3,o5="number"==typeof e4?this._$AC(t3):(void 0===e4.el&&(e4.el=C.createElement(e4.h,this.options)),e4);if((null===(i3=this._$AH)||void 0===i3?void 0:i3._$AD)===o5)this._$AH.p(s5);else{const t4=new V(o5,this),i4=t4.v(this.options);t4.p(s5),this.T(i4),this._$AH=t4}}_$AC(t3){let i3=T.get(t3.strings);return void 0===i3&&T.set(t3.strings,i3=new C(t3)),i3}k(t3){u(this._$AH)||(this._$AH=[],this._$AR());const i3=this._$AH;let s5,e4=0;for(const o5 of t3)e4===i3.length?i3.push(s5=new N(this.O(r3()),this.O(r3()),this,this.options)):s5=i3[e4],s5._$AI(o5),e4++;e4<i3.length&&(this._$AR(s5&&s5._$AB.nextSibling,e4),i3.length=e4)}_$AR(t3=this._$AA.nextSibling,i3){var s5;for(null===(s5=this._$AP)||void 0===s5||s5.call(this,!1,!0,i3);t3&&t3!==this._$AB;){const i4=t3.nextSibling;t3.remove(),t3=i4}}setConnected(t3){var i3;void 0===this._$AM&&(this._$Cm=t3,null===(i3=this._$AP)||void 0===i3||i3.call(this,t3))}},"N"),S2=__name(class{constructor(t3,i3,s5,e4,o5){this.type=1,this._$AH=b,this._$AN=void 0,this.element=t3,this.name=i3,this._$AM=e4,this.options=o5,s5.length>2||""!==s5[0]||""!==s5[1]?(this._$AH=Array(s5.length-1).fill(new String),this.strings=s5):this._$AH=b}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t3,i3=this,s5,e4){const o5=this.strings;let n5=!1;if(void 0===o5)t3=P(this,t3,i3,0),n5=!d2(t3)||t3!==this._$AH&&t3!==x,n5&&(this._$AH=t3);else{const e5=t3;let l4,h3;for(t3=o5[0],l4=0;l4<o5.length-1;l4++)h3=P(this,e5[s5+l4],i3,l4),h3===x&&(h3=this._$AH[l4]),n5||(n5=!d2(h3)||h3!==this._$AH[l4]),h3===b?t3=b:t3!==b&&(t3+=(h3??"")+o5[l4+1]),this._$AH[l4]=h3}n5&&!e4&&this.j(t3)}j(t3){t3===b?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t3??"")}},"S2"),M=__name(class extends S2{constructor(){super(...arguments),this.type=3}j(t3){this.element[this.name]=t3===b?void 0:t3}},"M"),R=s3?s3.emptyScript:"",k=__name(class extends S2{constructor(){super(...arguments),this.type=4}j(t3){t3&&t3!==b?this.element.setAttribute(this.name,R):this.element.removeAttribute(this.name)}},"k"),H=__name(class extends S2{constructor(t3,i3,s5,e4,o5){super(t3,i3,s5,e4,o5),this.type=5}_$AI(t3,i3=this){var s5;if((t3=null!==(s5=P(this,t3,i3,0))&&void 0!==s5?s5:b)===x)return;const e4=this._$AH,o5=t3===b&&e4!==b||t3.capture!==e4.capture||t3.once!==e4.once||t3.passive!==e4.passive,n5=t3!==b&&(e4===b||o5);o5&&this.element.removeEventListener(this.name,this,e4),n5&&this.element.addEventListener(this.name,this,t3),this._$AH=t3}handleEvent(t3){var i3,s5;"function"==typeof this._$AH?this._$AH.call(null!==(s5=null===(i3=this.options)||void 0===i3?void 0:i3.host)&&void 0!==s5?s5:this.element,t3):this._$AH.handleEvent(t3)}},"H"),I=__name(class{constructor(t3,i3,s5){this.element=t3,this.type=6,this._$AN=void 0,this._$AM=i3,this.options=s5}get _$AU(){return this._$AM._$AU}_$AI(t3){P(this,t3)}},"I"),z=i2.litHtmlPolyfillSupport;z?.(C,N),(null!==(t2=i2.litHtmlVersions)&&void 0!==t2?t2:i2.litHtmlVersions=[]).push("2.6.1");var l3,o4,Z=__name((t3,i3,s5)=>{var e4,o5;const n5=null!==(e4=s5?.renderBefore)&&void 0!==e4?e4:i3;let l4=n5._$litPart$;if(void 0===l4){const t4=null!==(o5=s5?.renderBefore)&&void 0!==o5?o5:null;n5._$litPart$=l4=new N(i3.insertBefore(r3(),t4),t4,void 0,s5??{})}return l4._$AI(t3),l4},"Z"),s4=__name(class extends d{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t3,e4;const i3=super.createRenderRoot();return null!==(t3=(e4=this.renderOptions).renderBefore)&&void 0!==t3||(e4.renderBefore=i3.firstChild),i3}update(t3){const i3=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t3),this._$Dt=Z(i3,this.renderRoot,this.renderOptions)}connectedCallback(){var t3;super.connectedCallback(),null===(t3=this._$Dt)||void 0===t3||t3.setConnected(!0)}disconnectedCallback(){var t3;super.disconnectedCallback(),null===(t3=this._$Dt)||void 0===t3||t3.setConnected(!1)}render(){return x}},"s4");s4.finalized=!0,s4._$litElement$=!0,null===(l3=globalThis.litElementHydrateSupport)||void 0===l3||l3.call(globalThis,{LitElement:s4});var n4=globalThis.litElementPolyfillSupport;n4?.({LitElement:s4}),(null!==(o4=globalThis.litElementVersions)&&void 0!==o4?o4:globalThis.litElementVersions=[]).push("3.2.0")},161:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>library_system_default});var icons={caret:'\n    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="6 9 12 15 18 9"></polyline>\n    </svg>\n  ',check:'\n    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n        <g stroke="currentColor" stroke-width="2">\n          <g transform="translate(3.428571, 3.428571)">\n            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>\n            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>\n          </g>\n        </g>\n      </g>\n    </svg>\n  ',"chevron-down":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',"chevron-left":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>\n    </svg>\n  ',"chevron-right":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',eye:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">\n      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>\n      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>\n    </svg>\n  ',"eye-slash":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">\n      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>\n      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>\n      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>\n    </svg>\n  ',eyedropper:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">\n      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>\n    </svg>\n  ',"grip-vertical":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">\n      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>\n    </svg>\n  ',indeterminate:'\n    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n        <g stroke="currentColor" stroke-width="2">\n          <g transform="translate(2.285714, 6.857143)">\n            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>\n          </g>\n        </g>\n      </g>\n    </svg>\n  ',"person-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">\n      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>\n    </svg>\n  ',"play-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">\n      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>\n    </svg>\n  ',"pause-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">\n      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>\n    </svg>\n  ',radio:'\n    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g fill="currentColor">\n          <circle cx="8" cy="8" r="3.42857143"></circle>\n        </g>\n      </g>\n    </svg>\n  ',"star-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">\n      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>\n    </svg>\n  ',"x-lg":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">\n      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>\n    </svg>\n  ',"x-circle-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">\n      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>\n    </svg>\n  '},library_system_default={name:"system",resolver:name=>name in icons?`data:image/svg+xml,${encodeURIComponent(icons[name])}`:""}},3407:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>i,n:()=>n});var _chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3118),e=Symbol.for(""),l=__name(t=>{if(t?.r===e)return t?._$litStatic$},"l"),i=__name((t,...r)=>({_$litStatic$:r.reduce((r2,e2,l2)=>r2+(t2=>{if(void 0!==t2._$litStatic$)return t2._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t2}. Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security.`)})(e2)+t[l2+1],t[0]),r:e}),"i"),s=new Map,a=__name(t=>(r,...e2)=>{const o=e2.length;let i2,a2;const n2=[],u2=[];let c,$=0,f=!1;for(;$<o;){for(c=r[$];$<o&&(a2=e2[$],void 0!==(i2=l(a2)));)c+=i2+r[++$],f=!0;u2.push(a2),n2.push(c),$++}if($===o&&n2.push(r[o]),f){const t2=n2.join("$$lit$$");void 0===(r=s.get(t2))&&(n2.raw=n2,s.set(t2,r=n2)),e2=u2}return t(r,...e2)},"a"),n=a(_chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_0__.y);a(_chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_0__.w)},1916:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";var _chunk_UL4X2GHI_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6362),_chunk_IJY6XTKC_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3407),_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5013),_chunk_ORW72H2K_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9352),_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2019),_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9056),SlIconButton=__name(class extends _chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.P{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(event){this.disabled&&(event.preventDefault(),event.stopPropagation())}click(){this.button.click()}focus(options){this.button.focus(options)}blur(){this.button.blur()}render(){const isLink=!!this.href,tag=isLink?_chunk_IJY6XTKC_js__WEBPACK_IMPORTED_MODULE_1__.i`a`:_chunk_IJY6XTKC_js__WEBPACK_IMPORTED_MODULE_1__.i`button`;return _chunk_IJY6XTKC_js__WEBPACK_IMPORTED_MODULE_1__.n`
      <${tag}
        part="base"
        class=${(0,_chunk_ORW72H2K_js__WEBPACK_IMPORTED_MODULE_3__.o)({"icon-button":!0,"icon-button--disabled":!isLink&&this.disabled,"icon-button--focused":this.hasFocus})}
        ?disabled=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(isLink?void 0:this.disabled)}
        type=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(isLink?void 0:"button")}
        href=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(isLink?this.href:void 0)}
        target=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(isLink?this.target:void 0)}
        download=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(isLink?this.download:void 0)}
        rel=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(isLink&&this.target?"noreferrer noopener":void 0)}
        role=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(isLink?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        aria-label="${this.label}"
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <sl-icon
          class="icon-button__icon"
          name=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(this.name)}
          library=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(this.library)}
          src=${(0,_chunk_V47DPYLL_js__WEBPACK_IMPORTED_MODULE_2__.l)(this.src)}
          aria-hidden="true"
        ></sl-icon>
      </${tag}>
    `}},"SlIconButton");SlIconButton.styles=_chunk_UL4X2GHI_js__WEBPACK_IMPORTED_MODULE_0__.Z,(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.i)(".icon-button")],SlIconButton.prototype,"button",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.t)()],SlIconButton.prototype,"hasFocus",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e2)()],SlIconButton.prototype,"name",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e2)()],SlIconButton.prototype,"library",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e2)()],SlIconButton.prototype,"src",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e2)()],SlIconButton.prototype,"href",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e2)()],SlIconButton.prototype,"target",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e2)()],SlIconButton.prototype,"download",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e2)()],SlIconButton.prototype,"label",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e2)({type:Boolean,reflect:!0})],SlIconButton.prototype,"disabled",2),SlIconButton=(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_5__.u2)([(0,_chunk_ROLL4627_js__WEBPACK_IMPORTED_MODULE_4__.e)("sl-icon-button")],SlIconButton)},1746:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>registerTranslation,V:()=>LocalizeController});var fallback,connectedElements=new Set,documentElementObserver=new MutationObserver(update),translations=new Map,documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language;function registerTranslation(...translation){translation.map(t=>{const code=t.$code.toLowerCase();translations.has(code)?translations.set(code,Object.assign(Object.assign({},translations.get(code)),t)):translations.set(code,t),fallback||(fallback=t)}),update()}function update(){documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,[...connectedElements.keys()].map(el=>{"function"==typeof el.requestUpdate&&el.requestUpdate()})}documentElementObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]}),__name(registerTranslation,"registerTranslation"),__name(update,"update");var LocalizeController=__name(class{constructor(host){this.host=host,this.host.addController(this)}hostConnected(){connectedElements.add(this.host)}hostDisconnected(){connectedElements.delete(this.host)}dir(){return`${this.host.dir||documentDirection}`.toLowerCase()}lang(){return`${this.host.lang||documentLanguage}`.toLowerCase()}getTranslationData(lang){var _a,_b;const locale=new Intl.Locale(lang),language=locale?.language.toLowerCase(),region=null!==(_b=null===(_a=locale?.region)||void 0===_a?void 0:_a.toLowerCase())&&void 0!==_b?_b:"";return{locale,language,region,primary:translations.get(`${language}-${region}`),secondary:translations.get(language)}}exists(key,options){var _a;const{primary,secondary}=this.getTranslationData(null!==(_a=options.lang)&&void 0!==_a?_a:this.lang());return options=Object.assign({includeFallback:!1},options),!!(primary&&primary[key]||secondary&&secondary[key]||options.includeFallback&&fallback&&fallback[key])}term(key,...args){const{primary,secondary}=this.getTranslationData(this.lang());let term;if(primary&&primary[key])term=primary[key];else if(secondary&&secondary[key])term=secondary[key];else{if(!fallback||!fallback[key])return console.error(`No translation found for: ${String(key)}`),String(key);term=fallback[key]}return"function"==typeof term?term(...args):term}date(dateToFormat,options){return dateToFormat=new Date(dateToFormat),new Intl.DateTimeFormat(this.lang(),options).format(dateToFormat)}number(numberToFormat,options){return numberToFormat=Number(numberToFormat),isNaN(numberToFormat)?"":new Intl.NumberFormat(this.lang(),options).format(numberToFormat)}relativeTime(value,unit,options){return new Intl.RelativeTimeFormat(this.lang(),options).format(value,unit)}},"LocalizeController")},9056:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{EZ:()=>__spreadProps2,S0:()=>__objRest,ih:()=>__spreadValues2,u2:()=>__decorateClass});var __defProp2=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=__name((obj,key,value)=>key in obj?__defProp2(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,"__defNormalProp"),__spreadValues2=__name((a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},"__spreadValues"),__spreadProps2=__name((a,b)=>__defProps(a,__getOwnPropDescs(b)),"__spreadProps"),__objRest=__name((source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(null!=source&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target},"__objRest"),__decorateClass=__name((decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp2(target,key,result),result},"__decorateClass")},7917:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>LocalizeController2});var _chunk_L2X53Y67_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1746),LocalizeController2=__name(class extends _chunk_L2X53Y67_js__WEBPACK_IMPORTED_MODULE_0__.V{},"LocalizeController2");(0,_chunk_L2X53Y67_js__WEBPACK_IMPORTED_MODULE_0__.P)({$code:"en",$name:"English",$dir:"ltr",carousel:"Carousel",clearEntry:"Clear entry",close:"Close",copy:"Copy",currentValue:"Current value",goToSlide:(slide,count)=>`Go to slide ${slide} of ${count}`,hidePassword:"Hide password",loading:"Loading",nextSlide:"Next slide",numOptionsSelected:num=>0===num?"No options selected":1===num?"1 option selected":`${num} options selected`,previousSlide:"Previous slide",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",slideNum:slide=>`Slide ${slide}`,toggleColorFormat:"Toggle color format"})},6:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O8:()=>getAnimation,jx:()=>setDefaultAnimation}),__webpack_require__(9056);var defaultAnimationRegistry=new Map,customAnimationRegistry=new WeakMap;function ensureAnimation(animation){return animation??{keyframes:[],options:{duration:0}}}function getLogicalAnimation(animation,dir){return"rtl"===dir.toLowerCase()?{keyframes:animation.rtlKeyframes||animation.keyframes,options:animation.options}:animation}function setDefaultAnimation(animationName,animation){defaultAnimationRegistry.set(animationName,ensureAnimation(animation))}function getAnimation(el,animationName,options){const customAnimation=customAnimationRegistry.get(el);if(customAnimation?.[animationName])return getLogicalAnimation(customAnimation[animationName],options.dir);const defaultAnimation=defaultAnimationRegistry.get(animationName);return defaultAnimation?getLogicalAnimation(defaultAnimation,options.dir):{keyframes:[],options:{duration:0}}}__name(ensureAnimation,"ensureAnimation"),__name(getLogicalAnimation,"getLogicalAnimation"),__name(setDefaultAnimation,"setDefaultAnimation"),__name(function setAnimation(el,animationName,animation){customAnimationRegistry.set(el,__spreadProps(__spreadValues({},customAnimationRegistry.get(el)),{[animationName]:ensureAnimation(animation)}))},"setAnimation"),__name(getAnimation,"getAnimation")},9352:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>o});var _chunk_UP75L23G_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1171),_chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3118),o=(0,_chunk_UP75L23G_js__WEBPACK_IMPORTED_MODULE_0__.e)(class extends _chunk_UP75L23G_js__WEBPACK_IMPORTED_MODULE_0__.i{constructor(t2){var i2;if(super(t2),t2.type!==_chunk_UP75L23G_js__WEBPACK_IMPORTED_MODULE_0__.t.ATTRIBUTE||"class"!==t2.name||(null===(i2=t2.strings)||void 0===i2?void 0:i2.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t2){return" "+Object.keys(t2).filter(i2=>t2[i2]).join(" ")+" "}update(i2,[s]){var r,o2;if(void 0===this.nt){this.nt=new Set,void 0!==i2.strings&&(this.st=new Set(i2.strings.join(" ").split(/\s/).filter(t2=>""!==t2)));for(const t2 in s)s[t2]&&(null===(r=this.st)||void 0===r||!r.has(t2))&&this.nt.add(t2);return this.render(s)}const e2=i2.element.classList;this.nt.forEach(t2=>{t2 in s||(e2.remove(t2),this.nt.delete(t2))});for(const t2 in s){const i3=!!s[t2];i3===this.nt.has(t2)||null!==(o2=this.st)&&void 0!==o2&&o2.has(t2)||(i3?(e2.add(t2),this.nt.add(t2)):(e2.remove(t2),this.nt.delete(t2)))}return _chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_1__.x}})},7259:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>library_default_default});var _chunk_3Y6SB6QS_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7082),library_default_default={name:"default",resolver:name=>(0,_chunk_3Y6SB6QS_js__WEBPACK_IMPORTED_MODULE_0__.b)(`assets/icons/${name}.svg`)}},7922:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";function getOffset(element,parent){return{top:Math.round(element.getBoundingClientRect().top-parent.getBoundingClientRect().top),left:Math.round(element.getBoundingClientRect().left-parent.getBoundingClientRect().left)}}__webpack_require__.d(__webpack_exports__,{M4:()=>lockBodyScrolling,gG:()=>unlockBodyScrolling,zT:()=>scrollIntoView}),__name(getOffset,"getOffset");var locks=new Set;function getScrollbarWidth(){const documentWidth=document.documentElement.clientWidth;return Math.abs(window.innerWidth-documentWidth)}function lockBodyScrolling(lockingEl){if(locks.add(lockingEl),!document.body.classList.contains("sl-scroll-lock")){const scrollbarWidth=getScrollbarWidth();document.body.classList.add("sl-scroll-lock"),document.body.style.setProperty("--sl-scroll-lock-size",`${scrollbarWidth}px`)}}function unlockBodyScrolling(lockingEl){locks.delete(lockingEl),0===locks.size&&(document.body.classList.remove("sl-scroll-lock"),document.body.style.removeProperty("--sl-scroll-lock-size"))}function scrollIntoView(element,container,direction="vertical",behavior="smooth"){const offset=getOffset(element,container),offsetTop=offset.top+container.scrollTop,offsetLeft=offset.left+container.scrollLeft,maxX=container.scrollLeft+container.offsetWidth,minY=container.scrollTop,maxY=container.scrollTop+container.offsetHeight;("horizontal"===direction||"both"===direction)&&(offsetLeft<container.scrollLeft?container.scrollTo({left:offsetLeft,behavior}):offsetLeft+element.clientWidth>maxX&&container.scrollTo({left:offsetLeft-container.offsetWidth+element.clientWidth,behavior})),("vertical"===direction||"both"===direction)&&(offsetTop<minY?container.scrollTo({top:offsetTop,behavior}):offsetTop+element.clientHeight>maxY&&container.scrollTo({top:offsetTop-container.offsetHeight+element.clientHeight,behavior}))}__name(getScrollbarWidth,"getScrollbarWidth"),__name(lockBodyScrolling,"lockBodyScrolling"),__name(unlockBodyScrolling,"unlockBodyScrolling"),__name(scrollIntoView,"scrollIntoView")},2019:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>ShoelaceElement,e:()=>e,e2:()=>e2,i:()=>i2,t:()=>t});var _chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3118),_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9056),e=__name(e6=>n2=>{return"function"==typeof n2?(n3=n2,customElements.define(e6,n3),n3):((e7,n3)=>{const{kind:t2,elements:s2}=n3;return{kind:t2,elements:s2,finisher(n4){customElements.define(e7,n4)}}})(e6,n2);var n3},"e"),i=__name((i3,e6)=>"method"===e6.kind&&e6.descriptor&&!("value"in e6.descriptor)?(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.EZ)((0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.ih)({},e6),{finisher(n2){n2.createProperty(e6.key,i3)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e6.key,initializer(){"function"==typeof e6.initializer&&(this[e6.key]=e6.initializer.call(this))},finisher(n2){n2.createProperty(e6.key,i3)}},"i");function e2(e6){return(n2,t2)=>void 0!==t2?void n2.constructor.createProperty(t2,e6):i(e6,n2)}function t(t2){return e2((0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.EZ)((0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.ih)({},t2),{state:!0}))}__name(e2,"e2"),__name(t,"t");var o=__name(({finisher:e6,descriptor:t2})=>(o2,n2)=>{var r;if(void 0===n2){const n3=null!==(r=o2.originalKey)&&void 0!==r?r:o2.key,i3=null!=t2?{kind:"method",placement:"prototype",key:n3,descriptor:t2(o2.key)}:(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.EZ)((0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.ih)({},o2),{key:n3});return null!=e6&&(i3.finisher=function(t3){e6(t3,n3)}),i3}{const r2=o2.constructor;void 0!==t2&&Object.defineProperty(o2,n2,t2(n2)),e6?.(r2,n2)}},"o");function i2(i3,n2){return o({descriptor:o2=>{const t2={get(){var o3,n3;return null!==(n3=null===(o3=this.renderRoot)||void 0===o3?void 0:o3.querySelector(i3))&&void 0!==n3?n3:null},enumerable:!0,configurable:!0};if(n2){const n3="symbol"==typeof o2?Symbol():"__"+o2;t2.get=function(){var o3,t3;return void 0===this[n3]&&(this[n3]=null!==(t3=null===(o3=this.renderRoot)||void 0===o3?void 0:o3.querySelector(i3))&&void 0!==t3?t3:null),this[n3]}}return t2}})}__name(function e3(e6){return o({finisher:(r,t2)=>{Object.assign(r.prototype[t2],e6)}})},"e3"),__name(i2,"i2"),__name(function e4(e6){return o({descriptor:r=>({get(){var _this=this;return _asyncToGenerator(function*(){var r2;return yield _this.updateComplete,null===(r2=_this.renderRoot)||void 0===r2?void 0:r2.querySelector(e6)})()},enumerable:!0,configurable:!0})})},"e4"),window;var ShoelaceElement=__name(class extends _chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_0__.s{emit(name,options){const event=new CustomEvent(name,(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.ih)({bubbles:!0,cancelable:!1,composed:!0,detail:{}},options));return this.dispatchEvent(event),event}},"ShoelaceElement");(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.u2)([e2()],ShoelaceElement.prototype,"dir",2),(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_1__.u2)([e2()],ShoelaceElement.prototype,"lang",2)},7615:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>spinner_styles_default});var _chunk_BCEYT3RT_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3390),spinner_styles_default=__webpack_require__(3118).i`
  ${_chunk_BCEYT3RT_js__WEBPACK_IMPORTED_MODULE_0__.N}

  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
      stroke-dasharray: 0.01em, 2.75em;
    }

    50% {
      transform: rotate(450deg);
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      transform: rotate(1080deg);
      stroke-dasharray: 0.01em, 2.75em;
    }
  }
`},6362:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>icon_button_styles_default});var _chunk_BCEYT3RT_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3390),icon_button_styles_default=__webpack_require__(3118).i`
  ${_chunk_BCEYT3RT_js__WEBPACK_IMPORTED_MODULE_0__.N}

  :host {
    display: inline-block;
    color: var(--sl-color-neutral-600);
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: inherit;
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-x-fast) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus-visible:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .icon-button__icon {
    pointer-events: none;
  }
`},1171:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>e,i:()=>i,t:()=>t});var t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=__name(t2=>(...e2)=>({_$litDirective$:t2,values:e2}),"e"),i=__name(class{constructor(t2){}get _$AU(){return this._$AM._$AU}_$AT(t2,e2,i2){this._$Ct=t2,this._$AM=e2,this._$Ci=i2}_$AS(t2,e2){return this.update(t2,e2)}update(t2,e2){return this.render(...e2)}},"i")},5013:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>l});var _chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3118),l=__name(l2=>l2??_chunk_DUT32TWM_js__WEBPACK_IMPORTED_MODULE_0__.b,"l")},5503:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E4:()=>watchIcon,Sw:()=>unwatchIcon,Tb:()=>getIconLibrary});var _chunk_P7ZG6EMR_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7259),_chunk_I33L3NO6_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(161),registry=[_chunk_P7ZG6EMR_js__WEBPACK_IMPORTED_MODULE_0__.Z,_chunk_I33L3NO6_js__WEBPACK_IMPORTED_MODULE_1__.J],watchedIcons=[];function watchIcon(icon){watchedIcons.push(icon)}function unwatchIcon(icon){watchedIcons=watchedIcons.filter(el=>el!==icon)}function getIconLibrary(name){return registry.find(lib=>lib.name===name)}function unregisterIconLibrary(name){registry=registry.filter(lib=>lib.name!==name)}__name(watchIcon,"watchIcon"),__name(unwatchIcon,"unwatchIcon"),__name(getIconLibrary,"getIconLibrary"),__name(function registerIconLibrary(name,options){unregisterIconLibrary(name),registry.push({name,resolver:options.resolver,mutator:options.mutator}),watchedIcons.forEach(icon=>{icon.library===name&&icon.setIcon()})},"registerIconLibrary"),__name(unregisterIconLibrary,"unregisterIconLibrary")},6596:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>watch});var _chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9056);function watch(propertyName,options){const resolvedOptions=(0,_chunk_LKA3TPUC_js__WEBPACK_IMPORTED_MODULE_0__.ih)({waitUntilFirstUpdate:!1},options);return(proto,decoratedFnName)=>{const{update}=proto,watchedProperties=Array.isArray(propertyName)?propertyName:[propertyName];proto.update=function(changedProps){watchedProperties.forEach(property=>{const key=property;if(changedProps.has(key)){const oldValue=changedProps.get(key),newValue=this[key];oldValue!==newValue&&(!resolvedOptions.waitUntilFirstUpdate||this.hasUpdated)&&this[decoratedFnName](oldValue,newValue)}}),update.call(this,changedProps)}}}__name(watch,"watch")},1295:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var asyncToGenerator=__webpack_require__(9671),chunk_OAQT3AUQ=__webpack_require__(6),chunk_B4BZKR24=__webpack_require__(2475),chunk_65AZ2BGN=__webpack_require__(7367),chunk_3IYPB6RR=__webpack_require__(926),chunk_MQ6XKY3Z=__webpack_require__(7917),chunk_VQ3XOPCT=__webpack_require__(6596),chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),alert_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    display: contents;

    /* For better DX, we'll reset the margin here so the base part can inherit it */
    margin: 0;
  }

  .alert {
    position: relative;
    display: flex;
    align-items: stretch;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-top-width: calc(var(--sl-panel-border-width) * 3);
    border-radius: var(--sl-border-radius-medium);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-normal);
    line-height: 1.6;
    color: var(--sl-color-neutral-700);
    margin: inherit;
  }

  .alert:not(.alert--has-icon) .alert__icon,
  .alert:not(.alert--closable) .alert__close-button {
    display: none;
  }

  .alert__icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-large);
    padding-inline-start: var(--sl-spacing-large);
  }

  .alert--primary {
    border-top-color: var(--sl-color-primary-600);
  }

  .alert--primary .alert__icon {
    color: var(--sl-color-primary-600);
  }

  .alert--success {
    border-top-color: var(--sl-color-success-600);
  }

  .alert--success .alert__icon {
    color: var(--sl-color-success-600);
  }

  .alert--neutral {
    border-top-color: var(--sl-color-neutral-600);
  }

  .alert--neutral .alert__icon {
    color: var(--sl-color-neutral-600);
  }

  .alert--warning {
    border-top-color: var(--sl-color-warning-600);
  }

  .alert--warning .alert__icon {
    color: var(--sl-color-warning-600);
  }

  .alert--danger {
    border-top-color: var(--sl-color-danger-600);
  }

  .alert--danger .alert__icon {
    color: var(--sl-color-danger-600);
  }

  .alert__message {
    flex: 1 1 auto;
    display: block;
    padding: var(--sl-spacing-large);
    overflow: hidden;
  }

  .alert__close-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
    padding-inline-end: var(--sl-spacing-medium);
  }
`,chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_LKA3TPUC=__webpack_require__(9056),toastStack=Object.assign(document.createElement("div"),{className:"sl-toast-stack"}),SlAlert=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.hasSlotController=new chunk_3IYPB6RR.r(this,"icon","suffix"),this.localize=new chunk_MQ6XKY3Z.V(this),this.open=!1,this.closable=!1,this.variant="primary",this.duration=1/0}firstUpdated(){this.base.hidden=!this.open}restartAutoHide(){clearTimeout(this.autoHideTimeout),this.open&&this.duration<1/0&&(this.autoHideTimeout=window.setTimeout(()=>this.hide(),this.duration))}handleCloseClick(){this.hide()}handleMouseMove(){this.restartAutoHide()}handleOpenChange(){var _this=this;return(0,asyncToGenerator.Z)(function*(){if(_this.open){_this.emit("sl-show"),_this.duration<1/0&&_this.restartAutoHide(),yield(0,chunk_65AZ2BGN.U_)(_this.base),_this.base.hidden=!1;const{keyframes,options}=(0,chunk_OAQT3AUQ.O8)(_this,"alert.show",{dir:_this.localize.dir()});yield(0,chunk_65AZ2BGN.nv)(_this.base,keyframes,options),_this.emit("sl-after-show")}else{_this.emit("sl-hide"),clearTimeout(_this.autoHideTimeout),yield(0,chunk_65AZ2BGN.U_)(_this.base);const{keyframes,options}=(0,chunk_OAQT3AUQ.O8)(_this,"alert.hide",{dir:_this.localize.dir()});yield(0,chunk_65AZ2BGN.nv)(_this.base,keyframes,options),_this.base.hidden=!0,_this.emit("sl-after-hide")}})()}handleDurationChange(){this.restartAutoHide()}show(){var _this2=this;return(0,asyncToGenerator.Z)(function*(){if(!_this2.open)return _this2.open=!0,(0,chunk_B4BZKR24.m)(_this2,"sl-after-show")})()}hide(){var _this3=this;return(0,asyncToGenerator.Z)(function*(){if(_this3.open)return _this3.open=!1,(0,chunk_B4BZKR24.m)(_this3,"sl-after-hide")})()}toast(){var _this4=this;return(0,asyncToGenerator.Z)(function*(){return new Promise(resolve=>{null===toastStack.parentElement&&document.body.append(toastStack),toastStack.appendChild(_this4),requestAnimationFrame(()=>{_this4.show()}),_this4.addEventListener("sl-after-hide",()=>{toastStack.removeChild(_this4),resolve(),null===toastStack.querySelector("sl-alert")&&toastStack.remove()},{once:!0})})})()}render(){return chunk_DUT32TWM.y`
      <div
        part="base"
        class=${(0,chunk_ORW72H2K.o)({alert:!0,"alert--open":this.open,"alert--closable":this.closable,"alert--has-icon":this.hasSlotController.test("icon"),"alert--primary":"primary"===this.variant,"alert--success":"success"===this.variant,"alert--neutral":"neutral"===this.variant,"alert--warning":"warning"===this.variant,"alert--danger":"danger"===this.variant})}
        role="alert"
        aria-hidden=${this.open?"false":"true"}
        @mousemove=${this.handleMouseMove}
      >
        <slot name="icon" part="icon" class="alert__icon"></slot>

        <slot part="message" class="alert__message" aria-live="polite"></slot>

        ${this.closable?chunk_DUT32TWM.y`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                class="alert__close-button"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                @click=${this.handleCloseClick}
              ></sl-icon-button>
            `:""}
      </div>
    `}},"SlAlert");SlAlert.styles=alert_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)('[part~="base"]')],SlAlert.prototype,"base",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlAlert.prototype,"open",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlAlert.prototype,"closable",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlAlert.prototype,"variant",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Number})],SlAlert.prototype,"duration",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("open",{waitUntilFirstUpdate:!0})],SlAlert.prototype,"handleOpenChange",1),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("duration")],SlAlert.prototype,"handleDurationChange",1),SlAlert=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-alert")],SlAlert),(0,chunk_OAQT3AUQ.jx)("alert.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}}),(0,chunk_OAQT3AUQ.jx)("alert.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}}),__webpack_require__(1916),__webpack_require__(6362),__webpack_require__(3407),__webpack_require__(5013),__webpack_require__(1746),__webpack_require__(9573),__webpack_require__(5503),__webpack_require__(7259),__webpack_require__(161),__webpack_require__(5793),__webpack_require__(1171)},6396:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),avatar_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    display: inline-block;

    --size: 3rem;
  }

  .avatar {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    width: var(--size);
    height: var(--size);
    background-color: var(--sl-color-neutral-400);
    font-family: var(--sl-font-sans);
    font-size: calc(var(--size) * 0.5);
    font-weight: var(--sl-font-weight-normal);
    color: var(--sl-color-neutral-0);
    user-select: none;
    vertical-align: middle;
  }

  .avatar--circle,
  .avatar--circle .avatar__image {
    border-radius: var(--sl-border-radius-circle);
  }

  .avatar--rounded,
  .avatar--rounded .avatar__image {
    border-radius: var(--sl-border-radius-medium);
  }

  .avatar--square {
    border-radius: 0;
  }

  .avatar__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .avatar__initials {
    line-height: 1;
    text-transform: uppercase;
  }

  .avatar__image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    overflow: hidden;
  }
`,chunk_VQ3XOPCT=__webpack_require__(6596),chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_LKA3TPUC=__webpack_require__(9056),SlAvatar=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.hasError=!1,this.image="",this.label="",this.initials="",this.loading="eager",this.shape="circle"}handleImageChange(){this.hasError=!1}render(){const avatarWithImage=chunk_DUT32TWM.y`
      <img
        part="image"
        class="avatar__image"
        src="${this.image}"
        loading="${this.loading}"
        alt=""
        @error="${()=>this.hasError=!0}"
      />
    `;let avatarWithoutImage=chunk_DUT32TWM.y``;return avatarWithoutImage=this.initials?chunk_DUT32TWM.y`<div part="initials" class="avatar__initials">${this.initials}</div>`:chunk_DUT32TWM.y`
        <slot name="icon" part="icon" class="avatar__icon" aria-hidden="true">
          <sl-icon name="person-fill" library="system"></sl-icon>
        </slot>
      `,chunk_DUT32TWM.y`
      <div
        part="base"
        class=${(0,chunk_ORW72H2K.o)({avatar:!0,"avatar--circle":"circle"===this.shape,"avatar--rounded":"rounded"===this.shape,"avatar--square":"square"===this.shape})}
        role="img"
        aria-label=${this.label}
      >
        ${this.image&&!this.hasError?avatarWithImage:avatarWithoutImage}
      </div>
    `}},"SlAvatar");SlAvatar.styles=avatar_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.t)()],SlAvatar.prototype,"hasError",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlAvatar.prototype,"image",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlAvatar.prototype,"label",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlAvatar.prototype,"initials",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlAvatar.prototype,"loading",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlAvatar.prototype,"shape",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("image")],SlAvatar.prototype,"handleImageChange",1),SlAvatar=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-avatar")],SlAvatar),__webpack_require__(9573),__webpack_require__(5503),__webpack_require__(7259),__webpack_require__(161),__webpack_require__(5793),__webpack_require__(1171)},6817:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),badge_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    display: inline-flex;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: max(12px, 0.75em);
    font-weight: var(--sl-font-weight-semibold);
    letter-spacing: var(--sl-letter-spacing-normal);
    line-height: 1;
    border-radius: var(--sl-border-radius-small);
    border: solid 1px var(--sl-color-neutral-0);
    white-space: nowrap;
    padding: 0.35em 0.6em;
    user-select: none;
    cursor: inherit;
  }

  /* Variant modifiers */
  .badge--primary {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--success {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--neutral {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--warning {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--danger {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /* Pill modifier */
  .badge--pill {
    border-radius: var(--sl-border-radius-pill);
  }

  /* Pulse modifier */
  .badge--pulse {
    animation: pulse 1.5s infinite;
  }

  .badge--pulse.badge--primary {
    --pulse-color: var(--sl-color-primary-600);
  }

  .badge--pulse.badge--success {
    --pulse-color: var(--sl-color-success-600);
  }

  .badge--pulse.badge--neutral {
    --pulse-color: var(--sl-color-neutral-600);
  }

  .badge--pulse.badge--warning {
    --pulse-color: var(--sl-color-warning-600);
  }

  .badge--pulse.badge--danger {
    --pulse-color: var(--sl-color-danger-600);
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--pulse-color);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }
`,chunk_LKA3TPUC=__webpack_require__(9056),SlBadge=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.variant="primary",this.pill=!1,this.pulse=!1}render(){return chunk_DUT32TWM.y`
      <slot
        part="base"
        class=${(0,chunk_ORW72H2K.o)({badge:!0,"badge--primary":"primary"===this.variant,"badge--success":"success"===this.variant,"badge--neutral":"neutral"===this.variant,"badge--warning":"warning"===this.variant,"badge--danger":"danger"===this.variant,"badge--pill":this.pill,"badge--pulse":this.pulse})}
        role="status"
      ></slot>
    `}},"SlBadge");SlBadge.styles=badge_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlBadge.prototype,"variant",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlBadge.prototype,"pill",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlBadge.prototype,"pulse",2),SlBadge=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-badge")],SlBadge),__webpack_require__(1171)},882:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var chunk_LKA3TPUC=__webpack_require__(9056),formCollections=new WeakMap,reportValidityOverloads=new WeakMap,userInteractedControls=new WeakSet,interactions=new WeakMap,FormControlController=__name(class{constructor(host,options){(this.host=host).addController(this),this.options=(0,chunk_LKA3TPUC.ih)({form:input=>{if(input.hasAttribute("form")&&""!==input.getAttribute("form")){const root=input.getRootNode(),formId=input.getAttribute("form");if(formId)return root.getElementById(formId)}return input.closest("form")},name:input=>input.name,value:input=>input.value,defaultValue:input=>input.defaultValue,disabled:input=>{var _a;return null!=(_a=input.disabled)&&_a},reportValidity:input=>"function"!=typeof input.reportValidity||input.reportValidity(),setValue:(input,value)=>input.value=value,assumeInteractionOn:["sl-input"]},options),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleFormReset=this.handleFormReset.bind(this),this.reportFormValidity=this.reportFormValidity.bind(this),this.handleInteraction=this.handleInteraction.bind(this)}hostConnected(){const form=this.options.form(this.host);form&&this.attachForm(form),interactions.set(this.host,[]),this.options.assumeInteractionOn.forEach(event=>{this.host.addEventListener(event,this.handleInteraction)})}hostDisconnected(){this.detachForm(),interactions.delete(this.host),this.options.assumeInteractionOn.forEach(event=>{this.host.removeEventListener(event,this.handleInteraction)})}hostUpdated(){const form=this.options.form(this.host);form||this.detachForm(),form&&this.form!==form&&(this.detachForm(),this.attachForm(form)),this.host.hasUpdated&&this.setValidity(this.host.validity.valid)}attachForm(form){form?(this.form=form,formCollections.has(this.form)?formCollections.get(this.form).add(this.host):formCollections.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)||(reportValidityOverloads.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity())):this.form=void 0}detachForm(){var _a;this.form&&(null==(_a=formCollections.get(this.form))||_a.delete(this.host),this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)&&(this.form.reportValidity=reportValidityOverloads.get(this.form),reportValidityOverloads.delete(this.form))),this.form=void 0}handleFormData(event){const disabled=this.options.disabled(this.host),name=this.options.name(this.host),value=this.options.value(this.host),isButton="sl-button"===this.host.tagName.toLowerCase();!disabled&&!isButton&&"string"==typeof name&&name.length>0&&typeof value<"u"&&(Array.isArray(value)?value.forEach(val=>{event.formData.append(name,val.toString())}):event.formData.append(name,value.toString()))}handleFormSubmit(event){var _a;const disabled=this.options.disabled(this.host),reportValidity=this.options.reportValidity;this.form&&!this.form.noValidate&&(null==(_a=formCollections.get(this.form))||_a.forEach(control=>{this.setUserInteracted(control,!0)})),this.form&&!this.form.noValidate&&!disabled&&!reportValidity(this.host)&&(event.preventDefault(),event.stopImmediatePropagation())}handleFormReset(){this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1),interactions.set(this.host,[])}handleInteraction(event){const emittedEvents=interactions.get(this.host);emittedEvents.includes(event.type)||emittedEvents.push(event.type),emittedEvents.length===this.options.assumeInteractionOn.length&&this.setUserInteracted(this.host,!0)}reportFormValidity(){if(this.form&&!this.form.noValidate){const elements=this.form.querySelectorAll("*");for(const element of elements)if("function"==typeof element.reportValidity&&!element.reportValidity())return!1}return!0}setUserInteracted(el,hasInteracted){hasInteracted?userInteractedControls.add(el):userInteractedControls.delete(el),el.requestUpdate()}doAction(type,submitter){if(this.form){const button=document.createElement("button");button.type=type,button.style.position="absolute",button.style.width="0",button.style.height="0",button.style.clipPath="inset(50%)",button.style.overflow="hidden",button.style.whiteSpace="nowrap",submitter&&(button.name=submitter.name,button.value=submitter.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(attr=>{submitter.hasAttribute(attr)&&button.setAttribute(attr,submitter.getAttribute(attr))})),this.form.append(button),button.click(),button.remove()}}getForm(){var _a;return null!=(_a=this.form)?_a:null}reset(submitter){this.doAction("reset",submitter)}submit(submitter){this.doAction("submit",submitter)}setValidity(isValid){const host=this.host,hasInteracted=!!userInteractedControls.has(host),required=!!host.required;host.toggleAttribute("data-required",required),host.toggleAttribute("data-optional",!required),host.toggleAttribute("data-invalid",!isValid),host.toggleAttribute("data-valid",isValid),host.toggleAttribute("data-user-invalid",!isValid&&hasInteracted),host.toggleAttribute("data-user-valid",isValid&&hasInteracted)}updateValidity(){this.setValidity(this.host.validity.valid)}emitInvalidEvent(originalInvalidEvent){const slInvalidEvent=new CustomEvent("sl-invalid",{bubbles:!1,composed:!1,cancelable:!0,detail:{}});originalInvalidEvent||slInvalidEvent.preventDefault(),this.host.dispatchEvent(slInvalidEvent)||originalInvalidEvent?.preventDefault()}},"FormControlController"),validValidityState=Object.freeze({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1}),chunk_BCEYT3RT=(Object.freeze((0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},validValidityState),{valid:!1,valueMissing:!0})),Object.freeze((0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},validValidityState),{valid:!1,customError:!0})),__webpack_require__(3390)),button_styles_default=__webpack_require__(3118).i`
  ${chunk_BCEYT3RT.N}

  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up from children */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label {
    display: inline-block;
  }

  .button__label::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  @media (forced-colors: active) {
    .button.button--outline.button--checked:not(.button--disabled) {
      outline: solid 2px transparent;
    }
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:focus-visible:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    font-size: var(--sl-button-font-size-small);
    height: var(--sl-input-height-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    font-size: var(--sl-button-font-size-medium);
    height: var(--sl-input-height-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    font-size: var(--sl-button-font-size-large);
    height: var(--sl-input-height-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    height: auto;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    translate: 50% -50%;
    pointer-events: none;
  }

  .button--rtl ::slotted(sl-badge) {
    right: auto;
    left: 0;
    translate: -50% -50%;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host(.sl-button-group__button--first:not(.sl-button-group__button--last)) .button {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }

  :host(.sl-button-group__button--inner) .button {
    border-radius: 0;
  }

  :host(.sl-button-group__button--last:not(.sl-button-group__button--first)) .button {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }

  /* All except the first */
  :host(.sl-button-group__button:not(.sl-button-group__button--first)) {
    margin-inline-start: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(
      .sl-button-group__button:not(
          .sl-button-group__button--first,
          .sl-button-group__button--radio,
          [variant='default']
        ):not(:hover)
    )
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host(.sl-button-group__button--hover) {
    z-index: 1;
  }

  /* Focus and checked are always on top */
  :host(.sl-button-group__button--focus),
  :host(.sl-button-group__button[checked]) {
    z-index: 2;
  }
`,chunk_IJY6XTKC=__webpack_require__(3407),chunk_V47DPYLL=__webpack_require__(5013),chunk_3IYPB6RR=__webpack_require__(926),chunk_MQ6XKY3Z=__webpack_require__(7917),chunk_VQ3XOPCT=__webpack_require__(6596),chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),SlButton=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.formControlController=new FormControlController(this,{form:input=>{if(input.hasAttribute("form")){const doc=input.getRootNode(),formId=input.getAttribute("form");return doc.getElementById(formId)}return input.closest("form")},assumeInteractionOn:["click"]}),this.hasSlotController=new chunk_3IYPB6RR.r(this,"[default]","prefix","suffix"),this.localize=new chunk_MQ6XKY3Z.V(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href="",this.rel="noreferrer noopener"}get validity(){return this.isButton()?this.button.validity:validValidityState}get validationMessage(){return this.isButton()?this.button.validationMessage:""}connectedCallback(){super.connectedCallback(),this.handleHostClick=this.handleHostClick.bind(this),this.addEventListener("click",this.handleHostClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.handleHostClick)}firstUpdated(){this.isButton()&&this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(){"submit"===this.type&&this.formControlController.submit(this),"reset"===this.type&&this.formControlController.reset(this)}handleHostClick(event){(this.disabled||this.loading)&&(event.preventDefault(),event.stopImmediatePropagation())}handleInvalid(event){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(event)}isButton(){return!this.href}isLink(){return!!this.href}handleDisabledChange(){this.isButton()&&this.formControlController.setValidity(this.disabled)}click(){this.button.click()}focus(options){this.button.focus(options)}blur(){this.button.blur()}checkValidity(){return!this.isButton()||this.button.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return!this.isButton()||this.button.reportValidity()}setCustomValidity(message){this.isButton()&&(this.button.setCustomValidity(message),this.formControlController.updateValidity())}render(){const isLink=this.isLink(),tag=isLink?chunk_IJY6XTKC.i`a`:chunk_IJY6XTKC.i`button`;return chunk_IJY6XTKC.n`
      <${tag}
        part="base"
        class=${(0,chunk_ORW72H2K.o)({button:!0,"button--default":"default"===this.variant,"button--primary":"primary"===this.variant,"button--success":"success"===this.variant,"button--neutral":"neutral"===this.variant,"button--warning":"warning"===this.variant,"button--danger":"danger"===this.variant,"button--text":"text"===this.variant,"button--small":"small"===this.size,"button--medium":"medium"===this.size,"button--large":"large"===this.size,"button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":"rtl"===this.localize.dir(),"button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${(0,chunk_V47DPYLL.l)(isLink?void 0:this.disabled)}
        type=${(0,chunk_V47DPYLL.l)(isLink?void 0:this.type)}
        title=${this.title}
        name=${(0,chunk_V47DPYLL.l)(isLink?void 0:this.name)}
        value=${(0,chunk_V47DPYLL.l)(isLink?void 0:this.value)}
        href=${(0,chunk_V47DPYLL.l)(isLink?this.href:void 0)}
        target=${(0,chunk_V47DPYLL.l)(isLink?this.target:void 0)}
        download=${(0,chunk_V47DPYLL.l)(isLink?this.download:void 0)}
        rel=${(0,chunk_V47DPYLL.l)(isLink?this.rel:void 0)}
        role=${(0,chunk_V47DPYLL.l)(isLink?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @invalid=${this.isButton()?this.handleInvalid:null}
        @click=${this.handleClick}
      >
        <slot name="prefix" part="prefix" class="button__prefix"></slot>
        <slot part="label" class="button__label"></slot>
        <slot name="suffix" part="suffix" class="button__suffix"></slot>
        ${this.caret?chunk_IJY6XTKC.n` <sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon> `:""}
        ${this.loading?chunk_IJY6XTKC.n`<sl-spinner></sl-spinner>`:""}
      </${tag}>
    `}},"SlButton");SlButton.styles=button_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".button")],SlButton.prototype,"button",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.t)()],SlButton.prototype,"hasFocus",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.t)()],SlButton.prototype,"invalid",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"title",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlButton.prototype,"variant",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlButton.prototype,"size",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlButton.prototype,"caret",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlButton.prototype,"disabled",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlButton.prototype,"loading",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlButton.prototype,"outline",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlButton.prototype,"pill",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlButton.prototype,"circle",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"type",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"name",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"value",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"href",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"target",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"rel",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"download",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlButton.prototype,"form",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"formaction"})],SlButton.prototype,"formAction",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"formenctype"})],SlButton.prototype,"formEnctype",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"formmethod"})],SlButton.prototype,"formMethod",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"formnovalidate",type:Boolean})],SlButton.prototype,"formNoValidate",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"formtarget"})],SlButton.prototype,"formTarget",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("disabled",{waitUntilFirstUpdate:!0})],SlButton.prototype,"handleDisabledChange",1),SlButton=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-button")],SlButton),__webpack_require__(588),__webpack_require__(7615),__webpack_require__(1746),__webpack_require__(9573),__webpack_require__(5503),__webpack_require__(7259),__webpack_require__(161),__webpack_require__(5793),__webpack_require__(1171)},6883:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var asyncToGenerator=__webpack_require__(9671);function isTabbable(el){const tag=el.tagName.toLowerCase();return!("-1"===el.getAttribute("tabindex")||el.hasAttribute("disabled")||el.hasAttribute("aria-disabled")&&"false"!==el.getAttribute("aria-disabled")||"input"===tag&&"radio"===el.getAttribute("type")&&!el.hasAttribute("checked")||null===el.offsetParent||"hidden"===window.getComputedStyle(el).visibility)&&(!!(("audio"===tag||"video"===tag)&&el.hasAttribute("controls")||el.hasAttribute("tabindex")||el.hasAttribute("contenteditable")&&"false"!==el.getAttribute("contenteditable"))||["button","input","select","textarea","a","audio","video","summary"].includes(tag))}function getTabbableBoundary(root){var _a,_b;const allElements=[];function walk(el){el instanceof HTMLElement&&(allElements.push(el),null!==el.shadowRoot&&"open"===el.shadowRoot.mode&&walk(el.shadowRoot)),[...el.children].forEach(e=>walk(e))}return __name(walk,"walk"),walk(root),{start:null!=(_a=allElements.find(el=>isTabbable(el)))?_a:null,end:null!=(_b=allElements.reverse().find(el=>isTabbable(el)))?_b:null}}__name(isTabbable,"isTabbable"),__name(getTabbableBoundary,"getTabbableBoundary");var activeModals=[],Modal=__name(class{constructor(element){this.tabDirection="forward",this.element=element,this.handleFocusIn=this.handleFocusIn.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)}activate(){activeModals.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){activeModals=activeModals.filter(modal=>modal!==this.element),document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return activeModals[activeModals.length-1]===this.element}checkFocus(){if(this.isActive()&&!this.element.matches(":focus-within")){const{start,end}=getTabbableBoundary(this.element),target="forward"===this.tabDirection?start:end;"function"==typeof target?.focus&&target.focus({preventScroll:!0})}}handleFocusIn(){this.checkFocus()}handleKeyDown(event){"Tab"===event.key&&event.shiftKey&&(this.tabDirection="backward",requestAnimationFrame(()=>this.checkFocus()))}handleKeyUp(){this.tabDirection="forward"}},"Modal"),chunk_RK73WSZS=__webpack_require__(7922),chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),dialog_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    --width: 31rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--sl-z-index-dialog);
  }

  .dialog__panel {
    display: flex;
    flex-direction: column;
    z-index: 2;
    width: var(--width);
    max-width: calc(100% - var(--sl-spacing-2x-large));
    max-height: calc(100% - var(--sl-spacing-2x-large));
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    box-shadow: var(--sl-shadow-x-large);
  }

  .dialog__panel:focus {
    outline: none;
  }

  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */
  @media screen and (max-width: 420px) {
    .dialog__panel {
      max-height: 80vh;
    }
  }

  .dialog--open .dialog__panel {
    display: flex;
    opacity: 1;
  }

  .dialog__header {
    flex: 0 0 auto;
    display: flex;
  }

  .dialog__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .dialog__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .dialog__header-actions sl-icon-button,
  .dialog__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .dialog__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .dialog__footer {
    flex: 0 0 auto;
    text-align: right;
    padding: var(--footer-spacing);
  }

  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  .dialog:not(.dialog--has-footer) .dialog__footer {
    display: none;
  }

  .dialog__overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
  }

  @media (forced-colors: active) {
    .dialog__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`,chunk_OAQT3AUQ=__webpack_require__(6),chunk_B4BZKR24=__webpack_require__(2475),chunk_65AZ2BGN=__webpack_require__(7367),chunk_V47DPYLL=__webpack_require__(5013),chunk_3IYPB6RR=__webpack_require__(926),chunk_MQ6XKY3Z=__webpack_require__(7917),chunk_VQ3XOPCT=__webpack_require__(6596),chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_LKA3TPUC=__webpack_require__(9056),SlDialog=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.hasSlotController=new chunk_3IYPB6RR.r(this,"footer"),this.localize=new chunk_MQ6XKY3Z.V(this),this.open=!1,this.label="",this.noHeader=!1}connectedCallback(){super.connectedCallback(),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.modal=new Modal(this)}firstUpdated(){this.dialog.hidden=!this.open,this.open&&(this.addOpenListeners(),this.modal.activate(),(0,chunk_RK73WSZS.M4)(this))}disconnectedCallback(){super.disconnectedCallback(),(0,chunk_RK73WSZS.gG)(this)}requestClose(source){if(this.emit("sl-request-close",{cancelable:!0,detail:{source}}).defaultPrevented){const animation=(0,chunk_OAQT3AUQ.O8)(this,"dialog.denyClose",{dir:this.localize.dir()});(0,chunk_65AZ2BGN.nv)(this.panel,animation.keyframes,animation.options)}else this.hide()}addOpenListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}handleDocumentKeyDown(event){this.open&&"Escape"===event.key&&(event.stopPropagation(),this.requestClose("keyboard"))}handleOpenChange(){var _this=this;return(0,asyncToGenerator.Z)(function*(){if(_this.open){_this.emit("sl-show"),_this.addOpenListeners(),_this.originalTrigger=document.activeElement,_this.modal.activate(),(0,chunk_RK73WSZS.M4)(_this);const autoFocusTarget=_this.querySelector("[autofocus]");autoFocusTarget&&autoFocusTarget.removeAttribute("autofocus"),yield Promise.all([(0,chunk_65AZ2BGN.U_)(_this.dialog),(0,chunk_65AZ2BGN.U_)(_this.overlay)]),_this.dialog.hidden=!1,requestAnimationFrame(()=>{_this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(autoFocusTarget?autoFocusTarget.focus({preventScroll:!0}):_this.panel.focus({preventScroll:!0})),autoFocusTarget&&autoFocusTarget.setAttribute("autofocus","")});const panelAnimation=(0,chunk_OAQT3AUQ.O8)(_this,"dialog.show",{dir:_this.localize.dir()}),overlayAnimation=(0,chunk_OAQT3AUQ.O8)(_this,"dialog.overlay.show",{dir:_this.localize.dir()});yield Promise.all([(0,chunk_65AZ2BGN.nv)(_this.panel,panelAnimation.keyframes,panelAnimation.options),(0,chunk_65AZ2BGN.nv)(_this.overlay,overlayAnimation.keyframes,overlayAnimation.options)]),_this.emit("sl-after-show")}else{_this.emit("sl-hide"),_this.removeOpenListeners(),_this.modal.deactivate(),yield Promise.all([(0,chunk_65AZ2BGN.U_)(_this.dialog),(0,chunk_65AZ2BGN.U_)(_this.overlay)]);const panelAnimation=(0,chunk_OAQT3AUQ.O8)(_this,"dialog.hide",{dir:_this.localize.dir()}),overlayAnimation=(0,chunk_OAQT3AUQ.O8)(_this,"dialog.overlay.hide",{dir:_this.localize.dir()});yield Promise.all([(0,chunk_65AZ2BGN.nv)(_this.overlay,overlayAnimation.keyframes,overlayAnimation.options).then(()=>{_this.overlay.hidden=!0}),(0,chunk_65AZ2BGN.nv)(_this.panel,panelAnimation.keyframes,panelAnimation.options).then(()=>{_this.panel.hidden=!0})]),_this.dialog.hidden=!0,_this.overlay.hidden=!1,_this.panel.hidden=!1,(0,chunk_RK73WSZS.gG)(_this);const trigger=_this.originalTrigger;"function"==typeof trigger?.focus&&setTimeout(()=>trigger.focus()),_this.emit("sl-after-hide")}})()}show(){var _this2=this;return(0,asyncToGenerator.Z)(function*(){if(!_this2.open)return _this2.open=!0,(0,chunk_B4BZKR24.m)(_this2,"sl-after-show")})()}hide(){var _this3=this;return(0,asyncToGenerator.Z)(function*(){if(_this3.open)return _this3.open=!1,(0,chunk_B4BZKR24.m)(_this3,"sl-after-hide")})()}render(){return chunk_DUT32TWM.y`
      <div
        part="base"
        class=${(0,chunk_ORW72H2K.o)({dialog:!0,"dialog--open":this.open,"dialog--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="dialog__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="dialog__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${(0,chunk_V47DPYLL.l)(this.noHeader?this.label:void 0)}
          aria-labelledby=${(0,chunk_V47DPYLL.l)(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":chunk_DUT32TWM.y`
                <header part="header" class="dialog__header">
                  <h2 part="title" class="dialog__title" id="title">
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="dialog__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="dialog__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click="${()=>this.requestClose("close-button")}"
                    ></sl-icon-button>
                  </div>
                </header>
              `}

          <slot part="body" class="dialog__body"></slot>

          <footer part="footer" class="dialog__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}},"SlDialog");SlDialog.styles=dialog_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".dialog")],SlDialog.prototype,"dialog",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".dialog__panel")],SlDialog.prototype,"panel",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".dialog__overlay")],SlDialog.prototype,"overlay",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlDialog.prototype,"open",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlDialog.prototype,"label",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"no-header",type:Boolean,reflect:!0})],SlDialog.prototype,"noHeader",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("open",{waitUntilFirstUpdate:!0})],SlDialog.prototype,"handleOpenChange",1),SlDialog=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-dialog")],SlDialog),(0,chunk_OAQT3AUQ.jx)("dialog.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}}),(0,chunk_OAQT3AUQ.jx)("dialog.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}}),(0,chunk_OAQT3AUQ.jx)("dialog.denyClose",{keyframes:[{scale:1},{scale:1.02},{scale:1}],options:{duration:250}}),(0,chunk_OAQT3AUQ.jx)("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}}),(0,chunk_OAQT3AUQ.jx)("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}}),__webpack_require__(1916),__webpack_require__(6362),__webpack_require__(3407),__webpack_require__(1746),__webpack_require__(9573),__webpack_require__(5503),__webpack_require__(7259),__webpack_require__(161),__webpack_require__(5793),__webpack_require__(1171)},1356:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),progress_bar_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    --height: 1rem;
    --track-color: var(--sl-color-neutral-200);
    --indicator-color: var(--sl-color-primary-600);
    --label-color: var(--sl-color-neutral-0);

    display: block;
  }

  .progress-bar {
    position: relative;
    background-color: var(--track-color);
    height: var(--height);
    border-radius: var(--sl-border-radius-pill);
    box-shadow: inset var(--sl-shadow-small);
    overflow: hidden;
  }

  .progress-bar__indicator {
    height: 100%;
    font-family: var(--sl-font-sans);
    font-size: 12px;
    font-weight: var(--sl-font-weight-normal);
    background-color: var(--indicator-color);
    color: var(--label-color);
    text-align: center;
    line-height: var(--height);
    white-space: nowrap;
    overflow: hidden;
    transition: 400ms width, 400ms background-color;
    user-select: none;
  }

  /* Indeterminate */
  .progress-bar--indeterminate .progress-bar__indicator {
    position: absolute;
    animation: indeterminate 2.5s infinite cubic-bezier(0.37, 0, 0.63, 1);
  }

  .progress-bar--indeterminate.progress-bar--rtl .progress-bar__indicator {
    animation-name: indeterminate-rtl;
  }

  @media (forced-colors: active) {
    .progress-bar {
      outline: solid 1px SelectedItem;
      background-color: var(--sl-color-neutral-0);
    }

    .progress-bar__indicator {
      outline: solid 1px SelectedItem;
      background-color: SelectedItem;
    }
  }

  @keyframes indeterminate {
    0% {
      left: -50%;
      width: 50%;
    }
    75%,
    100% {
      left: 100%;
      width: 50%;
    }
  }

  @keyframes indeterminate-rtl {
    0% {
      right: -50%;
      width: 50%;
    }
    75%,
    100% {
      right: 100%;
      width: 50%;
    }
  }
`,chunk_UP75L23G=__webpack_require__(1171),i2=(0,chunk_UP75L23G.e)(class extends chunk_UP75L23G.i{constructor(t2){var e2;if(super(t2),t2.type!==chunk_UP75L23G.t.ATTRIBUTE||"style"!==t2.name||(null===(e2=t2.strings)||void 0===e2?void 0:e2.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t2){return Object.keys(t2).reduce((e2,r)=>{const s=t2[r];return null==s?e2:e2+`${r=r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`},"")}update(e2,[r]){const{style:s}=e2.element;if(void 0===this.vt){this.vt=new Set;for(const t2 in r)this.vt.add(t2);return this.render(r)}this.vt.forEach(t2=>{null==r[t2]&&(this.vt.delete(t2),t2.includes("-")?s.removeProperty(t2):s[t2]="")});for(const t2 in r){const e3=r[t2];null!=e3&&(this.vt.add(t2),t2.includes("-")?s.setProperty(t2,e3):s[t2]=e3)}return chunk_DUT32TWM.x}}),chunk_V47DPYLL=__webpack_require__(5013),chunk_MQ6XKY3Z=__webpack_require__(7917),chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_LKA3TPUC=__webpack_require__(9056),SlProgressBar=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.localize=new chunk_MQ6XKY3Z.V(this),this.value=0,this.indeterminate=!1,this.label=""}render(){return chunk_DUT32TWM.y`
      <div
        part="base"
        class=${(0,chunk_ORW72H2K.o)({"progress-bar":!0,"progress-bar--indeterminate":this.indeterminate,"progress-bar--rtl":"rtl"===this.localize.dir()})}
        role="progressbar"
        title=${(0,chunk_V47DPYLL.l)(this.title)}
        aria-label=${this.label.length>0?this.label:this.localize.term("progress")}
        aria-valuemin="0"
        aria-valuemax="100"
        aria-valuenow=${this.indeterminate?0:this.value}
      >
        <div part="indicator" class="progress-bar__indicator" style=${i2({width:`${this.value}%`})}>
          ${this.indeterminate?"":chunk_DUT32TWM.y` <slot part="label" class="progress-bar__label"></slot> `}
        </div>
      </div>
    `}},"SlProgressBar");SlProgressBar.styles=progress_bar_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Number,reflect:!0})],SlProgressBar.prototype,"value",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlProgressBar.prototype,"indeterminate",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlProgressBar.prototype,"label",2),SlProgressBar=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-progress-bar")],SlProgressBar),__webpack_require__(1746)},9414:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__(588),__webpack_require__(7615),__webpack_require__(7917),__webpack_require__(1746),__webpack_require__(2019),__webpack_require__(3390),__webpack_require__(3118),__webpack_require__(9056)},5692:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),tab_group_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    --indicator-color: var(--sl-color-primary-600);
    --track-color: var(--sl-color-neutral-200);
    --track-width: 2px;

    display: block;
  }

  .tab-group {
    display: flex;
    border-radius: 0;
  }

  .tab-group__tabs {
    display: flex;
    position: relative;
  }

  .tab-group__indicator {
    position: absolute;
    transition: var(--sl-transition-fast) translate ease, var(--sl-transition-fast) width ease;
  }

  .tab-group--has-scroll-controls .tab-group__nav-container {
    position: relative;
    padding: 0 var(--sl-spacing-x-large);
  }

  .tab-group__body {
    display: block;
    overflow: auto;
  }

  .tab-group__scroll-button {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    bottom: 0;
    width: var(--sl-spacing-x-large);
  }

  .tab-group__scroll-button--start {
    left: 0;
  }

  .tab-group__scroll-button--end {
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--start {
    left: auto;
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--end {
    left: 0;
    right: auto;
  }

  /*
   * Top
   */

  .tab-group--top {
    flex-direction: column;
  }

  .tab-group--top .tab-group__nav-container {
    order: 1;
  }

  .tab-group--top .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--top .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--top .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-bottom: solid var(--track-width) var(--track-color);
  }

  .tab-group--top .tab-group__indicator {
    bottom: calc(-1 * var(--track-width));
    border-bottom: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--top .tab-group__body {
    order: 2;
  }

  .tab-group--top ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Bottom
   */

  .tab-group--bottom {
    flex-direction: column;
  }

  .tab-group--bottom .tab-group__nav-container {
    order: 2;
  }

  .tab-group--bottom .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--bottom .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--bottom .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-top: solid var(--track-width) var(--track-color);
  }

  .tab-group--bottom .tab-group__indicator {
    top: calc(-1 * var(--track-width));
    border-top: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--bottom .tab-group__body {
    order: 1;
  }

  .tab-group--bottom ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Start
   */

  .tab-group--start {
    flex-direction: row;
  }

  .tab-group--start .tab-group__nav-container {
    order: 1;
  }

  .tab-group--start .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-inline-end: solid var(--track-width) var(--track-color);
  }

  .tab-group--start .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    border-right: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--start.tab-group--rtl .tab-group__indicator {
    right: auto;
    left: calc(-1 * var(--track-width));
  }

  .tab-group--start .tab-group__body {
    flex: 1 1 auto;
    order: 2;
  }

  .tab-group--start ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }

  /*
   * End
   */

  .tab-group--end {
    flex-direction: row;
  }

  .tab-group--end .tab-group__nav-container {
    order: 2;
  }

  .tab-group--end .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-left: solid var(--track-width) var(--track-color);
  }

  .tab-group--end .tab-group__indicator {
    left: calc(-1 * var(--track-width));
    border-inline-start: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--end.tab-group--rtl .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    left: auto;
  }

  .tab-group--end .tab-group__body {
    flex: 1 1 auto;
    order: 1;
  }

  .tab-group--end ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }
`,chunk_RK73WSZS=__webpack_require__(7922),chunk_MQ6XKY3Z=__webpack_require__(7917),chunk_VQ3XOPCT=__webpack_require__(6596),chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_LKA3TPUC=__webpack_require__(9056),SlTabGroup=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.localize=new chunk_MQ6XKY3Z.V(this),this.tabs=[],this.panels=[],this.hasScrollControls=!1,this.placement="top",this.activation="auto",this.noScrollControls=!1}connectedCallback(){const whenAllDefined=Promise.allSettled([customElements.whenDefined("sl-tab"),customElements.whenDefined("sl-tab-panel")]);super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>{this.repositionIndicator(),this.updateScrollControls()}),this.mutationObserver=new MutationObserver(mutations=>{mutations.some(m=>!["aria-labelledby","aria-controls"].includes(m.attributeName))&&setTimeout(()=>this.setAriaLabels()),mutations.some(m=>"disabled"===m.attributeName)&&this.syncTabsAndPanels()}),this.updateComplete.then(()=>{this.syncTabsAndPanels(),this.mutationObserver.observe(this,{attributes:!0,childList:!0,subtree:!0}),this.resizeObserver.observe(this.nav),whenAllDefined.then(()=>{new IntersectionObserver((entries,observer)=>{var _a;entries[0].intersectionRatio>0&&(this.setAriaLabels(),this.setActiveTab(null!=(_a=this.getActiveTab())?_a:this.tabs[0],{emitEvents:!1}),observer.unobserve(entries[0].target))}).observe(this.tabGroup)})})}disconnectedCallback(){this.mutationObserver.disconnect(),this.resizeObserver.unobserve(this.nav)}getAllTabs(options={includeDisabled:!0}){return[...this.shadowRoot.querySelector('slot[name="nav"]').assignedElements()].filter(el=>options.includeDisabled?"sl-tab"===el.tagName.toLowerCase():"sl-tab"===el.tagName.toLowerCase()&&!el.disabled)}getAllPanels(){return[...this.body.assignedElements()].filter(el=>"sl-tab-panel"===el.tagName.toLowerCase())}getActiveTab(){return this.tabs.find(el=>el.active)}handleClick(event){const tab=event.target.closest("sl-tab");tab?.closest("sl-tab-group")===this&&null!==tab&&this.setActiveTab(tab,{scrollBehavior:"smooth"})}handleKeyDown(event){const tab=event.target.closest("sl-tab");if(tab?.closest("sl-tab-group")===this&&(["Enter"," "].includes(event.key)&&null!==tab&&(this.setActiveTab(tab,{scrollBehavior:"smooth"}),event.preventDefault()),["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(event.key))){const activeEl=this.tabs.find(t2=>t2.matches(":focus")),isRtl="rtl"===this.localize.dir();if("sl-tab"===activeEl?.tagName.toLowerCase()){let index=this.tabs.indexOf(activeEl);"Home"===event.key?index=0:"End"===event.key?index=this.tabs.length-1:["top","bottom"].includes(this.placement)&&event.key===(isRtl?"ArrowRight":"ArrowLeft")||["start","end"].includes(this.placement)&&"ArrowUp"===event.key?index--:(["top","bottom"].includes(this.placement)&&event.key===(isRtl?"ArrowLeft":"ArrowRight")||["start","end"].includes(this.placement)&&"ArrowDown"===event.key)&&index++,index<0&&(index=this.tabs.length-1),index>this.tabs.length-1&&(index=0),this.tabs[index].focus({preventScroll:!0}),"auto"===this.activation&&this.setActiveTab(this.tabs[index],{scrollBehavior:"smooth"}),["top","bottom"].includes(this.placement)&&(0,chunk_RK73WSZS.zT)(this.tabs[index],this.nav,"horizontal"),event.preventDefault()}}}handleScrollToStart(){this.nav.scroll({left:"rtl"===this.localize.dir()?this.nav.scrollLeft+this.nav.clientWidth:this.nav.scrollLeft-this.nav.clientWidth,behavior:"smooth"})}handleScrollToEnd(){this.nav.scroll({left:"rtl"===this.localize.dir()?this.nav.scrollLeft-this.nav.clientWidth:this.nav.scrollLeft+this.nav.clientWidth,behavior:"smooth"})}setActiveTab(tab,options){if(options=(0,chunk_LKA3TPUC.ih)({emitEvents:!0,scrollBehavior:"auto"},options),tab!==this.activeTab&&!tab.disabled){const previousTab=this.activeTab;this.activeTab=tab,this.tabs.map(el=>el.active=el===this.activeTab),this.panels.map(el=>{var _a;return el.active=el.name===(null==(_a=this.activeTab)?void 0:_a.panel)}),this.syncIndicator(),["top","bottom"].includes(this.placement)&&(0,chunk_RK73WSZS.zT)(this.activeTab,this.nav,"horizontal",options.scrollBehavior),options.emitEvents&&(previousTab&&this.emit("sl-tab-hide",{detail:{name:previousTab.panel}}),this.emit("sl-tab-show",{detail:{name:this.activeTab.panel}}))}}setAriaLabels(){this.tabs.forEach(tab=>{const panel=this.panels.find(el=>el.name===tab.panel);panel&&(tab.setAttribute("aria-controls",panel.getAttribute("id")),panel.setAttribute("aria-labelledby",tab.getAttribute("id")))})}repositionIndicator(){const currentTab=this.getActiveTab();if(!currentTab)return;const width=currentTab.clientWidth,height=currentTab.clientHeight,isRtl="rtl"===this.localize.dir(),allTabs=this.getAllTabs(),offset=allTabs.slice(0,allTabs.indexOf(currentTab)).reduce((previous,current)=>({left:previous.left+current.clientWidth,top:previous.top+current.clientHeight}),{left:0,top:0});switch(this.placement){case"top":case"bottom":this.indicator.style.width=`${width}px`,this.indicator.style.height="auto",this.indicator.style.translate=isRtl?-1*offset.left+"px":`${offset.left}px`;break;case"start":case"end":this.indicator.style.width="auto",this.indicator.style.height=`${height}px`,this.indicator.style.translate=`0 ${offset.top}px`}}syncTabsAndPanels(){this.tabs=this.getAllTabs({includeDisabled:!1}),this.panels=this.getAllPanels(),this.syncIndicator(),this.updateComplete.then(()=>this.updateScrollControls())}updateScrollControls(){this.hasScrollControls=!this.noScrollControls&&["top","bottom"].includes(this.placement)&&this.nav.scrollWidth>this.nav.clientWidth}syncIndicator(){this.getActiveTab()?(this.indicator.style.display="block",this.repositionIndicator()):this.indicator.style.display="none"}show(panel){const tab=this.tabs.find(el=>el.panel===panel);tab&&this.setActiveTab(tab,{scrollBehavior:"smooth"})}render(){const isRtl="rtl"===this.localize.dir();return chunk_DUT32TWM.y`
      <div
        part="base"
        class=${(0,chunk_ORW72H2K.o)({"tab-group":!0,"tab-group--top":"top"===this.placement,"tab-group--bottom":"bottom"===this.placement,"tab-group--start":"start"===this.placement,"tab-group--end":"end"===this.placement,"tab-group--rtl":"rtl"===this.localize.dir(),"tab-group--has-scroll-controls":this.hasScrollControls})}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
      >
        <div class="tab-group__nav-container" part="nav">
          ${this.hasScrollControls?chunk_DUT32TWM.y`
                <sl-icon-button
                  part="scroll-button scroll-button--start"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--start"
                  name=${isRtl?"chevron-right":"chevron-left"}
                  library="system"
                  label=${this.localize.term("scrollToStart")}
                  @click=${this.handleScrollToStart}
                ></sl-icon-button>
              `:""}

          <div class="tab-group__nav">
            <div part="tabs" class="tab-group__tabs" role="tablist">
              <div part="active-tab-indicator" class="tab-group__indicator"></div>
              <slot name="nav" @slotchange=${this.syncTabsAndPanels}></slot>
            </div>
          </div>

          ${this.hasScrollControls?chunk_DUT32TWM.y`
                <sl-icon-button
                  part="scroll-button scroll-button--end"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--end"
                  name=${isRtl?"chevron-left":"chevron-right"}
                  library="system"
                  label=${this.localize.term("scrollToEnd")}
                  @click=${this.handleScrollToEnd}
                ></sl-icon-button>
              `:""}
        </div>

        <slot part="body" class="tab-group__body" @slotchange=${this.syncTabsAndPanels}></slot>
      </div>
    `}},"SlTabGroup");SlTabGroup.styles=tab_group_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".tab-group")],SlTabGroup.prototype,"tabGroup",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".tab-group__body")],SlTabGroup.prototype,"body",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".tab-group__nav")],SlTabGroup.prototype,"nav",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".tab-group__indicator")],SlTabGroup.prototype,"indicator",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.t)()],SlTabGroup.prototype,"hasScrollControls",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlTabGroup.prototype,"placement",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlTabGroup.prototype,"activation",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"no-scroll-controls",type:Boolean})],SlTabGroup.prototype,"noScrollControls",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("noScrollControls",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"updateScrollControls",1),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("placement",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"syncIndicator",1),SlTabGroup=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-tab-group")],SlTabGroup),__webpack_require__(1916),__webpack_require__(6362),__webpack_require__(3407),__webpack_require__(5013),__webpack_require__(1746),__webpack_require__(9573),__webpack_require__(5503),__webpack_require__(7259),__webpack_require__(161),__webpack_require__(5793),__webpack_require__(1171)},3479:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),tab_panel_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    --padding: 0;

    display: none;
  }

  :host([active]) {
    display: block;
  }

  .tab-panel {
    display: block;
    padding: var(--padding);
  }
`,chunk_VQ3XOPCT=__webpack_require__(6596),chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_LKA3TPUC=__webpack_require__(9056),id=0,SlTabPanel=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.attrId=++id,this.componentId=`sl-tab-panel-${this.attrId}`,this.name="",this.active=!1}connectedCallback(){super.connectedCallback(),this.id=this.id.length>0?this.id:this.componentId,this.setAttribute("role","tabpanel")}handleActiveChange(){this.setAttribute("aria-hidden",this.active?"false":"true")}render(){return chunk_DUT32TWM.y`
      <slot
        part="base"
        class=${(0,chunk_ORW72H2K.o)({"tab-panel":!0,"tab-panel--active":this.active})}
      ></slot>
    `}},"SlTabPanel");SlTabPanel.styles=tab_panel_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlTabPanel.prototype,"name",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlTabPanel.prototype,"active",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("active")],SlTabPanel.prototype,"handleActiveChange",1),SlTabPanel=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-tab-panel")],SlTabPanel),__webpack_require__(1171)},1097:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),tab_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    display: inline-block;
  }

  .tab {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    border-radius: var(--sl-border-radius-medium);
    color: var(--sl-color-neutral-600);
    padding: var(--sl-spacing-medium) var(--sl-spacing-large);
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
    transition: var(--transition-speed) box-shadow, var(--transition-speed) color;
  }

  .tab:hover:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus {
    outline: none;
  }

  .tab:focus-visible:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: calc(-1 * var(--sl-focus-ring-width) - var(--sl-focus-ring-offset));
  }

  .tab.tab--active:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab.tab--closable {
    padding-inline-end: var(--sl-spacing-small);
  }

  .tab.tab--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .tab__close-button {
    font-size: var(--sl-font-size-small);
    margin-inline-start: var(--sl-spacing-small);
  }

  .tab__close-button::part(base) {
    padding: var(--sl-spacing-3x-small);
  }

  @media (forced-colors: active) {
    .tab.tab--active:not(.tab--disabled) {
      outline: solid 1px transparent;
      outline-offset: -3px;
    }
  }
`,chunk_MQ6XKY3Z=__webpack_require__(7917),chunk_VQ3XOPCT=__webpack_require__(6596),chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_LKA3TPUC=__webpack_require__(9056),id=0,SlTab=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.localize=new chunk_MQ6XKY3Z.V(this),this.attrId=++id,this.componentId=`sl-tab-${this.attrId}`,this.panel="",this.active=!1,this.closable=!1,this.disabled=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tab")}handleCloseClick(event){event.stopPropagation(),this.emit("sl-close")}handleActiveChange(){this.setAttribute("aria-selected",this.active?"true":"false")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}focus(options){this.tab.focus(options)}blur(){this.tab.blur()}render(){return this.id=this.id.length>0?this.id:this.componentId,chunk_DUT32TWM.y`
      <div
        part="base"
        class=${(0,chunk_ORW72H2K.o)({tab:!0,"tab--active":this.active,"tab--closable":this.closable,"tab--disabled":this.disabled})}
        tabindex=${this.disabled?"-1":"0"}
      >
        <slot></slot>
        ${this.closable?chunk_DUT32TWM.y`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                class="tab__close-button"
                @click=${this.handleCloseClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </div>
    `}},"SlTab");SlTab.styles=tab_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".tab")],SlTab.prototype,"tab",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlTab.prototype,"panel",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlTab.prototype,"active",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean})],SlTab.prototype,"closable",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlTab.prototype,"disabled",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("active")],SlTab.prototype,"handleActiveChange",1),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("disabled")],SlTab.prototype,"handleDisabledChange",1),SlTab=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-tab")],SlTab),__webpack_require__(1916),__webpack_require__(6362),__webpack_require__(3407),__webpack_require__(5013),__webpack_require__(1746),__webpack_require__(9573),__webpack_require__(5503),__webpack_require__(7259),__webpack_require__(161),__webpack_require__(5793),__webpack_require__(1171)},2290:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var asyncToGenerator=__webpack_require__(9671),chunk_BCEYT3RT=__webpack_require__(3390),chunk_DUT32TWM=__webpack_require__(3118),tooltip_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    --max-width: 20rem;
    --hide-delay: 0ms;
    --show-delay: 150ms;

    display: contents;
  }

  .tooltip {
    --arrow-size: var(--sl-tooltip-arrow-size);
    --arrow-color: var(--sl-tooltip-background-color);
  }

  .tooltip::part(popup) {
    pointer-events: none;
    z-index: var(--sl-z-index-tooltip);
  }

  .tooltip[placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .tooltip[placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .tooltip[placement^='left']::part(popup) {
    transform-origin: right;
  }

  .tooltip[placement^='right']::part(popup) {
    transform-origin: left;
  }

  .tooltip__body {
    display: block;
    width: max-content;
    max-width: var(--max-width);
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    padding: var(--sl-tooltip-padding);
    pointer-events: none;
  }
`,chunk_OAQT3AUQ=__webpack_require__(6),chunk_B4BZKR24=__webpack_require__(2475),chunk_65AZ2BGN=__webpack_require__(7367),chunk_MQ6XKY3Z=__webpack_require__(7917),chunk_VQ3XOPCT=__webpack_require__(6596),chunk_ORW72H2K=__webpack_require__(9352),chunk_ROLL4627=__webpack_require__(2019),chunk_LKA3TPUC=__webpack_require__(9056),SlTooltip=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.localize=new chunk_MQ6XKY3Z.V(this),this.content="",this.placement="top",this.disabled=!1,this.distance=8,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleBlur=this.handleBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.updateComplete.then(()=>{this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut)})}firstUpdated(){this.body.hidden=!this.open,this.open&&(this.popup.active=!0,this.popup.reposition())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("blur",this.handleBlur,!0),this.removeEventListener("focus",this.handleFocus,!0),this.removeEventListener("click",this.handleClick),this.removeEventListener("keydown",this.handleKeyDown),this.removeEventListener("mouseover",this.handleMouseOver),this.removeEventListener("mouseout",this.handleMouseOut)}handleBlur(){this.hasTrigger("focus")&&this.hide()}handleClick(){this.hasTrigger("click")&&(this.open?this.hide():this.show())}handleFocus(){this.hasTrigger("focus")&&this.show()}handleKeyDown(event){this.open&&"Escape"===event.key&&(event.stopPropagation(),this.hide())}handleMouseOver(){if(this.hasTrigger("hover")){const delay=(0,chunk_65AZ2BGN.RA)(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.show(),delay)}}handleMouseOut(){if(this.hasTrigger("hover")){const delay=(0,chunk_65AZ2BGN.RA)(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.hide(),delay)}}hasTrigger(triggerType){return this.trigger.split(" ").includes(triggerType)}handleOpenChange(){var _this=this;return(0,asyncToGenerator.Z)(function*(){if(_this.open){if(_this.disabled)return;_this.emit("sl-show"),yield(0,chunk_65AZ2BGN.U_)(_this.body),_this.body.hidden=!1,_this.popup.active=!0;const{keyframes,options}=(0,chunk_OAQT3AUQ.O8)(_this,"tooltip.show",{dir:_this.localize.dir()});yield(0,chunk_65AZ2BGN.nv)(_this.popup.popup,keyframes,options),_this.emit("sl-after-show")}else{_this.emit("sl-hide"),yield(0,chunk_65AZ2BGN.U_)(_this.body);const{keyframes,options}=(0,chunk_OAQT3AUQ.O8)(_this,"tooltip.hide",{dir:_this.localize.dir()});yield(0,chunk_65AZ2BGN.nv)(_this.popup.popup,keyframes,options),_this.popup.active=!1,_this.body.hidden=!0,_this.emit("sl-after-hide")}})()}handleOptionsChange(){var _this2=this;return(0,asyncToGenerator.Z)(function*(){_this2.hasUpdated&&(yield _this2.updateComplete,_this2.popup.reposition())})()}handleDisabledChange(){this.disabled&&this.open&&this.hide()}show(){var _this3=this;return(0,asyncToGenerator.Z)(function*(){if(!_this3.open)return _this3.open=!0,(0,chunk_B4BZKR24.m)(_this3,"sl-after-show")})()}hide(){var _this4=this;return(0,asyncToGenerator.Z)(function*(){if(_this4.open)return _this4.open=!1,(0,chunk_B4BZKR24.m)(_this4,"sl-after-hide")})()}render(){return chunk_DUT32TWM.y`
      <sl-popup
        part="base"
        exportparts="
          popup:base__popup,
          arrow:base__arrow
        "
        class=${(0,chunk_ORW72H2K.o)({tooltip:!0,"tooltip--open":this.open})}
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        arrow
      >
        <slot slot="anchor" aria-describedby="tooltip"></slot>

        <slot
          name="content"
          part="body"
          id="tooltip"
          class="tooltip__body"
          role="tooltip"
          aria-live=${this.open?"polite":"off"}
        >
          ${this.content}
        </slot>
      </sl-popup>
    `}},"SlTooltip");SlTooltip.styles=tooltip_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)("slot:not([name])")],SlTooltip.prototype,"defaultSlot",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".tooltip__body")],SlTooltip.prototype,"body",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)("sl-popup")],SlTooltip.prototype,"popup",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlTooltip.prototype,"content",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlTooltip.prototype,"placement",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlTooltip.prototype,"disabled",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Number})],SlTooltip.prototype,"distance",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlTooltip.prototype,"open",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Number})],SlTooltip.prototype,"skidding",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlTooltip.prototype,"trigger",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean})],SlTooltip.prototype,"hoist",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("open",{waitUntilFirstUpdate:!0})],SlTooltip.prototype,"handleOpenChange",1),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)(["content","distance","hoist","placement","skidding"])],SlTooltip.prototype,"handleOptionsChange",1),(0,chunk_LKA3TPUC.u2)([(0,chunk_VQ3XOPCT.Y)("disabled")],SlTooltip.prototype,"handleDisabledChange",1),SlTooltip=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-tooltip")],SlTooltip),(0,chunk_OAQT3AUQ.jx)("tooltip.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}}),(0,chunk_OAQT3AUQ.jx)("tooltip.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}});var popup_styles_default=chunk_DUT32TWM.i`
  ${chunk_BCEYT3RT.N}

  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45º. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }
`;function t(t3){return t3.split("-")[1]}function e3(t3){return"y"===t3?"height":"width"}function n(t3){return t3.split("-")[0]}function o2(t3){return["top","bottom"].includes(n(t3))?"x":"y"}function r(r4,i4,a3){let{reference:l3,floating:s3}=r4;const c3=l3.x+l3.width/2-s3.width/2,f3=l3.y+l3.height/2-s3.height/2,u3=o2(i4),m3=e3(u3),g3=l3[m3]/2-s3[m3]/2,d3="x"===u3;let p3;switch(n(i4)){case"top":p3={x:c3,y:l3.y-s3.height};break;case"bottom":p3={x:c3,y:l3.y+l3.height};break;case"right":p3={x:l3.x+l3.width,y:f3};break;case"left":p3={x:l3.x-s3.width,y:f3};break;default:p3={x:l3.x,y:l3.y}}switch(t(i4)){case"start":p3[u3]-=g3*(a3&&d3?-1:1);break;case"end":p3[u3]+=g3*(a3&&d3?-1:1)}return p3}__name(t,"t"),__name(e3,"e3"),__name(n,"n"),__name(o2,"o2"),__name(r,"r");var i2=function(){var _ref=(0,asyncToGenerator.Z)(function*(t3,e4,n3){const{placement:o5="bottom",strategy:i4="absolute",middleware:a3=[],platform:l3}=n3,s3=a3.filter(Boolean),c3=yield null==l3.isRTL?void 0:l3.isRTL(e4);let f3=yield l3.getElementRects({reference:t3,floating:e4,strategy:i4}),{x:u3,y:m3}=r(f3,o5,c3),g3=o5,d3={},p3=0;for(let n4=0;n4<s3.length;n4++){const{name:a4,fn:h3}=s3[n4],{x:y4,y:x3,data:w3,reset:v3}=yield h3({x:u3,y:m3,initialPlacement:o5,placement:g3,strategy:i4,middlewareData:d3,rects:f3,platform:l3,elements:{reference:t3,floating:e4}});u3=y4??u3,m3=x3??m3,d3=(0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},d3),{[a4]:(0,chunk_LKA3TPUC.ih)((0,chunk_LKA3TPUC.ih)({},d3[a4]),w3)}),v3&&p3<=50&&(p3++,"object"==typeof v3&&(v3.placement&&(g3=v3.placement),v3.rects&&(f3=!0===v3.rects?yield l3.getElementRects({reference:t3,floating:e4,strategy:i4}):v3.rects),({x:u3,y:m3}=r(f3,g3,c3))),n4=-1)}return{x:u3,y:m3,placement:g3,strategy:i4,middlewareData:d3}});return __name(function(_x,_x2,_x3){return _ref.apply(this,arguments)},"i2")}();function a(t3){return"number"!=typeof t3?(0,chunk_LKA3TPUC.ih)({top:0,right:0,bottom:0,left:0},t3):{top:t3,right:t3,bottom:t3,left:t3}}function l(t3){return(0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},t3),{top:t3.y,left:t3.x,right:t3.x+t3.width,bottom:t3.y+t3.height})}function s(_x4,_x5){return _s.apply(this,arguments)}function _s(){return(_s=(0,asyncToGenerator.Z)(function*(t3,e4){var n3;void 0===e4&&(e4={});const{x:o5,y:r4,platform:i4,rects:s3,elements:c3,strategy:f3}=t3,{boundary:u3="clippingAncestors",rootBoundary:m3="viewport",elementContext:g3="floating",altBoundary:d3=!1,padding:p3=0}=e4,h3=a(p3),y4=c3[d3?"floating"===g3?"reference":"floating":g3],x3=l(yield i4.getClippingRect({element:null==(n3=yield null==i4.isElement?void 0:i4.isElement(y4))||n3?y4:y4.contextElement||(yield null==i4.getDocumentElement?void 0:i4.getDocumentElement(c3.floating)),boundary:u3,rootBoundary:m3,strategy:f3})),w3="floating"===g3?(0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},s3.floating),{x:o5,y:r4}):s3.reference,v3=yield null==i4.getOffsetParent?void 0:i4.getOffsetParent(c3.floating),b3=(yield null==i4.isElement?void 0:i4.isElement(v3))&&(yield null==i4.getScale?void 0:i4.getScale(v3))||{x:1,y:1},R2=l(i4.convertOffsetParentRelativeRectToViewportRelativeRect?yield i4.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w3,offsetParent:v3,strategy:f3}):w3);return{top:(x3.top-R2.top+h3.top)/b3.y,bottom:(R2.bottom-x3.bottom+h3.bottom)/b3.y,left:(x3.left-R2.left+h3.left)/b3.x,right:(R2.right-x3.right+h3.right)/b3.x}})).apply(this,arguments)}__name(a,"a"),__name(l,"l"),__name(s,"s"),__name(_s,"_s");var c=Math.min,f=Math.max;function u(t3,e4,n3){return f(t3,c(e4,n3))}__name(u,"u");var m=__name(n3=>({name:"arrow",options:n3,fn:r4=>(0,asyncToGenerator.Z)(function*(){const{element:i4,padding:l3=0}=n3||{},{x:s3,y:c3,placement:f3,rects:m3,platform:g3}=r4;if(null==i4)return{};const d3=a(l3),p3={x:s3,y:c3},h3=o2(f3),y4=e3(h3),x3=yield g3.getDimensions(i4),w3="y"===h3?"top":"left",v3="y"===h3?"bottom":"right",b3=m3.reference[y4]+m3.reference[h3]-p3[h3]-m3.floating[y4],R2=p3[h3]-m3.reference[h3],A2=yield null==g3.getOffsetParent?void 0:g3.getOffsetParent(i4);let P3=A2?"y"===h3?A2.clientHeight||0:A2.clientWidth||0:0;0===P3&&(P3=m3.floating[y4]);const O3=d3[w3],D3=P3-x3[y4]-d3[v3],E3=P3/2-x3[y4]/2+(b3/2-R2/2),L3=u(O3,E3,D3),k2=null!=t(f3)&&E3!=L3&&m3.reference[y4]/2-(E3<O3?d3[w3]:d3[v3])-x3[y4]/2<0;return{[h3]:p3[h3]-(k2?E3<O3?O3-E3:D3-E3:0),data:{[h3]:L3,centerOffset:E3-L3}}})()}),"m"),p=(["top","right","bottom","left"].reduce((t3,e4)=>t3.concat(e4,e4+"-start",e4+"-end"),[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function h(t3){return t3.replace(/left|right|bottom|top/g,t4=>p[t4])}function y2(n3,r4,i4){void 0===i4&&(i4=!1);const a3=t(n3),l3=o2(n3),s3=e3(l3);let c3="x"===l3?a3===(i4?"end":"start")?"right":"left":"start"===a3?"bottom":"top";return r4.reference[s3]>r4.floating[s3]&&(c3=h(c3)),{main:c3,cross:h(c3)}}__name(h,"h"),__name(y2,"y2");var x={start:"end",end:"start"};function w(t3){return t3.replace(/start|end/g,t4=>x[t4])}__name(w,"w");var b=__name(function(e4){return void 0===e4&&(e4={}),{name:"flip",options:e4,fn:o5=>(0,asyncToGenerator.Z)(function*(){var r4;const{placement:i4,middlewareData:a3,rects:l3,initialPlacement:c3,platform:f3,elements:u3}=o5,_a=e4,{mainAxis:m3=!0,crossAxis:g3=!0,fallbackPlacements:d3,fallbackStrategy:p3="bestFit",fallbackAxisSideDirection:x3="none",flipAlignment:v3=!0}=_a,b3=(0,chunk_LKA3TPUC.S0)(_a,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]),R2=n(i4),A2=n(c3)===c3,P3=yield null==f3.isRTL?void 0:f3.isRTL(u3.floating),T3=d3||(A2||!v3?[h(c3)]:function(t3){const e5=h(t3);return[w(t3),e5,w(e5)]}(c3));d3||"none"===x3||T3.push(...function(e5,o6,r5,i5){const a4=t(e5);let l4=function(t3,e6,n3){const o7=["left","right"],r6=["right","left"],i6=["top","bottom"],a5=["bottom","top"];switch(t3){case"top":case"bottom":return n3?e6?r6:o7:e6?o7:r6;case"left":case"right":return e6?i6:a5;default:return[]}}(n(e5),"start"===r5,i5);return a4&&(l4=l4.map(t3=>t3+"-"+a4),o6&&(l4=l4.concat(l4.map(w)))),l4}(c3,v3,x3,P3));const O3=[c3,...T3],D3=yield s(o5,b3),E3=[];let L3=(null==(r4=a3.flip)?void 0:r4.overflows)||[];if(m3&&E3.push(D3[R2]),g3){const{main:t3,cross:e5}=y2(i4,l3,P3);E3.push(D3[t3],D3[e5])}if(L3=[...L3,{placement:i4,overflows:E3}],!E3.every(t3=>t3<=0)){var k2,B;const t3=((null==(k2=a3.flip)?void 0:k2.index)||0)+1,e5=O3[t3];if(e5)return{data:{index:t3,overflows:L3},reset:{placement:e5}};let n3=null==(B=L3.filter(t4=>t4.overflows[0]<=0).sort((t4,e6)=>t4.overflows[1]-e6.overflows[1])[0])?void 0:B.placement;if(!n3)switch(p3){case"bestFit":{var C2;const t4=null==(C2=L3.map(t5=>[t5.placement,t5.overflows.filter(t6=>t6>0).reduce((t6,e6)=>t6+e6,0)]).sort((t5,e6)=>t5[1]-e6[1])[0])?void 0:C2[0];t4&&(n3=t4);break}case"initialPlacement":n3=c3}if(i4!==n3)return{reset:{placement:n3}}}return{}})()}},"b"),O=__name(function(e4){return void 0===e4&&(e4=0),{name:"offset",options:e4,fn:r4=>(0,asyncToGenerator.Z)(function*(){const{x:i4,y:a3}=r4,l3=yield(_ref2=(0,asyncToGenerator.Z)(function*(e5,r5){const{placement:i5,platform:a4,elements:l4}=e5,s3=yield null==a4.isRTL?void 0:a4.isRTL(l4.floating),c3=n(i5),f3=t(i5),u3="x"===o2(i5),m3=["left","top"].includes(c3)?-1:1,g3=s3&&u3?-1:1,d3="function"==typeof r5?r5(e5):r5;let{mainAxis:p3,crossAxis:h3,alignmentAxis:y4}="number"==typeof d3?{mainAxis:d3,crossAxis:0,alignmentAxis:null}:(0,chunk_LKA3TPUC.ih)({mainAxis:0,crossAxis:0,alignmentAxis:null},d3);return f3&&"number"==typeof y4&&(h3="end"===f3?-1*y4:y4),u3?{x:h3*g3,y:p3*m3}:{x:p3*m3,y:h3*g3}}),function(_x6,_x7){return _ref2.apply(this,arguments)})(r4,e4);var _ref2;return{x:i4+l3.x,y:a3+l3.y,data:l3}})()}},"O");function D(t3){return"x"===t3?"y":"x"}__name(D,"D");var E=__name(function(t3){return void 0===t3&&(t3={}),{name:"shift",options:t3,fn:e4=>(0,asyncToGenerator.Z)(function*(){const{x:r4,y:i4,placement:a3}=e4,_a=t3,{mainAxis:l3=!0,crossAxis:c3=!1,limiter:f3={fn:t4=>{let{x:e5,y:n3}=t4;return{x:e5,y:n3}}}}=_a,m3=(0,chunk_LKA3TPUC.S0)(_a,["mainAxis","crossAxis","limiter"]),g3={x:r4,y:i4},d3=yield s(e4,m3),p3=o2(n(a3)),h3=D(p3);let y4=g3[p3],x3=g3[h3];l3&&(y4=u(y4+d3["y"===p3?"top":"left"],y4,y4-d3["y"===p3?"bottom":"right"])),c3&&(x3=u(x3+d3["y"===h3?"top":"left"],x3,x3-d3["y"===h3?"bottom":"right"]));const w3=f3.fn((0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},e4),{[p3]:y4,[h3]:x3}));return(0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},w3),{data:{x:w3.x-r4,y:w3.y-i4}})})()}},"E"),k=__name(function(e4){return void 0===e4&&(e4={}),{name:"size",options:e4,fn:r4=>(0,asyncToGenerator.Z)(function*(){const{placement:i4,rects:a3,platform:l3,elements:u3}=r4,_a=e4,{apply:m3=__name(()=>{},"m3")}=_a,g3=(0,chunk_LKA3TPUC.S0)(_a,["apply"]),d3=yield s(r4,g3),p3=n(i4),h3=t(i4),y4="x"===o2(i4),{width:x3,height:w3}=a3.floating;let v3,b3;"top"===p3||"bottom"===p3?(v3=p3,b3=h3===((yield null==l3.isRTL?void 0:l3.isRTL(u3.floating))?"start":"end")?"left":"right"):(b3=p3,v3="end"===h3?"top":"bottom");const R2=w3-d3[v3],A2=x3-d3[b3];let P3=R2,T3=A2;if(y4?T3=c(x3-d3.right-d3.left,A2):P3=c(w3-d3.bottom-d3.top,R2),!r4.middlewareData.shift&&!h3){const t3=f(d3.left,0),e5=f(d3.right,0),n3=f(d3.top,0),o5=f(d3.bottom,0);y4?T3=x3-2*(0!==t3||0!==e5?t3+e5:f(d3.left,d3.right)):P3=w3-2*(0!==n3||0!==o5?n3+o5:f(d3.top,d3.bottom))}yield m3((0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},r4),{availableWidth:T3,availableHeight:P3}));const O3=yield l3.getDimensions(u3.floating);return x3!==O3.width||w3!==O3.height?{reset:{rects:!0}}:{}})()}},"k");function n2(t3){var e4;return(null==(e4=t3.ownerDocument)?void 0:e4.defaultView)||window}function o3(t3){return n2(t3).getComputedStyle(t3)}__name(n2,"n2"),__name(o3,"o3");var f2,i3=Math.min,r2=Math.max,l2=Math.round;function c2(t3){const e4=o3(t3);let n3=parseFloat(e4.width),i4=parseFloat(e4.height);const r4=t3.offsetWidth,c3=t3.offsetHeight,s3=l2(n3)!==r4||l2(i4)!==c3;return s3&&(n3=r4,i4=c3),{width:n3,height:i4,fallback:s3}}function s2(t3){return h2(t3)?(t3.nodeName||"").toLowerCase():""}function u2(){if(f2)return f2;const t3=navigator.userAgentData;return t3&&Array.isArray(t3.brands)?f2=t3.brands.map(t4=>t4.brand+"/"+t4.version).join(" "):navigator.userAgent}function a2(t3){return t3 instanceof n2(t3).HTMLElement}function d2(t3){return t3 instanceof n2(t3).Element}function h2(t3){return t3 instanceof n2(t3).Node}function p2(t3){return!(typeof ShadowRoot>"u")&&(t3 instanceof n2(t3).ShadowRoot||t3 instanceof ShadowRoot)}function g2(t3){const{overflow:e4,overflowX:n3,overflowY:i4,display:r4}=o3(t3);return/auto|scroll|overlay|hidden|clip/.test(e4+i4+n3)&&!["inline","contents"].includes(r4)}function m2(t3){return["table","td","th"].includes(s2(t3))}function y3(t3){const e4=/firefox/i.test(u2()),n3=o3(t3),i4=n3.backdropFilter||n3.WebkitBackdropFilter;return"none"!==n3.transform||"none"!==n3.perspective||!!i4&&"none"!==i4||e4&&"filter"===n3.willChange||e4&&!!n3.filter&&"none"!==n3.filter||["transform","perspective"].some(t4=>n3.willChange.includes(t4))||["paint","layout","strict","content"].some(t4=>{const e5=n3.contain;return null!=e5&&e5.includes(t4)})}function x2(){return/^((?!chrome|android).)*safari/i.test(u2())}function w2(t3){return["html","body","#document"].includes(s2(t3))}function v2(t3){return d2(t3)?t3:t3.contextElement}__name(c2,"c2"),__name(s2,"s2"),__name(u2,"u2"),__name(a2,"a2"),__name(d2,"d2"),__name(h2,"h2"),__name(p2,"p2"),__name(g2,"g2"),__name(m2,"m2"),__name(y3,"y3"),__name(x2,"x2"),__name(w2,"w2"),__name(v2,"v2");var b2={x:1,y:1};function L2(t3){const e4=v2(t3);if(!a2(e4))return b2;const n3=e4.getBoundingClientRect(),{width:o5,height:i4,fallback:r4}=c2(e4);let s3=(r4?l2(n3.width):n3.width)/o5,f3=(r4?l2(n3.height):n3.height)/i4;return s3&&Number.isFinite(s3)||(s3=1),f3&&Number.isFinite(f3)||(f3=1),{x:s3,y:f3}}function E2(t3,e4,o5,i4){var r4,l3;void 0===e4&&(e4=!1),void 0===o5&&(o5=!1);const c3=t3.getBoundingClientRect(),s3=v2(t3);let f3=b2;e4&&(i4?d2(i4)&&(f3=L2(i4)):f3=L2(t3));const u3=s3?n2(s3):window,a3=x2()&&o5;let h3=(c3.left+(a3&&(null==(r4=u3.visualViewport)?void 0:r4.offsetLeft)||0))/f3.x,p3=(c3.top+(a3&&(null==(l3=u3.visualViewport)?void 0:l3.offsetTop)||0))/f3.y,g3=c3.width/f3.x,m3=c3.height/f3.y;if(s3){const t4=n2(s3),e5=i4&&d2(i4)?n2(i4):i4;let o6=t4.frameElement;for(;o6&&i4&&e5!==t4;){const t5=L2(o6),e6=o6.getBoundingClientRect(),i5=getComputedStyle(o6);e6.x+=(o6.clientLeft+parseFloat(i5.paddingLeft))*t5.x,e6.y+=(o6.clientTop+parseFloat(i5.paddingTop))*t5.y,h3*=t5.x,p3*=t5.y,g3*=t5.x,m3*=t5.y,h3+=e6.x,p3+=e6.y,o6=n2(o6).frameElement}}return{width:g3,height:m3,top:p3,right:h3+g3,bottom:p3+m3,left:h3,x:h3,y:p3}}function R(t3){return((h2(t3)?t3.ownerDocument:t3.document)||window.document).documentElement}function T2(t3){return d2(t3)?{scrollLeft:t3.scrollLeft,scrollTop:t3.scrollTop}:{scrollLeft:t3.pageXOffset,scrollTop:t3.pageYOffset}}function C(t3){return E2(R(t3)).left+T2(t3).scrollLeft}function F(t3){if("html"===s2(t3))return t3;const e4=t3.assignedSlot||t3.parentNode||p2(t3)&&t3.host||R(t3);return p2(e4)?e4.host:e4}function W(t3){const e4=F(t3);return w2(e4)?e4.ownerDocument.body:a2(e4)&&g2(e4)?e4:W(e4)}function D2(t3,e4){var o5;void 0===e4&&(e4=[]);const i4=W(t3),r4=i4===(null==(o5=t3.ownerDocument)?void 0:o5.body),l3=n2(i4);return r4?e4.concat(l3,l3.visualViewport||[],g2(i4)?i4:[]):e4.concat(i4,D2(i4))}function S(e4,i4,l3){let c3;if("viewport"===i4)c3=function(t3,e5){const o5=n2(t3),i5=R(t3),r4=o5.visualViewport;let l4=i5.clientWidth,c4=i5.clientHeight,s4=0,f4=0;if(r4){l4=r4.width,c4=r4.height;const t4=x2();(!t4||t4&&"fixed"===e5)&&(s4=r4.offsetLeft,f4=r4.offsetTop)}return{width:l4,height:c4,x:s4,y:f4}}(e4,l3);else if("document"===i4)c3=function(t3){const e5=R(t3),n3=T2(t3),i5=t3.ownerDocument.body,l4=r2(e5.scrollWidth,e5.clientWidth,i5.scrollWidth,i5.clientWidth),c4=r2(e5.scrollHeight,e5.clientHeight,i5.scrollHeight,i5.clientHeight);let s4=-n3.scrollLeft+C(t3);const f4=-n3.scrollTop;return"rtl"===o3(i5).direction&&(s4+=r2(e5.clientWidth,i5.clientWidth)-l4),{width:l4,height:c4,x:s4,y:f4}}(R(e4));else if(d2(i4))c3=function(t3,e5){const n3=E2(t3,!0,"fixed"===e5),o5=n3.top+t3.clientTop,i5=n3.left+t3.clientLeft,r4=a2(t3)?L2(t3):{x:1,y:1};return{width:t3.clientWidth*r4.x,height:t3.clientHeight*r4.y,x:i5*r4.x,y:o5*r4.y}}(i4,l3);else{const t3=(0,chunk_LKA3TPUC.ih)({},i4);if(x2()){var s3,f3;const o5=n2(e4);t3.x-=(null==(s3=o5.visualViewport)?void 0:s3.offsetLeft)||0,t3.y-=(null==(f3=o5.visualViewport)?void 0:f3.offsetTop)||0}c3=t3}return l(c3)}function A(t3,e4){return a2(t3)&&"fixed"!==o3(t3).position?e4?e4(t3):t3.offsetParent:null}function H(t3,e4){const i4=n2(t3);let r4=A(t3,e4);for(;r4&&m2(r4)&&"static"===o3(r4).position;)r4=A(r4,e4);return r4&&("html"===s2(r4)||"body"===s2(r4)&&"static"===o3(r4).position&&!y3(r4))?i4:r4||function(t4){let e5=F(t4);for(;a2(e5)&&!w2(e5);){if(y3(e5))return e5;e5=F(e5)}return null}(t3)||i4}function V(t3,e4,n3){const o5=a2(e4),i4=R(e4),r4=E2(t3,!0,"fixed"===n3,e4);let l3={scrollLeft:0,scrollTop:0};const c3={x:0,y:0};if(o5||!o5&&"fixed"!==n3)if(("body"!==s2(e4)||g2(i4))&&(l3=T2(e4)),a2(e4)){const t4=E2(e4,!0);c3.x=t4.x+e4.clientLeft,c3.y=t4.y+e4.clientTop}else i4&&(c3.x=C(i4));return{x:r4.left+l3.scrollLeft-c3.x,y:r4.top+l3.scrollTop-c3.y,width:r4.width,height:r4.height}}__name(L2,"L2"),__name(E2,"E2"),__name(R,"R"),__name(T2,"T2"),__name(C,"C"),__name(F,"F"),__name(W,"W"),__name(D2,"D2"),__name(S,"S"),__name(A,"A"),__name(H,"H"),__name(V,"V");var O2={getClippingRect:function(t3){let{element:e4,boundary:n3,rootBoundary:l3,strategy:c3}=t3;const u3=[..."clippingAncestors"===n3?function(t4,e5){const n4=e5.get(t4);if(n4)return n4;let i4=D2(t4).filter(t5=>d2(t5)&&"body"!==s2(t5)),r4=null;const l4="fixed"===o3(t4).position;let c4=l4?F(t4):t4;for(;d2(c4)&&!w2(c4);){const t5=o3(c4),e6=y3(c4);"fixed"===t5.position?r4=null:(l4?e6||r4:e6||"static"!==t5.position||!r4||!["absolute","fixed"].includes(r4.position))?r4=t5:i4=i4.filter(t6=>t6!==c4),c4=F(c4)}return e5.set(t4,i4),i4}(e4,this._c):[].concat(n3),l3],h3=u3.reduce((t4,n4)=>{const o5=S(e4,n4,c3);return t4.top=r2(o5.top,t4.top),t4.right=i3(o5.right,t4.right),t4.bottom=i3(o5.bottom,t4.bottom),t4.left=r2(o5.left,t4.left),t4},S(e4,u3[0],c3));return{width:h3.right-h3.left,height:h3.bottom-h3.top,x:h3.left,y:h3.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t3){let{rect:e4,offsetParent:n3,strategy:o5}=t3;const i4=a2(n3),r4=R(n3);if(n3===r4)return e4;let l3={scrollLeft:0,scrollTop:0},c3={x:1,y:1};const f3={x:0,y:0};if((i4||!i4&&"fixed"!==o5)&&(("body"!==s2(n3)||g2(r4))&&(l3=T2(n3)),a2(n3))){const t4=E2(n3);c3=L2(n3),f3.x=t4.x+n3.clientLeft,f3.y=t4.y+n3.clientTop}return{width:e4.width*c3.x,height:e4.height*c3.y,x:e4.x*c3.x-l3.scrollLeft*c3.x+f3.x,y:e4.y*c3.y-l3.scrollTop*c3.y+f3.y}},isElement:d2,getDimensions:function(t3){return a2(t3)?c2(t3):t3.getBoundingClientRect()},getOffsetParent:H,getDocumentElement:R,getScale:L2,getElementRects(t3){var _this=this;return(0,asyncToGenerator.Z)(function*(){let{reference:e4,floating:n3,strategy:o5}=t3;const i4=_this.getOffsetParent||H,r4=_this.getDimensions;return{reference:V(e4,yield i4(n3),o5),floating:(0,chunk_LKA3TPUC.ih)({x:0,y:0},yield r4(n3))}})()},getClientRects:t3=>Array.from(t3.getClientRects()),isRTL:t3=>"rtl"===o3(t3).direction};function P2(t3,e4,n3,o5){void 0===o5&&(o5={});const{ancestorScroll:i4=!0,ancestorResize:r4=!0,elementResize:l3=!0,animationFrame:c3=!1}=o5,s3=i4&&!c3,f3=s3||r4?[...d2(t3)?D2(t3):t3.contextElement?D2(t3.contextElement):[],...D2(e4)]:[];f3.forEach(t4=>{s3&&t4.addEventListener("scroll",n3,{passive:!0}),r4&&t4.addEventListener("resize",n3)});let u3,a3=null;if(l3){let o6=!0;a3=new ResizeObserver(()=>{o6||n3(),o6=!1}),d2(t3)&&!c3&&a3.observe(t3),d2(t3)||!t3.contextElement||c3||a3.observe(t3.contextElement),a3.observe(e4)}let h3=c3?E2(t3):null;return c3&&__name(function e5(){const o6=E2(t3);!h3||o6.x===h3.x&&o6.y===h3.y&&o6.width===h3.width&&o6.height===h3.height||n3(),h3=o6,u3=requestAnimationFrame(e5)},"e5")(),n3(),()=>{var t4;f3.forEach(t5=>{s3&&t5.removeEventListener("scroll",n3),r4&&t5.removeEventListener("resize",n3)}),null==(t4=a3)||t4.disconnect(),a3=null,c3&&cancelAnimationFrame(u3)}}__name(P2,"P2");var z=__name((t3,n3,o5)=>{const i4=new Map,r4=(0,chunk_LKA3TPUC.ih)({platform:O2},o5),l3=(0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},r4.platform),{_c:i4});return i2(t3,n3,(0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},r4),{platform:l3}))},"z");function t2(t3){return r3(t3)}function o4(t3){return t3.assignedSlot?t3.assignedSlot:t3.parentNode instanceof ShadowRoot?t3.parentNode.host:t3.parentNode}function r3(t3){for(let e4=t3;e4;e4=o4(e4))if(e4 instanceof Element&&"none"===getComputedStyle(e4).display)return null;for(let e4=o4(t3);e4;e4=o4(e4)){if(!(e4 instanceof Element))continue;const t4=getComputedStyle(e4);if("contents"!==t4.display&&("static"!==t4.position||"none"!==t4.filter||"BODY"===e4.tagName))return e4}return null}__name(t2,"t2"),__name(o4,"o4"),__name(r3,"r3");var SlPopup=__name(class extends chunk_ROLL4627.P{constructor(){super(...arguments),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0}connectedCallback(){var _superprop_getConnectedCallback=__name(()=>super.connectedCallback,"_superprop_getConnectedCallback"),_this2=this;return(0,asyncToGenerator.Z)(function*(){_superprop_getConnectedCallback().call(_this2),yield _this2.updateComplete,_this2.start()})()}disconnectedCallback(){this.stop()}updated(changedProps){var _superprop_getUpdated=__name(()=>super.updated,"_superprop_getUpdated"),_this3=this;return(0,asyncToGenerator.Z)(function*(){_superprop_getUpdated().call(_this3,changedProps),changedProps.has("active")&&(_this3.active?_this3.start():_this3.stop()),changedProps.has("anchor")&&_this3.handleAnchorChange(),_this3.active&&(yield _this3.updateComplete,_this3.reposition())})()}handleAnchorChange(){var _this4=this;return(0,asyncToGenerator.Z)(function*(){if(yield _this4.stop(),_this4.anchor&&"string"==typeof _this4.anchor){const root=_this4.getRootNode();_this4.anchorEl=root.getElementById(_this4.anchor)}else _this4.anchorEl=_this4.anchor instanceof Element?_this4.anchor:_this4.querySelector('[slot="anchor"]');if(_this4.anchorEl instanceof HTMLSlotElement&&(_this4.anchorEl=_this4.anchorEl.assignedElements({flatten:!0})[0]),!_this4.anchorEl)throw new Error("Invalid anchor element: no anchor could be found using the anchor slot or the anchor attribute.");_this4.start()})()}start(){this.anchorEl&&(this.cleanup=P2(this.anchorEl,this.popup,()=>{this.reposition()}))}stop(){var _this5=this;return(0,asyncToGenerator.Z)(function*(){return new Promise(resolve=>{_this5.cleanup?(_this5.cleanup(),_this5.cleanup=void 0,_this5.removeAttribute("data-current-placement"),_this5.style.removeProperty("--auto-size-available-width"),_this5.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>resolve())):resolve()})})()}reposition(){if(!this.active||!this.anchorEl)return;const middleware=[O({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?middleware.push(k({apply:({rects})=>{const syncHeight="height"===this.sync||"both"===this.sync;this.popup.style.width="width"===this.sync||"both"===this.sync?`${rects.reference.width}px`:"",this.popup.style.height=syncHeight?`${rects.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&middleware.push(b({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:"best-fit"===this.flipFallbackStrategy?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&middleware.push(E({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?middleware.push(k({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth,availableHeight})=>{"vertical"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-height",`${availableHeight}px`):this.style.removeProperty("--auto-size-available-height"),"horizontal"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-width",`${availableWidth}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&middleware.push(m({element:this.arrowEl,padding:this.arrowPadding}));const getOffsetParent="absolute"===this.strategy?element=>O2.getOffsetParent(element,t2):O2.getOffsetParent;z(this.anchorEl,this.popup,{placement:this.placement,middleware,strategy:this.strategy,platform:(0,chunk_LKA3TPUC.EZ)((0,chunk_LKA3TPUC.ih)({},O2),{getOffsetParent})}).then(({x:x3,y:y4,middlewareData,placement})=>{const isRtl="rtl"===getComputedStyle(this).direction,staticSide={top:"bottom",right:"left",bottom:"top",left:"right"}[placement.split("-")[0]];if(this.setAttribute("data-current-placement",placement),Object.assign(this.popup.style,{left:`${x3}px`,top:`${y4}px`}),this.arrow){const arrowX=middlewareData.arrow.x,arrowY=middlewareData.arrow.y;let top="",right="",bottom="",left="";if("start"===this.arrowPlacement){const value="number"==typeof arrowX?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";top="number"==typeof arrowY?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",right=isRtl?value:"",left=isRtl?"":value}else if("end"===this.arrowPlacement){const value="number"==typeof arrowX?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";right=isRtl?"":value,left=isRtl?value:"",bottom="number"==typeof arrowY?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else"center"===this.arrowPlacement?(left="number"==typeof arrowX?"calc(50% - var(--arrow-size-diagonal))":"",top="number"==typeof arrowY?"calc(50% - var(--arrow-size-diagonal))":""):(left="number"==typeof arrowX?`${arrowX}px`:"",top="number"==typeof arrowY?`${arrowY}px`:"");Object.assign(this.arrowEl.style,{top,right,bottom,left,[staticSide]:"calc(var(--arrow-size-diagonal) * -1)"})}}),this.emit("sl-reposition")}render(){return chunk_DUT32TWM.y`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <div
        part="popup"
        class=${(0,chunk_ORW72H2K.o)({popup:!0,"popup--active":this.active,"popup--fixed":"fixed"===this.strategy,"popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?chunk_DUT32TWM.y`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}},"SlPopup");SlPopup.styles=popup_styles_default,(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".popup")],SlPopup.prototype,"popup",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.i)(".popup__arrow")],SlPopup.prototype,"arrowEl",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlPopup.prototype,"anchor",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean,reflect:!0})],SlPopup.prototype,"active",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlPopup.prototype,"placement",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({reflect:!0})],SlPopup.prototype,"strategy",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Number})],SlPopup.prototype,"distance",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Number})],SlPopup.prototype,"skidding",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean})],SlPopup.prototype,"arrow",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"arrow-placement"})],SlPopup.prototype,"arrowPlacement",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"arrow-padding",type:Number})],SlPopup.prototype,"arrowPadding",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean})],SlPopup.prototype,"flip",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"flip-fallback-placements",converter:{fromAttribute:value=>value.split(" ").map(p3=>p3.trim()).filter(p3=>""!==p3),toAttribute:value=>value.join(" ")}})],SlPopup.prototype,"flipFallbackPlacements",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"flip-fallback-strategy"})],SlPopup.prototype,"flipFallbackStrategy",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Object})],SlPopup.prototype,"flipBoundary",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"flip-padding",type:Number})],SlPopup.prototype,"flipPadding",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Boolean})],SlPopup.prototype,"shift",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Object})],SlPopup.prototype,"shiftBoundary",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"shift-padding",type:Number})],SlPopup.prototype,"shiftPadding",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"auto-size"})],SlPopup.prototype,"autoSize",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)()],SlPopup.prototype,"sync",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({type:Object})],SlPopup.prototype,"autoSizeBoundary",2),(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e2)({attribute:"auto-size-padding",type:Number})],SlPopup.prototype,"autoSizePadding",2),SlPopup=(0,chunk_LKA3TPUC.u2)([(0,chunk_ROLL4627.e)("sl-popup")],SlPopup),__webpack_require__(1746),__webpack_require__(1171)},4262:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>_chunks_chunk_3Y6SB6QS_js__WEBPACK_IMPORTED_MODULE_1__.t});var _chunks_chunk_3Y6SB6QS_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7082);__webpack_require__(9056)},4868:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{JP:()=>MarkdownModule});var core=__webpack_require__(2223),Subject=__webpack_require__(7579),merge=__webpack_require__(6451),of2=__webpack_require__(9646),Observable2=__webpack_require__(9751),Subscription=__webpack_require__(727);class Action extends Subscription.w0{constructor(scheduler,work){super()}schedule(state,delay=0){return this}}__name(Action,"Action");const intervalProvider={setInterval(handler,timeout,...args){const{delegate}=intervalProvider;return delegate?.setInterval?delegate.setInterval(handler,timeout,...args):setInterval(handler,timeout,...args)},clearInterval(handle){const{delegate}=intervalProvider;return(delegate?.clearInterval||clearInterval)(handle)},delegate:void 0};var arrRemove=__webpack_require__(8737);class AsyncAction extends Action{constructor(scheduler,work){super(scheduler,work),this.scheduler=scheduler,this.work=work,this.pending=!1}schedule(state,delay=0){var _a;if(this.closed)return this;this.state=state;const id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.pending=!0,this.delay=delay,this.id=null!==(_a=this.id)&&void 0!==_a?_a:this.requestAsyncId(scheduler,this.id,delay),this}requestAsyncId(scheduler,_id,delay=0){return intervalProvider.setInterval(scheduler.flush.bind(scheduler,this),delay)}recycleAsyncId(_scheduler,id,delay=0){if(null!=delay&&this.delay===delay&&!1===this.pending)return id;null!=id&&intervalProvider.clearInterval(id)}execute(state,delay){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const error=this._execute(state,delay);if(error)return error;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(state,_delay){let errorValue,errored=!1;try{this.work(state)}catch(e){errored=!0,errorValue=e||new Error("Scheduled action threw falsy error")}if(errored)return this.unsubscribe(),errorValue}unsubscribe(){if(!this.closed){const{id,scheduler}=this,{actions}=scheduler;this.work=this.state=this.scheduler=null,this.pending=!1,(0,arrRemove.P)(actions,this),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null)),this.delay=null,super.unsubscribe()}}}__name(AsyncAction,"AsyncAction");var dateTimestampProvider=__webpack_require__(6063);class Scheduler{constructor(schedulerActionCtor,now=Scheduler.now){this.schedulerActionCtor=schedulerActionCtor,this.now=now}schedule(work,delay=0,state){return new this.schedulerActionCtor(this,work).schedule(state,delay)}}__name(Scheduler,"Scheduler"),Scheduler.now=dateTimestampProvider.l.now;class AsyncScheduler extends Scheduler{constructor(SchedulerAction,now=Scheduler.now){super(SchedulerAction,now),this.actions=[],this._active=!1}flush(action){const{actions}=this;if(this._active)return void actions.push(action);let error;this._active=!0;do{if(error=action.execute(action.state,action.delay))break}while(action=actions.shift());if(this._active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}}}__name(AsyncScheduler,"AsyncScheduler");const async_async=new AsyncScheduler(AsyncAction);var isScheduler=__webpack_require__(3532);function isValidDate(value){return value instanceof Date&&!isNaN(value)}function timer(dueTime=0,intervalOrScheduler,scheduler=async_async){let intervalDuration=-1;return null!=intervalOrScheduler&&((0,isScheduler.K)(intervalOrScheduler)?scheduler=intervalOrScheduler:intervalDuration=intervalOrScheduler),new Observable2.y(subscriber=>{let due=isValidDate(dueTime)?+dueTime-scheduler.now():dueTime;due<0&&(due=0);let n=0;return scheduler.schedule(function(){subscriber.closed||(subscriber.next(n++),0<=intervalDuration?this.schedule(void 0,intervalDuration):subscriber.complete())},due)})}__name(isValidDate,"isValidDate"),__name(timer,"timer");var switchMap=__webpack_require__(3900),mapTo=__webpack_require__(9718),identity=__webpack_require__(4671),lift=__webpack_require__(4482),OperatorSubscriber=__webpack_require__(5403);function distinctUntilChanged(comparator,keySelector=identity.y){return comparator=comparator??defaultCompare,(0,lift.e)((source,subscriber)=>{let previousKey,first3=!0;source.subscribe((0,OperatorSubscriber.x)(subscriber,value=>{const currentKey=keySelector(value);(first3||!comparator(previousKey,currentKey))&&(first3=!1,previousKey=currentKey,subscriber.next(value))}))})}function defaultCompare(a,b){return a===b}__name(distinctUntilChanged,"distinctUntilChanged"),__name(defaultCompare,"defaultCompare");var ReplaySubject=__webpack_require__(4707),share=__webpack_require__(3099);function shareReplay(configOrBufferSize,windowTime,scheduler){let bufferSize,refCount=!1;return configOrBufferSize&&"object"==typeof configOrBufferSize?({bufferSize=1/0,windowTime=1/0,refCount=!1,scheduler}=configOrBufferSize):bufferSize=configOrBufferSize??1/0,(0,share.B)({connector:()=>new ReplaySubject.t(bufferSize,windowTime,scheduler),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:refCount})}__name(shareReplay,"shareReplay");var startWith=__webpack_require__(8675),map=__webpack_require__(4004),innerFrom=__webpack_require__(8421),noop=__webpack_require__(5032);__name(function takeUntil(notifier){return(0,lift.e)((source,subscriber)=>{(0,innerFrom.Xf)(notifier).subscribe((0,OperatorSubscriber.x)(subscriber,()=>subscriber.complete(),noop.Z)),!subscriber.closed&&source.subscribe(subscriber)})},"takeUntil"),__webpack_require__(590);var common=__webpack_require__(4755);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj2){return typeof obj2}:function(obj2){return obj2&&"function"==typeof Symbol&&obj2.constructor===Symbol&&obj2!==Symbol.prototype?"symbol":typeof obj2})(obj)}function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}__name(_typeof,"_typeof"),__name(_toPrimitive,"_toPrimitive"),__name(_toPropertyKey,"_toPropertyKey"),__name(_defineProperty,"_defineProperty"),__name(getDefaults,"getDefaults");let defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};function changeDefaults(newDefaults){defaults=newDefaults}__name(changeDefaults,"changeDefaults");const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=__name(ch=>escapeReplacements[ch],"getEscapeReplacement");function marked_esm_escape(html,encode){if(encode){if(escapeTest.test(html))return html.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(html))return html.replace(escapeReplaceNoEncode,getEscapeReplacement);return html}__name(marked_esm_escape,"marked_esm_escape");const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function marked_esm_unescape(html){return html.replace(unescapeTest,(_,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}__name(marked_esm_unescape,"marked_esm_unescape");const caret=/(^|[^\[])\^/g;function edit(regex,opt){regex="string"==typeof regex?regex:regex.source,opt=opt||"";const obj={replace:(name,val)=>(val=(val=val.source||val).replace(caret,"$1"),regex=regex.replace(name,val),obj),getRegex:()=>new RegExp(regex,opt)};return obj}__name(edit,"edit");const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(sanitize,base,href){if(sanitize){let prot;try{prot=decodeURIComponent(marked_esm_unescape(href)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(0===prot.indexOf("javascript:")||0===prot.indexOf("vbscript:")||0===prot.indexOf("data:"))return null}base&&!originIndependentUrl.test(href)&&(href=resolveUrl(base,href));try{href=encodeURI(href).replace(/%25/g,"%")}catch{return null}return href}__name(cleanUrl,"cleanUrl");const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(base,href){baseUrls[" "+base]||(baseUrls[" "+base]=justDomain.test(base)?base+"/":rtrim(base,"/",!0));const relativeBase=-1===(base=baseUrls[" "+base]).indexOf(":");return"//"===href.substring(0,2)?relativeBase?href:base.replace(protocol,"$1")+href:"/"===href.charAt(0)?relativeBase?href:base.replace(domain,"$1")+href:base+href}__name(resolveUrl,"resolveUrl");const noopTest={exec:__name(function(){},"noopTest")};function splitCells(tableRow,count){const cells=tableRow.replace(/\|/g,(match,offset,str)=>{let escaped=!1,curr=offset;for(;--curr>=0&&"\\"===str[curr];)escaped=!escaped;return escaped?"|":" |"}).split(/ \|/);let i=0;if(cells[0].trim()||cells.shift(),cells.length>0&&!cells[cells.length-1].trim()&&cells.pop(),cells.length>count)cells.splice(count);else for(;cells.length<count;)cells.push("");for(;i<cells.length;i++)cells[i]=cells[i].trim().replace(/\\\|/g,"|");return cells}function rtrim(str,c,invert){const l=str.length;if(0===l)return"";let suffLen=0;for(;suffLen<l;){const currChar=str.charAt(l-suffLen-1);if(currChar!==c||invert){if(currChar===c||!invert)break;suffLen++}else suffLen++}return str.slice(0,l-suffLen)}function findClosingBracket(str,b){if(-1===str.indexOf(b[1]))return-1;const l=str.length;let level=0,i=0;for(;i<l;i++)if("\\"===str[i])i++;else if(str[i]===b[0])level++;else if(str[i]===b[1]&&(level--,level<0))return i;return-1}function checkDeprecations(opt,callback){!opt||opt.silent||(callback&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(opt.sanitize||opt.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(opt.highlight||"language-"!==opt.langPrefix)&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),opt.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),opt.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),opt.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),opt.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(opt.headerIds||opt.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function outputLink(cap,link,raw,lexer2){const href=link.href,title=link.title?marked_esm_escape(link.title):null,text=cap[1].replace(/\\([\[\]])/g,"$1");if("!"!==cap[0].charAt(0)){lexer2.state.inLink=!0;const token={type:"link",raw,href,title,text,tokens:lexer2.inlineTokens(text)};return lexer2.state.inLink=!1,token}return{type:"image",raw,href,title,text:marked_esm_escape(text)}}function indentCodeCompensation(raw,text){const matchIndentToCode=raw.match(/^(\s+)(?:```)/);if(null===matchIndentToCode)return text;const indentToCode=matchIndentToCode[1];return text.split("\n").map(node=>{const matchIndentInNode=node.match(/^\s+/);if(null===matchIndentInNode)return node;const[indentInNode]=matchIndentInNode;return indentInNode.length>=indentToCode.length?node.slice(indentToCode.length):node}).join("\n")}__name(splitCells,"splitCells"),__name(rtrim,"rtrim"),__name(findClosingBracket,"findClosingBracket"),__name(checkDeprecations,"checkDeprecations"),__name(outputLink,"outputLink"),__name(indentCodeCompensation,"indentCodeCompensation");class Tokenizer{constructor(options2){this.options=options2||defaults}space(src){const cap=this.rules.block.newline.exec(src);if(cap&&cap[0].length>0)return{type:"space",raw:cap[0]}}code(src){const cap=this.rules.block.code.exec(src);if(cap){const text=cap[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:cap[0],codeBlockStyle:"indented",text:this.options.pedantic?text:rtrim(text,"\n")}}}fences(src){const cap=this.rules.block.fences.exec(src);if(cap){const raw=cap[0],text=indentCodeCompensation(raw,cap[3]||"");return{type:"code",raw,lang:cap[2]?cap[2].trim().replace(this.rules.inline._escapes,"$1"):cap[2],text}}}heading(src){const cap=this.rules.block.heading.exec(src);if(cap){let text=cap[2].trim();if(/#$/.test(text)){const trimmed=rtrim(text,"#");(this.options.pedantic||!trimmed||/ $/.test(trimmed))&&(text=trimmed.trim())}return{type:"heading",raw:cap[0],depth:cap[1].length,text,tokens:this.lexer.inline(text)}}}hr(src){const cap=this.rules.block.hr.exec(src);if(cap)return{type:"hr",raw:cap[0]}}blockquote(src){const cap=this.rules.block.blockquote.exec(src);if(cap){const text=cap[0].replace(/^ *>[ \t]?/gm,""),top=this.lexer.state.top;this.lexer.state.top=!0;const tokens=this.lexer.blockTokens(text);return this.lexer.state.top=top,{type:"blockquote",raw:cap[0],tokens,text}}}list(src){let cap=this.rules.block.list.exec(src);if(cap){let raw,istask,ischecked,indent,i,blankLine,endsWithBlankLine,line,nextLine,rawLine,itemContents,endEarly,bull=cap[1].trim();const isordered=bull.length>1,list={type:"list",raw:"",ordered:isordered,start:isordered?+bull.slice(0,-1):"",loose:!1,items:[]};bull=isordered?`\\d{1,9}\\${bull.slice(-1)}`:`\\${bull}`,this.options.pedantic&&(bull=isordered?bull:"[*+-]");const itemRegex=new RegExp(`^( {0,3}${bull})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;src&&(endEarly=!1,(cap=itemRegex.exec(src))&&!this.rules.block.hr.test(src));){if(raw=cap[0],src=src.substring(raw.length),line=cap[2].split("\n",1)[0].replace(/^\t+/,t=>" ".repeat(3*t.length)),nextLine=src.split("\n",1)[0],this.options.pedantic?(indent=2,itemContents=line.trimLeft()):(indent=cap[2].search(/[^ ]/),indent=indent>4?1:indent,itemContents=line.slice(indent),indent+=cap[1].length),blankLine=!1,!line&&/^ *$/.test(nextLine)&&(raw+=nextLine+"\n",src=src.substring(nextLine.length+1),endEarly=!0),!endEarly){const nextBulletRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}(?:\`\`\`|~~~)`),headingBeginRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}#`);for(;src&&(rawLine=src.split("\n",1)[0],nextLine=rawLine,this.options.pedantic&&(nextLine=nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(fencesBeginRegex.test(nextLine)||headingBeginRegex.test(nextLine)||nextBulletRegex.test(nextLine)||hrRegex.test(src)));){if(nextLine.search(/[^ ]/)>=indent||!nextLine.trim())itemContents+="\n"+nextLine.slice(indent);else{if(blankLine||line.search(/[^ ]/)>=4||fencesBeginRegex.test(line)||headingBeginRegex.test(line)||hrRegex.test(line))break;itemContents+="\n"+nextLine}!blankLine&&!nextLine.trim()&&(blankLine=!0),raw+=rawLine+"\n",src=src.substring(rawLine.length+1),line=nextLine.slice(indent)}}list.loose||(endsWithBlankLine?list.loose=!0:/\n *\n *$/.test(raw)&&(endsWithBlankLine=!0)),this.options.gfm&&(istask=/^\[[ xX]\] /.exec(itemContents),istask&&(ischecked="[ ] "!==istask[0],itemContents=itemContents.replace(/^\[[ xX]\] +/,""))),list.items.push({type:"list_item",raw,task:!!istask,checked:ischecked,loose:!1,text:itemContents}),list.raw+=raw}list.items[list.items.length-1].raw=raw.trimRight(),list.items[list.items.length-1].text=itemContents.trimRight(),list.raw=list.raw.trimRight();const l=list.items.length;for(i=0;i<l;i++)if(this.lexer.state.top=!1,list.items[i].tokens=this.lexer.blockTokens(list.items[i].text,[]),!list.loose){const spacers=list.items[i].tokens.filter(t=>"space"===t.type),hasMultipleLineBreaks=spacers.length>0&&spacers.some(t=>/\n.*\n/.test(t.raw));list.loose=hasMultipleLineBreaks}if(list.loose)for(i=0;i<l;i++)list.items[i].loose=!0;return list}}html(src){const cap=this.rules.block.html.exec(src);if(cap){const token={type:"html",block:!0,raw:cap[0],pre:!this.options.sanitizer&&("pre"===cap[1]||"script"===cap[1]||"style"===cap[1]),text:cap[0]};if(this.options.sanitize){const text=this.options.sanitizer?this.options.sanitizer(cap[0]):marked_esm_escape(cap[0]);token.type="paragraph",token.text=text,token.tokens=this.lexer.inline(text)}return token}}def(src){const cap=this.rules.block.def.exec(src);if(cap){const tag=cap[1].toLowerCase().replace(/\s+/g," "),href=cap[2]?cap[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",title=cap[3]?cap[3].substring(1,cap[3].length-1).replace(this.rules.inline._escapes,"$1"):cap[3];return{type:"def",tag,raw:cap[0],href,title}}}table(src){const cap=this.rules.block.table.exec(src);if(cap){const item={type:"table",header:splitCells(cap[1]).map(c=>({text:c})),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:cap[3]&&cap[3].trim()?cap[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(item.header.length===item.align.length){item.raw=cap[0];let i,j,k,row,l=item.align.length;for(i=0;i<l;i++)item.align[i]=/^ *-+: *$/.test(item.align[i])?"right":/^ *:-+: *$/.test(item.align[i])?"center":/^ *:-+ *$/.test(item.align[i])?"left":null;for(l=item.rows.length,i=0;i<l;i++)item.rows[i]=splitCells(item.rows[i],item.header.length).map(c=>({text:c}));for(l=item.header.length,j=0;j<l;j++)item.header[j].tokens=this.lexer.inline(item.header[j].text);for(l=item.rows.length,j=0;j<l;j++)for(row=item.rows[j],k=0;k<row.length;k++)row[k].tokens=this.lexer.inline(row[k].text);return item}}}lheading(src){const cap=this.rules.block.lheading.exec(src);if(cap)return{type:"heading",raw:cap[0],depth:"="===cap[2].charAt(0)?1:2,text:cap[1],tokens:this.lexer.inline(cap[1])}}paragraph(src){const cap=this.rules.block.paragraph.exec(src);if(cap){const text="\n"===cap[1].charAt(cap[1].length-1)?cap[1].slice(0,-1):cap[1];return{type:"paragraph",raw:cap[0],text,tokens:this.lexer.inline(text)}}}text(src){const cap=this.rules.block.text.exec(src);if(cap)return{type:"text",raw:cap[0],text:cap[0],tokens:this.lexer.inline(cap[0])}}escape(src){const cap=this.rules.inline.escape.exec(src);if(cap)return{type:"escape",raw:cap[0],text:marked_esm_escape(cap[1])}}tag(src){const cap=this.rules.inline.tag.exec(src);if(cap)return!this.lexer.state.inLink&&/^<a /i.test(cap[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(cap[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:cap[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):marked_esm_escape(cap[0]):cap[0]}}link(src){const cap=this.rules.inline.link.exec(src);if(cap){const trimmedUrl=cap[2].trim();if(!this.options.pedantic&&/^</.test(trimmedUrl)){if(!/>$/.test(trimmedUrl))return;const rtrimSlash=rtrim(trimmedUrl.slice(0,-1),"\\");if((trimmedUrl.length-rtrimSlash.length)%2==0)return}else{const lastParenIndex=findClosingBracket(cap[2],"()");if(lastParenIndex>-1){const linkLen=(0===cap[0].indexOf("!")?5:4)+cap[1].length+lastParenIndex;cap[2]=cap[2].substring(0,lastParenIndex),cap[0]=cap[0].substring(0,linkLen).trim(),cap[3]=""}}let href=cap[2],title="";if(this.options.pedantic){const link=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);link&&(href=link[1],title=link[3])}else title=cap[3]?cap[3].slice(1,-1):"";return href=href.trim(),/^</.test(href)&&(href=this.options.pedantic&&!/>$/.test(trimmedUrl)?href.slice(1):href.slice(1,-1)),outputLink(cap,{href:href&&href.replace(this.rules.inline._escapes,"$1"),title:title&&title.replace(this.rules.inline._escapes,"$1")},cap[0],this.lexer)}}reflink(src,links){let cap;if((cap=this.rules.inline.reflink.exec(src))||(cap=this.rules.inline.nolink.exec(src))){let link=(cap[2]||cap[1]).replace(/\s+/g," ");if(link=links[link.toLowerCase()],!link){const text=cap[0].charAt(0);return{type:"text",raw:text,text}}return outputLink(cap,link,cap[0],this.lexer)}}emStrong(src,maskedSrc,prevChar=""){let match=this.rules.inline.emStrong.lDelim.exec(src);if(!match||match[3]&&prevChar.match(/[\p{L}\p{N}]/u))return;const nextChar=match[1]||match[2]||"";if(!nextChar||nextChar&&(""===prevChar||this.rules.inline.punctuation.exec(prevChar))){const lLength=match[0].length-1;let rDelim,rLength,delimTotal=lLength,midDelimTotal=0;const endReg="*"===match[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(endReg.lastIndex=0,maskedSrc=maskedSrc.slice(-1*src.length+lLength);null!=(match=endReg.exec(maskedSrc));){if(rDelim=match[1]||match[2]||match[3]||match[4]||match[5]||match[6],!rDelim)continue;if(rLength=rDelim.length,match[3]||match[4]){delimTotal+=rLength;continue}if((match[5]||match[6])&&lLength%3&&!((lLength+rLength)%3)){midDelimTotal+=rLength;continue}if(delimTotal-=rLength,delimTotal>0)continue;rLength=Math.min(rLength,rLength+delimTotal+midDelimTotal);const raw=src.slice(0,lLength+match.index+(match[0].length-rDelim.length)+rLength);if(Math.min(lLength,rLength)%2){const text2=raw.slice(1,-1);return{type:"em",raw,text:text2,tokens:this.lexer.inlineTokens(text2)}}const text=raw.slice(2,-2);return{type:"strong",raw,text,tokens:this.lexer.inlineTokens(text)}}}}codespan(src){const cap=this.rules.inline.code.exec(src);if(cap){let text=cap[2].replace(/\n/g," ");const hasNonSpaceChars=/[^ ]/.test(text),hasSpaceCharsOnBothEnds=/^ /.test(text)&&/ $/.test(text);return hasNonSpaceChars&&hasSpaceCharsOnBothEnds&&(text=text.substring(1,text.length-1)),text=marked_esm_escape(text,!0),{type:"codespan",raw:cap[0],text}}}br(src){const cap=this.rules.inline.br.exec(src);if(cap)return{type:"br",raw:cap[0]}}del(src){const cap=this.rules.inline.del.exec(src);if(cap)return{type:"del",raw:cap[0],text:cap[2],tokens:this.lexer.inlineTokens(cap[2])}}autolink(src,mangle2){const cap=this.rules.inline.autolink.exec(src);if(cap){let text,href;return"@"===cap[2]?(text=marked_esm_escape(this.options.mangle?mangle2(cap[1]):cap[1]),href="mailto:"+text):(text=marked_esm_escape(cap[1]),href=text),{type:"link",raw:cap[0],text,href,tokens:[{type:"text",raw:text,text}]}}}url(src,mangle2){let cap;if(cap=this.rules.inline.url.exec(src)){let text,href;if("@"===cap[2])text=marked_esm_escape(this.options.mangle?mangle2(cap[0]):cap[0]),href="mailto:"+text;else{let prevCapZero;do{prevCapZero=cap[0],cap[0]=this.rules.inline._backpedal.exec(cap[0])[0]}while(prevCapZero!==cap[0]);text=marked_esm_escape(cap[0]),href="www."===cap[1]?"http://"+cap[0]:cap[0]}return{type:"link",raw:cap[0],text,href,tokens:[{type:"text",raw:text,text}]}}}inlineText(src,smartypants2){const cap=this.rules.inline.text.exec(src);if(cap){let text;return text=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):marked_esm_escape(cap[0]):cap[0]:marked_esm_escape(this.options.smartypants?smartypants2(cap[0]):cap[0]),{type:"text",raw:cap[0],text}}}}__name(Tokenizer,"Tokenizer");const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex(),block.bullet=/(?:[*+-]|\d{1,9}[.)])/,block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex(),block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex(),block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),block.lheading=edit(block.lheading).replace(/bull/g,block.bullet).getRegex(),block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex(),block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex(),block.normal={...block},block.gfm={...block.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex(),block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex(),block.pedantic={...block.normal,html:edit("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function smartypants(text){return text.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function mangle(text){let i,ch,out="";const l=text.length;for(i=0;i<l;i++)ch=text.charCodeAt(i),Math.random()>.5&&(ch="x"+ch.toString(16)),out+="&#"+ch+";";return out}inline._uc_punctuation="\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65",inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"+inline._uc_punctuation,inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex(),inline.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,inline.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,inline._comment=edit(block._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex(),inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex(),inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex(),inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex(),inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex(),inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex(),inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex(),inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex(),inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex(),inline.normal={...inline},inline.pedantic={...inline.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()},inline.gfm={...inline.normal,escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex(),inline.breaks={...inline.gfm,br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},__name(smartypants,"smartypants"),__name(mangle,"mangle");class Lexer{constructor(options2){this.tokens=[],this.tokens.links=Object.create(null),this.options=options2||defaults,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const rules={block:block.normal,inline:inline.normal};this.options.pedantic?(rules.block=block.pedantic,rules.inline=inline.pedantic):this.options.gfm&&(rules.block=block.gfm,rules.inline=this.options.breaks?inline.breaks:inline.gfm),this.tokenizer.rules=rules}static get rules(){return{block,inline}}static lex(src,options2){return new Lexer(options2).lex(src)}static lexInline(src,options2){return new Lexer(options2).inlineTokens(src)}lex(src){let next;for(src=src.replace(/\r\n|\r/g,"\n"),this.blockTokens(src,this.tokens);next=this.inlineQueue.shift();)this.inlineTokens(next.src,next.tokens);return this.tokens}blockTokens(src,tokens=[]){let token,lastToken,cutSrc,lastParagraphClipped;for(src=this.options.pedantic?src.replace(/\t/g,"    ").replace(/^ +$/gm,""):src.replace(/^( *)(\t+)/gm,(_,leading,tabs)=>leading+"    ".repeat(tabs.length));src;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(extTokenizer=>!!(token=extTokenizer.call({lexer:this},src,tokens))&&(src=src.substring(token.raw.length),tokens.push(token),!0)))){if(token=this.tokenizer.space(src)){src=src.substring(token.raw.length),1===token.raw.length&&tokens.length>0?tokens[tokens.length-1].raw+="\n":tokens.push(token);continue}if(token=this.tokenizer.code(src)){src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],!lastToken||"paragraph"!==lastToken.type&&"text"!==lastToken.type?tokens.push(token):(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text);continue}if(token=this.tokenizer.fences(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.heading(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.hr(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.blockquote(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.list(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.html(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.def(src)){src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],!lastToken||"paragraph"!==lastToken.type&&"text"!==lastToken.type?this.tokens.links[token.tag]||(this.tokens.links[token.tag]={href:token.href,title:token.title}):(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.raw,this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text);continue}if(token=this.tokenizer.table(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.lheading(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(cutSrc=src,this.options.extensions&&this.options.extensions.startBlock){let startIndex=1/0;const tempSrc=src.slice(1);let tempStart;this.options.extensions.startBlock.forEach(function(getStartIndex){tempStart=getStartIndex.call({lexer:this},tempSrc),"number"==typeof tempStart&&tempStart>=0&&(startIndex=Math.min(startIndex,tempStart))}),startIndex<1/0&&startIndex>=0&&(cutSrc=src.substring(0,startIndex+1))}if(this.state.top&&(token=this.tokenizer.paragraph(cutSrc))){lastToken=tokens[tokens.length-1],lastParagraphClipped&&"paragraph"===lastToken.type?(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text):tokens.push(token),lastParagraphClipped=cutSrc.length!==src.length,src=src.substring(token.raw.length);continue}if(token=this.tokenizer.text(src)){src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===lastToken.type?(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text):tokens.push(token);continue}if(src){const errMsg="Infinite loop on byte: "+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}throw new Error(errMsg)}}return this.state.top=!0,tokens}inline(src,tokens=[]){return this.inlineQueue.push({src,tokens}),tokens}inlineTokens(src,tokens=[]){let token,lastToken,cutSrc,match,keepPrevChar,prevChar,maskedSrc=src;if(this.tokens.links){const links=Object.keys(this.tokens.links);if(links.length>0)for(;null!=(match=this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc));)links.includes(match[0].slice(match[0].lastIndexOf("[")+1,-1))&&(maskedSrc=maskedSrc.slice(0,match.index)+"["+"a".repeat(match[0].length-2)+"]"+maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(match=this.tokenizer.rules.inline.blockSkip.exec(maskedSrc));)maskedSrc=maskedSrc.slice(0,match.index)+"["+"a".repeat(match[0].length-2)+"]"+maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(match=this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc));)maskedSrc=maskedSrc.slice(0,match.index+match[0].length-2)+"++"+maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;src;)if(keepPrevChar||(prevChar=""),keepPrevChar=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(extTokenizer=>!!(token=extTokenizer.call({lexer:this},src,tokens))&&(src=src.substring(token.raw.length),tokens.push(token),!0)))){if(token=this.tokenizer.escape(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.tag(src)){src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===token.type&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);continue}if(token=this.tokenizer.link(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.reflink(src,this.tokens.links)){src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===token.type&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);continue}if(token=this.tokenizer.emStrong(src,maskedSrc,prevChar)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.codespan(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.br(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.del(src)){src=src.substring(token.raw.length),tokens.push(token);continue}if(token=this.tokenizer.autolink(src,mangle)){src=src.substring(token.raw.length),tokens.push(token);continue}if(!this.state.inLink&&(token=this.tokenizer.url(src,mangle))){src=src.substring(token.raw.length),tokens.push(token);continue}if(cutSrc=src,this.options.extensions&&this.options.extensions.startInline){let startIndex=1/0;const tempSrc=src.slice(1);let tempStart;this.options.extensions.startInline.forEach(function(getStartIndex){tempStart=getStartIndex.call({lexer:this},tempSrc),"number"==typeof tempStart&&tempStart>=0&&(startIndex=Math.min(startIndex,tempStart))}),startIndex<1/0&&startIndex>=0&&(cutSrc=src.substring(0,startIndex+1))}if(token=this.tokenizer.inlineText(cutSrc,smartypants)){src=src.substring(token.raw.length),"_"!==token.raw.slice(-1)&&(prevChar=token.raw.slice(-1)),keepPrevChar=!0,lastToken=tokens[tokens.length-1],lastToken&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);continue}if(src){const errMsg="Infinite loop on byte: "+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}throw new Error(errMsg)}}return tokens}}__name(Lexer,"Lexer");class marked_esm_Renderer{constructor(options2){this.options=options2||defaults}code(code,infostring,escaped){const lang=(infostring||"").match(/\S*/)[0];if(this.options.highlight){const out=this.options.highlight(code,lang);null!=out&&out!==code&&(escaped=!0,code=out)}return code=code.replace(/\n$/,"")+"\n",lang?'<pre><code class="'+this.options.langPrefix+marked_esm_escape(lang)+'">'+(escaped?code:marked_esm_escape(code,!0))+"</code></pre>\n":"<pre><code>"+(escaped?code:marked_esm_escape(code,!0))+"</code></pre>\n"}blockquote(quote){return`<blockquote>\n${quote}</blockquote>\n`}html(html,block2){return html}heading(text,level,raw,slugger){return this.options.headerIds?`<h${level} id="${this.options.headerPrefix+slugger.slug(raw)}">${text}</h${level}>\n`:`<h${level}>${text}</h${level}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(body,ordered,start){const type=ordered?"ol":"ul";return"<"+type+(ordered&&1!==start?' start="'+start+'"':"")+">\n"+body+"</"+type+">\n"}listitem(text){return`<li>${text}</li>\n`}checkbox(checked){return"<input "+(checked?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(text){return`<p>${text}</p>\n`}table(header,body){return body&&(body=`<tbody>${body}</tbody>`),"<table>\n<thead>\n"+header+"</thead>\n"+body+"</table>\n"}tablerow(content){return`<tr>\n${content}</tr>\n`}tablecell(content,flags){const type=flags.header?"th":"td";return(flags.align?`<${type} align="${flags.align}">`:`<${type}>`)+content+`</${type}>\n`}strong(text){return`<strong>${text}</strong>`}em(text){return`<em>${text}</em>`}codespan(text){return`<code>${text}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(text){return`<del>${text}</del>`}link(href,title,text){if(null===(href=cleanUrl(this.options.sanitize,this.options.baseUrl,href)))return text;let out='<a href="'+href+'"';return title&&(out+=' title="'+title+'"'),out+=">"+text+"</a>",out}image(href,title,text){if(null===(href=cleanUrl(this.options.sanitize,this.options.baseUrl,href)))return text;let out=`<img src="${href}" alt="${text}"`;return title&&(out+=` title="${title}"`),out+=this.options.xhtml?"/>":">",out}text(text){return text}}__name(marked_esm_Renderer,"marked_esm_Renderer");class TextRenderer{strong(text){return text}em(text){return text}codespan(text){return text}del(text){return text}html(text){return text}text(text){return text}link(href,title,text){return""+text}image(href,title,text){return""+text}br(){return""}}__name(TextRenderer,"TextRenderer");class Slugger{constructor(){this.seen={}}serialize(value){return value.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(originalSlug,isDryRun){let slug=originalSlug,occurenceAccumulator=0;if(this.seen.hasOwnProperty(slug)){occurenceAccumulator=this.seen[originalSlug];do{occurenceAccumulator++,slug=originalSlug+"-"+occurenceAccumulator}while(this.seen.hasOwnProperty(slug))}return isDryRun||(this.seen[originalSlug]=occurenceAccumulator,this.seen[slug]=0),slug}slug(value,options2={}){const slug=this.serialize(value);return this.getNextSafeSlug(slug,options2.dryrun)}}__name(Slugger,"Slugger");class Parser{constructor(options2){this.options=options2||defaults,this.options.renderer=this.options.renderer||new marked_esm_Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(tokens,options2){return new Parser(options2).parse(tokens)}static parseInline(tokens,options2){return new Parser(options2).parseInline(tokens)}parse(tokens,top=!0){let i,j,k,l2,l3,row,cell,header,body,token,ordered,start,loose,itemBody,item,checked,task,checkbox,ret,out="";const l=tokens.length;for(i=0;i<l;i++)if(token=tokens[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[token.type]&&(ret=this.options.extensions.renderers[token.type].call({parser:this},token),!1!==ret||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(token.type)))out+=ret||"";else switch(token.type){case"space":continue;case"hr":out+=this.renderer.hr();continue;case"heading":out+=this.renderer.heading(this.parseInline(token.tokens),token.depth,marked_esm_unescape(this.parseInline(token.tokens,this.textRenderer)),this.slugger);continue;case"code":out+=this.renderer.code(token.text,token.lang,token.escaped);continue;case"table":for(header="",cell="",l2=token.header.length,j=0;j<l2;j++)cell+=this.renderer.tablecell(this.parseInline(token.header[j].tokens),{header:!0,align:token.align[j]});for(header+=this.renderer.tablerow(cell),body="",l2=token.rows.length,j=0;j<l2;j++){for(row=token.rows[j],cell="",l3=row.length,k=0;k<l3;k++)cell+=this.renderer.tablecell(this.parseInline(row[k].tokens),{header:!1,align:token.align[k]});body+=this.renderer.tablerow(cell)}out+=this.renderer.table(header,body);continue;case"blockquote":body=this.parse(token.tokens),out+=this.renderer.blockquote(body);continue;case"list":for(ordered=token.ordered,start=token.start,loose=token.loose,l2=token.items.length,body="",j=0;j<l2;j++)item=token.items[j],checked=item.checked,task=item.task,itemBody="",item.task&&(checkbox=this.renderer.checkbox(checked),loose?item.tokens.length>0&&"paragraph"===item.tokens[0].type?(item.tokens[0].text=checkbox+" "+item.tokens[0].text,item.tokens[0].tokens&&item.tokens[0].tokens.length>0&&"text"===item.tokens[0].tokens[0].type&&(item.tokens[0].tokens[0].text=checkbox+" "+item.tokens[0].tokens[0].text)):item.tokens.unshift({type:"text",text:checkbox}):itemBody+=checkbox),itemBody+=this.parse(item.tokens,loose),body+=this.renderer.listitem(itemBody,task,checked);out+=this.renderer.list(body,ordered,start);continue;case"html":out+=this.renderer.html(token.text,token.block);continue;case"paragraph":out+=this.renderer.paragraph(this.parseInline(token.tokens));continue;case"text":for(body=token.tokens?this.parseInline(token.tokens):token.text;i+1<l&&"text"===tokens[i+1].type;)token=tokens[++i],body+="\n"+(token.tokens?this.parseInline(token.tokens):token.text);out+=top?this.renderer.paragraph(body):body;continue;default:{const errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent)return void console.error(errMsg);throw new Error(errMsg)}}return out}parseInline(tokens,renderer){renderer=renderer||this.renderer;let i,token,ret,out="";const l=tokens.length;for(i=0;i<l;i++)if(token=tokens[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[token.type]&&(ret=this.options.extensions.renderers[token.type].call({parser:this},token),!1!==ret||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(token.type)))out+=ret||"";else switch(token.type){case"escape":case"text":out+=renderer.text(token.text);break;case"html":out+=renderer.html(token.text);break;case"link":out+=renderer.link(token.href,token.title,this.parseInline(token.tokens,renderer));break;case"image":out+=renderer.image(token.href,token.title,token.text);break;case"strong":out+=renderer.strong(this.parseInline(token.tokens,renderer));break;case"em":out+=renderer.em(this.parseInline(token.tokens,renderer));break;case"codespan":out+=renderer.codespan(token.text);break;case"br":out+=renderer.br();break;case"del":out+=renderer.del(this.parseInline(token.tokens,renderer));break;default:{const errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent)return void console.error(errMsg);throw new Error(errMsg)}}return out}}__name(Parser,"Parser");class Hooks{constructor(options2){this.options=options2||defaults}preprocess(markdown){return markdown}postprocess(html){return html}}function onError(silent,async,callback){return e=>{if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",silent){const msg="<p>An error occurred:</p><pre>"+marked_esm_escape(e.message+"",!0)+"</pre>";return async?Promise.resolve(msg):callback?void callback(null,msg):msg}if(async)return Promise.reject(e);if(!callback)throw e;callback(e)}}function parseMarkdown(lexer2,parser2){return(src,opt,callback)=>{"function"==typeof opt&&(callback=opt,opt=null);const origOpt={...opt},throwError=onError((opt={...marked.defaults,...origOpt}).silent,opt.async,callback);if(typeof src>"u"||null===src)return throwError(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof src)return throwError(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(src)+", string expected"));if(checkDeprecations(opt,callback),opt.hooks&&(opt.hooks.options=opt),callback){const highlight=opt.highlight;let tokens;try{opt.hooks&&(src=opt.hooks.preprocess(src)),tokens=lexer2(src,opt)}catch(e){return throwError(e)}const done=__name(function(err){let out;if(!err)try{opt.walkTokens&&marked.walkTokens(tokens,opt.walkTokens),out=parser2(tokens,opt),opt.hooks&&(out=opt.hooks.postprocess(out))}catch(e){err=e}return opt.highlight=highlight,err?throwError(err):callback(null,out)},"done");if(!highlight||highlight.length<3||(delete opt.highlight,!tokens.length))return done();let pending=0;return marked.walkTokens(tokens,function(token){"code"===token.type&&(pending++,setTimeout(()=>{highlight(token.text,token.lang,function(err,code){if(err)return done(err);null!=code&&code!==token.text&&(token.text=code,token.escaped=!0),pending--,0===pending&&done()})},0))}),void(0===pending&&done())}if(opt.async)return Promise.resolve(opt.hooks?opt.hooks.preprocess(src):src).then(src2=>lexer2(src2,opt)).then(tokens=>opt.walkTokens?Promise.all(marked.walkTokens(tokens,opt.walkTokens)).then(()=>tokens):tokens).then(tokens=>parser2(tokens,opt)).then(html=>opt.hooks?opt.hooks.postprocess(html):html).catch(throwError);try{opt.hooks&&(src=opt.hooks.preprocess(src));const tokens=lexer2(src,opt);opt.walkTokens&&marked.walkTokens(tokens,opt.walkTokens);let html=parser2(tokens,opt);return opt.hooks&&(html=opt.hooks.postprocess(html)),html}catch(e){return throwError(e)}}}function marked(src,opt,callback){return parseMarkdown(Lexer.lex,Parser.parse)(src,opt,callback)}__name(Hooks,"Hooks"),_defineProperty(Hooks,"passThroughHooks",new Set(["preprocess","postprocess"])),__name(onError,"onError"),__name(parseMarkdown,"parseMarkdown"),__name(marked,"marked"),marked.options=marked.setOptions=function(opt){return changeDefaults(marked.defaults={...marked.defaults,...opt}),marked},marked.getDefaults=getDefaults,marked.defaults=defaults,marked.use=function(...args){const extensions=marked.defaults.extensions||{renderers:{},childTokens:{}};args.forEach(pack=>{const opts={...pack};if(opts.async=marked.defaults.async||opts.async||!1,pack.extensions&&(pack.extensions.forEach(ext=>{if(!ext.name)throw new Error("extension name required");if(ext.renderer){const prevRenderer=extensions.renderers[ext.name];extensions.renderers[ext.name]=prevRenderer?function(...args2){let ret=ext.renderer.apply(this,args2);return!1===ret&&(ret=prevRenderer.apply(this,args2)),ret}:ext.renderer}if(ext.tokenizer){if(!ext.level||"block"!==ext.level&&"inline"!==ext.level)throw new Error("extension level must be 'block' or 'inline'");extensions[ext.level]?extensions[ext.level].unshift(ext.tokenizer):extensions[ext.level]=[ext.tokenizer],ext.start&&("block"===ext.level?extensions.startBlock?extensions.startBlock.push(ext.start):extensions.startBlock=[ext.start]:"inline"===ext.level&&(extensions.startInline?extensions.startInline.push(ext.start):extensions.startInline=[ext.start]))}ext.childTokens&&(extensions.childTokens[ext.name]=ext.childTokens)}),opts.extensions=extensions),pack.renderer){const renderer=marked.defaults.renderer||new marked_esm_Renderer;for(const prop in pack.renderer){const prevRenderer=renderer[prop];renderer[prop]=(...args2)=>{let ret=pack.renderer[prop].apply(renderer,args2);return!1===ret&&(ret=prevRenderer.apply(renderer,args2)),ret}}opts.renderer=renderer}if(pack.tokenizer){const tokenizer=marked.defaults.tokenizer||new Tokenizer;for(const prop in pack.tokenizer){const prevTokenizer=tokenizer[prop];tokenizer[prop]=(...args2)=>{let ret=pack.tokenizer[prop].apply(tokenizer,args2);return!1===ret&&(ret=prevTokenizer.apply(tokenizer,args2)),ret}}opts.tokenizer=tokenizer}if(pack.hooks){const hooks=marked.defaults.hooks||new Hooks;for(const prop in pack.hooks){const prevHook=hooks[prop];hooks[prop]=Hooks.passThroughHooks.has(prop)?arg=>{if(marked.defaults.async)return Promise.resolve(pack.hooks[prop].call(hooks,arg)).then(ret2=>prevHook.call(hooks,ret2));const ret=pack.hooks[prop].call(hooks,arg);return prevHook.call(hooks,ret)}:(...args2)=>{let ret=pack.hooks[prop].apply(hooks,args2);return!1===ret&&(ret=prevHook.apply(hooks,args2)),ret}}opts.hooks=hooks}if(pack.walkTokens){const walkTokens2=marked.defaults.walkTokens;opts.walkTokens=function(token){let values=[];return values.push(pack.walkTokens.call(this,token)),walkTokens2&&(values=values.concat(walkTokens2.call(this,token))),values}}marked.setOptions(opts)})},marked.walkTokens=function(tokens,callback){let values=[];for(const token of tokens)switch(values=values.concat(callback.call(marked,token)),token.type){case"table":for(const cell of token.header)values=values.concat(marked.walkTokens(cell.tokens,callback));for(const row of token.rows)for(const cell of row)values=values.concat(marked.walkTokens(cell.tokens,callback));break;case"list":values=values.concat(marked.walkTokens(token.items,callback));break;default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[token.type]?marked.defaults.extensions.childTokens[token.type].forEach(function(childTokens){values=values.concat(marked.walkTokens(token[childTokens],callback))}):token.tokens&&(values=values.concat(marked.walkTokens(token.tokens,callback)))}return values},marked.parseInline=parseMarkdown(Lexer.lexInline,Parser.parseInline),marked.Parser=Parser,marked.parser=Parser.parse,marked.Renderer=marked_esm_Renderer,marked.TextRenderer=TextRenderer,marked.Lexer=Lexer,marked.lexer=Lexer.lex,marked.Tokenizer=Tokenizer,marked.Slugger=Slugger,marked.Hooks=Hooks,marked.parse=marked;var http=__webpack_require__(3144),platform_browser=__webpack_require__(6550);let ClipboardButtonComponent=(()=>{class ClipboardButtonComponent2{constructor(){this._buttonClick$=new Subject.x,this.copied$=this._buttonClick$.pipe((0,switchMap.w)(()=>(0,merge.T)((0,of2.of)(!0),timer(3e3).pipe((0,mapTo.h)(!1)))),distinctUntilChanged(),shareReplay(1)),this.copiedText$=this.copied$.pipe((0,startWith.O)(!1),(0,map.U)(copied=>copied?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return __name(ClipboardButtonComponent2,"ClipboardButtonComponent"),ClipboardButtonComponent2.\u0275fac=__name(function(t){return new(t||ClipboardButtonComponent2)},"ClipboardButtonComponent_Factory"),ClipboardButtonComponent2.\u0275cmp=core.Xpm({type:ClipboardButtonComponent2,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"button",0),core.NdJ("click",__name(function(){return ctx.onCopyToClipboardClick()},"ClipboardButtonComponent_Template_button_click_0_listener")),core.ALo(1,"async"),core._uU(2),core.ALo(3,"async"),core.qZA()),2&rf&&(core.ekj("copied",core.lcZ(1,3,ctx.copied$)),core.xp6(2),core.Oqu(core.lcZ(3,5,ctx.copiedText$)))},"ClipboardButtonComponent_Template"),dependencies:[common.Ov],encapsulation:2,changeDetection:0}),ClipboardButtonComponent2})();class ClipboardOptions{}__name(ClipboardOptions,"ClipboardOptions"),__name(class ClipboardRenderOptions extends(null){},"ClipboardRenderOptions"),__name(class KatexSpecificOptions{},"KatexSpecificOptions");class MarkedOptions{}__name(MarkedOptions,"MarkedOptions");const SECURITY_CONTEXT=new core.OlP("SECURITY_CONTEXT");__name(class ExtendedRenderer extends(null){constructor(){super(...arguments),this.\u0275NgxMarkdownRendererExtended=!1}},"ExtendedRenderer");let MarkdownService=(()=>{class MarkdownService2{get options(){return this._options}set options(value){this._options={...this.DEFAULT_MARKED_OPTIONS,...value}}get renderer(){return this.options.renderer}set renderer(value){this.options.renderer=value}constructor(platform,securityContext,http2,clipboardOptions,options2,sanitizer){this.platform=platform,this.securityContext=securityContext,this.http=http2,this.clipboardOptions=clipboardOptions,this.sanitizer=sanitizer,this.DEFAULT_MARKED_OPTIONS={renderer:new marked_esm_Renderer},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Subject.x,this.reload$=this._reload$.asObservable(),this.options=options2}parse(markdown,parseOptions=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml,inline:inline2,emoji,mermaid:mermaid2,disableSanitizer}=parseOptions,markedOptions={...this.options,...parseOptions.markedOptions};mermaid2&&(this.renderer=this.extendRenderer(markedOptions.renderer||new marked_esm_Renderer));const trimmed=this.trimIndentation(markdown),decoded=decodeHtml?this.decodeHtml(trimmed):trimmed,emojified=emoji?this.parseEmoji(decoded):decoded,marked2=this.parseMarked(emojified,markedOptions,inline2);return(disableSanitizer?marked2:this.sanitizer.sanitize(this.securityContext,marked2))||""}render(element,options2=this.DEFAULT_RENDER_OPTIONS,viewContainerRef){const{clipboard,clipboardOptions,katex:katex2,katexOptions,mermaid:mermaid2,mermaidOptions}=options2;clipboard&&this.renderClipboard(element,viewContainerRef,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...clipboardOptions}),katex2&&this.renderKatex(element,{...this.DEFAULT_KATEX_OPTIONS,...katexOptions}),mermaid2&&this.renderMermaid(element,{...this.DEFAULT_MERMAID_OPTIONS,...mermaidOptions}),this.highlight(element)}reload(){this._reload$.next()}getSource(src){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(src,{responseType:"text"}).pipe((0,map.U)(markdown=>this.handleExtension(src,markdown)))}highlight(element){if(!(0,common.NF)(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;element||(element=document);const noLanguageElements=element.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(noLanguageElements,x=>x.classList.add("language-none")),Prism.highlightAllUnder(element)}decodeHtml(html){if(!(0,common.NF)(this.platform))return html;const textarea=document.createElement("textarea");return textarea.innerHTML=html,textarea.value}extendRenderer(renderer){const extendedRenderer=renderer;if(!0===extendedRenderer.\u0275NgxMarkdownRendererExtended)return renderer;const defaultCode=renderer.code;return renderer.code=function(code,language,isEscaped){return"mermaid"===language?`<div class="mermaid">${code}</div>`:defaultCode.call(this,code,language,isEscaped)},extendedRenderer.\u0275NgxMarkdownRendererExtended=!0,renderer}handleExtension(src,markdown){const urlProtocolIndex=src.lastIndexOf("://"),urlWithoutProtocol=urlProtocolIndex>-1?src.substring(urlProtocolIndex+4):src,lastSlashIndex=urlWithoutProtocol.lastIndexOf("/"),lastUrlSegment=lastSlashIndex>-1?urlWithoutProtocol.substring(lastSlashIndex+1).split("?")[0]:"",lastDotIndex=lastUrlSegment.lastIndexOf("."),extension=lastDotIndex>-1?lastUrlSegment.substring(lastDotIndex+1):"";return extension&&"md"!==extension?"```"+extension+"\n"+markdown+"\n```":markdown}parseMarked(html,markedOptions,inline2=!1){return inline2?marked.parseInline(html,markedOptions):marked.parse(html,markedOptions)}parseEmoji(html){if(!(0,common.NF)(this.platform))return html;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(html)}renderKatex(element,options2){if((0,common.NF)(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(element,options2)}}renderClipboard(element,viewContainerRef,options2){if(!(0,common.NF)(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!viewContainerRef)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent,buttonTemplate}=options2,preElements=element.querySelectorAll("pre");for(let i=0;i<preElements.length;i++){const preElement=preElements.item(i),preWrapperElement=document.createElement("div");preWrapperElement.style.position="relative",preElement.parentNode.insertBefore(preWrapperElement,preElement),preWrapperElement.appendChild(preElement);const toolbarWrapperElement=document.createElement("div");let embeddedViewRef,clipboardInstance;toolbarWrapperElement.style.position="absolute",toolbarWrapperElement.style.top=".5em",toolbarWrapperElement.style.right=".5em",toolbarWrapperElement.style.opacity="0",toolbarWrapperElement.style.transition="opacity 250ms ease-out",preWrapperElement.insertAdjacentElement("beforeend",toolbarWrapperElement),preElement.onmouseover=()=>toolbarWrapperElement.style.opacity="1",preElement.onmouseout=()=>toolbarWrapperElement.style.opacity="0",embeddedViewRef=buttonComponent?viewContainerRef.createComponent(buttonComponent).hostView:buttonTemplate?viewContainerRef.createEmbeddedView(buttonTemplate):viewContainerRef.createComponent(ClipboardButtonComponent).hostView,embeddedViewRef.rootNodes.forEach(node=>{node.onmouseover=()=>toolbarWrapperElement.style.opacity="1",toolbarWrapperElement.appendChild(node),clipboardInstance=new ClipboardJS(node,{text:()=>preElement.innerText})}),embeddedViewRef.onDestroy(()=>clipboardInstance.destroy())}}renderMermaid(element,options2=this.DEFAULT_MERMAID_OPTIONS){if(!(0,common.NF)(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const mermaidElements=element.querySelectorAll(".mermaid");0!==mermaidElements.length&&(mermaid.initialize(options2),mermaid.init(mermaidElements))}trimIndentation(markdown){if(!markdown)return"";let indentStart;return markdown.split("\n").map(line=>{let lineIdentStart=indentStart;return line.length>0&&(lineIdentStart=isNaN(lineIdentStart)?line.search(/\S|$/):Math.min(line.search(/\S|$/),lineIdentStart)),isNaN(indentStart)&&(indentStart=lineIdentStart),lineIdentStart?line.substring(lineIdentStart):line}).join("\n")}}return __name(MarkdownService2,"MarkdownService"),MarkdownService2.\u0275fac=__name(function(t){return new(t||MarkdownService2)(core.LFG(core.Lbi),core.LFG(SECURITY_CONTEXT),core.LFG(http.eN,8),core.LFG(ClipboardOptions,8),core.LFG(MarkedOptions,8),core.LFG(platform_browser.H7))},"MarkdownService_Factory"),MarkdownService2.\u0275prov=core.Yz7({token:MarkdownService2,factory:MarkdownService2.\u0275fac}),MarkdownService2})(),MarkdownModule=(()=>{class MarkdownModule2{static forRoot(markdownModuleConfig){return{ngModule:MarkdownModule2,providers:[MarkdownService,markdownModuleConfig&&markdownModuleConfig.loader||[],markdownModuleConfig&&markdownModuleConfig.clipboardOptions||[],markdownModuleConfig&&markdownModuleConfig.markedOptions||[],{provide:SECURITY_CONTEXT,useValue:markdownModuleConfig&&null!=markdownModuleConfig.sanitize?markdownModuleConfig.sanitize:core.q3G.HTML}]}}static forChild(){return{ngModule:MarkdownModule2}}}return __name(MarkdownModule2,"MarkdownModule"),MarkdownModule2.\u0275fac=__name(function(t){return new(t||MarkdownModule2)},"MarkdownModule_Factory"),MarkdownModule2.\u0275mod=core.oAB({type:MarkdownModule2}),MarkdownModule2.\u0275inj=core.cJS({imports:[common.ez]}),MarkdownModule2})();var MermaidAPI;!function(MermaidAPI2){let SecurityLevel;var SecurityLevel2;let Theme;var Theme2;let LogLevel;var LogLevel2;(SecurityLevel2=SecurityLevel=MermaidAPI2.SecurityLevel||(MermaidAPI2.SecurityLevel={})).Strict="strict",SecurityLevel2.Loose="loose",SecurityLevel2.Antiscript="antiscript",SecurityLevel2.Sandbox="sandbox",(Theme2=Theme=MermaidAPI2.Theme||(MermaidAPI2.Theme={})).Base="base",Theme2.Forest="forest",Theme2.Dark="dark",Theme2.Default="default",Theme2.Neutral="neutral",(LogLevel2=LogLevel=MermaidAPI2.LogLevel||(MermaidAPI2.LogLevel={}))[LogLevel2.Debug=1]="Debug",LogLevel2[LogLevel2.Info=2]="Info",LogLevel2[LogLevel2.Warn=3]="Warn",LogLevel2[LogLevel2.Error=4]="Error",LogLevel2[LogLevel2.Fatal=5]="Fatal"}(MermaidAPI||(MermaidAPI={}))},6682:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$V:()=>Spherical,FM8:()=>Vector22,Ilk:()=>Color,Kj0:()=>Mesh2,L5s:()=>InstancedBufferGeometry,Ltg:()=>Vector4,Lun:()=>MeshDistanceMaterial,M8C:()=>MathUtils,Pa4:()=>Vector32,RsA:()=>MOUSE,SUY:()=>Clock,Tme:()=>Object3D,Vkp:()=>Matrix3,WMw:()=>AdditiveBlending,WdD:()=>ShaderChunk,Wid:()=>MeshStandardMaterial,Wl3:()=>FrontSide,ZzF:()=>Box3,_12:()=>PlaneGeometry,_Li:()=>BackSide,_fP:()=>Quaternion,a$l:()=>Float32BufferAttribute,aLr:()=>Sphere,dd2:()=>WebGLRenderTarget,ehD:()=>DoubleSide,iKG:()=>OrthographicCamera,iMs:()=>Raycaster,jyz:()=>ShaderMaterial,lRF:()=>MeshDepthMaterial,lb7:()=>InstancedBufferAttribute,mSO:()=>RGBADepthPacking,rDY:()=>UniformsUtils,u9r:()=>BufferGeometry,vBJ:()=>MeshBasicMaterial,wem:()=>LinearFilter,xEZ:()=>Texture,yGw:()=>Matrix42});var _home_runner_work_galaxy_galaxy_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9671);const REVISION="148",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,AdditiveAnimationBlendMode=2501,LinearEncoding=3e3,sRGBEncoding=3001,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener(type,listener){void 0===this._listeners&&(this._listeners={});const listeners=this._listeners;void 0===listeners[type]&&(listeners[type]=[]),-1===listeners[type].indexOf(listener)&&listeners[type].push(listener)}hasEventListener(type,listener){if(void 0===this._listeners)return!1;const listeners=this._listeners;return void 0!==listeners[type]&&-1!==listeners[type].indexOf(listener)}removeEventListener(type,listener){if(void 0===this._listeners)return;const listenerArray=this._listeners[type];if(void 0!==listenerArray){const index=listenerArray.indexOf(listener);-1!==index&&listenerArray.splice(index,1)}}dispatchEvent(event){if(void 0===this._listeners)return;const listenerArray=this._listeners[event.type];if(void 0!==listenerArray){event.target=this;const array=listenerArray.slice(0);for(let i=0,l=array.length;i<l;i++)array[i].call(this,event);event.target=null}}}__name(EventDispatcher,"EventDispatcher");const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const d0=4294967295*Math.random()|0,d1=4294967295*Math.random()|0,d2=4294967295*Math.random()|0,d3=4294967295*Math.random()|0;return(_lut[255&d0]+_lut[d0>>8&255]+_lut[d0>>16&255]+_lut[d0>>24&255]+"-"+_lut[255&d1]+_lut[d1>>8&255]+"-"+_lut[d1>>16&15|64]+_lut[d1>>24&255]+"-"+_lut[63&d2|128]+_lut[d2>>8&255]+"-"+_lut[d2>>16&255]+_lut[d2>>24&255]+_lut[255&d3]+_lut[d3>>8&255]+_lut[d3>>16&255]+_lut[d3>>24&255]).toLowerCase()}function clamp(value,min,max){return Math.max(min,Math.min(max,value))}function euclideanModulo(n,m){return(n%m+m)%m}function mapLinear(x,a1,a2,b1,b2){return b1+(x-a1)*(b2-b1)/(a2-a1)}function inverseLerp(x,y,value){return x!==y?(value-x)/(y-x):0}function lerp(x,y,t){return(1-t)*x+t*y}function damp(x,y,lambda,dt){return lerp(x,y,1-Math.exp(-lambda*dt))}function pingpong(x,length=1){return length-Math.abs(euclideanModulo(x,2*length)-length)}function smoothstep(x,min,max){return x<=min?0:x>=max?1:(x=(x-min)/(max-min))*x*(3-2*x)}function smootherstep(x,min,max){return x<=min?0:x>=max?1:(x=(x-min)/(max-min))*x*x*(x*(6*x-15)+10)}function randInt(low,high){return low+Math.floor(Math.random()*(high-low+1))}function randFloat(low,high){return low+Math.random()*(high-low)}function randFloatSpread(range){return range*(.5-Math.random())}function seededRandom(s){void 0!==s&&(_seed=s);let t=_seed+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function degToRad(degrees){return degrees*DEG2RAD}function radToDeg(radians){return radians*RAD2DEG}function isPowerOfTwo(value){return 0==(value&value-1)&&0!==value}function ceilPowerOfTwo(value){return Math.pow(2,Math.ceil(Math.log(value)/Math.LN2))}function floorPowerOfTwo(value){return Math.pow(2,Math.floor(Math.log(value)/Math.LN2))}function setQuaternionFromProperEuler(q,a,b,c,order){const cos=Math.cos,sin=Math.sin,c2=cos(b/2),s2=sin(b/2),c13=cos((a+c)/2),s13=sin((a+c)/2),c1_3=cos((a-c)/2),s1_3=sin((a-c)/2),c3_1=cos((c-a)/2),s3_1=sin((c-a)/2);switch(order){case"XYX":q.set(c2*s13,s2*c1_3,s2*s1_3,c2*c13);break;case"YZY":q.set(s2*s1_3,c2*s13,s2*c1_3,c2*c13);break;case"ZXZ":q.set(s2*c1_3,s2*s1_3,c2*s13,c2*c13);break;case"XZX":q.set(c2*s13,s2*s3_1,s2*c3_1,c2*c13);break;case"YXY":q.set(s2*c3_1,c2*s13,s2*s3_1,c2*c13);break;case"ZYZ":q.set(s2*s3_1,s2*c3_1,c2*s13,c2*c13);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+order)}}function denormalize(value,array){switch(array.constructor){case Float32Array:return value;case Uint16Array:return value/65535;case Uint8Array:return value/255;case Int16Array:return Math.max(value/32767,-1);case Int8Array:return Math.max(value/127,-1);default:throw new Error("Invalid component type.")}}function normalize(value,array){switch(array.constructor){case Float32Array:return value;case Uint16Array:return Math.round(65535*value);case Uint8Array:return Math.round(255*value);case Int16Array:return Math.round(32767*value);case Int8Array:return Math.round(127*value);default:throw new Error("Invalid component type.")}}__name(generateUUID,"generateUUID"),__name(clamp,"clamp"),__name(euclideanModulo,"euclideanModulo"),__name(mapLinear,"mapLinear"),__name(inverseLerp,"inverseLerp"),__name(lerp,"lerp"),__name(damp,"damp"),__name(pingpong,"pingpong"),__name(smoothstep,"smoothstep"),__name(smootherstep,"smootherstep"),__name(randInt,"randInt"),__name(randFloat,"randFloat"),__name(randFloatSpread,"randFloatSpread"),__name(seededRandom,"seededRandom"),__name(degToRad,"degToRad"),__name(radToDeg,"radToDeg"),__name(isPowerOfTwo,"isPowerOfTwo"),__name(ceilPowerOfTwo,"ceilPowerOfTwo"),__name(floorPowerOfTwo,"floorPowerOfTwo"),__name(setQuaternionFromProperEuler,"setQuaternionFromProperEuler"),__name(denormalize,"denormalize"),__name(normalize,"normalize");var MathUtils=Object.freeze({__proto__:null,DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize});class Vector22{constructor(x=0,y=0){Vector22.prototype.isVector2=!0,this.x=x,this.y=y}get width(){return this.x}set width(value){this.x=value}get height(){return this.y}set height(value){this.y=value}set(x,y){return this.x=x,this.y=y,this}setScalar(scalar){return this.x=scalar,this.y=scalar,this}setX(x){return this.x=x,this}setY(y){return this.y=y,this}setComponent(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;default:throw new Error("index is out of range: "+index)}return this}getComponent(index){switch(index){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+index)}}clone(){return new this.constructor(this.x,this.y)}copy(v){return this.x=v.x,this.y=v.y,this}add(v){return this.x+=v.x,this.y+=v.y,this}addScalar(s){return this.x+=s,this.y+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this}addScaledVector(v,s){return this.x+=v.x*s,this.y+=v.y*s,this}sub(v){return this.x-=v.x,this.y-=v.y,this}subScalar(s){return this.x-=s,this.y-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this}multiply(v){return this.x*=v.x,this.y*=v.y,this}multiplyScalar(scalar){return this.x*=scalar,this.y*=scalar,this}divide(v){return this.x/=v.x,this.y/=v.y,this}divideScalar(scalar){return this.multiplyScalar(1/scalar)}applyMatrix3(m){const x=this.x,y=this.y,e=m.elements;return this.x=e[0]*x+e[3]*y+e[6],this.y=e[1]*x+e[4]*y+e[7],this}min(v){return this.x=Math.min(this.x,v.x),this.y=Math.min(this.y,v.y),this}max(v){return this.x=Math.max(this.x,v.x),this.y=Math.max(this.y,v.y),this}clamp(min,max){return this.x=Math.max(min.x,Math.min(max.x,this.x)),this.y=Math.max(min.y,Math.min(max.y,this.y)),this}clampScalar(minVal,maxVal){return this.x=Math.max(minVal,Math.min(maxVal,this.x)),this.y=Math.max(minVal,Math.min(maxVal,this.y)),this}clampLength(min,max){const length=this.length();return this.divideScalar(length||1).multiplyScalar(Math.max(min,Math.min(max,length)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(v){return this.x*v.x+this.y*v.y}cross(v){return this.x*v.y-this.y*v.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(v){return Math.sqrt(this.distanceToSquared(v))}distanceToSquared(v){const dx=this.x-v.x,dy=this.y-v.y;return dx*dx+dy*dy}manhattanDistanceTo(v){return Math.abs(this.x-v.x)+Math.abs(this.y-v.y)}setLength(length){return this.normalize().multiplyScalar(length)}lerp(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this}lerpVectors(v1,v2,alpha){return this.x=v1.x+(v2.x-v1.x)*alpha,this.y=v1.y+(v2.y-v1.y)*alpha,this}equals(v){return v.x===this.x&&v.y===this.y}fromArray(array,offset=0){return this.x=array[offset],this.y=array[offset+1],this}toArray(array=[],offset=0){return array[offset]=this.x,array[offset+1]=this.y,array}fromBufferAttribute(attribute,index){return this.x=attribute.getX(index),this.y=attribute.getY(index),this}rotateAround(center,angle){const c=Math.cos(angle),s=Math.sin(angle),x=this.x-center.x,y=this.y-center.y;return this.x=x*c-y*s+center.x,this.y=x*s+y*c+center.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}__name(Vector22,"Vector2");class Matrix3{constructor(){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(n11,n12,n13,n21,n22,n23,n31,n32,n33){const te=this.elements;return te[0]=n11,te[1]=n21,te[2]=n31,te[3]=n12,te[4]=n22,te[5]=n32,te[6]=n13,te[7]=n23,te[8]=n33,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(m){const te=this.elements,me=m.elements;return te[0]=me[0],te[1]=me[1],te[2]=me[2],te[3]=me[3],te[4]=me[4],te[5]=me[5],te[6]=me[6],te[7]=me[7],te[8]=me[8],this}extractBasis(xAxis,yAxis,zAxis){return xAxis.setFromMatrix3Column(this,0),yAxis.setFromMatrix3Column(this,1),zAxis.setFromMatrix3Column(this,2),this}setFromMatrix4(m){const me=m.elements;return this.set(me[0],me[4],me[8],me[1],me[5],me[9],me[2],me[6],me[10]),this}multiply(m){return this.multiplyMatrices(this,m)}premultiply(m){return this.multiplyMatrices(m,this)}multiplyMatrices(a,b){const ae=a.elements,be=b.elements,te=this.elements,a11=ae[0],a12=ae[3],a13=ae[6],a21=ae[1],a22=ae[4],a23=ae[7],a31=ae[2],a32=ae[5],a33=ae[8],b11=be[0],b12=be[3],b13=be[6],b21=be[1],b22=be[4],b23=be[7],b31=be[2],b32=be[5],b33=be[8];return te[0]=a11*b11+a12*b21+a13*b31,te[3]=a11*b12+a12*b22+a13*b32,te[6]=a11*b13+a12*b23+a13*b33,te[1]=a21*b11+a22*b21+a23*b31,te[4]=a21*b12+a22*b22+a23*b32,te[7]=a21*b13+a22*b23+a23*b33,te[2]=a31*b11+a32*b21+a33*b31,te[5]=a31*b12+a32*b22+a33*b32,te[8]=a31*b13+a32*b23+a33*b33,this}multiplyScalar(s){const te=this.elements;return te[0]*=s,te[3]*=s,te[6]*=s,te[1]*=s,te[4]*=s,te[7]*=s,te[2]*=s,te[5]*=s,te[8]*=s,this}determinant(){const te=this.elements,a=te[0],b=te[1],c=te[2],d=te[3],e=te[4],f=te[5],g=te[6],h=te[7],i=te[8];return a*e*i-a*f*h-b*d*i+b*f*g+c*d*h-c*e*g}invert(){const te=this.elements,n11=te[0],n21=te[1],n31=te[2],n12=te[3],n22=te[4],n32=te[5],n13=te[6],n23=te[7],n33=te[8],t11=n33*n22-n32*n23,t12=n32*n13-n33*n12,t13=n23*n12-n22*n13,det=n11*t11+n21*t12+n31*t13;if(0===det)return this.set(0,0,0,0,0,0,0,0,0);const detInv=1/det;return te[0]=t11*detInv,te[1]=(n31*n23-n33*n21)*detInv,te[2]=(n32*n21-n31*n22)*detInv,te[3]=t12*detInv,te[4]=(n33*n11-n31*n13)*detInv,te[5]=(n31*n12-n32*n11)*detInv,te[6]=t13*detInv,te[7]=(n21*n13-n23*n11)*detInv,te[8]=(n22*n11-n21*n12)*detInv,this}transpose(){let tmp2;const m=this.elements;return tmp2=m[1],m[1]=m[3],m[3]=tmp2,tmp2=m[2],m[2]=m[6],m[6]=tmp2,tmp2=m[5],m[5]=m[7],m[7]=tmp2,this}getNormalMatrix(matrix4){return this.setFromMatrix4(matrix4).invert().transpose()}transposeIntoArray(r){const m=this.elements;return r[0]=m[0],r[1]=m[3],r[2]=m[6],r[3]=m[1],r[4]=m[4],r[5]=m[7],r[6]=m[2],r[7]=m[5],r[8]=m[8],this}setUvTransform(tx,ty,sx,sy,rotation,cx,cy){const c=Math.cos(rotation),s=Math.sin(rotation);return this.set(sx*c,sx*s,-sx*(c*cx+s*cy)+cx+tx,-sy*s,sy*c,-sy*(-s*cx+c*cy)+cy+ty,0,0,1),this}scale(sx,sy){return this.premultiply(_m3.makeScale(sx,sy)),this}rotate(theta){return this.premultiply(_m3.makeRotation(-theta)),this}translate(tx,ty){return this.premultiply(_m3.makeTranslation(tx,ty)),this}makeTranslation(x,y){return this.set(1,0,x,0,1,y,0,0,1),this}makeRotation(theta){const c=Math.cos(theta),s=Math.sin(theta);return this.set(c,-s,0,s,c,0,0,0,1),this}makeScale(x,y){return this.set(x,0,0,0,y,0,0,0,1),this}equals(matrix){const te=this.elements,me=matrix.elements;for(let i=0;i<9;i++)if(te[i]!==me[i])return!1;return!0}fromArray(array,offset=0){for(let i=0;i<9;i++)this.elements[i]=array[i+offset];return this}toArray(array=[],offset=0){const te=this.elements;return array[offset]=te[0],array[offset+1]=te[1],array[offset+2]=te[2],array[offset+3]=te[3],array[offset+4]=te[4],array[offset+5]=te[5],array[offset+6]=te[6],array[offset+7]=te[7],array[offset+8]=te[8],array}clone(){return(new this.constructor).fromArray(this.elements)}}__name(Matrix3,"Matrix3");const _m3=new Matrix3;function arrayNeedsUint32(array){for(let i=array.length-1;i>=0;--i)if(array[i]>=65535)return!0;return!1}__name(arrayNeedsUint32,"arrayNeedsUint32");const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(type,buffer){return new TYPED_ARRAYS[type](buffer)}function createElementNS(name){return document.createElementNS("http://www.w3.org/1999/xhtml",name)}function SRGBToLinear(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function LinearToSRGB(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}__name(getTypedArray,"getTypedArray"),__name(createElementNS,"createElementNS"),__name(SRGBToLinear,"SRGBToLinear"),__name(LinearToSRGB,"LinearToSRGB");const FN={[SRGBColorSpace]:{[LinearSRGBColorSpace]:SRGBToLinear},[LinearSRGBColorSpace]:{[SRGBColorSpace]:LinearToSRGB}},ColorManagement={legacyMode:!0,get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(colorSpace){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(color,sourceColorSpace,targetColorSpace){if(this.legacyMode||sourceColorSpace===targetColorSpace||!sourceColorSpace||!targetColorSpace)return color;if(FN[sourceColorSpace]&&void 0!==FN[sourceColorSpace][targetColorSpace]){const fn=FN[sourceColorSpace][targetColorSpace];return color.r=fn(color.r),color.g=fn(color.g),color.b=fn(color.b),color}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(color,targetColorSpace){return this.convert(color,this.workingColorSpace,targetColorSpace)},toWorkingColorSpace:function(color,sourceColorSpace){return this.convert(color,sourceColorSpace,this.workingColorSpace)}},_colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_rgb$1={r:0,g:0,b:0},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+6*(q-p)*(2/3-t):p}function toComponents(source,target){return target.r=source.r,target.g=source.g,target.b=source.b,target}__name(hue2rgb,"hue2rgb"),__name(toComponents,"toComponents");let _canvas,Color=(()=>{class Color2{constructor(r,g,b){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===g&&void 0===b?this.set(r):this.setRGB(r,g,b)}set(value){return value&&value.isColor?this.copy(value):"number"==typeof value?this.setHex(value):"string"==typeof value&&this.setStyle(value),this}setScalar(scalar){return this.r=scalar,this.g=scalar,this.b=scalar,this}setHex(hex,colorSpace=SRGBColorSpace){return hex=Math.floor(hex),this.r=(hex>>16&255)/255,this.g=(hex>>8&255)/255,this.b=(255&hex)/255,ColorManagement.toWorkingColorSpace(this,colorSpace),this}setRGB(r,g,b,colorSpace=ColorManagement.workingColorSpace){return this.r=r,this.g=g,this.b=b,ColorManagement.toWorkingColorSpace(this,colorSpace),this}setHSL(h,s,l,colorSpace=ColorManagement.workingColorSpace){if(h=euclideanModulo(h,1),s=clamp(s,0,1),l=clamp(l,0,1),0===s)this.r=this.g=this.b=l;else{const p=l<=.5?l*(1+s):l+s-l*s,q=2*l-p;this.r=hue2rgb(q,p,h+1/3),this.g=hue2rgb(q,p,h),this.b=hue2rgb(q,p,h-1/3)}return ColorManagement.toWorkingColorSpace(this,colorSpace),this}setStyle(style,colorSpace=SRGBColorSpace){function handleAlpha(string){void 0!==string&&parseFloat(string)<1&&console.warn("THREE.Color: Alpha component of "+style+" will be ignored.")}let m;if(__name(handleAlpha,"handleAlpha"),m=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(style)){let color;const components=m[2];switch(m[1]){case"rgb":case"rgba":if(color=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(components))return this.r=Math.min(255,parseInt(color[1],10))/255,this.g=Math.min(255,parseInt(color[2],10))/255,this.b=Math.min(255,parseInt(color[3],10))/255,ColorManagement.toWorkingColorSpace(this,colorSpace),handleAlpha(color[4]),this;if(color=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(components))return this.r=Math.min(100,parseInt(color[1],10))/100,this.g=Math.min(100,parseInt(color[2],10))/100,this.b=Math.min(100,parseInt(color[3],10))/100,ColorManagement.toWorkingColorSpace(this,colorSpace),handleAlpha(color[4]),this;break;case"hsl":case"hsla":if(color=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(components)){const h=parseFloat(color[1])/360,s=parseFloat(color[2])/100,l=parseFloat(color[3])/100;return handleAlpha(color[4]),this.setHSL(h,s,l,colorSpace)}}}else if(m=/^\#([A-Fa-f\d]+)$/.exec(style)){const hex=m[1],size=hex.length;if(3===size)return this.r=parseInt(hex.charAt(0)+hex.charAt(0),16)/255,this.g=parseInt(hex.charAt(1)+hex.charAt(1),16)/255,this.b=parseInt(hex.charAt(2)+hex.charAt(2),16)/255,ColorManagement.toWorkingColorSpace(this,colorSpace),this;if(6===size)return this.r=parseInt(hex.charAt(0)+hex.charAt(1),16)/255,this.g=parseInt(hex.charAt(2)+hex.charAt(3),16)/255,this.b=parseInt(hex.charAt(4)+hex.charAt(5),16)/255,ColorManagement.toWorkingColorSpace(this,colorSpace),this}return style&&style.length>0?this.setColorName(style,colorSpace):this}setColorName(style,colorSpace=SRGBColorSpace){const hex=_colorKeywords[style.toLowerCase()];return void 0!==hex?this.setHex(hex,colorSpace):console.warn("THREE.Color: Unknown color "+style),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(color){return this.r=color.r,this.g=color.g,this.b=color.b,this}copySRGBToLinear(color){return this.r=SRGBToLinear(color.r),this.g=SRGBToLinear(color.g),this.b=SRGBToLinear(color.b),this}copyLinearToSRGB(color){return this.r=LinearToSRGB(color.r),this.g=LinearToSRGB(color.g),this.b=LinearToSRGB(color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(colorSpace=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb$1),colorSpace),clamp(255*_rgb$1.r,0,255)<<16^clamp(255*_rgb$1.g,0,255)<<8^clamp(255*_rgb$1.b,0,255)<<0}getHexString(colorSpace=SRGBColorSpace){return("000000"+this.getHex(colorSpace).toString(16)).slice(-6)}getHSL(target,colorSpace=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb$1),colorSpace);const r=_rgb$1.r,g=_rgb$1.g,b=_rgb$1.b,max=Math.max(r,g,b),min=Math.min(r,g,b);let hue,saturation;const lightness=(min+max)/2;if(min===max)hue=0,saturation=0;else{const delta=max-min;switch(saturation=lightness<=.5?delta/(max+min):delta/(2-max-min),max){case r:hue=(g-b)/delta+(g<b?6:0);break;case g:hue=(b-r)/delta+2;break;case b:hue=(r-g)/delta+4}hue/=6}return target.h=hue,target.s=saturation,target.l=lightness,target}getRGB(target,colorSpace=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb$1),colorSpace),target.r=_rgb$1.r,target.g=_rgb$1.g,target.b=_rgb$1.b,target}getStyle(colorSpace=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb$1),colorSpace),colorSpace!==SRGBColorSpace?`color(${colorSpace} ${_rgb$1.r} ${_rgb$1.g} ${_rgb$1.b})`:`rgb(${255*_rgb$1.r|0},${255*_rgb$1.g|0},${255*_rgb$1.b|0})`}offsetHSL(h,s,l){return this.getHSL(_hslA),_hslA.h+=h,_hslA.s+=s,_hslA.l+=l,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(color){return this.r+=color.r,this.g+=color.g,this.b+=color.b,this}addColors(color1,color2){return this.r=color1.r+color2.r,this.g=color1.g+color2.g,this.b=color1.b+color2.b,this}addScalar(s){return this.r+=s,this.g+=s,this.b+=s,this}sub(color){return this.r=Math.max(0,this.r-color.r),this.g=Math.max(0,this.g-color.g),this.b=Math.max(0,this.b-color.b),this}multiply(color){return this.r*=color.r,this.g*=color.g,this.b*=color.b,this}multiplyScalar(s){return this.r*=s,this.g*=s,this.b*=s,this}lerp(color,alpha){return this.r+=(color.r-this.r)*alpha,this.g+=(color.g-this.g)*alpha,this.b+=(color.b-this.b)*alpha,this}lerpColors(color1,color2,alpha){return this.r=color1.r+(color2.r-color1.r)*alpha,this.g=color1.g+(color2.g-color1.g)*alpha,this.b=color1.b+(color2.b-color1.b)*alpha,this}lerpHSL(color,alpha){this.getHSL(_hslA),color.getHSL(_hslB);const h=lerp(_hslA.h,_hslB.h,alpha),s=lerp(_hslA.s,_hslB.s,alpha),l=lerp(_hslA.l,_hslB.l,alpha);return this.setHSL(h,s,l),this}equals(c){return c.r===this.r&&c.g===this.g&&c.b===this.b}fromArray(array,offset=0){return this.r=array[offset],this.g=array[offset+1],this.b=array[offset+2],this}toArray(array=[],offset=0){return array[offset]=this.r,array[offset+1]=this.g,array[offset+2]=this.b,array}fromBufferAttribute(attribute,index){return this.r=attribute.getX(index),this.g=attribute.getY(index),this.b=attribute.getZ(index),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return __name(Color2,"Color"),Color2.NAMES=_colorKeywords,Color2})();class ImageUtils{static getDataURL(image){if(/^data:/i.test(image.src)||typeof HTMLCanvasElement>"u")return image.src;let canvas;if(image instanceof HTMLCanvasElement)canvas=image;else{void 0===_canvas&&(_canvas=createElementNS("canvas")),_canvas.width=image.width,_canvas.height=image.height;const context=_canvas.getContext("2d");image instanceof ImageData?context.putImageData(image,0,0):context.drawImage(image,0,0,image.width,image.height),canvas=_canvas}return canvas.width>2048||canvas.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",image),canvas.toDataURL("image/jpeg",.6)):canvas.toDataURL("image/png")}static sRGBToLinear(image){if(typeof HTMLImageElement<"u"&&image instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&image instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&image instanceof ImageBitmap){const canvas=createElementNS("canvas");canvas.width=image.width,canvas.height=image.height;const context=canvas.getContext("2d");context.drawImage(image,0,0,image.width,image.height);const imageData=context.getImageData(0,0,image.width,image.height),data=imageData.data;for(let i=0;i<data.length;i++)data[i]=255*SRGBToLinear(data[i]/255);return context.putImageData(imageData,0,0),canvas}if(image.data){const data=image.data.slice(0);for(let i=0;i<data.length;i++)data[i]=data instanceof Uint8Array||data instanceof Uint8ClampedArray?Math.floor(255*SRGBToLinear(data[i]/255)):SRGBToLinear(data[i]);return{data,width:image.width,height:image.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),image}}__name(ImageUtils,"ImageUtils");class Source{constructor(data=null){this.isSource=!0,this.uuid=generateUUID(),this.data=data,this.version=0}set needsUpdate(value){!0===value&&this.version++}toJSON(meta){const isRootObject=void 0===meta||"string"==typeof meta;if(!isRootObject&&void 0!==meta.images[this.uuid])return meta.images[this.uuid];const output={uuid:this.uuid,url:""},data=this.data;if(null!==data){let url;if(Array.isArray(data)){url=[];for(let i=0,l=data.length;i<l;i++)url.push(serializeImage(data[i].isDataTexture?data[i].image:data[i]))}else url=serializeImage(data);output.url=url}return isRootObject||(meta.images[this.uuid]=output),output}}function serializeImage(image){return typeof HTMLImageElement<"u"&&image instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&image instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&image instanceof ImageBitmap?ImageUtils.getDataURL(image):image.data?{data:Array.from(image.data),width:image.width,height:image.height,type:image.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}__name(Source,"Source"),__name(serializeImage,"serializeImage");let textureId=0,Texture=(()=>{class Texture2 extends EventDispatcher{constructor(image=Texture2.DEFAULT_IMAGE,mapping=Texture2.DEFAULT_MAPPING,wrapS=ClampToEdgeWrapping,wrapT=ClampToEdgeWrapping,magFilter=LinearFilter,minFilter=LinearMipmapLinearFilter,format=RGBAFormat,type=UnsignedByteType,anisotropy=Texture2.DEFAULT_ANISOTROPY,encoding=LinearEncoding){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(image),this.mipmaps=[],this.mapping=mapping,this.wrapS=wrapS,this.wrapT=wrapT,this.magFilter=magFilter,this.minFilter=minFilter,this.anisotropy=anisotropy,this.format=format,this.internalFormat=null,this.type=type,this.offset=new Vector22(0,0),this.repeat=new Vector22(1,1),this.center=new Vector22(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=encoding,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(value){this.source.data=value}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(source){return this.name=source.name,this.source=source.source,this.mipmaps=source.mipmaps.slice(0),this.mapping=source.mapping,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.format=source.format,this.internalFormat=source.internalFormat,this.type=source.type,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.center.copy(source.center),this.rotation=source.rotation,this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrix.copy(source.matrix),this.generateMipmaps=source.generateMipmaps,this.premultiplyAlpha=source.premultiplyAlpha,this.flipY=source.flipY,this.unpackAlignment=source.unpackAlignment,this.encoding=source.encoding,this.userData=JSON.parse(JSON.stringify(source.userData)),this.needsUpdate=!0,this}toJSON(meta){const isRootObject=void 0===meta||"string"==typeof meta;if(!isRootObject&&void 0!==meta.textures[this.uuid])return meta.textures[this.uuid];const output={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(meta).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(output.userData=this.userData),isRootObject||(meta.textures[this.uuid]=output),output}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(uv){if(300!==this.mapping)return uv;if(uv.applyMatrix3(this.matrix),uv.x<0||uv.x>1)switch(this.wrapS){case RepeatWrapping:uv.x=uv.x-Math.floor(uv.x);break;case ClampToEdgeWrapping:uv.x=uv.x<0?0:1;break;case MirroredRepeatWrapping:uv.x=1===Math.abs(Math.floor(uv.x)%2)?Math.ceil(uv.x)-uv.x:uv.x-Math.floor(uv.x)}if(uv.y<0||uv.y>1)switch(this.wrapT){case RepeatWrapping:uv.y=uv.y-Math.floor(uv.y);break;case ClampToEdgeWrapping:uv.y=uv.y<0?0:1;break;case MirroredRepeatWrapping:uv.y=1===Math.abs(Math.floor(uv.y)%2)?Math.ceil(uv.y)-uv.y:uv.y-Math.floor(uv.y)}return this.flipY&&(uv.y=1-uv.y),uv}set needsUpdate(value){!0===value&&(this.version++,this.source.needsUpdate=!0)}}return __name(Texture2,"Texture"),Texture2.DEFAULT_IMAGE=null,Texture2.DEFAULT_MAPPING=300,Texture2.DEFAULT_ANISOTROPY=1,Texture2})();class Vector4{constructor(x=0,y=0,z=0,w=1){Vector4.prototype.isVector4=!0,this.x=x,this.y=y,this.z=z,this.w=w}get width(){return this.z}set width(value){this.z=value}get height(){return this.w}set height(value){this.w=value}set(x,y,z,w){return this.x=x,this.y=y,this.z=z,this.w=w,this}setScalar(scalar){return this.x=scalar,this.y=scalar,this.z=scalar,this.w=scalar,this}setX(x){return this.x=x,this}setY(y){return this.y=y,this}setZ(z){return this.z=z,this}setW(w){return this.w=w,this}setComponent(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;case 3:this.w=value;break;default:throw new Error("index is out of range: "+index)}return this}getComponent(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+index)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(v){return this.x=v.x,this.y=v.y,this.z=v.z,this.w=void 0!==v.w?v.w:1,this}add(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z,this.w+=v.w,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this}addScaledVector(v,s){return this.x+=v.x*s,this.y+=v.y*s,this.z+=v.z*s,this.w+=v.w*s,this}sub(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z,this.w-=v.w,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this}multiply(v){return this.x*=v.x,this.y*=v.y,this.z*=v.z,this.w*=v.w,this}multiplyScalar(scalar){return this.x*=scalar,this.y*=scalar,this.z*=scalar,this.w*=scalar,this}applyMatrix4(m){const x=this.x,y=this.y,z=this.z,w=this.w,e=m.elements;return this.x=e[0]*x+e[4]*y+e[8]*z+e[12]*w,this.y=e[1]*x+e[5]*y+e[9]*z+e[13]*w,this.z=e[2]*x+e[6]*y+e[10]*z+e[14]*w,this.w=e[3]*x+e[7]*y+e[11]*z+e[15]*w,this}divideScalar(scalar){return this.multiplyScalar(1/scalar)}setAxisAngleFromQuaternion(q){this.w=2*Math.acos(q.w);const s=Math.sqrt(1-q.w*q.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=q.x/s,this.y=q.y/s,this.z=q.z/s),this}setAxisAngleFromRotationMatrix(m){let angle,x,y,z;const te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10];if(Math.abs(m12-m21)<.01&&Math.abs(m13-m31)<.01&&Math.abs(m23-m32)<.01){if(Math.abs(m12+m21)<.1&&Math.abs(m13+m31)<.1&&Math.abs(m23+m32)<.1&&Math.abs(m11+m22+m33-3)<.1)return this.set(1,0,0,0),this;angle=Math.PI;const xx=(m11+1)/2,yy=(m22+1)/2,zz=(m33+1)/2,xy=(m12+m21)/4,xz=(m13+m31)/4,yz=(m23+m32)/4;return xx>yy&&xx>zz?xx<.01?(x=0,y=.707106781,z=.707106781):(x=Math.sqrt(xx),y=xy/x,z=xz/x):yy>zz?yy<.01?(x=.707106781,y=0,z=.707106781):(y=Math.sqrt(yy),x=xy/y,z=yz/y):zz<.01?(x=.707106781,y=.707106781,z=0):(z=Math.sqrt(zz),x=xz/z,y=yz/z),this.set(x,y,z,angle),this}let s=Math.sqrt((m32-m23)*(m32-m23)+(m13-m31)*(m13-m31)+(m21-m12)*(m21-m12));return Math.abs(s)<.001&&(s=1),this.x=(m32-m23)/s,this.y=(m13-m31)/s,this.z=(m21-m12)/s,this.w=Math.acos((m11+m22+m33-1)/2),this}min(v){return this.x=Math.min(this.x,v.x),this.y=Math.min(this.y,v.y),this.z=Math.min(this.z,v.z),this.w=Math.min(this.w,v.w),this}max(v){return this.x=Math.max(this.x,v.x),this.y=Math.max(this.y,v.y),this.z=Math.max(this.z,v.z),this.w=Math.max(this.w,v.w),this}clamp(min,max){return this.x=Math.max(min.x,Math.min(max.x,this.x)),this.y=Math.max(min.y,Math.min(max.y,this.y)),this.z=Math.max(min.z,Math.min(max.z,this.z)),this.w=Math.max(min.w,Math.min(max.w,this.w)),this}clampScalar(minVal,maxVal){return this.x=Math.max(minVal,Math.min(maxVal,this.x)),this.y=Math.max(minVal,Math.min(maxVal,this.y)),this.z=Math.max(minVal,Math.min(maxVal,this.z)),this.w=Math.max(minVal,Math.min(maxVal,this.w)),this}clampLength(min,max){const length=this.length();return this.divideScalar(length||1).multiplyScalar(Math.max(min,Math.min(max,length)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(length){return this.normalize().multiplyScalar(length)}lerp(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this.z+=(v.z-this.z)*alpha,this.w+=(v.w-this.w)*alpha,this}lerpVectors(v1,v2,alpha){return this.x=v1.x+(v2.x-v1.x)*alpha,this.y=v1.y+(v2.y-v1.y)*alpha,this.z=v1.z+(v2.z-v1.z)*alpha,this.w=v1.w+(v2.w-v1.w)*alpha,this}equals(v){return v.x===this.x&&v.y===this.y&&v.z===this.z&&v.w===this.w}fromArray(array,offset=0){return this.x=array[offset],this.y=array[offset+1],this.z=array[offset+2],this.w=array[offset+3],this}toArray(array=[],offset=0){return array[offset]=this.x,array[offset+1]=this.y,array[offset+2]=this.z,array[offset+3]=this.w,array}fromBufferAttribute(attribute,index){return this.x=attribute.getX(index),this.y=attribute.getY(index),this.z=attribute.getZ(index),this.w=attribute.getW(index),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}__name(Vector4,"Vector4");class WebGLRenderTarget extends EventDispatcher{constructor(width=1,height=1,options={}){super(),this.isWebGLRenderTarget=!0,this.width=width,this.height=height,this.depth=1,this.scissor=new Vector4(0,0,width,height),this.scissorTest=!1,this.viewport=new Vector4(0,0,width,height),this.texture=new Texture({width,height,depth:1},options.mapping,options.wrapS,options.wrapT,options.magFilter,options.minFilter,options.format,options.type,options.anisotropy,options.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==options.generateMipmaps&&options.generateMipmaps,this.texture.internalFormat=void 0!==options.internalFormat?options.internalFormat:null,this.texture.minFilter=void 0!==options.minFilter?options.minFilter:LinearFilter,this.depthBuffer=void 0===options.depthBuffer||options.depthBuffer,this.stencilBuffer=void 0!==options.stencilBuffer&&options.stencilBuffer,this.depthTexture=void 0!==options.depthTexture?options.depthTexture:null,this.samples=void 0!==options.samples?options.samples:0}setSize(width,height,depth=1){(this.width!==width||this.height!==height||this.depth!==depth)&&(this.width=width,this.height=height,this.depth=depth,this.texture.image.width=width,this.texture.image.height=height,this.texture.image.depth=depth,this.dispose()),this.viewport.set(0,0,width,height),this.scissor.set(0,0,width,height)}clone(){return(new this.constructor).copy(this)}copy(source){this.width=source.width,this.height=source.height,this.depth=source.depth,this.viewport.copy(source.viewport),this.texture=source.texture.clone(),this.texture.isRenderTargetTexture=!0;const image=Object.assign({},source.texture.image);return this.texture.source=new Source(image),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,null!==source.depthTexture&&(this.depthTexture=source.depthTexture.clone()),this.samples=source.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}__name(WebGLRenderTarget,"WebGLRenderTarget");class DataArrayTexture extends Texture{constructor(data=null,width=1,height=1,depth=1){super(null),this.isDataArrayTexture=!0,this.image={data,width,height,depth},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}__name(DataArrayTexture,"DataArrayTexture"),__name(class WebGLArrayRenderTarget extends(null){constructor(width=1,height=1,depth=1){super(width,height),this.isWebGLArrayRenderTarget=!0,this.depth=depth,this.texture=new DataArrayTexture(null,width,height,depth),this.texture.isRenderTargetTexture=!0}},"WebGLArrayRenderTarget");class Data3DTexture extends Texture{constructor(data=null,width=1,height=1,depth=1){super(null),this.isData3DTexture=!0,this.image={data,width,height,depth},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}__name(Data3DTexture,"Data3DTexture"),__name(class WebGL3DRenderTarget extends(null){constructor(width=1,height=1,depth=1){super(width,height),this.isWebGL3DRenderTarget=!0,this.depth=depth,this.texture=new Data3DTexture(null,width,height,depth),this.texture.isRenderTargetTexture=!0}},"WebGL3DRenderTarget"),__name(class WebGLMultipleRenderTargets extends(null){constructor(width=1,height=1,count=1,options={}){super(width,height,options),this.isWebGLMultipleRenderTargets=!0;const texture=this.texture;this.texture=[];for(let i=0;i<count;i++)this.texture[i]=texture.clone(),this.texture[i].isRenderTargetTexture=!0}setSize(width,height,depth=1){if(this.width!==width||this.height!==height||this.depth!==depth){this.width=width,this.height=height,this.depth=depth;for(let i=0,il=this.texture.length;i<il;i++)this.texture[i].image.width=width,this.texture[i].image.height=height,this.texture[i].image.depth=depth;this.dispose()}return this.viewport.set(0,0,width,height),this.scissor.set(0,0,width,height),this}copy(source){this.dispose(),this.width=source.width,this.height=source.height,this.depth=source.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,null!==source.depthTexture&&(this.depthTexture=source.depthTexture.clone()),this.texture.length=0;for(let i=0,il=source.texture.length;i<il;i++)this.texture[i]=source.texture[i].clone(),this.texture[i].isRenderTargetTexture=!0;return this}},"WebGLMultipleRenderTargets");class Quaternion{constructor(x=0,y=0,z=0,w=1){this.isQuaternion=!0,this._x=x,this._y=y,this._z=z,this._w=w}static slerpFlat(dst,dstOffset,src0,srcOffset0,src1,srcOffset1,t){let x0=src0[srcOffset0+0],y0=src0[srcOffset0+1],z0=src0[srcOffset0+2],w0=src0[srcOffset0+3];const x1=src1[srcOffset1+0],y1=src1[srcOffset1+1],z1=src1[srcOffset1+2],w1=src1[srcOffset1+3];if(0===t)return dst[dstOffset+0]=x0,dst[dstOffset+1]=y0,dst[dstOffset+2]=z0,void(dst[dstOffset+3]=w0);if(1===t)return dst[dstOffset+0]=x1,dst[dstOffset+1]=y1,dst[dstOffset+2]=z1,void(dst[dstOffset+3]=w1);if(w0!==w1||x0!==x1||y0!==y1||z0!==z1){let s=1-t;const cos=x0*x1+y0*y1+z0*z1+w0*w1,dir=cos>=0?1:-1,sqrSin=1-cos*cos;if(sqrSin>Number.EPSILON){const sin=Math.sqrt(sqrSin),len=Math.atan2(sin,cos*dir);s=Math.sin(s*len)/sin,t=Math.sin(t*len)/sin}const tDir=t*dir;if(x0=x0*s+x1*tDir,y0=y0*s+y1*tDir,z0=z0*s+z1*tDir,w0=w0*s+w1*tDir,s===1-t){const f=1/Math.sqrt(x0*x0+y0*y0+z0*z0+w0*w0);x0*=f,y0*=f,z0*=f,w0*=f}}dst[dstOffset]=x0,dst[dstOffset+1]=y0,dst[dstOffset+2]=z0,dst[dstOffset+3]=w0}static multiplyQuaternionsFlat(dst,dstOffset,src0,srcOffset0,src1,srcOffset1){const x0=src0[srcOffset0],y0=src0[srcOffset0+1],z0=src0[srcOffset0+2],w0=src0[srcOffset0+3],x1=src1[srcOffset1],y1=src1[srcOffset1+1],z1=src1[srcOffset1+2],w1=src1[srcOffset1+3];return dst[dstOffset]=x0*w1+w0*x1+y0*z1-z0*y1,dst[dstOffset+1]=y0*w1+w0*y1+z0*x1-x0*z1,dst[dstOffset+2]=z0*w1+w0*z1+x0*y1-y0*x1,dst[dstOffset+3]=w0*w1-x0*x1-y0*y1-z0*z1,dst}get x(){return this._x}set x(value){this._x=value,this._onChangeCallback()}get y(){return this._y}set y(value){this._y=value,this._onChangeCallback()}get z(){return this._z}set z(value){this._z=value,this._onChangeCallback()}get w(){return this._w}set w(value){this._w=value,this._onChangeCallback()}set(x,y,z,w){return this._x=x,this._y=y,this._z=z,this._w=w,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(quaternion){return this._x=quaternion.x,this._y=quaternion.y,this._z=quaternion.z,this._w=quaternion.w,this._onChangeCallback(),this}setFromEuler(euler,update){const x=euler._x,y=euler._y,z=euler._z,order=euler._order,cos=Math.cos,sin=Math.sin,c1=cos(x/2),c2=cos(y/2),c3=cos(z/2),s1=sin(x/2),s2=sin(y/2),s3=sin(z/2);switch(order){case"XYZ":this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3;break;case"YXZ":this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3;break;case"ZXY":this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3;break;case"ZYX":this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3;break;case"YZX":this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3;break;case"XZY":this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+order)}return!1!==update&&this._onChangeCallback(),this}setFromAxisAngle(axis,angle){const halfAngle=angle/2,s=Math.sin(halfAngle);return this._x=axis.x*s,this._y=axis.y*s,this._z=axis.z*s,this._w=Math.cos(halfAngle),this._onChangeCallback(),this}setFromRotationMatrix(m){const te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10],trace=m11+m22+m33;if(trace>0){const s=.5/Math.sqrt(trace+1);this._w=.25/s,this._x=(m32-m23)*s,this._y=(m13-m31)*s,this._z=(m21-m12)*s}else if(m11>m22&&m11>m33){const s=2*Math.sqrt(1+m11-m22-m33);this._w=(m32-m23)/s,this._x=.25*s,this._y=(m12+m21)/s,this._z=(m13+m31)/s}else if(m22>m33){const s=2*Math.sqrt(1+m22-m11-m33);this._w=(m13-m31)/s,this._x=(m12+m21)/s,this._y=.25*s,this._z=(m23+m32)/s}else{const s=2*Math.sqrt(1+m33-m11-m22);this._w=(m21-m12)/s,this._x=(m13+m31)/s,this._y=(m23+m32)/s,this._z=.25*s}return this._onChangeCallback(),this}setFromUnitVectors(vFrom,vTo){let r=vFrom.dot(vTo)+1;return r<Number.EPSILON?(r=0,Math.abs(vFrom.x)>Math.abs(vFrom.z)?(this._x=-vFrom.y,this._y=vFrom.x,this._z=0,this._w=r):(this._x=0,this._y=-vFrom.z,this._z=vFrom.y,this._w=r)):(this._x=vFrom.y*vTo.z-vFrom.z*vTo.y,this._y=vFrom.z*vTo.x-vFrom.x*vTo.z,this._z=vFrom.x*vTo.y-vFrom.y*vTo.x,this._w=r),this.normalize()}angleTo(q){return 2*Math.acos(Math.abs(clamp(this.dot(q),-1,1)))}rotateTowards(q,step){const angle=this.angleTo(q);if(0===angle)return this;const t=Math.min(1,step/angle);return this.slerp(q,t),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(v){return this._x*v._x+this._y*v._y+this._z*v._z+this._w*v._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let l=this.length();return 0===l?(this._x=0,this._y=0,this._z=0,this._w=1):(l=1/l,this._x=this._x*l,this._y=this._y*l,this._z=this._z*l,this._w=this._w*l),this._onChangeCallback(),this}multiply(q){return this.multiplyQuaternions(this,q)}premultiply(q){return this.multiplyQuaternions(q,this)}multiplyQuaternions(a,b){const qax=a._x,qay=a._y,qaz=a._z,qaw=a._w,qbx=b._x,qby=b._y,qbz=b._z,qbw=b._w;return this._x=qax*qbw+qaw*qbx+qay*qbz-qaz*qby,this._y=qay*qbw+qaw*qby+qaz*qbx-qax*qbz,this._z=qaz*qbw+qaw*qbz+qax*qby-qay*qbx,this._w=qaw*qbw-qax*qbx-qay*qby-qaz*qbz,this._onChangeCallback(),this}slerp(qb,t){if(0===t)return this;if(1===t)return this.copy(qb);const x=this._x,y=this._y,z=this._z,w=this._w;let cosHalfTheta=w*qb._w+x*qb._x+y*qb._y+z*qb._z;if(cosHalfTheta<0?(this._w=-qb._w,this._x=-qb._x,this._y=-qb._y,this._z=-qb._z,cosHalfTheta=-cosHalfTheta):this.copy(qb),cosHalfTheta>=1)return this._w=w,this._x=x,this._y=y,this._z=z,this;const sqrSinHalfTheta=1-cosHalfTheta*cosHalfTheta;if(sqrSinHalfTheta<=Number.EPSILON){const s=1-t;return this._w=s*w+t*this._w,this._x=s*x+t*this._x,this._y=s*y+t*this._y,this._z=s*z+t*this._z,this.normalize(),this._onChangeCallback(),this}const sinHalfTheta=Math.sqrt(sqrSinHalfTheta),halfTheta=Math.atan2(sinHalfTheta,cosHalfTheta),ratioA=Math.sin((1-t)*halfTheta)/sinHalfTheta,ratioB=Math.sin(t*halfTheta)/sinHalfTheta;return this._w=w*ratioA+this._w*ratioB,this._x=x*ratioA+this._x*ratioB,this._y=y*ratioA+this._y*ratioB,this._z=z*ratioA+this._z*ratioB,this._onChangeCallback(),this}slerpQuaternions(qa,qb,t){return this.copy(qa).slerp(qb,t)}random(){const u1=Math.random(),sqrt1u1=Math.sqrt(1-u1),sqrtu1=Math.sqrt(u1),u2=2*Math.PI*Math.random(),u3=2*Math.PI*Math.random();return this.set(sqrt1u1*Math.cos(u2),sqrtu1*Math.sin(u3),sqrtu1*Math.cos(u3),sqrt1u1*Math.sin(u2))}equals(quaternion){return quaternion._x===this._x&&quaternion._y===this._y&&quaternion._z===this._z&&quaternion._w===this._w}fromArray(array,offset=0){return this._x=array[offset],this._y=array[offset+1],this._z=array[offset+2],this._w=array[offset+3],this._onChangeCallback(),this}toArray(array=[],offset=0){return array[offset]=this._x,array[offset+1]=this._y,array[offset+2]=this._z,array[offset+3]=this._w,array}fromBufferAttribute(attribute,index){return this._x=attribute.getX(index),this._y=attribute.getY(index),this._z=attribute.getZ(index),this._w=attribute.getW(index),this}_onChange(callback){return this._onChangeCallback=callback,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}__name(Quaternion,"Quaternion");class Vector32{constructor(x=0,y=0,z=0){Vector32.prototype.isVector3=!0,this.x=x,this.y=y,this.z=z}set(x,y,z){return void 0===z&&(z=this.z),this.x=x,this.y=y,this.z=z,this}setScalar(scalar){return this.x=scalar,this.y=scalar,this.z=scalar,this}setX(x){return this.x=x,this}setY(y){return this.y=y,this}setZ(z){return this.z=z,this}setComponent(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;default:throw new Error("index is out of range: "+index)}return this}getComponent(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+index)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(v){return this.x=v.x,this.y=v.y,this.z=v.z,this}add(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this}addScaledVector(v,s){return this.x+=v.x*s,this.y+=v.y*s,this.z+=v.z*s,this}sub(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this}multiply(v){return this.x*=v.x,this.y*=v.y,this.z*=v.z,this}multiplyScalar(scalar){return this.x*=scalar,this.y*=scalar,this.z*=scalar,this}multiplyVectors(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this}applyEuler(euler){return this.applyQuaternion(_quaternion$4.setFromEuler(euler))}applyAxisAngle(axis,angle){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(axis,angle))}applyMatrix3(m){const x=this.x,y=this.y,z=this.z,e=m.elements;return this.x=e[0]*x+e[3]*y+e[6]*z,this.y=e[1]*x+e[4]*y+e[7]*z,this.z=e[2]*x+e[5]*y+e[8]*z,this}applyNormalMatrix(m){return this.applyMatrix3(m).normalize()}applyMatrix4(m){const x=this.x,y=this.y,z=this.z,e=m.elements,w=1/(e[3]*x+e[7]*y+e[11]*z+e[15]);return this.x=(e[0]*x+e[4]*y+e[8]*z+e[12])*w,this.y=(e[1]*x+e[5]*y+e[9]*z+e[13])*w,this.z=(e[2]*x+e[6]*y+e[10]*z+e[14])*w,this}applyQuaternion(q){const x=this.x,y=this.y,z=this.z,qx=q.x,qy=q.y,qz=q.z,qw=q.w,ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return this.x=ix*qw+iw*-qx+iy*-qz-iz*-qy,this.y=iy*qw+iw*-qy+iz*-qx-ix*-qz,this.z=iz*qw+iw*-qz+ix*-qy-iy*-qx,this}project(camera){return this.applyMatrix4(camera.matrixWorldInverse).applyMatrix4(camera.projectionMatrix)}unproject(camera){return this.applyMatrix4(camera.projectionMatrixInverse).applyMatrix4(camera.matrixWorld)}transformDirection(m){const x=this.x,y=this.y,z=this.z,e=m.elements;return this.x=e[0]*x+e[4]*y+e[8]*z,this.y=e[1]*x+e[5]*y+e[9]*z,this.z=e[2]*x+e[6]*y+e[10]*z,this.normalize()}divide(v){return this.x/=v.x,this.y/=v.y,this.z/=v.z,this}divideScalar(scalar){return this.multiplyScalar(1/scalar)}min(v){return this.x=Math.min(this.x,v.x),this.y=Math.min(this.y,v.y),this.z=Math.min(this.z,v.z),this}max(v){return this.x=Math.max(this.x,v.x),this.y=Math.max(this.y,v.y),this.z=Math.max(this.z,v.z),this}clamp(min,max){return this.x=Math.max(min.x,Math.min(max.x,this.x)),this.y=Math.max(min.y,Math.min(max.y,this.y)),this.z=Math.max(min.z,Math.min(max.z,this.z)),this}clampScalar(minVal,maxVal){return this.x=Math.max(minVal,Math.min(maxVal,this.x)),this.y=Math.max(minVal,Math.min(maxVal,this.y)),this.z=Math.max(minVal,Math.min(maxVal,this.z)),this}clampLength(min,max){const length=this.length();return this.divideScalar(length||1).multiplyScalar(Math.max(min,Math.min(max,length)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(v){return this.x*v.x+this.y*v.y+this.z*v.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(length){return this.normalize().multiplyScalar(length)}lerp(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this.z+=(v.z-this.z)*alpha,this}lerpVectors(v1,v2,alpha){return this.x=v1.x+(v2.x-v1.x)*alpha,this.y=v1.y+(v2.y-v1.y)*alpha,this.z=v1.z+(v2.z-v1.z)*alpha,this}cross(v){return this.crossVectors(this,v)}crossVectors(a,b){const ax=a.x,ay=a.y,az=a.z,bx=b.x,by=b.y,bz=b.z;return this.x=ay*bz-az*by,this.y=az*bx-ax*bz,this.z=ax*by-ay*bx,this}projectOnVector(v){const denominator=v.lengthSq();if(0===denominator)return this.set(0,0,0);const scalar=v.dot(this)/denominator;return this.copy(v).multiplyScalar(scalar)}projectOnPlane(planeNormal){return _vector$c.copy(this).projectOnVector(planeNormal),this.sub(_vector$c)}reflect(normal){return this.sub(_vector$c.copy(normal).multiplyScalar(2*this.dot(normal)))}angleTo(v){const denominator=Math.sqrt(this.lengthSq()*v.lengthSq());if(0===denominator)return Math.PI/2;const theta=this.dot(v)/denominator;return Math.acos(clamp(theta,-1,1))}distanceTo(v){return Math.sqrt(this.distanceToSquared(v))}distanceToSquared(v){const dx=this.x-v.x,dy=this.y-v.y,dz=this.z-v.z;return dx*dx+dy*dy+dz*dz}manhattanDistanceTo(v){return Math.abs(this.x-v.x)+Math.abs(this.y-v.y)+Math.abs(this.z-v.z)}setFromSpherical(s){return this.setFromSphericalCoords(s.radius,s.phi,s.theta)}setFromSphericalCoords(radius,phi,theta){const sinPhiRadius=Math.sin(phi)*radius;return this.x=sinPhiRadius*Math.sin(theta),this.y=Math.cos(phi)*radius,this.z=sinPhiRadius*Math.cos(theta),this}setFromCylindrical(c){return this.setFromCylindricalCoords(c.radius,c.theta,c.y)}setFromCylindricalCoords(radius,theta,y){return this.x=radius*Math.sin(theta),this.y=y,this.z=radius*Math.cos(theta),this}setFromMatrixPosition(m){const e=m.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(m){const sx=this.setFromMatrixColumn(m,0).length(),sy=this.setFromMatrixColumn(m,1).length(),sz=this.setFromMatrixColumn(m,2).length();return this.x=sx,this.y=sy,this.z=sz,this}setFromMatrixColumn(m,index){return this.fromArray(m.elements,4*index)}setFromMatrix3Column(m,index){return this.fromArray(m.elements,3*index)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(v){return v.x===this.x&&v.y===this.y&&v.z===this.z}fromArray(array,offset=0){return this.x=array[offset],this.y=array[offset+1],this.z=array[offset+2],this}toArray(array=[],offset=0){return array[offset]=this.x,array[offset+1]=this.y,array[offset+2]=this.z,array}fromBufferAttribute(attribute,index){return this.x=attribute.getX(index),this.y=attribute.getY(index),this.z=attribute.getZ(index),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const u=2*(Math.random()-.5),t=Math.random()*Math.PI*2,f=Math.sqrt(1-u**2);return this.x=f*Math.cos(t),this.y=f*Math.sin(t),this.z=u,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}__name(Vector32,"Vector3");const _vector$c=new Vector32,_quaternion$4=new Quaternion;class Box3{constructor(min=new Vector32(1/0,1/0,1/0),max=new Vector32(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=min,this.max=max}set(min,max){return this.min.copy(min),this.max.copy(max),this}setFromArray(array){let minX=1/0,minY=1/0,minZ=1/0,maxX=-1/0,maxY=-1/0,maxZ=-1/0;for(let i=0,l=array.length;i<l;i+=3){const x=array[i],y=array[i+1],z=array[i+2];x<minX&&(minX=x),y<minY&&(minY=y),z<minZ&&(minZ=z),x>maxX&&(maxX=x),y>maxY&&(maxY=y),z>maxZ&&(maxZ=z)}return this.min.set(minX,minY,minZ),this.max.set(maxX,maxY,maxZ),this}setFromBufferAttribute(attribute){let minX=1/0,minY=1/0,minZ=1/0,maxX=-1/0,maxY=-1/0,maxZ=-1/0;for(let i=0,l=attribute.count;i<l;i++){const x=attribute.getX(i),y=attribute.getY(i),z=attribute.getZ(i);x<minX&&(minX=x),y<minY&&(minY=y),z<minZ&&(minZ=z),x>maxX&&(maxX=x),y>maxY&&(maxY=y),z>maxZ&&(maxZ=z)}return this.min.set(minX,minY,minZ),this.max.set(maxX,maxY,maxZ),this}setFromPoints(points){this.makeEmpty();for(let i=0,il=points.length;i<il;i++)this.expandByPoint(points[i]);return this}setFromCenterAndSize(center,size){const halfSize=_vector$b.copy(size).multiplyScalar(.5);return this.min.copy(center).sub(halfSize),this.max.copy(center).add(halfSize),this}setFromObject(object,precise=!1){return this.makeEmpty(),this.expandByObject(object,precise)}clone(){return(new this.constructor).copy(this)}copy(box){return this.min.copy(box.min),this.max.copy(box.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(target){return this.isEmpty()?target.set(0,0,0):target.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(target){return this.isEmpty()?target.set(0,0,0):target.subVectors(this.max,this.min)}expandByPoint(point){return this.min.min(point),this.max.max(point),this}expandByVector(vector){return this.min.sub(vector),this.max.add(vector),this}expandByScalar(scalar){return this.min.addScalar(-scalar),this.max.addScalar(scalar),this}expandByObject(object,precise=!1){object.updateWorldMatrix(!1,!1);const geometry=object.geometry;if(void 0!==geometry)if(precise&&null!=geometry.attributes&&void 0!==geometry.attributes.position){const position=geometry.attributes.position;for(let i=0,l=position.count;i<l;i++)_vector$b.fromBufferAttribute(position,i).applyMatrix4(object.matrixWorld),this.expandByPoint(_vector$b)}else null===geometry.boundingBox&&geometry.computeBoundingBox(),_box$3.copy(geometry.boundingBox),_box$3.applyMatrix4(object.matrixWorld),this.union(_box$3);const children=object.children;for(let i=0,l=children.length;i<l;i++)this.expandByObject(children[i],precise);return this}containsPoint(point){return!(point.x<this.min.x||point.x>this.max.x||point.y<this.min.y||point.y>this.max.y||point.z<this.min.z||point.z>this.max.z)}containsBox(box){return this.min.x<=box.min.x&&box.max.x<=this.max.x&&this.min.y<=box.min.y&&box.max.y<=this.max.y&&this.min.z<=box.min.z&&box.max.z<=this.max.z}getParameter(point,target){return target.set((point.x-this.min.x)/(this.max.x-this.min.x),(point.y-this.min.y)/(this.max.y-this.min.y),(point.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(box){return!(box.max.x<this.min.x||box.min.x>this.max.x||box.max.y<this.min.y||box.min.y>this.max.y||box.max.z<this.min.z||box.min.z>this.max.z)}intersectsSphere(sphere){return this.clampPoint(sphere.center,_vector$b),_vector$b.distanceToSquared(sphere.center)<=sphere.radius*sphere.radius}intersectsPlane(plane){let min,max;return plane.normal.x>0?(min=plane.normal.x*this.min.x,max=plane.normal.x*this.max.x):(min=plane.normal.x*this.max.x,max=plane.normal.x*this.min.x),plane.normal.y>0?(min+=plane.normal.y*this.min.y,max+=plane.normal.y*this.max.y):(min+=plane.normal.y*this.max.y,max+=plane.normal.y*this.min.y),plane.normal.z>0?(min+=plane.normal.z*this.min.z,max+=plane.normal.z*this.max.z):(min+=plane.normal.z*this.max.z,max+=plane.normal.z*this.min.z),min<=-plane.constant&&max>=-plane.constant}intersectsTriangle(triangle){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(triangle.a,_center),_v1$7.subVectors(triangle.b,_center),_v2$4.subVectors(triangle.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let axes=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!(!satForAxes(axes,_v0$2,_v1$7,_v2$4,_extents)||(axes=[1,0,0,0,1,0,0,0,1],!satForAxes(axes,_v0$2,_v1$7,_v2$4,_extents)))&&(_triangleNormal.crossVectors(_f0,_f1),axes=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(axes,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(point,target){return target.copy(point).clamp(this.min,this.max)}distanceToPoint(point){return _vector$b.copy(point).clamp(this.min,this.max).sub(point).length()}getBoundingSphere(target){return this.getCenter(target.center),target.radius=.5*this.getSize(_vector$b).length(),target}intersect(box){return this.min.max(box.min),this.max.min(box.max),this.isEmpty()&&this.makeEmpty(),this}union(box){return this.min.min(box.min),this.max.max(box.max),this}applyMatrix4(matrix){return this.isEmpty()||(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(matrix),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(matrix),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(matrix),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(matrix),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(matrix),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(matrix),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(matrix),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(matrix),this.setFromPoints(_points)),this}translate(offset){return this.min.add(offset),this.max.add(offset),this}equals(box){return box.min.equals(this.min)&&box.max.equals(this.max)}}__name(Box3,"Box3");const _points=[new Vector32,new Vector32,new Vector32,new Vector32,new Vector32,new Vector32,new Vector32,new Vector32],_vector$b=new Vector32,_box$3=new Box3,_v0$2=new Vector32,_v1$7=new Vector32,_v2$4=new Vector32,_f0=new Vector32,_f1=new Vector32,_f2=new Vector32,_center=new Vector32,_extents=new Vector32,_triangleNormal=new Vector32,_testAxis=new Vector32;function satForAxes(axes,v0,v1,v2,extents){for(let i=0,j=axes.length-3;i<=j;i+=3){_testAxis.fromArray(axes,i);const r=extents.x*Math.abs(_testAxis.x)+extents.y*Math.abs(_testAxis.y)+extents.z*Math.abs(_testAxis.z),p0=v0.dot(_testAxis),p1=v1.dot(_testAxis),p2=v2.dot(_testAxis);if(Math.max(-Math.max(p0,p1,p2),Math.min(p0,p1,p2))>r)return!1}return!0}__name(satForAxes,"satForAxes");const _box$2=new Box3,_v1$6=new Vector32,_v2$3=new Vector32;class Sphere{constructor(center=new Vector32,radius=-1){this.center=center,this.radius=radius}set(center,radius){return this.center.copy(center),this.radius=radius,this}setFromPoints(points,optionalCenter){const center=this.center;void 0!==optionalCenter?center.copy(optionalCenter):_box$2.setFromPoints(points).getCenter(center);let maxRadiusSq=0;for(let i=0,il=points.length;i<il;i++)maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(points[i]));return this.radius=Math.sqrt(maxRadiusSq),this}copy(sphere){return this.center.copy(sphere.center),this.radius=sphere.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(point){return point.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(point){return point.distanceTo(this.center)-this.radius}intersectsSphere(sphere){const radiusSum=this.radius+sphere.radius;return sphere.center.distanceToSquared(this.center)<=radiusSum*radiusSum}intersectsBox(box){return box.intersectsSphere(this)}intersectsPlane(plane){return Math.abs(plane.distanceToPoint(this.center))<=this.radius}clampPoint(point,target){const deltaLengthSq=this.center.distanceToSquared(point);return target.copy(point),deltaLengthSq>this.radius*this.radius&&(target.sub(this.center).normalize(),target.multiplyScalar(this.radius).add(this.center)),target}getBoundingBox(target){return this.isEmpty()?(target.makeEmpty(),target):(target.set(this.center,this.center),target.expandByScalar(this.radius),target)}applyMatrix4(matrix){return this.center.applyMatrix4(matrix),this.radius=this.radius*matrix.getMaxScaleOnAxis(),this}translate(offset){return this.center.add(offset),this}expandByPoint(point){if(this.isEmpty())return this.center.copy(point),this.radius=0,this;_v1$6.subVectors(point,this.center);const lengthSq=_v1$6.lengthSq();if(lengthSq>this.radius*this.radius){const length=Math.sqrt(lengthSq),delta=.5*(length-this.radius);this.center.addScaledVector(_v1$6,delta/length),this.radius+=delta}return this}union(sphere){return sphere.isEmpty()?this:this.isEmpty()?(this.copy(sphere),this):(!0===this.center.equals(sphere.center)?this.radius=Math.max(this.radius,sphere.radius):(_v2$3.subVectors(sphere.center,this.center).setLength(sphere.radius),this.expandByPoint(_v1$6.copy(sphere.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(sphere.center).sub(_v2$3))),this)}equals(sphere){return sphere.center.equals(this.center)&&sphere.radius===this.radius}clone(){return(new this.constructor).copy(this)}}__name(Sphere,"Sphere");const _vector$a=new Vector32,_segCenter=new Vector32,_segDir=new Vector32,_diff=new Vector32,_edge1=new Vector32,_edge2=new Vector32,_normal$1=new Vector32;class Ray{constructor(origin=new Vector32,direction=new Vector32(0,0,-1)){this.origin=origin,this.direction=direction}set(origin,direction){return this.origin.copy(origin),this.direction.copy(direction),this}copy(ray){return this.origin.copy(ray.origin),this.direction.copy(ray.direction),this}at(t,target){return target.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(v){return this.direction.copy(v).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,_vector$a)),this}closestPointToPoint(point,target){target.subVectors(point,this.origin);const directionDistance=target.dot(this.direction);return directionDistance<0?target.copy(this.origin):target.copy(this.direction).multiplyScalar(directionDistance).add(this.origin)}distanceToPoint(point){return Math.sqrt(this.distanceSqToPoint(point))}distanceSqToPoint(point){const directionDistance=_vector$a.subVectors(point,this.origin).dot(this.direction);return directionDistance<0?this.origin.distanceToSquared(point):(_vector$a.copy(this.direction).multiplyScalar(directionDistance).add(this.origin),_vector$a.distanceToSquared(point))}distanceSqToSegment(v0,v1,optionalPointOnRay,optionalPointOnSegment){_segCenter.copy(v0).add(v1).multiplyScalar(.5),_segDir.copy(v1).sub(v0).normalize(),_diff.copy(this.origin).sub(_segCenter);const segExtent=.5*v0.distanceTo(v1),a01=-this.direction.dot(_segDir),b0=_diff.dot(this.direction),b1=-_diff.dot(_segDir),c=_diff.lengthSq(),det=Math.abs(1-a01*a01);let s0,s1,sqrDist,extDet;if(det>0)if(s0=a01*b1-b0,s1=a01*b0-b1,extDet=segExtent*det,s0>=0)if(s1>=-extDet)if(s1<=extDet){const invDet=1/det;s0*=invDet,s1*=invDet,sqrDist=s0*(s0+a01*s1+2*b0)+s1*(a01*s0+s1+2*b1)+c}else s1=segExtent,s0=Math.max(0,-(a01*s1+b0)),sqrDist=-s0*s0+s1*(s1+2*b1)+c;else s1=-segExtent,s0=Math.max(0,-(a01*s1+b0)),sqrDist=-s0*s0+s1*(s1+2*b1)+c;else s1<=-extDet?(s0=Math.max(0,-(-a01*segExtent+b0)),s1=s0>0?-segExtent:Math.min(Math.max(-segExtent,-b1),segExtent),sqrDist=-s0*s0+s1*(s1+2*b1)+c):s1<=extDet?(s0=0,s1=Math.min(Math.max(-segExtent,-b1),segExtent),sqrDist=s1*(s1+2*b1)+c):(s0=Math.max(0,-(a01*segExtent+b0)),s1=s0>0?segExtent:Math.min(Math.max(-segExtent,-b1),segExtent),sqrDist=-s0*s0+s1*(s1+2*b1)+c);else s1=a01>0?-segExtent:segExtent,s0=Math.max(0,-(a01*s1+b0)),sqrDist=-s0*s0+s1*(s1+2*b1)+c;return optionalPointOnRay&&optionalPointOnRay.copy(this.direction).multiplyScalar(s0).add(this.origin),optionalPointOnSegment&&optionalPointOnSegment.copy(_segDir).multiplyScalar(s1).add(_segCenter),sqrDist}intersectSphere(sphere,target){_vector$a.subVectors(sphere.center,this.origin);const tca=_vector$a.dot(this.direction),d2=_vector$a.dot(_vector$a)-tca*tca,radius2=sphere.radius*sphere.radius;if(d2>radius2)return null;const thc=Math.sqrt(radius2-d2),t0=tca-thc,t1=tca+thc;return t0<0&&t1<0?null:this.at(t0<0?t1:t0,target)}intersectsSphere(sphere){return this.distanceSqToPoint(sphere.center)<=sphere.radius*sphere.radius}distanceToPlane(plane){const denominator=plane.normal.dot(this.direction);if(0===denominator)return 0===plane.distanceToPoint(this.origin)?0:null;const t=-(this.origin.dot(plane.normal)+plane.constant)/denominator;return t>=0?t:null}intersectPlane(plane,target){const t=this.distanceToPlane(plane);return null===t?null:this.at(t,target)}intersectsPlane(plane){const distToPoint=plane.distanceToPoint(this.origin);return 0===distToPoint||plane.normal.dot(this.direction)*distToPoint<0}intersectBox(box,target){let tmin,tmax,tymin,tymax,tzmin,tzmax;const invdirx=1/this.direction.x,invdiry=1/this.direction.y,invdirz=1/this.direction.z,origin=this.origin;return invdirx>=0?(tmin=(box.min.x-origin.x)*invdirx,tmax=(box.max.x-origin.x)*invdirx):(tmin=(box.max.x-origin.x)*invdirx,tmax=(box.min.x-origin.x)*invdirx),invdiry>=0?(tymin=(box.min.y-origin.y)*invdiry,tymax=(box.max.y-origin.y)*invdiry):(tymin=(box.max.y-origin.y)*invdiry,tymax=(box.min.y-origin.y)*invdiry),tmin>tymax||tymin>tmax||((tymin>tmin||isNaN(tmin))&&(tmin=tymin),(tymax<tmax||isNaN(tmax))&&(tmax=tymax),invdirz>=0?(tzmin=(box.min.z-origin.z)*invdirz,tzmax=(box.max.z-origin.z)*invdirz):(tzmin=(box.max.z-origin.z)*invdirz,tzmax=(box.min.z-origin.z)*invdirz),tmin>tzmax||tzmin>tmax)||((tzmin>tmin||tmin!=tmin)&&(tmin=tzmin),(tzmax<tmax||tmax!=tmax)&&(tmax=tzmax),tmax<0)?null:this.at(tmin>=0?tmin:tmax,target)}intersectsBox(box){return null!==this.intersectBox(box,_vector$a)}intersectTriangle(a,b,c,backfaceCulling,target){_edge1.subVectors(b,a),_edge2.subVectors(c,a),_normal$1.crossVectors(_edge1,_edge2);let sign2,DdN=this.direction.dot(_normal$1);if(DdN>0){if(backfaceCulling)return null;sign2=1}else{if(!(DdN<0))return null;sign2=-1,DdN=-DdN}_diff.subVectors(this.origin,a);const DdQxE2=sign2*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(DdQxE2<0)return null;const DdE1xQ=sign2*this.direction.dot(_edge1.cross(_diff));if(DdE1xQ<0||DdQxE2+DdE1xQ>DdN)return null;const QdN=-sign2*_diff.dot(_normal$1);return QdN<0?null:this.at(QdN/DdN,target)}applyMatrix4(matrix4){return this.origin.applyMatrix4(matrix4),this.direction.transformDirection(matrix4),this}equals(ray){return ray.origin.equals(this.origin)&&ray.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}__name(Ray,"Ray");class Matrix42{constructor(){Matrix42.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){const te=this.elements;return te[0]=n11,te[4]=n12,te[8]=n13,te[12]=n14,te[1]=n21,te[5]=n22,te[9]=n23,te[13]=n24,te[2]=n31,te[6]=n32,te[10]=n33,te[14]=n34,te[3]=n41,te[7]=n42,te[11]=n43,te[15]=n44,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix42).fromArray(this.elements)}copy(m){const te=this.elements,me=m.elements;return te[0]=me[0],te[1]=me[1],te[2]=me[2],te[3]=me[3],te[4]=me[4],te[5]=me[5],te[6]=me[6],te[7]=me[7],te[8]=me[8],te[9]=me[9],te[10]=me[10],te[11]=me[11],te[12]=me[12],te[13]=me[13],te[14]=me[14],te[15]=me[15],this}copyPosition(m){const te=this.elements,me=m.elements;return te[12]=me[12],te[13]=me[13],te[14]=me[14],this}setFromMatrix3(m){const me=m.elements;return this.set(me[0],me[3],me[6],0,me[1],me[4],me[7],0,me[2],me[5],me[8],0,0,0,0,1),this}extractBasis(xAxis,yAxis,zAxis){return xAxis.setFromMatrixColumn(this,0),yAxis.setFromMatrixColumn(this,1),zAxis.setFromMatrixColumn(this,2),this}makeBasis(xAxis,yAxis,zAxis){return this.set(xAxis.x,yAxis.x,zAxis.x,0,xAxis.y,yAxis.y,zAxis.y,0,xAxis.z,yAxis.z,zAxis.z,0,0,0,0,1),this}extractRotation(m){const te=this.elements,me=m.elements,scaleX=1/_v1$5.setFromMatrixColumn(m,0).length(),scaleY=1/_v1$5.setFromMatrixColumn(m,1).length(),scaleZ=1/_v1$5.setFromMatrixColumn(m,2).length();return te[0]=me[0]*scaleX,te[1]=me[1]*scaleX,te[2]=me[2]*scaleX,te[3]=0,te[4]=me[4]*scaleY,te[5]=me[5]*scaleY,te[6]=me[6]*scaleY,te[7]=0,te[8]=me[8]*scaleZ,te[9]=me[9]*scaleZ,te[10]=me[10]*scaleZ,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}makeRotationFromEuler(euler){const te=this.elements,x=euler.x,y=euler.y,z=euler.z,a=Math.cos(x),b=Math.sin(x),c=Math.cos(y),d=Math.sin(y),e=Math.cos(z),f=Math.sin(z);if("XYZ"===euler.order){const ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e,te[4]=-c*f,te[8]=d,te[1]=af+be*d,te[5]=ae-bf*d,te[9]=-b*c,te[2]=bf-ae*d,te[6]=be+af*d,te[10]=a*c}else if("YXZ"===euler.order){const ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce+df*b,te[4]=de*b-cf,te[8]=a*d,te[1]=a*f,te[5]=a*e,te[9]=-b,te[2]=cf*b-de,te[6]=df+ce*b,te[10]=a*c}else if("ZXY"===euler.order){const ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce-df*b,te[4]=-a*f,te[8]=de+cf*b,te[1]=cf+de*b,te[5]=a*e,te[9]=df-ce*b,te[2]=-a*d,te[6]=b,te[10]=a*c}else if("ZYX"===euler.order){const ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e,te[4]=be*d-af,te[8]=ae*d+bf,te[1]=c*f,te[5]=bf*d+ae,te[9]=af*d-be,te[2]=-d,te[6]=b*c,te[10]=a*c}else if("YZX"===euler.order){const ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e,te[4]=bd-ac*f,te[8]=bc*f+ad,te[1]=f,te[5]=a*e,te[9]=-b*e,te[2]=-d*e,te[6]=ad*f+bc,te[10]=ac-bd*f}else if("XZY"===euler.order){const ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e,te[4]=-f,te[8]=d*e,te[1]=ac*f+bd,te[5]=a*e,te[9]=ad*f-bc,te[2]=bc*f-ad,te[6]=b*e,te[10]=bd*f+ac}return te[3]=0,te[7]=0,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}makeRotationFromQuaternion(q){return this.compose(_zero,q,_one)}lookAt(eye,target,up){const te=this.elements;return _z.subVectors(eye,target),0===_z.lengthSq()&&(_z.z=1),_z.normalize(),_x.crossVectors(up,_z),0===_x.lengthSq()&&(1===Math.abs(up.z)?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(up,_z)),_x.normalize(),_y.crossVectors(_z,_x),te[0]=_x.x,te[4]=_y.x,te[8]=_z.x,te[1]=_x.y,te[5]=_y.y,te[9]=_z.y,te[2]=_x.z,te[6]=_y.z,te[10]=_z.z,this}multiply(m){return this.multiplyMatrices(this,m)}premultiply(m){return this.multiplyMatrices(m,this)}multiplyMatrices(a,b){const ae=a.elements,be=b.elements,te=this.elements,a11=ae[0],a12=ae[4],a13=ae[8],a14=ae[12],a21=ae[1],a22=ae[5],a23=ae[9],a24=ae[13],a31=ae[2],a32=ae[6],a33=ae[10],a34=ae[14],a41=ae[3],a42=ae[7],a43=ae[11],a44=ae[15],b11=be[0],b12=be[4],b13=be[8],b14=be[12],b21=be[1],b22=be[5],b23=be[9],b24=be[13],b31=be[2],b32=be[6],b33=be[10],b34=be[14],b41=be[3],b42=be[7],b43=be[11],b44=be[15];return te[0]=a11*b11+a12*b21+a13*b31+a14*b41,te[4]=a11*b12+a12*b22+a13*b32+a14*b42,te[8]=a11*b13+a12*b23+a13*b33+a14*b43,te[12]=a11*b14+a12*b24+a13*b34+a14*b44,te[1]=a21*b11+a22*b21+a23*b31+a24*b41,te[5]=a21*b12+a22*b22+a23*b32+a24*b42,te[9]=a21*b13+a22*b23+a23*b33+a24*b43,te[13]=a21*b14+a22*b24+a23*b34+a24*b44,te[2]=a31*b11+a32*b21+a33*b31+a34*b41,te[6]=a31*b12+a32*b22+a33*b32+a34*b42,te[10]=a31*b13+a32*b23+a33*b33+a34*b43,te[14]=a31*b14+a32*b24+a33*b34+a34*b44,te[3]=a41*b11+a42*b21+a43*b31+a44*b41,te[7]=a41*b12+a42*b22+a43*b32+a44*b42,te[11]=a41*b13+a42*b23+a43*b33+a44*b43,te[15]=a41*b14+a42*b24+a43*b34+a44*b44,this}multiplyScalar(s){const te=this.elements;return te[0]*=s,te[4]*=s,te[8]*=s,te[12]*=s,te[1]*=s,te[5]*=s,te[9]*=s,te[13]*=s,te[2]*=s,te[6]*=s,te[10]*=s,te[14]*=s,te[3]*=s,te[7]*=s,te[11]*=s,te[15]*=s,this}determinant(){const te=this.elements,n11=te[0],n12=te[4],n13=te[8],n14=te[12],n21=te[1],n22=te[5],n23=te[9],n24=te[13],n31=te[2],n32=te[6],n33=te[10],n34=te[14];return te[3]*(+n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34)+te[7]*(+n11*n23*n34-n11*n24*n33+n14*n21*n33-n13*n21*n34+n13*n24*n31-n14*n23*n31)+te[11]*(+n11*n24*n32-n11*n22*n34-n14*n21*n32+n12*n21*n34+n14*n22*n31-n12*n24*n31)+te[15]*(-n13*n22*n31-n11*n23*n32+n11*n22*n33+n13*n21*n32-n12*n21*n33+n12*n23*n31)}transpose(){const te=this.elements;let tmp2;return tmp2=te[1],te[1]=te[4],te[4]=tmp2,tmp2=te[2],te[2]=te[8],te[8]=tmp2,tmp2=te[6],te[6]=te[9],te[9]=tmp2,tmp2=te[3],te[3]=te[12],te[12]=tmp2,tmp2=te[7],te[7]=te[13],te[13]=tmp2,tmp2=te[11],te[11]=te[14],te[14]=tmp2,this}setPosition(x,y,z){const te=this.elements;return x.isVector3?(te[12]=x.x,te[13]=x.y,te[14]=x.z):(te[12]=x,te[13]=y,te[14]=z),this}invert(){const te=this.elements,n11=te[0],n21=te[1],n31=te[2],n41=te[3],n12=te[4],n22=te[5],n32=te[6],n42=te[7],n13=te[8],n23=te[9],n33=te[10],n43=te[11],n14=te[12],n24=te[13],n34=te[14],n44=te[15],t11=n23*n34*n42-n24*n33*n42+n24*n32*n43-n22*n34*n43-n23*n32*n44+n22*n33*n44,t12=n14*n33*n42-n13*n34*n42-n14*n32*n43+n12*n34*n43+n13*n32*n44-n12*n33*n44,t13=n13*n24*n42-n14*n23*n42+n14*n22*n43-n12*n24*n43-n13*n22*n44+n12*n23*n44,t14=n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34,det=n11*t11+n21*t12+n31*t13+n41*t14;if(0===det)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const detInv=1/det;return te[0]=t11*detInv,te[1]=(n24*n33*n41-n23*n34*n41-n24*n31*n43+n21*n34*n43+n23*n31*n44-n21*n33*n44)*detInv,te[2]=(n22*n34*n41-n24*n32*n41+n24*n31*n42-n21*n34*n42-n22*n31*n44+n21*n32*n44)*detInv,te[3]=(n23*n32*n41-n22*n33*n41-n23*n31*n42+n21*n33*n42+n22*n31*n43-n21*n32*n43)*detInv,te[4]=t12*detInv,te[5]=(n13*n34*n41-n14*n33*n41+n14*n31*n43-n11*n34*n43-n13*n31*n44+n11*n33*n44)*detInv,te[6]=(n14*n32*n41-n12*n34*n41-n14*n31*n42+n11*n34*n42+n12*n31*n44-n11*n32*n44)*detInv,te[7]=(n12*n33*n41-n13*n32*n41+n13*n31*n42-n11*n33*n42-n12*n31*n43+n11*n32*n43)*detInv,te[8]=t13*detInv,te[9]=(n14*n23*n41-n13*n24*n41-n14*n21*n43+n11*n24*n43+n13*n21*n44-n11*n23*n44)*detInv,te[10]=(n12*n24*n41-n14*n22*n41+n14*n21*n42-n11*n24*n42-n12*n21*n44+n11*n22*n44)*detInv,te[11]=(n13*n22*n41-n12*n23*n41-n13*n21*n42+n11*n23*n42+n12*n21*n43-n11*n22*n43)*detInv,te[12]=t14*detInv,te[13]=(n13*n24*n31-n14*n23*n31+n14*n21*n33-n11*n24*n33-n13*n21*n34+n11*n23*n34)*detInv,te[14]=(n14*n22*n31-n12*n24*n31-n14*n21*n32+n11*n24*n32+n12*n21*n34-n11*n22*n34)*detInv,te[15]=(n12*n23*n31-n13*n22*n31+n13*n21*n32-n11*n23*n32-n12*n21*n33+n11*n22*n33)*detInv,this}scale(v){const te=this.elements,x=v.x,y=v.y,z=v.z;return te[0]*=x,te[4]*=y,te[8]*=z,te[1]*=x,te[5]*=y,te[9]*=z,te[2]*=x,te[6]*=y,te[10]*=z,te[3]*=x,te[7]*=y,te[11]*=z,this}getMaxScaleOnAxis(){const te=this.elements;return Math.sqrt(Math.max(te[0]*te[0]+te[1]*te[1]+te[2]*te[2],te[4]*te[4]+te[5]*te[5]+te[6]*te[6],te[8]*te[8]+te[9]*te[9]+te[10]*te[10]))}makeTranslation(x,y,z){return this.set(1,0,0,x,0,1,0,y,0,0,1,z,0,0,0,1),this}makeRotationX(theta){const c=Math.cos(theta),s=Math.sin(theta);return this.set(1,0,0,0,0,c,-s,0,0,s,c,0,0,0,0,1),this}makeRotationY(theta){const c=Math.cos(theta),s=Math.sin(theta);return this.set(c,0,s,0,0,1,0,0,-s,0,c,0,0,0,0,1),this}makeRotationZ(theta){const c=Math.cos(theta),s=Math.sin(theta);return this.set(c,-s,0,0,s,c,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(axis,angle){const c=Math.cos(angle),s=Math.sin(angle),t=1-c,x=axis.x,y=axis.y,z=axis.z,tx=t*x,ty=t*y;return this.set(tx*x+c,tx*y-s*z,tx*z+s*y,0,tx*y+s*z,ty*y+c,ty*z-s*x,0,tx*z-s*y,ty*z+s*x,t*z*z+c,0,0,0,0,1),this}makeScale(x,y,z){return this.set(x,0,0,0,0,y,0,0,0,0,z,0,0,0,0,1),this}makeShear(xy,xz,yx,yz,zx,zy){return this.set(1,yx,zx,0,xy,1,zy,0,xz,yz,1,0,0,0,0,1),this}compose(position,quaternion,scale){const te=this.elements,x=quaternion._x,y=quaternion._y,z=quaternion._z,w=quaternion._w,x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=scale.x,sy=scale.y,sz=scale.z;return te[0]=(1-(yy+zz))*sx,te[1]=(xy+wz)*sx,te[2]=(xz-wy)*sx,te[3]=0,te[4]=(xy-wz)*sy,te[5]=(1-(xx+zz))*sy,te[6]=(yz+wx)*sy,te[7]=0,te[8]=(xz+wy)*sz,te[9]=(yz-wx)*sz,te[10]=(1-(xx+yy))*sz,te[11]=0,te[12]=position.x,te[13]=position.y,te[14]=position.z,te[15]=1,this}decompose(position,quaternion,scale){const te=this.elements;let sx=_v1$5.set(te[0],te[1],te[2]).length();const sy=_v1$5.set(te[4],te[5],te[6]).length(),sz=_v1$5.set(te[8],te[9],te[10]).length();this.determinant()<0&&(sx=-sx),position.x=te[12],position.y=te[13],position.z=te[14],_m1$2.copy(this);const invSX=1/sx,invSY=1/sy,invSZ=1/sz;return _m1$2.elements[0]*=invSX,_m1$2.elements[1]*=invSX,_m1$2.elements[2]*=invSX,_m1$2.elements[4]*=invSY,_m1$2.elements[5]*=invSY,_m1$2.elements[6]*=invSY,_m1$2.elements[8]*=invSZ,_m1$2.elements[9]*=invSZ,_m1$2.elements[10]*=invSZ,quaternion.setFromRotationMatrix(_m1$2),scale.x=sx,scale.y=sy,scale.z=sz,this}makePerspective(left,right,top,bottom,near,far){const te=this.elements,y=2*near/(top-bottom),a=(right+left)/(right-left),b=(top+bottom)/(top-bottom),c=-(far+near)/(far-near),d=-2*far*near/(far-near);return te[0]=2*near/(right-left),te[4]=0,te[8]=a,te[12]=0,te[1]=0,te[5]=y,te[9]=b,te[13]=0,te[2]=0,te[6]=0,te[10]=c,te[14]=d,te[3]=0,te[7]=0,te[11]=-1,te[15]=0,this}makeOrthographic(left,right,top,bottom,near,far){const te=this.elements,w=1/(right-left),h=1/(top-bottom),p=1/(far-near),x=(right+left)*w,y=(top+bottom)*h,z=(far+near)*p;return te[0]=2*w,te[4]=0,te[8]=0,te[12]=-x,te[1]=0,te[5]=2*h,te[9]=0,te[13]=-y,te[2]=0,te[6]=0,te[10]=-2*p,te[14]=-z,te[3]=0,te[7]=0,te[11]=0,te[15]=1,this}equals(matrix){const te=this.elements,me=matrix.elements;for(let i=0;i<16;i++)if(te[i]!==me[i])return!1;return!0}fromArray(array,offset=0){for(let i=0;i<16;i++)this.elements[i]=array[i+offset];return this}toArray(array=[],offset=0){const te=this.elements;return array[offset]=te[0],array[offset+1]=te[1],array[offset+2]=te[2],array[offset+3]=te[3],array[offset+4]=te[4],array[offset+5]=te[5],array[offset+6]=te[6],array[offset+7]=te[7],array[offset+8]=te[8],array[offset+9]=te[9],array[offset+10]=te[10],array[offset+11]=te[11],array[offset+12]=te[12],array[offset+13]=te[13],array[offset+14]=te[14],array[offset+15]=te[15],array}}__name(Matrix42,"Matrix4");const _v1$5=new Vector32,_m1$2=new Matrix42,_zero=new Vector32(0,0,0),_one=new Vector32(1,1,1),_x=new Vector32,_y=new Vector32,_z=new Vector32,_matrix$1=new Matrix42,_quaternion$3=new Quaternion;let Euler=(()=>{class Euler2{constructor(x=0,y=0,z=0,order=Euler2.DefaultOrder){this.isEuler=!0,this._x=x,this._y=y,this._z=z,this._order=order}get x(){return this._x}set x(value){this._x=value,this._onChangeCallback()}get y(){return this._y}set y(value){this._y=value,this._onChangeCallback()}get z(){return this._z}set z(value){this._z=value,this._onChangeCallback()}get order(){return this._order}set order(value){this._order=value,this._onChangeCallback()}set(x,y,z,order=this._order){return this._x=x,this._y=y,this._z=z,this._order=order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(euler){return this._x=euler._x,this._y=euler._y,this._z=euler._z,this._order=euler._order,this._onChangeCallback(),this}setFromRotationMatrix(m,order=this._order,update=!0){const te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10];switch(order){case"XYZ":this._y=Math.asin(clamp(m13,-1,1)),Math.abs(m13)<.9999999?(this._x=Math.atan2(-m23,m33),this._z=Math.atan2(-m12,m11)):(this._x=Math.atan2(m32,m22),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(m23,-1,1)),Math.abs(m23)<.9999999?(this._y=Math.atan2(m13,m33),this._z=Math.atan2(m21,m22)):(this._y=Math.atan2(-m31,m11),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(m32,-1,1)),Math.abs(m32)<.9999999?(this._y=Math.atan2(-m31,m33),this._z=Math.atan2(-m12,m22)):(this._y=0,this._z=Math.atan2(m21,m11));break;case"ZYX":this._y=Math.asin(-clamp(m31,-1,1)),Math.abs(m31)<.9999999?(this._x=Math.atan2(m32,m33),this._z=Math.atan2(m21,m11)):(this._x=0,this._z=Math.atan2(-m12,m22));break;case"YZX":this._z=Math.asin(clamp(m21,-1,1)),Math.abs(m21)<.9999999?(this._x=Math.atan2(-m23,m22),this._y=Math.atan2(-m31,m11)):(this._x=0,this._y=Math.atan2(m13,m33));break;case"XZY":this._z=Math.asin(-clamp(m12,-1,1)),Math.abs(m12)<.9999999?(this._x=Math.atan2(m32,m22),this._y=Math.atan2(m13,m11)):(this._x=Math.atan2(-m23,m33),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+order)}return this._order=order,!0===update&&this._onChangeCallback(),this}setFromQuaternion(q,order,update){return _matrix$1.makeRotationFromQuaternion(q),this.setFromRotationMatrix(_matrix$1,order,update)}setFromVector3(v,order=this._order){return this.set(v.x,v.y,v.z,order)}reorder(newOrder){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,newOrder)}equals(euler){return euler._x===this._x&&euler._y===this._y&&euler._z===this._z&&euler._order===this._order}fromArray(array){return this._x=array[0],this._y=array[1],this._z=array[2],void 0!==array[3]&&(this._order=array[3]),this._onChangeCallback(),this}toArray(array=[],offset=0){return array[offset]=this._x,array[offset+1]=this._y,array[offset+2]=this._z,array[offset+3]=this._order,array}_onChange(callback){return this._onChangeCallback=callback,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return __name(Euler2,"Euler"),Euler2.DefaultOrder="XYZ",Euler2.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Euler2})();class Layers{constructor(){this.mask=1}set(channel){this.mask=(1<<channel|0)>>>0}enable(channel){this.mask|=1<<channel|0}enableAll(){this.mask=-1}toggle(channel){this.mask^=1<<channel|0}disable(channel){this.mask&=~(1<<channel|0)}disableAll(){this.mask=0}test(layers){return 0!=(this.mask&layers.mask)}isEnabled(channel){return 0!=(this.mask&(1<<channel|0))}}__name(Layers,"Layers");let _object3DId=0;const _v1$4=new Vector32,_q1=new Quaternion,_m1$1=new Matrix42,_target=new Vector32,_position$3=new Vector32,_scale$2=new Vector32,_quaternion$2=new Quaternion,_xAxis=new Vector32(1,0,0),_yAxis=new Vector32(0,1,0),_zAxis=new Vector32(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};let Object3D=(()=>{class Object3D2 extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D2.DefaultUp.clone();const position=new Vector32,rotation=new Euler,quaternion=new Quaternion,scale=new Vector32(1,1,1);function onRotationChange(){quaternion.setFromEuler(rotation,!1)}function onQuaternionChange(){rotation.setFromQuaternion(quaternion,void 0,!1)}__name(onRotationChange,"onRotationChange"),__name(onQuaternionChange,"onQuaternionChange"),rotation._onChange(onRotationChange),quaternion._onChange(onQuaternionChange),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:position},rotation:{configurable:!0,enumerable:!0,value:rotation},quaternion:{configurable:!0,enumerable:!0,value:quaternion},scale:{configurable:!0,enumerable:!0,value:scale},modelViewMatrix:{value:new Matrix42},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix42,this.matrixWorld=new Matrix42,this.matrixAutoUpdate=Object3D2.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D2.DefaultMatrixWorldAutoUpdate,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(matrix){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(q){return this.quaternion.premultiply(q),this}setRotationFromAxisAngle(axis,angle){this.quaternion.setFromAxisAngle(axis,angle)}setRotationFromEuler(euler){this.quaternion.setFromEuler(euler,!0)}setRotationFromMatrix(m){this.quaternion.setFromRotationMatrix(m)}setRotationFromQuaternion(q){this.quaternion.copy(q)}rotateOnAxis(axis,angle){return _q1.setFromAxisAngle(axis,angle),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(axis,angle){return _q1.setFromAxisAngle(axis,angle),this.quaternion.premultiply(_q1),this}rotateX(angle){return this.rotateOnAxis(_xAxis,angle)}rotateY(angle){return this.rotateOnAxis(_yAxis,angle)}rotateZ(angle){return this.rotateOnAxis(_zAxis,angle)}translateOnAxis(axis,distance){return _v1$4.copy(axis).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(distance)),this}translateX(distance){return this.translateOnAxis(_xAxis,distance)}translateY(distance){return this.translateOnAxis(_yAxis,distance)}translateZ(distance){return this.translateOnAxis(_zAxis,distance)}localToWorld(vector){return this.updateWorldMatrix(!0,!1),vector.applyMatrix4(this.matrixWorld)}worldToLocal(vector){return this.updateWorldMatrix(!0,!1),vector.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(x,y,z){x.isVector3?_target.copy(x):_target.set(x,y,z);const parent=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),parent&&(_m1$1.extractRotation(parent.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return object===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",object),this):(object&&object.isObject3D?(null!==object.parent&&object.parent.remove(object),object.parent=this,this.children.push(object),object.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",object),this)}remove(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const index=this.children.indexOf(object);return-1!==index&&(object.parent=null,this.children.splice(index,1),object.dispatchEvent(_removedEvent)),this}removeFromParent(){const parent=this.parent;return null!==parent&&parent.remove(this),this}clear(){for(let i=0;i<this.children.length;i++){const object=this.children[i];object.parent=null,object.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(object){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),null!==object.parent&&(object.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(object.parent.matrixWorld)),object.applyMatrix4(_m1$1),this.add(object),object.updateWorldMatrix(!1,!0),this}getObjectById(id2){return this.getObjectByProperty("id",id2)}getObjectByName(name){return this.getObjectByProperty("name",name)}getObjectByProperty(name,value){if(this[name]===value)return this;for(let i=0,l=this.children.length;i<l;i++){const object=this.children[i].getObjectByProperty(name,value);if(void 0!==object)return object}}getObjectsByProperty(name,value){let result=[];this[name]===value&&result.push(this);for(let i=0,l=this.children.length;i<l;i++){const childResult=this.children[i].getObjectsByProperty(name,value);childResult.length>0&&(result=result.concat(childResult))}return result}getWorldPosition(target){return this.updateWorldMatrix(!0,!1),target.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(target){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,target,_scale$2),target}getWorldScale(target){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,target),target}getWorldDirection(target){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return target.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(callback){callback(this);const children=this.children;for(let i=0,l=children.length;i<l;i++)children[i].traverse(callback)}traverseVisible(callback){if(!1===this.visible)return;callback(this);const children=this.children;for(let i=0,l=children.length;i<l;i++)children[i].traverseVisible(callback)}traverseAncestors(callback){const parent=this.parent;null!==parent&&(callback(parent),parent.traverseAncestors(callback))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(force){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||force)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,force=!0);const children=this.children;for(let i=0,l=children.length;i<l;i++){const child=children[i];(!0===child.matrixWorldAutoUpdate||!0===force)&&child.updateMatrixWorld(force)}}updateWorldMatrix(updateParents,updateChildren){const parent=this.parent;if(!0===updateParents&&null!==parent&&!0===parent.matrixWorldAutoUpdate&&parent.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===updateChildren){const children=this.children;for(let i=0,l=children.length;i<l;i++){const child=children[i];!0===child.matrixWorldAutoUpdate&&child.updateWorldMatrix(!1,!0)}}}toJSON(meta){const isRootObject=void 0===meta||"string"==typeof meta,output={};isRootObject&&(meta={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},output.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const object={};function serialize(library,element){return void 0===library[element.uuid]&&(library[element.uuid]=element.toJSON(meta)),element.uuid}if(object.uuid=this.uuid,object.type=this.type,""!==this.name&&(object.name=this.name),!0===this.castShadow&&(object.castShadow=!0),!0===this.receiveShadow&&(object.receiveShadow=!0),!1===this.visible&&(object.visible=!1),!1===this.frustumCulled&&(object.frustumCulled=!1),0!==this.renderOrder&&(object.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(object.userData=this.userData),object.layers=this.layers.mask,object.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(object.matrixAutoUpdate=!1),this.isInstancedMesh&&(object.type="InstancedMesh",object.count=this.count,object.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(object.instanceColor=this.instanceColor.toJSON())),__name(serialize,"serialize"),this.isScene)this.background&&(this.background.isColor?object.background=this.background.toJSON():this.background.isTexture&&(object.background=this.background.toJSON(meta).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(object.environment=this.environment.toJSON(meta).uuid);else if(this.isMesh||this.isLine||this.isPoints){object.geometry=serialize(meta.geometries,this.geometry);const parameters=this.geometry.parameters;if(void 0!==parameters&&void 0!==parameters.shapes){const shapes=parameters.shapes;if(Array.isArray(shapes))for(let i=0,l=shapes.length;i<l;i++)serialize(meta.shapes,shapes[i]);else serialize(meta.shapes,shapes)}}if(this.isSkinnedMesh&&(object.bindMode=this.bindMode,object.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(meta.skeletons,this.skeleton),object.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const uuids=[];for(let i=0,l=this.material.length;i<l;i++)uuids.push(serialize(meta.materials,this.material[i]));object.material=uuids}else object.material=serialize(meta.materials,this.material);if(this.children.length>0){object.children=[];for(let i=0;i<this.children.length;i++)object.children.push(this.children[i].toJSON(meta).object)}if(this.animations.length>0){object.animations=[];for(let i=0;i<this.animations.length;i++)object.animations.push(serialize(meta.animations,this.animations[i]))}if(isRootObject){const geometries=extractFromCache(meta.geometries),materials=extractFromCache(meta.materials),textures=extractFromCache(meta.textures),images=extractFromCache(meta.images),shapes=extractFromCache(meta.shapes),skeletons=extractFromCache(meta.skeletons),animations=extractFromCache(meta.animations),nodes=extractFromCache(meta.nodes);geometries.length>0&&(output.geometries=geometries),materials.length>0&&(output.materials=materials),textures.length>0&&(output.textures=textures),images.length>0&&(output.images=images),shapes.length>0&&(output.shapes=shapes),skeletons.length>0&&(output.skeletons=skeletons),animations.length>0&&(output.animations=animations),nodes.length>0&&(output.nodes=nodes)}return output.object=object,output;function extractFromCache(cache){const values=[];for(const key in cache){const data=cache[key];delete data.metadata,values.push(data)}return values}}clone(recursive){return(new this.constructor).copy(this,recursive)}copy(source,recursive=!0){if(this.name=source.name,this.up.copy(source.up),this.position.copy(source.position),this.rotation.order=source.rotation.order,this.quaternion.copy(source.quaternion),this.scale.copy(source.scale),this.matrix.copy(source.matrix),this.matrixWorld.copy(source.matrixWorld),this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=source.matrixWorldAutoUpdate,this.layers.mask=source.layers.mask,this.visible=source.visible,this.castShadow=source.castShadow,this.receiveShadow=source.receiveShadow,this.frustumCulled=source.frustumCulled,this.renderOrder=source.renderOrder,this.userData=JSON.parse(JSON.stringify(source.userData)),!0===recursive)for(let i=0;i<source.children.length;i++)this.add(source.children[i].clone());return this}}return __name(Object3D2,"Object3D"),Object3D2.DefaultUp=new Vector32(0,1,0),Object3D2.DefaultMatrixAutoUpdate=!0,Object3D2.DefaultMatrixWorldAutoUpdate=!0,Object3D2})();const _v0$1=new Vector32,_v1$3=new Vector32,_v2$2=new Vector32,_v3$1=new Vector32,_vab=new Vector32,_vac=new Vector32,_vbc=new Vector32,_vap=new Vector32,_vbp=new Vector32,_vcp=new Vector32;class Triangle{constructor(a=new Vector32,b=new Vector32,c=new Vector32){this.a=a,this.b=b,this.c=c}static getNormal(a,b,c,target){target.subVectors(c,b),_v0$1.subVectors(a,b),target.cross(_v0$1);const targetLengthSq=target.lengthSq();return targetLengthSq>0?target.multiplyScalar(1/Math.sqrt(targetLengthSq)):target.set(0,0,0)}static getBarycoord(point,a,b,c,target){_v0$1.subVectors(c,a),_v1$3.subVectors(b,a),_v2$2.subVectors(point,a);const dot00=_v0$1.dot(_v0$1),dot01=_v0$1.dot(_v1$3),dot02=_v0$1.dot(_v2$2),dot11=_v1$3.dot(_v1$3),dot12=_v1$3.dot(_v2$2),denom=dot00*dot11-dot01*dot01;if(0===denom)return target.set(-2,-1,-1);const invDenom=1/denom,u=(dot11*dot02-dot01*dot12)*invDenom,v=(dot00*dot12-dot01*dot02)*invDenom;return target.set(1-u-v,v,u)}static containsPoint(point,a,b,c){return this.getBarycoord(point,a,b,c,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(point,p1,p2,p3,uv1,uv2,uv3,target){return this.getBarycoord(point,p1,p2,p3,_v3$1),target.set(0,0),target.addScaledVector(uv1,_v3$1.x),target.addScaledVector(uv2,_v3$1.y),target.addScaledVector(uv3,_v3$1.z),target}static isFrontFacing(a,b,c,direction){return _v0$1.subVectors(c,b),_v1$3.subVectors(a,b),_v0$1.cross(_v1$3).dot(direction)<0}set(a,b,c){return this.a.copy(a),this.b.copy(b),this.c.copy(c),this}setFromPointsAndIndices(points,i02,i1,i2){return this.a.copy(points[i02]),this.b.copy(points[i1]),this.c.copy(points[i2]),this}setFromAttributeAndIndices(attribute,i02,i1,i2){return this.a.fromBufferAttribute(attribute,i02),this.b.fromBufferAttribute(attribute,i1),this.c.fromBufferAttribute(attribute,i2),this}clone(){return(new this.constructor).copy(this)}copy(triangle){return this.a.copy(triangle.a),this.b.copy(triangle.b),this.c.copy(triangle.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),.5*_v0$1.cross(_v1$3).length()}getMidpoint(target){return target.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(target){return Triangle.getNormal(this.a,this.b,this.c,target)}getPlane(target){return target.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(point,target){return Triangle.getBarycoord(point,this.a,this.b,this.c,target)}getUV(point,uv1,uv2,uv3,target){return Triangle.getUV(point,this.a,this.b,this.c,uv1,uv2,uv3,target)}containsPoint(point){return Triangle.containsPoint(point,this.a,this.b,this.c)}isFrontFacing(direction){return Triangle.isFrontFacing(this.a,this.b,this.c,direction)}intersectsBox(box){return box.intersectsTriangle(this)}closestPointToPoint(p,target){const a=this.a,b=this.b,c=this.c;let v,w;_vab.subVectors(b,a),_vac.subVectors(c,a),_vap.subVectors(p,a);const d1=_vab.dot(_vap),d2=_vac.dot(_vap);if(d1<=0&&d2<=0)return target.copy(a);_vbp.subVectors(p,b);const d3=_vab.dot(_vbp),d4=_vac.dot(_vbp);if(d3>=0&&d4<=d3)return target.copy(b);const vc=d1*d4-d3*d2;if(vc<=0&&d1>=0&&d3<=0)return v=d1/(d1-d3),target.copy(a).addScaledVector(_vab,v);_vcp.subVectors(p,c);const d5=_vab.dot(_vcp),d6=_vac.dot(_vcp);if(d6>=0&&d5<=d6)return target.copy(c);const vb=d5*d2-d1*d6;if(vb<=0&&d2>=0&&d6<=0)return w=d2/(d2-d6),target.copy(a).addScaledVector(_vac,w);const va=d3*d6-d5*d4;if(va<=0&&d4-d3>=0&&d5-d6>=0)return _vbc.subVectors(c,b),w=(d4-d3)/(d4-d3+(d5-d6)),target.copy(b).addScaledVector(_vbc,w);const denom=1/(va+vb+vc);return v=vb*denom,w=vc*denom,target.copy(a).addScaledVector(_vab,v).addScaledVector(_vac,w)}equals(triangle){return triangle.a.equals(this.a)&&triangle.b.equals(this.b)&&triangle.c.equals(this.c)}}__name(Triangle,"Triangle");let materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(value){this._alphaTest>0!=value>0&&this.version++,this._alphaTest=value}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(values){if(void 0!==values)for(const key in values){const newValue=values[key];if(void 0===newValue){console.warn("THREE.Material: '"+key+"' parameter is undefined.");continue}const currentValue=this[key];void 0!==currentValue?currentValue&&currentValue.isColor?currentValue.set(newValue):currentValue&&currentValue.isVector3&&newValue&&newValue.isVector3?currentValue.copy(newValue):this[key]=newValue:console.warn("THREE."+this.type+": '"+key+"' is not a property of this material.")}}toJSON(meta){const isRootObject=void 0===meta||"string"==typeof meta;isRootObject&&(meta={textures:{},images:{}});const data={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function extractFromCache(cache){const values=[];for(const key in cache){const data2=cache[key];delete data2.metadata,values.push(data2)}return values}if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.color&&this.color.isColor&&(data.color=this.color.getHex()),void 0!==this.roughness&&(data.roughness=this.roughness),void 0!==this.metalness&&(data.metalness=this.metalness),void 0!==this.sheen&&(data.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(data.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(data.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(data.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(data.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(data.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(data.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(data.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(data.shininess=this.shininess),void 0!==this.clearcoat&&(data.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(data.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(data.clearcoatMap=this.clearcoatMap.toJSON(meta).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(data.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(meta).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(data.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(meta).uuid,data.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(data.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(data.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(data.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(data.iridescenceMap=this.iridescenceMap.toJSON(meta).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(data.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(meta).uuid),this.map&&this.map.isTexture&&(data.map=this.map.toJSON(meta).uuid),this.matcap&&this.matcap.isTexture&&(data.matcap=this.matcap.toJSON(meta).uuid),this.alphaMap&&this.alphaMap.isTexture&&(data.alphaMap=this.alphaMap.toJSON(meta).uuid),this.lightMap&&this.lightMap.isTexture&&(data.lightMap=this.lightMap.toJSON(meta).uuid,data.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(data.aoMap=this.aoMap.toJSON(meta).uuid,data.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(data.bumpMap=this.bumpMap.toJSON(meta).uuid,data.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(data.normalMap=this.normalMap.toJSON(meta).uuid,data.normalMapType=this.normalMapType,data.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(data.displacementMap=this.displacementMap.toJSON(meta).uuid,data.displacementScale=this.displacementScale,data.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(data.roughnessMap=this.roughnessMap.toJSON(meta).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(data.metalnessMap=this.metalnessMap.toJSON(meta).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(data.emissiveMap=this.emissiveMap.toJSON(meta).uuid),this.specularMap&&this.specularMap.isTexture&&(data.specularMap=this.specularMap.toJSON(meta).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(data.specularIntensityMap=this.specularIntensityMap.toJSON(meta).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(data.specularColorMap=this.specularColorMap.toJSON(meta).uuid),this.envMap&&this.envMap.isTexture&&(data.envMap=this.envMap.toJSON(meta).uuid,void 0!==this.combine&&(data.combine=this.combine)),void 0!==this.envMapIntensity&&(data.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(data.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(data.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(data.gradientMap=this.gradientMap.toJSON(meta).uuid),void 0!==this.transmission&&(data.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(data.transmissionMap=this.transmissionMap.toJSON(meta).uuid),void 0!==this.thickness&&(data.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(data.thicknessMap=this.thicknessMap.toJSON(meta).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(data.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(data.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(data.size=this.size),null!==this.shadowSide&&(data.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(data.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(data.blending=this.blending),this.side!==FrontSide&&(data.side=this.side),this.vertexColors&&(data.vertexColors=!0),this.opacity<1&&(data.opacity=this.opacity),!0===this.transparent&&(data.transparent=this.transparent),data.depthFunc=this.depthFunc,data.depthTest=this.depthTest,data.depthWrite=this.depthWrite,data.colorWrite=this.colorWrite,data.stencilWrite=this.stencilWrite,data.stencilWriteMask=this.stencilWriteMask,data.stencilFunc=this.stencilFunc,data.stencilRef=this.stencilRef,data.stencilFuncMask=this.stencilFuncMask,data.stencilFail=this.stencilFail,data.stencilZFail=this.stencilZFail,data.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(data.rotation=this.rotation),!0===this.polygonOffset&&(data.polygonOffset=!0),0!==this.polygonOffsetFactor&&(data.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(data.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(data.linewidth=this.linewidth),void 0!==this.dashSize&&(data.dashSize=this.dashSize),void 0!==this.gapSize&&(data.gapSize=this.gapSize),void 0!==this.scale&&(data.scale=this.scale),!0===this.dithering&&(data.dithering=!0),this.alphaTest>0&&(data.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(data.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(data.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(data.wireframe=this.wireframe),this.wireframeLinewidth>1&&(data.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(data.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(data.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(data.flatShading=this.flatShading),!1===this.visible&&(data.visible=!1),!1===this.toneMapped&&(data.toneMapped=!1),!1===this.fog&&(data.fog=!1),Object.keys(this.userData).length>0&&(data.userData=this.userData),__name(extractFromCache,"extractFromCache"),isRootObject){const textures=extractFromCache(meta.textures),images=extractFromCache(meta.images);textures.length>0&&(data.textures=textures),images.length>0&&(data.images=images)}return data}clone(){return(new this.constructor).copy(this)}copy(source){this.name=source.name,this.blending=source.blending,this.side=source.side,this.vertexColors=source.vertexColors,this.opacity=source.opacity,this.transparent=source.transparent,this.blendSrc=source.blendSrc,this.blendDst=source.blendDst,this.blendEquation=source.blendEquation,this.blendSrcAlpha=source.blendSrcAlpha,this.blendDstAlpha=source.blendDstAlpha,this.blendEquationAlpha=source.blendEquationAlpha,this.depthFunc=source.depthFunc,this.depthTest=source.depthTest,this.depthWrite=source.depthWrite,this.stencilWriteMask=source.stencilWriteMask,this.stencilFunc=source.stencilFunc,this.stencilRef=source.stencilRef,this.stencilFuncMask=source.stencilFuncMask,this.stencilFail=source.stencilFail,this.stencilZFail=source.stencilZFail,this.stencilZPass=source.stencilZPass,this.stencilWrite=source.stencilWrite;const srcPlanes=source.clippingPlanes;let dstPlanes=null;if(null!==srcPlanes){const n=srcPlanes.length;dstPlanes=new Array(n);for(let i=0;i!==n;++i)dstPlanes[i]=srcPlanes[i].clone()}return this.clippingPlanes=dstPlanes,this.clipIntersection=source.clipIntersection,this.clipShadows=source.clipShadows,this.shadowSide=source.shadowSide,this.colorWrite=source.colorWrite,this.precision=source.precision,this.polygonOffset=source.polygonOffset,this.polygonOffsetFactor=source.polygonOffsetFactor,this.polygonOffsetUnits=source.polygonOffsetUnits,this.dithering=source.dithering,this.alphaTest=source.alphaTest,this.alphaToCoverage=source.alphaToCoverage,this.premultipliedAlpha=source.premultipliedAlpha,this.visible=source.visible,this.toneMapped=source.toneMapped,this.userData=JSON.parse(JSON.stringify(source.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(value){!0===value&&this.version++}}__name(Material,"Material");class MeshBasicMaterial extends Material{constructor(parameters){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.fog=source.fog,this}}__name(MeshBasicMaterial,"MeshBasicMaterial");const _vector$9=new Vector32,_vector2$1=new Vector22;class BufferAttribute{constructor(array,itemSize,normalized=!1){if(Array.isArray(array))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=array,this.itemSize=itemSize,this.count=void 0!==array?array.length/itemSize:0,this.normalized=normalized,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(value){!0===value&&this.version++}setUsage(value){return this.usage=value,this}copy(source){return this.name=source.name,this.array=new source.array.constructor(source.array),this.itemSize=source.itemSize,this.count=source.count,this.normalized=source.normalized,this.usage=source.usage,this}copyAt(index1,attribute,index2){index1*=this.itemSize,index2*=attribute.itemSize;for(let i=0,l=this.itemSize;i<l;i++)this.array[index1+i]=attribute.array[index2+i];return this}copyArray(array){return this.array.set(array),this}applyMatrix3(m){if(2===this.itemSize)for(let i=0,l=this.count;i<l;i++)_vector2$1.fromBufferAttribute(this,i),_vector2$1.applyMatrix3(m),this.setXY(i,_vector2$1.x,_vector2$1.y);else if(3===this.itemSize)for(let i=0,l=this.count;i<l;i++)_vector$9.fromBufferAttribute(this,i),_vector$9.applyMatrix3(m),this.setXYZ(i,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(m){for(let i=0,l=this.count;i<l;i++)_vector$9.fromBufferAttribute(this,i),_vector$9.applyMatrix4(m),this.setXYZ(i,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(m){for(let i=0,l=this.count;i<l;i++)_vector$9.fromBufferAttribute(this,i),_vector$9.applyNormalMatrix(m),this.setXYZ(i,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(m){for(let i=0,l=this.count;i<l;i++)_vector$9.fromBufferAttribute(this,i),_vector$9.transformDirection(m),this.setXYZ(i,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(value,offset=0){return this.array.set(value,offset),this}getX(index){let x=this.array[index*this.itemSize];return this.normalized&&(x=denormalize(x,this.array)),x}setX(index,x){return this.normalized&&(x=normalize(x,this.array)),this.array[index*this.itemSize]=x,this}getY(index){let y=this.array[index*this.itemSize+1];return this.normalized&&(y=denormalize(y,this.array)),y}setY(index,y){return this.normalized&&(y=normalize(y,this.array)),this.array[index*this.itemSize+1]=y,this}getZ(index){let z=this.array[index*this.itemSize+2];return this.normalized&&(z=denormalize(z,this.array)),z}setZ(index,z){return this.normalized&&(z=normalize(z,this.array)),this.array[index*this.itemSize+2]=z,this}getW(index){let w=this.array[index*this.itemSize+3];return this.normalized&&(w=denormalize(w,this.array)),w}setW(index,w){return this.normalized&&(w=normalize(w,this.array)),this.array[index*this.itemSize+3]=w,this}setXY(index,x,y){return index*=this.itemSize,this.normalized&&(x=normalize(x,this.array),y=normalize(y,this.array)),this.array[index+0]=x,this.array[index+1]=y,this}setXYZ(index,x,y,z){return index*=this.itemSize,this.normalized&&(x=normalize(x,this.array),y=normalize(y,this.array),z=normalize(z,this.array)),this.array[index+0]=x,this.array[index+1]=y,this.array[index+2]=z,this}setXYZW(index,x,y,z,w){return index*=this.itemSize,this.normalized&&(x=normalize(x,this.array),y=normalize(y,this.array),z=normalize(z,this.array),w=normalize(w,this.array)),this.array[index+0]=x,this.array[index+1]=y,this.array[index+2]=z,this.array[index+3]=w,this}onUpload(callback){return this.onUploadCallback=callback,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const data={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(data.name=this.name),35044!==this.usage&&(data.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(data.updateRange=this.updateRange),data}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}__name(BufferAttribute,"BufferAttribute"),__name(class Int8BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Int8Array(array),itemSize,normalized)}},"Int8BufferAttribute"),__name(class Uint8BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Uint8Array(array),itemSize,normalized)}},"Uint8BufferAttribute"),__name(class Uint8ClampedBufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Uint8ClampedArray(array),itemSize,normalized)}},"Uint8ClampedBufferAttribute"),__name(class Int16BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Int16Array(array),itemSize,normalized)}},"Int16BufferAttribute");class Uint16BufferAttribute extends BufferAttribute{constructor(array,itemSize,normalized){super(new Uint16Array(array),itemSize,normalized)}}__name(Uint16BufferAttribute,"Uint16BufferAttribute"),__name(class Int32BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Int32Array(array),itemSize,normalized)}},"Int32BufferAttribute");class Uint32BufferAttribute extends BufferAttribute{constructor(array,itemSize,normalized){super(new Uint32Array(array),itemSize,normalized)}}__name(Uint32BufferAttribute,"Uint32BufferAttribute"),__name(class Float16BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Uint16Array(array),itemSize,normalized),this.isFloat16BufferAttribute=!0}},"Float16BufferAttribute");class Float32BufferAttribute extends BufferAttribute{constructor(array,itemSize,normalized){super(new Float32Array(array),itemSize,normalized)}}__name(Float32BufferAttribute,"Float32BufferAttribute"),__name(class Float64BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Float64Array(array),itemSize,normalized)}},"Float64BufferAttribute");let _id$1=0;const _m1=new Matrix42,_obj=new Object3D,_offset=new Vector32,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector32;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(index){return this.index=Array.isArray(index)?new(arrayNeedsUint32(index)?Uint32BufferAttribute:Uint16BufferAttribute)(index,1):index,this}getAttribute(name){return this.attributes[name]}setAttribute(name,attribute){return this.attributes[name]=attribute,this}deleteAttribute(name){return delete this.attributes[name],this}hasAttribute(name){return void 0!==this.attributes[name]}addGroup(start,count,materialIndex=0){this.groups.push({start,count,materialIndex})}clearGroups(){this.groups=[]}setDrawRange(start,count){this.drawRange.start=start,this.drawRange.count=count}applyMatrix4(matrix){const position=this.attributes.position;void 0!==position&&(position.applyMatrix4(matrix),position.needsUpdate=!0);const normal=this.attributes.normal;if(void 0!==normal){const normalMatrix=(new Matrix3).getNormalMatrix(matrix);normal.applyNormalMatrix(normalMatrix),normal.needsUpdate=!0}const tangent=this.attributes.tangent;return void 0!==tangent&&(tangent.transformDirection(matrix),tangent.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(q){return _m1.makeRotationFromQuaternion(q),this.applyMatrix4(_m1),this}rotateX(angle){return _m1.makeRotationX(angle),this.applyMatrix4(_m1),this}rotateY(angle){return _m1.makeRotationY(angle),this.applyMatrix4(_m1),this}rotateZ(angle){return _m1.makeRotationZ(angle),this.applyMatrix4(_m1),this}translate(x,y,z){return _m1.makeTranslation(x,y,z),this.applyMatrix4(_m1),this}scale(x,y,z){return _m1.makeScale(x,y,z),this.applyMatrix4(_m1),this}lookAt(vector){return _obj.lookAt(vector),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(points){const position=[];for(let i=0,l=points.length;i<l;i++){const point=points[i];position.push(point.x,point.y,point.z||0)}return this.setAttribute("position",new Float32BufferAttribute(position,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const position=this.attributes.position,morphAttributesPosition=this.morphAttributes.position;if(position&&position.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Vector32(-1/0,-1/0,-1/0),new Vector32(1/0,1/0,1/0));if(void 0!==position){if(this.boundingBox.setFromBufferAttribute(position),morphAttributesPosition)for(let i=0,il=morphAttributesPosition.length;i<il;i++)_box$1.setFromBufferAttribute(morphAttributesPosition[i]),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);const position=this.attributes.position,morphAttributesPosition=this.morphAttributes.position;if(position&&position.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Vector32,1/0);if(position){const center=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(position),morphAttributesPosition)for(let i=0,il=morphAttributesPosition.length;i<il;i++)_boxMorphTargets.setFromBufferAttribute(morphAttributesPosition[i]),this.morphTargetsRelative?(_vector$8.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$8)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max));_box$1.getCenter(center);let maxRadiusSq=0;for(let i=0,il=position.count;i<il;i++)_vector$8.fromBufferAttribute(position,i),maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(_vector$8));if(morphAttributesPosition)for(let i=0,il=morphAttributesPosition.length;i<il;i++){const morphAttribute=morphAttributesPosition[i],morphTargetsRelative=this.morphTargetsRelative;for(let j=0,jl=morphAttribute.count;j<jl;j++)_vector$8.fromBufferAttribute(morphAttribute,j),morphTargetsRelative&&(_offset.fromBufferAttribute(position,j),_vector$8.add(_offset)),maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(maxRadiusSq),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const index=this.index,attributes=this.attributes;if(null===index||void 0===attributes.position||void 0===attributes.normal||void 0===attributes.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const indices=index.array,positions=attributes.position.array,normals=attributes.normal.array,uvs=attributes.uv.array,nVertices=positions.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*nVertices),4));const tangents=this.getAttribute("tangent").array,tan1=[],tan2=[];for(let i=0;i<nVertices;i++)tan1[i]=new Vector32,tan2[i]=new Vector32;const vA=new Vector32,vB=new Vector32,vC=new Vector32,uvA=new Vector22,uvB=new Vector22,uvC=new Vector22,sdir=new Vector32,tdir=new Vector32;function handleTriangle(a,b,c){vA.fromArray(positions,3*a),vB.fromArray(positions,3*b),vC.fromArray(positions,3*c),uvA.fromArray(uvs,2*a),uvB.fromArray(uvs,2*b),uvC.fromArray(uvs,2*c),vB.sub(vA),vC.sub(vA),uvB.sub(uvA),uvC.sub(uvA);const r=1/(uvB.x*uvC.y-uvC.x*uvB.y);isFinite(r)&&(sdir.copy(vB).multiplyScalar(uvC.y).addScaledVector(vC,-uvB.y).multiplyScalar(r),tdir.copy(vC).multiplyScalar(uvB.x).addScaledVector(vB,-uvC.x).multiplyScalar(r),tan1[a].add(sdir),tan1[b].add(sdir),tan1[c].add(sdir),tan2[a].add(tdir),tan2[b].add(tdir),tan2[c].add(tdir))}__name(handleTriangle,"handleTriangle");let groups=this.groups;0===groups.length&&(groups=[{start:0,count:indices.length}]);for(let i=0,il=groups.length;i<il;++i){const group=groups[i],start=group.start;for(let j=start,jl=start+group.count;j<jl;j+=3)handleTriangle(indices[j+0],indices[j+1],indices[j+2])}const tmp2=new Vector32,tmp22=new Vector32,n=new Vector32,n2=new Vector32;function handleVertex(v){n.fromArray(normals,3*v),n2.copy(n);const t=tan1[v];tmp2.copy(t),tmp2.sub(n.multiplyScalar(n.dot(t))).normalize(),tmp22.crossVectors(n2,t);const w=tmp22.dot(tan2[v])<0?-1:1;tangents[4*v]=tmp2.x,tangents[4*v+1]=tmp2.y,tangents[4*v+2]=tmp2.z,tangents[4*v+3]=w}__name(handleVertex,"handleVertex");for(let i=0,il=groups.length;i<il;++i){const group=groups[i],start=group.start;for(let j=start,jl=start+group.count;j<jl;j+=3)handleVertex(indices[j+0]),handleVertex(indices[j+1]),handleVertex(indices[j+2])}}computeVertexNormals(){const index=this.index,positionAttribute=this.getAttribute("position");if(void 0!==positionAttribute){let normalAttribute=this.getAttribute("normal");if(void 0===normalAttribute)normalAttribute=new BufferAttribute(new Float32Array(3*positionAttribute.count),3),this.setAttribute("normal",normalAttribute);else for(let i=0,il=normalAttribute.count;i<il;i++)normalAttribute.setXYZ(i,0,0,0);const pA=new Vector32,pB=new Vector32,pC=new Vector32,nA=new Vector32,nB=new Vector32,nC=new Vector32,cb=new Vector32,ab=new Vector32;if(index)for(let i=0,il=index.count;i<il;i+=3){const vA=index.getX(i+0),vB=index.getX(i+1),vC=index.getX(i+2);pA.fromBufferAttribute(positionAttribute,vA),pB.fromBufferAttribute(positionAttribute,vB),pC.fromBufferAttribute(positionAttribute,vC),cb.subVectors(pC,pB),ab.subVectors(pA,pB),cb.cross(ab),nA.fromBufferAttribute(normalAttribute,vA),nB.fromBufferAttribute(normalAttribute,vB),nC.fromBufferAttribute(normalAttribute,vC),nA.add(cb),nB.add(cb),nC.add(cb),normalAttribute.setXYZ(vA,nA.x,nA.y,nA.z),normalAttribute.setXYZ(vB,nB.x,nB.y,nB.z),normalAttribute.setXYZ(vC,nC.x,nC.y,nC.z)}else for(let i=0,il=positionAttribute.count;i<il;i+=3)pA.fromBufferAttribute(positionAttribute,i+0),pB.fromBufferAttribute(positionAttribute,i+1),pC.fromBufferAttribute(positionAttribute,i+2),cb.subVectors(pC,pB),ab.subVectors(pA,pB),cb.cross(ab),normalAttribute.setXYZ(i+0,cb.x,cb.y,cb.z),normalAttribute.setXYZ(i+1,cb.x,cb.y,cb.z),normalAttribute.setXYZ(i+2,cb.x,cb.y,cb.z);this.normalizeNormals(),normalAttribute.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const normals=this.attributes.normal;for(let i=0,il=normals.count;i<il;i++)_vector$8.fromBufferAttribute(normals,i),_vector$8.normalize(),normals.setXYZ(i,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function convertBufferAttribute(attribute,indices2){const array=attribute.array,itemSize=attribute.itemSize,normalized=attribute.normalized,array2=new array.constructor(indices2.length*itemSize);let index=0,index2=0;for(let i=0,l=indices2.length;i<l;i++){index=attribute.isInterleavedBufferAttribute?indices2[i]*attribute.data.stride+attribute.offset:indices2[i]*itemSize;for(let j=0;j<itemSize;j++)array2[index2++]=array[index++]}return new BufferAttribute(array2,itemSize,normalized)}if(__name(convertBufferAttribute,"convertBufferAttribute"),null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const geometry2=new BufferGeometry,indices=this.index.array,attributes=this.attributes;for(const name in attributes){const newAttribute=convertBufferAttribute(attributes[name],indices);geometry2.setAttribute(name,newAttribute)}const morphAttributes=this.morphAttributes;for(const name in morphAttributes){const morphArray=[],morphAttribute=morphAttributes[name];for(let i=0,il=morphAttribute.length;i<il;i++){const newAttribute=convertBufferAttribute(morphAttribute[i],indices);morphArray.push(newAttribute)}geometry2.morphAttributes[name]=morphArray}geometry2.morphTargetsRelative=this.morphTargetsRelative;const groups=this.groups;for(let i=0,l=groups.length;i<l;i++){const group=groups[i];geometry2.addGroup(group.start,group.count,group.materialIndex)}return geometry2}toJSON(){const data={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),Object.keys(this.userData).length>0&&(data.userData=this.userData),void 0!==this.parameters){const parameters=this.parameters;for(const key in parameters)void 0!==parameters[key]&&(data[key]=parameters[key]);return data}data.data={attributes:{}};const index=this.index;null!==index&&(data.data.index={type:index.array.constructor.name,array:Array.prototype.slice.call(index.array)});const attributes=this.attributes;for(const key in attributes)data.data.attributes[key]=attributes[key].toJSON(data.data);const morphAttributes={};let hasMorphAttributes=!1;for(const key in this.morphAttributes){const attributeArray=this.morphAttributes[key],array=[];for(let i=0,il=attributeArray.length;i<il;i++)array.push(attributeArray[i].toJSON(data.data));array.length>0&&(morphAttributes[key]=array,hasMorphAttributes=!0)}hasMorphAttributes&&(data.data.morphAttributes=morphAttributes,data.data.morphTargetsRelative=this.morphTargetsRelative);const groups=this.groups;groups.length>0&&(data.data.groups=JSON.parse(JSON.stringify(groups)));const boundingSphere=this.boundingSphere;return null!==boundingSphere&&(data.data.boundingSphere={center:boundingSphere.center.toArray(),radius:boundingSphere.radius}),data}clone(){return(new this.constructor).copy(this)}copy(source){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const data={};this.name=source.name;const index=source.index;null!==index&&this.setIndex(index.clone(data));const attributes=source.attributes;for(const name in attributes)this.setAttribute(name,attributes[name].clone(data));const morphAttributes=source.morphAttributes;for(const name in morphAttributes){const array=[],morphAttribute=morphAttributes[name];for(let i=0,l=morphAttribute.length;i<l;i++)array.push(morphAttribute[i].clone(data));this.morphAttributes[name]=array}this.morphTargetsRelative=source.morphTargetsRelative;const groups=source.groups;for(let i=0,l=groups.length;i<l;i++){const group=groups[i];this.addGroup(group.start,group.count,group.materialIndex)}const boundingBox=source.boundingBox;null!==boundingBox&&(this.boundingBox=boundingBox.clone());const boundingSphere=source.boundingSphere;return null!==boundingSphere&&(this.boundingSphere=boundingSphere.clone()),this.drawRange.start=source.drawRange.start,this.drawRange.count=source.drawRange.count,this.userData=source.userData,void 0!==source.parameters&&(this.parameters=Object.assign({},source.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}__name(BufferGeometry,"BufferGeometry");const _inverseMatrix$2=new Matrix42,_ray$2=new Ray,_sphere$3=new Sphere,_vA$1=new Vector32,_vB$1=new Vector32,_vC$1=new Vector32,_tempA=new Vector32,_morphA=new Vector32,_uvA$1=new Vector22,_uvB$1=new Vector22,_uvC$1=new Vector22,_intersectionPoint=new Vector32,_intersectionPointWorld=new Vector32;class Mesh2 extends Object3D{constructor(geometry=new BufferGeometry,material=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=geometry,this.material=material,this.updateMorphTargets()}copy(source,recursive){return super.copy(source,recursive),void 0!==source.morphTargetInfluences&&(this.morphTargetInfluences=source.morphTargetInfluences.slice()),void 0!==source.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},source.morphTargetDictionary)),this.material=source.material,this.geometry=source.geometry,this}updateMorphTargets(){const morphAttributes=this.geometry.morphAttributes,keys=Object.keys(morphAttributes);if(keys.length>0){const morphAttribute=morphAttributes[keys[0]];if(void 0!==morphAttribute){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,ml=morphAttribute.length;m<ml;m++){const name=morphAttribute[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[name]=m}}}}getVertexPosition(vert,target){const geometry=this.geometry,morphPosition=geometry.morphAttributes.position,morphTargetsRelative=geometry.morphTargetsRelative;target.fromBufferAttribute(geometry.attributes.position,vert);const morphInfluences=this.morphTargetInfluences;if(morphPosition&&morphInfluences){_morphA.set(0,0,0);for(let i=0,il=morphPosition.length;i<il;i++){const influence=morphInfluences[i];0!==influence&&(_tempA.fromBufferAttribute(morphPosition[i],vert),_morphA.addScaledVector(morphTargetsRelative?_tempA:_tempA.sub(target),influence))}target.add(_morphA)}return this.isSkinnedMesh&&this.boneTransform(vert,target),target}raycast(raycaster,intersects2){const geometry=this.geometry,material=this.material,matrixWorld=this.matrixWorld;if(void 0===material||(null===geometry.boundingSphere&&geometry.computeBoundingSphere(),_sphere$3.copy(geometry.boundingSphere),_sphere$3.applyMatrix4(matrixWorld),!1===raycaster.ray.intersectsSphere(_sphere$3))||(_inverseMatrix$2.copy(matrixWorld).invert(),_ray$2.copy(raycaster.ray).applyMatrix4(_inverseMatrix$2),null!==geometry.boundingBox&&!1===_ray$2.intersectsBox(geometry.boundingBox)))return;let intersection;const index=geometry.index,position=geometry.attributes.position,uv=geometry.attributes.uv,uv2=geometry.attributes.uv2,groups=geometry.groups,drawRange=geometry.drawRange;if(null!==index)if(Array.isArray(material))for(let i=0,il=groups.length;i<il;i++){const group=groups[i],groupMaterial=material[group.materialIndex];for(let j=Math.max(group.start,drawRange.start),jl=Math.min(index.count,Math.min(group.start+group.count,drawRange.start+drawRange.count));j<jl;j+=3){const a=index.getX(j),b=index.getX(j+1),c=index.getX(j+2);intersection=checkBufferGeometryIntersection(this,groupMaterial,raycaster,_ray$2,uv,uv2,a,b,c),intersection&&(intersection.faceIndex=Math.floor(j/3),intersection.face.materialIndex=group.materialIndex,intersects2.push(intersection))}}else for(let i=Math.max(0,drawRange.start),il=Math.min(index.count,drawRange.start+drawRange.count);i<il;i+=3){const a=index.getX(i),b=index.getX(i+1),c=index.getX(i+2);intersection=checkBufferGeometryIntersection(this,material,raycaster,_ray$2,uv,uv2,a,b,c),intersection&&(intersection.faceIndex=Math.floor(i/3),intersects2.push(intersection))}else if(void 0!==position)if(Array.isArray(material))for(let i=0,il=groups.length;i<il;i++){const group=groups[i],groupMaterial=material[group.materialIndex];for(let j=Math.max(group.start,drawRange.start),jl=Math.min(position.count,Math.min(group.start+group.count,drawRange.start+drawRange.count));j<jl;j+=3)intersection=checkBufferGeometryIntersection(this,groupMaterial,raycaster,_ray$2,uv,uv2,j,j+1,j+2),intersection&&(intersection.faceIndex=Math.floor(j/3),intersection.face.materialIndex=group.materialIndex,intersects2.push(intersection))}else for(let i=Math.max(0,drawRange.start),il=Math.min(position.count,drawRange.start+drawRange.count);i<il;i+=3)intersection=checkBufferGeometryIntersection(this,material,raycaster,_ray$2,uv,uv2,i,i+1,i+2),intersection&&(intersection.faceIndex=Math.floor(i/3),intersects2.push(intersection))}}function checkIntersection(object,material,raycaster,ray,pA,pB,pC,point){let intersect;if(intersect=material.side===BackSide?ray.intersectTriangle(pC,pB,pA,!0,point):ray.intersectTriangle(pA,pB,pC,material.side===FrontSide,point),null===intersect)return null;_intersectionPointWorld.copy(point),_intersectionPointWorld.applyMatrix4(object.matrixWorld);const distance=raycaster.ray.origin.distanceTo(_intersectionPointWorld);return distance<raycaster.near||distance>raycaster.far?null:{distance,point:_intersectionPointWorld.clone(),object}}function checkBufferGeometryIntersection(object,material,raycaster,ray,uv,uv2,a,b,c){object.getVertexPosition(a,_vA$1),object.getVertexPosition(b,_vB$1),object.getVertexPosition(c,_vC$1);const intersection=checkIntersection(object,material,raycaster,ray,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(intersection){uv&&(_uvA$1.fromBufferAttribute(uv,a),_uvB$1.fromBufferAttribute(uv,b),_uvC$1.fromBufferAttribute(uv,c),intersection.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector22)),uv2&&(_uvA$1.fromBufferAttribute(uv2,a),_uvB$1.fromBufferAttribute(uv2,b),_uvC$1.fromBufferAttribute(uv2,c),intersection.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector22));const face={a,b,c,normal:new Vector32,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,face.normal),intersection.face=face}return intersection}__name(Mesh2,"Mesh"),__name(checkIntersection,"checkIntersection"),__name(checkBufferGeometryIntersection,"checkBufferGeometryIntersection");class BoxGeometry extends BufferGeometry{constructor(width=1,height=1,depth=1,widthSegments=1,heightSegments=1,depthSegments=1){super(),this.type="BoxGeometry",this.parameters={width,height,depth,widthSegments,heightSegments,depthSegments};const scope=this;widthSegments=Math.floor(widthSegments),heightSegments=Math.floor(heightSegments),depthSegments=Math.floor(depthSegments);const indices=[],vertices=[],normals=[],uvs=[];let numberOfVertices=0,groupStart=0;function buildPlane(u,v,w,udir,vdir,width2,height2,depth2,gridX,gridY,materialIndex){const segmentWidth=width2/gridX,segmentHeight=height2/gridY,widthHalf=width2/2,heightHalf=height2/2,depthHalf=depth2/2,gridX1=gridX+1,gridY1=gridY+1;let vertexCounter=0,groupCount=0;const vector=new Vector32;for(let iy=0;iy<gridY1;iy++){const y=iy*segmentHeight-heightHalf;for(let ix=0;ix<gridX1;ix++)vector[u]=(ix*segmentWidth-widthHalf)*udir,vector[v]=y*vdir,vector[w]=depthHalf,vertices.push(vector.x,vector.y,vector.z),vector[u]=0,vector[v]=0,vector[w]=depth2>0?1:-1,normals.push(vector.x,vector.y,vector.z),uvs.push(ix/gridX),uvs.push(1-iy/gridY),vertexCounter+=1}for(let iy=0;iy<gridY;iy++)for(let ix=0;ix<gridX;ix++){const b=numberOfVertices+ix+gridX1*(iy+1),c=numberOfVertices+(ix+1)+gridX1*(iy+1),d=numberOfVertices+(ix+1)+gridX1*iy;indices.push(numberOfVertices+ix+gridX1*iy,b,d),indices.push(b,c,d),groupCount+=6}scope.addGroup(groupStart,groupCount,materialIndex),groupStart+=groupCount,numberOfVertices+=vertexCounter}buildPlane("z","y","x",-1,-1,depth,height,width,depthSegments,heightSegments,0),buildPlane("z","y","x",1,-1,depth,height,-width,depthSegments,heightSegments,1),buildPlane("x","z","y",1,1,width,depth,height,widthSegments,depthSegments,2),buildPlane("x","z","y",1,-1,width,depth,-height,widthSegments,depthSegments,3),buildPlane("x","y","z",1,-1,width,height,depth,widthSegments,heightSegments,4),buildPlane("x","y","z",-1,-1,width,height,-depth,widthSegments,heightSegments,5),this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2)),__name(buildPlane,"buildPlane")}static fromJSON(data){return new BoxGeometry(data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments)}}function cloneUniforms(src){const dst={};for(const u in src){dst[u]={};for(const p in src[u]){const property=src[u][p];dst[u][p]=property&&(property.isColor||property.isMatrix3||property.isMatrix4||property.isVector2||property.isVector3||property.isVector4||property.isTexture||property.isQuaternion)?property.clone():Array.isArray(property)?property.slice():property}}return dst}function mergeUniforms(uniforms){const merged={};for(let u=0;u<uniforms.length;u++){const tmp2=cloneUniforms(uniforms[u]);for(const p in tmp2)merged[p]=tmp2[p]}return merged}function cloneUniformsGroups(src){const dst=[];for(let u=0;u<src.length;u++)dst.push(src[u].clone());return dst}function getUnlitUniformColorSpace(renderer){return null===renderer.getRenderTarget()&&renderer.outputEncoding===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}__name(BoxGeometry,"BoxGeometry"),__name(cloneUniforms,"cloneUniforms"),__name(mergeUniforms,"mergeUniforms"),__name(cloneUniformsGroups,"cloneUniformsGroups"),__name(getUnlitUniformColorSpace,"getUnlitUniformColorSpace");const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};class ShaderMaterial extends Material{constructor(parameters){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==parameters&&this.setValues(parameters)}copy(source){return super.copy(source),this.fragmentShader=source.fragmentShader,this.vertexShader=source.vertexShader,this.uniforms=cloneUniforms(source.uniforms),this.uniformsGroups=cloneUniformsGroups(source.uniformsGroups),this.defines=Object.assign({},source.defines),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.fog=source.fog,this.lights=source.lights,this.clipping=source.clipping,this.extensions=Object.assign({},source.extensions),this.glslVersion=source.glslVersion,this}toJSON(meta){const data=super.toJSON(meta);data.glslVersion=this.glslVersion,data.uniforms={};for(const name in this.uniforms){const value=this.uniforms[name].value;data.uniforms[name]=value&&value.isTexture?{type:"t",value:value.toJSON(meta).uuid}:value&&value.isColor?{type:"c",value:value.getHex()}:value&&value.isVector2?{type:"v2",value:value.toArray()}:value&&value.isVector3?{type:"v3",value:value.toArray()}:value&&value.isVector4?{type:"v4",value:value.toArray()}:value&&value.isMatrix3?{type:"m3",value:value.toArray()}:value&&value.isMatrix4?{type:"m4",value:value.toArray()}:{value}}Object.keys(this.defines).length>0&&(data.defines=this.defines),data.vertexShader=this.vertexShader,data.fragmentShader=this.fragmentShader;const extensions={};for(const key in this.extensions)!0===this.extensions[key]&&(extensions[key]=!0);return Object.keys(extensions).length>0&&(data.extensions=extensions),data}}__name(ShaderMaterial,"ShaderMaterial");class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix42,this.projectionMatrix=new Matrix42,this.projectionMatrixInverse=new Matrix42}copy(source,recursive){return super.copy(source,recursive),this.matrixWorldInverse.copy(source.matrixWorldInverse),this.projectionMatrix.copy(source.projectionMatrix),this.projectionMatrixInverse.copy(source.projectionMatrixInverse),this}getWorldDirection(target){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return target.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(force){super.updateMatrixWorld(force),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(updateParents,updateChildren){super.updateWorldMatrix(updateParents,updateChildren),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}__name(Camera,"Camera");class PerspectiveCamera extends Camera{constructor(fov2=50,aspect2=1,near=.1,far=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=fov2,this.zoom=1,this.near=near,this.far=far,this.focus=10,this.aspect=aspect2,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(source,recursive){return super.copy(source,recursive),this.fov=source.fov,this.zoom=source.zoom,this.near=source.near,this.far=source.far,this.focus=source.focus,this.aspect=source.aspect,this.view=null===source.view?null:Object.assign({},source.view),this.filmGauge=source.filmGauge,this.filmOffset=source.filmOffset,this}setFocalLength(focalLength){const vExtentSlope=.5*this.getFilmHeight()/focalLength;this.fov=2*RAD2DEG*Math.atan(vExtentSlope),this.updateProjectionMatrix()}getFocalLength(){const vExtentSlope=Math.tan(.5*DEG2RAD*this.fov);return.5*this.getFilmHeight()/vExtentSlope}getEffectiveFOV(){return 2*RAD2DEG*Math.atan(Math.tan(.5*DEG2RAD*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(fullWidth,fullHeight,x,y,width,height){this.aspect=fullWidth/fullHeight,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=fullWidth,this.view.fullHeight=fullHeight,this.view.offsetX=x,this.view.offsetY=y,this.view.width=width,this.view.height=height,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const near=this.near;let top=near*Math.tan(.5*DEG2RAD*this.fov)/this.zoom,height=2*top,width=this.aspect*height,left=-.5*width;const view=this.view;if(null!==this.view&&this.view.enabled){const fullWidth=view.fullWidth,fullHeight=view.fullHeight;left+=view.offsetX*width/fullWidth,top-=view.offsetY*height/fullHeight,width*=view.width/fullWidth,height*=view.height/fullHeight}const skew=this.filmOffset;0!==skew&&(left+=near*skew/this.getFilmWidth()),this.projectionMatrix.makePerspective(left,left+width,top,top-height,near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(meta){const data=super.toJSON(meta);return data.object.fov=this.fov,data.object.zoom=this.zoom,data.object.near=this.near,data.object.far=this.far,data.object.focus=this.focus,data.object.aspect=this.aspect,null!==this.view&&(data.object.view=Object.assign({},this.view)),data.object.filmGauge=this.filmGauge,data.object.filmOffset=this.filmOffset,data}}__name(PerspectiveCamera,"PerspectiveCamera");class CubeCamera extends Object3D{constructor(near,far,renderTarget){super(),this.type="CubeCamera",this.renderTarget=renderTarget;const cameraPX=new PerspectiveCamera(-90,1,near,far);cameraPX.layers=this.layers,cameraPX.up.set(0,1,0),cameraPX.lookAt(1,0,0),this.add(cameraPX);const cameraNX=new PerspectiveCamera(-90,1,near,far);cameraNX.layers=this.layers,cameraNX.up.set(0,1,0),cameraNX.lookAt(-1,0,0),this.add(cameraNX);const cameraPY=new PerspectiveCamera(-90,1,near,far);cameraPY.layers=this.layers,cameraPY.up.set(0,0,-1),cameraPY.lookAt(0,1,0),this.add(cameraPY);const cameraNY=new PerspectiveCamera(-90,1,near,far);cameraNY.layers=this.layers,cameraNY.up.set(0,0,1),cameraNY.lookAt(0,-1,0),this.add(cameraNY);const cameraPZ=new PerspectiveCamera(-90,1,near,far);cameraPZ.layers=this.layers,cameraPZ.up.set(0,1,0),cameraPZ.lookAt(0,0,1),this.add(cameraPZ);const cameraNZ=new PerspectiveCamera(-90,1,near,far);cameraNZ.layers=this.layers,cameraNZ.up.set(0,1,0),cameraNZ.lookAt(0,0,-1),this.add(cameraNZ)}update(renderer,scene){null===this.parent&&this.updateMatrixWorld();const renderTarget=this.renderTarget,[cameraPX,cameraNX,cameraPY,cameraNY,cameraPZ,cameraNZ]=this.children,currentRenderTarget=renderer.getRenderTarget(),currentToneMapping=renderer.toneMapping,currentXrEnabled=renderer.xr.enabled;renderer.toneMapping=NoToneMapping,renderer.xr.enabled=!1;const generateMipmaps=renderTarget.texture.generateMipmaps;renderTarget.texture.generateMipmaps=!1,renderer.setRenderTarget(renderTarget,0),renderer.render(scene,cameraPX),renderer.setRenderTarget(renderTarget,1),renderer.render(scene,cameraNX),renderer.setRenderTarget(renderTarget,2),renderer.render(scene,cameraPY),renderer.setRenderTarget(renderTarget,3),renderer.render(scene,cameraNY),renderer.setRenderTarget(renderTarget,4),renderer.render(scene,cameraPZ),renderTarget.texture.generateMipmaps=generateMipmaps,renderer.setRenderTarget(renderTarget,5),renderer.render(scene,cameraNZ),renderer.setRenderTarget(currentRenderTarget),renderer.toneMapping=currentToneMapping,renderer.xr.enabled=currentXrEnabled,renderTarget.texture.needsPMREMUpdate=!0}}__name(CubeCamera,"CubeCamera");class CubeTexture extends Texture{constructor(images,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding){super(images=void 0!==images?images:[],mapping=void 0!==mapping?mapping:CubeReflectionMapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(value){this.image=value}}__name(CubeTexture,"CubeTexture");class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(size=1,options={}){super(size,size,options),this.isWebGLCubeRenderTarget=!0;const image={width:size,height:size,depth:1};this.texture=new CubeTexture([image,image,image,image,image,image],options.mapping,options.wrapS,options.wrapT,options.magFilter,options.minFilter,options.format,options.type,options.anisotropy,options.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==options.generateMipmaps&&options.generateMipmaps,this.texture.minFilter=void 0!==options.minFilter?options.minFilter:LinearFilter}fromEquirectangularTexture(renderer,texture){this.texture.type=texture.type,this.texture.encoding=texture.encoding,this.texture.generateMipmaps=texture.generateMipmaps,this.texture.minFilter=texture.minFilter,this.texture.magFilter=texture.magFilter;const shader_uniforms={tEquirect:{value:null}},shader_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",shader_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",geometry=new BoxGeometry(5,5,5),material=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(shader_uniforms),vertexShader:shader_vertexShader,fragmentShader:shader_fragmentShader,side:BackSide,blending:NoBlending});material.uniforms.tEquirect.value=texture;const mesh=new Mesh2(geometry,material),currentMinFilter=texture.minFilter;return texture.minFilter===LinearMipmapLinearFilter&&(texture.minFilter=LinearFilter),new CubeCamera(1,10,this).update(renderer,mesh),texture.minFilter=currentMinFilter,mesh.geometry.dispose(),mesh.material.dispose(),this}clear(renderer,color,depth,stencil){const currentRenderTarget=renderer.getRenderTarget();for(let i=0;i<6;i++)renderer.setRenderTarget(this,i),renderer.clear(color,depth,stencil);renderer.setRenderTarget(currentRenderTarget)}}__name(WebGLCubeRenderTarget,"WebGLCubeRenderTarget");const _vector1=new Vector32,_vector2=new Vector32,_normalMatrix=new Matrix3;class Plane{constructor(normal=new Vector32(1,0,0),constant=0){this.isPlane=!0,this.normal=normal,this.constant=constant}set(normal,constant){return this.normal.copy(normal),this.constant=constant,this}setComponents(x,y,z,w){return this.normal.set(x,y,z),this.constant=w,this}setFromNormalAndCoplanarPoint(normal,point){return this.normal.copy(normal),this.constant=-point.dot(this.normal),this}setFromCoplanarPoints(a,b,c){const normal=_vector1.subVectors(c,b).cross(_vector2.subVectors(a,b)).normalize();return this.setFromNormalAndCoplanarPoint(normal,a),this}copy(plane){return this.normal.copy(plane.normal),this.constant=plane.constant,this}normalize(){const inverseNormalLength=1/this.normal.length();return this.normal.multiplyScalar(inverseNormalLength),this.constant*=inverseNormalLength,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(point){return this.normal.dot(point)+this.constant}distanceToSphere(sphere){return this.distanceToPoint(sphere.center)-sphere.radius}projectPoint(point,target){return target.copy(this.normal).multiplyScalar(-this.distanceToPoint(point)).add(point)}intersectLine(line,target){const direction=line.delta(_vector1),denominator=this.normal.dot(direction);if(0===denominator)return 0===this.distanceToPoint(line.start)?target.copy(line.start):null;const t=-(line.start.dot(this.normal)+this.constant)/denominator;return t<0||t>1?null:target.copy(direction).multiplyScalar(t).add(line.start)}intersectsLine(line){const startSign=this.distanceToPoint(line.start),endSign=this.distanceToPoint(line.end);return startSign<0&&endSign>0||endSign<0&&startSign>0}intersectsBox(box){return box.intersectsPlane(this)}intersectsSphere(sphere){return sphere.intersectsPlane(this)}coplanarPoint(target){return target.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(matrix,optionalNormalMatrix){const normalMatrix=optionalNormalMatrix||_normalMatrix.getNormalMatrix(matrix),referencePoint=this.coplanarPoint(_vector1).applyMatrix4(matrix),normal=this.normal.applyMatrix3(normalMatrix).normalize();return this.constant=-referencePoint.dot(normal),this}translate(offset){return this.constant-=offset.dot(this.normal),this}equals(plane){return plane.normal.equals(this.normal)&&plane.constant===this.constant}clone(){return(new this.constructor).copy(this)}}__name(Plane,"Plane");const _sphere$2=new Sphere,_vector$7=new Vector32;class Frustum{constructor(p0=new Plane,p1=new Plane,p2=new Plane,p3=new Plane,p4=new Plane,p5=new Plane){this.planes=[p0,p1,p2,p3,p4,p5]}set(p0,p1,p2,p3,p4,p5){const planes=this.planes;return planes[0].copy(p0),planes[1].copy(p1),planes[2].copy(p2),planes[3].copy(p3),planes[4].copy(p4),planes[5].copy(p5),this}copy(frustum){const planes=this.planes;for(let i=0;i<6;i++)planes[i].copy(frustum.planes[i]);return this}setFromProjectionMatrix(m){const planes=this.planes,me=m.elements,me0=me[0],me1=me[1],me2=me[2],me3=me[3],me4=me[4],me5=me[5],me6=me[6],me7=me[7],me8=me[8],me9=me[9],me10=me[10],me11=me[11],me12=me[12],me13=me[13],me14=me[14],me15=me[15];return planes[0].setComponents(me3-me0,me7-me4,me11-me8,me15-me12).normalize(),planes[1].setComponents(me3+me0,me7+me4,me11+me8,me15+me12).normalize(),planes[2].setComponents(me3+me1,me7+me5,me11+me9,me15+me13).normalize(),planes[3].setComponents(me3-me1,me7-me5,me11-me9,me15-me13).normalize(),planes[4].setComponents(me3-me2,me7-me6,me11-me10,me15-me14).normalize(),planes[5].setComponents(me3+me2,me7+me6,me11+me10,me15+me14).normalize(),this}intersectsObject(object){const geometry=object.geometry;return null===geometry.boundingSphere&&geometry.computeBoundingSphere(),_sphere$2.copy(geometry.boundingSphere).applyMatrix4(object.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(sprite){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(sprite.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(sphere){const planes=this.planes,center=sphere.center,negRadius=-sphere.radius;for(let i=0;i<6;i++)if(planes[i].distanceToPoint(center)<negRadius)return!1;return!0}intersectsBox(box){const planes=this.planes;for(let i=0;i<6;i++){const plane=planes[i];if(_vector$7.x=plane.normal.x>0?box.max.x:box.min.x,_vector$7.y=plane.normal.y>0?box.max.y:box.min.y,_vector$7.z=plane.normal.z>0?box.max.z:box.min.z,plane.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(point){const planes=this.planes;for(let i=0;i<6;i++)if(planes[i].distanceToPoint(point)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function WebGLAnimation(){let context=null,isAnimating=!1,animationLoop=null,requestId=null;function onAnimationFrame(time,frame){animationLoop(time,frame),requestId=context.requestAnimationFrame(onAnimationFrame)}return __name(onAnimationFrame,"onAnimationFrame"),{start:function(){!0!==isAnimating&&null!==animationLoop&&(requestId=context.requestAnimationFrame(onAnimationFrame),isAnimating=!0)},stop:function(){context.cancelAnimationFrame(requestId),isAnimating=!1},setAnimationLoop:function(callback){animationLoop=callback},setContext:function(value){context=value}}}function WebGLAttributes(gl,capabilities){const isWebGL2=capabilities.isWebGL2,buffers=new WeakMap;function createBuffer(attribute,bufferType){const array=attribute.array,usage=attribute.usage,buffer=gl.createBuffer();let type;if(gl.bindBuffer(bufferType,buffer),gl.bufferData(bufferType,array,usage),attribute.onUploadCallback(),array instanceof Float32Array)type=5126;else if(array instanceof Uint16Array)if(attribute.isFloat16BufferAttribute){if(!isWebGL2)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");type=5131}else type=5123;else if(array instanceof Int16Array)type=5122;else if(array instanceof Uint32Array)type=5125;else if(array instanceof Int32Array)type=5124;else if(array instanceof Int8Array)type=5120;else if(array instanceof Uint8Array)type=5121;else{if(!(array instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+array);type=5121}return{buffer,type,bytesPerElement:array.BYTES_PER_ELEMENT,version:attribute.version}}function updateBuffer(buffer,attribute,bufferType){const array=attribute.array,updateRange=attribute.updateRange;gl.bindBuffer(bufferType,buffer),-1===updateRange.count?gl.bufferSubData(bufferType,0,array):(isWebGL2?gl.bufferSubData(bufferType,updateRange.offset*array.BYTES_PER_ELEMENT,array,updateRange.offset,updateRange.count):gl.bufferSubData(bufferType,updateRange.offset*array.BYTES_PER_ELEMENT,array.subarray(updateRange.offset,updateRange.offset+updateRange.count)),updateRange.count=-1),attribute.onUploadCallback()}function get(attribute){return attribute.isInterleavedBufferAttribute&&(attribute=attribute.data),buffers.get(attribute)}function remove(attribute){attribute.isInterleavedBufferAttribute&&(attribute=attribute.data);const data=buffers.get(attribute);data&&(gl.deleteBuffer(data.buffer),buffers.delete(attribute))}function update(attribute,bufferType){if(attribute.isGLBufferAttribute){const cached=buffers.get(attribute);return void((!cached||cached.version<attribute.version)&&buffers.set(attribute,{buffer:attribute.buffer,type:attribute.type,bytesPerElement:attribute.elementSize,version:attribute.version}))}attribute.isInterleavedBufferAttribute&&(attribute=attribute.data);const data=buffers.get(attribute);void 0===data?buffers.set(attribute,createBuffer(attribute,bufferType)):data.version<attribute.version&&(updateBuffer(data.buffer,attribute,bufferType),data.version=attribute.version)}return __name(createBuffer,"createBuffer"),__name(updateBuffer,"updateBuffer"),__name(get,"get"),__name(remove,"remove"),__name(update,"update"),{get,remove,update}}__name(Frustum,"Frustum"),__name(WebGLAnimation,"WebGLAnimation"),__name(WebGLAttributes,"WebGLAttributes");class PlaneGeometry extends BufferGeometry{constructor(width=1,height=1,widthSegments=1,heightSegments=1){super(),this.type="PlaneGeometry",this.parameters={width,height,widthSegments,heightSegments};const width_half=width/2,height_half=height/2,gridX=Math.floor(widthSegments),gridY=Math.floor(heightSegments),gridX1=gridX+1,gridY1=gridY+1,segment_width=width/gridX,segment_height=height/gridY,indices=[],vertices=[],normals=[],uvs=[];for(let iy=0;iy<gridY1;iy++){const y=iy*segment_height-height_half;for(let ix=0;ix<gridX1;ix++)vertices.push(ix*segment_width-width_half,-y,0),normals.push(0,0,1),uvs.push(ix/gridX),uvs.push(1-iy/gridY)}for(let iy=0;iy<gridY;iy++)for(let ix=0;ix<gridX;ix++){const b=ix+gridX1*(iy+1),c=ix+1+gridX1*(iy+1),d=ix+1+gridX1*iy;indices.push(ix+gridX1*iy,b,d),indices.push(b,c,d)}this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2))}static fromJSON(data){return new PlaneGeometry(data.width,data.height,data.widthSegments,data.heightSegments)}}__name(PlaneGeometry,"PlaneGeometry");const ShaderChunk={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector22(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector22(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib2={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector32},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib2.physical={uniforms:mergeUniforms([ShaderLib2.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector22(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector22},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(renderer,cubemaps,cubeuvmaps,state,objects,alpha,premultipliedAlpha){const clearColor=new Color(0);let planeMesh,boxMesh,clearAlpha=!0===alpha?0:1,currentBackground=null,currentBackgroundVersion=0,currentTonemapping=null;function render(renderList,scene){let forceClear=!1,background=!0===scene.isScene?scene.background:null;background&&background.isTexture&&(background=(scene.backgroundBlurriness>0?cubeuvmaps:cubemaps).get(background));const xr=renderer.xr,session=xr.getSession&&xr.getSession();session&&"additive"===session.environmentBlendMode&&(background=null),null===background?setClear(clearColor,clearAlpha):background&&background.isColor&&(setClear(background,1),forceClear=!0),(renderer.autoClear||forceClear)&&renderer.clear(renderer.autoClearColor,renderer.autoClearDepth,renderer.autoClearStencil),background&&(background.isCubeTexture||background.mapping===CubeUVReflectionMapping)?(void 0===boxMesh&&(boxMesh=new Mesh2(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib2.backgroundCube.uniforms),vertexShader:ShaderLib2.backgroundCube.vertexShader,fragmentShader:ShaderLib2.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),boxMesh.geometry.deleteAttribute("normal"),boxMesh.geometry.deleteAttribute("uv"),boxMesh.onBeforeRender=function(renderer2,scene2,camera){this.matrixWorld.copyPosition(camera.matrixWorld)},Object.defineProperty(boxMesh.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),objects.update(boxMesh)),boxMesh.material.uniforms.envMap.value=background,boxMesh.material.uniforms.flipEnvMap.value=background.isCubeTexture&&!1===background.isRenderTargetTexture?-1:1,boxMesh.material.uniforms.backgroundBlurriness.value=scene.backgroundBlurriness,boxMesh.material.uniforms.backgroundIntensity.value=scene.backgroundIntensity,boxMesh.material.toneMapped=background.encoding!==sRGBEncoding,(currentBackground!==background||currentBackgroundVersion!==background.version||currentTonemapping!==renderer.toneMapping)&&(boxMesh.material.needsUpdate=!0,currentBackground=background,currentBackgroundVersion=background.version,currentTonemapping=renderer.toneMapping),boxMesh.layers.enableAll(),renderList.unshift(boxMesh,boxMesh.geometry,boxMesh.material,0,0,null)):background&&background.isTexture&&(void 0===planeMesh&&(planeMesh=new Mesh2(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib2.background.uniforms),vertexShader:ShaderLib2.background.vertexShader,fragmentShader:ShaderLib2.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),planeMesh.geometry.deleteAttribute("normal"),Object.defineProperty(planeMesh.material,"map",{get:function(){return this.uniforms.t2D.value}}),objects.update(planeMesh)),planeMesh.material.uniforms.t2D.value=background,planeMesh.material.uniforms.backgroundIntensity.value=scene.backgroundIntensity,planeMesh.material.toneMapped=background.encoding!==sRGBEncoding,!0===background.matrixAutoUpdate&&background.updateMatrix(),planeMesh.material.uniforms.uvTransform.value.copy(background.matrix),(currentBackground!==background||currentBackgroundVersion!==background.version||currentTonemapping!==renderer.toneMapping)&&(planeMesh.material.needsUpdate=!0,currentBackground=background,currentBackgroundVersion=background.version,currentTonemapping=renderer.toneMapping),planeMesh.layers.enableAll(),renderList.unshift(planeMesh,planeMesh.geometry,planeMesh.material,0,0,null))}function setClear(color,alpha2){color.getRGB(_rgb,getUnlitUniformColorSpace(renderer)),state.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,alpha2,premultipliedAlpha)}return __name(render,"render"),__name(setClear,"setClear"),{getClearColor:function(){return clearColor},setClearColor:function(color,alpha2=1){clearColor.set(color),clearAlpha=alpha2,setClear(clearColor,clearAlpha)},getClearAlpha:function(){return clearAlpha},setClearAlpha:function(alpha2){clearAlpha=alpha2,setClear(clearColor,clearAlpha)},render}}function WebGLBindingStates(gl,extensions,attributes,capabilities){const maxVertexAttributes=gl.getParameter(34921),extension=capabilities.isWebGL2?null:extensions.get("OES_vertex_array_object"),vaoAvailable=capabilities.isWebGL2||null!==extension,bindingStates={},defaultState=createBindingState(null);let currentState=defaultState,forceUpdate=!1;function setup(object,material,program,geometry,index){let updateBuffers=!1;if(vaoAvailable){const state=getBindingState(geometry,program,material);currentState!==state&&(currentState=state,bindVertexArrayObject(currentState.object)),updateBuffers=needsUpdate(object,geometry,program,index),updateBuffers&&saveCache(object,geometry,program,index)}else{const wireframe=!0===material.wireframe;(currentState.geometry!==geometry.id||currentState.program!==program.id||currentState.wireframe!==wireframe)&&(currentState.geometry=geometry.id,currentState.program=program.id,currentState.wireframe=wireframe,updateBuffers=!0)}null!==index&&attributes.update(index,34963),(updateBuffers||forceUpdate)&&(forceUpdate=!1,setupVertexAttributes(object,material,program,geometry),null!==index&&gl.bindBuffer(34963,attributes.get(index).buffer))}function createVertexArrayObject(){return capabilities.isWebGL2?gl.createVertexArray():extension.createVertexArrayOES()}function bindVertexArrayObject(vao){return capabilities.isWebGL2?gl.bindVertexArray(vao):extension.bindVertexArrayOES(vao)}function deleteVertexArrayObject(vao){return capabilities.isWebGL2?gl.deleteVertexArray(vao):extension.deleteVertexArrayOES(vao)}function getBindingState(geometry,program,material){const wireframe=!0===material.wireframe;let programMap=bindingStates[geometry.id];void 0===programMap&&(programMap={},bindingStates[geometry.id]=programMap);let stateMap=programMap[program.id];void 0===stateMap&&(stateMap={},programMap[program.id]=stateMap);let state=stateMap[wireframe];return void 0===state&&(state=createBindingState(createVertexArrayObject()),stateMap[wireframe]=state),state}function createBindingState(vao){const newAttributes=[],enabledAttributes=[],attributeDivisors=[];for(let i=0;i<maxVertexAttributes;i++)newAttributes[i]=0,enabledAttributes[i]=0,attributeDivisors[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes,enabledAttributes,attributeDivisors,object:vao,attributes:{},index:null}}function needsUpdate(object,geometry,program,index){const cachedAttributes=currentState.attributes,geometryAttributes=geometry.attributes;let attributesNum=0;const programAttributes=program.getAttributes();for(const name in programAttributes)if(programAttributes[name].location>=0){const cachedAttribute=cachedAttributes[name];let geometryAttribute=geometryAttributes[name];if(void 0===geometryAttribute&&("instanceMatrix"===name&&object.instanceMatrix&&(geometryAttribute=object.instanceMatrix),"instanceColor"===name&&object.instanceColor&&(geometryAttribute=object.instanceColor)),void 0===cachedAttribute||cachedAttribute.attribute!==geometryAttribute||geometryAttribute&&cachedAttribute.data!==geometryAttribute.data)return!0;attributesNum++}return currentState.attributesNum!==attributesNum||currentState.index!==index}function saveCache(object,geometry,program,index){const cache={},attributes2=geometry.attributes;let attributesNum=0;const programAttributes=program.getAttributes();for(const name in programAttributes)if(programAttributes[name].location>=0){let attribute=attributes2[name];void 0===attribute&&("instanceMatrix"===name&&object.instanceMatrix&&(attribute=object.instanceMatrix),"instanceColor"===name&&object.instanceColor&&(attribute=object.instanceColor));const data={};data.attribute=attribute,attribute&&attribute.data&&(data.data=attribute.data),cache[name]=data,attributesNum++}currentState.attributes=cache,currentState.attributesNum=attributesNum,currentState.index=index}function initAttributes(){const newAttributes=currentState.newAttributes;for(let i=0,il=newAttributes.length;i<il;i++)newAttributes[i]=0}function enableAttribute(attribute){enableAttributeAndDivisor(attribute,0)}function enableAttributeAndDivisor(attribute,meshPerAttribute){const enabledAttributes=currentState.enabledAttributes,attributeDivisors=currentState.attributeDivisors;currentState.newAttributes[attribute]=1,0===enabledAttributes[attribute]&&(gl.enableVertexAttribArray(attribute),enabledAttributes[attribute]=1),attributeDivisors[attribute]!==meshPerAttribute&&((capabilities.isWebGL2?gl:extensions.get("ANGLE_instanced_arrays"))[capabilities.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](attribute,meshPerAttribute),attributeDivisors[attribute]=meshPerAttribute)}function disableUnusedAttributes(){const newAttributes=currentState.newAttributes,enabledAttributes=currentState.enabledAttributes;for(let i=0,il=enabledAttributes.length;i<il;i++)enabledAttributes[i]!==newAttributes[i]&&(gl.disableVertexAttribArray(i),enabledAttributes[i]=0)}function vertexAttribPointer(index,size,type,normalized,stride,offset){!0!==capabilities.isWebGL2||5124!==type&&5125!==type?gl.vertexAttribPointer(index,size,type,normalized,stride,offset):gl.vertexAttribIPointer(index,size,type,stride,offset)}function setupVertexAttributes(object,material,program,geometry){if(!1===capabilities.isWebGL2&&(object.isInstancedMesh||geometry.isInstancedBufferGeometry)&&null===extensions.get("ANGLE_instanced_arrays"))return;initAttributes();const geometryAttributes=geometry.attributes,programAttributes=program.getAttributes(),materialDefaultAttributeValues=material.defaultAttributeValues;for(const name in programAttributes){const programAttribute=programAttributes[name];if(programAttribute.location>=0){let geometryAttribute=geometryAttributes[name];if(void 0===geometryAttribute&&("instanceMatrix"===name&&object.instanceMatrix&&(geometryAttribute=object.instanceMatrix),"instanceColor"===name&&object.instanceColor&&(geometryAttribute=object.instanceColor)),void 0!==geometryAttribute){const normalized=geometryAttribute.normalized,size=geometryAttribute.itemSize,attribute=attributes.get(geometryAttribute);if(void 0===attribute)continue;const buffer=attribute.buffer,type=attribute.type,bytesPerElement=attribute.bytesPerElement;if(geometryAttribute.isInterleavedBufferAttribute){const data=geometryAttribute.data,stride=data.stride,offset=geometryAttribute.offset;if(data.isInstancedInterleavedBuffer){for(let i=0;i<programAttribute.locationSize;i++)enableAttributeAndDivisor(programAttribute.location+i,data.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===geometry._maxInstanceCount&&(geometry._maxInstanceCount=data.meshPerAttribute*data.count)}else for(let i=0;i<programAttribute.locationSize;i++)enableAttribute(programAttribute.location+i);gl.bindBuffer(34962,buffer);for(let i=0;i<programAttribute.locationSize;i++)vertexAttribPointer(programAttribute.location+i,size/programAttribute.locationSize,type,normalized,stride*bytesPerElement,(offset+size/programAttribute.locationSize*i)*bytesPerElement)}else{if(geometryAttribute.isInstancedBufferAttribute){for(let i=0;i<programAttribute.locationSize;i++)enableAttributeAndDivisor(programAttribute.location+i,geometryAttribute.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===geometry._maxInstanceCount&&(geometry._maxInstanceCount=geometryAttribute.meshPerAttribute*geometryAttribute.count)}else for(let i=0;i<programAttribute.locationSize;i++)enableAttribute(programAttribute.location+i);gl.bindBuffer(34962,buffer);for(let i=0;i<programAttribute.locationSize;i++)vertexAttribPointer(programAttribute.location+i,size/programAttribute.locationSize,type,normalized,size*bytesPerElement,size/programAttribute.locationSize*i*bytesPerElement)}}else if(void 0!==materialDefaultAttributeValues){const value=materialDefaultAttributeValues[name];if(void 0!==value)switch(value.length){case 2:gl.vertexAttrib2fv(programAttribute.location,value);break;case 3:gl.vertexAttrib3fv(programAttribute.location,value);break;case 4:gl.vertexAttrib4fv(programAttribute.location,value);break;default:gl.vertexAttrib1fv(programAttribute.location,value)}}}}disableUnusedAttributes()}function dispose(){reset();for(const geometryId in bindingStates){const programMap=bindingStates[geometryId];for(const programId in programMap){const stateMap=programMap[programId];for(const wireframe in stateMap)deleteVertexArrayObject(stateMap[wireframe].object),delete stateMap[wireframe];delete programMap[programId]}delete bindingStates[geometryId]}}function releaseStatesOfGeometry(geometry){if(void 0===bindingStates[geometry.id])return;const programMap=bindingStates[geometry.id];for(const programId in programMap){const stateMap=programMap[programId];for(const wireframe in stateMap)deleteVertexArrayObject(stateMap[wireframe].object),delete stateMap[wireframe];delete programMap[programId]}delete bindingStates[geometry.id]}function releaseStatesOfProgram(program){for(const geometryId in bindingStates){const programMap=bindingStates[geometryId];if(void 0===programMap[program.id])continue;const stateMap=programMap[program.id];for(const wireframe in stateMap)deleteVertexArrayObject(stateMap[wireframe].object),delete stateMap[wireframe];delete programMap[program.id]}}function reset(){resetDefaultState(),forceUpdate=!0,currentState!==defaultState&&(currentState=defaultState,bindVertexArrayObject(currentState.object))}function resetDefaultState(){defaultState.geometry=null,defaultState.program=null,defaultState.wireframe=!1}return __name(setup,"setup"),__name(createVertexArrayObject,"createVertexArrayObject"),__name(bindVertexArrayObject,"bindVertexArrayObject"),__name(deleteVertexArrayObject,"deleteVertexArrayObject"),__name(getBindingState,"getBindingState"),__name(createBindingState,"createBindingState"),__name(needsUpdate,"needsUpdate"),__name(saveCache,"saveCache"),__name(initAttributes,"initAttributes"),__name(enableAttribute,"enableAttribute"),__name(enableAttributeAndDivisor,"enableAttributeAndDivisor"),__name(disableUnusedAttributes,"disableUnusedAttributes"),__name(vertexAttribPointer,"vertexAttribPointer"),__name(setupVertexAttributes,"setupVertexAttributes"),__name(dispose,"dispose"),__name(releaseStatesOfGeometry,"releaseStatesOfGeometry"),__name(releaseStatesOfProgram,"releaseStatesOfProgram"),__name(reset,"reset"),__name(resetDefaultState,"resetDefaultState"),{setup,reset,resetDefaultState,dispose,releaseStatesOfGeometry,releaseStatesOfProgram,initAttributes,enableAttribute,disableUnusedAttributes}}function WebGLBufferRenderer(gl,extensions,info,capabilities){const isWebGL2=capabilities.isWebGL2;let mode;function setMode(value){mode=value}function render(start,count){gl.drawArrays(mode,start,count),info.update(count,mode,1)}function renderInstances(start,count,primcount){if(0===primcount)return;let extension,methodName;if(isWebGL2)extension=gl,methodName="drawArraysInstanced";else if(extension=extensions.get("ANGLE_instanced_arrays"),methodName="drawArraysInstancedANGLE",null===extension)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");extension[methodName](mode,start,count,primcount),info.update(count,mode,primcount)}__name(setMode,"setMode"),__name(render,"render"),__name(renderInstances,"renderInstances"),this.setMode=setMode,this.render=render,this.renderInstances=renderInstances}function WebGLCapabilities(gl,extensions,parameters){let maxAnisotropy;function getMaxAnisotropy(){if(void 0!==maxAnisotropy)return maxAnisotropy;if(!0===extensions.has("EXT_texture_filter_anisotropic")){const extension=extensions.get("EXT_texture_filter_anisotropic");maxAnisotropy=gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else maxAnisotropy=0;return maxAnisotropy}function getMaxPrecision(precision2){if("highp"===precision2){if(gl.getShaderPrecisionFormat(35633,36338).precision>0&&gl.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";precision2="mediump"}return"mediump"===precision2&&gl.getShaderPrecisionFormat(35633,36337).precision>0&&gl.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}__name(getMaxAnisotropy,"getMaxAnisotropy"),__name(getMaxPrecision,"getMaxPrecision");const isWebGL2=typeof WebGL2RenderingContext<"u"&&gl instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&gl instanceof WebGL2ComputeRenderingContext;let precision=void 0!==parameters.precision?parameters.precision:"highp";const maxPrecision=getMaxPrecision(precision);maxPrecision!==precision&&(console.warn("THREE.WebGLRenderer:",precision,"not supported, using",maxPrecision,"instead."),precision=maxPrecision);const drawBuffers=isWebGL2||extensions.has("WEBGL_draw_buffers"),logarithmicDepthBuffer=!0===parameters.logarithmicDepthBuffer,maxTextures=gl.getParameter(34930),maxVertexTextures=gl.getParameter(35660),maxTextureSize=gl.getParameter(3379),maxCubemapSize=gl.getParameter(34076),maxAttributes=gl.getParameter(34921),maxVertexUniforms=gl.getParameter(36347),maxVaryings=gl.getParameter(36348),maxFragmentUniforms=gl.getParameter(36349),vertexTextures=maxVertexTextures>0,floatFragmentTextures=isWebGL2||extensions.has("OES_texture_float");return{isWebGL2,drawBuffers,getMaxAnisotropy,getMaxPrecision,precision,logarithmicDepthBuffer,maxTextures,maxVertexTextures,maxTextureSize,maxCubemapSize,maxAttributes,maxVertexUniforms,maxVaryings,maxFragmentUniforms,vertexTextures,floatFragmentTextures,floatVertexTextures:vertexTextures&&floatFragmentTextures,maxSamples:isWebGL2?gl.getParameter(36183):0}}function WebGLClipping(properties){const scope=this;let globalState=null,numGlobalPlanes=0,localClippingEnabled=!1,renderingShadows=!1;const plane=new Plane,viewNormalMatrix=new Matrix3,uniform={value:null,needsUpdate:!1};function resetGlobalState(){uniform.value!==globalState&&(uniform.value=globalState,uniform.needsUpdate=numGlobalPlanes>0),scope.numPlanes=numGlobalPlanes,scope.numIntersection=0}function projectPlanes(planes,camera,dstOffset,skipTransform){const nPlanes=null!==planes?planes.length:0;let dstArray=null;if(0!==nPlanes){if(dstArray=uniform.value,!0!==skipTransform||null===dstArray){const flatSize=dstOffset+4*nPlanes,viewMatrix=camera.matrixWorldInverse;viewNormalMatrix.getNormalMatrix(viewMatrix),(null===dstArray||dstArray.length<flatSize)&&(dstArray=new Float32Array(flatSize));for(let i=0,i4=dstOffset;i!==nPlanes;++i,i4+=4)plane.copy(planes[i]).applyMatrix4(viewMatrix,viewNormalMatrix),plane.normal.toArray(dstArray,i4),dstArray[i4+3]=plane.constant}uniform.value=dstArray,uniform.needsUpdate=!0}return scope.numPlanes=nPlanes,scope.numIntersection=0,dstArray}this.uniform=uniform,this.numPlanes=0,this.numIntersection=0,this.init=function(planes,enableLocalClipping,camera){const enabled=0!==planes.length||enableLocalClipping||0!==numGlobalPlanes||localClippingEnabled;return localClippingEnabled=enableLocalClipping,globalState=projectPlanes(planes,camera,0),numGlobalPlanes=planes.length,enabled},this.beginShadows=function(){renderingShadows=!0,projectPlanes(null)},this.endShadows=function(){renderingShadows=!1,resetGlobalState()},this.setState=function(material,camera,useCache){const planes=material.clippingPlanes,clipIntersection=material.clipIntersection,clipShadows=material.clipShadows,materialProperties=properties.get(material);if(!localClippingEnabled||null===planes||0===planes.length||renderingShadows&&!clipShadows)renderingShadows?projectPlanes(null):resetGlobalState();else{const nGlobal=renderingShadows?0:numGlobalPlanes,lGlobal=4*nGlobal;let dstArray=materialProperties.clippingState||null;uniform.value=dstArray,dstArray=projectPlanes(planes,camera,lGlobal,useCache);for(let i=0;i!==lGlobal;++i)dstArray[i]=globalState[i];materialProperties.clippingState=dstArray,this.numIntersection=clipIntersection?this.numPlanes:0,this.numPlanes+=nGlobal}},__name(resetGlobalState,"resetGlobalState"),__name(projectPlanes,"projectPlanes")}function WebGLCubeMaps(renderer){let cubemaps=new WeakMap;function mapTextureMapping(texture,mapping){return mapping===EquirectangularReflectionMapping?texture.mapping=CubeReflectionMapping:mapping===EquirectangularRefractionMapping&&(texture.mapping=CubeRefractionMapping),texture}function get(texture){if(texture&&texture.isTexture&&!1===texture.isRenderTargetTexture){const mapping=texture.mapping;if(mapping===EquirectangularReflectionMapping||mapping===EquirectangularRefractionMapping){if(cubemaps.has(texture))return mapTextureMapping(cubemaps.get(texture).texture,texture.mapping);{const image=texture.image;if(image&&image.height>0){const renderTarget=new WebGLCubeRenderTarget(image.height/2);return renderTarget.fromEquirectangularTexture(renderer,texture),cubemaps.set(texture,renderTarget),texture.addEventListener("dispose",onTextureDispose),mapTextureMapping(renderTarget.texture,texture.mapping)}return null}}}return texture}function onTextureDispose(event){const texture=event.target;texture.removeEventListener("dispose",onTextureDispose);const cubemap=cubemaps.get(texture);void 0!==cubemap&&(cubemaps.delete(texture),cubemap.dispose())}function dispose(){cubemaps=new WeakMap}return __name(mapTextureMapping,"mapTextureMapping"),__name(get,"get"),__name(onTextureDispose,"onTextureDispose"),__name(dispose,"dispose"),{get,dispose}}__name(WebGLBackground,"WebGLBackground"),__name(WebGLBindingStates,"WebGLBindingStates"),__name(WebGLBufferRenderer,"WebGLBufferRenderer"),__name(WebGLCapabilities,"WebGLCapabilities"),__name(WebGLClipping,"WebGLClipping"),__name(WebGLCubeMaps,"WebGLCubeMaps");class OrthographicCamera extends Camera{constructor(left=-1,right=1,top=1,bottom=-1,near=.1,far=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=left,this.right=right,this.top=top,this.bottom=bottom,this.near=near,this.far=far,this.updateProjectionMatrix()}copy(source,recursive){return super.copy(source,recursive),this.left=source.left,this.right=source.right,this.top=source.top,this.bottom=source.bottom,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this.view=null===source.view?null:Object.assign({},source.view),this}setViewOffset(fullWidth,fullHeight,x,y,width,height){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=fullWidth,this.view.fullHeight=fullHeight,this.view.offsetX=x,this.view.offsetY=y,this.view.width=width,this.view.height=height,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const dx=(this.right-this.left)/(2*this.zoom),dy=(this.top-this.bottom)/(2*this.zoom),cx=(this.right+this.left)/2,cy=(this.top+this.bottom)/2;let left=cx-dx,right=cx+dx,top=cy+dy,bottom=cy-dy;if(null!==this.view&&this.view.enabled){const scaleW=(this.right-this.left)/this.view.fullWidth/this.zoom,scaleH=(this.top-this.bottom)/this.view.fullHeight/this.zoom;left+=scaleW*this.view.offsetX,right=left+scaleW*this.view.width,top-=scaleH*this.view.offsetY,bottom=top-scaleH*this.view.height}this.projectionMatrix.makeOrthographic(left,right,top,bottom,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(meta){const data=super.toJSON(meta);return data.object.zoom=this.zoom,data.object.left=this.left,data.object.right=this.right,data.object.top=this.top,data.object.bottom=this.bottom,data.object.near=this.near,data.object.far=this.far,null!==this.view&&(data.object.view=Object.assign({},this.view)),data}}__name(OrthographicCamera,"OrthographicCamera");const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector32(1,1,1),new Vector32(-1,1,1),new Vector32(1,1,-1),new Vector32(-1,1,-1),new Vector32(0,PHI,INV_PHI),new Vector32(0,PHI,-INV_PHI),new Vector32(INV_PHI,0,PHI),new Vector32(-INV_PHI,0,PHI),new Vector32(PHI,INV_PHI,0),new Vector32(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(renderer){this._renderer=renderer,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(scene,sigma=0,near=.1,far=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const cubeUVRenderTarget=this._allocateTargets();return cubeUVRenderTarget.depthBuffer=!0,this._sceneToCubeUV(scene,near,far,cubeUVRenderTarget),sigma>0&&this._blur(cubeUVRenderTarget,0,0,sigma),this._applyPMREM(cubeUVRenderTarget),this._cleanup(cubeUVRenderTarget),cubeUVRenderTarget}fromEquirectangular(equirectangular,renderTarget=null){return this._fromTexture(equirectangular,renderTarget)}fromCubemap(cubemap,renderTarget=null){return this._fromTexture(cubemap,renderTarget)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(cubeSize){this._lodMax=Math.floor(Math.log2(cubeSize)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let i=0;i<this._lodPlanes.length;i++)this._lodPlanes[i].dispose()}_cleanup(outputTarget){this._renderer.setRenderTarget(_oldTarget),outputTarget.scissorTest=!1,_setViewport(outputTarget,0,0,outputTarget.width,outputTarget.height)}_fromTexture(texture,renderTarget){this._setSize(texture.mapping===CubeReflectionMapping||texture.mapping===CubeRefractionMapping?0===texture.image.length?16:texture.image[0].width||texture.image[0].image.width:texture.image.width/4),_oldTarget=this._renderer.getRenderTarget();const cubeUVRenderTarget=renderTarget||this._allocateTargets();return this._textureToCubeUV(texture,cubeUVRenderTarget),this._applyPMREM(cubeUVRenderTarget),this._cleanup(cubeUVRenderTarget),cubeUVRenderTarget}_allocateTargets(){const width=3*Math.max(this._cubeSize,112),height=4*this._cubeSize,params={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},cubeUVRenderTarget=_createRenderTarget(width,height,params);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==width){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(width,height,params);const{_lodMax}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(_lodMax)),this._blurMaterial=_getBlurShader(_lodMax,width,height)}return cubeUVRenderTarget}_compileMaterial(material){const tmpMesh=new Mesh2(this._lodPlanes[0],material);this._renderer.compile(tmpMesh,_flatCamera)}_sceneToCubeUV(scene,near,far,cubeUVRenderTarget){const cubeCamera=new PerspectiveCamera(90,1,near,far),upSign=[1,-1,1,1,1,1],forwardSign=[1,1,1,-1,-1,-1],renderer=this._renderer,originalAutoClear=renderer.autoClear,toneMapping=renderer.toneMapping;renderer.getClearColor(_clearColor),renderer.toneMapping=NoToneMapping,renderer.autoClear=!1;const backgroundMaterial=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),backgroundBox=new Mesh2(new BoxGeometry,backgroundMaterial);let useSolidColor=!1;const background=scene.background;background?background.isColor&&(backgroundMaterial.color.copy(background),scene.background=null,useSolidColor=!0):(backgroundMaterial.color.copy(_clearColor),useSolidColor=!0);for(let i=0;i<6;i++){const col=i%3;0===col?(cubeCamera.up.set(0,upSign[i],0),cubeCamera.lookAt(forwardSign[i],0,0)):1===col?(cubeCamera.up.set(0,0,upSign[i]),cubeCamera.lookAt(0,forwardSign[i],0)):(cubeCamera.up.set(0,upSign[i],0),cubeCamera.lookAt(0,0,forwardSign[i]));const size=this._cubeSize;_setViewport(cubeUVRenderTarget,col*size,i>2?size:0,size,size),renderer.setRenderTarget(cubeUVRenderTarget),useSolidColor&&renderer.render(backgroundBox,cubeCamera),renderer.render(scene,cubeCamera)}backgroundBox.geometry.dispose(),backgroundBox.material.dispose(),renderer.toneMapping=toneMapping,renderer.autoClear=originalAutoClear,scene.background=background}_textureToCubeUV(texture,cubeUVRenderTarget){const renderer=this._renderer,isCubeTexture=texture.mapping===CubeReflectionMapping||texture.mapping===CubeRefractionMapping;isCubeTexture?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===texture.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());const material=isCubeTexture?this._cubemapMaterial:this._equirectMaterial,mesh=new Mesh2(this._lodPlanes[0],material);material.uniforms.envMap.value=texture;const size=this._cubeSize;_setViewport(cubeUVRenderTarget,0,0,3*size,2*size),renderer.setRenderTarget(cubeUVRenderTarget),renderer.render(mesh,_flatCamera)}_applyPMREM(cubeUVRenderTarget){const renderer=this._renderer,autoClear=renderer.autoClear;renderer.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const sigma=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(cubeUVRenderTarget,i-1,i,sigma,_axisDirections[(i-1)%_axisDirections.length])}renderer.autoClear=autoClear}_blur(cubeUVRenderTarget,lodIn,lodOut,sigma,poleAxis){const pingPongRenderTarget=this._pingPongRenderTarget;this._halfBlur(cubeUVRenderTarget,pingPongRenderTarget,lodIn,lodOut,sigma,"latitudinal",poleAxis),this._halfBlur(pingPongRenderTarget,cubeUVRenderTarget,lodOut,lodOut,sigma,"longitudinal",poleAxis)}_halfBlur(targetIn,targetOut,lodIn,lodOut,sigmaRadians,direction,poleAxis){const renderer=this._renderer,blurMaterial=this._blurMaterial;"latitudinal"!==direction&&"longitudinal"!==direction&&console.error("blur direction must be either latitudinal or longitudinal!");const blurMesh=new Mesh2(this._lodPlanes[lodOut],blurMaterial),blurUniforms=blurMaterial.uniforms,pixels=this._sizeLods[lodIn]-1,radiansPerPixel=isFinite(sigmaRadians)?Math.PI/(2*pixels):2*Math.PI/(2*MAX_SAMPLES-1),sigmaPixels=sigmaRadians/radiansPerPixel,samples=isFinite(sigmaRadians)?1+Math.floor(3*sigmaPixels):MAX_SAMPLES;samples>MAX_SAMPLES&&console.warn(`sigmaRadians, ${sigmaRadians}, is too large and will clip, as it requested ${samples} samples when the maximum is set to ${MAX_SAMPLES}`);const weights=[];let sum=0;for(let i=0;i<MAX_SAMPLES;++i){const x2=i/sigmaPixels,weight=Math.exp(-x2*x2/2);weights.push(weight),0===i?sum+=weight:i<samples&&(sum+=2*weight)}for(let i=0;i<weights.length;i++)weights[i]=weights[i]/sum;blurUniforms.envMap.value=targetIn.texture,blurUniforms.samples.value=samples,blurUniforms.weights.value=weights,blurUniforms.latitudinal.value="latitudinal"===direction,poleAxis&&(blurUniforms.poleAxis.value=poleAxis);const{_lodMax}=this;blurUniforms.dTheta.value=radiansPerPixel,blurUniforms.mipInt.value=_lodMax-lodIn;const outputSize=this._sizeLods[lodOut];_setViewport(targetOut,3*outputSize*(lodOut>_lodMax-LOD_MIN?lodOut-_lodMax+LOD_MIN:0),4*(this._cubeSize-outputSize),3*outputSize,2*outputSize),renderer.setRenderTarget(targetOut),renderer.render(blurMesh,_flatCamera)}}function _createPlanes(lodMax){const lodPlanes=[],sizeLods=[],sigmas=[];let lod=lodMax;const totalLods=lodMax-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let i=0;i<totalLods;i++){const sizeLod=Math.pow(2,lod);sizeLods.push(sizeLod);let sigma=1/sizeLod;i>lodMax-LOD_MIN?sigma=EXTRA_LOD_SIGMA[i-lodMax+LOD_MIN-1]:0===i&&(sigma=0),sigmas.push(sigma);const texelSize=1/(sizeLod-2),min=-texelSize,max=1+texelSize,uv1=[min,min,max,min,max,max,min,min,max,max,min,max],cubeFaces=6,vertices=6,positionSize=3,uvSize=2,faceIndexSize=1,position=new Float32Array(positionSize*vertices*cubeFaces),uv=new Float32Array(uvSize*vertices*cubeFaces),faceIndex=new Float32Array(faceIndexSize*vertices*cubeFaces);for(let face=0;face<cubeFaces;face++){const x=face%3*2/3-1,y=face>2?0:-1;position.set([x,y,0,x+2/3,y,0,x+2/3,y+1,0,x,y,0,x+2/3,y+1,0,x,y+1,0],positionSize*vertices*face),uv.set(uv1,uvSize*vertices*face),faceIndex.set([face,face,face,face,face,face],faceIndexSize*vertices*face)}const planes=new BufferGeometry;planes.setAttribute("position",new BufferAttribute(position,positionSize)),planes.setAttribute("uv",new BufferAttribute(uv,uvSize)),planes.setAttribute("faceIndex",new BufferAttribute(faceIndex,faceIndexSize)),lodPlanes.push(planes),lod>LOD_MIN&&lod--}return{lodPlanes,sizeLods,sigmas}}function _createRenderTarget(width,height,params){const cubeUVRenderTarget=new WebGLRenderTarget(width,height,params);return cubeUVRenderTarget.texture.mapping=CubeUVReflectionMapping,cubeUVRenderTarget.texture.name="PMREM.cubeUv",cubeUVRenderTarget.scissorTest=!0,cubeUVRenderTarget}function _setViewport(target,x,y,width,height){target.viewport.set(x,y,width,height),target.scissor.set(x,y,width,height)}function _getBlurShader(lodMax,width,height){const weights=new Float32Array(MAX_SAMPLES),poleAxis=new Vector32(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/width,CUBEUV_TEXEL_HEIGHT:1/height,CUBEUV_MAX_MIP:`${lodMax}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:weights},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:poleAxis}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(renderer){let cubeUVmaps=new WeakMap,pmremGenerator=null;function get(texture){if(texture&&texture.isTexture){const mapping=texture.mapping,isEquirectMap=mapping===EquirectangularReflectionMapping||mapping===EquirectangularRefractionMapping,isCubeMap=mapping===CubeReflectionMapping||mapping===CubeRefractionMapping;if(isEquirectMap||isCubeMap){if(texture.isRenderTargetTexture&&!0===texture.needsPMREMUpdate){texture.needsPMREMUpdate=!1;let renderTarget=cubeUVmaps.get(texture);return null===pmremGenerator&&(pmremGenerator=new PMREMGenerator(renderer)),renderTarget=isEquirectMap?pmremGenerator.fromEquirectangular(texture,renderTarget):pmremGenerator.fromCubemap(texture,renderTarget),cubeUVmaps.set(texture,renderTarget),renderTarget.texture}if(cubeUVmaps.has(texture))return cubeUVmaps.get(texture).texture;{const image=texture.image;if(isEquirectMap&&image&&image.height>0||isCubeMap&&image&&isCubeTextureComplete(image)){null===pmremGenerator&&(pmremGenerator=new PMREMGenerator(renderer));const renderTarget=isEquirectMap?pmremGenerator.fromEquirectangular(texture):pmremGenerator.fromCubemap(texture);return cubeUVmaps.set(texture,renderTarget),texture.addEventListener("dispose",onTextureDispose),renderTarget.texture}return null}}}return texture}function isCubeTextureComplete(image){let count=0;for(let i=0;i<6;i++)void 0!==image[i]&&count++;return 6===count}function onTextureDispose(event){const texture=event.target;texture.removeEventListener("dispose",onTextureDispose);const cubemapUV=cubeUVmaps.get(texture);void 0!==cubemapUV&&(cubeUVmaps.delete(texture),cubemapUV.dispose())}function dispose(){cubeUVmaps=new WeakMap,null!==pmremGenerator&&(pmremGenerator.dispose(),pmremGenerator=null)}return __name(get,"get"),__name(isCubeTextureComplete,"isCubeTextureComplete"),__name(onTextureDispose,"onTextureDispose"),__name(dispose,"dispose"),{get,dispose}}function WebGLExtensions(gl){const extensions={};function getExtension(name){if(void 0!==extensions[name])return extensions[name];let extension;switch(name){case"WEBGL_depth_texture":extension=gl.getExtension("WEBGL_depth_texture")||gl.getExtension("MOZ_WEBGL_depth_texture")||gl.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":extension=gl.getExtension("EXT_texture_filter_anisotropic")||gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":extension=gl.getExtension("WEBGL_compressed_texture_s3tc")||gl.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":extension=gl.getExtension("WEBGL_compressed_texture_pvrtc")||gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:extension=gl.getExtension(name)}return extensions[name]=extension,extension}return __name(getExtension,"getExtension"),{has:function(name){return null!==getExtension(name)},init:function(capabilities){capabilities.isWebGL2?getExtension("EXT_color_buffer_float"):(getExtension("WEBGL_depth_texture"),getExtension("OES_texture_float"),getExtension("OES_texture_half_float"),getExtension("OES_texture_half_float_linear"),getExtension("OES_standard_derivatives"),getExtension("OES_element_index_uint"),getExtension("OES_vertex_array_object"),getExtension("ANGLE_instanced_arrays")),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float"),getExtension("WEBGL_multisampled_render_to_texture")},get:function(name){const extension=getExtension(name);return null===extension&&console.warn("THREE.WebGLRenderer: "+name+" extension not supported."),extension}}}function WebGLGeometries(gl,attributes,info,bindingStates){const geometries={},wireframeAttributes=new WeakMap;function onGeometryDispose(event){const geometry=event.target;null!==geometry.index&&attributes.remove(geometry.index);for(const name in geometry.attributes)attributes.remove(geometry.attributes[name]);geometry.removeEventListener("dispose",onGeometryDispose),delete geometries[geometry.id];const attribute=wireframeAttributes.get(geometry);attribute&&(attributes.remove(attribute),wireframeAttributes.delete(geometry)),bindingStates.releaseStatesOfGeometry(geometry),!0===geometry.isInstancedBufferGeometry&&delete geometry._maxInstanceCount,info.memory.geometries--}function get(object,geometry){return!0===geometries[geometry.id]||(geometry.addEventListener("dispose",onGeometryDispose),geometries[geometry.id]=!0,info.memory.geometries++),geometry}function update(geometry){const geometryAttributes=geometry.attributes;for(const name in geometryAttributes)attributes.update(geometryAttributes[name],34962);const morphAttributes=geometry.morphAttributes;for(const name in morphAttributes){const array=morphAttributes[name];for(let i=0,l=array.length;i<l;i++)attributes.update(array[i],34962)}}function updateWireframeAttribute(geometry){const indices=[],geometryIndex=geometry.index,geometryPosition=geometry.attributes.position;let version=0;if(null!==geometryIndex){const array=geometryIndex.array;version=geometryIndex.version;for(let i=0,l=array.length;i<l;i+=3){const a=array[i+0],b=array[i+1],c=array[i+2];indices.push(a,b,b,c,c,a)}}else{version=geometryPosition.version;for(let i=0,l=geometryPosition.array.length/3-1;i<l;i+=3){const a=i+0,b=i+1,c=i+2;indices.push(a,b,b,c,c,a)}}const attribute=new(arrayNeedsUint32(indices)?Uint32BufferAttribute:Uint16BufferAttribute)(indices,1);attribute.version=version;const previousAttribute=wireframeAttributes.get(geometry);previousAttribute&&attributes.remove(previousAttribute),wireframeAttributes.set(geometry,attribute)}function getWireframeAttribute(geometry){const currentAttribute=wireframeAttributes.get(geometry);if(currentAttribute){const geometryIndex=geometry.index;null!==geometryIndex&&currentAttribute.version<geometryIndex.version&&updateWireframeAttribute(geometry)}else updateWireframeAttribute(geometry);return wireframeAttributes.get(geometry)}return __name(onGeometryDispose,"onGeometryDispose"),__name(get,"get"),__name(update,"update"),__name(updateWireframeAttribute,"updateWireframeAttribute"),__name(getWireframeAttribute,"getWireframeAttribute"),{get,update,getWireframeAttribute}}function WebGLIndexedBufferRenderer(gl,extensions,info,capabilities){const isWebGL2=capabilities.isWebGL2;let mode,type,bytesPerElement;function setMode(value){mode=value}function setIndex(value){type=value.type,bytesPerElement=value.bytesPerElement}function render(start,count){gl.drawElements(mode,count,type,start*bytesPerElement),info.update(count,mode,1)}function renderInstances(start,count,primcount){if(0===primcount)return;let extension,methodName;if(isWebGL2)extension=gl,methodName="drawElementsInstanced";else if(extension=extensions.get("ANGLE_instanced_arrays"),methodName="drawElementsInstancedANGLE",null===extension)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");extension[methodName](mode,count,type,start*bytesPerElement,primcount),info.update(count,mode,primcount)}__name(setMode,"setMode"),__name(setIndex,"setIndex"),__name(render,"render"),__name(renderInstances,"renderInstances"),this.setMode=setMode,this.setIndex=setIndex,this.render=render,this.renderInstances=renderInstances}function WebGLInfo(gl){const render={frame:0,calls:0,triangles:0,points:0,lines:0};function update(count,mode,instanceCount){switch(render.calls++,mode){case 4:render.triangles+=instanceCount*(count/3);break;case 1:render.lines+=instanceCount*(count/2);break;case 3:render.lines+=instanceCount*(count-1);break;case 2:render.lines+=instanceCount*count;break;case 0:render.points+=instanceCount*count;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",mode)}}function reset(){render.frame++,render.calls=0,render.triangles=0,render.points=0,render.lines=0}return __name(update,"update"),__name(reset,"reset"),{memory:{geometries:0,textures:0},render,programs:null,autoReset:!0,reset,update}}function numericalSort(a,b){return a[0]-b[0]}function absNumericalSort(a,b){return Math.abs(b[1])-Math.abs(a[1])}function WebGLMorphtargets(gl,capabilities,textures){const influencesList={},morphInfluences=new Float32Array(8),morphTextures=new WeakMap,morph=new Vector4,workInfluences=[];for(let i=0;i<8;i++)workInfluences[i]=[i,0];function update(object,geometry,material,program){const objectInfluences=object.morphTargetInfluences;if(!0===capabilities.isWebGL2){const morphAttribute=geometry.morphAttributes.position||geometry.morphAttributes.normal||geometry.morphAttributes.color,morphTargetsCount=void 0!==morphAttribute?morphAttribute.length:0;let entry=morphTextures.get(geometry);if(void 0===entry||entry.count!==morphTargetsCount){let disposeTexture=function(){texture.dispose(),morphTextures.delete(geometry),geometry.removeEventListener("dispose",disposeTexture)};__name(disposeTexture,"disposeTexture"),void 0!==entry&&entry.texture.dispose();const hasMorphPosition=void 0!==geometry.morphAttributes.position,hasMorphNormals=void 0!==geometry.morphAttributes.normal,hasMorphColors=void 0!==geometry.morphAttributes.color,morphTargets=geometry.morphAttributes.position||[],morphNormals=geometry.morphAttributes.normal||[],morphColors=geometry.morphAttributes.color||[];let vertexDataCount=0;!0===hasMorphPosition&&(vertexDataCount=1),!0===hasMorphNormals&&(vertexDataCount=2),!0===hasMorphColors&&(vertexDataCount=3);let width=geometry.attributes.position.count*vertexDataCount,height=1;width>capabilities.maxTextureSize&&(height=Math.ceil(width/capabilities.maxTextureSize),width=capabilities.maxTextureSize);const buffer=new Float32Array(width*height*4*morphTargetsCount),texture=new DataArrayTexture(buffer,width,height,morphTargetsCount);texture.type=FloatType,texture.needsUpdate=!0;const vertexDataStride=4*vertexDataCount;for(let i=0;i<morphTargetsCount;i++){const morphTarget=morphTargets[i],morphNormal=morphNormals[i],morphColor=morphColors[i],offset=width*height*4*i;for(let j=0;j<morphTarget.count;j++){const stride=j*vertexDataStride;!0===hasMorphPosition&&(morph.fromBufferAttribute(morphTarget,j),buffer[offset+stride+0]=morph.x,buffer[offset+stride+1]=morph.y,buffer[offset+stride+2]=morph.z,buffer[offset+stride+3]=0),!0===hasMorphNormals&&(morph.fromBufferAttribute(morphNormal,j),buffer[offset+stride+4]=morph.x,buffer[offset+stride+5]=morph.y,buffer[offset+stride+6]=morph.z,buffer[offset+stride+7]=0),!0===hasMorphColors&&(morph.fromBufferAttribute(morphColor,j),buffer[offset+stride+8]=morph.x,buffer[offset+stride+9]=morph.y,buffer[offset+stride+10]=morph.z,buffer[offset+stride+11]=4===morphColor.itemSize?morph.w:1)}}entry={count:morphTargetsCount,texture,size:new Vector22(width,height)},morphTextures.set(geometry,entry),geometry.addEventListener("dispose",disposeTexture)}let morphInfluencesSum=0;for(let i=0;i<objectInfluences.length;i++)morphInfluencesSum+=objectInfluences[i];const morphBaseInfluence=geometry.morphTargetsRelative?1:1-morphInfluencesSum;program.getUniforms().setValue(gl,"morphTargetBaseInfluence",morphBaseInfluence),program.getUniforms().setValue(gl,"morphTargetInfluences",objectInfluences),program.getUniforms().setValue(gl,"morphTargetsTexture",entry.texture,textures),program.getUniforms().setValue(gl,"morphTargetsTextureSize",entry.size)}else{const length=void 0===objectInfluences?0:objectInfluences.length;let influences=influencesList[geometry.id];if(void 0===influences||influences.length!==length){influences=[];for(let i=0;i<length;i++)influences[i]=[i,0];influencesList[geometry.id]=influences}for(let i=0;i<length;i++){const influence=influences[i];influence[0]=i,influence[1]=objectInfluences[i]}influences.sort(absNumericalSort);for(let i=0;i<8;i++)i<length&&influences[i][1]?(workInfluences[i][0]=influences[i][0],workInfluences[i][1]=influences[i][1]):(workInfluences[i][0]=Number.MAX_SAFE_INTEGER,workInfluences[i][1]=0);workInfluences.sort(numericalSort);const morphTargets=geometry.morphAttributes.position,morphNormals=geometry.morphAttributes.normal;let morphInfluencesSum=0;for(let i=0;i<8;i++){const influence=workInfluences[i],index=influence[0],value=influence[1];index!==Number.MAX_SAFE_INTEGER&&value?(morphTargets&&geometry.getAttribute("morphTarget"+i)!==morphTargets[index]&&geometry.setAttribute("morphTarget"+i,morphTargets[index]),morphNormals&&geometry.getAttribute("morphNormal"+i)!==morphNormals[index]&&geometry.setAttribute("morphNormal"+i,morphNormals[index]),morphInfluences[i]=value,morphInfluencesSum+=value):(morphTargets&&!0===geometry.hasAttribute("morphTarget"+i)&&geometry.deleteAttribute("morphTarget"+i),morphNormals&&!0===geometry.hasAttribute("morphNormal"+i)&&geometry.deleteAttribute("morphNormal"+i),morphInfluences[i]=0)}const morphBaseInfluence=geometry.morphTargetsRelative?1:1-morphInfluencesSum;program.getUniforms().setValue(gl,"morphTargetBaseInfluence",morphBaseInfluence),program.getUniforms().setValue(gl,"morphTargetInfluences",morphInfluences)}}return __name(update,"update"),{update}}function WebGLObjects(gl,geometries,attributes,info){let updateMap=new WeakMap;function update(object){const frame=info.render.frame,buffergeometry=geometries.get(object,object.geometry);return updateMap.get(buffergeometry)!==frame&&(geometries.update(buffergeometry),updateMap.set(buffergeometry,frame)),object.isInstancedMesh&&(!1===object.hasEventListener("dispose",onInstancedMeshDispose)&&object.addEventListener("dispose",onInstancedMeshDispose),attributes.update(object.instanceMatrix,34962),null!==object.instanceColor&&attributes.update(object.instanceColor,34962)),buffergeometry}function dispose(){updateMap=new WeakMap}function onInstancedMeshDispose(event){const instancedMesh=event.target;instancedMesh.removeEventListener("dispose",onInstancedMeshDispose),attributes.remove(instancedMesh.instanceMatrix),null!==instancedMesh.instanceColor&&attributes.remove(instancedMesh.instanceColor)}return __name(update,"update"),__name(dispose,"dispose"),__name(onInstancedMeshDispose,"onInstancedMeshDispose"),{update,dispose}}__name(PMREMGenerator,"PMREMGenerator"),__name(_createPlanes,"_createPlanes"),__name(_createRenderTarget,"_createRenderTarget"),__name(_setViewport,"_setViewport"),__name(_getBlurShader,"_getBlurShader"),__name(_getEquirectMaterial,"_getEquirectMaterial"),__name(_getCubemapMaterial,"_getCubemapMaterial"),__name(_getCommonVertexShader,"_getCommonVertexShader"),__name(WebGLCubeUVMaps,"WebGLCubeUVMaps"),__name(WebGLExtensions,"WebGLExtensions"),__name(WebGLGeometries,"WebGLGeometries"),__name(WebGLIndexedBufferRenderer,"WebGLIndexedBufferRenderer"),__name(WebGLInfo,"WebGLInfo"),__name(numericalSort,"numericalSort"),__name(absNumericalSort,"absNumericalSort"),__name(WebGLMorphtargets,"WebGLMorphtargets"),__name(WebGLObjects,"WebGLObjects");const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(array,nBlocks,blockSize){const firstElem=array[0];if(firstElem<=0||firstElem>0)return array;const n=nBlocks*blockSize;let r=arrayCacheF32[n];if(void 0===r&&(r=new Float32Array(n),arrayCacheF32[n]=r),0!==nBlocks){firstElem.toArray(r,0);for(let i=1,offset=0;i!==nBlocks;++i)offset+=blockSize,array[i].toArray(r,offset)}return r}function arraysEqual(a,b){if(a.length!==b.length)return!1;for(let i=0,l=a.length;i<l;i++)if(a[i]!==b[i])return!1;return!0}function copyArray(a,b){for(let i=0,l=b.length;i<l;i++)a[i]=b[i]}function allocTexUnits(textures,n){let r=arrayCacheI32[n];void 0===r&&(r=new Int32Array(n),arrayCacheI32[n]=r);for(let i=0;i!==n;++i)r[i]=textures.allocateTextureUnit();return r}function setValueV1f(gl,v){const cache=this.cache;cache[0]!==v&&(gl.uniform1f(this.addr,v),cache[0]=v)}function setValueV2f(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y)&&(gl.uniform2f(this.addr,v.x,v.y),cache[0]=v.x,cache[1]=v.y);else{if(arraysEqual(cache,v))return;gl.uniform2fv(this.addr,v),copyArray(cache,v)}}function setValueV3f(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z)&&(gl.uniform3f(this.addr,v.x,v.y,v.z),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z);else if(void 0!==v.r)(cache[0]!==v.r||cache[1]!==v.g||cache[2]!==v.b)&&(gl.uniform3f(this.addr,v.r,v.g,v.b),cache[0]=v.r,cache[1]=v.g,cache[2]=v.b);else{if(arraysEqual(cache,v))return;gl.uniform3fv(this.addr,v),copyArray(cache,v)}}function setValueV4f(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z||cache[3]!==v.w)&&(gl.uniform4f(this.addr,v.x,v.y,v.z,v.w),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z,cache[3]=v.w);else{if(arraysEqual(cache,v))return;gl.uniform4fv(this.addr,v),copyArray(cache,v)}}function setValueM2(gl,v){const cache=this.cache,elements=v.elements;if(void 0===elements){if(arraysEqual(cache,v))return;gl.uniformMatrix2fv(this.addr,!1,v),copyArray(cache,v)}else{if(arraysEqual(cache,elements))return;mat2array.set(elements),gl.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(cache,elements)}}function setValueM3(gl,v){const cache=this.cache,elements=v.elements;if(void 0===elements){if(arraysEqual(cache,v))return;gl.uniformMatrix3fv(this.addr,!1,v),copyArray(cache,v)}else{if(arraysEqual(cache,elements))return;mat3array.set(elements),gl.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(cache,elements)}}function setValueM4(gl,v){const cache=this.cache,elements=v.elements;if(void 0===elements){if(arraysEqual(cache,v))return;gl.uniformMatrix4fv(this.addr,!1,v),copyArray(cache,v)}else{if(arraysEqual(cache,elements))return;mat4array.set(elements),gl.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(cache,elements)}}function setValueV1i(gl,v){const cache=this.cache;cache[0]!==v&&(gl.uniform1i(this.addr,v),cache[0]=v)}function setValueV2i(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y)&&(gl.uniform2i(this.addr,v.x,v.y),cache[0]=v.x,cache[1]=v.y);else{if(arraysEqual(cache,v))return;gl.uniform2iv(this.addr,v),copyArray(cache,v)}}function setValueV3i(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z)&&(gl.uniform3i(this.addr,v.x,v.y,v.z),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z);else{if(arraysEqual(cache,v))return;gl.uniform3iv(this.addr,v),copyArray(cache,v)}}function setValueV4i(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z||cache[3]!==v.w)&&(gl.uniform4i(this.addr,v.x,v.y,v.z,v.w),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z,cache[3]=v.w);else{if(arraysEqual(cache,v))return;gl.uniform4iv(this.addr,v),copyArray(cache,v)}}function setValueV1ui(gl,v){const cache=this.cache;cache[0]!==v&&(gl.uniform1ui(this.addr,v),cache[0]=v)}function setValueV2ui(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y)&&(gl.uniform2ui(this.addr,v.x,v.y),cache[0]=v.x,cache[1]=v.y);else{if(arraysEqual(cache,v))return;gl.uniform2uiv(this.addr,v),copyArray(cache,v)}}function setValueV3ui(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z)&&(gl.uniform3ui(this.addr,v.x,v.y,v.z),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z);else{if(arraysEqual(cache,v))return;gl.uniform3uiv(this.addr,v),copyArray(cache,v)}}function setValueV4ui(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z||cache[3]!==v.w)&&(gl.uniform4ui(this.addr,v.x,v.y,v.z,v.w),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z,cache[3]=v.w);else{if(arraysEqual(cache,v))return;gl.uniform4uiv(this.addr,v),copyArray(cache,v)}}function setValueT1(gl,v,textures){const cache=this.cache,unit=textures.allocateTextureUnit();cache[0]!==unit&&(gl.uniform1i(this.addr,unit),cache[0]=unit),textures.setTexture2D(v||emptyTexture,unit)}function setValueT3D1(gl,v,textures){const cache=this.cache,unit=textures.allocateTextureUnit();cache[0]!==unit&&(gl.uniform1i(this.addr,unit),cache[0]=unit),textures.setTexture3D(v||empty3dTexture,unit)}function setValueT6(gl,v,textures){const cache=this.cache,unit=textures.allocateTextureUnit();cache[0]!==unit&&(gl.uniform1i(this.addr,unit),cache[0]=unit),textures.setTextureCube(v||emptyCubeTexture,unit)}function setValueT2DArray1(gl,v,textures){const cache=this.cache,unit=textures.allocateTextureUnit();cache[0]!==unit&&(gl.uniform1i(this.addr,unit),cache[0]=unit),textures.setTexture2DArray(v||emptyArrayTexture,unit)}function getSingularSetter(type){switch(type){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(gl,v){gl.uniform1fv(this.addr,v)}function setValueV2fArray(gl,v){const data=flatten(v,this.size,2);gl.uniform2fv(this.addr,data)}function setValueV3fArray(gl,v){const data=flatten(v,this.size,3);gl.uniform3fv(this.addr,data)}function setValueV4fArray(gl,v){const data=flatten(v,this.size,4);gl.uniform4fv(this.addr,data)}function setValueM2Array(gl,v){const data=flatten(v,this.size,4);gl.uniformMatrix2fv(this.addr,!1,data)}function setValueM3Array(gl,v){const data=flatten(v,this.size,9);gl.uniformMatrix3fv(this.addr,!1,data)}function setValueM4Array(gl,v){const data=flatten(v,this.size,16);gl.uniformMatrix4fv(this.addr,!1,data)}function setValueV1iArray(gl,v){gl.uniform1iv(this.addr,v)}function setValueV2iArray(gl,v){gl.uniform2iv(this.addr,v)}function setValueV3iArray(gl,v){gl.uniform3iv(this.addr,v)}function setValueV4iArray(gl,v){gl.uniform4iv(this.addr,v)}function setValueV1uiArray(gl,v){gl.uniform1uiv(this.addr,v)}function setValueV2uiArray(gl,v){gl.uniform2uiv(this.addr,v)}function setValueV3uiArray(gl,v){gl.uniform3uiv(this.addr,v)}function setValueV4uiArray(gl,v){gl.uniform4uiv(this.addr,v)}function setValueT1Array(gl,v,textures){const cache=this.cache,n=v.length,units=allocTexUnits(textures,n);arraysEqual(cache,units)||(gl.uniform1iv(this.addr,units),copyArray(cache,units));for(let i=0;i!==n;++i)textures.setTexture2D(v[i]||emptyTexture,units[i])}function setValueT3DArray(gl,v,textures){const cache=this.cache,n=v.length,units=allocTexUnits(textures,n);arraysEqual(cache,units)||(gl.uniform1iv(this.addr,units),copyArray(cache,units));for(let i=0;i!==n;++i)textures.setTexture3D(v[i]||empty3dTexture,units[i])}function setValueT6Array(gl,v,textures){const cache=this.cache,n=v.length,units=allocTexUnits(textures,n);arraysEqual(cache,units)||(gl.uniform1iv(this.addr,units),copyArray(cache,units));for(let i=0;i!==n;++i)textures.setTextureCube(v[i]||emptyCubeTexture,units[i])}function setValueT2DArrayArray(gl,v,textures){const cache=this.cache,n=v.length,units=allocTexUnits(textures,n);arraysEqual(cache,units)||(gl.uniform1iv(this.addr,units),copyArray(cache,units));for(let i=0;i!==n;++i)textures.setTexture2DArray(v[i]||emptyArrayTexture,units[i])}function getPureArraySetter(type){switch(type){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}__name(flatten,"flatten"),__name(arraysEqual,"arraysEqual"),__name(copyArray,"copyArray"),__name(allocTexUnits,"allocTexUnits"),__name(setValueV1f,"setValueV1f"),__name(setValueV2f,"setValueV2f"),__name(setValueV3f,"setValueV3f"),__name(setValueV4f,"setValueV4f"),__name(setValueM2,"setValueM2"),__name(setValueM3,"setValueM3"),__name(setValueM4,"setValueM4"),__name(setValueV1i,"setValueV1i"),__name(setValueV2i,"setValueV2i"),__name(setValueV3i,"setValueV3i"),__name(setValueV4i,"setValueV4i"),__name(setValueV1ui,"setValueV1ui"),__name(setValueV2ui,"setValueV2ui"),__name(setValueV3ui,"setValueV3ui"),__name(setValueV4ui,"setValueV4ui"),__name(setValueT1,"setValueT1"),__name(setValueT3D1,"setValueT3D1"),__name(setValueT6,"setValueT6"),__name(setValueT2DArray1,"setValueT2DArray1"),__name(getSingularSetter,"getSingularSetter"),__name(setValueV1fArray,"setValueV1fArray"),__name(setValueV2fArray,"setValueV2fArray"),__name(setValueV3fArray,"setValueV3fArray"),__name(setValueV4fArray,"setValueV4fArray"),__name(setValueM2Array,"setValueM2Array"),__name(setValueM3Array,"setValueM3Array"),__name(setValueM4Array,"setValueM4Array"),__name(setValueV1iArray,"setValueV1iArray"),__name(setValueV2iArray,"setValueV2iArray"),__name(setValueV3iArray,"setValueV3iArray"),__name(setValueV4iArray,"setValueV4iArray"),__name(setValueV1uiArray,"setValueV1uiArray"),__name(setValueV2uiArray,"setValueV2uiArray"),__name(setValueV3uiArray,"setValueV3uiArray"),__name(setValueV4uiArray,"setValueV4uiArray"),__name(setValueT1Array,"setValueT1Array"),__name(setValueT3DArray,"setValueT3DArray"),__name(setValueT6Array,"setValueT6Array"),__name(setValueT2DArrayArray,"setValueT2DArrayArray"),__name(getPureArraySetter,"getPureArraySetter");class SingleUniform{constructor(id2,activeInfo,addr){this.id=id2,this.addr=addr,this.cache=[],this.setValue=getSingularSetter(activeInfo.type)}}__name(SingleUniform,"SingleUniform");class PureArrayUniform{constructor(id2,activeInfo,addr){this.id=id2,this.addr=addr,this.cache=[],this.size=activeInfo.size,this.setValue=getPureArraySetter(activeInfo.type)}}__name(PureArrayUniform,"PureArrayUniform");class StructuredUniform{constructor(id2){this.id=id2,this.seq=[],this.map={}}setValue(gl,value,textures){const seq=this.seq;for(let i=0,n=seq.length;i!==n;++i){const u=seq[i];u.setValue(gl,value[u.id],textures)}}}__name(StructuredUniform,"StructuredUniform");const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(container,uniformObject){container.seq.push(uniformObject),container.map[uniformObject.id]=uniformObject}function parseUniform(activeInfo,addr,container){const path=activeInfo.name,pathLength=path.length;for(RePathPart.lastIndex=0;;){const match=RePathPart.exec(path);let id2=match[1];const subscript=match[3];if("]"===match[2]&&(id2|=0),void 0===subscript||"["===subscript&&RePathPart.lastIndex+2===pathLength){addUniform(container,void 0===subscript?new SingleUniform(id2,activeInfo,addr):new PureArrayUniform(id2,activeInfo,addr));break}{let next=container.map[id2];void 0===next&&(next=new StructuredUniform(id2),addUniform(container,next)),container=next}}}__name(addUniform,"addUniform"),__name(parseUniform,"parseUniform");class WebGLUniforms{constructor(gl,program){this.seq=[],this.map={};const n=gl.getProgramParameter(program,35718);for(let i=0;i<n;++i){const info=gl.getActiveUniform(program,i);parseUniform(info,gl.getUniformLocation(program,info.name),this)}}setValue(gl,name,value,textures){const u=this.map[name];void 0!==u&&u.setValue(gl,value,textures)}setOptional(gl,object,name){const v=object[name];void 0!==v&&this.setValue(gl,name,v)}static upload(gl,seq,values,textures){for(let i=0,n=seq.length;i!==n;++i){const u=seq[i],v=values[u.id];!1!==v.needsUpdate&&u.setValue(gl,v.value,textures)}}static seqWithValue(seq,values){const r=[];for(let i=0,n=seq.length;i!==n;++i){const u=seq[i];u.id in values&&r.push(u)}return r}}function WebGLShader(gl,type,string){const shader=gl.createShader(type);return gl.shaderSource(shader,string),gl.compileShader(shader),shader}__name(WebGLUniforms,"WebGLUniforms"),__name(WebGLShader,"WebGLShader");let programIdCount=0;function handleSource(string,errorLine){const lines=string.split("\n"),lines2=[],from=Math.max(errorLine-6,0),to=Math.min(errorLine+6,lines.length);for(let i=from;i<to;i++){const line=i+1;lines2.push(`${line===errorLine?">":" "} ${line}: ${lines[i]}`)}return lines2.join("\n")}function getEncodingComponents(encoding){switch(encoding){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",encoding),["Linear","( value )"]}}function getShaderErrors(gl,shader,type){const status=gl.getShaderParameter(shader,35713),errors=gl.getShaderInfoLog(shader).trim();if(status&&""===errors)return"";const errorMatches=/ERROR: 0:(\d+)/.exec(errors);if(errorMatches){const errorLine=parseInt(errorMatches[1]);return type.toUpperCase()+"\n\n"+errors+"\n\n"+handleSource(gl.getShaderSource(shader),errorLine)}return errors}function getTexelEncodingFunction(functionName,encoding){const components=getEncodingComponents(encoding);return"vec4 "+functionName+"( vec4 value ) { return LinearTo"+components[0]+components[1]+"; }"}function getToneMappingFunction(functionName,toneMapping){let toneMappingName;switch(toneMapping){case LinearToneMapping:toneMappingName="Linear";break;case ReinhardToneMapping:toneMappingName="Reinhard";break;case CineonToneMapping:toneMappingName="OptimizedCineon";break;case ACESFilmicToneMapping:toneMappingName="ACESFilmic";break;case CustomToneMapping:toneMappingName="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",toneMapping),toneMappingName="Linear"}return"vec3 "+functionName+"( vec3 color ) { return "+toneMappingName+"ToneMapping( color ); }"}function generateExtensions(parameters){return[parameters.extensionDerivatives||parameters.envMapCubeUVHeight||parameters.bumpMap||parameters.tangentSpaceNormalMap||parameters.clearcoatNormalMap||parameters.flatShading||"physical"===parameters.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(parameters.extensionFragDepth||parameters.logarithmicDepthBuffer)&&parameters.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",parameters.extensionDrawBuffers&&parameters.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(parameters.extensionShaderTextureLOD||parameters.envMap||parameters.transmission)&&parameters.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}function generateDefines(defines){const chunks=[];for(const name in defines){const value=defines[name];!1!==value&&chunks.push("#define "+name+" "+value)}return chunks.join("\n")}function fetchAttributeLocations(gl,program){const attributes={},n=gl.getProgramParameter(program,35721);for(let i=0;i<n;i++){const info=gl.getActiveAttrib(program,i),name=info.name;let locationSize=1;35674===info.type&&(locationSize=2),35675===info.type&&(locationSize=3),35676===info.type&&(locationSize=4),attributes[name]={type:info.type,location:gl.getAttribLocation(program,name),locationSize}}return attributes}function filterEmptyLine(string){return""!==string}function replaceLightNums(string,parameters){const numSpotLightCoords=parameters.numSpotLightShadows+parameters.numSpotLightMaps-parameters.numSpotLightShadowsWithMaps;return string.replace(/NUM_DIR_LIGHTS/g,parameters.numDirLights).replace(/NUM_SPOT_LIGHTS/g,parameters.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,parameters.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,numSpotLightCoords).replace(/NUM_RECT_AREA_LIGHTS/g,parameters.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,parameters.numPointLights).replace(/NUM_HEMI_LIGHTS/g,parameters.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,parameters.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,parameters.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,parameters.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,parameters.numPointLightShadows)}function replaceClippingPlaneNums(string,parameters){return string.replace(/NUM_CLIPPING_PLANES/g,parameters.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,parameters.numClippingPlanes-parameters.numClipIntersection)}__name(handleSource,"handleSource"),__name(getEncodingComponents,"getEncodingComponents"),__name(getShaderErrors,"getShaderErrors"),__name(getTexelEncodingFunction,"getTexelEncodingFunction"),__name(getToneMappingFunction,"getToneMappingFunction"),__name(generateExtensions,"generateExtensions"),__name(generateDefines,"generateDefines"),__name(fetchAttributeLocations,"fetchAttributeLocations"),__name(filterEmptyLine,"filterEmptyLine"),__name(replaceLightNums,"replaceLightNums"),__name(replaceClippingPlaneNums,"replaceClippingPlaneNums");const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(string){return string.replace(includePattern,includeReplacer)}function includeReplacer(match,include){const string=ShaderChunk[include];if(void 0===string)throw new Error("Can not resolve #include <"+include+">");return resolveIncludes(string)}__name(resolveIncludes,"resolveIncludes"),__name(includeReplacer,"includeReplacer");const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(string){return string.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(match,start,end,snippet){let string="";for(let i=parseInt(start);i<parseInt(end);i++)string+=snippet.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return string}function generatePrecision(parameters){let precisionstring="precision "+parameters.precision+" float;\nprecision "+parameters.precision+" int;";return"highp"===parameters.precision?precisionstring+="\n#define HIGH_PRECISION":"mediump"===parameters.precision?precisionstring+="\n#define MEDIUM_PRECISION":"lowp"===parameters.precision&&(precisionstring+="\n#define LOW_PRECISION"),precisionstring}function generateShadowMapTypeDefine(parameters){let shadowMapTypeDefine="SHADOWMAP_TYPE_BASIC";return parameters.shadowMapType===PCFShadowMap?shadowMapTypeDefine="SHADOWMAP_TYPE_PCF":parameters.shadowMapType===PCFSoftShadowMap?shadowMapTypeDefine="SHADOWMAP_TYPE_PCF_SOFT":parameters.shadowMapType===VSMShadowMap&&(shadowMapTypeDefine="SHADOWMAP_TYPE_VSM"),shadowMapTypeDefine}function generateEnvMapTypeDefine(parameters){let envMapTypeDefine="ENVMAP_TYPE_CUBE";if(parameters.envMap)switch(parameters.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:envMapTypeDefine="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:envMapTypeDefine="ENVMAP_TYPE_CUBE_UV"}return envMapTypeDefine}function generateEnvMapModeDefine(parameters){let envMapModeDefine="ENVMAP_MODE_REFLECTION";return parameters.envMap&&parameters.envMapMode===CubeRefractionMapping&&(envMapModeDefine="ENVMAP_MODE_REFRACTION"),envMapModeDefine}function generateEnvMapBlendingDefine(parameters){let envMapBlendingDefine="ENVMAP_BLENDING_NONE";if(parameters.envMap)switch(parameters.combine){case MultiplyOperation:envMapBlendingDefine="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:envMapBlendingDefine="ENVMAP_BLENDING_MIX";break;case AddOperation:envMapBlendingDefine="ENVMAP_BLENDING_ADD"}return envMapBlendingDefine}function generateCubeUVSize(parameters){const imageHeight=parameters.envMapCubeUVHeight;if(null===imageHeight)return null;const maxMip=Math.log2(imageHeight)-2,texelHeight=1/imageHeight;return{texelWidth:1/(3*Math.max(Math.pow(2,maxMip),112)),texelHeight,maxMip}}function WebGLProgram(renderer,cacheKey,parameters,bindingStates){const gl=renderer.getContext(),defines=parameters.defines;let vertexShader=parameters.vertexShader,fragmentShader=parameters.fragmentShader;const shadowMapTypeDefine=generateShadowMapTypeDefine(parameters),envMapTypeDefine=generateEnvMapTypeDefine(parameters),envMapModeDefine=generateEnvMapModeDefine(parameters),envMapBlendingDefine=generateEnvMapBlendingDefine(parameters),envMapCubeUVSize=generateCubeUVSize(parameters),customExtensions=parameters.isWebGL2?"":generateExtensions(parameters),customDefines=generateDefines(defines),program=gl.createProgram();let prefixVertex,prefixFragment,versionString=parameters.glslVersion?"#version "+parameters.glslVersion+"\n":"";parameters.isRawShaderMaterial?(prefixVertex=[customDefines].filter(filterEmptyLine).join("\n"),prefixVertex.length>0&&(prefixVertex+="\n"),prefixFragment=[customExtensions,customDefines].filter(filterEmptyLine).join("\n"),prefixFragment.length>0&&(prefixFragment+="\n")):(prefixVertex=[generatePrecision(parameters),"#define SHADER_NAME "+parameters.shaderName,customDefines,parameters.instancing?"#define USE_INSTANCING":"",parameters.instancingColor?"#define USE_INSTANCING_COLOR":"",parameters.supportsVertexTextures?"#define VERTEX_TEXTURES":"",parameters.useFog&&parameters.fog?"#define USE_FOG":"",parameters.useFog&&parameters.fogExp2?"#define FOG_EXP2":"",parameters.map?"#define USE_MAP":"",parameters.envMap?"#define USE_ENVMAP":"",parameters.envMap?"#define "+envMapModeDefine:"",parameters.lightMap?"#define USE_LIGHTMAP":"",parameters.aoMap?"#define USE_AOMAP":"",parameters.emissiveMap?"#define USE_EMISSIVEMAP":"",parameters.bumpMap?"#define USE_BUMPMAP":"",parameters.normalMap?"#define USE_NORMALMAP":"",parameters.normalMap&&parameters.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",parameters.normalMap&&parameters.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",parameters.clearcoatMap?"#define USE_CLEARCOATMAP":"",parameters.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",parameters.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",parameters.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",parameters.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",parameters.displacementMap&&parameters.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",parameters.specularMap?"#define USE_SPECULARMAP":"",parameters.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",parameters.specularColorMap?"#define USE_SPECULARCOLORMAP":"",parameters.roughnessMap?"#define USE_ROUGHNESSMAP":"",parameters.metalnessMap?"#define USE_METALNESSMAP":"",parameters.alphaMap?"#define USE_ALPHAMAP":"",parameters.transmission?"#define USE_TRANSMISSION":"",parameters.transmissionMap?"#define USE_TRANSMISSIONMAP":"",parameters.thicknessMap?"#define USE_THICKNESSMAP":"",parameters.sheenColorMap?"#define USE_SHEENCOLORMAP":"",parameters.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",parameters.vertexTangents?"#define USE_TANGENT":"",parameters.vertexColors?"#define USE_COLOR":"",parameters.vertexAlphas?"#define USE_COLOR_ALPHA":"",parameters.vertexUvs?"#define USE_UV":"",parameters.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",parameters.flatShading?"#define FLAT_SHADED":"",parameters.skinning?"#define USE_SKINNING":"",parameters.morphTargets?"#define USE_MORPHTARGETS":"",parameters.morphNormals&&!1===parameters.flatShading?"#define USE_MORPHNORMALS":"",parameters.morphColors&&parameters.isWebGL2?"#define USE_MORPHCOLORS":"",parameters.morphTargetsCount>0&&parameters.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",parameters.morphTargetsCount>0&&parameters.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+parameters.morphTextureStride:"",parameters.morphTargetsCount>0&&parameters.isWebGL2?"#define MORPHTARGETS_COUNT "+parameters.morphTargetsCount:"",parameters.doubleSided?"#define DOUBLE_SIDED":"",parameters.flipSided?"#define FLIP_SIDED":"",parameters.shadowMapEnabled?"#define USE_SHADOWMAP":"",parameters.shadowMapEnabled?"#define "+shadowMapTypeDefine:"",parameters.sizeAttenuation?"#define USE_SIZEATTENUATION":"",parameters.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",parameters.logarithmicDepthBuffer&&parameters.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),prefixFragment=[customExtensions,generatePrecision(parameters),"#define SHADER_NAME "+parameters.shaderName,customDefines,parameters.useFog&&parameters.fog?"#define USE_FOG":"",parameters.useFog&&parameters.fogExp2?"#define FOG_EXP2":"",parameters.map?"#define USE_MAP":"",parameters.matcap?"#define USE_MATCAP":"",parameters.envMap?"#define USE_ENVMAP":"",parameters.envMap?"#define "+envMapTypeDefine:"",parameters.envMap?"#define "+envMapModeDefine:"",parameters.envMap?"#define "+envMapBlendingDefine:"",envMapCubeUVSize?"#define CUBEUV_TEXEL_WIDTH "+envMapCubeUVSize.texelWidth:"",envMapCubeUVSize?"#define CUBEUV_TEXEL_HEIGHT "+envMapCubeUVSize.texelHeight:"",envMapCubeUVSize?"#define CUBEUV_MAX_MIP "+envMapCubeUVSize.maxMip+".0":"",parameters.lightMap?"#define USE_LIGHTMAP":"",parameters.aoMap?"#define USE_AOMAP":"",parameters.emissiveMap?"#define USE_EMISSIVEMAP":"",parameters.bumpMap?"#define USE_BUMPMAP":"",parameters.normalMap?"#define USE_NORMALMAP":"",parameters.normalMap&&parameters.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",parameters.normalMap&&parameters.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",parameters.clearcoat?"#define USE_CLEARCOAT":"",parameters.clearcoatMap?"#define USE_CLEARCOATMAP":"",parameters.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",parameters.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",parameters.iridescence?"#define USE_IRIDESCENCE":"",parameters.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",parameters.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",parameters.specularMap?"#define USE_SPECULARMAP":"",parameters.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",parameters.specularColorMap?"#define USE_SPECULARCOLORMAP":"",parameters.roughnessMap?"#define USE_ROUGHNESSMAP":"",parameters.metalnessMap?"#define USE_METALNESSMAP":"",parameters.alphaMap?"#define USE_ALPHAMAP":"",parameters.alphaTest?"#define USE_ALPHATEST":"",parameters.sheen?"#define USE_SHEEN":"",parameters.sheenColorMap?"#define USE_SHEENCOLORMAP":"",parameters.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",parameters.transmission?"#define USE_TRANSMISSION":"",parameters.transmissionMap?"#define USE_TRANSMISSIONMAP":"",parameters.thicknessMap?"#define USE_THICKNESSMAP":"",parameters.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",parameters.vertexTangents?"#define USE_TANGENT":"",parameters.vertexColors||parameters.instancingColor?"#define USE_COLOR":"",parameters.vertexAlphas?"#define USE_COLOR_ALPHA":"",parameters.vertexUvs?"#define USE_UV":"",parameters.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",parameters.gradientMap?"#define USE_GRADIENTMAP":"",parameters.flatShading?"#define FLAT_SHADED":"",parameters.doubleSided?"#define DOUBLE_SIDED":"",parameters.flipSided?"#define FLIP_SIDED":"",parameters.shadowMapEnabled?"#define USE_SHADOWMAP":"",parameters.shadowMapEnabled?"#define "+shadowMapTypeDefine:"",parameters.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",parameters.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",parameters.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",parameters.logarithmicDepthBuffer&&parameters.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",parameters.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",parameters.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",parameters.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",parameters.toneMapping):"",parameters.dithering?"#define DITHERING":"",parameters.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",parameters.outputEncoding),parameters.useDepthPacking?"#define DEPTH_PACKING "+parameters.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),vertexShader=resolveIncludes(vertexShader),vertexShader=replaceLightNums(vertexShader,parameters),vertexShader=replaceClippingPlaneNums(vertexShader,parameters),fragmentShader=resolveIncludes(fragmentShader),fragmentShader=replaceLightNums(fragmentShader,parameters),fragmentShader=replaceClippingPlaneNums(fragmentShader,parameters),vertexShader=unrollLoops(vertexShader),fragmentShader=unrollLoops(fragmentShader),parameters.isWebGL2&&!0!==parameters.isRawShaderMaterial&&(versionString="#version 300 es\n",prefixVertex=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+prefixVertex,prefixFragment=["#define varying in",parameters.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",parameters.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+prefixFragment);const fragmentGlsl=versionString+prefixFragment+fragmentShader,glVertexShader=WebGLShader(gl,35633,versionString+prefixVertex+vertexShader),glFragmentShader=WebGLShader(gl,35632,fragmentGlsl);if(gl.attachShader(program,glVertexShader),gl.attachShader(program,glFragmentShader),void 0!==parameters.index0AttributeName?gl.bindAttribLocation(program,0,parameters.index0AttributeName):!0===parameters.morphTargets&&gl.bindAttribLocation(program,0,"position"),gl.linkProgram(program),renderer.debug.checkShaderErrors){const programLog=gl.getProgramInfoLog(program).trim(),vertexLog=gl.getShaderInfoLog(glVertexShader).trim(),fragmentLog=gl.getShaderInfoLog(glFragmentShader).trim();let runnable=!0,haveDiagnostics=!0;if(!1===gl.getProgramParameter(program,35714)){runnable=!1;const vertexErrors=getShaderErrors(gl,glVertexShader,"vertex"),fragmentErrors=getShaderErrors(gl,glFragmentShader,"fragment");console.error("THREE.WebGLProgram: Shader Error "+gl.getError()+" - VALIDATE_STATUS "+gl.getProgramParameter(program,35715)+"\n\nProgram Info Log: "+programLog+"\n"+vertexErrors+"\n"+fragmentErrors)}else""!==programLog?console.warn("THREE.WebGLProgram: Program Info Log:",programLog):(""===vertexLog||""===fragmentLog)&&(haveDiagnostics=!1);haveDiagnostics&&(this.diagnostics={runnable,programLog,vertexShader:{log:vertexLog,prefix:prefixVertex},fragmentShader:{log:fragmentLog,prefix:prefixFragment}})}let cachedUniforms,cachedAttributes;return gl.deleteShader(glVertexShader),gl.deleteShader(glFragmentShader),this.getUniforms=function(){return void 0===cachedUniforms&&(cachedUniforms=new WebGLUniforms(gl,program)),cachedUniforms},this.getAttributes=function(){return void 0===cachedAttributes&&(cachedAttributes=fetchAttributeLocations(gl,program)),cachedAttributes},this.destroy=function(){bindingStates.releaseStatesOfProgram(this),gl.deleteProgram(program),this.program=void 0},this.name=parameters.shaderName,this.id=programIdCount++,this.cacheKey=cacheKey,this.usedTimes=1,this.program=program,this.vertexShader=glVertexShader,this.fragmentShader=glFragmentShader,this}__name(unrollLoops,"unrollLoops"),__name(loopReplacer,"loopReplacer"),__name(generatePrecision,"generatePrecision"),__name(generateShadowMapTypeDefine,"generateShadowMapTypeDefine"),__name(generateEnvMapTypeDefine,"generateEnvMapTypeDefine"),__name(generateEnvMapModeDefine,"generateEnvMapModeDefine"),__name(generateEnvMapBlendingDefine,"generateEnvMapBlendingDefine"),__name(generateCubeUVSize,"generateCubeUVSize"),__name(WebGLProgram,"WebGLProgram");let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(material){const fragmentShader=material.fragmentShader,vertexShaderStage=this._getShaderStage(material.vertexShader),fragmentShaderStage=this._getShaderStage(fragmentShader),materialShaders=this._getShaderCacheForMaterial(material);return!1===materialShaders.has(vertexShaderStage)&&(materialShaders.add(vertexShaderStage),vertexShaderStage.usedTimes++),!1===materialShaders.has(fragmentShaderStage)&&(materialShaders.add(fragmentShaderStage),fragmentShaderStage.usedTimes++),this}remove(material){const materialShaders=this.materialCache.get(material);for(const shaderStage of materialShaders)shaderStage.usedTimes--,0===shaderStage.usedTimes&&this.shaderCache.delete(shaderStage.code);return this.materialCache.delete(material),this}getVertexShaderID(material){return this._getShaderStage(material.vertexShader).id}getFragmentShaderID(material){return this._getShaderStage(material.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(material){const cache=this.materialCache;let set=cache.get(material);return void 0===set&&(set=new Set,cache.set(material,set)),set}_getShaderStage(code){const cache=this.shaderCache;let stage=cache.get(code);return void 0===stage&&(stage=new WebGLShaderStage(code),cache.set(code,stage)),stage}}__name(WebGLShaderCache,"WebGLShaderCache");class WebGLShaderStage{constructor(code){this.id=_id++,this.code=code,this.usedTimes=0}}function WebGLPrograms(renderer,cubemaps,cubeuvmaps,extensions,capabilities,bindingStates,clipping){const _programLayers=new Layers,_customShaders=new WebGLShaderCache,programs=[],isWebGL2=capabilities.isWebGL2,logarithmicDepthBuffer=capabilities.logarithmicDepthBuffer,vertexTextures=capabilities.vertexTextures;let precision=capabilities.precision;const shaderIDs={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function getParameters(material,lights,shadows,scene,object){const fog=scene.fog,geometry=object.geometry,envMap=(material.isMeshStandardMaterial?cubeuvmaps:cubemaps).get(material.envMap||(material.isMeshStandardMaterial?scene.environment:null)),envMapCubeUVHeight=envMap&&envMap.mapping===CubeUVReflectionMapping?envMap.image.height:null,shaderID=shaderIDs[material.type];null!==material.precision&&(precision=capabilities.getMaxPrecision(material.precision),precision!==material.precision&&console.warn("THREE.WebGLProgram.getParameters:",material.precision,"not supported, using",precision,"instead."));const morphAttribute=geometry.morphAttributes.position||geometry.morphAttributes.normal||geometry.morphAttributes.color,morphTargetsCount=void 0!==morphAttribute?morphAttribute.length:0;let vertexShader,fragmentShader,customVertexShaderID,customFragmentShaderID,morphTextureStride=0;if(void 0!==geometry.morphAttributes.position&&(morphTextureStride=1),void 0!==geometry.morphAttributes.normal&&(morphTextureStride=2),void 0!==geometry.morphAttributes.color&&(morphTextureStride=3),shaderID){const shader=ShaderLib2[shaderID];vertexShader=shader.vertexShader,fragmentShader=shader.fragmentShader}else vertexShader=material.vertexShader,fragmentShader=material.fragmentShader,_customShaders.update(material),customVertexShaderID=_customShaders.getVertexShaderID(material),customFragmentShaderID=_customShaders.getFragmentShaderID(material);const currentRenderTarget=renderer.getRenderTarget(),useClearcoat=material.clearcoat>0,useIridescence=material.iridescence>0;return{isWebGL2,shaderID,shaderName:material.type,vertexShader,fragmentShader,defines:material.defines,customVertexShaderID,customFragmentShaderID,isRawShaderMaterial:!0===material.isRawShaderMaterial,glslVersion:material.glslVersion,precision,instancing:!0===object.isInstancedMesh,instancingColor:!0===object.isInstancedMesh&&null!==object.instanceColor,supportsVertexTextures:vertexTextures,outputEncoding:null===currentRenderTarget?renderer.outputEncoding:!0===currentRenderTarget.isXRRenderTarget?currentRenderTarget.texture.encoding:LinearEncoding,map:!!material.map,matcap:!!material.matcap,envMap:!!envMap,envMapMode:envMap&&envMap.mapping,envMapCubeUVHeight,lightMap:!!material.lightMap,aoMap:!!material.aoMap,emissiveMap:!!material.emissiveMap,bumpMap:!!material.bumpMap,normalMap:!!material.normalMap,objectSpaceNormalMap:material.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:material.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!material.map&&!0===material.map.isVideoTexture&&material.map.encoding===sRGBEncoding,clearcoat:useClearcoat,clearcoatMap:useClearcoat&&!!material.clearcoatMap,clearcoatRoughnessMap:useClearcoat&&!!material.clearcoatRoughnessMap,clearcoatNormalMap:useClearcoat&&!!material.clearcoatNormalMap,iridescence:useIridescence,iridescenceMap:useIridescence&&!!material.iridescenceMap,iridescenceThicknessMap:useIridescence&&!!material.iridescenceThicknessMap,displacementMap:!!material.displacementMap,roughnessMap:!!material.roughnessMap,metalnessMap:!!material.metalnessMap,specularMap:!!material.specularMap,specularIntensityMap:!!material.specularIntensityMap,specularColorMap:!!material.specularColorMap,opaque:!1===material.transparent&&material.blending===NormalBlending,alphaMap:!!material.alphaMap,alphaTest:material.alphaTest>0,gradientMap:!!material.gradientMap,sheen:material.sheen>0,sheenColorMap:!!material.sheenColorMap,sheenRoughnessMap:!!material.sheenRoughnessMap,transmission:material.transmission>0,transmissionMap:!!material.transmissionMap,thicknessMap:!!material.thicknessMap,combine:material.combine,vertexTangents:!!material.normalMap&&!!geometry.attributes.tangent,vertexColors:material.vertexColors,vertexAlphas:!0===material.vertexColors&&!!geometry.attributes.color&&4===geometry.attributes.color.itemSize,vertexUvs:!!(material.map||material.bumpMap||material.normalMap||material.specularMap||material.alphaMap||material.emissiveMap||material.roughnessMap||material.metalnessMap||material.clearcoatMap||material.clearcoatRoughnessMap||material.clearcoatNormalMap||material.iridescenceMap||material.iridescenceThicknessMap||material.displacementMap||material.transmissionMap||material.thicknessMap||material.specularIntensityMap||material.specularColorMap||material.sheenColorMap||material.sheenRoughnessMap),uvsVertexOnly:!(material.map||material.bumpMap||material.normalMap||material.specularMap||material.alphaMap||material.emissiveMap||material.roughnessMap||material.metalnessMap||material.clearcoatNormalMap||material.iridescenceMap||material.iridescenceThicknessMap||material.transmission>0||material.transmissionMap||material.thicknessMap||material.specularIntensityMap||material.specularColorMap||material.sheen>0||material.sheenColorMap||material.sheenRoughnessMap||!material.displacementMap),fog:!!fog,useFog:!0===material.fog,fogExp2:fog&&fog.isFogExp2,flatShading:!!material.flatShading,sizeAttenuation:material.sizeAttenuation,logarithmicDepthBuffer,skinning:!0===object.isSkinnedMesh,morphTargets:void 0!==geometry.morphAttributes.position,morphNormals:void 0!==geometry.morphAttributes.normal,morphColors:void 0!==geometry.morphAttributes.color,morphTargetsCount,morphTextureStride,numDirLights:lights.directional.length,numPointLights:lights.point.length,numSpotLights:lights.spot.length,numSpotLightMaps:lights.spotLightMap.length,numRectAreaLights:lights.rectArea.length,numHemiLights:lights.hemi.length,numDirLightShadows:lights.directionalShadowMap.length,numPointLightShadows:lights.pointShadowMap.length,numSpotLightShadows:lights.spotShadowMap.length,numSpotLightShadowsWithMaps:lights.numSpotLightShadowsWithMaps,numClippingPlanes:clipping.numPlanes,numClipIntersection:clipping.numIntersection,dithering:material.dithering,shadowMapEnabled:renderer.shadowMap.enabled&&shadows.length>0,shadowMapType:renderer.shadowMap.type,toneMapping:material.toneMapped?renderer.toneMapping:NoToneMapping,physicallyCorrectLights:renderer.physicallyCorrectLights,premultipliedAlpha:material.premultipliedAlpha,doubleSided:material.side===DoubleSide,flipSided:material.side===BackSide,useDepthPacking:!!material.depthPacking,depthPacking:material.depthPacking||0,index0AttributeName:material.index0AttributeName,extensionDerivatives:material.extensions&&material.extensions.derivatives,extensionFragDepth:material.extensions&&material.extensions.fragDepth,extensionDrawBuffers:material.extensions&&material.extensions.drawBuffers,extensionShaderTextureLOD:material.extensions&&material.extensions.shaderTextureLOD,rendererExtensionFragDepth:isWebGL2||extensions.has("EXT_frag_depth"),rendererExtensionDrawBuffers:isWebGL2||extensions.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:isWebGL2||extensions.has("EXT_shader_texture_lod"),customProgramCacheKey:material.customProgramCacheKey()}}function getProgramCacheKey(parameters){const array=[];if(parameters.shaderID?array.push(parameters.shaderID):(array.push(parameters.customVertexShaderID),array.push(parameters.customFragmentShaderID)),void 0!==parameters.defines)for(const name in parameters.defines)array.push(name),array.push(parameters.defines[name]);return!1===parameters.isRawShaderMaterial&&(getProgramCacheKeyParameters(array,parameters),getProgramCacheKeyBooleans(array,parameters),array.push(renderer.outputEncoding)),array.push(parameters.customProgramCacheKey),array.join()}function getProgramCacheKeyParameters(array,parameters){array.push(parameters.precision),array.push(parameters.outputEncoding),array.push(parameters.envMapMode),array.push(parameters.envMapCubeUVHeight),array.push(parameters.combine),array.push(parameters.vertexUvs),array.push(parameters.fogExp2),array.push(parameters.sizeAttenuation),array.push(parameters.morphTargetsCount),array.push(parameters.morphAttributeCount),array.push(parameters.numDirLights),array.push(parameters.numPointLights),array.push(parameters.numSpotLights),array.push(parameters.numSpotLightMaps),array.push(parameters.numHemiLights),array.push(parameters.numRectAreaLights),array.push(parameters.numDirLightShadows),array.push(parameters.numPointLightShadows),array.push(parameters.numSpotLightShadows),array.push(parameters.numSpotLightShadowsWithMaps),array.push(parameters.shadowMapType),array.push(parameters.toneMapping),array.push(parameters.numClippingPlanes),array.push(parameters.numClipIntersection),array.push(parameters.depthPacking)}function getProgramCacheKeyBooleans(array,parameters){_programLayers.disableAll(),parameters.isWebGL2&&_programLayers.enable(0),parameters.supportsVertexTextures&&_programLayers.enable(1),parameters.instancing&&_programLayers.enable(2),parameters.instancingColor&&_programLayers.enable(3),parameters.map&&_programLayers.enable(4),parameters.matcap&&_programLayers.enable(5),parameters.envMap&&_programLayers.enable(6),parameters.lightMap&&_programLayers.enable(7),parameters.aoMap&&_programLayers.enable(8),parameters.emissiveMap&&_programLayers.enable(9),parameters.bumpMap&&_programLayers.enable(10),parameters.normalMap&&_programLayers.enable(11),parameters.objectSpaceNormalMap&&_programLayers.enable(12),parameters.tangentSpaceNormalMap&&_programLayers.enable(13),parameters.clearcoat&&_programLayers.enable(14),parameters.clearcoatMap&&_programLayers.enable(15),parameters.clearcoatRoughnessMap&&_programLayers.enable(16),parameters.clearcoatNormalMap&&_programLayers.enable(17),parameters.iridescence&&_programLayers.enable(18),parameters.iridescenceMap&&_programLayers.enable(19),parameters.iridescenceThicknessMap&&_programLayers.enable(20),parameters.displacementMap&&_programLayers.enable(21),parameters.specularMap&&_programLayers.enable(22),parameters.roughnessMap&&_programLayers.enable(23),parameters.metalnessMap&&_programLayers.enable(24),parameters.gradientMap&&_programLayers.enable(25),parameters.alphaMap&&_programLayers.enable(26),parameters.alphaTest&&_programLayers.enable(27),parameters.vertexColors&&_programLayers.enable(28),parameters.vertexAlphas&&_programLayers.enable(29),parameters.vertexUvs&&_programLayers.enable(30),parameters.vertexTangents&&_programLayers.enable(31),parameters.uvsVertexOnly&&_programLayers.enable(32),array.push(_programLayers.mask),_programLayers.disableAll(),parameters.fog&&_programLayers.enable(0),parameters.useFog&&_programLayers.enable(1),parameters.flatShading&&_programLayers.enable(2),parameters.logarithmicDepthBuffer&&_programLayers.enable(3),parameters.skinning&&_programLayers.enable(4),parameters.morphTargets&&_programLayers.enable(5),parameters.morphNormals&&_programLayers.enable(6),parameters.morphColors&&_programLayers.enable(7),parameters.premultipliedAlpha&&_programLayers.enable(8),parameters.shadowMapEnabled&&_programLayers.enable(9),parameters.physicallyCorrectLights&&_programLayers.enable(10),parameters.doubleSided&&_programLayers.enable(11),parameters.flipSided&&_programLayers.enable(12),parameters.useDepthPacking&&_programLayers.enable(13),parameters.dithering&&_programLayers.enable(14),parameters.specularIntensityMap&&_programLayers.enable(15),parameters.specularColorMap&&_programLayers.enable(16),parameters.transmission&&_programLayers.enable(17),parameters.transmissionMap&&_programLayers.enable(18),parameters.thicknessMap&&_programLayers.enable(19),parameters.sheen&&_programLayers.enable(20),parameters.sheenColorMap&&_programLayers.enable(21),parameters.sheenRoughnessMap&&_programLayers.enable(22),parameters.decodeVideoTexture&&_programLayers.enable(23),parameters.opaque&&_programLayers.enable(24),array.push(_programLayers.mask)}function getUniforms(material){const shaderID=shaderIDs[material.type];let uniforms;return uniforms=shaderID?UniformsUtils.clone(ShaderLib2[shaderID].uniforms):material.uniforms,uniforms}function acquireProgram(parameters,cacheKey){let program;for(let p=0,pl=programs.length;p<pl;p++){const preexistingProgram=programs[p];if(preexistingProgram.cacheKey===cacheKey){program=preexistingProgram,++program.usedTimes;break}}return void 0===program&&(program=new WebGLProgram(renderer,cacheKey,parameters,bindingStates),programs.push(program)),program}function releaseProgram(program){if(0==--program.usedTimes){const i=programs.indexOf(program);programs[i]=programs[programs.length-1],programs.pop(),program.destroy()}}function releaseShaderCache(material){_customShaders.remove(material)}function dispose(){_customShaders.dispose()}return __name(getParameters,"getParameters"),__name(getProgramCacheKey,"getProgramCacheKey"),__name(getProgramCacheKeyParameters,"getProgramCacheKeyParameters"),__name(getProgramCacheKeyBooleans,"getProgramCacheKeyBooleans"),__name(getUniforms,"getUniforms"),__name(acquireProgram,"acquireProgram"),__name(releaseProgram,"releaseProgram"),__name(releaseShaderCache,"releaseShaderCache"),__name(dispose,"dispose"),{getParameters,getProgramCacheKey,getUniforms,acquireProgram,releaseProgram,releaseShaderCache,programs,dispose}}function WebGLProperties(){let properties=new WeakMap;function get(object){let map=properties.get(object);return void 0===map&&(map={},properties.set(object,map)),map}function remove(object){properties.delete(object)}function update(object,key,value){properties.get(object)[key]=value}function dispose(){properties=new WeakMap}return __name(get,"get"),__name(remove,"remove"),__name(update,"update"),__name(dispose,"dispose"),{get,remove,update,dispose}}function painterSortStable(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function reversePainterSortStable(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function WebGLRenderList(){const renderItems=[];let renderItemsIndex=0;const opaque=[],transmissive=[],transparent=[];function init(){renderItemsIndex=0,opaque.length=0,transmissive.length=0,transparent.length=0}function getNextRenderItem(object,geometry,material,groupOrder,z,group){let renderItem=renderItems[renderItemsIndex];return void 0===renderItem?(renderItem={id:object.id,object,geometry,material,groupOrder,renderOrder:object.renderOrder,z,group},renderItems[renderItemsIndex]=renderItem):(renderItem.id=object.id,renderItem.object=object,renderItem.geometry=geometry,renderItem.material=material,renderItem.groupOrder=groupOrder,renderItem.renderOrder=object.renderOrder,renderItem.z=z,renderItem.group=group),renderItemsIndex++,renderItem}function push(object,geometry,material,groupOrder,z,group){const renderItem=getNextRenderItem(object,geometry,material,groupOrder,z,group);material.transmission>0?transmissive.push(renderItem):!0===material.transparent?transparent.push(renderItem):opaque.push(renderItem)}function unshift(object,geometry,material,groupOrder,z,group){const renderItem=getNextRenderItem(object,geometry,material,groupOrder,z,group);material.transmission>0?transmissive.unshift(renderItem):!0===material.transparent?transparent.unshift(renderItem):opaque.unshift(renderItem)}function sort(customOpaqueSort,customTransparentSort){opaque.length>1&&opaque.sort(customOpaqueSort||painterSortStable),transmissive.length>1&&transmissive.sort(customTransparentSort||reversePainterSortStable),transparent.length>1&&transparent.sort(customTransparentSort||reversePainterSortStable)}function finish(){for(let i=renderItemsIndex,il=renderItems.length;i<il;i++){const renderItem=renderItems[i];if(null===renderItem.id)break;renderItem.id=null,renderItem.object=null,renderItem.geometry=null,renderItem.material=null,renderItem.group=null}}return __name(init,"init"),__name(getNextRenderItem,"getNextRenderItem"),__name(push,"push"),__name(unshift,"unshift"),__name(sort,"sort"),__name(finish,"finish"),{opaque,transmissive,transparent,init,push,unshift,finish,sort}}function WebGLRenderLists(){let lists=new WeakMap;function get(scene,renderCallDepth){const listArray=lists.get(scene);let list;return void 0===listArray?(list=new WebGLRenderList,lists.set(scene,[list])):renderCallDepth>=listArray.length?(list=new WebGLRenderList,listArray.push(list)):list=listArray[renderCallDepth],list}function dispose(){lists=new WeakMap}return __name(get,"get"),__name(dispose,"dispose"),{get,dispose}}function UniformsCache(){const lights={};return{get:function(light){if(void 0!==lights[light.id])return lights[light.id];let uniforms;switch(light.type){case"DirectionalLight":uniforms={direction:new Vector32,color:new Color};break;case"SpotLight":uniforms={position:new Vector32,direction:new Vector32,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":uniforms={position:new Vector32,color:new Color,distance:0,decay:0};break;case"HemisphereLight":uniforms={direction:new Vector32,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":uniforms={color:new Color,position:new Vector32,halfWidth:new Vector32,halfHeight:new Vector32}}return lights[light.id]=uniforms,uniforms}}}function ShadowUniformsCache(){const lights={};return{get:function(light){if(void 0!==lights[light.id])return lights[light.id];let uniforms;switch(light.type){case"DirectionalLight":case"SpotLight":uniforms={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector22};break;case"PointLight":uniforms={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector22,shadowCameraNear:1,shadowCameraFar:1e3}}return lights[light.id]=uniforms,uniforms}}}__name(WebGLShaderStage,"WebGLShaderStage"),__name(WebGLPrograms,"WebGLPrograms"),__name(WebGLProperties,"WebGLProperties"),__name(painterSortStable,"painterSortStable"),__name(reversePainterSortStable,"reversePainterSortStable"),__name(WebGLRenderList,"WebGLRenderList"),__name(WebGLRenderLists,"WebGLRenderLists"),__name(UniformsCache,"UniformsCache"),__name(ShadowUniformsCache,"ShadowUniformsCache");let nextVersion=0;function shadowCastingAndTexturingLightsFirst(lightA,lightB){return(lightB.castShadow?2:0)-(lightA.castShadow?2:0)+(lightB.map?1:0)-(lightA.map?1:0)}function WebGLLights(extensions,capabilities){const cache=new UniformsCache,shadowCache=ShadowUniformsCache(),state={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let i=0;i<9;i++)state.probe.push(new Vector32);const vector3=new Vector32,matrix4=new Matrix42,matrix42=new Matrix42;function setup(lights,physicallyCorrectLights){let r=0,g=0,b=0;for(let i=0;i<9;i++)state.probe[i].set(0,0,0);let directionalLength=0,pointLength=0,spotLength=0,rectAreaLength=0,hemiLength=0,numDirectionalShadows=0,numPointShadows=0,numSpotShadows=0,numSpotMaps=0,numSpotShadowsWithMaps=0;lights.sort(shadowCastingAndTexturingLightsFirst);const scaleFactor=!0!==physicallyCorrectLights?Math.PI:1;for(let i=0,l=lights.length;i<l;i++){const light=lights[i],color=light.color,intensity=light.intensity,distance=light.distance,shadowMap=light.shadow&&light.shadow.map?light.shadow.map.texture:null;if(light.isAmbientLight)r+=color.r*intensity*scaleFactor,g+=color.g*intensity*scaleFactor,b+=color.b*intensity*scaleFactor;else if(light.isLightProbe)for(let j=0;j<9;j++)state.probe[j].addScaledVector(light.sh.coefficients[j],intensity);else if(light.isDirectionalLight){const uniforms=cache.get(light);if(uniforms.color.copy(light.color).multiplyScalar(light.intensity*scaleFactor),light.castShadow){const shadow=light.shadow,shadowUniforms=shadowCache.get(light);shadowUniforms.shadowBias=shadow.bias,shadowUniforms.shadowNormalBias=shadow.normalBias,shadowUniforms.shadowRadius=shadow.radius,shadowUniforms.shadowMapSize=shadow.mapSize,state.directionalShadow[directionalLength]=shadowUniforms,state.directionalShadowMap[directionalLength]=shadowMap,state.directionalShadowMatrix[directionalLength]=light.shadow.matrix,numDirectionalShadows++}state.directional[directionalLength]=uniforms,directionalLength++}else if(light.isSpotLight){const uniforms=cache.get(light);uniforms.position.setFromMatrixPosition(light.matrixWorld),uniforms.color.copy(color).multiplyScalar(intensity*scaleFactor),uniforms.distance=distance,uniforms.coneCos=Math.cos(light.angle),uniforms.penumbraCos=Math.cos(light.angle*(1-light.penumbra)),uniforms.decay=light.decay,state.spot[spotLength]=uniforms;const shadow=light.shadow;if(light.map&&(state.spotLightMap[numSpotMaps]=light.map,numSpotMaps++,shadow.updateMatrices(light),light.castShadow&&numSpotShadowsWithMaps++),state.spotLightMatrix[spotLength]=shadow.matrix,light.castShadow){const shadowUniforms=shadowCache.get(light);shadowUniforms.shadowBias=shadow.bias,shadowUniforms.shadowNormalBias=shadow.normalBias,shadowUniforms.shadowRadius=shadow.radius,shadowUniforms.shadowMapSize=shadow.mapSize,state.spotShadow[spotLength]=shadowUniforms,state.spotShadowMap[spotLength]=shadowMap,numSpotShadows++}spotLength++}else if(light.isRectAreaLight){const uniforms=cache.get(light);uniforms.color.copy(color).multiplyScalar(intensity),uniforms.halfWidth.set(.5*light.width,0,0),uniforms.halfHeight.set(0,.5*light.height,0),state.rectArea[rectAreaLength]=uniforms,rectAreaLength++}else if(light.isPointLight){const uniforms=cache.get(light);if(uniforms.color.copy(light.color).multiplyScalar(light.intensity*scaleFactor),uniforms.distance=light.distance,uniforms.decay=light.decay,light.castShadow){const shadow=light.shadow,shadowUniforms=shadowCache.get(light);shadowUniforms.shadowBias=shadow.bias,shadowUniforms.shadowNormalBias=shadow.normalBias,shadowUniforms.shadowRadius=shadow.radius,shadowUniforms.shadowMapSize=shadow.mapSize,shadowUniforms.shadowCameraNear=shadow.camera.near,shadowUniforms.shadowCameraFar=shadow.camera.far,state.pointShadow[pointLength]=shadowUniforms,state.pointShadowMap[pointLength]=shadowMap,state.pointShadowMatrix[pointLength]=light.shadow.matrix,numPointShadows++}state.point[pointLength]=uniforms,pointLength++}else if(light.isHemisphereLight){const uniforms=cache.get(light);uniforms.skyColor.copy(light.color).multiplyScalar(intensity*scaleFactor),uniforms.groundColor.copy(light.groundColor).multiplyScalar(intensity*scaleFactor),state.hemi[hemiLength]=uniforms,hemiLength++}}rectAreaLength>0&&(capabilities.isWebGL2||!0===extensions.has("OES_texture_float_linear")?(state.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,state.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):!0===extensions.has("OES_texture_half_float_linear")?(state.rectAreaLTC1=UniformsLib.LTC_HALF_1,state.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),state.ambient[0]=r,state.ambient[1]=g,state.ambient[2]=b;const hash=state.hash;(hash.directionalLength!==directionalLength||hash.pointLength!==pointLength||hash.spotLength!==spotLength||hash.rectAreaLength!==rectAreaLength||hash.hemiLength!==hemiLength||hash.numDirectionalShadows!==numDirectionalShadows||hash.numPointShadows!==numPointShadows||hash.numSpotShadows!==numSpotShadows||hash.numSpotMaps!==numSpotMaps)&&(state.directional.length=directionalLength,state.spot.length=spotLength,state.rectArea.length=rectAreaLength,state.point.length=pointLength,state.hemi.length=hemiLength,state.directionalShadow.length=numDirectionalShadows,state.directionalShadowMap.length=numDirectionalShadows,state.pointShadow.length=numPointShadows,state.pointShadowMap.length=numPointShadows,state.spotShadow.length=numSpotShadows,state.spotShadowMap.length=numSpotShadows,state.directionalShadowMatrix.length=numDirectionalShadows,state.pointShadowMatrix.length=numPointShadows,state.spotLightMatrix.length=numSpotShadows+numSpotMaps-numSpotShadowsWithMaps,state.spotLightMap.length=numSpotMaps,state.numSpotLightShadowsWithMaps=numSpotShadowsWithMaps,hash.directionalLength=directionalLength,hash.pointLength=pointLength,hash.spotLength=spotLength,hash.rectAreaLength=rectAreaLength,hash.hemiLength=hemiLength,hash.numDirectionalShadows=numDirectionalShadows,hash.numPointShadows=numPointShadows,hash.numSpotShadows=numSpotShadows,hash.numSpotMaps=numSpotMaps,state.version=nextVersion++)}function setupView(lights,camera){let directionalLength=0,pointLength=0,spotLength=0,rectAreaLength=0,hemiLength=0;const viewMatrix=camera.matrixWorldInverse;for(let i=0,l=lights.length;i<l;i++){const light=lights[i];if(light.isDirectionalLight){const uniforms=state.directional[directionalLength];uniforms.direction.setFromMatrixPosition(light.matrixWorld),vector3.setFromMatrixPosition(light.target.matrixWorld),uniforms.direction.sub(vector3),uniforms.direction.transformDirection(viewMatrix),directionalLength++}else if(light.isSpotLight){const uniforms=state.spot[spotLength];uniforms.position.setFromMatrixPosition(light.matrixWorld),uniforms.position.applyMatrix4(viewMatrix),uniforms.direction.setFromMatrixPosition(light.matrixWorld),vector3.setFromMatrixPosition(light.target.matrixWorld),uniforms.direction.sub(vector3),uniforms.direction.transformDirection(viewMatrix),spotLength++}else if(light.isRectAreaLight){const uniforms=state.rectArea[rectAreaLength];uniforms.position.setFromMatrixPosition(light.matrixWorld),uniforms.position.applyMatrix4(viewMatrix),matrix42.identity(),matrix4.copy(light.matrixWorld),matrix4.premultiply(viewMatrix),matrix42.extractRotation(matrix4),uniforms.halfWidth.set(.5*light.width,0,0),uniforms.halfHeight.set(0,.5*light.height,0),uniforms.halfWidth.applyMatrix4(matrix42),uniforms.halfHeight.applyMatrix4(matrix42),rectAreaLength++}else if(light.isPointLight){const uniforms=state.point[pointLength];uniforms.position.setFromMatrixPosition(light.matrixWorld),uniforms.position.applyMatrix4(viewMatrix),pointLength++}else if(light.isHemisphereLight){const uniforms=state.hemi[hemiLength];uniforms.direction.setFromMatrixPosition(light.matrixWorld),uniforms.direction.transformDirection(viewMatrix),hemiLength++}}}return __name(setup,"setup"),__name(setupView,"setupView"),{setup,setupView,state}}function WebGLRenderState(extensions,capabilities){const lights=new WebGLLights(extensions,capabilities),lightsArray=[],shadowsArray=[];function init(){lightsArray.length=0,shadowsArray.length=0}function pushLight(light){lightsArray.push(light)}function pushShadow(shadowLight){shadowsArray.push(shadowLight)}function setupLights(physicallyCorrectLights){lights.setup(lightsArray,physicallyCorrectLights)}function setupLightsView(camera){lights.setupView(lightsArray,camera)}return __name(init,"init"),__name(pushLight,"pushLight"),__name(pushShadow,"pushShadow"),__name(setupLights,"setupLights"),__name(setupLightsView,"setupLightsView"),{init,state:{lightsArray,shadowsArray,lights},setupLights,setupLightsView,pushLight,pushShadow}}function WebGLRenderStates(extensions,capabilities){let renderStates=new WeakMap;function get(scene,renderCallDepth=0){const renderStateArray=renderStates.get(scene);let renderState;return void 0===renderStateArray?(renderState=new WebGLRenderState(extensions,capabilities),renderStates.set(scene,[renderState])):renderCallDepth>=renderStateArray.length?(renderState=new WebGLRenderState(extensions,capabilities),renderStateArray.push(renderState)):renderState=renderStateArray[renderCallDepth],renderState}function dispose(){renderStates=new WeakMap}return __name(get,"get"),__name(dispose,"dispose"),{get,dispose}}__name(shadowCastingAndTexturingLightsFirst,"shadowCastingAndTexturingLightsFirst"),__name(WebGLLights,"WebGLLights"),__name(WebGLRenderState,"WebGLRenderState"),__name(WebGLRenderStates,"WebGLRenderStates");class MeshDepthMaterial extends Material{constructor(parameters){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(parameters)}copy(source){return super.copy(source),this.depthPacking=source.depthPacking,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this}}__name(MeshDepthMaterial,"MeshDepthMaterial");class MeshDistanceMaterial extends Material{constructor(parameters){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector32,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(parameters)}copy(source){return super.copy(source),this.referencePosition.copy(source.referencePosition),this.nearDistance=source.nearDistance,this.farDistance=source.farDistance,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this}}__name(MeshDistanceMaterial,"MeshDistanceMaterial");const vertex="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragment="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function WebGLShadowMap(_renderer,_objects,_capabilities){let _frustum=new Frustum;const _shadowMapSize=new Vector22,_viewportSize=new Vector22,_viewport=new Vector4,_depthMaterial=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),_distanceMaterial=new MeshDistanceMaterial,_materialCache={},_maxTextureSize=_capabilities.maxTextureSize,shadowSide={0:BackSide,1:FrontSide,2:DoubleSide},shadowMaterialVertical=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector22},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),shadowMaterialHorizontal=shadowMaterialVertical.clone();shadowMaterialHorizontal.defines.HORIZONTAL_PASS=1;const fullScreenTri=new BufferGeometry;fullScreenTri.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const fullScreenMesh=new Mesh2(fullScreenTri,shadowMaterialVertical),scope=this;function VSMPass(shadow,camera){const geometry=_objects.update(fullScreenMesh);shadowMaterialVertical.defines.VSM_SAMPLES!==shadow.blurSamples&&(shadowMaterialVertical.defines.VSM_SAMPLES=shadow.blurSamples,shadowMaterialHorizontal.defines.VSM_SAMPLES=shadow.blurSamples,shadowMaterialVertical.needsUpdate=!0,shadowMaterialHorizontal.needsUpdate=!0),null===shadow.mapPass&&(shadow.mapPass=new WebGLRenderTarget(_shadowMapSize.x,_shadowMapSize.y)),shadowMaterialVertical.uniforms.shadow_pass.value=shadow.map.texture,shadowMaterialVertical.uniforms.resolution.value=shadow.mapSize,shadowMaterialVertical.uniforms.radius.value=shadow.radius,_renderer.setRenderTarget(shadow.mapPass),_renderer.clear(),_renderer.renderBufferDirect(camera,null,geometry,shadowMaterialVertical,fullScreenMesh,null),shadowMaterialHorizontal.uniforms.shadow_pass.value=shadow.mapPass.texture,shadowMaterialHorizontal.uniforms.resolution.value=shadow.mapSize,shadowMaterialHorizontal.uniforms.radius.value=shadow.radius,_renderer.setRenderTarget(shadow.map),_renderer.clear(),_renderer.renderBufferDirect(camera,null,geometry,shadowMaterialHorizontal,fullScreenMesh,null)}function getDepthMaterial(object,material,light,shadowCameraNear,shadowCameraFar,type){let result=null;const customMaterial=!0===light.isPointLight?object.customDistanceMaterial:object.customDepthMaterial;if(void 0!==customMaterial)result=customMaterial;else if(result=!0===light.isPointLight?_distanceMaterial:_depthMaterial,_renderer.localClippingEnabled&&!0===material.clipShadows&&Array.isArray(material.clippingPlanes)&&0!==material.clippingPlanes.length||material.displacementMap&&0!==material.displacementScale||material.alphaMap&&material.alphaTest>0||material.map&&material.alphaTest>0){const keyA=result.uuid,keyB=material.uuid;let materialsForVariant=_materialCache[keyA];void 0===materialsForVariant&&(materialsForVariant={},_materialCache[keyA]=materialsForVariant);let cachedMaterial=materialsForVariant[keyB];void 0===cachedMaterial&&(cachedMaterial=result.clone(),materialsForVariant[keyB]=cachedMaterial),result=cachedMaterial}return result.visible=material.visible,result.wireframe=material.wireframe,result.side=type===VSMShadowMap?null!==material.shadowSide?material.shadowSide:material.side:null!==material.shadowSide?material.shadowSide:shadowSide[material.side],result.alphaMap=material.alphaMap,result.alphaTest=material.alphaTest,result.map=material.map,result.clipShadows=material.clipShadows,result.clippingPlanes=material.clippingPlanes,result.clipIntersection=material.clipIntersection,result.displacementMap=material.displacementMap,result.displacementScale=material.displacementScale,result.displacementBias=material.displacementBias,result.wireframeLinewidth=material.wireframeLinewidth,result.linewidth=material.linewidth,!0===light.isPointLight&&!0===result.isMeshDistanceMaterial&&(result.referencePosition.setFromMatrixPosition(light.matrixWorld),result.nearDistance=shadowCameraNear,result.farDistance=shadowCameraFar),result}function renderObject(object,camera,shadowCamera,light,type){if(!1===object.visible)return;if(object.layers.test(camera.layers)&&(object.isMesh||object.isLine||object.isPoints)&&(object.castShadow||object.receiveShadow&&type===VSMShadowMap)&&(!object.frustumCulled||_frustum.intersectsObject(object))){object.modelViewMatrix.multiplyMatrices(shadowCamera.matrixWorldInverse,object.matrixWorld);const geometry=_objects.update(object),material=object.material;if(Array.isArray(material)){const groups=geometry.groups;for(let k=0,kl=groups.length;k<kl;k++){const group=groups[k],groupMaterial=material[group.materialIndex];if(groupMaterial&&groupMaterial.visible){const depthMaterial=getDepthMaterial(object,groupMaterial,light,shadowCamera.near,shadowCamera.far,type);_renderer.renderBufferDirect(shadowCamera,null,geometry,depthMaterial,object,group)}}}else if(material.visible){const depthMaterial=getDepthMaterial(object,material,light,shadowCamera.near,shadowCamera.far,type);_renderer.renderBufferDirect(shadowCamera,null,geometry,depthMaterial,object,null)}}const children=object.children;for(let i=0,l=children.length;i<l;i++)renderObject(children[i],camera,shadowCamera,light,type)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(lights,scene,camera){if(!1===scope.enabled||!1===scope.autoUpdate&&!1===scope.needsUpdate||0===lights.length)return;const currentRenderTarget=_renderer.getRenderTarget(),activeCubeFace=_renderer.getActiveCubeFace(),activeMipmapLevel=_renderer.getActiveMipmapLevel(),_state=_renderer.state;_state.setBlending(NoBlending),_state.buffers.color.setClear(1,1,1,1),_state.buffers.depth.setTest(!0),_state.setScissorTest(!1);for(let i=0,il=lights.length;i<il;i++){const light=lights[i],shadow=light.shadow;if(void 0===shadow){console.warn("THREE.WebGLShadowMap:",light,"has no shadow.");continue}if(!1===shadow.autoUpdate&&!1===shadow.needsUpdate)continue;_shadowMapSize.copy(shadow.mapSize);const shadowFrameExtents=shadow.getFrameExtents();_shadowMapSize.multiply(shadowFrameExtents),_viewportSize.copy(shadow.mapSize),(_shadowMapSize.x>_maxTextureSize||_shadowMapSize.y>_maxTextureSize)&&(_shadowMapSize.x>_maxTextureSize&&(_viewportSize.x=Math.floor(_maxTextureSize/shadowFrameExtents.x),_shadowMapSize.x=_viewportSize.x*shadowFrameExtents.x,shadow.mapSize.x=_viewportSize.x),_shadowMapSize.y>_maxTextureSize&&(_viewportSize.y=Math.floor(_maxTextureSize/shadowFrameExtents.y),_shadowMapSize.y=_viewportSize.y*shadowFrameExtents.y,shadow.mapSize.y=_viewportSize.y)),null===shadow.map&&(shadow.map=new WebGLRenderTarget(_shadowMapSize.x,_shadowMapSize.y,this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{}),shadow.map.texture.name=light.name+".shadowMap",shadow.camera.updateProjectionMatrix()),_renderer.setRenderTarget(shadow.map),_renderer.clear();const viewportCount=shadow.getViewportCount();for(let vp=0;vp<viewportCount;vp++){const viewport=shadow.getViewport(vp);_viewport.set(_viewportSize.x*viewport.x,_viewportSize.y*viewport.y,_viewportSize.x*viewport.z,_viewportSize.y*viewport.w),_state.viewport(_viewport),shadow.updateMatrices(light,vp),_frustum=shadow.getFrustum(),renderObject(scene,camera,shadow.camera,light,this.type)}!0!==shadow.isPointLightShadow&&this.type===VSMShadowMap&&VSMPass(shadow,camera),shadow.needsUpdate=!1}scope.needsUpdate=!1,_renderer.setRenderTarget(currentRenderTarget,activeCubeFace,activeMipmapLevel)},__name(VSMPass,"VSMPass"),__name(getDepthMaterial,"getDepthMaterial"),__name(renderObject,"renderObject")}function WebGLState(gl,extensions,capabilities){const isWebGL2=capabilities.isWebGL2;function ColorBuffer(){let locked=!1;const color=new Vector4;let currentColorMask=null;const currentColorClear=new Vector4(0,0,0,0);return{setMask:function(colorMask){currentColorMask!==colorMask&&!locked&&(gl.colorMask(colorMask,colorMask,colorMask,colorMask),currentColorMask=colorMask)},setLocked:function(lock){locked=lock},setClear:function(r,g,b,a,premultipliedAlpha){!0===premultipliedAlpha&&(r*=a,g*=a,b*=a),color.set(r,g,b,a),!1===currentColorClear.equals(color)&&(gl.clearColor(r,g,b,a),currentColorClear.copy(color))},reset:function(){locked=!1,currentColorMask=null,currentColorClear.set(-1,0,0,0)}}}function DepthBuffer(){let locked=!1,currentDepthMask=null,currentDepthFunc=null,currentDepthClear=null;return{setTest:function(depthTest){depthTest?enable(2929):disable(2929)},setMask:function(depthMask){currentDepthMask!==depthMask&&!locked&&(gl.depthMask(depthMask),currentDepthMask=depthMask)},setFunc:function(depthFunc){if(currentDepthFunc!==depthFunc){switch(depthFunc){case NeverDepth:gl.depthFunc(512);break;case AlwaysDepth:gl.depthFunc(519);break;case LessDepth:gl.depthFunc(513);break;case LessEqualDepth:gl.depthFunc(515);break;case EqualDepth:gl.depthFunc(514);break;case GreaterEqualDepth:gl.depthFunc(518);break;case GreaterDepth:gl.depthFunc(516);break;case NotEqualDepth:gl.depthFunc(517);break;default:gl.depthFunc(515)}currentDepthFunc=depthFunc}},setLocked:function(lock){locked=lock},setClear:function(depth){currentDepthClear!==depth&&(gl.clearDepth(depth),currentDepthClear=depth)},reset:function(){locked=!1,currentDepthMask=null,currentDepthFunc=null,currentDepthClear=null}}}function StencilBuffer(){let locked=!1,currentStencilMask=null,currentStencilFunc=null,currentStencilRef=null,currentStencilFuncMask=null,currentStencilFail=null,currentStencilZFail=null,currentStencilZPass=null,currentStencilClear=null;return{setTest:function(stencilTest){locked||(stencilTest?enable(2960):disable(2960))},setMask:function(stencilMask){currentStencilMask!==stencilMask&&!locked&&(gl.stencilMask(stencilMask),currentStencilMask=stencilMask)},setFunc:function(stencilFunc,stencilRef,stencilMask){(currentStencilFunc!==stencilFunc||currentStencilRef!==stencilRef||currentStencilFuncMask!==stencilMask)&&(gl.stencilFunc(stencilFunc,stencilRef,stencilMask),currentStencilFunc=stencilFunc,currentStencilRef=stencilRef,currentStencilFuncMask=stencilMask)},setOp:function(stencilFail,stencilZFail,stencilZPass){(currentStencilFail!==stencilFail||currentStencilZFail!==stencilZFail||currentStencilZPass!==stencilZPass)&&(gl.stencilOp(stencilFail,stencilZFail,stencilZPass),currentStencilFail=stencilFail,currentStencilZFail=stencilZFail,currentStencilZPass=stencilZPass)},setLocked:function(lock){locked=lock},setClear:function(stencil){currentStencilClear!==stencil&&(gl.clearStencil(stencil),currentStencilClear=stencil)},reset:function(){locked=!1,currentStencilMask=null,currentStencilFunc=null,currentStencilRef=null,currentStencilFuncMask=null,currentStencilFail=null,currentStencilZFail=null,currentStencilZPass=null,currentStencilClear=null}}}__name(ColorBuffer,"ColorBuffer"),__name(DepthBuffer,"DepthBuffer"),__name(StencilBuffer,"StencilBuffer");const colorBuffer=new ColorBuffer,depthBuffer=new DepthBuffer,stencilBuffer=new StencilBuffer,uboBindings=new WeakMap,uboProgramMap=new WeakMap;let enabledCapabilities={},currentBoundFramebuffers={},currentDrawbuffers=new WeakMap,defaultDrawbuffers=[],currentProgram=null,currentBlendingEnabled=!1,currentBlending=null,currentBlendEquation=null,currentBlendSrc=null,currentBlendDst=null,currentBlendEquationAlpha=null,currentBlendSrcAlpha=null,currentBlendDstAlpha=null,currentPremultipledAlpha=!1,currentFlipSided=null,currentCullFace=null,currentLineWidth=null,currentPolygonOffsetFactor=null,currentPolygonOffsetUnits=null;const maxTextures=gl.getParameter(35661);let lineWidthAvailable=!1,version=0;const glVersion=gl.getParameter(7938);-1!==glVersion.indexOf("WebGL")?(version=parseFloat(/^WebGL (\d)/.exec(glVersion)[1]),lineWidthAvailable=version>=1):-1!==glVersion.indexOf("OpenGL ES")&&(version=parseFloat(/^OpenGL ES (\d)/.exec(glVersion)[1]),lineWidthAvailable=version>=2);let currentTextureSlot=null,currentBoundTextures={};const scissorParam=gl.getParameter(3088),viewportParam=gl.getParameter(2978),currentScissor=(new Vector4).fromArray(scissorParam),currentViewport=(new Vector4).fromArray(viewportParam);function createTexture(type,target,count){const data=new Uint8Array(4),texture=gl.createTexture();gl.bindTexture(type,texture),gl.texParameteri(type,10241,9728),gl.texParameteri(type,10240,9728);for(let i=0;i<count;i++)gl.texImage2D(target+i,0,6408,1,1,0,6408,5121,data);return texture}__name(createTexture,"createTexture");const emptyTextures={};function enable(id2){!0!==enabledCapabilities[id2]&&(gl.enable(id2),enabledCapabilities[id2]=!0)}function disable(id2){!1!==enabledCapabilities[id2]&&(gl.disable(id2),enabledCapabilities[id2]=!1)}function bindFramebuffer(target,framebuffer){return currentBoundFramebuffers[target]!==framebuffer&&(gl.bindFramebuffer(target,framebuffer),currentBoundFramebuffers[target]=framebuffer,isWebGL2&&(36009===target&&(currentBoundFramebuffers[36160]=framebuffer),36160===target&&(currentBoundFramebuffers[36009]=framebuffer)),!0)}function drawBuffers(renderTarget,framebuffer){let drawBuffers2=defaultDrawbuffers,needsUpdate=!1;if(renderTarget)if(drawBuffers2=currentDrawbuffers.get(framebuffer),void 0===drawBuffers2&&(drawBuffers2=[],currentDrawbuffers.set(framebuffer,drawBuffers2)),renderTarget.isWebGLMultipleRenderTargets){const textures=renderTarget.texture;if(drawBuffers2.length!==textures.length||36064!==drawBuffers2[0]){for(let i=0,il=textures.length;i<il;i++)drawBuffers2[i]=36064+i;drawBuffers2.length=textures.length,needsUpdate=!0}}else 36064!==drawBuffers2[0]&&(drawBuffers2[0]=36064,needsUpdate=!0);else 1029!==drawBuffers2[0]&&(drawBuffers2[0]=1029,needsUpdate=!0);needsUpdate&&(capabilities.isWebGL2?gl.drawBuffers(drawBuffers2):extensions.get("WEBGL_draw_buffers").drawBuffersWEBGL(drawBuffers2))}function useProgram(program){return currentProgram!==program&&(gl.useProgram(program),currentProgram=program,!0)}emptyTextures[3553]=createTexture(3553,3553,1),emptyTextures[34067]=createTexture(34067,34069,6),colorBuffer.setClear(0,0,0,1),depthBuffer.setClear(1),stencilBuffer.setClear(0),enable(2929),depthBuffer.setFunc(LessEqualDepth),setFlipSided(!1),setCullFace(CullFaceBack),enable(2884),setBlending(NoBlending),__name(enable,"enable"),__name(disable,"disable"),__name(bindFramebuffer,"bindFramebuffer"),__name(drawBuffers,"drawBuffers"),__name(useProgram,"useProgram");const equationToGL={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(isWebGL2)equationToGL[MinEquation]=32775,equationToGL[MaxEquation]=32776;else{const extension=extensions.get("EXT_blend_minmax");null!==extension&&(equationToGL[MinEquation]=extension.MIN_EXT,equationToGL[MaxEquation]=extension.MAX_EXT)}const factorToGL={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function setBlending(blending,blendEquation,blendSrc,blendDst,blendEquationAlpha,blendSrcAlpha,blendDstAlpha,premultipliedAlpha){if(blending!==NoBlending){if(!1===currentBlendingEnabled&&(enable(3042),currentBlendingEnabled=!0),blending===CustomBlending)blendEquationAlpha=blendEquationAlpha||blendEquation,blendSrcAlpha=blendSrcAlpha||blendSrc,blendDstAlpha=blendDstAlpha||blendDst,(blendEquation!==currentBlendEquation||blendEquationAlpha!==currentBlendEquationAlpha)&&(gl.blendEquationSeparate(equationToGL[blendEquation],equationToGL[blendEquationAlpha]),currentBlendEquation=blendEquation,currentBlendEquationAlpha=blendEquationAlpha),(blendSrc!==currentBlendSrc||blendDst!==currentBlendDst||blendSrcAlpha!==currentBlendSrcAlpha||blendDstAlpha!==currentBlendDstAlpha)&&(gl.blendFuncSeparate(factorToGL[blendSrc],factorToGL[blendDst],factorToGL[blendSrcAlpha],factorToGL[blendDstAlpha]),currentBlendSrc=blendSrc,currentBlendDst=blendDst,currentBlendSrcAlpha=blendSrcAlpha,currentBlendDstAlpha=blendDstAlpha),currentBlending=blending,currentPremultipledAlpha=!1;else if(blending!==currentBlending||premultipliedAlpha!==currentPremultipledAlpha){if((currentBlendEquation!==AddEquation||currentBlendEquationAlpha!==AddEquation)&&(gl.blendEquation(32774),currentBlendEquation=AddEquation,currentBlendEquationAlpha=AddEquation),premultipliedAlpha)switch(blending){case NormalBlending:gl.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:gl.blendFunc(1,1);break;case SubtractiveBlending:gl.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:gl.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",blending)}else switch(blending){case NormalBlending:gl.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:gl.blendFunc(770,1);break;case SubtractiveBlending:gl.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:gl.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",blending)}currentBlendSrc=null,currentBlendDst=null,currentBlendSrcAlpha=null,currentBlendDstAlpha=null,currentBlending=blending,currentPremultipledAlpha=premultipliedAlpha}}else!0===currentBlendingEnabled&&(disable(3042),currentBlendingEnabled=!1)}function setMaterial(material,frontFaceCW){material.side===DoubleSide?disable(2884):enable(2884);let flipSided=material.side===BackSide;frontFaceCW&&(flipSided=!flipSided),setFlipSided(flipSided),material.blending===NormalBlending&&!1===material.transparent?setBlending(NoBlending):setBlending(material.blending,material.blendEquation,material.blendSrc,material.blendDst,material.blendEquationAlpha,material.blendSrcAlpha,material.blendDstAlpha,material.premultipliedAlpha),depthBuffer.setFunc(material.depthFunc),depthBuffer.setTest(material.depthTest),depthBuffer.setMask(material.depthWrite),colorBuffer.setMask(material.colorWrite);const stencilWrite=material.stencilWrite;stencilBuffer.setTest(stencilWrite),stencilWrite&&(stencilBuffer.setMask(material.stencilWriteMask),stencilBuffer.setFunc(material.stencilFunc,material.stencilRef,material.stencilFuncMask),stencilBuffer.setOp(material.stencilFail,material.stencilZFail,material.stencilZPass)),setPolygonOffset(material.polygonOffset,material.polygonOffsetFactor,material.polygonOffsetUnits),!0===material.alphaToCoverage?enable(32926):disable(32926)}function setFlipSided(flipSided){currentFlipSided!==flipSided&&(gl.frontFace(flipSided?2304:2305),currentFlipSided=flipSided)}function setCullFace(cullFace){cullFace!==CullFaceNone?(enable(2884),cullFace!==currentCullFace&&gl.cullFace(cullFace===CullFaceBack?1029:cullFace===CullFaceFront?1028:1032)):disable(2884),currentCullFace=cullFace}function setLineWidth(width){width!==currentLineWidth&&(lineWidthAvailable&&gl.lineWidth(width),currentLineWidth=width)}function setPolygonOffset(polygonOffset,factor,units){polygonOffset?(enable(32823),(currentPolygonOffsetFactor!==factor||currentPolygonOffsetUnits!==units)&&(gl.polygonOffset(factor,units),currentPolygonOffsetFactor=factor,currentPolygonOffsetUnits=units)):disable(32823)}function setScissorTest(scissorTest){scissorTest?enable(3089):disable(3089)}function activeTexture(webglSlot){void 0===webglSlot&&(webglSlot=33984+maxTextures-1),currentTextureSlot!==webglSlot&&(gl.activeTexture(webglSlot),currentTextureSlot=webglSlot)}function bindTexture(webglType,webglTexture,webglSlot){void 0===webglSlot&&(webglSlot=null===currentTextureSlot?33984+maxTextures-1:currentTextureSlot);let boundTexture=currentBoundTextures[webglSlot];void 0===boundTexture&&(boundTexture={type:void 0,texture:void 0},currentBoundTextures[webglSlot]=boundTexture),(boundTexture.type!==webglType||boundTexture.texture!==webglTexture)&&(currentTextureSlot!==webglSlot&&(gl.activeTexture(webglSlot),currentTextureSlot=webglSlot),gl.bindTexture(webglType,webglTexture||emptyTextures[webglType]),boundTexture.type=webglType,boundTexture.texture=webglTexture)}function unbindTexture(){const boundTexture=currentBoundTextures[currentTextureSlot];void 0!==boundTexture&&void 0!==boundTexture.type&&(gl.bindTexture(boundTexture.type,null),boundTexture.type=void 0,boundTexture.texture=void 0)}function compressedTexImage2D(){try{gl.compressedTexImage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function compressedTexImage3D(){try{gl.compressedTexImage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texSubImage2D(){try{gl.texSubImage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texSubImage3D(){try{gl.texSubImage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function compressedTexSubImage2D(){try{gl.compressedTexSubImage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function compressedTexSubImage3D(){try{gl.compressedTexSubImage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texStorage2D(){try{gl.texStorage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texStorage3D(){try{gl.texStorage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texImage2D(){try{gl.texImage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texImage3D(){try{gl.texImage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function scissor(scissor2){!1===currentScissor.equals(scissor2)&&(gl.scissor(scissor2.x,scissor2.y,scissor2.z,scissor2.w),currentScissor.copy(scissor2))}function viewport(viewport2){!1===currentViewport.equals(viewport2)&&(gl.viewport(viewport2.x,viewport2.y,viewport2.z,viewport2.w),currentViewport.copy(viewport2))}function updateUBOMapping(uniformsGroup,program){let mapping=uboProgramMap.get(program);void 0===mapping&&(mapping=new WeakMap,uboProgramMap.set(program,mapping));let blockIndex=mapping.get(uniformsGroup);void 0===blockIndex&&(blockIndex=gl.getUniformBlockIndex(program,uniformsGroup.name),mapping.set(uniformsGroup,blockIndex))}function uniformBlockBinding(uniformsGroup,program){const blockIndex=uboProgramMap.get(program).get(uniformsGroup);uboBindings.get(program)!==blockIndex&&(gl.uniformBlockBinding(program,blockIndex,uniformsGroup.__bindingPointIndex),uboBindings.set(program,blockIndex))}function reset(){gl.disable(3042),gl.disable(2884),gl.disable(2929),gl.disable(32823),gl.disable(3089),gl.disable(2960),gl.disable(32926),gl.blendEquation(32774),gl.blendFunc(1,0),gl.blendFuncSeparate(1,0,1,0),gl.colorMask(!0,!0,!0,!0),gl.clearColor(0,0,0,0),gl.depthMask(!0),gl.depthFunc(513),gl.clearDepth(1),gl.stencilMask(4294967295),gl.stencilFunc(519,0,4294967295),gl.stencilOp(7680,7680,7680),gl.clearStencil(0),gl.cullFace(1029),gl.frontFace(2305),gl.polygonOffset(0,0),gl.activeTexture(33984),gl.bindFramebuffer(36160,null),!0===isWebGL2&&(gl.bindFramebuffer(36009,null),gl.bindFramebuffer(36008,null)),gl.useProgram(null),gl.lineWidth(1),gl.scissor(0,0,gl.canvas.width,gl.canvas.height),gl.viewport(0,0,gl.canvas.width,gl.canvas.height),enabledCapabilities={},currentTextureSlot=null,currentBoundTextures={},currentBoundFramebuffers={},currentDrawbuffers=new WeakMap,defaultDrawbuffers=[],currentProgram=null,currentBlendingEnabled=!1,currentBlending=null,currentBlendEquation=null,currentBlendSrc=null,currentBlendDst=null,currentBlendEquationAlpha=null,currentBlendSrcAlpha=null,currentBlendDstAlpha=null,currentPremultipledAlpha=!1,currentFlipSided=null,currentCullFace=null,currentLineWidth=null,currentPolygonOffsetFactor=null,currentPolygonOffsetUnits=null,currentScissor.set(0,0,gl.canvas.width,gl.canvas.height),currentViewport.set(0,0,gl.canvas.width,gl.canvas.height),colorBuffer.reset(),depthBuffer.reset(),stencilBuffer.reset()}return __name(setBlending,"setBlending"),__name(setMaterial,"setMaterial"),__name(setFlipSided,"setFlipSided"),__name(setCullFace,"setCullFace"),__name(setLineWidth,"setLineWidth"),__name(setPolygonOffset,"setPolygonOffset"),__name(setScissorTest,"setScissorTest"),__name(activeTexture,"activeTexture"),__name(bindTexture,"bindTexture"),__name(unbindTexture,"unbindTexture"),__name(compressedTexImage2D,"compressedTexImage2D"),__name(compressedTexImage3D,"compressedTexImage3D"),__name(texSubImage2D,"texSubImage2D"),__name(texSubImage3D,"texSubImage3D"),__name(compressedTexSubImage2D,"compressedTexSubImage2D"),__name(compressedTexSubImage3D,"compressedTexSubImage3D"),__name(texStorage2D,"texStorage2D"),__name(texStorage3D,"texStorage3D"),__name(texImage2D,"texImage2D"),__name(texImage3D,"texImage3D"),__name(scissor,"scissor"),__name(viewport,"viewport"),__name(updateUBOMapping,"updateUBOMapping"),__name(uniformBlockBinding,"uniformBlockBinding"),__name(reset,"reset"),{buffers:{color:colorBuffer,depth:depthBuffer,stencil:stencilBuffer},enable,disable,bindFramebuffer,drawBuffers,useProgram,setBlending,setMaterial,setFlipSided,setCullFace,setLineWidth,setPolygonOffset,setScissorTest,activeTexture,bindTexture,unbindTexture,compressedTexImage2D,compressedTexImage3D,texImage2D,texImage3D,updateUBOMapping,uniformBlockBinding,texStorage2D,texStorage3D,texSubImage2D,texSubImage3D,compressedTexSubImage2D,compressedTexSubImage3D,scissor,viewport,reset}}function WebGLTextures(_gl,extensions,state,properties,capabilities,utils,info){const isWebGL2=capabilities.isWebGL2,maxTextures=capabilities.maxTextures,maxCubemapSize=capabilities.maxCubemapSize,maxTextureSize=capabilities.maxTextureSize,maxSamples=capabilities.maxSamples,multisampledRTTExt=extensions.has("WEBGL_multisampled_render_to_texture")?extensions.get("WEBGL_multisampled_render_to_texture"):null,supportsInvalidateFramebuffer=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),_videoTextures=new WeakMap;let _canvas2;const _sources=new WeakMap;let useOffscreenCanvas=!1;try{useOffscreenCanvas=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function createCanvas(width,height){return useOffscreenCanvas?new OffscreenCanvas(width,height):createElementNS("canvas")}function resizeImage(image,needsPowerOfTwo,needsNewCanvas,maxSize){let scale=1;if((image.width>maxSize||image.height>maxSize)&&(scale=maxSize/Math.max(image.width,image.height)),scale<1||!0===needsPowerOfTwo){if(typeof HTMLImageElement<"u"&&image instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&image instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&image instanceof ImageBitmap){const floor=needsPowerOfTwo?floorPowerOfTwo:Math.floor,width=floor(scale*image.width),height=floor(scale*image.height);void 0===_canvas2&&(_canvas2=createCanvas(width,height));const canvas=needsNewCanvas?createCanvas(width,height):_canvas2;return canvas.width=width,canvas.height=height,canvas.getContext("2d").drawImage(image,0,0,width,height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+image.width+"x"+image.height+") to ("+width+"x"+height+")."),canvas}return"data"in image&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+image.width+"x"+image.height+")."),image}return image}function isPowerOfTwo$1(image){return isPowerOfTwo(image.width)&&isPowerOfTwo(image.height)}function textureNeedsPowerOfTwo(texture){return!isWebGL2&&(texture.wrapS!==ClampToEdgeWrapping||texture.wrapT!==ClampToEdgeWrapping||texture.minFilter!==NearestFilter&&texture.minFilter!==LinearFilter)}function textureNeedsGenerateMipmaps(texture,supportsMips){return texture.generateMipmaps&&supportsMips&&texture.minFilter!==NearestFilter&&texture.minFilter!==LinearFilter}function generateMipmap(target){_gl.generateMipmap(target)}function getInternalFormat(internalFormatName,glFormat,glType,encoding,forceLinearEncoding=!1){if(!1===isWebGL2)return glFormat;if(null!==internalFormatName){if(void 0!==_gl[internalFormatName])return _gl[internalFormatName];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+internalFormatName+"'")}let internalFormat=glFormat;return 6403===glFormat&&(5126===glType&&(internalFormat=33326),5131===glType&&(internalFormat=33325),5121===glType&&(internalFormat=33321)),33319===glFormat&&(5126===glType&&(internalFormat=33328),5131===glType&&(internalFormat=33327),5121===glType&&(internalFormat=33323)),6408===glFormat&&(5126===glType&&(internalFormat=34836),5131===glType&&(internalFormat=34842),5121===glType&&(internalFormat=encoding===sRGBEncoding&&!1===forceLinearEncoding?35907:32856),32819===glType&&(internalFormat=32854),32820===glType&&(internalFormat=32855)),(33325===internalFormat||33326===internalFormat||33327===internalFormat||33328===internalFormat||34842===internalFormat||34836===internalFormat)&&extensions.get("EXT_color_buffer_float"),internalFormat}function getMipLevels(texture,image,supportsMips){return!0===textureNeedsGenerateMipmaps(texture,supportsMips)||texture.isFramebufferTexture&&texture.minFilter!==NearestFilter&&texture.minFilter!==LinearFilter?Math.log2(Math.max(image.width,image.height))+1:void 0!==texture.mipmaps&&texture.mipmaps.length>0?texture.mipmaps.length:texture.isCompressedTexture&&Array.isArray(texture.image)?image.mipmaps.length:1}function filterFallback(f){return f===NearestFilter||f===NearestMipmapNearestFilter||f===NearestMipmapLinearFilter?9728:9729}function onTextureDispose(event){const texture=event.target;texture.removeEventListener("dispose",onTextureDispose),deallocateTexture(texture),texture.isVideoTexture&&_videoTextures.delete(texture)}function onRenderTargetDispose(event){const renderTarget=event.target;renderTarget.removeEventListener("dispose",onRenderTargetDispose),deallocateRenderTarget(renderTarget)}function deallocateTexture(texture){const textureProperties=properties.get(texture);if(void 0===textureProperties.__webglInit)return;const source=texture.source,webglTextures=_sources.get(source);if(webglTextures){const webglTexture=webglTextures[textureProperties.__cacheKey];webglTexture.usedTimes--,0===webglTexture.usedTimes&&deleteTexture(texture),0===Object.keys(webglTextures).length&&_sources.delete(source)}properties.remove(texture)}function deleteTexture(texture){const textureProperties=properties.get(texture);_gl.deleteTexture(textureProperties.__webglTexture),delete _sources.get(texture.source)[textureProperties.__cacheKey],info.memory.textures--}function deallocateRenderTarget(renderTarget){const texture=renderTarget.texture,renderTargetProperties=properties.get(renderTarget),textureProperties=properties.get(texture);if(void 0!==textureProperties.__webglTexture&&(_gl.deleteTexture(textureProperties.__webglTexture),info.memory.textures--),renderTarget.depthTexture&&renderTarget.depthTexture.dispose(),renderTarget.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)_gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer[i]),renderTargetProperties.__webglDepthbuffer&&_gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer[i]);else{if(_gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer),renderTargetProperties.__webglDepthbuffer&&_gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer),renderTargetProperties.__webglMultisampledFramebuffer&&_gl.deleteFramebuffer(renderTargetProperties.__webglMultisampledFramebuffer),renderTargetProperties.__webglColorRenderbuffer)for(let i=0;i<renderTargetProperties.__webglColorRenderbuffer.length;i++)renderTargetProperties.__webglColorRenderbuffer[i]&&_gl.deleteRenderbuffer(renderTargetProperties.__webglColorRenderbuffer[i]);renderTargetProperties.__webglDepthRenderbuffer&&_gl.deleteRenderbuffer(renderTargetProperties.__webglDepthRenderbuffer)}if(renderTarget.isWebGLMultipleRenderTargets)for(let i=0,il=texture.length;i<il;i++){const attachmentProperties=properties.get(texture[i]);attachmentProperties.__webglTexture&&(_gl.deleteTexture(attachmentProperties.__webglTexture),info.memory.textures--),properties.remove(texture[i])}properties.remove(texture),properties.remove(renderTarget)}__name(createCanvas,"createCanvas"),__name(resizeImage,"resizeImage"),__name(isPowerOfTwo$1,"isPowerOfTwo$1"),__name(textureNeedsPowerOfTwo,"textureNeedsPowerOfTwo"),__name(textureNeedsGenerateMipmaps,"textureNeedsGenerateMipmaps"),__name(generateMipmap,"generateMipmap"),__name(getInternalFormat,"getInternalFormat"),__name(getMipLevels,"getMipLevels"),__name(filterFallback,"filterFallback"),__name(onTextureDispose,"onTextureDispose"),__name(onRenderTargetDispose,"onRenderTargetDispose"),__name(deallocateTexture,"deallocateTexture"),__name(deleteTexture,"deleteTexture"),__name(deallocateRenderTarget,"deallocateRenderTarget");let textureUnits=0;function resetTextureUnits(){textureUnits=0}function allocateTextureUnit(){const textureUnit=textureUnits;return textureUnit>=maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+textureUnit+" texture units while this GPU supports only "+maxTextures),textureUnits+=1,textureUnit}function getTextureCacheKey(texture){const array=[];return array.push(texture.wrapS),array.push(texture.wrapT),array.push(texture.wrapR||0),array.push(texture.magFilter),array.push(texture.minFilter),array.push(texture.anisotropy),array.push(texture.internalFormat),array.push(texture.format),array.push(texture.type),array.push(texture.generateMipmaps),array.push(texture.premultiplyAlpha),array.push(texture.flipY),array.push(texture.unpackAlignment),array.push(texture.encoding),array.join()}function setTexture2D(texture,slot){const textureProperties=properties.get(texture);if(texture.isVideoTexture&&updateVideoTexture(texture),!1===texture.isRenderTargetTexture&&texture.version>0&&textureProperties.__version!==texture.version){const image=texture.image;if(null===image)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==image.complete)return void uploadTexture(textureProperties,texture,slot);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}state.bindTexture(3553,textureProperties.__webglTexture,33984+slot)}function setTexture2DArray(texture,slot){const textureProperties=properties.get(texture);texture.version>0&&textureProperties.__version!==texture.version?uploadTexture(textureProperties,texture,slot):state.bindTexture(35866,textureProperties.__webglTexture,33984+slot)}function setTexture3D(texture,slot){const textureProperties=properties.get(texture);texture.version>0&&textureProperties.__version!==texture.version?uploadTexture(textureProperties,texture,slot):state.bindTexture(32879,textureProperties.__webglTexture,33984+slot)}function setTextureCube(texture,slot){const textureProperties=properties.get(texture);texture.version>0&&textureProperties.__version!==texture.version?uploadCubeTexture(textureProperties,texture,slot):state.bindTexture(34067,textureProperties.__webglTexture,33984+slot)}__name(resetTextureUnits,"resetTextureUnits"),__name(allocateTextureUnit,"allocateTextureUnit"),__name(getTextureCacheKey,"getTextureCacheKey"),__name(setTexture2D,"setTexture2D"),__name(setTexture2DArray,"setTexture2DArray"),__name(setTexture3D,"setTexture3D"),__name(setTextureCube,"setTextureCube");const wrappingToGL={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},filterToGL={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function setTextureParameters(textureType,texture,supportsMips){if(supportsMips?(_gl.texParameteri(textureType,10242,wrappingToGL[texture.wrapS]),_gl.texParameteri(textureType,10243,wrappingToGL[texture.wrapT]),(32879===textureType||35866===textureType)&&_gl.texParameteri(textureType,32882,wrappingToGL[texture.wrapR]),_gl.texParameteri(textureType,10240,filterToGL[texture.magFilter]),_gl.texParameteri(textureType,10241,filterToGL[texture.minFilter])):(_gl.texParameteri(textureType,10242,33071),_gl.texParameteri(textureType,10243,33071),(32879===textureType||35866===textureType)&&_gl.texParameteri(textureType,32882,33071),(texture.wrapS!==ClampToEdgeWrapping||texture.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_gl.texParameteri(textureType,10240,filterFallback(texture.magFilter)),_gl.texParameteri(textureType,10241,filterFallback(texture.minFilter)),texture.minFilter!==NearestFilter&&texture.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===extensions.has("EXT_texture_filter_anisotropic")){const extension=extensions.get("EXT_texture_filter_anisotropic");if(texture.magFilter===NearestFilter||texture.minFilter!==NearestMipmapLinearFilter&&texture.minFilter!==LinearMipmapLinearFilter||texture.type===FloatType&&!1===extensions.has("OES_texture_float_linear")||!1===isWebGL2&&texture.type===HalfFloatType&&!1===extensions.has("OES_texture_half_float_linear"))return;(texture.anisotropy>1||properties.get(texture).__currentAnisotropy)&&(_gl.texParameterf(textureType,extension.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(texture.anisotropy,capabilities.getMaxAnisotropy())),properties.get(texture).__currentAnisotropy=texture.anisotropy)}}function initTexture(textureProperties,texture){let forceUpload=!1;void 0===textureProperties.__webglInit&&(textureProperties.__webglInit=!0,texture.addEventListener("dispose",onTextureDispose));const source=texture.source;let webglTextures=_sources.get(source);void 0===webglTextures&&(webglTextures={},_sources.set(source,webglTextures));const textureCacheKey=getTextureCacheKey(texture);if(textureCacheKey!==textureProperties.__cacheKey){void 0===webglTextures[textureCacheKey]&&(webglTextures[textureCacheKey]={texture:_gl.createTexture(),usedTimes:0},info.memory.textures++,forceUpload=!0),webglTextures[textureCacheKey].usedTimes++;const webglTexture=webglTextures[textureProperties.__cacheKey];void 0!==webglTexture&&(webglTextures[textureProperties.__cacheKey].usedTimes--,0===webglTexture.usedTimes&&deleteTexture(texture)),textureProperties.__cacheKey=textureCacheKey,textureProperties.__webglTexture=webglTextures[textureCacheKey].texture}return forceUpload}function uploadTexture(textureProperties,texture,slot){let textureType=3553;(texture.isDataArrayTexture||texture.isCompressedArrayTexture)&&(textureType=35866),texture.isData3DTexture&&(textureType=32879);const forceUpload=initTexture(textureProperties,texture),source=texture.source;state.bindTexture(textureType,textureProperties.__webglTexture,33984+slot);const sourceProperties=properties.get(source);if(source.version!==sourceProperties.__version||!0===forceUpload){state.activeTexture(33984+slot),_gl.pixelStorei(37440,texture.flipY),_gl.pixelStorei(37441,texture.premultiplyAlpha),_gl.pixelStorei(3317,texture.unpackAlignment),_gl.pixelStorei(37443,0);const needsPowerOfTwo=textureNeedsPowerOfTwo(texture)&&!1===isPowerOfTwo$1(texture.image);let image=resizeImage(texture.image,needsPowerOfTwo,!1,maxTextureSize);image=verifyColorSpace(texture,image);const supportsMips=isPowerOfTwo$1(image)||isWebGL2,glFormat=utils.convert(texture.format,texture.encoding);let mipmap,glType=utils.convert(texture.type),glInternalFormat=getInternalFormat(texture.internalFormat,glFormat,glType,texture.encoding,texture.isVideoTexture);setTextureParameters(textureType,texture,supportsMips);const mipmaps=texture.mipmaps,useTexStorage=isWebGL2&&!0!==texture.isVideoTexture,allocateMemory=void 0===sourceProperties.__version||!0===forceUpload,levels=getMipLevels(texture,image,supportsMips);if(texture.isDepthTexture)glInternalFormat=6402,isWebGL2?glInternalFormat=texture.type===FloatType?36012:texture.type===UnsignedIntType?33190:texture.type===UnsignedInt248Type?35056:33189:texture.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),texture.format===DepthFormat&&6402===glInternalFormat&&texture.type!==UnsignedShortType&&texture.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),texture.type=UnsignedIntType,glType=utils.convert(texture.type)),texture.format===DepthStencilFormat&&6402===glInternalFormat&&(glInternalFormat=34041,texture.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),texture.type=UnsignedInt248Type,glType=utils.convert(texture.type))),allocateMemory&&(useTexStorage?state.texStorage2D(3553,1,glInternalFormat,image.width,image.height):state.texImage2D(3553,0,glInternalFormat,image.width,image.height,0,glFormat,glType,null));else if(texture.isDataTexture)if(mipmaps.length>0&&supportsMips){useTexStorage&&allocateMemory&&state.texStorage2D(3553,levels,glInternalFormat,mipmaps[0].width,mipmaps[0].height);for(let i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],useTexStorage?state.texSubImage2D(3553,i,0,0,mipmap.width,mipmap.height,glFormat,glType,mipmap.data):state.texImage2D(3553,i,glInternalFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data);texture.generateMipmaps=!1}else useTexStorage?(allocateMemory&&state.texStorage2D(3553,levels,glInternalFormat,image.width,image.height),state.texSubImage2D(3553,0,0,0,image.width,image.height,glFormat,glType,image.data)):state.texImage2D(3553,0,glInternalFormat,image.width,image.height,0,glFormat,glType,image.data);else if(texture.isCompressedTexture)if(texture.isCompressedArrayTexture){useTexStorage&&allocateMemory&&state.texStorage3D(35866,levels,glInternalFormat,mipmaps[0].width,mipmaps[0].height,image.depth);for(let i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],texture.format!==RGBAFormat?null!==glFormat?useTexStorage?state.compressedTexSubImage3D(35866,i,0,0,0,mipmap.width,mipmap.height,image.depth,glFormat,mipmap.data,0,0):state.compressedTexImage3D(35866,i,glInternalFormat,mipmap.width,mipmap.height,image.depth,0,mipmap.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):useTexStorage?state.texSubImage3D(35866,i,0,0,0,mipmap.width,mipmap.height,image.depth,glFormat,glType,mipmap.data):state.texImage3D(35866,i,glInternalFormat,mipmap.width,mipmap.height,image.depth,0,glFormat,glType,mipmap.data)}else{useTexStorage&&allocateMemory&&state.texStorage2D(3553,levels,glInternalFormat,mipmaps[0].width,mipmaps[0].height);for(let i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],texture.format!==RGBAFormat?null!==glFormat?useTexStorage?state.compressedTexSubImage2D(3553,i,0,0,mipmap.width,mipmap.height,glFormat,mipmap.data):state.compressedTexImage2D(3553,i,glInternalFormat,mipmap.width,mipmap.height,0,mipmap.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):useTexStorage?state.texSubImage2D(3553,i,0,0,mipmap.width,mipmap.height,glFormat,glType,mipmap.data):state.texImage2D(3553,i,glInternalFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data)}else if(texture.isDataArrayTexture)useTexStorage?(allocateMemory&&state.texStorage3D(35866,levels,glInternalFormat,image.width,image.height,image.depth),state.texSubImage3D(35866,0,0,0,0,image.width,image.height,image.depth,glFormat,glType,image.data)):state.texImage3D(35866,0,glInternalFormat,image.width,image.height,image.depth,0,glFormat,glType,image.data);else if(texture.isData3DTexture)useTexStorage?(allocateMemory&&state.texStorage3D(32879,levels,glInternalFormat,image.width,image.height,image.depth),state.texSubImage3D(32879,0,0,0,0,image.width,image.height,image.depth,glFormat,glType,image.data)):state.texImage3D(32879,0,glInternalFormat,image.width,image.height,image.depth,0,glFormat,glType,image.data);else if(texture.isFramebufferTexture){if(allocateMemory)if(useTexStorage)state.texStorage2D(3553,levels,glInternalFormat,image.width,image.height);else{let width=image.width,height=image.height;for(let i=0;i<levels;i++)state.texImage2D(3553,i,glInternalFormat,width,height,0,glFormat,glType,null),width>>=1,height>>=1}}else if(mipmaps.length>0&&supportsMips){useTexStorage&&allocateMemory&&state.texStorage2D(3553,levels,glInternalFormat,mipmaps[0].width,mipmaps[0].height);for(let i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],useTexStorage?state.texSubImage2D(3553,i,0,0,glFormat,glType,mipmap):state.texImage2D(3553,i,glInternalFormat,glFormat,glType,mipmap);texture.generateMipmaps=!1}else useTexStorage?(allocateMemory&&state.texStorage2D(3553,levels,glInternalFormat,image.width,image.height),state.texSubImage2D(3553,0,0,0,glFormat,glType,image)):state.texImage2D(3553,0,glInternalFormat,glFormat,glType,image);textureNeedsGenerateMipmaps(texture,supportsMips)&&generateMipmap(textureType),sourceProperties.__version=source.version,texture.onUpdate&&texture.onUpdate(texture)}textureProperties.__version=texture.version}function uploadCubeTexture(textureProperties,texture,slot){if(6!==texture.image.length)return;const forceUpload=initTexture(textureProperties,texture),source=texture.source;state.bindTexture(34067,textureProperties.__webglTexture,33984+slot);const sourceProperties=properties.get(source);if(source.version!==sourceProperties.__version||!0===forceUpload){state.activeTexture(33984+slot),_gl.pixelStorei(37440,texture.flipY),_gl.pixelStorei(37441,texture.premultiplyAlpha),_gl.pixelStorei(3317,texture.unpackAlignment),_gl.pixelStorei(37443,0);const isCompressed=texture.isCompressedTexture||texture.image[0].isCompressedTexture,isDataTexture=texture.image[0]&&texture.image[0].isDataTexture,cubeImage=[];for(let i=0;i<6;i++)cubeImage[i]=isCompressed||isDataTexture?isDataTexture?texture.image[i].image:texture.image[i]:resizeImage(texture.image[i],!1,!0,maxCubemapSize),cubeImage[i]=verifyColorSpace(texture,cubeImage[i]);const image=cubeImage[0],supportsMips=isPowerOfTwo$1(image)||isWebGL2,glFormat=utils.convert(texture.format,texture.encoding),glType=utils.convert(texture.type),glInternalFormat=getInternalFormat(texture.internalFormat,glFormat,glType,texture.encoding),useTexStorage=isWebGL2&&!0!==texture.isVideoTexture,allocateMemory=void 0===sourceProperties.__version||!0===forceUpload;let mipmaps,levels=getMipLevels(texture,image,supportsMips);if(setTextureParameters(34067,texture,supportsMips),isCompressed){useTexStorage&&allocateMemory&&state.texStorage2D(34067,levels,glInternalFormat,image.width,image.height);for(let i=0;i<6;i++){mipmaps=cubeImage[i].mipmaps;for(let j=0;j<mipmaps.length;j++){const mipmap=mipmaps[j];texture.format!==RGBAFormat?null!==glFormat?useTexStorage?state.compressedTexSubImage2D(34069+i,j,0,0,mipmap.width,mipmap.height,glFormat,mipmap.data):state.compressedTexImage2D(34069+i,j,glInternalFormat,mipmap.width,mipmap.height,0,mipmap.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):useTexStorage?state.texSubImage2D(34069+i,j,0,0,mipmap.width,mipmap.height,glFormat,glType,mipmap.data):state.texImage2D(34069+i,j,glInternalFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data)}}}else{mipmaps=texture.mipmaps,useTexStorage&&allocateMemory&&(mipmaps.length>0&&levels++,state.texStorage2D(34067,levels,glInternalFormat,cubeImage[0].width,cubeImage[0].height));for(let i=0;i<6;i++)if(isDataTexture){useTexStorage?state.texSubImage2D(34069+i,0,0,0,cubeImage[i].width,cubeImage[i].height,glFormat,glType,cubeImage[i].data):state.texImage2D(34069+i,0,glInternalFormat,cubeImage[i].width,cubeImage[i].height,0,glFormat,glType,cubeImage[i].data);for(let j=0;j<mipmaps.length;j++){const mipmapImage=mipmaps[j].image[i].image;useTexStorage?state.texSubImage2D(34069+i,j+1,0,0,mipmapImage.width,mipmapImage.height,glFormat,glType,mipmapImage.data):state.texImage2D(34069+i,j+1,glInternalFormat,mipmapImage.width,mipmapImage.height,0,glFormat,glType,mipmapImage.data)}}else{useTexStorage?state.texSubImage2D(34069+i,0,0,0,glFormat,glType,cubeImage[i]):state.texImage2D(34069+i,0,glInternalFormat,glFormat,glType,cubeImage[i]);for(let j=0;j<mipmaps.length;j++){const mipmap=mipmaps[j];useTexStorage?state.texSubImage2D(34069+i,j+1,0,0,glFormat,glType,mipmap.image[i]):state.texImage2D(34069+i,j+1,glInternalFormat,glFormat,glType,mipmap.image[i])}}}textureNeedsGenerateMipmaps(texture,supportsMips)&&generateMipmap(34067),sourceProperties.__version=source.version,texture.onUpdate&&texture.onUpdate(texture)}textureProperties.__version=texture.version}function setupFrameBufferTexture(framebuffer,renderTarget,texture,attachment,textureTarget){const glFormat=utils.convert(texture.format,texture.encoding),glType=utils.convert(texture.type),glInternalFormat=getInternalFormat(texture.internalFormat,glFormat,glType,texture.encoding);properties.get(renderTarget).__hasExternalTextures||(32879===textureTarget||35866===textureTarget?state.texImage3D(textureTarget,0,glInternalFormat,renderTarget.width,renderTarget.height,renderTarget.depth,0,glFormat,glType,null):state.texImage2D(textureTarget,0,glInternalFormat,renderTarget.width,renderTarget.height,0,glFormat,glType,null)),state.bindFramebuffer(36160,framebuffer),useMultisampledRTT(renderTarget)?multisampledRTTExt.framebufferTexture2DMultisampleEXT(36160,attachment,textureTarget,properties.get(texture).__webglTexture,0,getRenderTargetSamples(renderTarget)):(3553===textureTarget||textureTarget>=34069&&textureTarget<=34074)&&_gl.framebufferTexture2D(36160,attachment,textureTarget,properties.get(texture).__webglTexture,0),state.bindFramebuffer(36160,null)}function setupRenderBufferStorage(renderbuffer,renderTarget,isMultisample){if(_gl.bindRenderbuffer(36161,renderbuffer),renderTarget.depthBuffer&&!renderTarget.stencilBuffer){let glInternalFormat=33189;if(isMultisample||useMultisampledRTT(renderTarget)){const depthTexture=renderTarget.depthTexture;depthTexture&&depthTexture.isDepthTexture&&(depthTexture.type===FloatType?glInternalFormat=36012:depthTexture.type===UnsignedIntType&&(glInternalFormat=33190));const samples=getRenderTargetSamples(renderTarget);useMultisampledRTT(renderTarget)?multisampledRTTExt.renderbufferStorageMultisampleEXT(36161,samples,glInternalFormat,renderTarget.width,renderTarget.height):_gl.renderbufferStorageMultisample(36161,samples,glInternalFormat,renderTarget.width,renderTarget.height)}else _gl.renderbufferStorage(36161,glInternalFormat,renderTarget.width,renderTarget.height);_gl.framebufferRenderbuffer(36160,36096,36161,renderbuffer)}else if(renderTarget.depthBuffer&&renderTarget.stencilBuffer){const samples=getRenderTargetSamples(renderTarget);isMultisample&&!1===useMultisampledRTT(renderTarget)?_gl.renderbufferStorageMultisample(36161,samples,35056,renderTarget.width,renderTarget.height):useMultisampledRTT(renderTarget)?multisampledRTTExt.renderbufferStorageMultisampleEXT(36161,samples,35056,renderTarget.width,renderTarget.height):_gl.renderbufferStorage(36161,34041,renderTarget.width,renderTarget.height),_gl.framebufferRenderbuffer(36160,33306,36161,renderbuffer)}else{const textures=!0===renderTarget.isWebGLMultipleRenderTargets?renderTarget.texture:[renderTarget.texture];for(let i=0;i<textures.length;i++){const texture=textures[i],glFormat=utils.convert(texture.format,texture.encoding),glType=utils.convert(texture.type),glInternalFormat=getInternalFormat(texture.internalFormat,glFormat,glType,texture.encoding),samples=getRenderTargetSamples(renderTarget);isMultisample&&!1===useMultisampledRTT(renderTarget)?_gl.renderbufferStorageMultisample(36161,samples,glInternalFormat,renderTarget.width,renderTarget.height):useMultisampledRTT(renderTarget)?multisampledRTTExt.renderbufferStorageMultisampleEXT(36161,samples,glInternalFormat,renderTarget.width,renderTarget.height):_gl.renderbufferStorage(36161,glInternalFormat,renderTarget.width,renderTarget.height)}}_gl.bindRenderbuffer(36161,null)}function setupDepthTexture(framebuffer,renderTarget){if(renderTarget&&renderTarget.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(state.bindFramebuffer(36160,framebuffer),!renderTarget.depthTexture||!renderTarget.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!properties.get(renderTarget.depthTexture).__webglTexture||renderTarget.depthTexture.image.width!==renderTarget.width||renderTarget.depthTexture.image.height!==renderTarget.height)&&(renderTarget.depthTexture.image.width=renderTarget.width,renderTarget.depthTexture.image.height=renderTarget.height,renderTarget.depthTexture.needsUpdate=!0),setTexture2D(renderTarget.depthTexture,0);const webglDepthTexture=properties.get(renderTarget.depthTexture).__webglTexture,samples=getRenderTargetSamples(renderTarget);if(renderTarget.depthTexture.format===DepthFormat)useMultisampledRTT(renderTarget)?multisampledRTTExt.framebufferTexture2DMultisampleEXT(36160,36096,3553,webglDepthTexture,0,samples):_gl.framebufferTexture2D(36160,36096,3553,webglDepthTexture,0);else{if(renderTarget.depthTexture.format!==DepthStencilFormat)throw new Error("Unknown depthTexture format");useMultisampledRTT(renderTarget)?multisampledRTTExt.framebufferTexture2DMultisampleEXT(36160,33306,3553,webglDepthTexture,0,samples):_gl.framebufferTexture2D(36160,33306,3553,webglDepthTexture,0)}}function setupDepthRenderbuffer(renderTarget){const renderTargetProperties=properties.get(renderTarget),isCube=!0===renderTarget.isWebGLCubeRenderTarget;if(renderTarget.depthTexture&&!renderTargetProperties.__autoAllocateDepthBuffer){if(isCube)throw new Error("target.depthTexture not supported in Cube render targets");setupDepthTexture(renderTargetProperties.__webglFramebuffer,renderTarget)}else if(isCube){renderTargetProperties.__webglDepthbuffer=[];for(let i=0;i<6;i++)state.bindFramebuffer(36160,renderTargetProperties.__webglFramebuffer[i]),renderTargetProperties.__webglDepthbuffer[i]=_gl.createRenderbuffer(),setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer[i],renderTarget,!1)}else state.bindFramebuffer(36160,renderTargetProperties.__webglFramebuffer),renderTargetProperties.__webglDepthbuffer=_gl.createRenderbuffer(),setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer,renderTarget,!1);state.bindFramebuffer(36160,null)}function rebindTextures(renderTarget,colorTexture,depthTexture){const renderTargetProperties=properties.get(renderTarget);void 0!==colorTexture&&setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer,renderTarget,renderTarget.texture,36064,3553),void 0!==depthTexture&&setupDepthRenderbuffer(renderTarget)}function setupRenderTarget(renderTarget){const texture=renderTarget.texture,renderTargetProperties=properties.get(renderTarget),textureProperties=properties.get(texture);renderTarget.addEventListener("dispose",onRenderTargetDispose),!0!==renderTarget.isWebGLMultipleRenderTargets&&(void 0===textureProperties.__webglTexture&&(textureProperties.__webglTexture=_gl.createTexture()),textureProperties.__version=texture.version,info.memory.textures++);const isCube=!0===renderTarget.isWebGLCubeRenderTarget,isMultipleRenderTargets=!0===renderTarget.isWebGLMultipleRenderTargets,supportsMips=isPowerOfTwo$1(renderTarget)||isWebGL2;if(isCube){renderTargetProperties.__webglFramebuffer=[];for(let i=0;i<6;i++)renderTargetProperties.__webglFramebuffer[i]=_gl.createFramebuffer()}else{if(renderTargetProperties.__webglFramebuffer=_gl.createFramebuffer(),isMultipleRenderTargets)if(capabilities.drawBuffers){const textures=renderTarget.texture;for(let i=0,il=textures.length;i<il;i++){const attachmentProperties=properties.get(textures[i]);void 0===attachmentProperties.__webglTexture&&(attachmentProperties.__webglTexture=_gl.createTexture(),info.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(isWebGL2&&renderTarget.samples>0&&!1===useMultisampledRTT(renderTarget)){const textures=isMultipleRenderTargets?texture:[texture];renderTargetProperties.__webglMultisampledFramebuffer=_gl.createFramebuffer(),renderTargetProperties.__webglColorRenderbuffer=[],state.bindFramebuffer(36160,renderTargetProperties.__webglMultisampledFramebuffer);for(let i=0;i<textures.length;i++){const texture2=textures[i];renderTargetProperties.__webglColorRenderbuffer[i]=_gl.createRenderbuffer(),_gl.bindRenderbuffer(36161,renderTargetProperties.__webglColorRenderbuffer[i]);const glFormat=utils.convert(texture2.format,texture2.encoding),glType=utils.convert(texture2.type),glInternalFormat=getInternalFormat(texture2.internalFormat,glFormat,glType,texture2.encoding,!0===renderTarget.isXRRenderTarget),samples=getRenderTargetSamples(renderTarget);_gl.renderbufferStorageMultisample(36161,samples,glInternalFormat,renderTarget.width,renderTarget.height),_gl.framebufferRenderbuffer(36160,36064+i,36161,renderTargetProperties.__webglColorRenderbuffer[i])}_gl.bindRenderbuffer(36161,null),renderTarget.depthBuffer&&(renderTargetProperties.__webglDepthRenderbuffer=_gl.createRenderbuffer(),setupRenderBufferStorage(renderTargetProperties.__webglDepthRenderbuffer,renderTarget,!0)),state.bindFramebuffer(36160,null)}}if(isCube){state.bindTexture(34067,textureProperties.__webglTexture),setTextureParameters(34067,texture,supportsMips);for(let i=0;i<6;i++)setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer[i],renderTarget,texture,36064,34069+i);textureNeedsGenerateMipmaps(texture,supportsMips)&&generateMipmap(34067),state.unbindTexture()}else if(isMultipleRenderTargets){const textures=renderTarget.texture;for(let i=0,il=textures.length;i<il;i++){const attachment=textures[i],attachmentProperties=properties.get(attachment);state.bindTexture(3553,attachmentProperties.__webglTexture),setTextureParameters(3553,attachment,supportsMips),setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer,renderTarget,attachment,36064+i,3553),textureNeedsGenerateMipmaps(attachment,supportsMips)&&generateMipmap(3553)}state.unbindTexture()}else{let glTextureType=3553;(renderTarget.isWebGL3DRenderTarget||renderTarget.isWebGLArrayRenderTarget)&&(isWebGL2?glTextureType=renderTarget.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),state.bindTexture(glTextureType,textureProperties.__webglTexture),setTextureParameters(glTextureType,texture,supportsMips),setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer,renderTarget,texture,36064,glTextureType),textureNeedsGenerateMipmaps(texture,supportsMips)&&generateMipmap(glTextureType),state.unbindTexture()}renderTarget.depthBuffer&&setupDepthRenderbuffer(renderTarget)}function updateRenderTargetMipmap(renderTarget){const supportsMips=isPowerOfTwo$1(renderTarget)||isWebGL2,textures=!0===renderTarget.isWebGLMultipleRenderTargets?renderTarget.texture:[renderTarget.texture];for(let i=0,il=textures.length;i<il;i++){const texture=textures[i];if(textureNeedsGenerateMipmaps(texture,supportsMips)){const target=renderTarget.isWebGLCubeRenderTarget?34067:3553,webglTexture=properties.get(texture).__webglTexture;state.bindTexture(target,webglTexture),generateMipmap(target),state.unbindTexture()}}}function updateMultisampleRenderTarget(renderTarget){if(isWebGL2&&renderTarget.samples>0&&!1===useMultisampledRTT(renderTarget)){const textures=renderTarget.isWebGLMultipleRenderTargets?renderTarget.texture:[renderTarget.texture],width=renderTarget.width,height=renderTarget.height;let mask=16384;const invalidationArray=[],depthStyle=renderTarget.stencilBuffer?33306:36096,renderTargetProperties=properties.get(renderTarget),isMultipleRenderTargets=!0===renderTarget.isWebGLMultipleRenderTargets;if(isMultipleRenderTargets)for(let i=0;i<textures.length;i++)state.bindFramebuffer(36160,renderTargetProperties.__webglMultisampledFramebuffer),_gl.framebufferRenderbuffer(36160,36064+i,36161,null),state.bindFramebuffer(36160,renderTargetProperties.__webglFramebuffer),_gl.framebufferTexture2D(36009,36064+i,3553,null,0);state.bindFramebuffer(36008,renderTargetProperties.__webglMultisampledFramebuffer),state.bindFramebuffer(36009,renderTargetProperties.__webglFramebuffer);for(let i=0;i<textures.length;i++){invalidationArray.push(36064+i),renderTarget.depthBuffer&&invalidationArray.push(depthStyle);const ignoreDepthValues=void 0!==renderTargetProperties.__ignoreDepthValues&&renderTargetProperties.__ignoreDepthValues;if(!1===ignoreDepthValues&&(renderTarget.depthBuffer&&(mask|=256),renderTarget.stencilBuffer&&(mask|=1024)),isMultipleRenderTargets&&_gl.framebufferRenderbuffer(36008,36064,36161,renderTargetProperties.__webglColorRenderbuffer[i]),!0===ignoreDepthValues&&(_gl.invalidateFramebuffer(36008,[depthStyle]),_gl.invalidateFramebuffer(36009,[depthStyle])),isMultipleRenderTargets){const webglTexture=properties.get(textures[i]).__webglTexture;_gl.framebufferTexture2D(36009,36064,3553,webglTexture,0)}_gl.blitFramebuffer(0,0,width,height,0,0,width,height,mask,9728),supportsInvalidateFramebuffer&&_gl.invalidateFramebuffer(36008,invalidationArray)}if(state.bindFramebuffer(36008,null),state.bindFramebuffer(36009,null),isMultipleRenderTargets)for(let i=0;i<textures.length;i++){state.bindFramebuffer(36160,renderTargetProperties.__webglMultisampledFramebuffer),_gl.framebufferRenderbuffer(36160,36064+i,36161,renderTargetProperties.__webglColorRenderbuffer[i]);const webglTexture=properties.get(textures[i]).__webglTexture;state.bindFramebuffer(36160,renderTargetProperties.__webglFramebuffer),_gl.framebufferTexture2D(36009,36064+i,3553,webglTexture,0)}state.bindFramebuffer(36009,renderTargetProperties.__webglMultisampledFramebuffer)}}function getRenderTargetSamples(renderTarget){return Math.min(maxSamples,renderTarget.samples)}function useMultisampledRTT(renderTarget){const renderTargetProperties=properties.get(renderTarget);return isWebGL2&&renderTarget.samples>0&&!0===extensions.has("WEBGL_multisampled_render_to_texture")&&!1!==renderTargetProperties.__useRenderToTexture}function updateVideoTexture(texture){const frame=info.render.frame;_videoTextures.get(texture)!==frame&&(_videoTextures.set(texture,frame),texture.update())}function verifyColorSpace(texture,image){const encoding=texture.encoding,format=texture.format,type=texture.type;return!0===texture.isCompressedTexture||!0===texture.isVideoTexture||texture.format===_SRGBAFormat||encoding!==LinearEncoding&&(encoding===sRGBEncoding?!1===isWebGL2?!0===extensions.has("EXT_sRGB")&&format===RGBAFormat?(texture.format=_SRGBAFormat,texture.minFilter=LinearFilter,texture.generateMipmaps=!1):image=ImageUtils.sRGBToLinear(image):(format!==RGBAFormat||type!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",encoding)),image}__name(setTextureParameters,"setTextureParameters"),__name(initTexture,"initTexture"),__name(uploadTexture,"uploadTexture"),__name(uploadCubeTexture,"uploadCubeTexture"),__name(setupFrameBufferTexture,"setupFrameBufferTexture"),__name(setupRenderBufferStorage,"setupRenderBufferStorage"),__name(setupDepthTexture,"setupDepthTexture"),__name(setupDepthRenderbuffer,"setupDepthRenderbuffer"),__name(rebindTextures,"rebindTextures"),__name(setupRenderTarget,"setupRenderTarget"),__name(updateRenderTargetMipmap,"updateRenderTargetMipmap"),__name(updateMultisampleRenderTarget,"updateMultisampleRenderTarget"),__name(getRenderTargetSamples,"getRenderTargetSamples"),__name(useMultisampledRTT,"useMultisampledRTT"),__name(updateVideoTexture,"updateVideoTexture"),__name(verifyColorSpace,"verifyColorSpace"),this.allocateTextureUnit=allocateTextureUnit,this.resetTextureUnits=resetTextureUnits,this.setTexture2D=setTexture2D,this.setTexture2DArray=setTexture2DArray,this.setTexture3D=setTexture3D,this.setTextureCube=setTextureCube,this.rebindTextures=rebindTextures,this.setupRenderTarget=setupRenderTarget,this.updateRenderTargetMipmap=updateRenderTargetMipmap,this.updateMultisampleRenderTarget=updateMultisampleRenderTarget,this.setupDepthRenderbuffer=setupDepthRenderbuffer,this.setupFrameBufferTexture=setupFrameBufferTexture,this.useMultisampledRTT=useMultisampledRTT}function WebGLUtils(gl,extensions,capabilities){const isWebGL2=capabilities.isWebGL2;function convert(p,encoding=null){let extension;if(p===UnsignedByteType)return 5121;if(p===UnsignedShort4444Type)return 32819;if(p===UnsignedShort5551Type)return 32820;if(p===ByteType)return 5120;if(p===ShortType)return 5122;if(p===UnsignedShortType)return 5123;if(p===IntType)return 5124;if(p===UnsignedIntType)return 5125;if(p===FloatType)return 5126;if(p===HalfFloatType)return isWebGL2?5131:(extension=extensions.get("OES_texture_half_float"),null!==extension?extension.HALF_FLOAT_OES:null);if(p===AlphaFormat)return 6406;if(p===RGBAFormat)return 6408;if(p===LuminanceFormat)return 6409;if(p===LuminanceAlphaFormat)return 6410;if(p===DepthFormat)return 6402;if(p===DepthStencilFormat)return 34041;if(p===RGBFormat)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(p===_SRGBAFormat)return extension=extensions.get("EXT_sRGB"),null!==extension?extension.SRGB_ALPHA_EXT:null;if(p===RedFormat)return 6403;if(p===RedIntegerFormat)return 36244;if(p===RGFormat)return 33319;if(p===RGIntegerFormat)return 33320;if(p===RGBAIntegerFormat)return 36249;if(p===RGB_S3TC_DXT1_Format||p===RGBA_S3TC_DXT1_Format||p===RGBA_S3TC_DXT3_Format||p===RGBA_S3TC_DXT5_Format)if(encoding===sRGBEncoding){if(extension=extensions.get("WEBGL_compressed_texture_s3tc_srgb"),null===extension)return null;if(p===RGB_S3TC_DXT1_Format)return extension.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(p===RGBA_S3TC_DXT1_Format)return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(p===RGBA_S3TC_DXT3_Format)return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(p===RGBA_S3TC_DXT5_Format)return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(extension=extensions.get("WEBGL_compressed_texture_s3tc"),null===extension)return null;if(p===RGB_S3TC_DXT1_Format)return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===RGBA_S3TC_DXT1_Format)return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===RGBA_S3TC_DXT3_Format)return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===RGBA_S3TC_DXT5_Format)return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(p===RGB_PVRTC_4BPPV1_Format||p===RGB_PVRTC_2BPPV1_Format||p===RGBA_PVRTC_4BPPV1_Format||p===RGBA_PVRTC_2BPPV1_Format){if(extension=extensions.get("WEBGL_compressed_texture_pvrtc"),null===extension)return null;if(p===RGB_PVRTC_4BPPV1_Format)return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===RGB_PVRTC_2BPPV1_Format)return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===RGBA_PVRTC_4BPPV1_Format)return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===RGBA_PVRTC_2BPPV1_Format)return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(p===RGB_ETC1_Format)return extension=extensions.get("WEBGL_compressed_texture_etc1"),null!==extension?extension.COMPRESSED_RGB_ETC1_WEBGL:null;if(p===RGB_ETC2_Format||p===RGBA_ETC2_EAC_Format){if(extension=extensions.get("WEBGL_compressed_texture_etc"),null===extension)return null;if(p===RGB_ETC2_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ETC2:extension.COMPRESSED_RGB8_ETC2;if(p===RGBA_ETC2_EAC_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:extension.COMPRESSED_RGBA8_ETC2_EAC}if(p===RGBA_ASTC_4x4_Format||p===RGBA_ASTC_5x4_Format||p===RGBA_ASTC_5x5_Format||p===RGBA_ASTC_6x5_Format||p===RGBA_ASTC_6x6_Format||p===RGBA_ASTC_8x5_Format||p===RGBA_ASTC_8x6_Format||p===RGBA_ASTC_8x8_Format||p===RGBA_ASTC_10x5_Format||p===RGBA_ASTC_10x6_Format||p===RGBA_ASTC_10x8_Format||p===RGBA_ASTC_10x10_Format||p===RGBA_ASTC_12x10_Format||p===RGBA_ASTC_12x12_Format){if(extension=extensions.get("WEBGL_compressed_texture_astc"),null===extension)return null;if(p===RGBA_ASTC_4x4_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:extension.COMPRESSED_RGBA_ASTC_4x4_KHR;if(p===RGBA_ASTC_5x4_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:extension.COMPRESSED_RGBA_ASTC_5x4_KHR;if(p===RGBA_ASTC_5x5_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:extension.COMPRESSED_RGBA_ASTC_5x5_KHR;if(p===RGBA_ASTC_6x5_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:extension.COMPRESSED_RGBA_ASTC_6x5_KHR;if(p===RGBA_ASTC_6x6_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:extension.COMPRESSED_RGBA_ASTC_6x6_KHR;if(p===RGBA_ASTC_8x5_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:extension.COMPRESSED_RGBA_ASTC_8x5_KHR;if(p===RGBA_ASTC_8x6_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:extension.COMPRESSED_RGBA_ASTC_8x6_KHR;if(p===RGBA_ASTC_8x8_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:extension.COMPRESSED_RGBA_ASTC_8x8_KHR;if(p===RGBA_ASTC_10x5_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:extension.COMPRESSED_RGBA_ASTC_10x5_KHR;if(p===RGBA_ASTC_10x6_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:extension.COMPRESSED_RGBA_ASTC_10x6_KHR;if(p===RGBA_ASTC_10x8_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:extension.COMPRESSED_RGBA_ASTC_10x8_KHR;if(p===RGBA_ASTC_10x10_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:extension.COMPRESSED_RGBA_ASTC_10x10_KHR;if(p===RGBA_ASTC_12x10_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:extension.COMPRESSED_RGBA_ASTC_12x10_KHR;if(p===RGBA_ASTC_12x12_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:extension.COMPRESSED_RGBA_ASTC_12x12_KHR}if(p===RGBA_BPTC_Format){if(extension=extensions.get("EXT_texture_compression_bptc"),null===extension)return null;if(p===RGBA_BPTC_Format)return encoding===sRGBEncoding?extension.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:extension.COMPRESSED_RGBA_BPTC_UNORM_EXT}return p===UnsignedInt248Type?isWebGL2?34042:(extension=extensions.get("WEBGL_depth_texture"),null!==extension?extension.UNSIGNED_INT_24_8_WEBGL:null):void 0!==gl[p]?gl[p]:null}return __name(convert,"convert"),{convert}}__name(WebGLShadowMap,"WebGLShadowMap"),__name(WebGLState,"WebGLState"),__name(WebGLTextures,"WebGLTextures"),__name(WebGLUtils,"WebGLUtils");class ArrayCamera extends PerspectiveCamera{constructor(array=[]){super(),this.isArrayCamera=!0,this.cameras=array}}__name(ArrayCamera,"ArrayCamera");class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}__name(Group,"Group");const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector32,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector32),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector32,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector32),this._grip}dispatchEvent(event){return null!==this._targetRay&&this._targetRay.dispatchEvent(event),null!==this._grip&&this._grip.dispatchEvent(event),null!==this._hand&&this._hand.dispatchEvent(event),this}connect(inputSource){if(inputSource&&inputSource.hand){const hand=this._hand;if(hand)for(const inputjoint of inputSource.hand.values())this._getHandJoint(hand,inputjoint)}return this.dispatchEvent({type:"connected",data:inputSource}),this}disconnect(inputSource){return this.dispatchEvent({type:"disconnected",data:inputSource}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(inputSource,frame,referenceSpace){let inputPose=null,gripPose=null,handPose=null;const targetRay=this._targetRay,grip=this._grip,hand=this._hand;if(inputSource&&"visible-blurred"!==frame.session.visibilityState){if(hand&&inputSource.hand){handPose=!0;for(const inputjoint of inputSource.hand.values()){const jointPose=frame.getJointPose(inputjoint,referenceSpace),joint=this._getHandJoint(hand,inputjoint);null!==jointPose&&(joint.matrix.fromArray(jointPose.transform.matrix),joint.matrix.decompose(joint.position,joint.rotation,joint.scale),joint.jointRadius=jointPose.radius),joint.visible=null!==jointPose}const distance=hand.joints["index-finger-tip"].position.distanceTo(hand.joints["thumb-tip"].position),distanceToPinch=.02,threshold=.005;hand.inputState.pinching&&distance>distanceToPinch+threshold?(hand.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:inputSource.handedness,target:this})):!hand.inputState.pinching&&distance<=distanceToPinch-threshold&&(hand.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:inputSource.handedness,target:this}))}else null!==grip&&inputSource.gripSpace&&(gripPose=frame.getPose(inputSource.gripSpace,referenceSpace),null!==gripPose&&(grip.matrix.fromArray(gripPose.transform.matrix),grip.matrix.decompose(grip.position,grip.rotation,grip.scale),gripPose.linearVelocity?(grip.hasLinearVelocity=!0,grip.linearVelocity.copy(gripPose.linearVelocity)):grip.hasLinearVelocity=!1,gripPose.angularVelocity?(grip.hasAngularVelocity=!0,grip.angularVelocity.copy(gripPose.angularVelocity)):grip.hasAngularVelocity=!1));null!==targetRay&&(inputPose=frame.getPose(inputSource.targetRaySpace,referenceSpace),null===inputPose&&null!==gripPose&&(inputPose=gripPose),null!==inputPose&&(targetRay.matrix.fromArray(inputPose.transform.matrix),targetRay.matrix.decompose(targetRay.position,targetRay.rotation,targetRay.scale),inputPose.linearVelocity?(targetRay.hasLinearVelocity=!0,targetRay.linearVelocity.copy(inputPose.linearVelocity)):targetRay.hasLinearVelocity=!1,inputPose.angularVelocity?(targetRay.hasAngularVelocity=!0,targetRay.angularVelocity.copy(inputPose.angularVelocity)):targetRay.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return null!==targetRay&&(targetRay.visible=null!==inputPose),null!==grip&&(grip.visible=null!==gripPose),null!==hand&&(hand.visible=null!==handPose),this}_getHandJoint(hand,inputjoint){if(void 0===hand.joints[inputjoint.jointName]){const joint=new Group;joint.matrixAutoUpdate=!1,joint.visible=!1,hand.joints[inputjoint.jointName]=joint,hand.add(joint)}return hand.joints[inputjoint.jointName]}}__name(WebXRController,"WebXRController");class DepthTexture extends Texture{constructor(width,height,type,mapping,wrapS,wrapT,magFilter,minFilter,anisotropy,format){if((format=void 0!==format?format:DepthFormat)!==DepthFormat&&format!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===type&&format===DepthFormat&&(type=UnsignedIntType),void 0===type&&format===DepthStencilFormat&&(type=UnsignedInt248Type),super(null,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.isDepthTexture=!0,this.image={width,height},this.magFilter=void 0!==magFilter?magFilter:NearestFilter,this.minFilter=void 0!==minFilter?minFilter:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}__name(DepthTexture,"DepthTexture");class WebXRManager extends EventDispatcher{constructor(renderer,gl){super();const scope=this;let session=null,framebufferScaleFactor=1,referenceSpace=null,referenceSpaceType="local-floor",customReferenceSpace=null,pose=null,glBinding=null,glProjLayer=null,glBaseLayer=null,xrFrame=null;const attributes=gl.getContextAttributes();let initialRenderTarget=null,newRenderTarget=null;const controllers=[],controllerInputSources=[],planes=new Set,planesLastChangedTimes=new Map,cameraL=new PerspectiveCamera;cameraL.layers.enable(1),cameraL.viewport=new Vector4;const cameraR=new PerspectiveCamera;cameraR.layers.enable(2),cameraR.viewport=new Vector4;const cameras=[cameraL,cameraR],cameraVR=new ArrayCamera;cameraVR.layers.enable(1),cameraVR.layers.enable(2);let _currentDepthNear=null,_currentDepthFar=null;function onSessionEvent(event){const controllerIndex=controllerInputSources.indexOf(event.inputSource);if(-1===controllerIndex)return;const controller=controllers[controllerIndex];void 0!==controller&&controller.dispatchEvent({type:event.type,data:event.inputSource})}function onSessionEnd(){session.removeEventListener("select",onSessionEvent),session.removeEventListener("selectstart",onSessionEvent),session.removeEventListener("selectend",onSessionEvent),session.removeEventListener("squeeze",onSessionEvent),session.removeEventListener("squeezestart",onSessionEvent),session.removeEventListener("squeezeend",onSessionEvent),session.removeEventListener("end",onSessionEnd),session.removeEventListener("inputsourceschange",onInputSourcesChange);for(let i=0;i<controllers.length;i++){const inputSource=controllerInputSources[i];null!==inputSource&&(controllerInputSources[i]=null,controllers[i].disconnect(inputSource))}_currentDepthNear=null,_currentDepthFar=null,renderer.setRenderTarget(initialRenderTarget),glBaseLayer=null,glProjLayer=null,glBinding=null,session=null,newRenderTarget=null,animation.stop(),scope.isPresenting=!1,scope.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(event){for(let i=0;i<event.removed.length;i++){const inputSource=event.removed[i],index=controllerInputSources.indexOf(inputSource);index>=0&&(controllerInputSources[index]=null,controllers[index].disconnect(inputSource))}for(let i=0;i<event.added.length;i++){const inputSource=event.added[i];let controllerIndex=controllerInputSources.indexOf(inputSource);if(-1===controllerIndex){for(let i2=0;i2<controllers.length;i2++){if(i2>=controllerInputSources.length){controllerInputSources.push(inputSource),controllerIndex=i2;break}if(null===controllerInputSources[i2]){controllerInputSources[i2]=inputSource,controllerIndex=i2;break}}if(-1===controllerIndex)break}const controller=controllers[controllerIndex];controller&&controller.connect(inputSource)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(index){let controller=controllers[index];return void 0===controller&&(controller=new WebXRController,controllers[index]=controller),controller.getTargetRaySpace()},this.getControllerGrip=function(index){let controller=controllers[index];return void 0===controller&&(controller=new WebXRController,controllers[index]=controller),controller.getGripSpace()},this.getHand=function(index){let controller=controllers[index];return void 0===controller&&(controller=new WebXRController,controllers[index]=controller),controller.getHandSpace()},__name(onSessionEvent,"onSessionEvent"),__name(onSessionEnd,"onSessionEnd"),this.setFramebufferScaleFactor=function(value){framebufferScaleFactor=value,!0===scope.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(value){referenceSpaceType=value,!0===scope.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return customReferenceSpace||referenceSpace},this.setReferenceSpace=function(space){customReferenceSpace=space},this.getBaseLayer=function(){return null!==glProjLayer?glProjLayer:glBaseLayer},this.getBinding=function(){return glBinding},this.getFrame=function(){return xrFrame},this.getSession=function(){return session},this.setSession=function(){var _ref=(0,_home_runner_work_galaxy_galaxy_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)(function*(value){if(session=value,null!==session){if(initialRenderTarget=renderer.getRenderTarget(),session.addEventListener("select",onSessionEvent),session.addEventListener("selectstart",onSessionEvent),session.addEventListener("selectend",onSessionEvent),session.addEventListener("squeeze",onSessionEvent),session.addEventListener("squeezestart",onSessionEvent),session.addEventListener("squeezeend",onSessionEvent),session.addEventListener("end",onSessionEnd),session.addEventListener("inputsourceschange",onInputSourcesChange),!0!==attributes.xrCompatible&&(yield gl.makeXRCompatible()),void 0===session.renderState.layers||!1===renderer.capabilities.isWebGL2)glBaseLayer=new XRWebGLLayer(session,gl,{antialias:void 0!==session.renderState.layers||attributes.antialias,alpha:attributes.alpha,depth:attributes.depth,stencil:attributes.stencil,framebufferScaleFactor}),session.updateRenderState({baseLayer:glBaseLayer}),newRenderTarget=new WebGLRenderTarget(glBaseLayer.framebufferWidth,glBaseLayer.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:renderer.outputEncoding,stencilBuffer:attributes.stencil});else{let depthFormat=null,depthType=null,glDepthFormat=null;attributes.depth&&(glDepthFormat=attributes.stencil?35056:33190,depthFormat=attributes.stencil?DepthStencilFormat:DepthFormat,depthType=attributes.stencil?UnsignedInt248Type:UnsignedIntType);const projectionlayerInit={colorFormat:32856,depthFormat:glDepthFormat,scaleFactor:framebufferScaleFactor};glBinding=new XRWebGLBinding(session,gl),glProjLayer=glBinding.createProjectionLayer(projectionlayerInit),session.updateRenderState({layers:[glProjLayer]}),newRenderTarget=new WebGLRenderTarget(glProjLayer.textureWidth,glProjLayer.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(glProjLayer.textureWidth,glProjLayer.textureHeight,depthType,void 0,void 0,void 0,void 0,void 0,void 0,depthFormat),stencilBuffer:attributes.stencil,encoding:renderer.outputEncoding,samples:attributes.antialias?4:0}),renderer.properties.get(newRenderTarget).__ignoreDepthValues=glProjLayer.ignoreDepthValues}newRenderTarget.isXRRenderTarget=!0,this.setFoveation(1),customReferenceSpace=null,referenceSpace=yield session.requestReferenceSpace(referenceSpaceType),animation.setContext(session),animation.start(),scope.isPresenting=!0,scope.dispatchEvent({type:"sessionstart"})}});return function(_x2){return _ref.apply(this,arguments)}}(),__name(onInputSourcesChange,"onInputSourcesChange");const cameraLPos=new Vector32,cameraRPos=new Vector32;function setProjectionFromUnion(camera,cameraL2,cameraR2){cameraLPos.setFromMatrixPosition(cameraL2.matrixWorld),cameraRPos.setFromMatrixPosition(cameraR2.matrixWorld);const ipd=cameraLPos.distanceTo(cameraRPos),projL=cameraL2.projectionMatrix.elements,projR=cameraR2.projectionMatrix.elements,near=projL[14]/(projL[10]-1),far=projL[14]/(projL[10]+1),topFov=(projL[9]+1)/projL[5],bottomFov=(projL[9]-1)/projL[5],leftFov=(projL[8]-1)/projL[0],rightFov=(projR[8]+1)/projR[0],left=near*leftFov,right=near*rightFov,zOffset=ipd/(-leftFov+rightFov),xOffset=zOffset*-leftFov;cameraL2.matrixWorld.decompose(camera.position,camera.quaternion,camera.scale),camera.translateX(xOffset),camera.translateZ(zOffset),camera.matrixWorld.compose(camera.position,camera.quaternion,camera.scale),camera.matrixWorldInverse.copy(camera.matrixWorld).invert();const near2=near+zOffset,far2=far+zOffset;camera.projectionMatrix.makePerspective(left-xOffset,right+(ipd-xOffset),topFov*far/far2*near2,bottomFov*far/far2*near2,near2,far2)}function updateCamera(camera,parent){null===parent?camera.matrixWorld.copy(camera.matrix):camera.matrixWorld.multiplyMatrices(parent.matrixWorld,camera.matrix),camera.matrixWorldInverse.copy(camera.matrixWorld).invert()}__name(setProjectionFromUnion,"setProjectionFromUnion"),__name(updateCamera,"updateCamera"),this.updateCamera=function(camera){if(null===session)return;cameraVR.near=cameraR.near=cameraL.near=camera.near,cameraVR.far=cameraR.far=cameraL.far=camera.far,(_currentDepthNear!==cameraVR.near||_currentDepthFar!==cameraVR.far)&&(session.updateRenderState({depthNear:cameraVR.near,depthFar:cameraVR.far}),_currentDepthNear=cameraVR.near,_currentDepthFar=cameraVR.far);const parent=camera.parent,cameras2=cameraVR.cameras;updateCamera(cameraVR,parent);for(let i=0;i<cameras2.length;i++)updateCamera(cameras2[i],parent);cameraVR.matrixWorld.decompose(cameraVR.position,cameraVR.quaternion,cameraVR.scale),camera.matrix.copy(cameraVR.matrix),camera.matrix.decompose(camera.position,camera.quaternion,camera.scale);const children=camera.children;for(let i=0,l=children.length;i<l;i++)children[i].updateMatrixWorld(!0);2===cameras2.length?setProjectionFromUnion(cameraVR,cameraL,cameraR):cameraVR.projectionMatrix.copy(cameraL.projectionMatrix)},this.getCamera=function(){return cameraVR},this.getFoveation=function(){return null!==glProjLayer?glProjLayer.fixedFoveation:null!==glBaseLayer?glBaseLayer.fixedFoveation:void 0},this.setFoveation=function(foveation){null!==glProjLayer&&(glProjLayer.fixedFoveation=foveation),null!==glBaseLayer&&void 0!==glBaseLayer.fixedFoveation&&(glBaseLayer.fixedFoveation=foveation)},this.getPlanes=function(){return planes};let onAnimationFrameCallback=null;function onAnimationFrame(time,frame){if(pose=frame.getViewerPose(customReferenceSpace||referenceSpace),xrFrame=frame,null!==pose){const views=pose.views;null!==glBaseLayer&&(renderer.setRenderTargetFramebuffer(newRenderTarget,glBaseLayer.framebuffer),renderer.setRenderTarget(newRenderTarget));let cameraVRNeedsUpdate=!1;views.length!==cameraVR.cameras.length&&(cameraVR.cameras.length=0,cameraVRNeedsUpdate=!0);for(let i=0;i<views.length;i++){const view=views[i];let viewport=null;if(null!==glBaseLayer)viewport=glBaseLayer.getViewport(view);else{const glSubImage=glBinding.getViewSubImage(glProjLayer,view);viewport=glSubImage.viewport,0===i&&(renderer.setRenderTargetTextures(newRenderTarget,glSubImage.colorTexture,glProjLayer.ignoreDepthValues?void 0:glSubImage.depthStencilTexture),renderer.setRenderTarget(newRenderTarget))}let camera=cameras[i];void 0===camera&&(camera=new PerspectiveCamera,camera.layers.enable(i),camera.viewport=new Vector4,cameras[i]=camera),camera.matrix.fromArray(view.transform.matrix),camera.projectionMatrix.fromArray(view.projectionMatrix),camera.viewport.set(viewport.x,viewport.y,viewport.width,viewport.height),0===i&&cameraVR.matrix.copy(camera.matrix),!0===cameraVRNeedsUpdate&&cameraVR.cameras.push(camera)}}for(let i=0;i<controllers.length;i++){const inputSource=controllerInputSources[i],controller=controllers[i];null!==inputSource&&void 0!==controller&&controller.update(inputSource,frame,customReferenceSpace||referenceSpace)}if(onAnimationFrameCallback&&onAnimationFrameCallback(time,frame),frame.detectedPlanes){scope.dispatchEvent({type:"planesdetected",data:frame.detectedPlanes});let planesToRemove=null;for(const plane of planes)frame.detectedPlanes.has(plane)||(null===planesToRemove&&(planesToRemove=[]),planesToRemove.push(plane));if(null!==planesToRemove)for(const plane of planesToRemove)planes.delete(plane),planesLastChangedTimes.delete(plane),scope.dispatchEvent({type:"planeremoved",data:plane});for(const plane of frame.detectedPlanes)if(planes.has(plane)){const lastKnownTime=planesLastChangedTimes.get(plane);plane.lastChangedTime>lastKnownTime&&(planesLastChangedTimes.set(plane,plane.lastChangedTime),scope.dispatchEvent({type:"planechanged",data:plane}))}else planes.add(plane),planesLastChangedTimes.set(plane,frame.lastChangedTime),scope.dispatchEvent({type:"planeadded",data:plane})}xrFrame=null}__name(onAnimationFrame,"onAnimationFrame");const animation=new WebGLAnimation;animation.setAnimationLoop(onAnimationFrame),this.setAnimationLoop=function(callback){onAnimationFrameCallback=callback},this.dispose=function(){}}}function WebGLMaterials(renderer,properties){function refreshFogUniforms(uniforms,fog){fog.color.getRGB(uniforms.fogColor.value,getUnlitUniformColorSpace(renderer)),fog.isFog?(uniforms.fogNear.value=fog.near,uniforms.fogFar.value=fog.far):fog.isFogExp2&&(uniforms.fogDensity.value=fog.density)}function refreshMaterialUniforms(uniforms,material,pixelRatio,height,transmissionRenderTarget){material.isMeshBasicMaterial||material.isMeshLambertMaterial?refreshUniformsCommon(uniforms,material):material.isMeshToonMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsToon(uniforms,material)):material.isMeshPhongMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsPhong(uniforms,material)):material.isMeshStandardMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsStandard(uniforms,material),material.isMeshPhysicalMaterial&&refreshUniformsPhysical(uniforms,material,transmissionRenderTarget)):material.isMeshMatcapMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsMatcap(uniforms,material)):material.isMeshDepthMaterial?refreshUniformsCommon(uniforms,material):material.isMeshDistanceMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsDistance(uniforms,material)):material.isMeshNormalMaterial?refreshUniformsCommon(uniforms,material):material.isLineBasicMaterial?(refreshUniformsLine(uniforms,material),material.isLineDashedMaterial&&refreshUniformsDash(uniforms,material)):material.isPointsMaterial?refreshUniformsPoints(uniforms,material,pixelRatio,height):material.isSpriteMaterial?refreshUniformsSprites(uniforms,material):material.isShadowMaterial?(uniforms.color.value.copy(material.color),uniforms.opacity.value=material.opacity):material.isShaderMaterial&&(material.uniformsNeedUpdate=!1)}function refreshUniformsCommon(uniforms,material){uniforms.opacity.value=material.opacity,material.color&&uniforms.diffuse.value.copy(material.color),material.emissive&&uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity),material.map&&(uniforms.map.value=material.map),material.alphaMap&&(uniforms.alphaMap.value=material.alphaMap),material.bumpMap&&(uniforms.bumpMap.value=material.bumpMap,uniforms.bumpScale.value=material.bumpScale,material.side===BackSide&&(uniforms.bumpScale.value*=-1)),material.displacementMap&&(uniforms.displacementMap.value=material.displacementMap,uniforms.displacementScale.value=material.displacementScale,uniforms.displacementBias.value=material.displacementBias),material.emissiveMap&&(uniforms.emissiveMap.value=material.emissiveMap),material.normalMap&&(uniforms.normalMap.value=material.normalMap,uniforms.normalScale.value.copy(material.normalScale),material.side===BackSide&&uniforms.normalScale.value.negate()),material.specularMap&&(uniforms.specularMap.value=material.specularMap),material.alphaTest>0&&(uniforms.alphaTest.value=material.alphaTest);const envMap=properties.get(material).envMap;if(envMap&&(uniforms.envMap.value=envMap,uniforms.flipEnvMap.value=envMap.isCubeTexture&&!1===envMap.isRenderTargetTexture?-1:1,uniforms.reflectivity.value=material.reflectivity,uniforms.ior.value=material.ior,uniforms.refractionRatio.value=material.refractionRatio),material.lightMap){uniforms.lightMap.value=material.lightMap;const scaleFactor=!0!==renderer.physicallyCorrectLights?Math.PI:1;uniforms.lightMapIntensity.value=material.lightMapIntensity*scaleFactor}let uvScaleMap,uv2ScaleMap;material.aoMap&&(uniforms.aoMap.value=material.aoMap,uniforms.aoMapIntensity.value=material.aoMapIntensity),material.map?uvScaleMap=material.map:material.specularMap?uvScaleMap=material.specularMap:material.displacementMap?uvScaleMap=material.displacementMap:material.normalMap?uvScaleMap=material.normalMap:material.bumpMap?uvScaleMap=material.bumpMap:material.roughnessMap?uvScaleMap=material.roughnessMap:material.metalnessMap?uvScaleMap=material.metalnessMap:material.alphaMap?uvScaleMap=material.alphaMap:material.emissiveMap?uvScaleMap=material.emissiveMap:material.clearcoatMap?uvScaleMap=material.clearcoatMap:material.clearcoatNormalMap?uvScaleMap=material.clearcoatNormalMap:material.clearcoatRoughnessMap?uvScaleMap=material.clearcoatRoughnessMap:material.iridescenceMap?uvScaleMap=material.iridescenceMap:material.iridescenceThicknessMap?uvScaleMap=material.iridescenceThicknessMap:material.specularIntensityMap?uvScaleMap=material.specularIntensityMap:material.specularColorMap?uvScaleMap=material.specularColorMap:material.transmissionMap?uvScaleMap=material.transmissionMap:material.thicknessMap?uvScaleMap=material.thicknessMap:material.sheenColorMap?uvScaleMap=material.sheenColorMap:material.sheenRoughnessMap&&(uvScaleMap=material.sheenRoughnessMap),void 0!==uvScaleMap&&(uvScaleMap.isWebGLRenderTarget&&(uvScaleMap=uvScaleMap.texture),!0===uvScaleMap.matrixAutoUpdate&&uvScaleMap.updateMatrix(),uniforms.uvTransform.value.copy(uvScaleMap.matrix)),material.aoMap?uv2ScaleMap=material.aoMap:material.lightMap&&(uv2ScaleMap=material.lightMap),void 0!==uv2ScaleMap&&(uv2ScaleMap.isWebGLRenderTarget&&(uv2ScaleMap=uv2ScaleMap.texture),!0===uv2ScaleMap.matrixAutoUpdate&&uv2ScaleMap.updateMatrix(),uniforms.uv2Transform.value.copy(uv2ScaleMap.matrix))}function refreshUniformsLine(uniforms,material){uniforms.diffuse.value.copy(material.color),uniforms.opacity.value=material.opacity}function refreshUniformsDash(uniforms,material){uniforms.dashSize.value=material.dashSize,uniforms.totalSize.value=material.dashSize+material.gapSize,uniforms.scale.value=material.scale}function refreshUniformsPoints(uniforms,material,pixelRatio,height){let uvScaleMap;uniforms.diffuse.value.copy(material.color),uniforms.opacity.value=material.opacity,uniforms.size.value=material.size*pixelRatio,uniforms.scale.value=.5*height,material.map&&(uniforms.map.value=material.map),material.alphaMap&&(uniforms.alphaMap.value=material.alphaMap),material.alphaTest>0&&(uniforms.alphaTest.value=material.alphaTest),material.map?uvScaleMap=material.map:material.alphaMap&&(uvScaleMap=material.alphaMap),void 0!==uvScaleMap&&(!0===uvScaleMap.matrixAutoUpdate&&uvScaleMap.updateMatrix(),uniforms.uvTransform.value.copy(uvScaleMap.matrix))}function refreshUniformsSprites(uniforms,material){let uvScaleMap;uniforms.diffuse.value.copy(material.color),uniforms.opacity.value=material.opacity,uniforms.rotation.value=material.rotation,material.map&&(uniforms.map.value=material.map),material.alphaMap&&(uniforms.alphaMap.value=material.alphaMap),material.alphaTest>0&&(uniforms.alphaTest.value=material.alphaTest),material.map?uvScaleMap=material.map:material.alphaMap&&(uvScaleMap=material.alphaMap),void 0!==uvScaleMap&&(!0===uvScaleMap.matrixAutoUpdate&&uvScaleMap.updateMatrix(),uniforms.uvTransform.value.copy(uvScaleMap.matrix))}function refreshUniformsPhong(uniforms,material){uniforms.specular.value.copy(material.specular),uniforms.shininess.value=Math.max(material.shininess,1e-4)}function refreshUniformsToon(uniforms,material){material.gradientMap&&(uniforms.gradientMap.value=material.gradientMap)}function refreshUniformsStandard(uniforms,material){uniforms.roughness.value=material.roughness,uniforms.metalness.value=material.metalness,material.roughnessMap&&(uniforms.roughnessMap.value=material.roughnessMap),material.metalnessMap&&(uniforms.metalnessMap.value=material.metalnessMap),properties.get(material).envMap&&(uniforms.envMapIntensity.value=material.envMapIntensity)}function refreshUniformsPhysical(uniforms,material,transmissionRenderTarget){uniforms.ior.value=material.ior,material.sheen>0&&(uniforms.sheenColor.value.copy(material.sheenColor).multiplyScalar(material.sheen),uniforms.sheenRoughness.value=material.sheenRoughness,material.sheenColorMap&&(uniforms.sheenColorMap.value=material.sheenColorMap),material.sheenRoughnessMap&&(uniforms.sheenRoughnessMap.value=material.sheenRoughnessMap)),material.clearcoat>0&&(uniforms.clearcoat.value=material.clearcoat,uniforms.clearcoatRoughness.value=material.clearcoatRoughness,material.clearcoatMap&&(uniforms.clearcoatMap.value=material.clearcoatMap),material.clearcoatRoughnessMap&&(uniforms.clearcoatRoughnessMap.value=material.clearcoatRoughnessMap),material.clearcoatNormalMap&&(uniforms.clearcoatNormalScale.value.copy(material.clearcoatNormalScale),uniforms.clearcoatNormalMap.value=material.clearcoatNormalMap,material.side===BackSide&&uniforms.clearcoatNormalScale.value.negate())),material.iridescence>0&&(uniforms.iridescence.value=material.iridescence,uniforms.iridescenceIOR.value=material.iridescenceIOR,uniforms.iridescenceThicknessMinimum.value=material.iridescenceThicknessRange[0],uniforms.iridescenceThicknessMaximum.value=material.iridescenceThicknessRange[1],material.iridescenceMap&&(uniforms.iridescenceMap.value=material.iridescenceMap),material.iridescenceThicknessMap&&(uniforms.iridescenceThicknessMap.value=material.iridescenceThicknessMap)),material.transmission>0&&(uniforms.transmission.value=material.transmission,uniforms.transmissionSamplerMap.value=transmissionRenderTarget.texture,uniforms.transmissionSamplerSize.value.set(transmissionRenderTarget.width,transmissionRenderTarget.height),material.transmissionMap&&(uniforms.transmissionMap.value=material.transmissionMap),uniforms.thickness.value=material.thickness,material.thicknessMap&&(uniforms.thicknessMap.value=material.thicknessMap),uniforms.attenuationDistance.value=material.attenuationDistance,uniforms.attenuationColor.value.copy(material.attenuationColor)),uniforms.specularIntensity.value=material.specularIntensity,uniforms.specularColor.value.copy(material.specularColor),material.specularIntensityMap&&(uniforms.specularIntensityMap.value=material.specularIntensityMap),material.specularColorMap&&(uniforms.specularColorMap.value=material.specularColorMap)}function refreshUniformsMatcap(uniforms,material){material.matcap&&(uniforms.matcap.value=material.matcap)}function refreshUniformsDistance(uniforms,material){uniforms.referencePosition.value.copy(material.referencePosition),uniforms.nearDistance.value=material.nearDistance,uniforms.farDistance.value=material.farDistance}return __name(refreshFogUniforms,"refreshFogUniforms"),__name(refreshMaterialUniforms,"refreshMaterialUniforms"),__name(refreshUniformsCommon,"refreshUniformsCommon"),__name(refreshUniformsLine,"refreshUniformsLine"),__name(refreshUniformsDash,"refreshUniformsDash"),__name(refreshUniformsPoints,"refreshUniformsPoints"),__name(refreshUniformsSprites,"refreshUniformsSprites"),__name(refreshUniformsPhong,"refreshUniformsPhong"),__name(refreshUniformsToon,"refreshUniformsToon"),__name(refreshUniformsStandard,"refreshUniformsStandard"),__name(refreshUniformsPhysical,"refreshUniformsPhysical"),__name(refreshUniformsMatcap,"refreshUniformsMatcap"),__name(refreshUniformsDistance,"refreshUniformsDistance"),{refreshFogUniforms,refreshMaterialUniforms}}function WebGLUniformsGroups(gl,info,capabilities,state){let buffers={},updateList={},allocatedBindingPoints=[];const maxBindingPoints=capabilities.isWebGL2?gl.getParameter(35375):0;function bind(uniformsGroup,program){state.uniformBlockBinding(uniformsGroup,program.program)}function update(uniformsGroup,program){let buffer=buffers[uniformsGroup.id];void 0===buffer&&(prepareUniformsGroup(uniformsGroup),buffer=createBuffer(uniformsGroup),buffers[uniformsGroup.id]=buffer,uniformsGroup.addEventListener("dispose",onUniformsGroupsDispose)),state.updateUBOMapping(uniformsGroup,program.program);const frame=info.render.frame;updateList[uniformsGroup.id]!==frame&&(updateBufferData(uniformsGroup),updateList[uniformsGroup.id]=frame)}function createBuffer(uniformsGroup){const bindingPointIndex=allocateBindingPointIndex();uniformsGroup.__bindingPointIndex=bindingPointIndex;const buffer=gl.createBuffer(),size=uniformsGroup.__size,usage=uniformsGroup.usage;return gl.bindBuffer(35345,buffer),gl.bufferData(35345,size,usage),gl.bindBuffer(35345,null),gl.bindBufferBase(35345,bindingPointIndex,buffer),buffer}function allocateBindingPointIndex(){for(let i=0;i<maxBindingPoints;i++)if(-1===allocatedBindingPoints.indexOf(i))return allocatedBindingPoints.push(i),i;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function updateBufferData(uniformsGroup){const uniforms=uniformsGroup.uniforms,cache=uniformsGroup.__cache;gl.bindBuffer(35345,buffers[uniformsGroup.id]);for(let i=0,il=uniforms.length;i<il;i++){const uniform=uniforms[i];if(!0===hasUniformChanged(uniform,i,cache)){const offset=uniform.__offset,values=Array.isArray(uniform.value)?uniform.value:[uniform.value];let arrayOffset=0;for(let i2=0;i2<values.length;i2++){const value=values[i2],info2=getUniformSize(value);"number"==typeof value?(uniform.__data[0]=value,gl.bufferSubData(35345,offset+arrayOffset,uniform.__data)):value.isMatrix3?(uniform.__data[0]=value.elements[0],uniform.__data[1]=value.elements[1],uniform.__data[2]=value.elements[2],uniform.__data[3]=value.elements[0],uniform.__data[4]=value.elements[3],uniform.__data[5]=value.elements[4],uniform.__data[6]=value.elements[5],uniform.__data[7]=value.elements[0],uniform.__data[8]=value.elements[6],uniform.__data[9]=value.elements[7],uniform.__data[10]=value.elements[8],uniform.__data[11]=value.elements[0]):(value.toArray(uniform.__data,arrayOffset),arrayOffset+=info2.storage/Float32Array.BYTES_PER_ELEMENT)}gl.bufferSubData(35345,offset,uniform.__data)}}gl.bindBuffer(35345,null)}function hasUniformChanged(uniform,index,cache){const value=uniform.value;if(void 0===cache[index]){if("number"==typeof value)cache[index]=value;else{const values=Array.isArray(value)?value:[value],tempValues=[];for(let i=0;i<values.length;i++)tempValues.push(values[i].clone());cache[index]=tempValues}return!0}if("number"==typeof value){if(cache[index]!==value)return cache[index]=value,!0}else{const cachedObjects=Array.isArray(cache[index])?cache[index]:[cache[index]],values=Array.isArray(value)?value:[value];for(let i=0;i<cachedObjects.length;i++){const cachedObject=cachedObjects[i];if(!1===cachedObject.equals(values[i]))return cachedObject.copy(values[i]),!0}}return!1}function prepareUniformsGroup(uniformsGroup){const uniforms=uniformsGroup.uniforms;let offset=0,chunkOffset=0;for(let i=0,l=uniforms.length;i<l;i++){const uniform=uniforms[i],infos={boundary:0,storage:0},values=Array.isArray(uniform.value)?uniform.value:[uniform.value];for(let j=0,jl=values.length;j<jl;j++){const info2=getUniformSize(values[j]);infos.boundary+=info2.boundary,infos.storage+=info2.storage}uniform.__data=new Float32Array(infos.storage/Float32Array.BYTES_PER_ELEMENT),uniform.__offset=offset,i>0&&(chunkOffset=offset%16,0!==chunkOffset&&16-chunkOffset-infos.boundary<0&&(offset+=16-chunkOffset,uniform.__offset=offset)),offset+=infos.storage}return chunkOffset=offset%16,chunkOffset>0&&(offset+=16-chunkOffset),uniformsGroup.__size=offset,uniformsGroup.__cache={},this}function getUniformSize(value){const info2={boundary:0,storage:0};return"number"==typeof value?(info2.boundary=4,info2.storage=4):value.isVector2?(info2.boundary=8,info2.storage=8):value.isVector3||value.isColor?(info2.boundary=16,info2.storage=12):value.isVector4?(info2.boundary=16,info2.storage=16):value.isMatrix3?(info2.boundary=48,info2.storage=48):value.isMatrix4?(info2.boundary=64,info2.storage=64):value.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",value),info2}function onUniformsGroupsDispose(event){const uniformsGroup=event.target;uniformsGroup.removeEventListener("dispose",onUniformsGroupsDispose);const index=allocatedBindingPoints.indexOf(uniformsGroup.__bindingPointIndex);allocatedBindingPoints.splice(index,1),gl.deleteBuffer(buffers[uniformsGroup.id]),delete buffers[uniformsGroup.id],delete updateList[uniformsGroup.id]}function dispose(){for(const id2 in buffers)gl.deleteBuffer(buffers[id2]);allocatedBindingPoints=[],buffers={},updateList={}}return __name(bind,"bind"),__name(update,"update"),__name(createBuffer,"createBuffer"),__name(allocateBindingPointIndex,"allocateBindingPointIndex"),__name(updateBufferData,"updateBufferData"),__name(hasUniformChanged,"hasUniformChanged"),__name(prepareUniformsGroup,"prepareUniformsGroup"),__name(getUniformSize,"getUniformSize"),__name(onUniformsGroupsDispose,"onUniformsGroupsDispose"),__name(dispose,"dispose"),{bind,update,dispose}}function createCanvasElement(){const canvas=createElementNS("canvas");return canvas.style.display="block",canvas}function WebGLRenderer(parameters={}){this.isWebGLRenderer=!0;const _canvas2=void 0!==parameters.canvas?parameters.canvas:createCanvasElement(),_context2=void 0!==parameters.context?parameters.context:null,_depth=void 0===parameters.depth||parameters.depth,_stencil=void 0===parameters.stencil||parameters.stencil,_antialias=void 0!==parameters.antialias&&parameters.antialias,_premultipliedAlpha=void 0===parameters.premultipliedAlpha||parameters.premultipliedAlpha,_preserveDrawingBuffer=void 0!==parameters.preserveDrawingBuffer&&parameters.preserveDrawingBuffer,_powerPreference=void 0!==parameters.powerPreference?parameters.powerPreference:"default",_failIfMajorPerformanceCaveat=void 0!==parameters.failIfMajorPerformanceCaveat&&parameters.failIfMajorPerformanceCaveat;let _alpha;_alpha=null!==_context2?_context2.getContextAttributes().alpha:void 0!==parameters.alpha&&parameters.alpha;let currentRenderList=null,currentRenderState=null;const renderListStack=[],renderStateStack=[];this.domElement=_canvas2,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const _this=this;let _isContextLost=!1,_currentActiveCubeFace=0,_currentActiveMipmapLevel=0,_currentRenderTarget=null,_currentMaterialId=-1,_currentCamera=null;const _currentViewport=new Vector4,_currentScissor=new Vector4;let _currentScissorTest=null,_width=_canvas2.width,_height=_canvas2.height,_pixelRatio=1,_opaqueSort=null,_transparentSort=null;const _viewport=new Vector4(0,0,_width,_height),_scissor=new Vector4(0,0,_width,_height);let _scissorTest=!1;const _frustum=new Frustum;let _clippingEnabled=!1,_localClippingEnabled=!1,_transmissionRenderTarget=null;const _projScreenMatrix2=new Matrix42,_vector22=new Vector22,_vector3=new Vector32,_emptyScene={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function getTargetPixelRatio(){return null===_currentRenderTarget?_pixelRatio:1}__name(getTargetPixelRatio,"getTargetPixelRatio");let extensions,capabilities,state,info,properties,textures,cubemaps,cubeuvmaps,attributes,geometries,objects,programCache,materials,renderLists,renderStates,clipping,shadowMap,background,morphtargets,bufferRenderer,indexedBufferRenderer,utils,bindingStates,uniformsGroups,_gl=_context2;function getContext(contextNames,contextAttributes){for(let i=0;i<contextNames.length;i++){const context=_canvas2.getContext(contextNames[i],contextAttributes);if(null!==context)return context}return null}__name(getContext,"getContext");try{const contextAttributes={alpha:!0,depth:_depth,stencil:_stencil,antialias:_antialias,premultipliedAlpha:_premultipliedAlpha,preserveDrawingBuffer:_preserveDrawingBuffer,powerPreference:_powerPreference,failIfMajorPerformanceCaveat:_failIfMajorPerformanceCaveat};if("setAttribute"in _canvas2&&_canvas2.setAttribute("data-engine",`three.js r${REVISION}`),_canvas2.addEventListener("webglcontextlost",onContextLost,!1),_canvas2.addEventListener("webglcontextrestored",onContextRestore,!1),_canvas2.addEventListener("webglcontextcreationerror",onContextCreationError,!1),null===_gl){const contextNames=["webgl2","webgl","experimental-webgl"];if(!0===_this.isWebGL1Renderer&&contextNames.shift(),_gl=getContext(contextNames,contextAttributes),null===_gl)throw getContext(contextNames)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===_gl.getShaderPrecisionFormat&&(_gl.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(error){throw console.error("THREE.WebGLRenderer: "+error.message),error}function initGLContext(){extensions=new WebGLExtensions(_gl),capabilities=new WebGLCapabilities(_gl,extensions,parameters),extensions.init(capabilities),utils=new WebGLUtils(_gl,extensions,capabilities),state=new WebGLState(_gl,extensions,capabilities),info=new WebGLInfo,properties=new WebGLProperties,textures=new WebGLTextures(_gl,extensions,state,properties,capabilities,utils,info),cubemaps=new WebGLCubeMaps(_this),cubeuvmaps=new WebGLCubeUVMaps(_this),attributes=new WebGLAttributes(_gl,capabilities),bindingStates=new WebGLBindingStates(_gl,extensions,attributes,capabilities),geometries=new WebGLGeometries(_gl,attributes,info,bindingStates),objects=new WebGLObjects(_gl,geometries,attributes,info),morphtargets=new WebGLMorphtargets(_gl,capabilities,textures),clipping=new WebGLClipping(properties),programCache=new WebGLPrograms(_this,cubemaps,cubeuvmaps,extensions,capabilities,bindingStates,clipping),materials=new WebGLMaterials(_this,properties),renderLists=new WebGLRenderLists,renderStates=new WebGLRenderStates(extensions,capabilities),background=new WebGLBackground(_this,cubemaps,cubeuvmaps,state,objects,_alpha,_premultipliedAlpha),shadowMap=new WebGLShadowMap(_this,objects,capabilities),uniformsGroups=new WebGLUniformsGroups(_gl,info,capabilities,state),bufferRenderer=new WebGLBufferRenderer(_gl,extensions,info,capabilities),indexedBufferRenderer=new WebGLIndexedBufferRenderer(_gl,extensions,info,capabilities),info.programs=programCache.programs,_this.capabilities=capabilities,_this.extensions=extensions,_this.properties=properties,_this.renderLists=renderLists,_this.shadowMap=shadowMap,_this.state=state,_this.info=info}__name(initGLContext,"initGLContext"),initGLContext();const xr=new WebXRManager(_this,_gl);function onContextLost(event){event.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_isContextLost=!0}function onContextRestore(){console.log("THREE.WebGLRenderer: Context Restored."),_isContextLost=!1;const infoAutoReset=info.autoReset,shadowMapEnabled=shadowMap.enabled,shadowMapAutoUpdate=shadowMap.autoUpdate,shadowMapNeedsUpdate=shadowMap.needsUpdate,shadowMapType=shadowMap.type;initGLContext(),info.autoReset=infoAutoReset,shadowMap.enabled=shadowMapEnabled,shadowMap.autoUpdate=shadowMapAutoUpdate,shadowMap.needsUpdate=shadowMapNeedsUpdate,shadowMap.type=shadowMapType}function onContextCreationError(event){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",event.statusMessage)}function onMaterialDispose(event){const material=event.target;material.removeEventListener("dispose",onMaterialDispose),deallocateMaterial(material)}function deallocateMaterial(material){releaseMaterialProgramReferences(material),properties.remove(material)}function releaseMaterialProgramReferences(material){const programs=properties.get(material).programs;void 0!==programs&&(programs.forEach(function(program){programCache.releaseProgram(program)}),material.isShaderMaterial&&programCache.releaseShaderCache(material))}this.xr=xr,this.getContext=function(){return _gl},this.getContextAttributes=function(){return _gl.getContextAttributes()},this.forceContextLoss=function(){const extension=extensions.get("WEBGL_lose_context");extension&&extension.loseContext()},this.forceContextRestore=function(){const extension=extensions.get("WEBGL_lose_context");extension&&extension.restoreContext()},this.getPixelRatio=function(){return _pixelRatio},this.setPixelRatio=function(value){void 0!==value&&(_pixelRatio=value,this.setSize(_width,_height,!1))},this.getSize=function(target){return target.set(_width,_height)},this.setSize=function(width,height,updateStyle){xr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(_width=width,_height=height,_canvas2.width=Math.floor(width*_pixelRatio),_canvas2.height=Math.floor(height*_pixelRatio),!1!==updateStyle&&(_canvas2.style.width=width+"px",_canvas2.style.height=height+"px"),this.setViewport(0,0,width,height))},this.getDrawingBufferSize=function(target){return target.set(_width*_pixelRatio,_height*_pixelRatio).floor()},this.setDrawingBufferSize=function(width,height,pixelRatio){_width=width,_height=height,_pixelRatio=pixelRatio,_canvas2.width=Math.floor(width*pixelRatio),_canvas2.height=Math.floor(height*pixelRatio),this.setViewport(0,0,width,height)},this.getCurrentViewport=function(target){return target.copy(_currentViewport)},this.getViewport=function(target){return target.copy(_viewport)},this.setViewport=function(x,y,width,height){x.isVector4?_viewport.set(x.x,x.y,x.z,x.w):_viewport.set(x,y,width,height),state.viewport(_currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor())},this.getScissor=function(target){return target.copy(_scissor)},this.setScissor=function(x,y,width,height){x.isVector4?_scissor.set(x.x,x.y,x.z,x.w):_scissor.set(x,y,width,height),state.scissor(_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor())},this.getScissorTest=function(){return _scissorTest},this.setScissorTest=function(boolean){state.setScissorTest(_scissorTest=boolean)},this.setOpaqueSort=function(method){_opaqueSort=method},this.setTransparentSort=function(method){_transparentSort=method},this.getClearColor=function(target){return target.copy(background.getClearColor())},this.setClearColor=function(){background.setClearColor.apply(background,arguments)},this.getClearAlpha=function(){return background.getClearAlpha()},this.setClearAlpha=function(){background.setClearAlpha.apply(background,arguments)},this.clear=function(color=!0,depth=!0,stencil=!0){let bits=0;color&&(bits|=16384),depth&&(bits|=256),stencil&&(bits|=1024),_gl.clear(bits)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){_canvas2.removeEventListener("webglcontextlost",onContextLost,!1),_canvas2.removeEventListener("webglcontextrestored",onContextRestore,!1),_canvas2.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),renderLists.dispose(),renderStates.dispose(),properties.dispose(),cubemaps.dispose(),cubeuvmaps.dispose(),objects.dispose(),bindingStates.dispose(),uniformsGroups.dispose(),programCache.dispose(),xr.dispose(),xr.removeEventListener("sessionstart",onXRSessionStart),xr.removeEventListener("sessionend",onXRSessionEnd),_transmissionRenderTarget&&(_transmissionRenderTarget.dispose(),_transmissionRenderTarget=null),animation.stop()},__name(onContextLost,"onContextLost"),__name(onContextRestore,"onContextRestore"),__name(onContextCreationError,"onContextCreationError"),__name(onMaterialDispose,"onMaterialDispose"),__name(deallocateMaterial,"deallocateMaterial"),__name(releaseMaterialProgramReferences,"releaseMaterialProgramReferences"),this.renderBufferDirect=function(camera,scene,geometry,material,object,group){null===scene&&(scene=_emptyScene);const frontFaceCW=object.isMesh&&object.matrixWorld.determinant()<0,program=setProgram(camera,scene,geometry,material,object);state.setMaterial(material,frontFaceCW);let index=geometry.index,rangeFactor=1;!0===material.wireframe&&(index=geometries.getWireframeAttribute(geometry),rangeFactor=2);const drawRange=geometry.drawRange,position=geometry.attributes.position;let drawStart=drawRange.start*rangeFactor,drawEnd=(drawRange.start+drawRange.count)*rangeFactor;null!==group&&(drawStart=Math.max(drawStart,group.start*rangeFactor),drawEnd=Math.min(drawEnd,(group.start+group.count)*rangeFactor)),null!==index?(drawStart=Math.max(drawStart,0),drawEnd=Math.min(drawEnd,index.count)):null!=position&&(drawStart=Math.max(drawStart,0),drawEnd=Math.min(drawEnd,position.count));const drawCount=drawEnd-drawStart;if(drawCount<0||drawCount===1/0)return;bindingStates.setup(object,material,program,geometry,index);let attribute,renderer=bufferRenderer;if(null!==index&&(attribute=attributes.get(index),renderer=indexedBufferRenderer,renderer.setIndex(attribute)),object.isMesh)!0===material.wireframe?(state.setLineWidth(material.wireframeLinewidth*getTargetPixelRatio()),renderer.setMode(1)):renderer.setMode(4);else if(object.isLine){let lineWidth=material.linewidth;void 0===lineWidth&&(lineWidth=1),state.setLineWidth(lineWidth*getTargetPixelRatio()),renderer.setMode(object.isLineSegments?1:object.isLineLoop?2:3)}else object.isPoints?renderer.setMode(0):object.isSprite&&renderer.setMode(4);if(object.isInstancedMesh)renderer.renderInstances(drawStart,drawCount,object.count);else if(geometry.isInstancedBufferGeometry){const instanceCount=Math.min(geometry.instanceCount,void 0!==geometry._maxInstanceCount?geometry._maxInstanceCount:1/0);renderer.renderInstances(drawStart,drawCount,instanceCount)}else renderer.render(drawStart,drawCount)},this.compile=function(scene,camera){function prepare(material,scene2,object){!0===material.transparent&&3===material.side?(material.side=BackSide,material.needsUpdate=!0,getProgram(material,scene2,object),material.side=FrontSide,material.needsUpdate=!0,getProgram(material,scene2,object),material.side=3):getProgram(material,scene2,object)}__name(prepare,"prepare"),currentRenderState=renderStates.get(scene),currentRenderState.init(),renderStateStack.push(currentRenderState),scene.traverseVisible(function(object){object.isLight&&object.layers.test(camera.layers)&&(currentRenderState.pushLight(object),object.castShadow&&currentRenderState.pushShadow(object))}),currentRenderState.setupLights(_this.physicallyCorrectLights),scene.traverse(function(object){const material=object.material;if(material)if(Array.isArray(material))for(let i=0;i<material.length;i++)prepare(material[i],scene,object);else prepare(material,scene,object)}),renderStateStack.pop(),currentRenderState=null};let onAnimationFrameCallback=null;function onAnimationFrame(time){onAnimationFrameCallback&&onAnimationFrameCallback(time)}function onXRSessionStart(){animation.stop()}function onXRSessionEnd(){animation.start()}__name(onAnimationFrame,"onAnimationFrame"),__name(onXRSessionStart,"onXRSessionStart"),__name(onXRSessionEnd,"onXRSessionEnd");const animation=new WebGLAnimation;function projectObject(object,camera,groupOrder,sortObjects){if(!1===object.visible)return;if(object.layers.test(camera.layers))if(object.isGroup)groupOrder=object.renderOrder;else if(object.isLOD)!0===object.autoUpdate&&object.update(camera);else if(object.isLight)currentRenderState.pushLight(object),object.castShadow&&currentRenderState.pushShadow(object);else if(object.isSprite){if(!object.frustumCulled||_frustum.intersectsSprite(object)){sortObjects&&_vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix2);const geometry=objects.update(object),material=object.material;material.visible&&currentRenderList.push(object,geometry,material,groupOrder,_vector3.z,null)}}else if((object.isMesh||object.isLine||object.isPoints)&&(object.isSkinnedMesh&&object.skeleton.frame!==info.render.frame&&(object.skeleton.update(),object.skeleton.frame=info.render.frame),!object.frustumCulled||_frustum.intersectsObject(object))){sortObjects&&_vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix2);const geometry=objects.update(object),material=object.material;if(Array.isArray(material)){const groups=geometry.groups;for(let i=0,l=groups.length;i<l;i++){const group=groups[i],groupMaterial=material[group.materialIndex];groupMaterial&&groupMaterial.visible&&currentRenderList.push(object,geometry,groupMaterial,groupOrder,_vector3.z,group)}}else material.visible&&currentRenderList.push(object,geometry,material,groupOrder,_vector3.z,null)}const children=object.children;for(let i=0,l=children.length;i<l;i++)projectObject(children[i],camera,groupOrder,sortObjects)}function renderScene(currentRenderList2,scene,camera,viewport){const opaqueObjects=currentRenderList2.opaque,transmissiveObjects=currentRenderList2.transmissive,transparentObjects=currentRenderList2.transparent;currentRenderState.setupLightsView(camera),transmissiveObjects.length>0&&renderTransmissionPass(opaqueObjects,scene,camera),viewport&&state.viewport(_currentViewport.copy(viewport)),opaqueObjects.length>0&&renderObjects(opaqueObjects,scene,camera),transmissiveObjects.length>0&&renderObjects(transmissiveObjects,scene,camera),transparentObjects.length>0&&renderObjects(transparentObjects,scene,camera),state.buffers.depth.setTest(!0),state.buffers.depth.setMask(!0),state.buffers.color.setMask(!0),state.setPolygonOffset(!1)}function renderTransmissionPass(opaqueObjects,scene,camera){const isWebGL2=capabilities.isWebGL2;null===_transmissionRenderTarget&&(_transmissionRenderTarget=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:extensions.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:isWebGL2&&!0===_antialias?4:0})),_this.getDrawingBufferSize(_vector22),isWebGL2?_transmissionRenderTarget.setSize(_vector22.x,_vector22.y):_transmissionRenderTarget.setSize(floorPowerOfTwo(_vector22.x),floorPowerOfTwo(_vector22.y));const currentRenderTarget=_this.getRenderTarget();_this.setRenderTarget(_transmissionRenderTarget),_this.clear();const currentToneMapping=_this.toneMapping;_this.toneMapping=NoToneMapping,renderObjects(opaqueObjects,scene,camera),_this.toneMapping=currentToneMapping,textures.updateMultisampleRenderTarget(_transmissionRenderTarget),textures.updateRenderTargetMipmap(_transmissionRenderTarget),_this.setRenderTarget(currentRenderTarget)}function renderObjects(renderList,scene,camera){const overrideMaterial=!0===scene.isScene?scene.overrideMaterial:null;for(let i=0,l=renderList.length;i<l;i++){const renderItem=renderList[i],object=renderItem.object,geometry=renderItem.geometry,material=null===overrideMaterial?renderItem.material:overrideMaterial,group=renderItem.group;object.layers.test(camera.layers)&&renderObject(object,scene,camera,geometry,material,group)}}function renderObject(object,scene,camera,geometry,material,group){object.onBeforeRender(_this,scene,camera,geometry,material,group),object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,object.matrixWorld),object.normalMatrix.getNormalMatrix(object.modelViewMatrix),material.onBeforeRender(_this,scene,camera,geometry,object,group),!0===material.transparent&&3===material.side?(material.side=BackSide,material.needsUpdate=!0,_this.renderBufferDirect(camera,scene,geometry,material,object,group),material.side=FrontSide,material.needsUpdate=!0,_this.renderBufferDirect(camera,scene,geometry,material,object,group),material.side=3):_this.renderBufferDirect(camera,scene,geometry,material,object,group),object.onAfterRender(_this,scene,camera,geometry,material,group)}function getProgram(material,scene,object){!0!==scene.isScene&&(scene=_emptyScene);const materialProperties=properties.get(material),lights=currentRenderState.state.lights,lightsStateVersion=lights.state.version,parameters2=programCache.getParameters(material,lights.state,currentRenderState.state.shadowsArray,scene,object),programCacheKey=programCache.getProgramCacheKey(parameters2);let programs=materialProperties.programs;materialProperties.environment=material.isMeshStandardMaterial?scene.environment:null,materialProperties.fog=scene.fog,materialProperties.envMap=(material.isMeshStandardMaterial?cubeuvmaps:cubemaps).get(material.envMap||materialProperties.environment),void 0===programs&&(material.addEventListener("dispose",onMaterialDispose),programs=new Map,materialProperties.programs=programs);let program=programs.get(programCacheKey);if(void 0!==program){if(materialProperties.currentProgram===program&&materialProperties.lightsStateVersion===lightsStateVersion)return updateCommonMaterialProperties(material,parameters2),program}else parameters2.uniforms=programCache.getUniforms(material),material.onBuild(object,parameters2,_this),material.onBeforeCompile(parameters2,_this),program=programCache.acquireProgram(parameters2,programCacheKey),programs.set(programCacheKey,program),materialProperties.uniforms=parameters2.uniforms;const uniforms=materialProperties.uniforms;(!material.isShaderMaterial&&!material.isRawShaderMaterial||!0===material.clipping)&&(uniforms.clippingPlanes=clipping.uniform),updateCommonMaterialProperties(material,parameters2),materialProperties.needsLights=materialNeedsLights(material),materialProperties.lightsStateVersion=lightsStateVersion,materialProperties.needsLights&&(uniforms.ambientLightColor.value=lights.state.ambient,uniforms.lightProbe.value=lights.state.probe,uniforms.directionalLights.value=lights.state.directional,uniforms.directionalLightShadows.value=lights.state.directionalShadow,uniforms.spotLights.value=lights.state.spot,uniforms.spotLightShadows.value=lights.state.spotShadow,uniforms.rectAreaLights.value=lights.state.rectArea,uniforms.ltc_1.value=lights.state.rectAreaLTC1,uniforms.ltc_2.value=lights.state.rectAreaLTC2,uniforms.pointLights.value=lights.state.point,uniforms.pointLightShadows.value=lights.state.pointShadow,uniforms.hemisphereLights.value=lights.state.hemi,uniforms.directionalShadowMap.value=lights.state.directionalShadowMap,uniforms.directionalShadowMatrix.value=lights.state.directionalShadowMatrix,uniforms.spotShadowMap.value=lights.state.spotShadowMap,uniforms.spotLightMatrix.value=lights.state.spotLightMatrix,uniforms.spotLightMap.value=lights.state.spotLightMap,uniforms.pointShadowMap.value=lights.state.pointShadowMap,uniforms.pointShadowMatrix.value=lights.state.pointShadowMatrix);const progUniforms=program.getUniforms(),uniformsList=WebGLUniforms.seqWithValue(progUniforms.seq,uniforms);return materialProperties.currentProgram=program,materialProperties.uniformsList=uniformsList,program}function updateCommonMaterialProperties(material,parameters2){const materialProperties=properties.get(material);materialProperties.outputEncoding=parameters2.outputEncoding,materialProperties.instancing=parameters2.instancing,materialProperties.skinning=parameters2.skinning,materialProperties.morphTargets=parameters2.morphTargets,materialProperties.morphNormals=parameters2.morphNormals,materialProperties.morphColors=parameters2.morphColors,materialProperties.morphTargetsCount=parameters2.morphTargetsCount,materialProperties.numClippingPlanes=parameters2.numClippingPlanes,materialProperties.numIntersection=parameters2.numClipIntersection,materialProperties.vertexAlphas=parameters2.vertexAlphas,materialProperties.vertexTangents=parameters2.vertexTangents,materialProperties.toneMapping=parameters2.toneMapping}function setProgram(camera,scene,geometry,material,object){!0!==scene.isScene&&(scene=_emptyScene),textures.resetTextureUnits();const fog=scene.fog,encoding=null===_currentRenderTarget?_this.outputEncoding:!0===_currentRenderTarget.isXRRenderTarget?_currentRenderTarget.texture.encoding:LinearEncoding,envMap=(material.isMeshStandardMaterial?cubeuvmaps:cubemaps).get(material.envMap||(material.isMeshStandardMaterial?scene.environment:null)),vertexAlphas=!0===material.vertexColors&&!!geometry.attributes.color&&4===geometry.attributes.color.itemSize,vertexTangents=!!material.normalMap&&!!geometry.attributes.tangent,morphTargets=!!geometry.morphAttributes.position,morphNormals=!!geometry.morphAttributes.normal,morphColors=!!geometry.morphAttributes.color,toneMapping=material.toneMapped?_this.toneMapping:NoToneMapping,morphAttribute=geometry.morphAttributes.position||geometry.morphAttributes.normal||geometry.morphAttributes.color,morphTargetsCount=void 0!==morphAttribute?morphAttribute.length:0,materialProperties=properties.get(material),lights=currentRenderState.state.lights;!0!==_clippingEnabled||!0!==_localClippingEnabled&&camera===_currentCamera||clipping.setState(material,camera,camera===_currentCamera&&material.id===_currentMaterialId);let needsProgramChange=!1;material.version===materialProperties.__version?(materialProperties.needsLights&&materialProperties.lightsStateVersion!==lights.state.version||materialProperties.outputEncoding!==encoding||object.isInstancedMesh&&!1===materialProperties.instancing||!object.isInstancedMesh&&!0===materialProperties.instancing||object.isSkinnedMesh&&!1===materialProperties.skinning||!object.isSkinnedMesh&&!0===materialProperties.skinning||materialProperties.envMap!==envMap||!0===material.fog&&materialProperties.fog!==fog||void 0!==materialProperties.numClippingPlanes&&(materialProperties.numClippingPlanes!==clipping.numPlanes||materialProperties.numIntersection!==clipping.numIntersection)||materialProperties.vertexAlphas!==vertexAlphas||materialProperties.vertexTangents!==vertexTangents||materialProperties.morphTargets!==morphTargets||materialProperties.morphNormals!==morphNormals||materialProperties.morphColors!==morphColors||materialProperties.toneMapping!==toneMapping||!0===capabilities.isWebGL2&&materialProperties.morphTargetsCount!==morphTargetsCount)&&(needsProgramChange=!0):(needsProgramChange=!0,materialProperties.__version=material.version);let program=materialProperties.currentProgram;!0===needsProgramChange&&(program=getProgram(material,scene,object));let refreshProgram=!1,refreshMaterial=!1,refreshLights=!1;const p_uniforms=program.getUniforms(),m_uniforms=materialProperties.uniforms;if(state.useProgram(program.program)&&(refreshProgram=!0,refreshMaterial=!0,refreshLights=!0),material.id!==_currentMaterialId&&(_currentMaterialId=material.id,refreshMaterial=!0),refreshProgram||_currentCamera!==camera){if(p_uniforms.setValue(_gl,"projectionMatrix",camera.projectionMatrix),capabilities.logarithmicDepthBuffer&&p_uniforms.setValue(_gl,"logDepthBufFC",2/(Math.log(camera.far+1)/Math.LN2)),_currentCamera!==camera&&(_currentCamera=camera,refreshMaterial=!0,refreshLights=!0),material.isShaderMaterial||material.isMeshPhongMaterial||material.isMeshToonMaterial||material.isMeshStandardMaterial||material.envMap){const uCamPos=p_uniforms.map.cameraPosition;void 0!==uCamPos&&uCamPos.setValue(_gl,_vector3.setFromMatrixPosition(camera.matrixWorld))}(material.isMeshPhongMaterial||material.isMeshToonMaterial||material.isMeshLambertMaterial||material.isMeshBasicMaterial||material.isMeshStandardMaterial||material.isShaderMaterial)&&p_uniforms.setValue(_gl,"isOrthographic",!0===camera.isOrthographicCamera),(material.isMeshPhongMaterial||material.isMeshToonMaterial||material.isMeshLambertMaterial||material.isMeshBasicMaterial||material.isMeshStandardMaterial||material.isShaderMaterial||material.isShadowMaterial||object.isSkinnedMesh)&&p_uniforms.setValue(_gl,"viewMatrix",camera.matrixWorldInverse)}if(object.isSkinnedMesh){p_uniforms.setOptional(_gl,object,"bindMatrix"),p_uniforms.setOptional(_gl,object,"bindMatrixInverse");const skeleton=object.skeleton;skeleton&&(capabilities.floatVertexTextures?(null===skeleton.boneTexture&&skeleton.computeBoneTexture(),p_uniforms.setValue(_gl,"boneTexture",skeleton.boneTexture,textures),p_uniforms.setValue(_gl,"boneTextureSize",skeleton.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const morphAttributes=geometry.morphAttributes;if((void 0!==morphAttributes.position||void 0!==morphAttributes.normal||void 0!==morphAttributes.color&&!0===capabilities.isWebGL2)&&morphtargets.update(object,geometry,material,program),(refreshMaterial||materialProperties.receiveShadow!==object.receiveShadow)&&(materialProperties.receiveShadow=object.receiveShadow,p_uniforms.setValue(_gl,"receiveShadow",object.receiveShadow)),material.isMeshGouraudMaterial&&null!==material.envMap&&(m_uniforms.envMap.value=envMap,m_uniforms.flipEnvMap.value=envMap.isCubeTexture&&!1===envMap.isRenderTargetTexture?-1:1),refreshMaterial&&(p_uniforms.setValue(_gl,"toneMappingExposure",_this.toneMappingExposure),materialProperties.needsLights&&markUniformsLightsNeedsUpdate(m_uniforms,refreshLights),fog&&!0===material.fog&&materials.refreshFogUniforms(m_uniforms,fog),materials.refreshMaterialUniforms(m_uniforms,material,_pixelRatio,_height,_transmissionRenderTarget),WebGLUniforms.upload(_gl,materialProperties.uniformsList,m_uniforms,textures)),material.isShaderMaterial&&!0===material.uniformsNeedUpdate&&(WebGLUniforms.upload(_gl,materialProperties.uniformsList,m_uniforms,textures),material.uniformsNeedUpdate=!1),material.isSpriteMaterial&&p_uniforms.setValue(_gl,"center",object.center),p_uniforms.setValue(_gl,"modelViewMatrix",object.modelViewMatrix),p_uniforms.setValue(_gl,"normalMatrix",object.normalMatrix),p_uniforms.setValue(_gl,"modelMatrix",object.matrixWorld),material.isShaderMaterial||material.isRawShaderMaterial){const groups=material.uniformsGroups;for(let i=0,l=groups.length;i<l;i++)if(capabilities.isWebGL2){const group=groups[i];uniformsGroups.update(group,program),uniformsGroups.bind(group,program)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return program}function markUniformsLightsNeedsUpdate(uniforms,value){uniforms.ambientLightColor.needsUpdate=value,uniforms.lightProbe.needsUpdate=value,uniforms.directionalLights.needsUpdate=value,uniforms.directionalLightShadows.needsUpdate=value,uniforms.pointLights.needsUpdate=value,uniforms.pointLightShadows.needsUpdate=value,uniforms.spotLights.needsUpdate=value,uniforms.spotLightShadows.needsUpdate=value,uniforms.rectAreaLights.needsUpdate=value,uniforms.hemisphereLights.needsUpdate=value}function materialNeedsLights(material){return material.isMeshLambertMaterial||material.isMeshToonMaterial||material.isMeshPhongMaterial||material.isMeshStandardMaterial||material.isShadowMaterial||material.isShaderMaterial&&!0===material.lights}animation.setAnimationLoop(onAnimationFrame),typeof self<"u"&&animation.setContext(self),this.setAnimationLoop=function(callback){onAnimationFrameCallback=callback,xr.setAnimationLoop(callback),null===callback?animation.stop():animation.start()},xr.addEventListener("sessionstart",onXRSessionStart),xr.addEventListener("sessionend",onXRSessionEnd),this.render=function(scene,camera){if(void 0===camera||!0===camera.isCamera){if(!0!==_isContextLost){if(!0===scene.matrixWorldAutoUpdate&&scene.updateMatrixWorld(),null===camera.parent&&!0===camera.matrixWorldAutoUpdate&&camera.updateMatrixWorld(),!0===xr.enabled&&!0===xr.isPresenting&&(!0===xr.cameraAutoUpdate&&xr.updateCamera(camera),camera=xr.getCamera()),!0===scene.isScene&&scene.onBeforeRender(_this,scene,camera,_currentRenderTarget),currentRenderState=renderStates.get(scene,renderStateStack.length),currentRenderState.init(),renderStateStack.push(currentRenderState),_projScreenMatrix2.multiplyMatrices(camera.projectionMatrix,camera.matrixWorldInverse),_frustum.setFromProjectionMatrix(_projScreenMatrix2),_localClippingEnabled=this.localClippingEnabled,_clippingEnabled=clipping.init(this.clippingPlanes,_localClippingEnabled,camera),currentRenderList=renderLists.get(scene,renderListStack.length),currentRenderList.init(),renderListStack.push(currentRenderList),projectObject(scene,camera,0,_this.sortObjects),currentRenderList.finish(),!0===_this.sortObjects&&currentRenderList.sort(_opaqueSort,_transparentSort),!0===_clippingEnabled&&clipping.beginShadows(),shadowMap.render(currentRenderState.state.shadowsArray,scene,camera),!0===_clippingEnabled&&clipping.endShadows(),!0===this.info.autoReset&&this.info.reset(),background.render(currentRenderList,scene),currentRenderState.setupLights(_this.physicallyCorrectLights),camera.isArrayCamera){const cameras=camera.cameras;for(let i=0,l=cameras.length;i<l;i++){const camera2=cameras[i];renderScene(currentRenderList,scene,camera2,camera2.viewport)}}else renderScene(currentRenderList,scene,camera);null!==_currentRenderTarget&&(textures.updateMultisampleRenderTarget(_currentRenderTarget),textures.updateRenderTargetMipmap(_currentRenderTarget)),!0===scene.isScene&&scene.onAfterRender(_this,scene,camera),bindingStates.resetDefaultState(),_currentMaterialId=-1,_currentCamera=null,renderStateStack.pop(),currentRenderState=renderStateStack.length>0?renderStateStack[renderStateStack.length-1]:null,renderListStack.pop(),currentRenderList=renderListStack.length>0?renderListStack[renderListStack.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},__name(projectObject,"projectObject"),__name(renderScene,"renderScene"),__name(renderTransmissionPass,"renderTransmissionPass"),__name(renderObjects,"renderObjects"),__name(renderObject,"renderObject"),__name(getProgram,"getProgram"),__name(updateCommonMaterialProperties,"updateCommonMaterialProperties"),__name(setProgram,"setProgram"),__name(markUniformsLightsNeedsUpdate,"markUniformsLightsNeedsUpdate"),__name(materialNeedsLights,"materialNeedsLights"),this.getActiveCubeFace=function(){return _currentActiveCubeFace},this.getActiveMipmapLevel=function(){return _currentActiveMipmapLevel},this.getRenderTarget=function(){return _currentRenderTarget},this.setRenderTargetTextures=function(renderTarget,colorTexture,depthTexture){properties.get(renderTarget.texture).__webglTexture=colorTexture,properties.get(renderTarget.depthTexture).__webglTexture=depthTexture;const renderTargetProperties=properties.get(renderTarget);renderTargetProperties.__hasExternalTextures=!0,renderTargetProperties.__hasExternalTextures&&(renderTargetProperties.__autoAllocateDepthBuffer=void 0===depthTexture,renderTargetProperties.__autoAllocateDepthBuffer||!0===extensions.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),renderTargetProperties.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(renderTarget,defaultFramebuffer){const renderTargetProperties=properties.get(renderTarget);renderTargetProperties.__webglFramebuffer=defaultFramebuffer,renderTargetProperties.__useDefaultFramebuffer=void 0===defaultFramebuffer},this.setRenderTarget=function(renderTarget,activeCubeFace=0,activeMipmapLevel=0){_currentRenderTarget=renderTarget,_currentActiveCubeFace=activeCubeFace,_currentActiveMipmapLevel=activeMipmapLevel;let useDefaultFramebuffer=!0,framebuffer=null,isCube=!1,isRenderTarget3D=!1;if(renderTarget){const renderTargetProperties=properties.get(renderTarget);void 0!==renderTargetProperties.__useDefaultFramebuffer?(state.bindFramebuffer(36160,null),useDefaultFramebuffer=!1):void 0===renderTargetProperties.__webglFramebuffer?textures.setupRenderTarget(renderTarget):renderTargetProperties.__hasExternalTextures&&textures.rebindTextures(renderTarget,properties.get(renderTarget.texture).__webglTexture,properties.get(renderTarget.depthTexture).__webglTexture);const texture=renderTarget.texture;(texture.isData3DTexture||texture.isDataArrayTexture||texture.isCompressedArrayTexture)&&(isRenderTarget3D=!0);const __webglFramebuffer=properties.get(renderTarget).__webglFramebuffer;renderTarget.isWebGLCubeRenderTarget?(framebuffer=__webglFramebuffer[activeCubeFace],isCube=!0):framebuffer=capabilities.isWebGL2&&renderTarget.samples>0&&!1===textures.useMultisampledRTT(renderTarget)?properties.get(renderTarget).__webglMultisampledFramebuffer:__webglFramebuffer,_currentViewport.copy(renderTarget.viewport),_currentScissor.copy(renderTarget.scissor),_currentScissorTest=renderTarget.scissorTest}else _currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor(),_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor(),_currentScissorTest=_scissorTest;if(state.bindFramebuffer(36160,framebuffer)&&capabilities.drawBuffers&&useDefaultFramebuffer&&state.drawBuffers(renderTarget,framebuffer),state.viewport(_currentViewport),state.scissor(_currentScissor),state.setScissorTest(_currentScissorTest),isCube){const textureProperties=properties.get(renderTarget.texture);_gl.framebufferTexture2D(36160,36064,34069+activeCubeFace,textureProperties.__webglTexture,activeMipmapLevel)}else if(isRenderTarget3D){const textureProperties=properties.get(renderTarget.texture);_gl.framebufferTextureLayer(36160,36064,textureProperties.__webglTexture,activeMipmapLevel||0,activeCubeFace||0)}_currentMaterialId=-1},this.readRenderTargetPixels=function(renderTarget,x,y,width,height,buffer,activeCubeFaceIndex){if(!renderTarget||!renderTarget.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let framebuffer=properties.get(renderTarget).__webglFramebuffer;if(renderTarget.isWebGLCubeRenderTarget&&void 0!==activeCubeFaceIndex&&(framebuffer=framebuffer[activeCubeFaceIndex]),framebuffer){state.bindFramebuffer(36160,framebuffer);try{const texture=renderTarget.texture,textureFormat=texture.format,textureType=texture.type;if(textureFormat!==RGBAFormat&&utils.convert(textureFormat)!==_gl.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const halfFloatSupportedByExt=textureType===HalfFloatType&&(extensions.has("EXT_color_buffer_half_float")||capabilities.isWebGL2&&extensions.has("EXT_color_buffer_float"));if(!(textureType===UnsignedByteType||utils.convert(textureType)===_gl.getParameter(35738)||textureType===FloatType&&(capabilities.isWebGL2||extensions.has("OES_texture_float")||extensions.has("WEBGL_color_buffer_float"))||halfFloatSupportedByExt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");x>=0&&x<=renderTarget.width-width&&y>=0&&y<=renderTarget.height-height&&_gl.readPixels(x,y,width,height,utils.convert(textureFormat),utils.convert(textureType),buffer)}finally{const framebuffer2=null!==_currentRenderTarget?properties.get(_currentRenderTarget).__webglFramebuffer:null;state.bindFramebuffer(36160,framebuffer2)}}},this.copyFramebufferToTexture=function(position,texture,level=0){const levelScale=Math.pow(2,-level),width=Math.floor(texture.image.width*levelScale),height=Math.floor(texture.image.height*levelScale);textures.setTexture2D(texture,0),_gl.copyTexSubImage2D(3553,level,0,0,position.x,position.y,width,height),state.unbindTexture()},this.copyTextureToTexture=function(position,srcTexture,dstTexture,level=0){const width=srcTexture.image.width,height=srcTexture.image.height,glFormat=utils.convert(dstTexture.format),glType=utils.convert(dstTexture.type);textures.setTexture2D(dstTexture,0),_gl.pixelStorei(37440,dstTexture.flipY),_gl.pixelStorei(37441,dstTexture.premultiplyAlpha),_gl.pixelStorei(3317,dstTexture.unpackAlignment),srcTexture.isDataTexture?_gl.texSubImage2D(3553,level,position.x,position.y,width,height,glFormat,glType,srcTexture.image.data):srcTexture.isCompressedTexture?_gl.compressedTexSubImage2D(3553,level,position.x,position.y,srcTexture.mipmaps[0].width,srcTexture.mipmaps[0].height,glFormat,srcTexture.mipmaps[0].data):_gl.texSubImage2D(3553,level,position.x,position.y,glFormat,glType,srcTexture.image),0===level&&dstTexture.generateMipmaps&&_gl.generateMipmap(3553),state.unbindTexture()},this.copyTextureToTexture3D=function(sourceBox,position,srcTexture,dstTexture,level=0){if(_this.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const width=sourceBox.max.x-sourceBox.min.x+1,height=sourceBox.max.y-sourceBox.min.y+1,depth=sourceBox.max.z-sourceBox.min.z+1,glFormat=utils.convert(dstTexture.format),glType=utils.convert(dstTexture.type);let glTarget;if(dstTexture.isData3DTexture)textures.setTexture3D(dstTexture,0),glTarget=32879;else{if(!dstTexture.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");textures.setTexture2DArray(dstTexture,0),glTarget=35866}_gl.pixelStorei(37440,dstTexture.flipY),_gl.pixelStorei(37441,dstTexture.premultiplyAlpha),_gl.pixelStorei(3317,dstTexture.unpackAlignment);const unpackRowLen=_gl.getParameter(3314),unpackImageHeight=_gl.getParameter(32878),unpackSkipPixels=_gl.getParameter(3316),unpackSkipRows=_gl.getParameter(3315),unpackSkipImages=_gl.getParameter(32877),image=srcTexture.isCompressedTexture?srcTexture.mipmaps[0]:srcTexture.image;_gl.pixelStorei(3314,image.width),_gl.pixelStorei(32878,image.height),_gl.pixelStorei(3316,sourceBox.min.x),_gl.pixelStorei(3315,sourceBox.min.y),_gl.pixelStorei(32877,sourceBox.min.z),srcTexture.isDataTexture||srcTexture.isData3DTexture?_gl.texSubImage3D(glTarget,level,position.x,position.y,position.z,width,height,depth,glFormat,glType,image.data):srcTexture.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),_gl.compressedTexSubImage3D(glTarget,level,position.x,position.y,position.z,width,height,depth,glFormat,image.data)):_gl.texSubImage3D(glTarget,level,position.x,position.y,position.z,width,height,depth,glFormat,glType,image),_gl.pixelStorei(3314,unpackRowLen),_gl.pixelStorei(32878,unpackImageHeight),_gl.pixelStorei(3316,unpackSkipPixels),_gl.pixelStorei(3315,unpackSkipRows),_gl.pixelStorei(32877,unpackSkipImages),0===level&&dstTexture.generateMipmaps&&_gl.generateMipmap(glTarget),state.unbindTexture()},this.initTexture=function(texture){texture.isCubeTexture?textures.setTextureCube(texture,0):texture.isData3DTexture?textures.setTexture3D(texture,0):texture.isDataArrayTexture||texture.isCompressedArrayTexture?textures.setTexture2DArray(texture,0):textures.setTexture2D(texture,0),state.unbindTexture()},this.resetState=function(){_currentActiveCubeFace=0,_currentActiveMipmapLevel=0,_currentRenderTarget=null,state.reset(),bindingStates.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}__name(WebXRManager,"WebXRManager"),__name(WebGLMaterials,"WebGLMaterials"),__name(WebGLUniformsGroups,"WebGLUniformsGroups"),__name(createCanvasElement,"createCanvasElement"),__name(WebGLRenderer,"WebGLRenderer");class WebGL1Renderer extends WebGLRenderer{}__name(WebGL1Renderer,"WebGL1Renderer"),WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(color,density=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(color),this.density=density}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}__name(FogExp2,"FogExp2");class Fog{constructor(color,near=1,far=1e3){this.isFog=!0,this.name="",this.color=new Color(color),this.near=near,this.far=far}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}__name(Fog,"Fog");class Scene extends(null){constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(source,recursive){return super.copy(source,recursive),null!==source.background&&(this.background=source.background.clone()),null!==source.environment&&(this.environment=source.environment.clone()),null!==source.fog&&(this.fog=source.fog.clone()),this.backgroundBlurriness=source.backgroundBlurriness,this.backgroundIntensity=source.backgroundIntensity,null!==source.overrideMaterial&&(this.overrideMaterial=source.overrideMaterial.clone()),this.matrixAutoUpdate=source.matrixAutoUpdate,this}toJSON(meta){const data=super.toJSON(meta);return null!==this.fog&&(data.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(data.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(data.backgroundIntensity=this.backgroundIntensity),data}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(value){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=value}}__name(Scene,"Scene");class InterleavedBuffer{constructor(array,stride){this.isInterleavedBuffer=!0,this.array=array,this.stride=stride,this.count=void 0!==array?array.length/stride:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(value){!0===value&&this.version++}setUsage(value){return this.usage=value,this}copy(source){return this.array=new source.array.constructor(source.array),this.count=source.count,this.stride=source.stride,this.usage=source.usage,this}copyAt(index1,attribute,index2){index1*=this.stride,index2*=attribute.stride;for(let i=0,l=this.stride;i<l;i++)this.array[index1+i]=attribute.array[index2+i];return this}set(value,offset=0){return this.array.set(value,offset),this}clone(data){void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const array=new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]),ib=new this.constructor(array,this.stride);return ib.setUsage(this.usage),ib}onUpload(callback){return this.onUploadCallback=callback,this}toJSON(data){return void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}__name(InterleavedBuffer,"InterleavedBuffer");const _vector$6=new Vector32;class InterleavedBufferAttribute{constructor(interleavedBuffer,itemSize,offset,normalized=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=interleavedBuffer,this.itemSize=itemSize,this.offset=offset,this.normalized=normalized}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(value){this.data.needsUpdate=value}applyMatrix4(m){for(let i=0,l=this.data.count;i<l;i++)_vector$6.fromBufferAttribute(this,i),_vector$6.applyMatrix4(m),this.setXYZ(i,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(m){for(let i=0,l=this.count;i<l;i++)_vector$6.fromBufferAttribute(this,i),_vector$6.applyNormalMatrix(m),this.setXYZ(i,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(m){for(let i=0,l=this.count;i<l;i++)_vector$6.fromBufferAttribute(this,i),_vector$6.transformDirection(m),this.setXYZ(i,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(index,x){return this.normalized&&(x=normalize(x,this.array)),this.data.array[index*this.data.stride+this.offset]=x,this}setY(index,y){return this.normalized&&(y=normalize(y,this.array)),this.data.array[index*this.data.stride+this.offset+1]=y,this}setZ(index,z){return this.normalized&&(z=normalize(z,this.array)),this.data.array[index*this.data.stride+this.offset+2]=z,this}setW(index,w){return this.normalized&&(w=normalize(w,this.array)),this.data.array[index*this.data.stride+this.offset+3]=w,this}getX(index){let x=this.data.array[index*this.data.stride+this.offset];return this.normalized&&(x=denormalize(x,this.array)),x}getY(index){let y=this.data.array[index*this.data.stride+this.offset+1];return this.normalized&&(y=denormalize(y,this.array)),y}getZ(index){let z=this.data.array[index*this.data.stride+this.offset+2];return this.normalized&&(z=denormalize(z,this.array)),z}getW(index){let w=this.data.array[index*this.data.stride+this.offset+3];return this.normalized&&(w=denormalize(w,this.array)),w}setXY(index,x,y){return index=index*this.data.stride+this.offset,this.normalized&&(x=normalize(x,this.array),y=normalize(y,this.array)),this.data.array[index+0]=x,this.data.array[index+1]=y,this}setXYZ(index,x,y,z){return index=index*this.data.stride+this.offset,this.normalized&&(x=normalize(x,this.array),y=normalize(y,this.array),z=normalize(z,this.array)),this.data.array[index+0]=x,this.data.array[index+1]=y,this.data.array[index+2]=z,this}setXYZW(index,x,y,z,w){return index=index*this.data.stride+this.offset,this.normalized&&(x=normalize(x,this.array),y=normalize(y,this.array),z=normalize(z,this.array),w=normalize(w,this.array)),this.data.array[index+0]=x,this.data.array[index+1]=y,this.data.array[index+2]=z,this.data.array[index+3]=w,this}clone(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const array=[];for(let i=0;i<this.count;i++){const index=i*this.data.stride+this.offset;for(let j=0;j<this.itemSize;j++)array.push(this.data.array[index+j])}return new BufferAttribute(new this.array.constructor(array),this.itemSize,this.normalized)}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.clone(data)),new InterleavedBufferAttribute(data.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const array=[];for(let i=0;i<this.count;i++){const index=i*this.data.stride+this.offset;for(let j=0;j<this.itemSize;j++)array.push(this.data.array[index+j])}return{itemSize:this.itemSize,type:this.array.constructor.name,array,normalized:this.normalized}}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.toJSON(data)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}__name(InterleavedBufferAttribute,"InterleavedBufferAttribute");class SpriteMaterial extends(null){constructor(parameters){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.rotation=source.rotation,this.sizeAttenuation=source.sizeAttenuation,this.fog=source.fog,this}}let _geometry;__name(SpriteMaterial,"SpriteMaterial");const _intersectPoint=new Vector32,_worldScale=new Vector32,_mvPosition=new Vector32,_alignedPosition=new Vector22,_rotatedPosition=new Vector22,_viewWorldMatrix=new Matrix42,_vA=new Vector32,_vB=new Vector32,_vC=new Vector32,_uvA=new Vector22,_uvB=new Vector22,_uvC=new Vector22;class Sprite extends(null){constructor(material){if(super(),this.isSprite=!0,this.type="Sprite",void 0===_geometry){_geometry=new BufferGeometry;const float32Array=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),interleavedBuffer=new InterleavedBuffer(float32Array,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(interleavedBuffer,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(interleavedBuffer,2,3,!1))}this.geometry=_geometry,this.material=void 0!==material?material:new SpriteMaterial,this.center=new Vector22(.5,.5)}raycast(raycaster,intersects2){null===raycaster.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(raycaster.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(raycaster.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),raycaster.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&_worldScale.multiplyScalar(-_mvPosition.z);const rotation=this.material.rotation;let sin,cos;0!==rotation&&(cos=Math.cos(rotation),sin=Math.sin(rotation));const center=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,center,_worldScale,sin,cos),transformVertex(_vB.set(.5,-.5,0),_mvPosition,center,_worldScale,sin,cos),transformVertex(_vC.set(.5,.5,0),_mvPosition,center,_worldScale,sin,cos),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let intersect=raycaster.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(null===intersect&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,center,_worldScale,sin,cos),_uvB.set(0,1),intersect=raycaster.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),null===intersect))return;const distance=raycaster.ray.origin.distanceTo(_intersectPoint);distance<raycaster.near||distance>raycaster.far||intersects2.push({distance,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector22),face:null,object:this})}copy(source,recursive){return super.copy(source,recursive),void 0!==source.center&&this.center.copy(source.center),this.material=source.material,this}}function transformVertex(vertexPosition,mvPosition,center,scale,sin,cos){_alignedPosition.subVectors(vertexPosition,center).addScalar(.5).multiply(scale),void 0!==sin?(_rotatedPosition.x=cos*_alignedPosition.x-sin*_alignedPosition.y,_rotatedPosition.y=sin*_alignedPosition.x+cos*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),vertexPosition.copy(mvPosition),vertexPosition.x+=_rotatedPosition.x,vertexPosition.y+=_rotatedPosition.y,vertexPosition.applyMatrix4(_viewWorldMatrix)}__name(Sprite,"Sprite"),__name(transformVertex,"transformVertex");const _v1$2=new Vector32,_v2$1=new Vector32;class LOD extends(null){constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(source){super.copy(source,!1);const levels=source.levels;for(let i=0,l=levels.length;i<l;i++){const level=levels[i];this.addLevel(level.object.clone(),level.distance,level.hysteresis)}return this.autoUpdate=source.autoUpdate,this}addLevel(object,distance=0,hysteresis=0){distance=Math.abs(distance);const levels=this.levels;let l;for(l=0;l<levels.length&&!(distance<levels[l].distance);l++);return levels.splice(l,0,{distance,hysteresis,object}),this.add(object),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(distance){const levels=this.levels;if(levels.length>0){let i,l;for(i=1,l=levels.length;i<l;i++){let levelDistance=levels[i].distance;if(levels[i].object.visible&&(levelDistance-=levelDistance*levels[i].hysteresis),distance<levelDistance)break}return levels[i-1].object}return null}raycast(raycaster,intersects2){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const distance=raycaster.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(distance).raycast(raycaster,intersects2)}}update(camera){const levels=this.levels;if(levels.length>1){_v1$2.setFromMatrixPosition(camera.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const distance=_v1$2.distanceTo(_v2$1)/camera.zoom;let i,l;for(levels[0].object.visible=!0,i=1,l=levels.length;i<l;i++){let levelDistance=levels[i].distance;if(levels[i].object.visible&&(levelDistance-=levelDistance*levels[i].hysteresis),!(distance>=levelDistance))break;levels[i-1].object.visible=!1,levels[i].object.visible=!0}for(this._currentLevel=i-1;i<l;i++)levels[i].object.visible=!1}}toJSON(meta){const data=super.toJSON(meta);!1===this.autoUpdate&&(data.object.autoUpdate=!1),data.object.levels=[];const levels=this.levels;for(let i=0,l=levels.length;i<l;i++){const level=levels[i];data.object.levels.push({object:level.object.uuid,distance:level.distance,hysteresis:level.hysteresis})}return data}}__name(LOD,"LOD");const _basePosition=new Vector32,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector32,_matrix=new Matrix42;class SkinnedMesh extends(null){constructor(geometry,material){super(geometry,material),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix42,this.bindMatrixInverse=new Matrix42}copy(source,recursive){return super.copy(source,recursive),this.bindMode=source.bindMode,this.bindMatrix.copy(source.bindMatrix),this.bindMatrixInverse.copy(source.bindMatrixInverse),this.skeleton=source.skeleton,this}bind(skeleton,bindMatrix){this.skeleton=skeleton,void 0===bindMatrix&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),bindMatrix=this.matrixWorld),this.bindMatrix.copy(bindMatrix),this.bindMatrixInverse.copy(bindMatrix).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const vector=new Vector4,skinWeight=this.geometry.attributes.skinWeight;for(let i=0,l=skinWeight.count;i<l;i++){vector.fromBufferAttribute(skinWeight,i);const scale=1/vector.manhattanLength();scale!==1/0?vector.multiplyScalar(scale):vector.set(1,0,0,0),skinWeight.setXYZW(i,vector.x,vector.y,vector.z,vector.w)}}updateMatrixWorld(force){super.updateMatrixWorld(force),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(index,target){const skeleton=this.skeleton,geometry=this.geometry;_skinIndex.fromBufferAttribute(geometry.attributes.skinIndex,index),_skinWeight.fromBufferAttribute(geometry.attributes.skinWeight,index),_basePosition.copy(target).applyMatrix4(this.bindMatrix),target.set(0,0,0);for(let i=0;i<4;i++){const weight=_skinWeight.getComponent(i);if(0!==weight){const boneIndex=_skinIndex.getComponent(i);_matrix.multiplyMatrices(skeleton.bones[boneIndex].matrixWorld,skeleton.boneInverses[boneIndex]),target.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),weight)}}return target.applyMatrix4(this.bindMatrixInverse)}}__name(SkinnedMesh,"SkinnedMesh");class Bone extends(null){constructor(){super(),this.isBone=!0,this.type="Bone"}}__name(Bone,"Bone");class DataTexture extends(null){constructor(data=null,width=1,height=1,format,type,mapping,wrapS,wrapT,magFilter=NearestFilter,minFilter=NearestFilter,anisotropy,encoding){super(null,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding),this.isDataTexture=!0,this.image={data,width,height},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}__name(DataTexture,"DataTexture");const _offsetMatrix=new Matrix42,_identityMatrix=new Matrix42;class Skeleton{constructor(bones=[],boneInverses=[]){this.uuid=generateUUID(),this.bones=bones.slice(0),this.boneInverses=boneInverses,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const bones=this.bones,boneInverses=this.boneInverses;if(this.boneMatrices=new Float32Array(16*bones.length),0===boneInverses.length)this.calculateInverses();else if(bones.length!==boneInverses.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,il=this.bones.length;i<il;i++)this.boneInverses.push(new Matrix42)}}calculateInverses(){this.boneInverses.length=0;for(let i=0,il=this.bones.length;i<il;i++){const inverse=new Matrix42;this.bones[i]&&inverse.copy(this.bones[i].matrixWorld).invert(),this.boneInverses.push(inverse)}}pose(){for(let i=0,il=this.bones.length;i<il;i++){const bone=this.bones[i];bone&&bone.matrixWorld.copy(this.boneInverses[i]).invert()}for(let i=0,il=this.bones.length;i<il;i++){const bone=this.bones[i];bone&&(bone.parent&&bone.parent.isBone?(bone.matrix.copy(bone.parent.matrixWorld).invert(),bone.matrix.multiply(bone.matrixWorld)):bone.matrix.copy(bone.matrixWorld),bone.matrix.decompose(bone.position,bone.quaternion,bone.scale))}}update(){const bones=this.bones,boneInverses=this.boneInverses,boneMatrices=this.boneMatrices,boneTexture=this.boneTexture;for(let i=0,il=bones.length;i<il;i++)_offsetMatrix.multiplyMatrices(bones[i]?bones[i].matrixWorld:_identityMatrix,boneInverses[i]),_offsetMatrix.toArray(boneMatrices,16*i);null!==boneTexture&&(boneTexture.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let size=Math.sqrt(4*this.bones.length);size=ceilPowerOfTwo(size),size=Math.max(size,4);const boneMatrices=new Float32Array(size*size*4);boneMatrices.set(this.boneMatrices);const boneTexture=new DataTexture(boneMatrices,size,size,RGBAFormat,FloatType);return boneTexture.needsUpdate=!0,this.boneMatrices=boneMatrices,this.boneTexture=boneTexture,this.boneTextureSize=size,this}getBoneByName(name){for(let i=0,il=this.bones.length;i<il;i++){const bone=this.bones[i];if(bone.name===name)return bone}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(json,bones){this.uuid=json.uuid;for(let i=0,l=json.bones.length;i<l;i++){const uuid=json.bones[i];let bone=bones[uuid];void 0===bone&&(console.warn("THREE.Skeleton: No bone found with UUID:",uuid),bone=new Bone),this.bones.push(bone),this.boneInverses.push((new Matrix42).fromArray(json.boneInverses[i]))}return this.init(),this}toJSON(){const data={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};data.uuid=this.uuid;const bones=this.bones,boneInverses=this.boneInverses;for(let i=0,l=bones.length;i<l;i++)data.bones.push(bones[i].uuid),data.boneInverses.push(boneInverses[i].toArray());return data}}__name(Skeleton,"Skeleton");class InstancedBufferAttribute extends BufferAttribute{constructor(array,itemSize,normalized,meshPerAttribute=1){super(array,itemSize,normalized),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=meshPerAttribute}copy(source){return super.copy(source),this.meshPerAttribute=source.meshPerAttribute,this}toJSON(){const data=super.toJSON();return data.meshPerAttribute=this.meshPerAttribute,data.isInstancedBufferAttribute=!0,data}}__name(InstancedBufferAttribute,"InstancedBufferAttribute");const _instanceLocalMatrix=new Matrix42,_instanceWorldMatrix=new Matrix42,_identity=new Matrix42,_mesh=new Mesh2;class InstancedMesh extends(null){constructor(geometry,material,count){super(geometry,material),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(16*count),16),this.instanceColor=null,this.count=count,this.frustumCulled=!1;for(let i=0;i<count;i++)this.setMatrixAt(i,_identity)}copy(source,recursive){return super.copy(source,recursive),this.instanceMatrix.copy(source.instanceMatrix),null!==source.instanceColor&&(this.instanceColor=source.instanceColor.clone()),this.count=source.count,this}getColorAt(index,color){color.fromArray(this.instanceColor.array,3*index)}getMatrixAt(index,matrix){matrix.fromArray(this.instanceMatrix.array,16*index)}raycast(raycaster,intersects2){const matrixWorld=this.matrixWorld,raycastTimes=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,void 0!==_mesh.material)for(let instanceId=0;instanceId<raycastTimes;instanceId++){this.getMatrixAt(instanceId,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(matrixWorld,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(raycaster,null);for(let i=0,l=null.length;i<l;i++){const intersect=null[i];intersect.instanceId=instanceId,intersect.object=this,intersects2.push(intersect)}null.length=0}}setColorAt(index,color){null===this.instanceColor&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),color.toArray(this.instanceColor.array,3*index)}setMatrixAt(index,matrix){matrix.toArray(this.instanceMatrix.array,16*index)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}__name(InstancedMesh,"InstancedMesh");class LineBasicMaterial extends(null){constructor(parameters){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.linewidth=source.linewidth,this.linecap=source.linecap,this.linejoin=source.linejoin,this.fog=source.fog,this}}__name(LineBasicMaterial,"LineBasicMaterial");const _start$1=new Vector32,_end$1=new Vector32,_inverseMatrix$1=new Matrix42,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends(null){constructor(geometry=new BufferGeometry,material=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=geometry,this.material=material,this.updateMorphTargets()}copy(source,recursive){return super.copy(source,recursive),this.material=source.material,this.geometry=source.geometry,this}computeLineDistances(){const geometry=this.geometry;if(null===geometry.index){const positionAttribute=geometry.attributes.position,lineDistances=[0];for(let i=1,l=positionAttribute.count;i<l;i++)_start$1.fromBufferAttribute(positionAttribute,i-1),_end$1.fromBufferAttribute(positionAttribute,i),lineDistances[i]=lineDistances[i-1],lineDistances[i]+=_start$1.distanceTo(_end$1);geometry.setAttribute("lineDistance",new Float32BufferAttribute(lineDistances,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(raycaster,intersects2){const geometry=this.geometry,matrixWorld=this.matrixWorld,threshold=raycaster.params.Line.threshold,drawRange=geometry.drawRange;if(null===geometry.boundingSphere&&geometry.computeBoundingSphere(),_sphere$1.copy(geometry.boundingSphere),_sphere$1.applyMatrix4(matrixWorld),_sphere$1.radius+=threshold,!1===raycaster.ray.intersectsSphere(_sphere$1))return;_inverseMatrix$1.copy(matrixWorld).invert(),_ray$1.copy(raycaster.ray).applyMatrix4(_inverseMatrix$1);const localThreshold=threshold/((this.scale.x+this.scale.y+this.scale.z)/3),localThresholdSq=localThreshold*localThreshold,vStart=new Vector32,vEnd=new Vector32,interSegment=new Vector32,interRay=new Vector32,step=this.isLineSegments?2:1,index=geometry.index,positionAttribute=geometry.attributes.position;if(null!==index)for(let i=Math.max(0,drawRange.start),l=Math.min(index.count,drawRange.start+drawRange.count)-1;i<l;i+=step){const a=index.getX(i),b=index.getX(i+1);if(vStart.fromBufferAttribute(positionAttribute,a),vEnd.fromBufferAttribute(positionAttribute,b),_ray$1.distanceSqToSegment(vStart,vEnd,interRay,interSegment)>localThresholdSq)continue;interRay.applyMatrix4(this.matrixWorld);const distance=raycaster.ray.origin.distanceTo(interRay);distance<raycaster.near||distance>raycaster.far||intersects2.push({distance,point:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}else for(let i=Math.max(0,drawRange.start),l=Math.min(positionAttribute.count,drawRange.start+drawRange.count)-1;i<l;i+=step){if(vStart.fromBufferAttribute(positionAttribute,i),vEnd.fromBufferAttribute(positionAttribute,i+1),_ray$1.distanceSqToSegment(vStart,vEnd,interRay,interSegment)>localThresholdSq)continue;interRay.applyMatrix4(this.matrixWorld);const distance=raycaster.ray.origin.distanceTo(interRay);distance<raycaster.near||distance>raycaster.far||intersects2.push({distance,point:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const morphAttributes=this.geometry.morphAttributes,keys=Object.keys(morphAttributes);if(keys.length>0){const morphAttribute=morphAttributes[keys[0]];if(void 0!==morphAttribute){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,ml=morphAttribute.length;m<ml;m++){const name=morphAttribute[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[name]=m}}}}}__name(Line,"Line");const _start=new Vector32,_end=new Vector32;class LineSegments extends(null){constructor(geometry,material){super(geometry,material),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const geometry=this.geometry;if(null===geometry.index){const positionAttribute=geometry.attributes.position,lineDistances=[];for(let i=0,l=positionAttribute.count;i<l;i+=2)_start.fromBufferAttribute(positionAttribute,i),_end.fromBufferAttribute(positionAttribute,i+1),lineDistances[i]=0===i?0:lineDistances[i-1],lineDistances[i+1]=lineDistances[i]+_start.distanceTo(_end);geometry.setAttribute("lineDistance",new Float32BufferAttribute(lineDistances,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}__name(LineSegments,"LineSegments");class LineLoop extends(null){constructor(geometry,material){super(geometry,material),this.isLineLoop=!0,this.type="LineLoop"}}__name(LineLoop,"LineLoop");class PointsMaterial extends(null){constructor(parameters){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.size=source.size,this.sizeAttenuation=source.sizeAttenuation,this.fog=source.fog,this}}__name(PointsMaterial,"PointsMaterial");const _inverseMatrix=new Matrix42,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector32;class Points extends(null){constructor(geometry=new BufferGeometry,material=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=geometry,this.material=material,this.updateMorphTargets()}copy(source,recursive){return super.copy(source,recursive),this.material=source.material,this.geometry=source.geometry,this}raycast(raycaster,intersects2){const geometry=this.geometry,matrixWorld=this.matrixWorld,threshold=raycaster.params.Points.threshold,drawRange=geometry.drawRange;if(null===geometry.boundingSphere&&geometry.computeBoundingSphere(),_sphere.copy(geometry.boundingSphere),_sphere.applyMatrix4(matrixWorld),_sphere.radius+=threshold,!1===raycaster.ray.intersectsSphere(_sphere))return;_inverseMatrix.copy(matrixWorld).invert(),_ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix);const localThreshold=threshold/((this.scale.x+this.scale.y+this.scale.z)/3),localThresholdSq=localThreshold*localThreshold,index=geometry.index,positionAttribute=geometry.attributes.position;if(null!==index)for(let i=Math.max(0,drawRange.start),il=Math.min(index.count,drawRange.start+drawRange.count);i<il;i++){const a=index.getX(i);_position$2.fromBufferAttribute(positionAttribute,a),testPoint(_position$2,a,localThresholdSq,matrixWorld,raycaster,intersects2,this)}else for(let i=Math.max(0,drawRange.start),l=Math.min(positionAttribute.count,drawRange.start+drawRange.count);i<l;i++)_position$2.fromBufferAttribute(positionAttribute,i),testPoint(_position$2,i,localThresholdSq,matrixWorld,raycaster,intersects2,this)}updateMorphTargets(){const morphAttributes=this.geometry.morphAttributes,keys=Object.keys(morphAttributes);if(keys.length>0){const morphAttribute=morphAttributes[keys[0]];if(void 0!==morphAttribute){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,ml=morphAttribute.length;m<ml;m++){const name=morphAttribute[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[name]=m}}}}}function testPoint(point,index,localThresholdSq,matrixWorld,raycaster,intersects2,object){const rayPointDistanceSq=_ray.distanceSqToPoint(point);if(rayPointDistanceSq<localThresholdSq){const intersectPoint=new Vector32;_ray.closestPointToPoint(point,intersectPoint),intersectPoint.applyMatrix4(matrixWorld);const distance=raycaster.ray.origin.distanceTo(intersectPoint);if(distance<raycaster.near||distance>raycaster.far)return;intersects2.push({distance,distanceToRay:Math.sqrt(rayPointDistanceSq),point:intersectPoint,index,face:null,object})}}__name(Points,"Points"),__name(testPoint,"testPoint"),__name(class VideoTexture extends(null){constructor(video,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy){super(video,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.isVideoTexture=!0,this.minFilter=void 0!==minFilter?minFilter:LinearFilter,this.magFilter=void 0!==magFilter?magFilter:LinearFilter,this.generateMipmaps=!1;const scope=this;function updateVideo(){scope.needsUpdate=!0,video.requestVideoFrameCallback(updateVideo)}__name(updateVideo,"updateVideo"),"requestVideoFrameCallback"in video&&video.requestVideoFrameCallback(updateVideo)}clone(){return new this.constructor(this.image).copy(this)}update(){const video=this.image;"requestVideoFrameCallback"in video==0&&video.readyState>=video.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},"VideoTexture"),__name(class FramebufferTexture extends(null){constructor(width,height,format){super({width,height}),this.isFramebufferTexture=!0,this.format=format,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}},"FramebufferTexture");class CompressedTexture extends(null){constructor(mipmaps,width,height,format,type,mapping,wrapS,wrapT,magFilter,minFilter,anisotropy,encoding){super(null,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding),this.isCompressedTexture=!0,this.image={width,height},this.mipmaps=mipmaps,this.flipY=!1,this.generateMipmaps=!1}}__name(CompressedTexture,"CompressedTexture"),__name(class CompressedArrayTexture extends(null){constructor(mipmaps,width,height,depth,format,type){super(mipmaps,width,height,format,type),this.isCompressedArrayTexture=!0,this.image.depth=depth,this.wrapR=ClampToEdgeWrapping}},"CompressedArrayTexture"),__name(class CanvasTexture extends(null){constructor(canvas,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy){super(canvas,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.isCanvasTexture=!0,this.needsUpdate=!0}},"CanvasTexture");class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(u,optionalTarget){const t=this.getUtoTmapping(u);return this.getPoint(t,optionalTarget)}getPoints(divisions=5){const points=[];for(let d=0;d<=divisions;d++)points.push(this.getPoint(d/divisions));return points}getSpacedPoints(divisions=5){const points=[];for(let d=0;d<=divisions;d++)points.push(this.getPointAt(d/divisions));return points}getLength(){const lengths=this.getLengths();return lengths[lengths.length-1]}getLengths(divisions=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===divisions+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const cache=[];let current,last=this.getPoint(0),sum=0;cache.push(0);for(let p=1;p<=divisions;p++)current=this.getPoint(p/divisions),sum+=current.distanceTo(last),cache.push(sum),last=current;return this.cacheArcLengths=cache,cache}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(u,distance){const arcLengths=this.getLengths();let i=0;const il=arcLengths.length;let targetArcLength;targetArcLength=distance||u*arcLengths[il-1];let comparison,low=0,high=il-1;for(;low<=high;)if(i=Math.floor(low+(high-low)/2),comparison=arcLengths[i]-targetArcLength,comparison<0)low=i+1;else{if(!(comparison>0)){high=i;break}high=i-1}if(i=high,arcLengths[i]===targetArcLength)return i/(il-1);const lengthBefore=arcLengths[i];return(i+(targetArcLength-lengthBefore)/(arcLengths[i+1]-lengthBefore))/(il-1)}getTangent(t,optionalTarget){let t1=t-1e-4,t2=t+1e-4;t1<0&&(t1=0),t2>1&&(t2=1);const pt1=this.getPoint(t1),pt2=this.getPoint(t2),tangent=optionalTarget||(pt1.isVector2?new Vector22:new Vector32);return tangent.copy(pt2).sub(pt1).normalize(),tangent}getTangentAt(u,optionalTarget){const t=this.getUtoTmapping(u);return this.getTangent(t,optionalTarget)}computeFrenetFrames(segments,closed){const normal=new Vector32,tangents=[],normals=[],binormals=[],vec=new Vector32,mat=new Matrix42;for(let i=0;i<=segments;i++)tangents[i]=this.getTangentAt(i/segments,new Vector32);normals[0]=new Vector32,binormals[0]=new Vector32;let min=Number.MAX_VALUE;const tx=Math.abs(tangents[0].x),ty=Math.abs(tangents[0].y),tz=Math.abs(tangents[0].z);tx<=min&&(min=tx,normal.set(1,0,0)),ty<=min&&(min=ty,normal.set(0,1,0)),tz<=min&&normal.set(0,0,1),vec.crossVectors(tangents[0],normal).normalize(),normals[0].crossVectors(tangents[0],vec),binormals[0].crossVectors(tangents[0],normals[0]);for(let i=1;i<=segments;i++){if(normals[i]=normals[i-1].clone(),binormals[i]=binormals[i-1].clone(),vec.crossVectors(tangents[i-1],tangents[i]),vec.length()>Number.EPSILON){vec.normalize();const theta=Math.acos(clamp(tangents[i-1].dot(tangents[i]),-1,1));normals[i].applyMatrix4(mat.makeRotationAxis(vec,theta))}binormals[i].crossVectors(tangents[i],normals[i])}if(!0===closed){let theta=Math.acos(clamp(normals[0].dot(normals[segments]),-1,1));theta/=segments,tangents[0].dot(vec.crossVectors(normals[0],normals[segments]))>0&&(theta=-theta);for(let i=1;i<=segments;i++)normals[i].applyMatrix4(mat.makeRotationAxis(tangents[i],theta*i)),binormals[i].crossVectors(tangents[i],normals[i])}return{tangents,normals,binormals}}clone(){return(new this.constructor).copy(this)}copy(source){return this.arcLengthDivisions=source.arcLengthDivisions,this}toJSON(){const data={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return data.arcLengthDivisions=this.arcLengthDivisions,data.type=this.type,data}fromJSON(json){return this.arcLengthDivisions=json.arcLengthDivisions,this}}__name(Curve,"Curve");class EllipseCurve extends Curve{constructor(aX=0,aY=0,xRadius=1,yRadius=1,aStartAngle=0,aEndAngle=2*Math.PI,aClockwise=!1,aRotation=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=aX,this.aY=aY,this.xRadius=xRadius,this.yRadius=yRadius,this.aStartAngle=aStartAngle,this.aEndAngle=aEndAngle,this.aClockwise=aClockwise,this.aRotation=aRotation}getPoint(t,optionalTarget){const point=optionalTarget||new Vector22,twoPi=2*Math.PI;let deltaAngle=this.aEndAngle-this.aStartAngle;const samePoints=Math.abs(deltaAngle)<Number.EPSILON;for(;deltaAngle<0;)deltaAngle+=twoPi;for(;deltaAngle>twoPi;)deltaAngle-=twoPi;deltaAngle<Number.EPSILON&&(deltaAngle=samePoints?0:twoPi),!0===this.aClockwise&&!samePoints&&(deltaAngle===twoPi?deltaAngle=-twoPi:deltaAngle-=twoPi);const angle=this.aStartAngle+t*deltaAngle;let x=this.aX+this.xRadius*Math.cos(angle),y=this.aY+this.yRadius*Math.sin(angle);if(0!==this.aRotation){const cos=Math.cos(this.aRotation),sin=Math.sin(this.aRotation),tx=x-this.aX,ty=y-this.aY;x=tx*cos-ty*sin+this.aX,y=tx*sin+ty*cos+this.aY}return point.set(x,y)}copy(source){return super.copy(source),this.aX=source.aX,this.aY=source.aY,this.xRadius=source.xRadius,this.yRadius=source.yRadius,this.aStartAngle=source.aStartAngle,this.aEndAngle=source.aEndAngle,this.aClockwise=source.aClockwise,this.aRotation=source.aRotation,this}toJSON(){const data=super.toJSON();return data.aX=this.aX,data.aY=this.aY,data.xRadius=this.xRadius,data.yRadius=this.yRadius,data.aStartAngle=this.aStartAngle,data.aEndAngle=this.aEndAngle,data.aClockwise=this.aClockwise,data.aRotation=this.aRotation,data}fromJSON(json){return super.fromJSON(json),this.aX=json.aX,this.aY=json.aY,this.xRadius=json.xRadius,this.yRadius=json.yRadius,this.aStartAngle=json.aStartAngle,this.aEndAngle=json.aEndAngle,this.aClockwise=json.aClockwise,this.aRotation=json.aRotation,this}}__name(EllipseCurve,"EllipseCurve");class ArcCurve extends EllipseCurve{constructor(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){super(aX,aY,aRadius,aRadius,aStartAngle,aEndAngle,aClockwise),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let c0=0,c1=0,c2=0,c3=0;function init(x0,x1,t0,t1){c0=x0,c1=t0,c2=-3*x0+3*x1-2*t0-t1,c3=2*x0-2*x1+t0+t1}return __name(init,"init"),{initCatmullRom:function(x0,x1,x2,x3,tension){init(x1,x2,tension*(x2-x0),tension*(x3-x1))},initNonuniformCatmullRom:function(x0,x1,x2,x3,dt0,dt1,dt2){let t1=(x1-x0)/dt0-(x2-x0)/(dt0+dt1)+(x2-x1)/dt1,t2=(x2-x1)/dt1-(x3-x1)/(dt1+dt2)+(x3-x2)/dt2;t1*=dt1,t2*=dt1,init(x1,x2,t1,t2)},calc:function(t){const t2=t*t;return c0+c1*t+c2*t2+c3*(t2*t)}}}__name(ArcCurve,"ArcCurve"),__name(CubicPoly,"CubicPoly");const tmp=new Vector32,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(points=[],closed=!1,curveType="centripetal",tension=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=points,this.closed=closed,this.curveType=curveType,this.tension=tension}getPoint(t,optionalTarget=new Vector32){const point=optionalTarget,points=this.points,l=points.length,p=(l-(this.closed?0:1))*t;let p0,p3,intPoint=Math.floor(p),weight=p-intPoint;this.closed?intPoint+=intPoint>0?0:(Math.floor(Math.abs(intPoint)/l)+1)*l:0===weight&&intPoint===l-1&&(intPoint=l-2,weight=1),this.closed||intPoint>0?p0=points[(intPoint-1)%l]:(tmp.subVectors(points[0],points[1]).add(points[0]),p0=tmp);const p1=points[intPoint%l],p2=points[(intPoint+1)%l];if(this.closed||intPoint+2<l?p3=points[(intPoint+2)%l]:(tmp.subVectors(points[l-1],points[l-2]).add(points[l-1]),p3=tmp),"centripetal"===this.curveType||"chordal"===this.curveType){const pow="chordal"===this.curveType?.5:.25;let dt0=Math.pow(p0.distanceToSquared(p1),pow),dt1=Math.pow(p1.distanceToSquared(p2),pow),dt2=Math.pow(p2.distanceToSquared(p3),pow);dt1<1e-4&&(dt1=1),dt0<1e-4&&(dt0=dt1),dt2<1e-4&&(dt2=dt1),px.initNonuniformCatmullRom(p0.x,p1.x,p2.x,p3.x,dt0,dt1,dt2),py.initNonuniformCatmullRom(p0.y,p1.y,p2.y,p3.y,dt0,dt1,dt2),pz.initNonuniformCatmullRom(p0.z,p1.z,p2.z,p3.z,dt0,dt1,dt2)}else"catmullrom"===this.curveType&&(px.initCatmullRom(p0.x,p1.x,p2.x,p3.x,this.tension),py.initCatmullRom(p0.y,p1.y,p2.y,p3.y,this.tension),pz.initCatmullRom(p0.z,p1.z,p2.z,p3.z,this.tension));return point.set(px.calc(weight),py.calc(weight),pz.calc(weight)),point}copy(source){super.copy(source),this.points=[];for(let i=0,l=source.points.length;i<l;i++)this.points.push(source.points[i].clone());return this.closed=source.closed,this.curveType=source.curveType,this.tension=source.tension,this}toJSON(){const data=super.toJSON();data.points=[];for(let i=0,l=this.points.length;i<l;i++)data.points.push(this.points[i].toArray());return data.closed=this.closed,data.curveType=this.curveType,data.tension=this.tension,data}fromJSON(json){super.fromJSON(json),this.points=[];for(let i=0,l=json.points.length;i<l;i++){const point=json.points[i];this.points.push((new Vector32).fromArray(point))}return this.closed=json.closed,this.curveType=json.curveType,this.tension=json.tension,this}}function CatmullRom(t,p0,p1,p2,p3){const v0=.5*(p2-p0),v1=.5*(p3-p1),t2=t*t;return(2*p1-2*p2+v0+v1)*(t*t2)+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}function QuadraticBezierP0(t,p){const k=1-t;return k*k*p}function QuadraticBezierP1(t,p){return 2*(1-t)*t*p}function QuadraticBezierP2(t,p){return t*t*p}function QuadraticBezier(t,p0,p1,p2){return QuadraticBezierP0(t,p0)+QuadraticBezierP1(t,p1)+QuadraticBezierP2(t,p2)}function CubicBezierP0(t,p){const k=1-t;return k*k*k*p}function CubicBezierP1(t,p){const k=1-t;return 3*k*k*t*p}function CubicBezierP2(t,p){return 3*(1-t)*t*t*p}function CubicBezierP3(t,p){return t*t*t*p}function CubicBezier(t,p0,p1,p2,p3){return CubicBezierP0(t,p0)+CubicBezierP1(t,p1)+CubicBezierP2(t,p2)+CubicBezierP3(t,p3)}__name(CatmullRomCurve3,"CatmullRomCurve3"),__name(CatmullRom,"CatmullRom"),__name(QuadraticBezierP0,"QuadraticBezierP0"),__name(QuadraticBezierP1,"QuadraticBezierP1"),__name(QuadraticBezierP2,"QuadraticBezierP2"),__name(QuadraticBezier,"QuadraticBezier"),__name(CubicBezierP0,"CubicBezierP0"),__name(CubicBezierP1,"CubicBezierP1"),__name(CubicBezierP2,"CubicBezierP2"),__name(CubicBezierP3,"CubicBezierP3"),__name(CubicBezier,"CubicBezier");class CubicBezierCurve extends Curve{constructor(v0=new Vector22,v1=new Vector22,v2=new Vector22,v3=new Vector22){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=v0,this.v1=v1,this.v2=v2,this.v3=v3}getPoint(t,optionalTarget=new Vector22){const point=optionalTarget,v0=this.v0,v1=this.v1,v2=this.v2,v3=this.v3;return point.set(CubicBezier(t,v0.x,v1.x,v2.x,v3.x),CubicBezier(t,v0.y,v1.y,v2.y,v3.y)),point}copy(source){return super.copy(source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this}toJSON(){const data=super.toJSON();return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data}fromJSON(json){return super.fromJSON(json),this.v0.fromArray(json.v0),this.v1.fromArray(json.v1),this.v2.fromArray(json.v2),this.v3.fromArray(json.v3),this}}__name(CubicBezierCurve,"CubicBezierCurve");class CubicBezierCurve3 extends Curve{constructor(v0=new Vector32,v1=new Vector32,v2=new Vector32,v3=new Vector32){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=v0,this.v1=v1,this.v2=v2,this.v3=v3}getPoint(t,optionalTarget=new Vector32){const point=optionalTarget,v0=this.v0,v1=this.v1,v2=this.v2,v3=this.v3;return point.set(CubicBezier(t,v0.x,v1.x,v2.x,v3.x),CubicBezier(t,v0.y,v1.y,v2.y,v3.y),CubicBezier(t,v0.z,v1.z,v2.z,v3.z)),point}copy(source){return super.copy(source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this}toJSON(){const data=super.toJSON();return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data}fromJSON(json){return super.fromJSON(json),this.v0.fromArray(json.v0),this.v1.fromArray(json.v1),this.v2.fromArray(json.v2),this.v3.fromArray(json.v3),this}}__name(CubicBezierCurve3,"CubicBezierCurve3");class LineCurve extends Curve{constructor(v1=new Vector22,v2=new Vector22){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=v1,this.v2=v2}getPoint(t,optionalTarget=new Vector22){const point=optionalTarget;return 1===t?point.copy(this.v2):(point.copy(this.v2).sub(this.v1),point.multiplyScalar(t).add(this.v1)),point}getPointAt(u,optionalTarget){return this.getPoint(u,optionalTarget)}getTangent(t,optionalTarget){const tangent=optionalTarget||new Vector22;return tangent.copy(this.v2).sub(this.v1).normalize(),tangent}copy(source){return super.copy(source),this.v1.copy(source.v1),this.v2.copy(source.v2),this}toJSON(){const data=super.toJSON();return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}fromJSON(json){return super.fromJSON(json),this.v1.fromArray(json.v1),this.v2.fromArray(json.v2),this}}__name(LineCurve,"LineCurve");class LineCurve3 extends Curve{constructor(v1=new Vector32,v2=new Vector32){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=v1,this.v2=v2}getPoint(t,optionalTarget=new Vector32){const point=optionalTarget;return 1===t?point.copy(this.v2):(point.copy(this.v2).sub(this.v1),point.multiplyScalar(t).add(this.v1)),point}getPointAt(u,optionalTarget){return this.getPoint(u,optionalTarget)}copy(source){return super.copy(source),this.v1.copy(source.v1),this.v2.copy(source.v2),this}toJSON(){const data=super.toJSON();return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}fromJSON(json){return super.fromJSON(json),this.v1.fromArray(json.v1),this.v2.fromArray(json.v2),this}}__name(LineCurve3,"LineCurve3");class QuadraticBezierCurve extends Curve{constructor(v0=new Vector22,v1=new Vector22,v2=new Vector22){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=v0,this.v1=v1,this.v2=v2}getPoint(t,optionalTarget=new Vector22){const point=optionalTarget,v0=this.v0,v1=this.v1,v2=this.v2;return point.set(QuadraticBezier(t,v0.x,v1.x,v2.x),QuadraticBezier(t,v0.y,v1.y,v2.y)),point}copy(source){return super.copy(source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this}toJSON(){const data=super.toJSON();return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}fromJSON(json){return super.fromJSON(json),this.v0.fromArray(json.v0),this.v1.fromArray(json.v1),this.v2.fromArray(json.v2),this}}__name(QuadraticBezierCurve,"QuadraticBezierCurve");class QuadraticBezierCurve3 extends Curve{constructor(v0=new Vector32,v1=new Vector32,v2=new Vector32){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=v0,this.v1=v1,this.v2=v2}getPoint(t,optionalTarget=new Vector32){const point=optionalTarget,v0=this.v0,v1=this.v1,v2=this.v2;return point.set(QuadraticBezier(t,v0.x,v1.x,v2.x),QuadraticBezier(t,v0.y,v1.y,v2.y),QuadraticBezier(t,v0.z,v1.z,v2.z)),point}copy(source){return super.copy(source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this}toJSON(){const data=super.toJSON();return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}fromJSON(json){return super.fromJSON(json),this.v0.fromArray(json.v0),this.v1.fromArray(json.v1),this.v2.fromArray(json.v2),this}}__name(QuadraticBezierCurve3,"QuadraticBezierCurve3");class SplineCurve extends Curve{constructor(points=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=points}getPoint(t,optionalTarget=new Vector22){const point=optionalTarget,points=this.points,p=(points.length-1)*t,intPoint=Math.floor(p),weight=p-intPoint,p0=points[0===intPoint?intPoint:intPoint-1],p1=points[intPoint],p2=points[intPoint>points.length-2?points.length-1:intPoint+1],p3=points[intPoint>points.length-3?points.length-1:intPoint+2];return point.set(CatmullRom(weight,p0.x,p1.x,p2.x,p3.x),CatmullRom(weight,p0.y,p1.y,p2.y,p3.y)),point}copy(source){super.copy(source),this.points=[];for(let i=0,l=source.points.length;i<l;i++)this.points.push(source.points[i].clone());return this}toJSON(){const data=super.toJSON();data.points=[];for(let i=0,l=this.points.length;i<l;i++)data.points.push(this.points[i].toArray());return data}fromJSON(json){super.fromJSON(json),this.points=[];for(let i=0,l=json.points.length;i<l;i++){const point=json.points[i];this.points.push((new Vector22).fromArray(point))}return this}}__name(SplineCurve,"SplineCurve");var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(curve){this.curves.push(curve)}closePath(){const startPoint=this.curves[0].getPoint(0),endPoint=this.curves[this.curves.length-1].getPoint(1);startPoint.equals(endPoint)||this.curves.push(new LineCurve(endPoint,startPoint))}getPoint(t,optionalTarget){const d=t*this.getLength(),curveLengths=this.getCurveLengths();let i=0;for(;i<curveLengths.length;){if(curveLengths[i]>=d){const diff=curveLengths[i]-d,curve=this.curves[i],segmentLength=curve.getLength();return curve.getPointAt(0===segmentLength?0:1-diff/segmentLength,optionalTarget)}i++}return null}getLength(){const lens=this.getCurveLengths();return lens[lens.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const lengths=[];let sums=0;for(let i=0,l=this.curves.length;i<l;i++)sums+=this.curves[i].getLength(),lengths.push(sums);return this.cacheLengths=lengths,lengths}getSpacedPoints(divisions=40){const points=[];for(let i=0;i<=divisions;i++)points.push(this.getPoint(i/divisions));return this.autoClose&&points.push(points[0]),points}getPoints(divisions=12){const points=[];let last;for(let i=0,curves=this.curves;i<curves.length;i++){const curve=curves[i],pts=curve.getPoints(curve.isEllipseCurve?2*divisions:curve.isLineCurve||curve.isLineCurve3?1:curve.isSplineCurve?divisions*curve.points.length:divisions);for(let j=0;j<pts.length;j++){const point=pts[j];last&&last.equals(point)||(points.push(point),last=point)}}return this.autoClose&&points.length>1&&!points[points.length-1].equals(points[0])&&points.push(points[0]),points}copy(source){super.copy(source),this.curves=[];for(let i=0,l=source.curves.length;i<l;i++)this.curves.push(source.curves[i].clone());return this.autoClose=source.autoClose,this}toJSON(){const data=super.toJSON();data.autoClose=this.autoClose,data.curves=[];for(let i=0,l=this.curves.length;i<l;i++)data.curves.push(this.curves[i].toJSON());return data}fromJSON(json){super.fromJSON(json),this.autoClose=json.autoClose,this.curves=[];for(let i=0,l=json.curves.length;i<l;i++){const curve=json.curves[i];this.curves.push((new Curves[curve.type]).fromJSON(curve))}return this}}__name(CurvePath,"CurvePath");class Path extends CurvePath{constructor(points){super(),this.type="Path",this.currentPoint=new Vector22,points&&this.setFromPoints(points)}setFromPoints(points){this.moveTo(points[0].x,points[0].y);for(let i=1,l=points.length;i<l;i++)this.lineTo(points[i].x,points[i].y);return this}moveTo(x,y){return this.currentPoint.set(x,y),this}lineTo(x,y){const curve=new LineCurve(this.currentPoint.clone(),new Vector22(x,y));return this.curves.push(curve),this.currentPoint.set(x,y),this}quadraticCurveTo(aCPx,aCPy,aX,aY){const curve=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector22(aCPx,aCPy),new Vector22(aX,aY));return this.curves.push(curve),this.currentPoint.set(aX,aY),this}bezierCurveTo(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY){const curve=new CubicBezierCurve(this.currentPoint.clone(),new Vector22(aCP1x,aCP1y),new Vector22(aCP2x,aCP2y),new Vector22(aX,aY));return this.curves.push(curve),this.currentPoint.set(aX,aY),this}splineThru(pts){const npts=[this.currentPoint.clone()].concat(pts),curve=new SplineCurve(npts);return this.curves.push(curve),this.currentPoint.copy(pts[pts.length-1]),this}arc(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){return this.absarc(aX+this.currentPoint.x,aY+this.currentPoint.y,aRadius,aStartAngle,aEndAngle,aClockwise),this}absarc(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){return this.absellipse(aX,aY,aRadius,aRadius,aStartAngle,aEndAngle,aClockwise),this}ellipse(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation){return this.absellipse(aX+this.currentPoint.x,aY+this.currentPoint.y,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation),this}absellipse(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation){const curve=new EllipseCurve(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation);if(this.curves.length>0){const firstPoint=curve.getPoint(0);firstPoint.equals(this.currentPoint)||this.lineTo(firstPoint.x,firstPoint.y)}this.curves.push(curve);const lastPoint=curve.getPoint(1);return this.currentPoint.copy(lastPoint),this}copy(source){return super.copy(source),this.currentPoint.copy(source.currentPoint),this}toJSON(){const data=super.toJSON();return data.currentPoint=this.currentPoint.toArray(),data}fromJSON(json){return super.fromJSON(json),this.currentPoint.fromArray(json.currentPoint),this}}__name(Path,"Path");class LatheGeometry extends BufferGeometry{constructor(points=[new Vector22(0,-.5),new Vector22(.5,0),new Vector22(0,.5)],segments=12,phiStart=0,phiLength=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points,segments,phiStart,phiLength},segments=Math.floor(segments),phiLength=clamp(phiLength,0,2*Math.PI);const indices=[],vertices=[],uvs=[],initNormals=[],normals=[],inverseSegments=1/segments,vertex2=new Vector32,uv=new Vector22,normal=new Vector32,curNormal=new Vector32,prevNormal=new Vector32;let dx=0,dy=0;for(let j=0;j<=points.length-1;j++)switch(j){case 0:dx=points[j+1].x-points[j].x,dy=points[j+1].y-points[j].y,normal.x=1*dy,normal.y=-dx,normal.z=0*dy,prevNormal.copy(normal),normal.normalize(),initNormals.push(normal.x,normal.y,normal.z);break;case points.length-1:initNormals.push(prevNormal.x,prevNormal.y,prevNormal.z);break;default:dx=points[j+1].x-points[j].x,dy=points[j+1].y-points[j].y,normal.x=1*dy,normal.y=-dx,normal.z=0*dy,curNormal.copy(normal),normal.x+=prevNormal.x,normal.y+=prevNormal.y,normal.z+=prevNormal.z,normal.normalize(),initNormals.push(normal.x,normal.y,normal.z),prevNormal.copy(curNormal)}for(let i=0;i<=segments;i++){const phi=phiStart+i*inverseSegments*phiLength,sin=Math.sin(phi),cos=Math.cos(phi);for(let j=0;j<=points.length-1;j++)vertex2.x=points[j].x*sin,vertex2.y=points[j].y,vertex2.z=points[j].x*cos,vertices.push(vertex2.x,vertex2.y,vertex2.z),uv.x=i/segments,uv.y=j/(points.length-1),uvs.push(uv.x,uv.y),normals.push(initNormals[3*j+0]*sin,initNormals[3*j+1],initNormals[3*j+0]*cos)}for(let i=0;i<segments;i++)for(let j=0;j<points.length-1;j++){const base=j+i*points.length,b=base+points.length,c=base+points.length+1,d=base+1;indices.push(base,b,d),indices.push(c,d,b)}this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2)),this.setAttribute("normal",new Float32BufferAttribute(normals,3))}static fromJSON(data){return new LatheGeometry(data.points,data.segments,data.phiStart,data.phiLength)}}__name(LatheGeometry,"LatheGeometry");class CapsuleGeometry extends LatheGeometry{constructor(radius=1,length=1,capSegments=4,radialSegments=8){const path=new Path;path.absarc(0,-length/2,radius,1.5*Math.PI,0),path.absarc(0,length/2,radius,0,.5*Math.PI),super(path.getPoints(capSegments),radialSegments),this.type="CapsuleGeometry",this.parameters={radius,height:length,capSegments,radialSegments}}static fromJSON(data){return new CapsuleGeometry(data.radius,data.length,data.capSegments,data.radialSegments)}}__name(CapsuleGeometry,"CapsuleGeometry");class CircleGeometry extends BufferGeometry{constructor(radius=1,segments=32,thetaStart=0,thetaLength=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius,segments,thetaStart,thetaLength},segments=Math.max(3,segments);const indices=[],vertices=[],normals=[],uvs=[],vertex2=new Vector32,uv=new Vector22;vertices.push(0,0,0),normals.push(0,0,1),uvs.push(.5,.5);for(let s=0,i=3;s<=segments;s++,i+=3){const segment=thetaStart+s/segments*thetaLength;vertex2.x=radius*Math.cos(segment),vertex2.y=radius*Math.sin(segment),vertices.push(vertex2.x,vertex2.y,vertex2.z),normals.push(0,0,1),uv.x=(vertices[i]/radius+1)/2,uv.y=(vertices[i+1]/radius+1)/2,uvs.push(uv.x,uv.y)}for(let i=1;i<=segments;i++)indices.push(i,i+1,0);this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2))}static fromJSON(data){return new CircleGeometry(data.radius,data.segments,data.thetaStart,data.thetaLength)}}__name(CircleGeometry,"CircleGeometry");class CylinderGeometry2 extends BufferGeometry{constructor(radiusTop=1,radiusBottom=1,height=1,radialSegments=32,heightSegments=1,openEnded=!1,thetaStart=0,thetaLength=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop,radiusBottom,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength};const scope=this;radialSegments=Math.floor(radialSegments),heightSegments=Math.floor(heightSegments);const indices=[],vertices=[],normals=[],uvs=[];let index=0;const indexArray=[],halfHeight=height/2;let groupStart=0;function generateTorso(){const normal=new Vector32,vertex2=new Vector32;let groupCount=0;const slope=(radiusBottom-radiusTop)/height;for(let y=0;y<=heightSegments;y++){const indexRow=[],v=y/heightSegments,radius=v*(radiusBottom-radiusTop)+radiusTop;for(let x=0;x<=radialSegments;x++){const u=x/radialSegments,theta=u*thetaLength+thetaStart,sinTheta=Math.sin(theta),cosTheta=Math.cos(theta);vertex2.x=radius*sinTheta,vertex2.y=-v*height+halfHeight,vertex2.z=radius*cosTheta,vertices.push(vertex2.x,vertex2.y,vertex2.z),normal.set(sinTheta,slope,cosTheta).normalize(),normals.push(normal.x,normal.y,normal.z),uvs.push(u,1-v),indexRow.push(index++)}indexArray.push(indexRow)}for(let x=0;x<radialSegments;x++)for(let y=0;y<heightSegments;y++){const b=indexArray[y+1][x],c=indexArray[y+1][x+1],d=indexArray[y][x+1];indices.push(indexArray[y][x],b,d),indices.push(b,c,d),groupCount+=6}scope.addGroup(groupStart,groupCount,0),groupStart+=groupCount}function generateCap(top){const centerIndexStart=index,uv=new Vector22,vertex2=new Vector32;let groupCount=0;const radius=!0===top?radiusTop:radiusBottom,sign2=!0===top?1:-1;for(let x=1;x<=radialSegments;x++)vertices.push(0,halfHeight*sign2,0),normals.push(0,sign2,0),uvs.push(.5,.5),index++;const centerIndexEnd=index;for(let x=0;x<=radialSegments;x++){const theta=x/radialSegments*thetaLength+thetaStart,cosTheta=Math.cos(theta),sinTheta=Math.sin(theta);vertex2.x=radius*sinTheta,vertex2.y=halfHeight*sign2,vertex2.z=radius*cosTheta,vertices.push(vertex2.x,vertex2.y,vertex2.z),normals.push(0,sign2,0),uv.x=.5*cosTheta+.5,uv.y=.5*sinTheta*sign2+.5,uvs.push(uv.x,uv.y),index++}for(let x=0;x<radialSegments;x++){const c=centerIndexStart+x,i=centerIndexEnd+x;!0===top?indices.push(i,i+1,c):indices.push(i+1,i,c),groupCount+=3}scope.addGroup(groupStart,groupCount,!0===top?1:2),groupStart+=groupCount}generateTorso(),!1===openEnded&&(radiusTop>0&&generateCap(!0),radiusBottom>0&&generateCap(!1)),this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2)),__name(generateTorso,"generateTorso"),__name(generateCap,"generateCap")}static fromJSON(data){return new CylinderGeometry2(data.radiusTop,data.radiusBottom,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength)}}__name(CylinderGeometry2,"CylinderGeometry");class ConeGeometry extends CylinderGeometry2{constructor(radius=1,height=1,radialSegments=32,heightSegments=1,openEnded=!1,thetaStart=0,thetaLength=2*Math.PI){super(0,radius,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength),this.type="ConeGeometry",this.parameters={radius,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength}}static fromJSON(data){return new ConeGeometry(data.radius,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength)}}__name(ConeGeometry,"ConeGeometry");class PolyhedronGeometry extends BufferGeometry{constructor(vertices=[],indices=[],radius=1,detail=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices,indices,radius,detail};const vertexBuffer=[],uvBuffer=[];function subdivide(detail2){const a=new Vector32,b=new Vector32,c=new Vector32;for(let i=0;i<indices.length;i+=3)getVertexByIndex(indices[i+0],a),getVertexByIndex(indices[i+1],b),getVertexByIndex(indices[i+2],c),subdivideFace(a,b,c,detail2)}function subdivideFace(a,b,c,detail2){const cols=detail2+1,v=[];for(let i=0;i<=cols;i++){v[i]=[];const aj=a.clone().lerp(c,i/cols),bj=b.clone().lerp(c,i/cols),rows=cols-i;for(let j=0;j<=rows;j++)v[i][j]=0===j&&i===cols?aj:aj.clone().lerp(bj,j/rows)}for(let i=0;i<cols;i++)for(let j=0;j<2*(cols-i)-1;j++){const k=Math.floor(j/2);j%2==0?(pushVertex(v[i][k+1]),pushVertex(v[i+1][k]),pushVertex(v[i][k])):(pushVertex(v[i][k+1]),pushVertex(v[i+1][k+1]),pushVertex(v[i+1][k]))}}function applyRadius(radius2){const vertex2=new Vector32;for(let i=0;i<vertexBuffer.length;i+=3)vertex2.x=vertexBuffer[i+0],vertex2.y=vertexBuffer[i+1],vertex2.z=vertexBuffer[i+2],vertex2.normalize().multiplyScalar(radius2),vertexBuffer[i+0]=vertex2.x,vertexBuffer[i+1]=vertex2.y,vertexBuffer[i+2]=vertex2.z}function generateUVs(){const vertex2=new Vector32;for(let i=0;i<vertexBuffer.length;i+=3){vertex2.x=vertexBuffer[i+0],vertex2.y=vertexBuffer[i+1],vertex2.z=vertexBuffer[i+2];const u=azimuth(vertex2)/2/Math.PI+.5,v=inclination(vertex2)/Math.PI+.5;uvBuffer.push(u,1-v)}correctUVs(),correctSeam()}function correctSeam(){for(let i=0;i<uvBuffer.length;i+=6){const x0=uvBuffer[i+0],x1=uvBuffer[i+2],x2=uvBuffer[i+4],max=Math.max(x0,x1,x2),min=Math.min(x0,x1,x2);max>.9&&min<.1&&(x0<.2&&(uvBuffer[i+0]+=1),x1<.2&&(uvBuffer[i+2]+=1),x2<.2&&(uvBuffer[i+4]+=1))}}function pushVertex(vertex2){vertexBuffer.push(vertex2.x,vertex2.y,vertex2.z)}function getVertexByIndex(index,vertex2){const stride=3*index;vertex2.x=vertices[stride+0],vertex2.y=vertices[stride+1],vertex2.z=vertices[stride+2]}function correctUVs(){const a=new Vector32,b=new Vector32,c=new Vector32,centroid=new Vector32,uvA=new Vector22,uvB=new Vector22,uvC=new Vector22;for(let i=0,j=0;i<vertexBuffer.length;i+=9,j+=6){a.set(vertexBuffer[i+0],vertexBuffer[i+1],vertexBuffer[i+2]),b.set(vertexBuffer[i+3],vertexBuffer[i+4],vertexBuffer[i+5]),c.set(vertexBuffer[i+6],vertexBuffer[i+7],vertexBuffer[i+8]),uvA.set(uvBuffer[j+0],uvBuffer[j+1]),uvB.set(uvBuffer[j+2],uvBuffer[j+3]),uvC.set(uvBuffer[j+4],uvBuffer[j+5]),centroid.copy(a).add(b).add(c).divideScalar(3);const azi=azimuth(centroid);correctUV(uvA,j+0,a,azi),correctUV(uvB,j+2,b,azi),correctUV(uvC,j+4,c,azi)}}function correctUV(uv,stride,vector,azimuth2){azimuth2<0&&1===uv.x&&(uvBuffer[stride]=uv.x-1),0===vector.x&&0===vector.z&&(uvBuffer[stride]=azimuth2/2/Math.PI+.5)}function azimuth(vector){return Math.atan2(vector.z,-vector.x)}function inclination(vector){return Math.atan2(-vector.y,Math.sqrt(vector.x*vector.x+vector.z*vector.z))}subdivide(detail),applyRadius(radius),generateUVs(),this.setAttribute("position",new Float32BufferAttribute(vertexBuffer,3)),this.setAttribute("normal",new Float32BufferAttribute(vertexBuffer.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(uvBuffer,2)),0===detail?this.computeVertexNormals():this.normalizeNormals(),__name(subdivide,"subdivide"),__name(subdivideFace,"subdivideFace"),__name(applyRadius,"applyRadius"),__name(generateUVs,"generateUVs"),__name(correctSeam,"correctSeam"),__name(pushVertex,"pushVertex"),__name(getVertexByIndex,"getVertexByIndex"),__name(correctUVs,"correctUVs"),__name(correctUV,"correctUV"),__name(azimuth,"azimuth"),__name(inclination,"inclination")}static fromJSON(data){return new PolyhedronGeometry(data.vertices,data.indices,data.radius,data.details)}}__name(PolyhedronGeometry,"PolyhedronGeometry");class DodecahedronGeometry extends PolyhedronGeometry{constructor(radius=1,detail=0){const t=(1+Math.sqrt(5))/2,r=1/t;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-t,0,-r,t,0,r,-t,0,r,t,-r,-t,0,-r,t,0,r,-t,0,r,t,0,-t,0,-r,t,0,-r,-t,0,r,t,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],radius,detail),this.type="DodecahedronGeometry",this.parameters={radius,detail}}static fromJSON(data){return new DodecahedronGeometry(data.radius,data.detail)}}__name(DodecahedronGeometry,"DodecahedronGeometry");const _v0=new Vector32,_v1$1=new Vector32,_normal=new Vector32,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(geometry=null,thresholdAngle=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry,thresholdAngle},null!==geometry){const precision=Math.pow(10,4),thresholdDot=Math.cos(DEG2RAD*thresholdAngle),indexAttr=geometry.getIndex(),positionAttr=geometry.getAttribute("position"),indexCount=indexAttr?indexAttr.count:positionAttr.count,indexArr=[0,0,0],vertKeys=["a","b","c"],hashes=new Array(3),edgeData={},vertices=[];for(let i=0;i<indexCount;i+=3){indexAttr?(indexArr[0]=indexAttr.getX(i),indexArr[1]=indexAttr.getX(i+1),indexArr[2]=indexAttr.getX(i+2)):(indexArr[0]=i,indexArr[1]=i+1,indexArr[2]=i+2);const{a,b,c}=_triangle;if(a.fromBufferAttribute(positionAttr,indexArr[0]),b.fromBufferAttribute(positionAttr,indexArr[1]),c.fromBufferAttribute(positionAttr,indexArr[2]),_triangle.getNormal(_normal),hashes[0]=`${Math.round(a.x*precision)},${Math.round(a.y*precision)},${Math.round(a.z*precision)}`,hashes[1]=`${Math.round(b.x*precision)},${Math.round(b.y*precision)},${Math.round(b.z*precision)}`,hashes[2]=`${Math.round(c.x*precision)},${Math.round(c.y*precision)},${Math.round(c.z*precision)}`,hashes[0]!==hashes[1]&&hashes[1]!==hashes[2]&&hashes[2]!==hashes[0])for(let j=0;j<3;j++){const jNext=(j+1)%3,vecHash0=hashes[j],vecHash1=hashes[jNext],v0=_triangle[vertKeys[j]],v1=_triangle[vertKeys[jNext]],hash=`${vecHash0}_${vecHash1}`,reverseHash=`${vecHash1}_${vecHash0}`;reverseHash in edgeData&&edgeData[reverseHash]?(_normal.dot(edgeData[reverseHash].normal)<=thresholdDot&&(vertices.push(v0.x,v0.y,v0.z),vertices.push(v1.x,v1.y,v1.z)),edgeData[reverseHash]=null):hash in edgeData||(edgeData[hash]={index0:indexArr[j],index1:indexArr[jNext],normal:_normal.clone()})}}for(const key in edgeData)if(edgeData[key]){const{index0,index1}=edgeData[key];_v0.fromBufferAttribute(positionAttr,index0),_v1$1.fromBufferAttribute(positionAttr,index1),vertices.push(_v0.x,_v0.y,_v0.z),vertices.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(vertices,3))}}}__name(EdgesGeometry,"EdgesGeometry");class Shape extends Path{constructor(points){super(points),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(divisions){const holesPts=[];for(let i=0,l=this.holes.length;i<l;i++)holesPts[i]=this.holes[i].getPoints(divisions);return holesPts}extractPoints(divisions){return{shape:this.getPoints(divisions),holes:this.getPointsHoles(divisions)}}copy(source){super.copy(source),this.holes=[];for(let i=0,l=source.holes.length;i<l;i++)this.holes.push(source.holes[i].clone());return this}toJSON(){const data=super.toJSON();data.uuid=this.uuid,data.holes=[];for(let i=0,l=this.holes.length;i<l;i++)data.holes.push(this.holes[i].toJSON());return data}fromJSON(json){super.fromJSON(json),this.uuid=json.uuid,this.holes=[];for(let i=0,l=json.holes.length;i<l;i++){const hole=json.holes[i];this.holes.push((new Path).fromJSON(hole))}return this}}__name(Shape,"Shape");function linkedList(data,start,end,dim,clockwise){let i,last;if(clockwise===signedArea(data,start,end,dim)>0)for(i=start;i<end;i+=dim)last=insertNode(i,data[i],data[i+1],last);else for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last);return last&&equals(last,last.next)&&(removeNode(last),last=last.next),last}function filterPoints(start,end){if(!start)return start;end||(end=start);let again,p=start;do{if(again=!1,p.steiner||!equals(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(removeNode(p),p=end=p.prev,p===p.next)break;again=!0}}while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX,minY,invSize,pass){if(!ear)return;!pass&&invSize&&indexCurve(ear,minX,minY,invSize);let prev,next,stop=ear;for(;ear.prev!==ear.next;)if(prev=ear.prev,next=ear.next,invSize?isEarHashed(ear,minX,minY,invSize):isEar(ear))triangles.push(prev.i/dim|0),triangles.push(ear.i/dim|0),triangles.push(next.i/dim|0),removeNode(ear),ear=next.next,stop=next.next;else if((ear=next)===stop){pass?1===pass?earcutLinked(ear=cureLocalIntersections(filterPoints(ear),triangles,dim),triangles,dim,minX,minY,invSize,2):2===pass&&splitEarcut(ear,triangles,dim,minX,minY,invSize):earcutLinked(filterPoints(ear),triangles,dim,minX,minY,invSize,1);break}}function isEar(ear){const a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;const ax=a.x,bx=b.x,cx=c.x,ay=a.y,by=b.y,cy=c.y,x0=ax<bx?ax<cx?ax:cx:bx<cx?bx:cx,y0=ay<by?ay<cy?ay:cy:by<cy?by:cy,x1=ax>bx?ax>cx?ax:cx:bx>cx?bx:cx,y1=ay>by?ay>cy?ay:cy:by>cy?by:cy;let p=c.next;for(;p!==a;){if(p.x>=x0&&p.x<=x1&&p.y>=y0&&p.y<=y1&&pointInTriangle(ax,ay,bx,by,cx,cy,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function isEarHashed(ear,minX,minY,invSize){const a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;const ax=a.x,bx=b.x,cx=c.x,ay=a.y,by=b.y,cy=c.y,x0=ax<bx?ax<cx?ax:cx:bx<cx?bx:cx,y0=ay<by?ay<cy?ay:cy:by<cy?by:cy,x1=ax>bx?ax>cx?ax:cx:bx>cx?bx:cx,y1=ay>by?ay>cy?ay:cy:by>cy?by:cy,minZ=zOrder(x0,y0,minX,minY,invSize),maxZ=zOrder(x1,y1,minX,minY,invSize);let p=ear.prevZ,n=ear.nextZ;for(;p&&p.z>=minZ&&n&&n.z<=maxZ;){if(p.x>=x0&&p.x<=x1&&p.y>=y0&&p.y<=y1&&p!==a&&p!==c&&pointInTriangle(ax,ay,bx,by,cx,cy,p.x,p.y)&&area(p.prev,p,p.next)>=0||(p=p.prevZ,n.x>=x0&&n.x<=x1&&n.y>=y0&&n.y<=y1&&n!==a&&n!==c&&pointInTriangle(ax,ay,bx,by,cx,cy,n.x,n.y)&&area(n.prev,n,n.next)>=0))return!1;n=n.nextZ}for(;p&&p.z>=minZ;){if(p.x>=x0&&p.x<=x1&&p.y>=y0&&p.y<=y1&&p!==a&&p!==c&&pointInTriangle(ax,ay,bx,by,cx,cy,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;n&&n.z<=maxZ;){if(n.x>=x0&&n.x<=x1&&n.y>=y0&&n.y<=y1&&n!==a&&n!==c&&pointInTriangle(ax,ay,bx,by,cx,cy,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}return!0}function cureLocalIntersections(start,triangles,dim){let p=start;do{const a=p.prev,b=p.next.next;!equals(a,b)&&intersects(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)&&(triangles.push(a.i/dim|0),triangles.push(p.i/dim|0),triangles.push(b.i/dim|0),removeNode(p),removeNode(p.next),p=start=b),p=p.next}while(p!==start);return filterPoints(p)}function splitEarcut(start,triangles,dim,minX,minY,invSize){let a=start;do{let b=a.next.next;for(;b!==a.prev;){if(a.i!==b.i&&isValidDiagonal(a,b)){let c=splitPolygon(a,b);return a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,triangles,dim,minX,minY,invSize,0),void earcutLinked(c,triangles,dim,minX,minY,invSize,0)}b=b.next}a=a.next}while(a!==start)}function eliminateHoles(data,holeIndices,outerNode,dim){const queue=[];let i,len,start,end,list;for(i=0,len=holeIndices.length;i<len;i++)start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length,list=linkedList(data,start,end,dim,!1),list===list.next&&(list.steiner=!0),queue.push(getLeftmost(list));for(queue.sort(compareX),i=0;i<queue.length;i++)outerNode=eliminateHole(queue[i],outerNode);return outerNode}function compareX(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){const bridge=findHoleBridge(hole,outerNode);if(!bridge)return outerNode;const bridgeReverse=splitPolygon(bridge,hole);return filterPoints(bridgeReverse,bridgeReverse.next),filterPoints(bridge,bridge.next)}function findHoleBridge(hole,outerNode){let m,p=outerNode,qx=-1/0;const hx=hole.x,hy=hole.y;do{if(hy<=p.y&&hy>=p.next.y&&p.next.y!==p.y){const x=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(x<=hx&&x>qx&&(qx=x,m=p.x<p.next.x?p:p.next,x===hx))return m}p=p.next}while(p!==outerNode);if(!m)return null;const stop=m,mx=m.x,my=m.y;let tan,tanMin=1/0;p=m;do{hx>=p.x&&p.x>=mx&&hx!==p.x&&pointInTriangle(hy<my?hx:qx,hy,mx,my,hy<my?qx:hx,hy,p.x,p.y)&&(tan=Math.abs(hy-p.y)/(hx-p.x),locallyInside(p,hole)&&(tan<tanMin||tan===tanMin&&(p.x>m.x||p.x===m.x&&sectorContainsSector(m,p)))&&(m=p,tanMin=tan)),p=p.next}while(p!==stop);return m}function sectorContainsSector(m,p){return area(m.prev,m,p.prev)<0&&area(p.next,m,m.next)<0}function indexCurve(start,minX,minY,invSize){let p=start;do{0===p.z&&(p.z=zOrder(p.x,p.y,minX,minY,invSize)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==start);p.prevZ.nextZ=null,p.prevZ=null,sortLinked(p)}function sortLinked(list){let i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{for(p=list,list=null,tail=null,numMerges=0;p;){for(numMerges++,q=p,pSize=0,i=0;i<inSize&&(pSize++,q=q.nextZ,q);i++);for(qSize=inSize;pSize>0||qSize>0&&q;)0!==pSize&&(0===qSize||!q||p.z<=q.z)?(e=p,p=p.nextZ,pSize--):(e=q,q=q.nextZ,qSize--),tail?tail.nextZ=e:list=e,e.prevZ=tail,tail=e;p=q}tail.nextZ=null,inSize*=2}while(numMerges>1);return list}function zOrder(x,y,minX,minY,invSize){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=(x-minX)*invSize|0)|x<<8))|x<<4))|x<<2))|x<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-minY)*invSize|0)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function getLeftmost(start){let p=start,leftmost=start;do{(p.x<leftmost.x||p.x===leftmost.x&&p.y<leftmost.y)&&(leftmost=p),p=p.next}while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px2,py2){return(cx-px2)*(ay-py2)>=(ax-px2)*(cy-py2)&&(ax-px2)*(by-py2)>=(bx-px2)*(ay-py2)&&(bx-px2)*(cy-py2)>=(cx-px2)*(by-py2)}function isValidDiagonal(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!intersectsPolygon(a,b)&&(locallyInside(a,b)&&locallyInside(b,a)&&middleInside(a,b)&&(area(a.prev,a,b.prev)||area(a,b.prev,b))||equals(a,b)&&area(a.prev,a,a.next)>0&&area(b.prev,b,b.next)>0)}function area(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects(p1,q1,p2,q2){const o1=sign(area(p1,q1,p2)),o2=sign(area(p1,q1,q2)),o3=sign(area(p2,q2,p1)),o4=sign(area(p2,q2,q1));return!!(o1!==o2&&o3!==o4||0===o1&&onSegment(p1,p2,q1)||0===o2&&onSegment(p1,q2,q1)||0===o3&&onSegment(p2,p1,q2)||0===o4&&onSegment(p2,q1,q2))}function onSegment(p,q,r){return q.x<=Math.max(p.x,r.x)&&q.x>=Math.min(p.x,r.x)&&q.y<=Math.max(p.y,r.y)&&q.y>=Math.min(p.y,r.y)}function sign(num){return num>0?1:num<0?-1:0}function intersectsPolygon(a,b){let p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}function locallyInside(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function middleInside(a,b){let p=a,inside=!1;const px2=(a.x+b.x)/2,py2=(a.y+b.y)/2;do{p.y>py2!=p.next.y>py2&&p.next.y!==p.y&&px2<(p.next.x-p.x)*(py2-p.y)/(p.next.y-p.y)+p.x&&(inside=!inside),p=p.next}while(p!==a);return inside}function splitPolygon(a,b){const a2=new Node2(a.i,a.x,a.y),b2=new Node2(b.i,b.x,b.y),an=a.next,bp=b.prev;return a.next=b,b.prev=a,a2.next=an,an.prev=a2,b2.next=a2,a2.prev=b2,bp.next=b2,b2.prev=bp,b2}function insertNode(i,x,y,last){const p=new Node2(i,x,y);return last?(p.next=last.next,p.prev=last,last.next.prev=p,last.next=p):(p.prev=p,p.next=p),p}function removeNode(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Node2(i,x,y){this.i=i,this.x=x,this.y=y,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(data,start,end,dim){let sum=0;for(let i=start,j=end-dim;i<end;i+=dim)sum+=(data[j]-data[i])*(data[i+1]+data[j+1]),j=i;return sum}__name(linkedList,"linkedList"),__name(filterPoints,"filterPoints"),__name(earcutLinked,"earcutLinked"),__name(isEar,"isEar"),__name(isEarHashed,"isEarHashed"),__name(cureLocalIntersections,"cureLocalIntersections"),__name(splitEarcut,"splitEarcut"),__name(eliminateHoles,"eliminateHoles"),__name(compareX,"compareX"),__name(eliminateHole,"eliminateHole"),__name(findHoleBridge,"findHoleBridge"),__name(sectorContainsSector,"sectorContainsSector"),__name(indexCurve,"indexCurve"),__name(sortLinked,"sortLinked"),__name(zOrder,"zOrder"),__name(getLeftmost,"getLeftmost"),__name(pointInTriangle,"pointInTriangle"),__name(isValidDiagonal,"isValidDiagonal"),__name(area,"area"),__name(equals,"equals"),__name(intersects,"intersects"),__name(onSegment,"onSegment"),__name(sign,"sign"),__name(intersectsPolygon,"intersectsPolygon"),__name(locallyInside,"locallyInside"),__name(middleInside,"middleInside"),__name(splitPolygon,"splitPolygon"),__name(insertNode,"insertNode"),__name(removeNode,"removeNode"),__name(Node2,"Node"),__name(signedArea,"signedArea");class ShapeUtils{static area(contour){const n=contour.length;let a=0;for(let p=n-1,q=0;q<n;p=q++)a+=contour[p].x*contour[q].y-contour[q].x*contour[p].y;return.5*a}static isClockWise(pts){return ShapeUtils.area(pts)<0}static triangulateShape(contour,holes){const vertices=[],holeIndices=[],faces=[];removeDupEndPts(contour),addContour(vertices,contour);let holeIndex=contour.length;holes.forEach(removeDupEndPts);for(let i=0;i<holes.length;i++)holeIndices.push(holeIndex),holeIndex+=holes[i].length,addContour(vertices,holes[i]);const triangles=function(data,holeIndices,dim=2){const hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length;let outerNode=linkedList(data,0,outerLen,dim,!0);const triangles=[];if(!outerNode||outerNode.next===outerNode.prev)return triangles;let minX,minY,maxX,maxY,x,y,invSize;if(hasHoles&&(outerNode=eliminateHoles(data,holeIndices,outerNode,dim)),data.length>80*dim){minX=maxX=data[0],minY=maxY=data[1];for(let i=dim;i<outerLen;i+=dim)x=data[i],y=data[i+1],x<minX&&(minX=x),y<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y);invSize=Math.max(maxX-minX,maxY-minY),invSize=0!==invSize?32767/invSize:0}return earcutLinked(outerNode,triangles,dim,minX,minY,invSize,0),triangles}(vertices,holeIndices);for(let i=0;i<triangles.length;i+=3)faces.push(triangles.slice(i,i+3));return faces}}function removeDupEndPts(points){const l=points.length;l>2&&points[l-1].equals(points[0])&&points.pop()}function addContour(vertices,contour){for(let i=0;i<contour.length;i++)vertices.push(contour[i].x),vertices.push(contour[i].y)}__name(ShapeUtils,"ShapeUtils"),__name(removeDupEndPts,"removeDupEndPts"),__name(addContour,"addContour");class ExtrudeGeometry extends BufferGeometry{constructor(shapes=new Shape([new Vector22(.5,.5),new Vector22(-.5,.5),new Vector22(-.5,-.5),new Vector22(.5,-.5)]),options={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes,options},shapes=Array.isArray(shapes)?shapes:[shapes];const scope=this,verticesArray=[],uvArray=[];for(let i=0,l=shapes.length;i<l;i++)addShape(shapes[i]);function addShape(shape){const placeholder=[],curveSegments=void 0!==options.curveSegments?options.curveSegments:12,steps=void 0!==options.steps?options.steps:1,depth=void 0!==options.depth?options.depth:1;let bevelEnabled=void 0===options.bevelEnabled||options.bevelEnabled,bevelThickness=void 0!==options.bevelThickness?options.bevelThickness:.2,bevelSize=void 0!==options.bevelSize?options.bevelSize:bevelThickness-.1,bevelOffset=void 0!==options.bevelOffset?options.bevelOffset:0,bevelSegments=void 0!==options.bevelSegments?options.bevelSegments:3;const extrudePath=options.extrudePath,uvgen=void 0!==options.UVGenerator?options.UVGenerator:WorldUVGenerator;let extrudePts,splineTube,binormal,normal,position2,extrudeByPath=!1;extrudePath&&(extrudePts=extrudePath.getSpacedPoints(steps),extrudeByPath=!0,bevelEnabled=!1,splineTube=extrudePath.computeFrenetFrames(steps,!1),binormal=new Vector32,normal=new Vector32,position2=new Vector32),bevelEnabled||(bevelSegments=0,bevelThickness=0,bevelSize=0,bevelOffset=0);const shapePoints=shape.extractPoints(curveSegments);let vertices=shapePoints.shape;const holes=shapePoints.holes;if(!ShapeUtils.isClockWise(vertices)){vertices=vertices.reverse();for(let h=0,hl=holes.length;h<hl;h++){const ahole=holes[h];ShapeUtils.isClockWise(ahole)&&(holes[h]=ahole.reverse())}}const faces=ShapeUtils.triangulateShape(vertices,holes),contour=vertices;for(let h=0,hl=holes.length;h<hl;h++)vertices=vertices.concat(holes[h]);function scalePt2(pt,vec,size){return vec||console.error("THREE.ExtrudeGeometry: vec does not exist"),vec.clone().multiplyScalar(size).add(pt)}__name(scalePt2,"scalePt2");const vlen=vertices.length,flen=faces.length;function getBevelVec(inPt,inPrev,inNext){let v_trans_x,v_trans_y,shrink_by;const v_prev_x=inPt.x-inPrev.x,v_prev_y=inPt.y-inPrev.y,v_next_x=inNext.x-inPt.x,v_next_y=inNext.y-inPt.y,v_prev_lensq=v_prev_x*v_prev_x+v_prev_y*v_prev_y;if(Math.abs(v_prev_x*v_next_y-v_prev_y*v_next_x)>Number.EPSILON){const v_prev_len=Math.sqrt(v_prev_lensq),v_next_len=Math.sqrt(v_next_x*v_next_x+v_next_y*v_next_y),ptPrevShift_x=inPrev.x-v_prev_y/v_prev_len,ptPrevShift_y=inPrev.y+v_prev_x/v_prev_len,sf=((inNext.x-v_next_y/v_next_len-ptPrevShift_x)*v_next_y-(inNext.y+v_next_x/v_next_len-ptPrevShift_y)*v_next_x)/(v_prev_x*v_next_y-v_prev_y*v_next_x);v_trans_x=ptPrevShift_x+v_prev_x*sf-inPt.x,v_trans_y=ptPrevShift_y+v_prev_y*sf-inPt.y;const v_trans_lensq=v_trans_x*v_trans_x+v_trans_y*v_trans_y;if(v_trans_lensq<=2)return new Vector22(v_trans_x,v_trans_y);shrink_by=Math.sqrt(v_trans_lensq/2)}else{let direction_eq=!1;v_prev_x>Number.EPSILON?v_next_x>Number.EPSILON&&(direction_eq=!0):v_prev_x<-Number.EPSILON?v_next_x<-Number.EPSILON&&(direction_eq=!0):Math.sign(v_prev_y)===Math.sign(v_next_y)&&(direction_eq=!0),direction_eq?(v_trans_x=-v_prev_y,v_trans_y=v_prev_x,shrink_by=Math.sqrt(v_prev_lensq)):(v_trans_x=v_prev_x,v_trans_y=v_prev_y,shrink_by=Math.sqrt(v_prev_lensq/2))}return new Vector22(v_trans_x/shrink_by,v_trans_y/shrink_by)}__name(getBevelVec,"getBevelVec");const contourMovements=[];for(let i=0,il=contour.length,j=il-1,k=i+1;i<il;i++,j++,k++)j===il&&(j=0),k===il&&(k=0),contourMovements[i]=getBevelVec(contour[i],contour[j],contour[k]);const holesMovements=[];let oneHoleMovements,verticesMovements=contourMovements.concat();for(let h=0,hl=holes.length;h<hl;h++){const ahole=holes[h];oneHoleMovements=[];for(let i=0,il=ahole.length,j=il-1,k=i+1;i<il;i++,j++,k++)j===il&&(j=0),k===il&&(k=0),oneHoleMovements[i]=getBevelVec(ahole[i],ahole[j],ahole[k]);holesMovements.push(oneHoleMovements),verticesMovements=verticesMovements.concat(oneHoleMovements)}for(let b=0;b<bevelSegments;b++){const t=b/bevelSegments,z=bevelThickness*Math.cos(t*Math.PI/2),bs2=bevelSize*Math.sin(t*Math.PI/2)+bevelOffset;for(let i=0,il=contour.length;i<il;i++){const vert=scalePt2(contour[i],contourMovements[i],bs2);v(vert.x,vert.y,-z)}for(let h=0,hl=holes.length;h<hl;h++){const ahole=holes[h];oneHoleMovements=holesMovements[h];for(let i=0,il=ahole.length;i<il;i++){const vert=scalePt2(ahole[i],oneHoleMovements[i],bs2);v(vert.x,vert.y,-z)}}}const bs=bevelSize+bevelOffset;for(let i=0;i<vlen;i++){const vert=bevelEnabled?scalePt2(vertices[i],verticesMovements[i],bs):vertices[i];extrudeByPath?(normal.copy(splineTube.normals[0]).multiplyScalar(vert.x),binormal.copy(splineTube.binormals[0]).multiplyScalar(vert.y),position2.copy(extrudePts[0]).add(normal).add(binormal),v(position2.x,position2.y,position2.z)):v(vert.x,vert.y,0)}for(let s=1;s<=steps;s++)for(let i=0;i<vlen;i++){const vert=bevelEnabled?scalePt2(vertices[i],verticesMovements[i],bs):vertices[i];extrudeByPath?(normal.copy(splineTube.normals[s]).multiplyScalar(vert.x),binormal.copy(splineTube.binormals[s]).multiplyScalar(vert.y),position2.copy(extrudePts[s]).add(normal).add(binormal),v(position2.x,position2.y,position2.z)):v(vert.x,vert.y,depth/steps*s)}for(let b=bevelSegments-1;b>=0;b--){const t=b/bevelSegments,z=bevelThickness*Math.cos(t*Math.PI/2),bs2=bevelSize*Math.sin(t*Math.PI/2)+bevelOffset;for(let i=0,il=contour.length;i<il;i++){const vert=scalePt2(contour[i],contourMovements[i],bs2);v(vert.x,vert.y,depth+z)}for(let h=0,hl=holes.length;h<hl;h++){const ahole=holes[h];oneHoleMovements=holesMovements[h];for(let i=0,il=ahole.length;i<il;i++){const vert=scalePt2(ahole[i],oneHoleMovements[i],bs2);extrudeByPath?v(vert.x,vert.y+extrudePts[steps-1].y,extrudePts[steps-1].x+z):v(vert.x,vert.y,depth+z)}}}function buildLidFaces(){const start=verticesArray.length/3;if(bevelEnabled){let layer=0,offset=vlen*layer;for(let i=0;i<flen;i++){const face=faces[i];f3(face[2]+offset,face[1]+offset,face[0]+offset)}layer=steps+2*bevelSegments,offset=vlen*layer;for(let i=0;i<flen;i++){const face=faces[i];f3(face[0]+offset,face[1]+offset,face[2]+offset)}}else{for(let i=0;i<flen;i++){const face=faces[i];f3(face[2],face[1],face[0])}for(let i=0;i<flen;i++){const face=faces[i];f3(face[0]+vlen*steps,face[1]+vlen*steps,face[2]+vlen*steps)}}scope.addGroup(start,verticesArray.length/3-start,0)}function buildSideFaces(){const start=verticesArray.length/3;let layeroffset=0;sidewalls(contour,layeroffset),layeroffset+=contour.length;for(let h=0,hl=holes.length;h<hl;h++){const ahole=holes[h];sidewalls(ahole,layeroffset),layeroffset+=ahole.length}scope.addGroup(start,verticesArray.length/3-start,1)}function sidewalls(contour2,layeroffset){let i=contour2.length;for(;--i>=0;){const j=i;let k=i-1;k<0&&(k=contour2.length-1);for(let s=0,sl=steps+2*bevelSegments;s<sl;s++){const slen1=vlen*s,slen2=vlen*(s+1);f4(layeroffset+j+slen1,layeroffset+k+slen1,layeroffset+k+slen2,layeroffset+j+slen2)}}}function v(x,y,z){placeholder.push(x),placeholder.push(y),placeholder.push(z)}function f3(a,b,c){addVertex(a),addVertex(b),addVertex(c);const nextIndex=verticesArray.length/3,uvs=uvgen.generateTopUV(scope,verticesArray,nextIndex-3,nextIndex-2,nextIndex-1);addUV(uvs[0]),addUV(uvs[1]),addUV(uvs[2])}function f4(a,b,c,d){addVertex(a),addVertex(b),addVertex(d),addVertex(b),addVertex(c),addVertex(d);const nextIndex=verticesArray.length/3,uvs=uvgen.generateSideWallUV(scope,verticesArray,nextIndex-6,nextIndex-3,nextIndex-2,nextIndex-1);addUV(uvs[0]),addUV(uvs[1]),addUV(uvs[3]),addUV(uvs[1]),addUV(uvs[2]),addUV(uvs[3])}function addVertex(index){verticesArray.push(placeholder[3*index+0]),verticesArray.push(placeholder[3*index+1]),verticesArray.push(placeholder[3*index+2])}function addUV(vector2){uvArray.push(vector2.x),uvArray.push(vector2.y)}buildLidFaces(),buildSideFaces(),__name(buildLidFaces,"buildLidFaces"),__name(buildSideFaces,"buildSideFaces"),__name(sidewalls,"sidewalls"),__name(v,"v"),__name(f3,"f3"),__name(f4,"f4"),__name(addVertex,"addVertex"),__name(addUV,"addUV")}this.setAttribute("position",new Float32BufferAttribute(verticesArray,3)),this.setAttribute("uv",new Float32BufferAttribute(uvArray,2)),this.computeVertexNormals(),__name(addShape,"addShape")}toJSON(){const data=super.toJSON();return toJSON$1(this.parameters.shapes,this.parameters.options,data)}static fromJSON(data,shapes){const geometryShapes=[];for(let j=0,jl=data.shapes.length;j<jl;j++)geometryShapes.push(shapes[data.shapes[j]]);const extrudePath=data.options.extrudePath;return void 0!==extrudePath&&(data.options.extrudePath=(new Curves[extrudePath.type]).fromJSON(extrudePath)),new ExtrudeGeometry(geometryShapes,data.options)}}__name(ExtrudeGeometry,"ExtrudeGeometry");const WorldUVGenerator={generateTopUV:function(geometry,vertices,indexA,indexB,indexC){const b_x=vertices[3*indexB],b_y=vertices[3*indexB+1],c_x=vertices[3*indexC],c_y=vertices[3*indexC+1];return[new Vector22(vertices[3*indexA],vertices[3*indexA+1]),new Vector22(b_x,b_y),new Vector22(c_x,c_y)]},generateSideWallUV:function(geometry,vertices,indexA,indexB,indexC,indexD){const a_x=vertices[3*indexA],a_y=vertices[3*indexA+1],a_z=vertices[3*indexA+2],b_x=vertices[3*indexB],b_y=vertices[3*indexB+1],b_z=vertices[3*indexB+2],c_x=vertices[3*indexC],c_y=vertices[3*indexC+1],c_z=vertices[3*indexC+2],d_x=vertices[3*indexD],d_y=vertices[3*indexD+1],d_z=vertices[3*indexD+2];return Math.abs(a_y-b_y)<Math.abs(a_x-b_x)?[new Vector22(a_x,1-a_z),new Vector22(b_x,1-b_z),new Vector22(c_x,1-c_z),new Vector22(d_x,1-d_z)]:[new Vector22(a_y,1-a_z),new Vector22(b_y,1-b_z),new Vector22(c_y,1-c_z),new Vector22(d_y,1-d_z)]}};function toJSON$1(shapes,options,data){if(data.shapes=[],Array.isArray(shapes))for(let i=0,l=shapes.length;i<l;i++)data.shapes.push(shapes[i].uuid);else data.shapes.push(shapes.uuid);return data.options=Object.assign({},options),void 0!==options.extrudePath&&(data.options.extrudePath=options.extrudePath.toJSON()),data}__name(toJSON$1,"toJSON$1");class IcosahedronGeometry extends PolyhedronGeometry{constructor(radius=1,detail=0){const t=(1+Math.sqrt(5))/2;super([-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],radius,detail),this.type="IcosahedronGeometry",this.parameters={radius,detail}}static fromJSON(data){return new IcosahedronGeometry(data.radius,data.detail)}}__name(IcosahedronGeometry,"IcosahedronGeometry");class OctahedronGeometry extends PolyhedronGeometry{constructor(radius=1,detail=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],radius,detail),this.type="OctahedronGeometry",this.parameters={radius,detail}}static fromJSON(data){return new OctahedronGeometry(data.radius,data.detail)}}__name(OctahedronGeometry,"OctahedronGeometry");class RingGeometry extends BufferGeometry{constructor(innerRadius=.5,outerRadius=1,thetaSegments=32,phiSegments=1,thetaStart=0,thetaLength=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius,outerRadius,thetaSegments,phiSegments,thetaStart,thetaLength},thetaSegments=Math.max(3,thetaSegments);const indices=[],vertices=[],normals=[],uvs=[];let radius=innerRadius;const radiusStep=(outerRadius-innerRadius)/(phiSegments=Math.max(1,phiSegments)),vertex2=new Vector32,uv=new Vector22;for(let j=0;j<=phiSegments;j++){for(let i=0;i<=thetaSegments;i++){const segment=thetaStart+i/thetaSegments*thetaLength;vertex2.x=radius*Math.cos(segment),vertex2.y=radius*Math.sin(segment),vertices.push(vertex2.x,vertex2.y,vertex2.z),normals.push(0,0,1),uv.x=(vertex2.x/outerRadius+1)/2,uv.y=(vertex2.y/outerRadius+1)/2,uvs.push(uv.x,uv.y)}radius+=radiusStep}for(let j=0;j<phiSegments;j++){const thetaSegmentLevel=j*(thetaSegments+1);for(let i=0;i<thetaSegments;i++){const segment=i+thetaSegmentLevel,b=segment+thetaSegments+1,c=segment+thetaSegments+2,d=segment+1;indices.push(segment,b,d),indices.push(b,c,d)}}this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2))}static fromJSON(data){return new RingGeometry(data.innerRadius,data.outerRadius,data.thetaSegments,data.phiSegments,data.thetaStart,data.thetaLength)}}__name(RingGeometry,"RingGeometry");class ShapeGeometry extends BufferGeometry{constructor(shapes=new Shape([new Vector22(0,.5),new Vector22(-.5,-.5),new Vector22(.5,-.5)]),curveSegments=12){super(),this.type="ShapeGeometry",this.parameters={shapes,curveSegments};const indices=[],vertices=[],normals=[],uvs=[];let groupStart=0,groupCount=0;if(!1===Array.isArray(shapes))addShape(shapes);else for(let i=0;i<shapes.length;i++)addShape(shapes[i]),this.addGroup(groupStart,groupCount,i),groupStart+=groupCount,groupCount=0;function addShape(shape){const indexOffset=vertices.length/3,points=shape.extractPoints(curveSegments);let shapeVertices=points.shape;const shapeHoles=points.holes;!1===ShapeUtils.isClockWise(shapeVertices)&&(shapeVertices=shapeVertices.reverse());for(let i=0,l=shapeHoles.length;i<l;i++){const shapeHole=shapeHoles[i];!0===ShapeUtils.isClockWise(shapeHole)&&(shapeHoles[i]=shapeHole.reverse())}const faces=ShapeUtils.triangulateShape(shapeVertices,shapeHoles);for(let i=0,l=shapeHoles.length;i<l;i++)shapeVertices=shapeVertices.concat(shapeHoles[i]);for(let i=0,l=shapeVertices.length;i<l;i++){const vertex2=shapeVertices[i];vertices.push(vertex2.x,vertex2.y,0),normals.push(0,0,1),uvs.push(vertex2.x,vertex2.y)}for(let i=0,l=faces.length;i<l;i++){const face=faces[i];indices.push(face[0]+indexOffset,face[1]+indexOffset,face[2]+indexOffset),groupCount+=3}}this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2)),__name(addShape,"addShape")}toJSON(){const data=super.toJSON();return toJSON(this.parameters.shapes,data)}static fromJSON(data,shapes){const geometryShapes=[];for(let j=0,jl=data.shapes.length;j<jl;j++)geometryShapes.push(shapes[data.shapes[j]]);return new ShapeGeometry(geometryShapes,data.curveSegments)}}function toJSON(shapes,data){if(data.shapes=[],Array.isArray(shapes))for(let i=0,l=shapes.length;i<l;i++)data.shapes.push(shapes[i].uuid);else data.shapes.push(shapes.uuid);return data}__name(ShapeGeometry,"ShapeGeometry"),__name(toJSON,"toJSON");class SphereGeometry extends BufferGeometry{constructor(radius=1,widthSegments=32,heightSegments=16,phiStart=0,phiLength=2*Math.PI,thetaStart=0,thetaLength=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength},widthSegments=Math.max(3,Math.floor(widthSegments)),heightSegments=Math.max(2,Math.floor(heightSegments));const thetaEnd=Math.min(thetaStart+thetaLength,Math.PI);let index=0;const grid=[],vertex2=new Vector32,normal=new Vector32,indices=[],vertices=[],normals=[],uvs=[];for(let iy=0;iy<=heightSegments;iy++){const verticesRow=[],v=iy/heightSegments;let uOffset=0;0==iy&&0==thetaStart?uOffset=.5/widthSegments:iy==heightSegments&&thetaEnd==Math.PI&&(uOffset=-.5/widthSegments);for(let ix=0;ix<=widthSegments;ix++){const u=ix/widthSegments;vertex2.x=-radius*Math.cos(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength),vertex2.y=radius*Math.cos(thetaStart+v*thetaLength),vertex2.z=radius*Math.sin(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength),vertices.push(vertex2.x,vertex2.y,vertex2.z),normal.copy(vertex2).normalize(),normals.push(normal.x,normal.y,normal.z),uvs.push(u+uOffset,1-v),verticesRow.push(index++)}grid.push(verticesRow)}for(let iy=0;iy<heightSegments;iy++)for(let ix=0;ix<widthSegments;ix++){const b=grid[iy][ix],c=grid[iy+1][ix],d=grid[iy+1][ix+1];(0!==iy||thetaStart>0)&&indices.push(grid[iy][ix+1],b,d),(iy!==heightSegments-1||thetaEnd<Math.PI)&&indices.push(b,c,d)}this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2))}static fromJSON(data){return new SphereGeometry(data.radius,data.widthSegments,data.heightSegments,data.phiStart,data.phiLength,data.thetaStart,data.thetaLength)}}__name(SphereGeometry,"SphereGeometry");class TetrahedronGeometry extends PolyhedronGeometry{constructor(radius=1,detail=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],radius,detail),this.type="TetrahedronGeometry",this.parameters={radius,detail}}static fromJSON(data){return new TetrahedronGeometry(data.radius,data.detail)}}__name(TetrahedronGeometry,"TetrahedronGeometry");class TorusGeometry extends BufferGeometry{constructor(radius=1,tube=.4,radialSegments=12,tubularSegments=48,arc=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius,tube,radialSegments,tubularSegments,arc},radialSegments=Math.floor(radialSegments),tubularSegments=Math.floor(tubularSegments);const indices=[],vertices=[],normals=[],uvs=[],center=new Vector32,vertex2=new Vector32,normal=new Vector32;for(let j=0;j<=radialSegments;j++)for(let i=0;i<=tubularSegments;i++){const u=i/tubularSegments*arc,v=j/radialSegments*Math.PI*2;vertex2.x=(radius+tube*Math.cos(v))*Math.cos(u),vertex2.y=(radius+tube*Math.cos(v))*Math.sin(u),vertex2.z=tube*Math.sin(v),vertices.push(vertex2.x,vertex2.y,vertex2.z),center.x=radius*Math.cos(u),center.y=radius*Math.sin(u),normal.subVectors(vertex2,center).normalize(),normals.push(normal.x,normal.y,normal.z),uvs.push(i/tubularSegments),uvs.push(j/radialSegments)}for(let j=1;j<=radialSegments;j++)for(let i=1;i<=tubularSegments;i++){const b=(tubularSegments+1)*(j-1)+i-1,c=(tubularSegments+1)*(j-1)+i,d=(tubularSegments+1)*j+i;indices.push((tubularSegments+1)*j+i-1,b,d),indices.push(b,c,d)}this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2))}static fromJSON(data){return new TorusGeometry(data.radius,data.tube,data.radialSegments,data.tubularSegments,data.arc)}}__name(TorusGeometry,"TorusGeometry");class TorusKnotGeometry extends BufferGeometry{constructor(radius=1,tube=.4,tubularSegments=64,radialSegments=8,p=2,q=3){super(),this.type="TorusKnotGeometry",this.parameters={radius,tube,tubularSegments,radialSegments,p,q},tubularSegments=Math.floor(tubularSegments),radialSegments=Math.floor(radialSegments);const indices=[],vertices=[],normals=[],uvs=[],vertex2=new Vector32,normal=new Vector32,P1=new Vector32,P2=new Vector32,B=new Vector32,T=new Vector32,N=new Vector32;for(let i=0;i<=tubularSegments;++i){const u=i/tubularSegments*p*Math.PI*2;calculatePositionOnCurve(u,p,q,radius,P1),calculatePositionOnCurve(u+.01,p,q,radius,P2),T.subVectors(P2,P1),N.addVectors(P2,P1),B.crossVectors(T,N),N.crossVectors(B,T),B.normalize(),N.normalize();for(let j=0;j<=radialSegments;++j){const v=j/radialSegments*Math.PI*2,cx=-tube*Math.cos(v),cy=tube*Math.sin(v);vertex2.x=P1.x+(cx*N.x+cy*B.x),vertex2.y=P1.y+(cx*N.y+cy*B.y),vertex2.z=P1.z+(cx*N.z+cy*B.z),vertices.push(vertex2.x,vertex2.y,vertex2.z),normal.subVectors(vertex2,P1).normalize(),normals.push(normal.x,normal.y,normal.z),uvs.push(i/tubularSegments),uvs.push(j/radialSegments)}}for(let j=1;j<=tubularSegments;j++)for(let i=1;i<=radialSegments;i++){const b=(radialSegments+1)*j+(i-1),c=(radialSegments+1)*j+i,d=(radialSegments+1)*(j-1)+i;indices.push((radialSegments+1)*(j-1)+(i-1),b,d),indices.push(b,c,d)}function calculatePositionOnCurve(u,p2,q2,radius2,position){const cu=Math.cos(u),su=Math.sin(u),quOverP=q2/p2*u,cs=Math.cos(quOverP);position.x=radius2*(2+cs)*.5*cu,position.y=radius2*(2+cs)*su*.5,position.z=radius2*Math.sin(quOverP)*.5}this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2)),__name(calculatePositionOnCurve,"calculatePositionOnCurve")}static fromJSON(data){return new TorusKnotGeometry(data.radius,data.tube,data.tubularSegments,data.radialSegments,data.p,data.q)}}__name(TorusKnotGeometry,"TorusKnotGeometry");class TubeGeometry extends BufferGeometry{constructor(path=new QuadraticBezierCurve3(new Vector32(-1,-1,0),new Vector32(-1,1,0),new Vector32(1,1,0)),tubularSegments=64,radius=1,radialSegments=8,closed=!1){super(),this.type="TubeGeometry",this.parameters={path,tubularSegments,radius,radialSegments,closed};const frames=path.computeFrenetFrames(tubularSegments,closed);this.tangents=frames.tangents,this.normals=frames.normals,this.binormals=frames.binormals;const vertex2=new Vector32,normal=new Vector32,uv=new Vector22;let P=new Vector32;const vertices=[],normals=[],uvs=[],indices=[];function generateBufferData(){for(let i=0;i<tubularSegments;i++)generateSegment(i);generateSegment(!1===closed?tubularSegments:0),generateUVs(),generateIndices()}function generateSegment(i){P=path.getPointAt(i/tubularSegments,P);const N=frames.normals[i],B=frames.binormals[i];for(let j=0;j<=radialSegments;j++){const v=j/radialSegments*Math.PI*2,sin=Math.sin(v),cos=-Math.cos(v);normal.x=cos*N.x+sin*B.x,normal.y=cos*N.y+sin*B.y,normal.z=cos*N.z+sin*B.z,normal.normalize(),normals.push(normal.x,normal.y,normal.z),vertex2.x=P.x+radius*normal.x,vertex2.y=P.y+radius*normal.y,vertex2.z=P.z+radius*normal.z,vertices.push(vertex2.x,vertex2.y,vertex2.z)}}function generateIndices(){for(let j=1;j<=tubularSegments;j++)for(let i=1;i<=radialSegments;i++){const b=(radialSegments+1)*j+(i-1),c=(radialSegments+1)*j+i,d=(radialSegments+1)*(j-1)+i;indices.push((radialSegments+1)*(j-1)+(i-1),b,d),indices.push(b,c,d)}}function generateUVs(){for(let i=0;i<=tubularSegments;i++)for(let j=0;j<=radialSegments;j++)uv.x=i/tubularSegments,uv.y=j/radialSegments,uvs.push(uv.x,uv.y)}generateBufferData(),this.setIndex(indices),this.setAttribute("position",new Float32BufferAttribute(vertices,3)),this.setAttribute("normal",new Float32BufferAttribute(normals,3)),this.setAttribute("uv",new Float32BufferAttribute(uvs,2)),__name(generateBufferData,"generateBufferData"),__name(generateSegment,"generateSegment"),__name(generateIndices,"generateIndices"),__name(generateUVs,"generateUVs")}toJSON(){const data=super.toJSON();return data.path=this.parameters.path.toJSON(),data}static fromJSON(data){return new TubeGeometry((new Curves[data.path.type]).fromJSON(data.path),data.tubularSegments,data.radius,data.radialSegments,data.closed)}}__name(TubeGeometry,"TubeGeometry");class WireframeGeometry extends BufferGeometry{constructor(geometry=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry},null!==geometry){const vertices=[],edges=new Set,start=new Vector32,end=new Vector32;if(null!==geometry.index){const position=geometry.attributes.position,indices=geometry.index;let groups=geometry.groups;0===groups.length&&(groups=[{start:0,count:indices.count,materialIndex:0}]);for(let o=0,ol=groups.length;o<ol;++o){const group=groups[o],groupStart=group.start;for(let i=groupStart,l=groupStart+group.count;i<l;i+=3)for(let j=0;j<3;j++){const index1=indices.getX(i+j),index2=indices.getX(i+(j+1)%3);start.fromBufferAttribute(position,index1),end.fromBufferAttribute(position,index2),!0===isUniqueEdge(start,end,edges)&&(vertices.push(start.x,start.y,start.z),vertices.push(end.x,end.y,end.z))}}}else{const position=geometry.attributes.position;for(let i=0,l=position.count/3;i<l;i++)for(let j=0;j<3;j++){const index2=3*i+(j+1)%3;start.fromBufferAttribute(position,3*i+j),end.fromBufferAttribute(position,index2),!0===isUniqueEdge(start,end,edges)&&(vertices.push(start.x,start.y,start.z),vertices.push(end.x,end.y,end.z))}}this.setAttribute("position",new Float32BufferAttribute(vertices,3))}}}function isUniqueEdge(start,end,edges){const hash1=`${start.x},${start.y},${start.z}-${end.x},${end.y},${end.z}`,hash2=`${end.x},${end.y},${end.z}-${start.x},${start.y},${start.z}`;return!0!==edges.has(hash1)&&!0!==edges.has(hash2)&&(edges.add(hash1),edges.add(hash2),!0)}__name(WireframeGeometry,"WireframeGeometry"),__name(isUniqueEdge,"isUniqueEdge");var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry:CylinderGeometry2,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends(null){constructor(parameters){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.fog=source.fog,this}}__name(ShadowMaterial,"ShadowMaterial");class RawShaderMaterial extends(null){constructor(parameters){super(parameters),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}__name(RawShaderMaterial,"RawShaderMaterial");class MeshStandardMaterial extends Material{constructor(parameters){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector22(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.defines={STANDARD:""},this.color.copy(source.color),this.roughness=source.roughness,this.metalness=source.metalness,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.roughnessMap=source.roughnessMap,this.metalnessMap=source.metalnessMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapIntensity=source.envMapIntensity,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}__name(MeshStandardMaterial,"MeshStandardMaterial");class MeshPhysicalMaterial extends(null){constructor(parameters){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector22(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(reflectivity){this.ior=(1+.4*reflectivity)/(1-.4*reflectivity)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(parameters)}get sheen(){return this._sheen}set sheen(value){this._sheen>0!=value>0&&this.version++,this._sheen=value}get clearcoat(){return this._clearcoat}set clearcoat(value){this._clearcoat>0!=value>0&&this.version++,this._clearcoat=value}get iridescence(){return this._iridescence}set iridescence(value){this._iridescence>0!=value>0&&this.version++,this._iridescence=value}get transmission(){return this._transmission}set transmission(value){this._transmission>0!=value>0&&this.version++,this._transmission=value}copy(source){return super.copy(source),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=source.clearcoat,this.clearcoatMap=source.clearcoatMap,this.clearcoatRoughness=source.clearcoatRoughness,this.clearcoatRoughnessMap=source.clearcoatRoughnessMap,this.clearcoatNormalMap=source.clearcoatNormalMap,this.clearcoatNormalScale.copy(source.clearcoatNormalScale),this.ior=source.ior,this.iridescence=source.iridescence,this.iridescenceMap=source.iridescenceMap,this.iridescenceIOR=source.iridescenceIOR,this.iridescenceThicknessRange=[...source.iridescenceThicknessRange],this.iridescenceThicknessMap=source.iridescenceThicknessMap,this.sheen=source.sheen,this.sheenColor.copy(source.sheenColor),this.sheenColorMap=source.sheenColorMap,this.sheenRoughness=source.sheenRoughness,this.sheenRoughnessMap=source.sheenRoughnessMap,this.transmission=source.transmission,this.transmissionMap=source.transmissionMap,this.thickness=source.thickness,this.thicknessMap=source.thicknessMap,this.attenuationDistance=source.attenuationDistance,this.attenuationColor.copy(source.attenuationColor),this.specularIntensity=source.specularIntensity,this.specularIntensityMap=source.specularIntensityMap,this.specularColor.copy(source.specularColor),this.specularColorMap=source.specularColorMap,this}}__name(MeshPhysicalMaterial,"MeshPhysicalMaterial");class MeshPhongMaterial extends(null){constructor(parameters){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector22(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.specular.copy(source.specular),this.shininess=source.shininess,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}__name(MeshPhongMaterial,"MeshPhongMaterial");class MeshToonMaterial extends(null){constructor(parameters){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector22(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.gradientMap=source.gradientMap,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.fog=source.fog,this}}__name(MeshToonMaterial,"MeshToonMaterial");class MeshNormalMaterial extends(null){constructor(parameters){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector22(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(parameters)}copy(source){return super.copy(source),this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.flatShading=source.flatShading,this}}__name(MeshNormalMaterial,"MeshNormalMaterial");class MeshLambertMaterial extends(null){constructor(parameters){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector22(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}__name(MeshLambertMaterial,"MeshLambertMaterial");class MeshMatcapMaterial extends(null){constructor(parameters){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector22(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.defines={MATCAP:""},this.color.copy(source.color),this.matcap=source.matcap,this.map=source.map,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.flatShading=source.flatShading,this.fog=source.fog,this}}__name(MeshMatcapMaterial,"MeshMatcapMaterial");class LineDashedMaterial extends(null){constructor(parameters){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(parameters)}copy(source){return super.copy(source),this.scale=source.scale,this.dashSize=source.dashSize,this.gapSize=source.gapSize,this}}function arraySlice(array,from,to){return isTypedArray(array)?new array.constructor(array.subarray(from,void 0!==to?to:array.length)):array.slice(from,to)}function convertArray(array,type,forceClone){return!array||!forceClone&&array.constructor===type?array:"number"==typeof type.BYTES_PER_ELEMENT?new type(array):Array.prototype.slice.call(array)}function isTypedArray(object){return ArrayBuffer.isView(object)&&!(object instanceof DataView)}function getKeyframeOrder(times){function compareTime(i,j){return times[i]-times[j]}__name(compareTime,"compareTime");const n=times.length,result=new Array(n);for(let i=0;i!==n;++i)result[i]=i;return result.sort(compareTime),result}function sortedArray(values,stride,order){const nValues=values.length,result=new values.constructor(nValues);for(let i=0,dstOffset=0;dstOffset!==nValues;++i){const srcOffset=order[i]*stride;for(let j=0;j!==stride;++j)result[dstOffset++]=values[srcOffset+j]}return result}function flattenJSON(jsonKeys,times,values,valuePropertyName){let i=1,key=jsonKeys[0];for(;void 0!==key&&void 0===key[valuePropertyName];)key=jsonKeys[i++];if(void 0===key)return;let value=key[valuePropertyName];if(void 0!==value)if(Array.isArray(value))do{value=key[valuePropertyName],void 0!==value&&(times.push(key.time),values.push.apply(values,value)),key=jsonKeys[i++]}while(void 0!==key);else if(void 0!==value.toArray)do{value=key[valuePropertyName],void 0!==value&&(times.push(key.time),value.toArray(values,values.length)),key=jsonKeys[i++]}while(void 0!==key);else do{value=key[valuePropertyName],void 0!==value&&(times.push(key.time),values.push(value)),key=jsonKeys[i++]}while(void 0!==key)}__name(LineDashedMaterial,"LineDashedMaterial"),__name(arraySlice,"arraySlice"),__name(convertArray,"convertArray"),__name(isTypedArray,"isTypedArray"),__name(getKeyframeOrder,"getKeyframeOrder"),__name(sortedArray,"sortedArray"),__name(flattenJSON,"flattenJSON"),__name(function subclip(sourceClip,name,startFrame,endFrame,fps=30){const clip=sourceClip.clone();clip.name=name;const tracks=[];for(let i=0;i<clip.tracks.length;++i){const track=clip.tracks[i],valueSize=track.getValueSize(),times=[],values=[];for(let j=0;j<track.times.length;++j){const frame=track.times[j]*fps;if(!(frame<startFrame||frame>=endFrame)){times.push(track.times[j]);for(let k=0;k<valueSize;++k)values.push(track.values[j*valueSize+k])}}0!==times.length&&(track.times=convertArray(times,track.times.constructor),track.values=convertArray(values,track.values.constructor),tracks.push(track))}clip.tracks=tracks;let minStartTime=1/0;for(let i=0;i<clip.tracks.length;++i)minStartTime>clip.tracks[i].times[0]&&(minStartTime=clip.tracks[i].times[0]);for(let i=0;i<clip.tracks.length;++i)clip.tracks[i].shift(-1*minStartTime);return clip.resetDuration(),clip},"subclip"),__name(function makeClipAdditive(targetClip,referenceFrame=0,referenceClip=targetClip,fps=30){fps<=0&&(fps=30);const numTracks=referenceClip.tracks.length,referenceTime=referenceFrame/fps;for(let i=0;i<numTracks;++i){const referenceTrack=referenceClip.tracks[i],referenceTrackType=referenceTrack.ValueTypeName;if("bool"===referenceTrackType||"string"===referenceTrackType)continue;const targetTrack=targetClip.tracks.find(function(track){return track.name===referenceTrack.name&&track.ValueTypeName===referenceTrackType});if(void 0===targetTrack)continue;let referenceOffset=0;const referenceValueSize=referenceTrack.getValueSize();referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(referenceOffset=referenceValueSize/3);let targetOffset=0;const targetValueSize=targetTrack.getValueSize();targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(targetOffset=targetValueSize/3);const lastIndex=referenceTrack.times.length-1;let referenceValue;if(referenceTime<=referenceTrack.times[0])referenceValue=arraySlice(referenceTrack.values,referenceOffset,referenceValueSize-referenceOffset);else if(referenceTime>=referenceTrack.times[lastIndex]){const startIndex=lastIndex*referenceValueSize+referenceOffset;referenceValue=arraySlice(referenceTrack.values,startIndex,startIndex+referenceValueSize-referenceOffset)}else{const interpolant=referenceTrack.createInterpolant(),startIndex=referenceOffset,endIndex=referenceValueSize-referenceOffset;interpolant.evaluate(referenceTime),referenceValue=arraySlice(interpolant.resultBuffer,startIndex,endIndex)}"quaternion"===referenceTrackType&&(new Quaternion).fromArray(referenceValue).normalize().conjugate().toArray(referenceValue);const numTimes=targetTrack.times.length;for(let j=0;j<numTimes;++j){const valueStart=j*targetValueSize+targetOffset;if("quaternion"===referenceTrackType)Quaternion.multiplyQuaternionsFlat(targetTrack.values,valueStart,referenceValue,0,targetTrack.values,valueStart);else{const valueEnd=targetValueSize-2*targetOffset;for(let k=0;k<valueEnd;++k)targetTrack.values[valueStart+k]-=referenceValue[k]}}}return targetClip.blendMode=AdditiveAnimationBlendMode,targetClip},"makeClipAdditive");class Interpolant{constructor(parameterPositions,sampleValues,sampleSize,resultBuffer){this.parameterPositions=parameterPositions,this._cachedIndex=0,this.resultBuffer=void 0!==resultBuffer?resultBuffer:new sampleValues.constructor(sampleSize),this.sampleValues=sampleValues,this.valueSize=sampleSize,this.settings=null,this.DefaultSettings_={}}evaluate(t){const pp=this.parameterPositions;let i1=this._cachedIndex,t1=pp[i1],t0=pp[i1-1];validate_interval:{seek:{let right;linear_scan:{forward_scan:if(!(t<t1)){for(let giveUpAt=i1+2;;){if(void 0===t1){if(t<t0)break forward_scan;return i1=pp.length,this._cachedIndex=i1,this.copySampleValue_(i1-1)}if(i1===giveUpAt)break;if(t0=t1,t1=pp[++i1],t<t1)break seek}right=pp.length;break linear_scan}if(t>=t0)break validate_interval;{const t1global=pp[1];t<t1global&&(i1=2,t0=t1global);for(let giveUpAt=i1-2;;){if(void 0===t0)return this._cachedIndex=0,this.copySampleValue_(0);if(i1===giveUpAt)break;if(t1=t0,t0=pp[--i1-1],t>=t0)break seek}right=i1,i1=0}}for(;i1<right;){const mid=i1+right>>>1;t<pp[mid]?right=mid:i1=mid+1}if(t1=pp[i1],t0=pp[i1-1],void 0===t0)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===t1)return i1=pp.length,this._cachedIndex=i1,this.copySampleValue_(i1-1)}this._cachedIndex=i1,this.intervalChanged_(i1,t0,t1)}return this.interpolate_(i1,t0,t,t1)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(index){const result=this.resultBuffer,values=this.sampleValues,stride=this.valueSize,offset=index*stride;for(let i=0;i!==stride;++i)result[i]=values[offset+i];return result}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}__name(Interpolant,"Interpolant");class CubicInterpolant extends Interpolant{constructor(parameterPositions,sampleValues,sampleSize,resultBuffer){super(parameterPositions,sampleValues,sampleSize,resultBuffer),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(i1,t0,t1){const pp=this.parameterPositions;let iPrev=i1-2,iNext=i1+1,tPrev=pp[iPrev],tNext=pp[iNext];if(void 0===tPrev)switch(this.getSettings_().endingStart){case 2401:iPrev=i1,tPrev=2*t0-t1;break;case 2402:iPrev=pp.length-2,tPrev=t0+pp[iPrev]-pp[iPrev+1];break;default:iPrev=i1,tPrev=t1}if(void 0===tNext)switch(this.getSettings_().endingEnd){case 2401:iNext=i1,tNext=2*t1-t0;break;case 2402:iNext=1,tNext=t1+pp[1]-pp[0];break;default:iNext=i1-1,tNext=t0}const halfDt=.5*(t1-t0),stride=this.valueSize;this._weightPrev=halfDt/(t0-tPrev),this._weightNext=halfDt/(tNext-t1),this._offsetPrev=iPrev*stride,this._offsetNext=iNext*stride}interpolate_(i1,t0,t,t1){const result=this.resultBuffer,values=this.sampleValues,stride=this.valueSize,o1=i1*stride,o0=o1-stride,oP=this._offsetPrev,oN=this._offsetNext,wP=this._weightPrev,wN=this._weightNext,p=(t-t0)/(t1-t0),pp=p*p,ppp=pp*p,sP=-wP*ppp+2*wP*pp-wP*p,s0=(1+wP)*ppp+(-1.5-2*wP)*pp+(-.5+wP)*p+1,s1=(-1-wN)*ppp+(1.5+wN)*pp+.5*p,sN=wN*ppp-wN*pp;for(let i=0;i!==stride;++i)result[i]=sP*values[oP+i]+s0*values[o0+i]+s1*values[o1+i]+sN*values[oN+i];return result}}__name(CubicInterpolant,"CubicInterpolant");class LinearInterpolant extends Interpolant{constructor(parameterPositions,sampleValues,sampleSize,resultBuffer){super(parameterPositions,sampleValues,sampleSize,resultBuffer)}interpolate_(i1,t0,t,t1){const result=this.resultBuffer,values=this.sampleValues,stride=this.valueSize,offset1=i1*stride,offset0=offset1-stride,weight1=(t-t0)/(t1-t0),weight0=1-weight1;for(let i=0;i!==stride;++i)result[i]=values[offset0+i]*weight0+values[offset1+i]*weight1;return result}}__name(LinearInterpolant,"LinearInterpolant");class DiscreteInterpolant extends Interpolant{constructor(parameterPositions,sampleValues,sampleSize,resultBuffer){super(parameterPositions,sampleValues,sampleSize,resultBuffer)}interpolate_(i1){return this.copySampleValue_(i1-1)}}__name(DiscreteInterpolant,"DiscreteInterpolant");class KeyframeTrack{constructor(name,times,values,interpolation){if(void 0===name)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===times||0===times.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+name);this.name=name,this.times=convertArray(times,this.TimeBufferType),this.values=convertArray(values,this.ValueBufferType),this.setInterpolation(interpolation||this.DefaultInterpolation)}static toJSON(track){const trackType=track.constructor;let json;if(trackType.toJSON!==this.toJSON)json=trackType.toJSON(track);else{json={name:track.name,times:convertArray(track.times,Array),values:convertArray(track.values,Array)};const interpolation=track.getInterpolation();interpolation!==track.DefaultInterpolation&&(json.interpolation=interpolation)}return json.type=track.ValueTypeName,json}InterpolantFactoryMethodDiscrete(result){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),result)}InterpolantFactoryMethodLinear(result){return new LinearInterpolant(this.times,this.values,this.getValueSize(),result)}InterpolantFactoryMethodSmooth(result){return new CubicInterpolant(this.times,this.values,this.getValueSize(),result)}setInterpolation(interpolation){let factoryMethod;switch(interpolation){case 2300:factoryMethod=this.InterpolantFactoryMethodDiscrete;break;case 2301:factoryMethod=this.InterpolantFactoryMethodLinear;break;case 2302:factoryMethod=this.InterpolantFactoryMethodSmooth}if(void 0===factoryMethod){const message="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(interpolation===this.DefaultInterpolation)throw new Error(message);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",message),this}return this.createInterpolant=factoryMethod,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(timeOffset){if(0!==timeOffset){const times=this.times;for(let i=0,n=times.length;i!==n;++i)times[i]+=timeOffset}return this}scale(timeScale){if(1!==timeScale){const times=this.times;for(let i=0,n=times.length;i!==n;++i)times[i]*=timeScale}return this}trim(startTime,endTime){const times=this.times,nKeys=times.length;let from=0,to=nKeys-1;for(;from!==nKeys&&times[from]<startTime;)++from;for(;-1!==to&&times[to]>endTime;)--to;if(++to,0!==from||to!==nKeys){from>=to&&(to=Math.max(to,1),from=to-1);const stride=this.getValueSize();this.times=arraySlice(times,from,to),this.values=arraySlice(this.values,from*stride,to*stride)}return this}validate(){let valid=!0;const valueSize=this.getValueSize();valueSize-Math.floor(valueSize)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),valid=!1);const times=this.times,values=this.values,nKeys=times.length;0===nKeys&&(console.error("THREE.KeyframeTrack: Track is empty.",this),valid=!1);let prevTime=null;for(let i=0;i!==nKeys;i++){const currTime=times[i];if("number"==typeof currTime&&isNaN(currTime)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,i,currTime),valid=!1;break}if(null!==prevTime&&prevTime>currTime){console.error("THREE.KeyframeTrack: Out of order keys.",this,i,currTime,prevTime),valid=!1;break}prevTime=currTime}if(void 0!==values&&isTypedArray(values))for(let i=0,n=values.length;i!==n;++i){const value=values[i];if(isNaN(value)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,i,value),valid=!1;break}}return valid}optimize(){const times=arraySlice(this.times),values=arraySlice(this.values),stride=this.getValueSize(),smoothInterpolation=2302===this.getInterpolation(),lastIndex=times.length-1;let writeIndex=1;for(let i=1;i<lastIndex;++i){let keep=!1;const time=times[i];if(time!==times[i+1]&&(1!==i||time!==times[0]))if(smoothInterpolation)keep=!0;else{const offset=i*stride,offsetP=offset-stride,offsetN=offset+stride;for(let j=0;j!==stride;++j){const value=values[offset+j];if(value!==values[offsetP+j]||value!==values[offsetN+j]){keep=!0;break}}}if(keep){if(i!==writeIndex){times[writeIndex]=times[i];const readOffset=i*stride,writeOffset=writeIndex*stride;for(let j=0;j!==stride;++j)values[writeOffset+j]=values[readOffset+j]}++writeIndex}}if(lastIndex>0){times[writeIndex]=times[lastIndex];for(let readOffset=lastIndex*stride,writeOffset=writeIndex*stride,j=0;j!==stride;++j)values[writeOffset+j]=values[readOffset+j];++writeIndex}return writeIndex!==times.length?(this.times=arraySlice(times,0,writeIndex),this.values=arraySlice(values,0,writeIndex*stride)):(this.times=times,this.values=values),this}clone(){const times=arraySlice(this.times,0),values=arraySlice(this.values,0),track=new(0,this.constructor)(this.name,times,values);return track.createInterpolant=this.createInterpolant,track}}__name(KeyframeTrack,"KeyframeTrack"),KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=2301;class BooleanKeyframeTrack extends KeyframeTrack{}__name(BooleanKeyframeTrack,"BooleanKeyframeTrack"),BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=2300,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}__name(ColorKeyframeTrack,"ColorKeyframeTrack"),ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}__name(NumberKeyframeTrack,"NumberKeyframeTrack"),NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(parameterPositions,sampleValues,sampleSize,resultBuffer){super(parameterPositions,sampleValues,sampleSize,resultBuffer)}interpolate_(i1,t0,t,t1){const result=this.resultBuffer,values=this.sampleValues,stride=this.valueSize,alpha=(t-t0)/(t1-t0);let offset=i1*stride;for(let end=offset+stride;offset!==end;offset+=4)Quaternion.slerpFlat(result,0,values,offset-stride,values,offset,alpha);return result}}__name(QuaternionLinearInterpolant,"QuaternionLinearInterpolant");class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(result){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),result)}}__name(QuaternionKeyframeTrack,"QuaternionKeyframeTrack"),QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.DefaultInterpolation=2301,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}__name(StringKeyframeTrack,"StringKeyframeTrack"),StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=2300,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}__name(VectorKeyframeTrack,"VectorKeyframeTrack"),VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(name,duration=-1,tracks,blendMode=2500){this.name=name,this.tracks=tracks,this.duration=duration,this.blendMode=blendMode,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(json){const tracks=[],jsonTracks=json.tracks,frameTime=1/(json.fps||1);for(let i=0,n=jsonTracks.length;i!==n;++i)tracks.push(parseKeyframeTrack(jsonTracks[i]).scale(frameTime));const clip=new this(json.name,json.duration,tracks,json.blendMode);return clip.uuid=json.uuid,clip}static toJSON(clip){const tracks=[],clipTracks=clip.tracks,json={name:clip.name,duration:clip.duration,tracks,uuid:clip.uuid,blendMode:clip.blendMode};for(let i=0,n=clipTracks.length;i!==n;++i)tracks.push(KeyframeTrack.toJSON(clipTracks[i]));return json}static CreateFromMorphTargetSequence(name,morphTargetSequence,fps,noLoop){const numMorphTargets=morphTargetSequence.length,tracks=[];for(let i=0;i<numMorphTargets;i++){let times=[],values=[];times.push((i+numMorphTargets-1)%numMorphTargets,i,(i+1)%numMorphTargets),values.push(0,1,0);const order=getKeyframeOrder(times);times=sortedArray(times,1,order),values=sortedArray(values,1,order),!noLoop&&0===times[0]&&(times.push(numMorphTargets),values.push(values[0])),tracks.push(new NumberKeyframeTrack(".morphTargetInfluences["+morphTargetSequence[i].name+"]",times,values).scale(1/fps))}return new this(name,-1,tracks)}static findByName(objectOrClipArray,name){let clipArray=objectOrClipArray;Array.isArray(objectOrClipArray)||(clipArray=objectOrClipArray.geometry&&objectOrClipArray.geometry.animations||objectOrClipArray.animations);for(let i=0;i<clipArray.length;i++)if(clipArray[i].name===name)return clipArray[i];return null}static CreateClipsFromMorphTargetSequences(morphTargets,fps,noLoop){const animationToMorphTargets={},pattern=/^([\w-]*?)([\d]+)$/;for(let i=0,il=morphTargets.length;i<il;i++){const morphTarget=morphTargets[i],parts=morphTarget.name.match(pattern);if(parts&&parts.length>1){const name=parts[1];let animationMorphTargets=animationToMorphTargets[name];animationMorphTargets||(animationToMorphTargets[name]=animationMorphTargets=[]),animationMorphTargets.push(morphTarget)}}const clips=[];for(const name in animationToMorphTargets)clips.push(this.CreateFromMorphTargetSequence(name,animationToMorphTargets[name],fps,noLoop));return clips}static parseAnimation(animation,bones){if(!animation)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const addNonemptyTrack=__name(function(trackType,trackName,animationKeys,propertyName,destTracks){if(0!==animationKeys.length){const times=[],values=[];flattenJSON(animationKeys,times,values,propertyName),0!==times.length&&destTracks.push(new trackType(trackName,times,values))}},"addNonemptyTrack"),tracks=[],clipName=animation.name||"default",fps=animation.fps||30,blendMode=animation.blendMode;let duration=animation.length||-1;const hierarchyTracks=animation.hierarchy||[];for(let h=0;h<hierarchyTracks.length;h++){const animationKeys=hierarchyTracks[h].keys;if(animationKeys&&0!==animationKeys.length)if(animationKeys[0].morphTargets){const morphTargetNames={};let k;for(k=0;k<animationKeys.length;k++)if(animationKeys[k].morphTargets)for(let m=0;m<animationKeys[k].morphTargets.length;m++)morphTargetNames[animationKeys[k].morphTargets[m]]=-1;for(const morphTargetName in morphTargetNames){const times=[],values=[];for(let m=0;m!==animationKeys[k].morphTargets.length;++m){const animationKey=animationKeys[k];times.push(animationKey.time),values.push(animationKey.morphTarget===morphTargetName?1:0)}tracks.push(new NumberKeyframeTrack(".morphTargetInfluence["+morphTargetName+"]",times,values))}duration=morphTargetNames.length*fps}else{const boneName=".bones["+bones[h].name+"]";addNonemptyTrack(VectorKeyframeTrack,boneName+".position",animationKeys,"pos",tracks),addNonemptyTrack(QuaternionKeyframeTrack,boneName+".quaternion",animationKeys,"rot",tracks),addNonemptyTrack(VectorKeyframeTrack,boneName+".scale",animationKeys,"scl",tracks)}}return 0===tracks.length?null:new this(clipName,duration,tracks,blendMode)}resetDuration(){let duration=0;for(let i=0,n=this.tracks.length;i!==n;++i){const track=this.tracks[i];duration=Math.max(duration,track.times[track.times.length-1])}return this.duration=duration,this}trim(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].trim(0,this.duration);return this}validate(){let valid=!0;for(let i=0;i<this.tracks.length;i++)valid=valid&&this.tracks[i].validate();return valid}optimize(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].optimize();return this}clone(){const tracks=[];for(let i=0;i<this.tracks.length;i++)tracks.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,tracks,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(typeName){switch(typeName.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+typeName)}function parseKeyframeTrack(json){if(void 0===json.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const trackType=getTrackTypeForValueTypeName(json.type);if(void 0===json.times){const times=[],values=[];flattenJSON(json.keys,times,values,"value"),json.times=times,json.values=values}return void 0!==trackType.parse?trackType.parse(json):new trackType(json.name,json.times,json.values,json.interpolation)}__name(AnimationClip,"AnimationClip"),__name(getTrackTypeForValueTypeName,"getTrackTypeForValueTypeName"),__name(parseKeyframeTrack,"parseKeyframeTrack");const Cache={enabled:!1,files:{},add:function(key,file){!1!==this.enabled&&(this.files[key]=file)},get:function(key){if(!1!==this.enabled)return this.files[key]},remove:function(key){delete this.files[key]},clear:function(){this.files={}}};class LoadingManager{constructor(onLoad,onProgress,onError){const scope=this;let urlModifier,isLoading=!1,itemsLoaded=0,itemsTotal=0;const handlers=[];this.onStart=void 0,this.onLoad=onLoad,this.onProgress=onProgress,this.onError=onError,this.itemStart=function(url){itemsTotal++,!1===isLoading&&void 0!==scope.onStart&&scope.onStart(url,itemsLoaded,itemsTotal),isLoading=!0},this.itemEnd=function(url){itemsLoaded++,void 0!==scope.onProgress&&scope.onProgress(url,itemsLoaded,itemsTotal),itemsLoaded===itemsTotal&&(isLoading=!1,void 0!==scope.onLoad&&scope.onLoad())},this.itemError=function(url){void 0!==scope.onError&&scope.onError(url)},this.resolveURL=function(url){return urlModifier?urlModifier(url):url},this.setURLModifier=function(transform){return urlModifier=transform,this},this.addHandler=function(regex,loader){return handlers.push(regex,loader),this},this.removeHandler=function(regex){const index=handlers.indexOf(regex);return-1!==index&&handlers.splice(index,2),this},this.getHandler=function(file){for(let i=0,l=handlers.length;i<l;i+=2){const regex=handlers[i],loader=handlers[i+1];if(regex.global&&(regex.lastIndex=0),regex.test(file))return loader}return null}}}__name(LoadingManager,"LoadingManager");const DefaultLoadingManager=new LoadingManager;__name(class Loader{constructor(manager){this.manager=void 0!==manager?manager:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(url,onProgress){const scope=this;return new Promise(function(resolve,reject){scope.load(url,resolve,onProgress,reject)})}parse(){}setCrossOrigin(crossOrigin){return this.crossOrigin=crossOrigin,this}setWithCredentials(value){return this.withCredentials=value,this}setPath(path){return this.path=path,this}setResourcePath(resourcePath){return this.resourcePath=resourcePath,this}setRequestHeader(requestHeader){return this.requestHeader=requestHeader,this}},"Loader");const loading={};class HttpError extends Error{constructor(message,response){super(message),this.response=response}}__name(HttpError,"HttpError");class FileLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){void 0===url&&(url=""),void 0!==this.path&&(url=this.path+url),url=this.manager.resolveURL(url);const cached=Cache.get(url);if(void 0!==cached)return this.manager.itemStart(url),setTimeout(()=>{onLoad&&onLoad(cached),this.manager.itemEnd(url)},0),cached;if(void 0!==loading[url])return void loading[url].push({onLoad,onProgress,onError});loading[url]=[],loading[url].push({onLoad,onProgress,onError});const req=new Request(url,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),mimeType=this.mimeType,responseType=this.responseType;fetch(req).then(response=>{if(200===response.status||0===response.status){if(0===response.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===response.body||void 0===response.body.getReader)return response;const callbacks=loading[url],reader=response.body.getReader(),contentLength=response.headers.get("Content-Length")||response.headers.get("X-File-Size"),total=contentLength?parseInt(contentLength):0,lengthComputable=0!==total;let loaded=0;const stream=new ReadableStream({start(controller){function readData(){reader.read().then(({done,value})=>{if(done)controller.close();else{loaded+=value.byteLength;const event=new ProgressEvent("progress",{lengthComputable,loaded,total});for(let i=0,il=callbacks.length;i<il;i++){const callback=callbacks[i];callback.onProgress&&callback.onProgress(event)}controller.enqueue(value),readData()}})}readData(),__name(readData,"readData")}});return new Response(stream)}throw new HttpError(`fetch for "${response.url}" responded with ${response.status}: ${response.statusText}`,response)}).then(response=>{switch(responseType){case"arraybuffer":return response.arrayBuffer();case"blob":return response.blob();case"document":return response.text().then(text=>(new DOMParser).parseFromString(text,mimeType));case"json":return response.json();default:if(void 0===mimeType)return response.text();{const exec=/charset="?([^;"\s]*)"?/i.exec(mimeType),label=exec&&exec[1]?exec[1].toLowerCase():void 0,decoder=new TextDecoder(label);return response.arrayBuffer().then(ab=>decoder.decode(ab))}}}).then(data=>{Cache.add(url,data);const callbacks=loading[url];delete loading[url];for(let i=0,il=callbacks.length;i<il;i++){const callback=callbacks[i];callback.onLoad&&callback.onLoad(data)}}).catch(err=>{const callbacks=loading[url];if(void 0===callbacks)throw this.manager.itemError(url),err;delete loading[url];for(let i=0,il=callbacks.length;i<il;i++){const callback=callbacks[i];callback.onError&&callback.onError(err)}this.manager.itemError(url)}).finally(()=>{this.manager.itemEnd(url)}),this.manager.itemStart(url)}setResponseType(value){return this.responseType=value,this}setMimeType(value){return this.mimeType=value,this}}__name(FileLoader,"FileLoader"),__name(class AnimationLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){const scope=this,loader=new FileLoader(this.manager);loader.setPath(this.path),loader.setRequestHeader(this.requestHeader),loader.setWithCredentials(this.withCredentials),loader.load(url,function(text){try{onLoad(scope.parse(JSON.parse(text)))}catch(e){onError?onError(e):console.error(e),scope.manager.itemError(url)}},onProgress,onError)}parse(json){const animations=[];for(let i=0;i<json.length;i++){const clip=AnimationClip.parse(json[i]);animations.push(clip)}return animations}},"AnimationLoader"),__name(class CompressedTextureLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){const scope=this,images=[],texture=new CompressedTexture,loader=new FileLoader(this.manager);loader.setPath(this.path),loader.setResponseType("arraybuffer"),loader.setRequestHeader(this.requestHeader),loader.setWithCredentials(scope.withCredentials);let loaded=0;function loadTexture(i){loader.load(url[i],function(buffer){const texDatas=scope.parse(buffer,!0);images[i]={width:texDatas.width,height:texDatas.height,format:texDatas.format,mipmaps:texDatas.mipmaps},loaded+=1,6===loaded&&(1===texDatas.mipmapCount&&(texture.minFilter=LinearFilter),texture.image=images,texture.format=texDatas.format,texture.needsUpdate=!0,onLoad&&onLoad(texture))},onProgress,onError)}if(__name(loadTexture,"loadTexture"),Array.isArray(url))for(let i=0,il=url.length;i<il;++i)loadTexture(i);else loader.load(url,function(buffer){const texDatas=scope.parse(buffer,!0);if(texDatas.isCubemap){const faces=texDatas.mipmaps.length/texDatas.mipmapCount;for(let f=0;f<faces;f++){images[f]={mipmaps:[]};for(let i=0;i<texDatas.mipmapCount;i++)images[f].mipmaps.push(texDatas.mipmaps[f*texDatas.mipmapCount+i]),images[f].format=texDatas.format,images[f].width=texDatas.width,images[f].height=texDatas.height}texture.image=images}else texture.image.width=texDatas.width,texture.image.height=texDatas.height,texture.mipmaps=texDatas.mipmaps;1===texDatas.mipmapCount&&(texture.minFilter=LinearFilter),texture.format=texDatas.format,texture.needsUpdate=!0,onLoad&&onLoad(texture)},onProgress,onError);return texture}},"CompressedTextureLoader");class ImageLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){void 0!==this.path&&(url=this.path+url),url=this.manager.resolveURL(url);const scope=this,cached=Cache.get(url);if(void 0!==cached)return scope.manager.itemStart(url),setTimeout(function(){onLoad&&onLoad(cached),scope.manager.itemEnd(url)},0),cached;const image=createElementNS("img");function onImageLoad(){removeEventListeners(),Cache.add(url,this),onLoad&&onLoad(this),scope.manager.itemEnd(url)}function onImageError(event){removeEventListeners(),onError&&onError(event),scope.manager.itemError(url),scope.manager.itemEnd(url)}function removeEventListeners(){image.removeEventListener("load",onImageLoad,!1),image.removeEventListener("error",onImageError,!1)}return __name(onImageLoad,"onImageLoad"),__name(onImageError,"onImageError"),__name(removeEventListeners,"removeEventListeners"),image.addEventListener("load",onImageLoad,!1),image.addEventListener("error",onImageError,!1),"data:"!==url.slice(0,5)&&void 0!==this.crossOrigin&&(image.crossOrigin=this.crossOrigin),scope.manager.itemStart(url),image.src=url,image}}__name(ImageLoader,"ImageLoader"),__name(class CubeTextureLoader extends(null){constructor(manager){super(manager)}load(urls,onLoad,onProgress,onError){const texture=new CubeTexture,loader=new ImageLoader(this.manager);loader.setCrossOrigin(this.crossOrigin),loader.setPath(this.path);let loaded=0;function loadTexture(i){loader.load(urls[i],function(image){texture.images[i]=image,loaded++,6===loaded&&(texture.needsUpdate=!0,onLoad&&onLoad(texture))},void 0,onError)}__name(loadTexture,"loadTexture");for(let i=0;i<urls.length;++i)loadTexture(i);return texture}},"CubeTextureLoader"),__name(class DataTextureLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){const scope=this,texture=new DataTexture,loader=new FileLoader(this.manager);return loader.setResponseType("arraybuffer"),loader.setRequestHeader(this.requestHeader),loader.setPath(this.path),loader.setWithCredentials(scope.withCredentials),loader.load(url,function(buffer){const texData=scope.parse(buffer);texData&&(void 0!==texData.image?texture.image=texData.image:void 0!==texData.data&&(texture.image.width=texData.width,texture.image.height=texData.height,texture.image.data=texData.data),texture.wrapS=void 0!==texData.wrapS?texData.wrapS:ClampToEdgeWrapping,texture.wrapT=void 0!==texData.wrapT?texData.wrapT:ClampToEdgeWrapping,texture.magFilter=void 0!==texData.magFilter?texData.magFilter:LinearFilter,texture.minFilter=void 0!==texData.minFilter?texData.minFilter:LinearFilter,texture.anisotropy=void 0!==texData.anisotropy?texData.anisotropy:1,void 0!==texData.encoding&&(texture.encoding=texData.encoding),void 0!==texData.flipY&&(texture.flipY=texData.flipY),void 0!==texData.format&&(texture.format=texData.format),void 0!==texData.type&&(texture.type=texData.type),void 0!==texData.mipmaps&&(texture.mipmaps=texData.mipmaps,texture.minFilter=LinearMipmapLinearFilter),1===texData.mipmapCount&&(texture.minFilter=LinearFilter),void 0!==texData.generateMipmaps&&(texture.generateMipmaps=texData.generateMipmaps),texture.needsUpdate=!0,onLoad&&onLoad(texture,texData))},onProgress,onError),texture}},"DataTextureLoader"),__name(class TextureLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){const texture=new Texture,loader=new ImageLoader(this.manager);return loader.setCrossOrigin(this.crossOrigin),loader.setPath(this.path),loader.load(url,function(image){texture.image=image,texture.needsUpdate=!0,void 0!==onLoad&&onLoad(texture)},onProgress,onError),texture}},"TextureLoader"),__name(class Light extends(null){constructor(color,intensity=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(color),this.intensity=intensity}dispose(){}copy(source,recursive){return super.copy(source,recursive),this.color.copy(source.color),this.intensity=source.intensity,this}toJSON(meta){const data=super.toJSON(meta);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,void 0!==this.groundColor&&(data.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(data.object.distance=this.distance),void 0!==this.angle&&(data.object.angle=this.angle),void 0!==this.decay&&(data.object.decay=this.decay),void 0!==this.penumbra&&(data.object.penumbra=this.penumbra),void 0!==this.shadow&&(data.object.shadow=this.shadow.toJSON()),data}},"Light");class HemisphereLight extends(null){constructor(skyColor,groundColor,intensity){super(skyColor,intensity),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(groundColor)}copy(source,recursive){return super.copy(source,recursive),this.groundColor.copy(source.groundColor),this}}__name(HemisphereLight,"HemisphereLight");const _projScreenMatrix$1=new Matrix42,_lightPositionWorld$1=new Vector32,_lookTarget$1=new Vector32;__name(class LightShadow{constructor(camera){this.camera=camera,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector22(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix42,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector22(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(light){const shadowCamera=this.camera,shadowMatrix=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(light.matrixWorld),shadowCamera.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(light.target.matrixWorld),shadowCamera.lookAt(_lookTarget$1),shadowCamera.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(shadowCamera.projectionMatrix,shadowCamera.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),shadowMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),shadowMatrix.multiply(_projScreenMatrix$1)}getViewport(viewportIndex){return this._viewports[viewportIndex]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(source){return this.camera=source.camera.clone(),this.bias=source.bias,this.radius=source.radius,this.mapSize.copy(source.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const object={};return 0!==this.bias&&(object.bias=this.bias),0!==this.normalBias&&(object.normalBias=this.normalBias),1!==this.radius&&(object.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(object.mapSize=this.mapSize.toArray()),object.camera=this.camera.toJSON(!1).object,delete object.camera.matrix,object}},"LightShadow");class SpotLightShadow extends(null){constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(light){const camera=this.camera,fov2=2*RAD2DEG*light.angle*this.focus,aspect2=this.mapSize.width/this.mapSize.height,far=light.distance||camera.far;(fov2!==camera.fov||aspect2!==camera.aspect||far!==camera.far)&&(camera.fov=fov2,camera.aspect=aspect2,camera.far=far,camera.updateProjectionMatrix()),super.updateMatrices(light)}copy(source){return super.copy(source),this.focus=source.focus,this}}__name(SpotLightShadow,"SpotLightShadow");class SpotLight extends(null){constructor(color,intensity,distance=0,angle=Math.PI/3,penumbra=0,decay=2){super(color,intensity),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=distance,this.angle=angle,this.penumbra=penumbra,this.decay=decay,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(power){this.intensity=power/Math.PI}dispose(){this.shadow.dispose()}copy(source,recursive){return super.copy(source,recursive),this.distance=source.distance,this.angle=source.angle,this.penumbra=source.penumbra,this.decay=source.decay,this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}__name(SpotLight,"SpotLight");const _projScreenMatrix=new Matrix42,_lightPositionWorld=new Vector32,_lookTarget=new Vector32;class PointLightShadow extends(null){constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector22(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector32(1,0,0),new Vector32(-1,0,0),new Vector32(0,0,1),new Vector32(0,0,-1),new Vector32(0,1,0),new Vector32(0,-1,0)],this._cubeUps=[new Vector32(0,1,0),new Vector32(0,1,0),new Vector32(0,1,0),new Vector32(0,1,0),new Vector32(0,0,1),new Vector32(0,0,-1)]}updateMatrices(light,viewportIndex=0){const camera=this.camera,shadowMatrix=this.matrix,far=light.distance||camera.far;far!==camera.far&&(camera.far=far,camera.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(light.matrixWorld),camera.position.copy(_lightPositionWorld),_lookTarget.copy(camera.position),_lookTarget.add(this._cubeDirections[viewportIndex]),camera.up.copy(this._cubeUps[viewportIndex]),camera.lookAt(_lookTarget),camera.updateMatrixWorld(),shadowMatrix.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(camera.projectionMatrix,camera.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}__name(PointLightShadow,"PointLightShadow");class PointLight extends(null){constructor(color,intensity,distance=0,decay=2){super(color,intensity),this.isPointLight=!0,this.type="PointLight",this.distance=distance,this.decay=decay,this.shadow=new PointLightShadow}get power(){return 4*this.intensity*Math.PI}set power(power){this.intensity=power/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(source,recursive){return super.copy(source,recursive),this.distance=source.distance,this.decay=source.decay,this.shadow=source.shadow.clone(),this}}__name(PointLight,"PointLight");class DirectionalLightShadow extends(null){constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}__name(DirectionalLightShadow,"DirectionalLightShadow");class DirectionalLight extends(null){constructor(color,intensity){super(color,intensity),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(source){return super.copy(source),this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}__name(DirectionalLight,"DirectionalLight");class AmbientLight extends(null){constructor(color,intensity){super(color,intensity),this.isAmbientLight=!0,this.type="AmbientLight"}}__name(AmbientLight,"AmbientLight");class RectAreaLight extends(null){constructor(color,intensity,width=10,height=10){super(color,intensity),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=width,this.height=height}get power(){return this.intensity*this.width*this.height*Math.PI}set power(power){this.intensity=power/(this.width*this.height*Math.PI)}copy(source){return super.copy(source),this.width=source.width,this.height=source.height,this}toJSON(meta){const data=super.toJSON(meta);return data.object.width=this.width,data.object.height=this.height,data}}__name(RectAreaLight,"RectAreaLight");class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let i=0;i<9;i++)this.coefficients.push(new Vector32)}set(coefficients){for(let i=0;i<9;i++)this.coefficients[i].copy(coefficients[i]);return this}zero(){for(let i=0;i<9;i++)this.coefficients[i].set(0,0,0);return this}getAt(normal,target){const x=normal.x,y=normal.y,z=normal.z,coeff=this.coefficients;return target.copy(coeff[0]).multiplyScalar(.282095),target.addScaledVector(coeff[1],.488603*y),target.addScaledVector(coeff[2],.488603*z),target.addScaledVector(coeff[3],.488603*x),target.addScaledVector(coeff[4],x*y*1.092548),target.addScaledVector(coeff[5],y*z*1.092548),target.addScaledVector(coeff[6],.315392*(3*z*z-1)),target.addScaledVector(coeff[7],x*z*1.092548),target.addScaledVector(coeff[8],.546274*(x*x-y*y)),target}getIrradianceAt(normal,target){const x=normal.x,y=normal.y,z=normal.z,coeff=this.coefficients;return target.copy(coeff[0]).multiplyScalar(.886227),target.addScaledVector(coeff[1],1.023328*y),target.addScaledVector(coeff[2],1.023328*z),target.addScaledVector(coeff[3],1.023328*x),target.addScaledVector(coeff[4],.858086*x*y),target.addScaledVector(coeff[5],.858086*y*z),target.addScaledVector(coeff[6],.743125*z*z-.247708),target.addScaledVector(coeff[7],.858086*x*z),target.addScaledVector(coeff[8],.429043*(x*x-y*y)),target}add(sh){for(let i=0;i<9;i++)this.coefficients[i].add(sh.coefficients[i]);return this}addScaledSH(sh,s){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(sh.coefficients[i],s);return this}scale(s){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(s);return this}lerp(sh,alpha){for(let i=0;i<9;i++)this.coefficients[i].lerp(sh.coefficients[i],alpha);return this}equals(sh){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(sh.coefficients[i]))return!1;return!0}copy(sh){return this.set(sh.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(array,offset=0){const coefficients=this.coefficients;for(let i=0;i<9;i++)coefficients[i].fromArray(array,offset+3*i);return this}toArray(array=[],offset=0){const coefficients=this.coefficients;for(let i=0;i<9;i++)coefficients[i].toArray(array,offset+3*i);return array}static getBasisAt(normal,shBasis){const x=normal.x,y=normal.y,z=normal.z;shBasis[0]=.282095,shBasis[1]=.488603*y,shBasis[2]=.488603*z,shBasis[3]=.488603*x,shBasis[4]=1.092548*x*y,shBasis[5]=1.092548*y*z,shBasis[6]=.315392*(3*z*z-1),shBasis[7]=1.092548*x*z,shBasis[8]=.546274*(x*x-y*y)}}__name(SphericalHarmonics3,"SphericalHarmonics3");class LightProbe extends(null){constructor(sh=new SphericalHarmonics3,intensity=1){super(void 0,intensity),this.isLightProbe=!0,this.sh=sh}copy(source){return super.copy(source),this.sh.copy(source.sh),this}fromJSON(json){return this.intensity=json.intensity,this.sh.fromArray(json.sh),this}toJSON(meta){const data=super.toJSON(meta);return data.object.sh=this.sh.toArray(),data}}__name(LightProbe,"LightProbe");class MaterialLoader extends(null){constructor(manager){super(manager),this.textures={}}load(url,onLoad,onProgress,onError){const scope=this,loader=new FileLoader(scope.manager);loader.setPath(scope.path),loader.setRequestHeader(scope.requestHeader),loader.setWithCredentials(scope.withCredentials),loader.load(url,function(text){try{onLoad(scope.parse(JSON.parse(text)))}catch(e){onError?onError(e):console.error(e),scope.manager.itemError(url)}},onProgress,onError)}parse(json){const textures=this.textures;function getTexture(name){return void 0===textures[name]&&console.warn("THREE.MaterialLoader: Undefined texture",name),textures[name]}__name(getTexture,"getTexture");const material=MaterialLoader.createMaterialFromType(json.type);if(void 0!==json.uuid&&(material.uuid=json.uuid),void 0!==json.name&&(material.name=json.name),void 0!==json.color&&void 0!==material.color&&material.color.setHex(json.color),void 0!==json.roughness&&(material.roughness=json.roughness),void 0!==json.metalness&&(material.metalness=json.metalness),void 0!==json.sheen&&(material.sheen=json.sheen),void 0!==json.sheenColor&&(material.sheenColor=(new Color).setHex(json.sheenColor)),void 0!==json.sheenRoughness&&(material.sheenRoughness=json.sheenRoughness),void 0!==json.emissive&&void 0!==material.emissive&&material.emissive.setHex(json.emissive),void 0!==json.specular&&void 0!==material.specular&&material.specular.setHex(json.specular),void 0!==json.specularIntensity&&(material.specularIntensity=json.specularIntensity),void 0!==json.specularColor&&void 0!==material.specularColor&&material.specularColor.setHex(json.specularColor),void 0!==json.shininess&&(material.shininess=json.shininess),void 0!==json.clearcoat&&(material.clearcoat=json.clearcoat),void 0!==json.clearcoatRoughness&&(material.clearcoatRoughness=json.clearcoatRoughness),void 0!==json.iridescence&&(material.iridescence=json.iridescence),void 0!==json.iridescenceIOR&&(material.iridescenceIOR=json.iridescenceIOR),void 0!==json.iridescenceThicknessRange&&(material.iridescenceThicknessRange=json.iridescenceThicknessRange),void 0!==json.transmission&&(material.transmission=json.transmission),void 0!==json.thickness&&(material.thickness=json.thickness),void 0!==json.attenuationDistance&&(material.attenuationDistance=json.attenuationDistance),void 0!==json.attenuationColor&&void 0!==material.attenuationColor&&material.attenuationColor.setHex(json.attenuationColor),void 0!==json.fog&&(material.fog=json.fog),void 0!==json.flatShading&&(material.flatShading=json.flatShading),void 0!==json.blending&&(material.blending=json.blending),void 0!==json.combine&&(material.combine=json.combine),void 0!==json.side&&(material.side=json.side),void 0!==json.shadowSide&&(material.shadowSide=json.shadowSide),void 0!==json.opacity&&(material.opacity=json.opacity),void 0!==json.transparent&&(material.transparent=json.transparent),void 0!==json.alphaTest&&(material.alphaTest=json.alphaTest),void 0!==json.depthTest&&(material.depthTest=json.depthTest),void 0!==json.depthWrite&&(material.depthWrite=json.depthWrite),void 0!==json.colorWrite&&(material.colorWrite=json.colorWrite),void 0!==json.stencilWrite&&(material.stencilWrite=json.stencilWrite),void 0!==json.stencilWriteMask&&(material.stencilWriteMask=json.stencilWriteMask),void 0!==json.stencilFunc&&(material.stencilFunc=json.stencilFunc),void 0!==json.stencilRef&&(material.stencilRef=json.stencilRef),void 0!==json.stencilFuncMask&&(material.stencilFuncMask=json.stencilFuncMask),void 0!==json.stencilFail&&(material.stencilFail=json.stencilFail),void 0!==json.stencilZFail&&(material.stencilZFail=json.stencilZFail),void 0!==json.stencilZPass&&(material.stencilZPass=json.stencilZPass),void 0!==json.wireframe&&(material.wireframe=json.wireframe),void 0!==json.wireframeLinewidth&&(material.wireframeLinewidth=json.wireframeLinewidth),void 0!==json.wireframeLinecap&&(material.wireframeLinecap=json.wireframeLinecap),void 0!==json.wireframeLinejoin&&(material.wireframeLinejoin=json.wireframeLinejoin),void 0!==json.rotation&&(material.rotation=json.rotation),1!==json.linewidth&&(material.linewidth=json.linewidth),void 0!==json.dashSize&&(material.dashSize=json.dashSize),void 0!==json.gapSize&&(material.gapSize=json.gapSize),void 0!==json.scale&&(material.scale=json.scale),void 0!==json.polygonOffset&&(material.polygonOffset=json.polygonOffset),void 0!==json.polygonOffsetFactor&&(material.polygonOffsetFactor=json.polygonOffsetFactor),void 0!==json.polygonOffsetUnits&&(material.polygonOffsetUnits=json.polygonOffsetUnits),void 0!==json.dithering&&(material.dithering=json.dithering),void 0!==json.alphaToCoverage&&(material.alphaToCoverage=json.alphaToCoverage),void 0!==json.premultipliedAlpha&&(material.premultipliedAlpha=json.premultipliedAlpha),void 0!==json.visible&&(material.visible=json.visible),void 0!==json.toneMapped&&(material.toneMapped=json.toneMapped),void 0!==json.userData&&(material.userData=json.userData),void 0!==json.vertexColors&&(material.vertexColors="number"==typeof json.vertexColors?json.vertexColors>0:json.vertexColors),void 0!==json.uniforms)for(const name in json.uniforms){const uniform=json.uniforms[name];switch(material.uniforms[name]={},uniform.type){case"t":material.uniforms[name].value=getTexture(uniform.value);break;case"c":material.uniforms[name].value=(new Color).setHex(uniform.value);break;case"v2":material.uniforms[name].value=(new Vector22).fromArray(uniform.value);break;case"v3":material.uniforms[name].value=(new Vector32).fromArray(uniform.value);break;case"v4":material.uniforms[name].value=(new Vector4).fromArray(uniform.value);break;case"m3":material.uniforms[name].value=(new Matrix3).fromArray(uniform.value);break;case"m4":material.uniforms[name].value=(new Matrix42).fromArray(uniform.value);break;default:material.uniforms[name].value=uniform.value}}if(void 0!==json.defines&&(material.defines=json.defines),void 0!==json.vertexShader&&(material.vertexShader=json.vertexShader),void 0!==json.fragmentShader&&(material.fragmentShader=json.fragmentShader),void 0!==json.glslVersion&&(material.glslVersion=json.glslVersion),void 0!==json.extensions)for(const key in json.extensions)material.extensions[key]=json.extensions[key];if(void 0!==json.size&&(material.size=json.size),void 0!==json.sizeAttenuation&&(material.sizeAttenuation=json.sizeAttenuation),void 0!==json.map&&(material.map=getTexture(json.map)),void 0!==json.matcap&&(material.matcap=getTexture(json.matcap)),void 0!==json.alphaMap&&(material.alphaMap=getTexture(json.alphaMap)),void 0!==json.bumpMap&&(material.bumpMap=getTexture(json.bumpMap)),void 0!==json.bumpScale&&(material.bumpScale=json.bumpScale),void 0!==json.normalMap&&(material.normalMap=getTexture(json.normalMap)),void 0!==json.normalMapType&&(material.normalMapType=json.normalMapType),void 0!==json.normalScale){let normalScale=json.normalScale;!1===Array.isArray(normalScale)&&(normalScale=[normalScale,normalScale]),material.normalScale=(new Vector22).fromArray(normalScale)}return void 0!==json.displacementMap&&(material.displacementMap=getTexture(json.displacementMap)),void 0!==json.displacementScale&&(material.displacementScale=json.displacementScale),void 0!==json.displacementBias&&(material.displacementBias=json.displacementBias),void 0!==json.roughnessMap&&(material.roughnessMap=getTexture(json.roughnessMap)),void 0!==json.metalnessMap&&(material.metalnessMap=getTexture(json.metalnessMap)),void 0!==json.emissiveMap&&(material.emissiveMap=getTexture(json.emissiveMap)),void 0!==json.emissiveIntensity&&(material.emissiveIntensity=json.emissiveIntensity),void 0!==json.specularMap&&(material.specularMap=getTexture(json.specularMap)),void 0!==json.specularIntensityMap&&(material.specularIntensityMap=getTexture(json.specularIntensityMap)),void 0!==json.specularColorMap&&(material.specularColorMap=getTexture(json.specularColorMap)),void 0!==json.envMap&&(material.envMap=getTexture(json.envMap)),void 0!==json.envMapIntensity&&(material.envMapIntensity=json.envMapIntensity),void 0!==json.reflectivity&&(material.reflectivity=json.reflectivity),void 0!==json.refractionRatio&&(material.refractionRatio=json.refractionRatio),void 0!==json.lightMap&&(material.lightMap=getTexture(json.lightMap)),void 0!==json.lightMapIntensity&&(material.lightMapIntensity=json.lightMapIntensity),void 0!==json.aoMap&&(material.aoMap=getTexture(json.aoMap)),void 0!==json.aoMapIntensity&&(material.aoMapIntensity=json.aoMapIntensity),void 0!==json.gradientMap&&(material.gradientMap=getTexture(json.gradientMap)),void 0!==json.clearcoatMap&&(material.clearcoatMap=getTexture(json.clearcoatMap)),void 0!==json.clearcoatRoughnessMap&&(material.clearcoatRoughnessMap=getTexture(json.clearcoatRoughnessMap)),void 0!==json.clearcoatNormalMap&&(material.clearcoatNormalMap=getTexture(json.clearcoatNormalMap)),void 0!==json.clearcoatNormalScale&&(material.clearcoatNormalScale=(new Vector22).fromArray(json.clearcoatNormalScale)),void 0!==json.iridescenceMap&&(material.iridescenceMap=getTexture(json.iridescenceMap)),void 0!==json.iridescenceThicknessMap&&(material.iridescenceThicknessMap=getTexture(json.iridescenceThicknessMap)),void 0!==json.transmissionMap&&(material.transmissionMap=getTexture(json.transmissionMap)),void 0!==json.thicknessMap&&(material.thicknessMap=getTexture(json.thicknessMap)),void 0!==json.sheenColorMap&&(material.sheenColorMap=getTexture(json.sheenColorMap)),void 0!==json.sheenRoughnessMap&&(material.sheenRoughnessMap=getTexture(json.sheenRoughnessMap)),material}setTextures(value){return this.textures=value,this}static createMaterialFromType(type){return new{ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}[type]}}__name(MaterialLoader,"MaterialLoader");class LoaderUtils{static decodeText(array){if(typeof TextDecoder<"u")return(new TextDecoder).decode(array);let s="";for(let i=0,il=array.length;i<il;i++)s+=String.fromCharCode(array[i]);try{return decodeURIComponent(escape(s))}catch{return s}}static extractUrlBase(url){const index=url.lastIndexOf("/");return-1===index?"./":url.slice(0,index+1)}static resolveURL(url,path){return"string"!=typeof url||""===url?"":(/^https?:\/\//i.test(path)&&/^\//.test(url)&&(path=path.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(url)||/^data:.*,.*$/i.test(url)||/^blob:.*$/i.test(url)?url:path+url)}}__name(LoaderUtils,"LoaderUtils");class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(source){return super.copy(source),this.instanceCount=source.instanceCount,this}toJSON(){const data=super.toJSON();return data.instanceCount=this.instanceCount,data.isInstancedBufferGeometry=!0,data}}__name(InstancedBufferGeometry,"InstancedBufferGeometry");class BufferGeometryLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){const scope=this,loader=new FileLoader(scope.manager);loader.setPath(scope.path),loader.setRequestHeader(scope.requestHeader),loader.setWithCredentials(scope.withCredentials),loader.load(url,function(text){try{onLoad(scope.parse(JSON.parse(text)))}catch(e){onError?onError(e):console.error(e),scope.manager.itemError(url)}},onProgress,onError)}parse(json){const interleavedBufferMap={},arrayBufferMap={};function getInterleavedBuffer(json2,uuid){if(void 0!==interleavedBufferMap[uuid])return interleavedBufferMap[uuid];const interleavedBuffer=json2.interleavedBuffers[uuid],buffer=getArrayBuffer(json2,interleavedBuffer.buffer),array=getTypedArray(interleavedBuffer.type,buffer),ib=new InterleavedBuffer(array,interleavedBuffer.stride);return ib.uuid=interleavedBuffer.uuid,interleavedBufferMap[uuid]=ib,ib}function getArrayBuffer(json2,uuid){if(void 0!==arrayBufferMap[uuid])return arrayBufferMap[uuid];const ab=new Uint32Array(json2.arrayBuffers[uuid]).buffer;return arrayBufferMap[uuid]=ab,ab}__name(getInterleavedBuffer,"getInterleavedBuffer"),__name(getArrayBuffer,"getArrayBuffer");const geometry=json.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,index=json.data.index;if(void 0!==index){const typedArray=getTypedArray(index.type,index.array);geometry.setIndex(new BufferAttribute(typedArray,1))}const attributes=json.data.attributes;for(const key in attributes){const attribute=attributes[key];let bufferAttribute;if(attribute.isInterleavedBufferAttribute){const interleavedBuffer=getInterleavedBuffer(json.data,attribute.data);bufferAttribute=new InterleavedBufferAttribute(interleavedBuffer,attribute.itemSize,attribute.offset,attribute.normalized)}else{const typedArray=getTypedArray(attribute.type,attribute.array);bufferAttribute=new(attribute.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute)(typedArray,attribute.itemSize,attribute.normalized)}void 0!==attribute.name&&(bufferAttribute.name=attribute.name),void 0!==attribute.usage&&bufferAttribute.setUsage(attribute.usage),void 0!==attribute.updateRange&&(bufferAttribute.updateRange.offset=attribute.updateRange.offset,bufferAttribute.updateRange.count=attribute.updateRange.count),geometry.setAttribute(key,bufferAttribute)}const morphAttributes=json.data.morphAttributes;if(morphAttributes)for(const key in morphAttributes){const attributeArray=morphAttributes[key],array=[];for(let i=0,il=attributeArray.length;i<il;i++){const attribute=attributeArray[i];let bufferAttribute;if(attribute.isInterleavedBufferAttribute){const interleavedBuffer=getInterleavedBuffer(json.data,attribute.data);bufferAttribute=new InterleavedBufferAttribute(interleavedBuffer,attribute.itemSize,attribute.offset,attribute.normalized)}else{const typedArray=getTypedArray(attribute.type,attribute.array);bufferAttribute=new BufferAttribute(typedArray,attribute.itemSize,attribute.normalized)}void 0!==attribute.name&&(bufferAttribute.name=attribute.name),array.push(bufferAttribute)}geometry.morphAttributes[key]=array}json.data.morphTargetsRelative&&(geometry.morphTargetsRelative=!0);const groups=json.data.groups||json.data.drawcalls||json.data.offsets;if(void 0!==groups)for(let i=0,n=groups.length;i!==n;++i){const group=groups[i];geometry.addGroup(group.start,group.count,group.materialIndex)}const boundingSphere=json.data.boundingSphere;if(void 0!==boundingSphere){const center=new Vector32;void 0!==boundingSphere.center&&center.fromArray(boundingSphere.center),geometry.boundingSphere=new Sphere(center,boundingSphere.radius)}return json.name&&(geometry.name=json.name),json.userData&&(geometry.userData=json.userData),geometry}}__name(BufferGeometryLoader,"BufferGeometryLoader"),__name(class ObjectLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){const scope=this,path=""===this.path?LoaderUtils.extractUrlBase(url):this.path;this.resourcePath=this.resourcePath||path;const loader=new FileLoader(this.manager);loader.setPath(this.path),loader.setRequestHeader(this.requestHeader),loader.setWithCredentials(this.withCredentials),loader.load(url,function(text){let json=null;try{json=JSON.parse(text)}catch(error){return void 0!==onError&&onError(error),void console.error("THREE:ObjectLoader: Can't parse "+url+".",error.message)}const metadata=json.metadata;if(void 0===metadata||void 0===metadata.type||"geometry"===metadata.type.toLowerCase())return void 0!==onError&&onError(new Error("THREE.ObjectLoader: Can't load "+url)),void console.error("THREE.ObjectLoader: Can't load "+url);scope.parse(json,onLoad)},onProgress,onError)}loadAsync(url,onProgress){var _this2=this;return _asyncToGenerator(function*(){const scope=_this2,path=""===_this2.path?LoaderUtils.extractUrlBase(url):_this2.path;_this2.resourcePath=_this2.resourcePath||path;const loader=new FileLoader(_this2.manager);loader.setPath(_this2.path),loader.setRequestHeader(_this2.requestHeader),loader.setWithCredentials(_this2.withCredentials);const text=yield loader.loadAsync(url,onProgress),json=JSON.parse(text),metadata=json.metadata;if(void 0===metadata||void 0===metadata.type||"geometry"===metadata.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+url);return yield scope.parseAsync(json)})()}parse(json,onLoad){const animations=this.parseAnimations(json.animations),shapes=this.parseShapes(json.shapes),geometries=this.parseGeometries(json.geometries,shapes),images=this.parseImages(json.images,function(){void 0!==onLoad&&onLoad(object)}),textures=this.parseTextures(json.textures,images),materials=this.parseMaterials(json.materials,textures),object=this.parseObject(json.object,geometries,materials,textures,animations),skeletons=this.parseSkeletons(json.skeletons,object);if(this.bindSkeletons(object,skeletons),void 0!==onLoad){let hasImages=!1;for(const uuid in images)if(images[uuid].data instanceof HTMLImageElement){hasImages=!0;break}!1===hasImages&&onLoad(object)}return object}parseAsync(json){var _this3=this;return _asyncToGenerator(function*(){const animations=_this3.parseAnimations(json.animations),shapes=_this3.parseShapes(json.shapes),geometries=_this3.parseGeometries(json.geometries,shapes),images=yield _this3.parseImagesAsync(json.images),textures=_this3.parseTextures(json.textures,images),materials=_this3.parseMaterials(json.materials,textures),object=_this3.parseObject(json.object,geometries,materials,textures,animations),skeletons=_this3.parseSkeletons(json.skeletons,object);return _this3.bindSkeletons(object,skeletons),object})()}parseShapes(json){const shapes={};if(void 0!==json)for(let i=0,l=json.length;i<l;i++){const shape=(new Shape).fromJSON(json[i]);shapes[shape.uuid]=shape}return shapes}parseSkeletons(json,object){const skeletons={},bones={};if(object.traverse(function(child){child.isBone&&(bones[child.uuid]=child)}),void 0!==json)for(let i=0,l=json.length;i<l;i++){const skeleton=(new Skeleton).fromJSON(json[i],bones);skeletons[skeleton.uuid]=skeleton}return skeletons}parseGeometries(json,shapes){const geometries={};if(void 0!==json){const bufferGeometryLoader=new BufferGeometryLoader;for(let i=0,l=json.length;i<l;i++){let geometry;const data=json[i];switch(data.type){case"BufferGeometry":case"InstancedBufferGeometry":geometry=bufferGeometryLoader.parse(data);break;default:data.type in Geometries?geometry=Geometries[data.type].fromJSON(data,shapes):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${data.type}"`)}geometry.uuid=data.uuid,void 0!==data.name&&(geometry.name=data.name),!0===geometry.isBufferGeometry&&void 0!==data.userData&&(geometry.userData=data.userData),geometries[data.uuid]=geometry}}return geometries}parseMaterials(json,textures){const cache={},materials={};if(void 0!==json){const loader=new MaterialLoader;loader.setTextures(textures);for(let i=0,l=json.length;i<l;i++){const data=json[i];void 0===cache[data.uuid]&&(cache[data.uuid]=loader.parse(data)),materials[data.uuid]=cache[data.uuid]}}return materials}parseAnimations(json){const animations={};if(void 0!==json)for(let i=0;i<json.length;i++){const clip=AnimationClip.parse(json[i]);animations[clip.uuid]=clip}return animations}parseImages(json,onLoad){const scope=this,images={};let loader;function loadImage(url){return scope.manager.itemStart(url),loader.load(url,function(){scope.manager.itemEnd(url)},void 0,function(){scope.manager.itemError(url),scope.manager.itemEnd(url)})}function deserializeImage(image){if("string"==typeof image){const url=image;return loadImage(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(url)?url:scope.resourcePath+url)}return image.data?{data:getTypedArray(image.type,image.data),width:image.width,height:image.height}:null}if(__name(loadImage,"loadImage"),__name(deserializeImage,"deserializeImage"),void 0!==json&&json.length>0){const manager=new LoadingManager(onLoad);loader=new ImageLoader(manager),loader.setCrossOrigin(this.crossOrigin);for(let i=0,il=json.length;i<il;i++){const image=json[i],url=image.url;if(Array.isArray(url)){const imageArray=[];for(let j=0,jl=url.length;j<jl;j++){const deserializedImage=deserializeImage(url[j]);null!==deserializedImage&&(deserializedImage instanceof HTMLImageElement?imageArray.push(deserializedImage):imageArray.push(new DataTexture(deserializedImage.data,deserializedImage.width,deserializedImage.height)))}images[image.uuid]=new Source(imageArray)}else{const deserializedImage=deserializeImage(image.url);images[image.uuid]=new Source(deserializedImage)}}}return images}parseImagesAsync(json){var _this4=this;return _asyncToGenerator(function*(){const scope=_this4,images={};let loader;function deserializeImage(_x3){return _deserializeImage.apply(this,arguments)}function _deserializeImage(){return(_deserializeImage=_asyncToGenerator(function*(image){if("string"==typeof image){const url=image,path=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(url)?url:scope.resourcePath+url;return yield loader.loadAsync(path)}return image.data?{data:getTypedArray(image.type,image.data),width:image.width,height:image.height}:null})).apply(this,arguments)}if(__name(deserializeImage,"deserializeImage"),__name(_deserializeImage,"_deserializeImage"),void 0!==json&&json.length>0){loader=new ImageLoader(_this4.manager),loader.setCrossOrigin(_this4.crossOrigin);for(let i=0,il=json.length;i<il;i++){const image=json[i],url=image.url;if(Array.isArray(url)){const imageArray=[];for(let j=0,jl=url.length;j<jl;j++){const currentUrl=url[j],deserializedImage=yield deserializeImage(currentUrl);null!==deserializedImage&&(deserializedImage instanceof HTMLImageElement?imageArray.push(deserializedImage):imageArray.push(new DataTexture(deserializedImage.data,deserializedImage.width,deserializedImage.height)))}images[image.uuid]=new Source(imageArray)}else{const deserializedImage=yield deserializeImage(image.url);images[image.uuid]=new Source(deserializedImage)}}}return images})()}parseTextures(json,images){function parseConstant(value,type){return"number"==typeof value?value:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",value),type[value])}__name(parseConstant,"parseConstant");const textures={};if(void 0!==json)for(let i=0,l=json.length;i<l;i++){const data=json[i];void 0===data.image&&console.warn('THREE.ObjectLoader: No "image" specified for',data.uuid),void 0===images[data.image]&&console.warn("THREE.ObjectLoader: Undefined image",data.image);const source=images[data.image],image=source.data;let texture;Array.isArray(image)?(texture=new CubeTexture,6===image.length&&(texture.needsUpdate=!0)):(texture=image&&image.data?new DataTexture:new Texture,image&&(texture.needsUpdate=!0)),texture.source=source,texture.uuid=data.uuid,void 0!==data.name&&(texture.name=data.name),void 0!==data.mapping&&(texture.mapping=parseConstant(data.mapping,TEXTURE_MAPPING)),void 0!==data.offset&&texture.offset.fromArray(data.offset),void 0!==data.repeat&&texture.repeat.fromArray(data.repeat),void 0!==data.center&&texture.center.fromArray(data.center),void 0!==data.rotation&&(texture.rotation=data.rotation),void 0!==data.wrap&&(texture.wrapS=parseConstant(data.wrap[0],TEXTURE_WRAPPING),texture.wrapT=parseConstant(data.wrap[1],TEXTURE_WRAPPING)),void 0!==data.format&&(texture.format=data.format),void 0!==data.type&&(texture.type=data.type),void 0!==data.encoding&&(texture.encoding=data.encoding),void 0!==data.minFilter&&(texture.minFilter=parseConstant(data.minFilter,TEXTURE_FILTER)),void 0!==data.magFilter&&(texture.magFilter=parseConstant(data.magFilter,TEXTURE_FILTER)),void 0!==data.anisotropy&&(texture.anisotropy=data.anisotropy),void 0!==data.flipY&&(texture.flipY=data.flipY),void 0!==data.generateMipmaps&&(texture.generateMipmaps=data.generateMipmaps),void 0!==data.premultiplyAlpha&&(texture.premultiplyAlpha=data.premultiplyAlpha),void 0!==data.unpackAlignment&&(texture.unpackAlignment=data.unpackAlignment),void 0!==data.userData&&(texture.userData=data.userData),textures[data.uuid]=texture}return textures}parseObject(data,geometries,materials,textures,animations){let object,geometry,material;function getGeometry(name){return void 0===geometries[name]&&console.warn("THREE.ObjectLoader: Undefined geometry",name),geometries[name]}function getMaterial(name){if(void 0!==name){if(Array.isArray(name)){const array=[];for(let i=0,l=name.length;i<l;i++){const uuid=name[i];void 0===materials[uuid]&&console.warn("THREE.ObjectLoader: Undefined material",uuid),array.push(materials[uuid])}return array}return void 0===materials[name]&&console.warn("THREE.ObjectLoader: Undefined material",name),materials[name]}}function getTexture(uuid){return void 0===textures[uuid]&&console.warn("THREE.ObjectLoader: Undefined texture",uuid),textures[uuid]}switch(__name(getGeometry,"getGeometry"),__name(getMaterial,"getMaterial"),__name(getTexture,"getTexture"),data.type){case"Scene":object=new Scene,void 0!==data.background&&(object.background=Number.isInteger(data.background)?new Color(data.background):getTexture(data.background)),void 0!==data.environment&&(object.environment=getTexture(data.environment)),void 0!==data.fog&&("Fog"===data.fog.type?object.fog=new Fog(data.fog.color,data.fog.near,data.fog.far):"FogExp2"===data.fog.type&&(object.fog=new FogExp2(data.fog.color,data.fog.density))),void 0!==data.backgroundBlurriness&&(object.backgroundBlurriness=data.backgroundBlurriness);break;case"PerspectiveCamera":object=new PerspectiveCamera(data.fov,data.aspect,data.near,data.far),void 0!==data.focus&&(object.focus=data.focus),void 0!==data.zoom&&(object.zoom=data.zoom),void 0!==data.filmGauge&&(object.filmGauge=data.filmGauge),void 0!==data.filmOffset&&(object.filmOffset=data.filmOffset),void 0!==data.view&&(object.view=Object.assign({},data.view));break;case"OrthographicCamera":object=new OrthographicCamera(data.left,data.right,data.top,data.bottom,data.near,data.far),void 0!==data.zoom&&(object.zoom=data.zoom),void 0!==data.view&&(object.view=Object.assign({},data.view));break;case"AmbientLight":object=new AmbientLight(data.color,data.intensity);break;case"DirectionalLight":object=new DirectionalLight(data.color,data.intensity);break;case"PointLight":object=new PointLight(data.color,data.intensity,data.distance,data.decay);break;case"RectAreaLight":object=new RectAreaLight(data.color,data.intensity,data.width,data.height);break;case"SpotLight":object=new SpotLight(data.color,data.intensity,data.distance,data.angle,data.penumbra,data.decay);break;case"HemisphereLight":object=new HemisphereLight(data.color,data.groundColor,data.intensity);break;case"LightProbe":object=(new LightProbe).fromJSON(data);break;case"SkinnedMesh":geometry=getGeometry(data.geometry),material=getMaterial(data.material),object=new SkinnedMesh(geometry,material),void 0!==data.bindMode&&(object.bindMode=data.bindMode),void 0!==data.bindMatrix&&object.bindMatrix.fromArray(data.bindMatrix),void 0!==data.skeleton&&(object.skeleton=data.skeleton);break;case"Mesh":geometry=getGeometry(data.geometry),material=getMaterial(data.material),object=new Mesh2(geometry,material);break;case"InstancedMesh":geometry=getGeometry(data.geometry),material=getMaterial(data.material);const instanceMatrix=data.instanceMatrix,instanceColor=data.instanceColor;object=new InstancedMesh(geometry,material,data.count),object.instanceMatrix=new InstancedBufferAttribute(new Float32Array(instanceMatrix.array),16),void 0!==instanceColor&&(object.instanceColor=new InstancedBufferAttribute(new Float32Array(instanceColor.array),instanceColor.itemSize));break;case"LOD":object=new LOD;break;case"Line":object=new Line(getGeometry(data.geometry),getMaterial(data.material));break;case"LineLoop":object=new LineLoop(getGeometry(data.geometry),getMaterial(data.material));break;case"LineSegments":object=new LineSegments(getGeometry(data.geometry),getMaterial(data.material));break;case"PointCloud":case"Points":object=new Points(getGeometry(data.geometry),getMaterial(data.material));break;case"Sprite":object=new Sprite(getMaterial(data.material));break;case"Group":object=new Group;break;case"Bone":object=new Bone;break;default:object=new Object3D}if(object.uuid=data.uuid,void 0!==data.name&&(object.name=data.name),void 0!==data.matrix?(object.matrix.fromArray(data.matrix),void 0!==data.matrixAutoUpdate&&(object.matrixAutoUpdate=data.matrixAutoUpdate),object.matrixAutoUpdate&&object.matrix.decompose(object.position,object.quaternion,object.scale)):(void 0!==data.position&&object.position.fromArray(data.position),void 0!==data.rotation&&object.rotation.fromArray(data.rotation),void 0!==data.quaternion&&object.quaternion.fromArray(data.quaternion),void 0!==data.scale&&object.scale.fromArray(data.scale)),void 0!==data.castShadow&&(object.castShadow=data.castShadow),void 0!==data.receiveShadow&&(object.receiveShadow=data.receiveShadow),data.shadow&&(void 0!==data.shadow.bias&&(object.shadow.bias=data.shadow.bias),void 0!==data.shadow.normalBias&&(object.shadow.normalBias=data.shadow.normalBias),void 0!==data.shadow.radius&&(object.shadow.radius=data.shadow.radius),void 0!==data.shadow.mapSize&&object.shadow.mapSize.fromArray(data.shadow.mapSize),void 0!==data.shadow.camera&&(object.shadow.camera=this.parseObject(data.shadow.camera))),void 0!==data.visible&&(object.visible=data.visible),void 0!==data.frustumCulled&&(object.frustumCulled=data.frustumCulled),void 0!==data.renderOrder&&(object.renderOrder=data.renderOrder),void 0!==data.userData&&(object.userData=data.userData),void 0!==data.layers&&(object.layers.mask=data.layers),void 0!==data.children){const children=data.children;for(let i=0;i<children.length;i++)object.add(this.parseObject(children[i],geometries,materials,textures,animations))}if(void 0!==data.animations){const objectAnimations=data.animations;for(let i=0;i<objectAnimations.length;i++)object.animations.push(animations[objectAnimations[i]])}if("LOD"===data.type){void 0!==data.autoUpdate&&(object.autoUpdate=data.autoUpdate);const levels=data.levels;for(let l=0;l<levels.length;l++){const level=levels[l],child=object.getObjectByProperty("uuid",level.object);void 0!==child&&object.addLevel(child,level.distance,level.hysteresis)}}return object}bindSkeletons(object,skeletons){0!==Object.keys(skeletons).length&&object.traverse(function(child){if(!0===child.isSkinnedMesh&&void 0!==child.skeleton){const skeleton=skeletons[child.skeleton];void 0===skeleton?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",child.skeleton):child.bind(skeleton,child.bindMatrix)}})}},"ObjectLoader");const TEXTURE_MAPPING={UVMapping:300,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};let _context;__name(class ImageBitmapLoader extends(null){constructor(manager){super(manager),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(options){return this.options=options,this}load(url,onLoad,onProgress,onError){void 0===url&&(url=""),void 0!==this.path&&(url=this.path+url),url=this.manager.resolveURL(url);const scope=this,cached=Cache.get(url);if(void 0!==cached)return scope.manager.itemStart(url),setTimeout(function(){onLoad&&onLoad(cached),scope.manager.itemEnd(url)},0),cached;const fetchOptions={};fetchOptions.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetchOptions.headers=this.requestHeader,fetch(url,fetchOptions).then(function(res){return res.blob()}).then(function(blob){return createImageBitmap(blob,Object.assign(scope.options,{colorSpaceConversion:"none"}))}).then(function(imageBitmap){Cache.add(url,imageBitmap),onLoad&&onLoad(imageBitmap),scope.manager.itemEnd(url)}).catch(function(e){onError&&onError(e),scope.manager.itemError(url),scope.manager.itemEnd(url)}),scope.manager.itemStart(url)}},"ImageBitmapLoader");class AudioContext{static getContext(){return void 0===_context&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(value){_context=value}}__name(AudioContext,"AudioContext"),__name(class AudioLoader extends(null){constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){const scope=this,loader=new FileLoader(this.manager);loader.setResponseType("arraybuffer"),loader.setPath(this.path),loader.setRequestHeader(this.requestHeader),loader.setWithCredentials(this.withCredentials),loader.load(url,function(buffer){try{const bufferCopy=buffer.slice(0);AudioContext.getContext().decodeAudioData(bufferCopy,function(audioBuffer){onLoad(audioBuffer)})}catch(e){onError?onError(e):console.error(e),scope.manager.itemError(url)}},onProgress,onError)}},"AudioLoader"),__name(class HemisphereLightProbe extends(null){constructor(skyColor,groundColor,intensity=1){super(void 0,intensity),this.isHemisphereLightProbe=!0;const color1=(new Color).set(skyColor),color2=(new Color).set(groundColor),sky=new Vector32(color1.r,color1.g,color1.b),ground=new Vector32(color2.r,color2.g,color2.b),c0=Math.sqrt(Math.PI),c1=c0*Math.sqrt(.75);this.sh.coefficients[0].copy(sky).add(ground).multiplyScalar(c0),this.sh.coefficients[1].copy(sky).sub(ground).multiplyScalar(c1)}},"HemisphereLightProbe"),__name(class AmbientLightProbe extends(null){constructor(color,intensity=1){super(void 0,intensity),this.isAmbientLightProbe=!0;const color1=(new Color).set(color);this.sh.coefficients[0].set(color1.r,color1.g,color1.b).multiplyScalar(2*Math.sqrt(Math.PI))}},"AmbientLightProbe");const _eyeRight=new Matrix42,_eyeLeft=new Matrix42,_projectionMatrix=new Matrix42;__name(class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(camera){const cache=this._cache;if(cache.focus!==camera.focus||cache.fov!==camera.fov||cache.aspect!==camera.aspect*this.aspect||cache.near!==camera.near||cache.far!==camera.far||cache.zoom!==camera.zoom||cache.eyeSep!==this.eyeSep){cache.focus=camera.focus,cache.fov=camera.fov,cache.aspect=camera.aspect*this.aspect,cache.near=camera.near,cache.far=camera.far,cache.zoom=camera.zoom,cache.eyeSep=this.eyeSep,_projectionMatrix.copy(camera.projectionMatrix);const eyeSepHalf=cache.eyeSep/2,eyeSepOnProjection=eyeSepHalf*cache.near/cache.focus,ymax=cache.near*Math.tan(DEG2RAD*cache.fov*.5)/cache.zoom;let xmin,xmax;_eyeLeft.elements[12]=-eyeSepHalf,_eyeRight.elements[12]=eyeSepHalf,xmin=-ymax*cache.aspect+eyeSepOnProjection,xmax=ymax*cache.aspect+eyeSepOnProjection,_projectionMatrix.elements[0]=2*cache.near/(xmax-xmin),_projectionMatrix.elements[8]=(xmax+xmin)/(xmax-xmin),this.cameraL.projectionMatrix.copy(_projectionMatrix),xmin=-ymax*cache.aspect-eyeSepOnProjection,xmax=ymax*cache.aspect-eyeSepOnProjection,_projectionMatrix.elements[0]=2*cache.near/(xmax-xmin),_projectionMatrix.elements[8]=(xmax+xmin)/(xmax-xmin),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(camera.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(camera.matrixWorld).multiply(_eyeRight)}},"StereoCamera");class Clock{constructor(autoStart=!0){this.autoStart=autoStart,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let diff=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const newTime=now();diff=(newTime-this.oldTime)/1e3,this.oldTime=newTime,this.elapsedTime+=diff}return diff}}function now(){return(typeof performance>"u"?Date:performance).now()}__name(Clock,"Clock"),__name(now,"now");const _position$1=new Vector32,_quaternion$1=new Quaternion,_scale$1=new Vector32,_orientation$1=new Vector32;__name(class AudioListener extends(null){constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(value){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=value,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(value){return this.gain.gain.setTargetAtTime(value,this.context.currentTime,.01),this}updateMatrixWorld(force){super.updateMatrixWorld(force);const listener=this.context.listener,up=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),listener.positionX){const endTime=this.context.currentTime+this.timeDelta;listener.positionX.linearRampToValueAtTime(_position$1.x,endTime),listener.positionY.linearRampToValueAtTime(_position$1.y,endTime),listener.positionZ.linearRampToValueAtTime(_position$1.z,endTime),listener.forwardX.linearRampToValueAtTime(_orientation$1.x,endTime),listener.forwardY.linearRampToValueAtTime(_orientation$1.y,endTime),listener.forwardZ.linearRampToValueAtTime(_orientation$1.z,endTime),listener.upX.linearRampToValueAtTime(up.x,endTime),listener.upY.linearRampToValueAtTime(up.y,endTime),listener.upZ.linearRampToValueAtTime(up.z,endTime)}else listener.setPosition(_position$1.x,_position$1.y,_position$1.z),listener.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,up.x,up.y,up.z)}},"AudioListener"),__name(class Audio extends(null){constructor(listener){super(),this.type="Audio",this.listener=listener,this.context=listener.context,this.gain=this.context.createGain(),this.gain.connect(listener.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(audioNode){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=audioNode,this.connect(),this}setMediaElementSource(mediaElement){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(mediaElement),this.connect(),this}setMediaStreamSource(mediaStream){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(mediaStream),this.connect(),this}setBuffer(audioBuffer){return this.buffer=audioBuffer,this.sourceType="buffer",this.autoplay&&this.play(),this}play(delay=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+delay;const source=this.context.createBufferSource();return source.buffer=this.buffer,source.loop=this.loop,source.loopStart=this.loopStart,source.loopEnd=this.loopEnd,source.onended=this.onEnded.bind(this),source.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=source,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let i=1,l=this.filters.length;i<l;i++)this.filters[i-1].connect(this.filters[i]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let i=1,l=this.filters.length;i<l;i++)this.filters[i-1].disconnect(this.filters[i]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(value){return value||(value=[]),!0===this._connected?(this.disconnect(),this.filters=value.slice(),this.connect()):this.filters=value.slice(),this}setDetune(value){if(this.detune=value,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(filter){return this.setFilters(filter?[filter]:[])}setPlaybackRate(value){if(!1!==this.hasPlaybackControl)return this.playbackRate=value,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(value){if(!1!==this.hasPlaybackControl)return this.loop=value,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(value){return this.loopStart=value,this}setLoopEnd(value){return this.loopEnd=value,this}getVolume(){return this.gain.gain.value}setVolume(value){return this.gain.gain.setTargetAtTime(value,this.context.currentTime,.01),this}},"Audio");const _position=new Vector32,_quaternion=new Quaternion,_scale=new Vector32,_orientation=new Vector32;__name(class PositionalAudio extends(null){constructor(listener){super(listener),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(value){return this.panner.refDistance=value,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(value){return this.panner.rolloffFactor=value,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(value){return this.panner.distanceModel=value,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(value){return this.panner.maxDistance=value,this}setDirectionalCone(coneInnerAngle,coneOuterAngle,coneOuterGain){return this.panner.coneInnerAngle=coneInnerAngle,this.panner.coneOuterAngle=coneOuterAngle,this.panner.coneOuterGain=coneOuterGain,this}updateMatrixWorld(force){if(super.updateMatrixWorld(force),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const panner=this.panner;if(panner.positionX){const endTime=this.context.currentTime+this.listener.timeDelta;panner.positionX.linearRampToValueAtTime(_position.x,endTime),panner.positionY.linearRampToValueAtTime(_position.y,endTime),panner.positionZ.linearRampToValueAtTime(_position.z,endTime),panner.orientationX.linearRampToValueAtTime(_orientation.x,endTime),panner.orientationY.linearRampToValueAtTime(_orientation.y,endTime),panner.orientationZ.linearRampToValueAtTime(_orientation.z,endTime)}else panner.setPosition(_position.x,_position.y,_position.z),panner.setOrientation(_orientation.x,_orientation.y,_orientation.z)}},"PositionalAudio"),__name(class AudioAnalyser{constructor(audio,fftSize=2048){this.analyser=audio.context.createAnalyser(),this.analyser.fftSize=fftSize,this.data=new Uint8Array(this.analyser.frequencyBinCount),audio.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let value=0;const data=this.getFrequencyData();for(let i=0;i<data.length;i++)value+=data[i];return value/data.length}},"AudioAnalyser");class PropertyMixer{constructor(binding,typeName,valueSize){let mixFunction,mixFunctionAdditive,setIdentity;switch(this.binding=binding,this.valueSize=valueSize,typeName){case"quaternion":mixFunction=this._slerp,mixFunctionAdditive=this._slerpAdditive,setIdentity=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*valueSize),this._workIndex=5;break;case"string":case"bool":mixFunction=this._select,mixFunctionAdditive=this._select,setIdentity=this._setAdditiveIdentityOther,this.buffer=new Array(5*valueSize);break;default:mixFunction=this._lerp,mixFunctionAdditive=this._lerpAdditive,setIdentity=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*valueSize)}this._mixBufferRegion=mixFunction,this._mixBufferRegionAdditive=mixFunctionAdditive,this._setIdentity=setIdentity,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(accuIndex,weight){const buffer=this.buffer,stride=this.valueSize,offset=accuIndex*stride+stride;let currentWeight=this.cumulativeWeight;if(0===currentWeight){for(let i=0;i!==stride;++i)buffer[offset+i]=buffer[i];currentWeight=weight}else currentWeight+=weight,this._mixBufferRegion(buffer,offset,0,weight/currentWeight,stride);this.cumulativeWeight=currentWeight}accumulateAdditive(weight){const buffer=this.buffer,stride=this.valueSize,offset=stride*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(buffer,offset,0,weight,stride),this.cumulativeWeightAdditive+=weight}apply(accuIndex){const stride=this.valueSize,buffer=this.buffer,offset=accuIndex*stride+stride,weight=this.cumulativeWeight,weightAdditive=this.cumulativeWeightAdditive,binding=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,weight<1&&this._mixBufferRegion(buffer,offset,stride*this._origIndex,1-weight,stride),weightAdditive>0&&this._mixBufferRegionAdditive(buffer,offset,this._addIndex*stride,1,stride);for(let i=stride,e=stride+stride;i!==e;++i)if(buffer[i]!==buffer[i+stride]){binding.setValue(buffer,offset);break}}saveOriginalState(){const buffer=this.buffer,stride=this.valueSize,originalValueOffset=stride*this._origIndex;this.binding.getValue(buffer,originalValueOffset);for(let i=stride,e=originalValueOffset;i!==e;++i)buffer[i]=buffer[originalValueOffset+i%stride];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const startIndex=this._addIndex*this.valueSize,endIndex=startIndex+this.valueSize;for(let i=startIndex;i<endIndex;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const startIndex=this._origIndex*this.valueSize,targetIndex=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[targetIndex+i]=this.buffer[startIndex+i]}_select(buffer,dstOffset,srcOffset,t,stride){if(t>=.5)for(let i=0;i!==stride;++i)buffer[dstOffset+i]=buffer[srcOffset+i]}_slerp(buffer,dstOffset,srcOffset,t){Quaternion.slerpFlat(buffer,dstOffset,buffer,dstOffset,buffer,srcOffset,t)}_slerpAdditive(buffer,dstOffset,srcOffset,t,stride){const workOffset=this._workIndex*stride;Quaternion.multiplyQuaternionsFlat(buffer,workOffset,buffer,dstOffset,buffer,srcOffset),Quaternion.slerpFlat(buffer,dstOffset,buffer,dstOffset,buffer,workOffset,t)}_lerp(buffer,dstOffset,srcOffset,t,stride){const s=1-t;for(let i=0;i!==stride;++i){const j=dstOffset+i;buffer[j]=buffer[j]*s+buffer[srcOffset+i]*t}}_lerpAdditive(buffer,dstOffset,srcOffset,t,stride){for(let i=0;i!==stride;++i){const j=dstOffset+i;buffer[j]=buffer[j]+buffer[srcOffset+i]*t}}}__name(PropertyMixer,"PropertyMixer");const _reservedRe=new RegExp("[\\[\\]\\.:\\/]","g"),_wordCharOrDot="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",_trackRe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]")+/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]")+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(targetGroup,path,optionalParsedPath){const parsedPath=optionalParsedPath||PropertyBinding.parseTrackName(path);this._targetGroup=targetGroup,this._bindings=targetGroup.subscribe_(path,parsedPath)}getValue(array,offset){this.bind();const binding=this._bindings[this._targetGroup.nCachedObjects_];void 0!==binding&&binding.getValue(array,offset)}setValue(array,offset){const bindings=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=bindings.length;i!==n;++i)bindings[i].setValue(array,offset)}bind(){const bindings=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=bindings.length;i!==n;++i)bindings[i].bind()}unbind(){const bindings=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=bindings.length;i!==n;++i)bindings[i].unbind()}}__name(Composite,"Composite");let PropertyBinding=(()=>{class PropertyBinding2{constructor(rootNode,path,parsedPath){this.path=path,this.parsedPath=parsedPath||PropertyBinding2.parseTrackName(path),this.node=PropertyBinding2.findNode(rootNode,this.parsedPath.nodeName)||rootNode,this.rootNode=rootNode,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(root,path,parsedPath){return root&&root.isAnimationObjectGroup?new PropertyBinding2.Composite(root,path,parsedPath):new PropertyBinding2(root,path,parsedPath)}static sanitizeNodeName(name){return name.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(trackName){const matches=_trackRe.exec(trackName);if(null===matches)throw new Error("PropertyBinding: Cannot parse trackName: "+trackName);const results={nodeName:matches[2],objectName:matches[3],objectIndex:matches[4],propertyName:matches[5],propertyIndex:matches[6]},lastDot=results.nodeName&&results.nodeName.lastIndexOf(".");if(void 0!==lastDot&&-1!==lastDot){const objectName=results.nodeName.substring(lastDot+1);-1!==_supportedObjectNames.indexOf(objectName)&&(results.nodeName=results.nodeName.substring(0,lastDot),results.objectName=objectName)}if(null===results.propertyName||0===results.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+trackName);return results}static findNode(root,nodeName){if(void 0===nodeName||""===nodeName||"."===nodeName||-1===nodeName||nodeName===root.name||nodeName===root.uuid)return root;if(root.skeleton){const bone=root.skeleton.getBoneByName(nodeName);if(void 0!==bone)return bone}if(root.children){const searchNodeSubtree=__name(function(children){for(let i=0;i<children.length;i++){const childNode=children[i];if(childNode.name===nodeName||childNode.uuid===nodeName)return childNode;const result=searchNodeSubtree(childNode.children);if(result)return result}return null},"searchNodeSubtree"),subTreeNode=searchNodeSubtree(root.children);if(subTreeNode)return subTreeNode}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(buffer,offset){buffer[offset]=this.targetObject[this.propertyName]}_getValue_array(buffer,offset){const source=this.resolvedProperty;for(let i=0,n=source.length;i!==n;++i)buffer[offset++]=source[i]}_getValue_arrayElement(buffer,offset){buffer[offset]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(buffer,offset){this.resolvedProperty.toArray(buffer,offset)}_setValue_direct(buffer,offset){this.targetObject[this.propertyName]=buffer[offset]}_setValue_direct_setNeedsUpdate(buffer,offset){this.targetObject[this.propertyName]=buffer[offset],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(buffer,offset){this.targetObject[this.propertyName]=buffer[offset],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(buffer,offset){const dest=this.resolvedProperty;for(let i=0,n=dest.length;i!==n;++i)dest[i]=buffer[offset++]}_setValue_array_setNeedsUpdate(buffer,offset){const dest=this.resolvedProperty;for(let i=0,n=dest.length;i!==n;++i)dest[i]=buffer[offset++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(buffer,offset){const dest=this.resolvedProperty;for(let i=0,n=dest.length;i!==n;++i)dest[i]=buffer[offset++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(buffer,offset){this.resolvedProperty[this.propertyIndex]=buffer[offset]}_setValue_arrayElement_setNeedsUpdate(buffer,offset){this.resolvedProperty[this.propertyIndex]=buffer[offset],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(buffer,offset){this.resolvedProperty[this.propertyIndex]=buffer[offset],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(buffer,offset){this.resolvedProperty.fromArray(buffer,offset)}_setValue_fromArray_setNeedsUpdate(buffer,offset){this.resolvedProperty.fromArray(buffer,offset),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(buffer,offset){this.resolvedProperty.fromArray(buffer,offset),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(targetArray,offset){this.bind(),this.getValue(targetArray,offset)}_setValue_unbound(sourceArray,offset){this.bind(),this.setValue(sourceArray,offset)}bind(){let targetObject=this.node;const parsedPath=this.parsedPath,objectName=parsedPath.objectName,propertyName=parsedPath.propertyName;let propertyIndex=parsedPath.propertyIndex;if(targetObject||(targetObject=PropertyBinding2.findNode(this.rootNode,parsedPath.nodeName)||this.rootNode,this.node=targetObject),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!targetObject)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(objectName){let objectIndex=parsedPath.objectIndex;switch(objectName){case"materials":if(!targetObject.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!targetObject.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);targetObject=targetObject.material.materials;break;case"bones":if(!targetObject.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);targetObject=targetObject.skeleton.bones;for(let i=0;i<targetObject.length;i++)if(targetObject[i].name===objectIndex){objectIndex=i;break}break;case"map":if("map"in targetObject){targetObject=targetObject.map;break}if(!targetObject.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!targetObject.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);targetObject=targetObject.material.map;break;default:if(void 0===targetObject[objectName])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);targetObject=targetObject[objectName]}if(void 0!==objectIndex){if(void 0===targetObject[objectIndex])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,targetObject);targetObject=targetObject[objectIndex]}}const nodeProperty=targetObject[propertyName];if(void 0===nodeProperty)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+parsedPath.nodeName+"."+propertyName+" but it wasn't found.",targetObject);let versioning=this.Versioning.None;this.targetObject=targetObject,void 0!==targetObject.needsUpdate?versioning=this.Versioning.NeedsUpdate:void 0!==targetObject.matrixWorldNeedsUpdate&&(versioning=this.Versioning.MatrixWorldNeedsUpdate);let bindingType=this.BindingType.Direct;if(void 0!==propertyIndex){if("morphTargetInfluences"===propertyName){if(!targetObject.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!targetObject.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==targetObject.morphTargetDictionary[propertyIndex]&&(propertyIndex=targetObject.morphTargetDictionary[propertyIndex])}bindingType=this.BindingType.ArrayElement,this.resolvedProperty=nodeProperty,this.propertyIndex=propertyIndex}else void 0!==nodeProperty.fromArray&&void 0!==nodeProperty.toArray?(bindingType=this.BindingType.HasFromToArray,this.resolvedProperty=nodeProperty):Array.isArray(nodeProperty)?(bindingType=this.BindingType.EntireArray,this.resolvedProperty=nodeProperty):this.propertyName=propertyName;this.getValue=this.GetterByBindingType[bindingType],this.setValue=this.SetterByBindingTypeAndVersioning[bindingType][versioning]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return __name(PropertyBinding2,"PropertyBinding"),PropertyBinding2.Composite=Composite,PropertyBinding2})();PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],__name(class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const indices={};this._indicesByUUID=indices;for(let i=0,n=arguments.length;i!==n;++i)indices[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const scope=this;this.stats={objects:{get total(){return scope._objects.length},get inUse(){return this.total-scope.nCachedObjects_}},get bindingsPerObject(){return scope._bindings.length}}}add(){const objects=this._objects,indicesByUUID=this._indicesByUUID,paths=this._paths,parsedPaths=this._parsedPaths,bindings=this._bindings,nBindings=bindings.length;let knownObject,nObjects=objects.length,nCachedObjects=this.nCachedObjects_;for(let i=0,n=arguments.length;i!==n;++i){const object=arguments[i],uuid=object.uuid;let index=indicesByUUID[uuid];if(void 0===index){index=nObjects++,indicesByUUID[uuid]=index,objects.push(object);for(let j=0,m=nBindings;j!==m;++j)bindings[j].push(new PropertyBinding(object,paths[j],parsedPaths[j]))}else if(index<nCachedObjects){knownObject=objects[index];const firstActiveIndex=--nCachedObjects,lastCachedObject=objects[firstActiveIndex];indicesByUUID[lastCachedObject.uuid]=index,objects[index]=lastCachedObject,indicesByUUID[uuid]=firstActiveIndex,objects[firstActiveIndex]=object;for(let j=0,m=nBindings;j!==m;++j){const bindingsForPath=bindings[j];let binding=bindingsForPath[index];bindingsForPath[index]=bindingsForPath[firstActiveIndex],void 0===binding&&(binding=new PropertyBinding(object,paths[j],parsedPaths[j])),bindingsForPath[firstActiveIndex]=binding}}else objects[index]!==knownObject&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=nCachedObjects}remove(){const objects=this._objects,indicesByUUID=this._indicesByUUID,bindings=this._bindings,nBindings=bindings.length;let nCachedObjects=this.nCachedObjects_;for(let i=0,n=arguments.length;i!==n;++i){const object=arguments[i],uuid=object.uuid,index=indicesByUUID[uuid];if(void 0!==index&&index>=nCachedObjects){const lastCachedIndex=nCachedObjects++,firstActiveObject=objects[lastCachedIndex];indicesByUUID[firstActiveObject.uuid]=index,objects[index]=firstActiveObject,indicesByUUID[uuid]=lastCachedIndex,objects[lastCachedIndex]=object;for(let j=0,m=nBindings;j!==m;++j){const bindingsForPath=bindings[j],binding=bindingsForPath[index];bindingsForPath[index]=bindingsForPath[lastCachedIndex],bindingsForPath[lastCachedIndex]=binding}}}this.nCachedObjects_=nCachedObjects}uncache(){const objects=this._objects,indicesByUUID=this._indicesByUUID,bindings=this._bindings,nBindings=bindings.length;let nCachedObjects=this.nCachedObjects_,nObjects=objects.length;for(let i=0,n=arguments.length;i!==n;++i){const uuid=arguments[i].uuid,index=indicesByUUID[uuid];if(void 0!==index)if(delete indicesByUUID[uuid],index<nCachedObjects){const firstActiveIndex=--nCachedObjects,lastCachedObject=objects[firstActiveIndex],lastIndex=--nObjects,lastObject=objects[lastIndex];indicesByUUID[lastCachedObject.uuid]=index,objects[index]=lastCachedObject,indicesByUUID[lastObject.uuid]=firstActiveIndex,objects[firstActiveIndex]=lastObject,objects.pop();for(let j=0,m=nBindings;j!==m;++j){const bindingsForPath=bindings[j],last=bindingsForPath[lastIndex];bindingsForPath[index]=bindingsForPath[firstActiveIndex],bindingsForPath[firstActiveIndex]=last,bindingsForPath.pop()}}else{const lastIndex=--nObjects,lastObject=objects[lastIndex];lastIndex>0&&(indicesByUUID[lastObject.uuid]=index),objects[index]=lastObject,objects.pop();for(let j=0,m=nBindings;j!==m;++j){const bindingsForPath=bindings[j];bindingsForPath[index]=bindingsForPath[lastIndex],bindingsForPath.pop()}}}this.nCachedObjects_=nCachedObjects}subscribe_(path,parsedPath){const indicesByPath=this._bindingsIndicesByPath;let index=indicesByPath[path];const bindings=this._bindings;if(void 0!==index)return bindings[index];const paths=this._paths,parsedPaths=this._parsedPaths,objects=this._objects,nCachedObjects=this.nCachedObjects_,bindingsForPath=new Array(objects.length);index=bindings.length,indicesByPath[path]=index,paths.push(path),parsedPaths.push(parsedPath),bindings.push(bindingsForPath);for(let i=nCachedObjects,n=objects.length;i!==n;++i)bindingsForPath[i]=new PropertyBinding(objects[i],path,parsedPath);return bindingsForPath}unsubscribe_(path){const indicesByPath=this._bindingsIndicesByPath,index=indicesByPath[path];if(void 0!==index){const paths=this._paths,parsedPaths=this._parsedPaths,bindings=this._bindings,lastBindingsIndex=bindings.length-1,lastBindings=bindings[lastBindingsIndex];indicesByPath[path[lastBindingsIndex]]=index,bindings[index]=lastBindings,bindings.pop(),parsedPaths[index]=parsedPaths[lastBindingsIndex],parsedPaths.pop(),paths[index]=paths[lastBindingsIndex],paths.pop()}}},"AnimationObjectGroup");class AnimationAction{constructor(mixer,clip,localRoot=null,blendMode=clip.blendMode){this._mixer=mixer,this._clip=clip,this._localRoot=localRoot,this.blendMode=blendMode;const tracks=clip.tracks,nTracks=tracks.length,interpolants=new Array(nTracks),interpolantSettings={endingStart:2400,endingEnd:2400};for(let i=0;i!==nTracks;++i){const interpolant=tracks[i].createInterpolant(null);interpolants[i]=interpolant,interpolant.settings=interpolantSettings}this._interpolantSettings=interpolantSettings,this._interpolants=interpolants,this._propertyBindings=new Array(nTracks),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(time){return this._startTime=time,this}setLoop(mode,repetitions){return this.loop=mode,this.repetitions=repetitions,this}setEffectiveWeight(weight){return this.weight=weight,this._effectiveWeight=this.enabled?weight:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(duration){return this._scheduleFading(duration,0,1)}fadeOut(duration){return this._scheduleFading(duration,1,0)}crossFadeFrom(fadeOutAction,duration,warp){if(fadeOutAction.fadeOut(duration),this.fadeIn(duration),warp){const fadeInDuration=this._clip.duration,fadeOutDuration=fadeOutAction._clip.duration,endStartRatio=fadeInDuration/fadeOutDuration;fadeOutAction.warp(1,fadeOutDuration/fadeInDuration,duration),this.warp(endStartRatio,1,duration)}return this}crossFadeTo(fadeInAction,duration,warp){return fadeInAction.crossFadeFrom(this,duration,warp)}stopFading(){const weightInterpolant=this._weightInterpolant;return null!==weightInterpolant&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(weightInterpolant)),this}setEffectiveTimeScale(timeScale){return this.timeScale=timeScale,this._effectiveTimeScale=this.paused?0:timeScale,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(duration){return this.timeScale=this._clip.duration/duration,this.stopWarping()}syncWith(action){return this.time=action.time,this.timeScale=action.timeScale,this.stopWarping()}halt(duration){return this.warp(this._effectiveTimeScale,0,duration)}warp(startTimeScale,endTimeScale,duration){const mixer=this._mixer,now2=mixer.time,timeScale=this.timeScale;let interpolant=this._timeScaleInterpolant;null===interpolant&&(interpolant=mixer._lendControlInterpolant(),this._timeScaleInterpolant=interpolant);const times=interpolant.parameterPositions,values=interpolant.sampleValues;return times[0]=now2,times[1]=now2+duration,values[0]=startTimeScale/timeScale,values[1]=endTimeScale/timeScale,this}stopWarping(){const timeScaleInterpolant=this._timeScaleInterpolant;return null!==timeScaleInterpolant&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(timeScaleInterpolant)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(time,deltaTime,timeDirection,accuIndex){if(!this.enabled)return void this._updateWeight(time);const startTime=this._startTime;if(null!==startTime){const timeRunning=(time-startTime)*timeDirection;timeRunning<0||0===timeDirection?deltaTime=0:(this._startTime=null,deltaTime=timeDirection*timeRunning)}deltaTime*=this._updateTimeScale(time);const clipTime=this._updateTime(deltaTime),weight=this._updateWeight(time);if(weight>0){const interpolants=this._interpolants,propertyMixers=this._propertyBindings;if(this.blendMode===AdditiveAnimationBlendMode)for(let j=0,m=interpolants.length;j!==m;++j)interpolants[j].evaluate(clipTime),propertyMixers[j].accumulateAdditive(weight);else for(let j=0,m=interpolants.length;j!==m;++j)interpolants[j].evaluate(clipTime),propertyMixers[j].accumulate(accuIndex,weight)}}_updateWeight(time){let weight=0;if(this.enabled){weight=this.weight;const interpolant=this._weightInterpolant;if(null!==interpolant){const interpolantValue=interpolant.evaluate(time)[0];weight*=interpolantValue,time>interpolant.parameterPositions[1]&&(this.stopFading(),0===interpolantValue&&(this.enabled=!1))}}return this._effectiveWeight=weight,weight}_updateTimeScale(time){let timeScale=0;if(!this.paused){timeScale=this.timeScale;const interpolant=this._timeScaleInterpolant;null!==interpolant&&(timeScale*=interpolant.evaluate(time)[0],time>interpolant.parameterPositions[1]&&(this.stopWarping(),0===timeScale?this.paused=!0:this.timeScale=timeScale))}return this._effectiveTimeScale=timeScale,timeScale}_updateTime(deltaTime){const duration=this._clip.duration,loop=this.loop;let time=this.time+deltaTime,loopCount=this._loopCount;const pingPong=2202===loop;if(0===deltaTime)return-1===loopCount?time:pingPong&&1==(1&loopCount)?duration-time:time;if(2200===loop){-1===loopCount&&(this._loopCount=0,this._setEndings(!0,!0,!1));handle_stop:{if(time>=duration)time=duration;else{if(!(time<0)){this.time=time;break handle_stop}time=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:deltaTime<0?-1:1})}}else{if(-1===loopCount&&(deltaTime>=0?(loopCount=0,this._setEndings(!0,0===this.repetitions,pingPong)):this._setEndings(0===this.repetitions,!0,pingPong)),time>=duration||time<0){const loopDelta=Math.floor(time/duration);time-=duration*loopDelta,loopCount+=Math.abs(loopDelta);const pending=this.repetitions-loopCount;if(pending<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,time=deltaTime>0?duration:0,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:deltaTime>0?1:-1});else{if(1===pending){const atStart=deltaTime<0;this._setEndings(atStart,!atStart,pingPong)}else this._setEndings(!1,!1,pingPong);this._loopCount=loopCount,this.time=time,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta})}}else this.time=time;if(pingPong&&1==(1&loopCount))return duration-time}return time}_setEndings(atStart,atEnd,pingPong){const settings=this._interpolantSettings;pingPong?(settings.endingStart=2401,settings.endingEnd=2401):(settings.endingStart=atStart?this.zeroSlopeAtStart?2401:2400:2402,settings.endingEnd=atEnd?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(duration,weightNow,weightThen){const mixer=this._mixer,now2=mixer.time;let interpolant=this._weightInterpolant;null===interpolant&&(interpolant=mixer._lendControlInterpolant(),this._weightInterpolant=interpolant);const times=interpolant.parameterPositions,values=interpolant.sampleValues;return times[0]=now2,values[0]=weightNow,times[1]=now2+duration,values[1]=weightThen,this}}__name(AnimationAction,"AnimationAction");const _controlInterpolantsResultBuffer=new Float32Array(1);__name(class AnimationMixer extends(null){constructor(root){super(),this._root=root,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(action,prototypeAction){const root=action._localRoot||this._root,tracks=action._clip.tracks,nTracks=tracks.length,bindings=action._propertyBindings,interpolants=action._interpolants,rootUuid=root.uuid,bindingsByRoot=this._bindingsByRootAndName;let bindingsByName=bindingsByRoot[rootUuid];void 0===bindingsByName&&(bindingsByName={},bindingsByRoot[rootUuid]=bindingsByName);for(let i=0;i!==nTracks;++i){const track=tracks[i],trackName=track.name;let binding=bindingsByName[trackName];if(void 0!==binding)++binding.referenceCount,bindings[i]=binding;else{if(binding=bindings[i],void 0!==binding){null===binding._cacheIndex&&(++binding.referenceCount,this._addInactiveBinding(binding,rootUuid,trackName));continue}binding=new PropertyMixer(PropertyBinding.create(root,trackName,prototypeAction&&prototypeAction._propertyBindings[i].binding.parsedPath),track.ValueTypeName,track.getValueSize()),++binding.referenceCount,this._addInactiveBinding(binding,rootUuid,trackName),bindings[i]=binding}interpolants[i].resultBuffer=binding.buffer}}_activateAction(action){if(!this._isActiveAction(action)){if(null===action._cacheIndex){const rootUuid=(action._localRoot||this._root).uuid,clipUuid=action._clip.uuid,actionsForClip=this._actionsByClip[clipUuid];this._bindAction(action,actionsForClip&&actionsForClip.knownActions[0]),this._addInactiveAction(action,clipUuid,rootUuid)}const bindings=action._propertyBindings;for(let i=0,n=bindings.length;i!==n;++i){const binding=bindings[i];0==binding.useCount++&&(this._lendBinding(binding),binding.saveOriginalState())}this._lendAction(action)}}_deactivateAction(action){if(this._isActiveAction(action)){const bindings=action._propertyBindings;for(let i=0,n=bindings.length;i!==n;++i){const binding=bindings[i];0==--binding.useCount&&(binding.restoreOriginalState(),this._takeBackBinding(binding))}this._takeBackAction(action)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const scope=this;this.stats={actions:{get total(){return scope._actions.length},get inUse(){return scope._nActiveActions}},bindings:{get total(){return scope._bindings.length},get inUse(){return scope._nActiveBindings}},controlInterpolants:{get total(){return scope._controlInterpolants.length},get inUse(){return scope._nActiveControlInterpolants}}}}_isActiveAction(action){const index=action._cacheIndex;return null!==index&&index<this._nActiveActions}_addInactiveAction(action,clipUuid,rootUuid){const actions=this._actions,actionsByClip=this._actionsByClip;let actionsForClip=actionsByClip[clipUuid];if(void 0===actionsForClip)actionsForClip={knownActions:[action],actionByRoot:{}},action._byClipCacheIndex=0,actionsByClip[clipUuid]=actionsForClip;else{const knownActions=actionsForClip.knownActions;action._byClipCacheIndex=knownActions.length,knownActions.push(action)}action._cacheIndex=actions.length,actions.push(action),actionsForClip.actionByRoot[rootUuid]=action}_removeInactiveAction(action){const actions=this._actions,lastInactiveAction=actions[actions.length-1],cacheIndex=action._cacheIndex;lastInactiveAction._cacheIndex=cacheIndex,actions[cacheIndex]=lastInactiveAction,actions.pop(),action._cacheIndex=null;const clipUuid=action._clip.uuid,actionsByClip=this._actionsByClip,actionsForClip=actionsByClip[clipUuid],knownActionsForClip=actionsForClip.knownActions,lastKnownAction=knownActionsForClip[knownActionsForClip.length-1],byClipCacheIndex=action._byClipCacheIndex;lastKnownAction._byClipCacheIndex=byClipCacheIndex,knownActionsForClip[byClipCacheIndex]=lastKnownAction,knownActionsForClip.pop(),action._byClipCacheIndex=null,delete actionsForClip.actionByRoot[(action._localRoot||this._root).uuid],0===knownActionsForClip.length&&delete actionsByClip[clipUuid],this._removeInactiveBindingsForAction(action)}_removeInactiveBindingsForAction(action){const bindings=action._propertyBindings;for(let i=0,n=bindings.length;i!==n;++i){const binding=bindings[i];0==--binding.referenceCount&&this._removeInactiveBinding(binding)}}_lendAction(action){const actions=this._actions,prevIndex=action._cacheIndex,lastActiveIndex=this._nActiveActions++,firstInactiveAction=actions[lastActiveIndex];action._cacheIndex=lastActiveIndex,actions[lastActiveIndex]=action,firstInactiveAction._cacheIndex=prevIndex,actions[prevIndex]=firstInactiveAction}_takeBackAction(action){const actions=this._actions,prevIndex=action._cacheIndex,firstInactiveIndex=--this._nActiveActions,lastActiveAction=actions[firstInactiveIndex];action._cacheIndex=firstInactiveIndex,actions[firstInactiveIndex]=action,lastActiveAction._cacheIndex=prevIndex,actions[prevIndex]=lastActiveAction}_addInactiveBinding(binding,rootUuid,trackName){const bindingsByRoot=this._bindingsByRootAndName,bindings=this._bindings;let bindingByName=bindingsByRoot[rootUuid];void 0===bindingByName&&(bindingByName={},bindingsByRoot[rootUuid]=bindingByName),bindingByName[trackName]=binding,binding._cacheIndex=bindings.length,bindings.push(binding)}_removeInactiveBinding(binding){const bindings=this._bindings,propBinding=binding.binding,rootUuid=propBinding.rootNode.uuid,trackName=propBinding.path,bindingsByRoot=this._bindingsByRootAndName,bindingByName=bindingsByRoot[rootUuid],lastInactiveBinding=bindings[bindings.length-1],cacheIndex=binding._cacheIndex;lastInactiveBinding._cacheIndex=cacheIndex,bindings[cacheIndex]=lastInactiveBinding,bindings.pop(),delete bindingByName[trackName],0===Object.keys(bindingByName).length&&delete bindingsByRoot[rootUuid]}_lendBinding(binding){const bindings=this._bindings,prevIndex=binding._cacheIndex,lastActiveIndex=this._nActiveBindings++,firstInactiveBinding=bindings[lastActiveIndex];binding._cacheIndex=lastActiveIndex,bindings[lastActiveIndex]=binding,firstInactiveBinding._cacheIndex=prevIndex,bindings[prevIndex]=firstInactiveBinding}_takeBackBinding(binding){const bindings=this._bindings,prevIndex=binding._cacheIndex,firstInactiveIndex=--this._nActiveBindings,lastActiveBinding=bindings[firstInactiveIndex];binding._cacheIndex=firstInactiveIndex,bindings[firstInactiveIndex]=binding,lastActiveBinding._cacheIndex=prevIndex,bindings[prevIndex]=lastActiveBinding}_lendControlInterpolant(){const interpolants=this._controlInterpolants,lastActiveIndex=this._nActiveControlInterpolants++;let interpolant=interpolants[lastActiveIndex];return void 0===interpolant&&(interpolant=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),interpolant.__cacheIndex=lastActiveIndex,interpolants[lastActiveIndex]=interpolant),interpolant}_takeBackControlInterpolant(interpolant){const interpolants=this._controlInterpolants,prevIndex=interpolant.__cacheIndex,firstInactiveIndex=--this._nActiveControlInterpolants,lastActiveInterpolant=interpolants[firstInactiveIndex];interpolant.__cacheIndex=firstInactiveIndex,interpolants[firstInactiveIndex]=interpolant,lastActiveInterpolant.__cacheIndex=prevIndex,interpolants[prevIndex]=lastActiveInterpolant}clipAction(clip,optionalRoot,blendMode){const root=optionalRoot||this._root,rootUuid=root.uuid;let clipObject="string"==typeof clip?AnimationClip.findByName(root,clip):clip;const clipUuid=null!==clipObject?clipObject.uuid:clip,actionsForClip=this._actionsByClip[clipUuid];let prototypeAction=null;if(void 0===blendMode&&(blendMode=null!==clipObject?clipObject.blendMode:2500),void 0!==actionsForClip){const existingAction=actionsForClip.actionByRoot[rootUuid];if(void 0!==existingAction&&existingAction.blendMode===blendMode)return existingAction;prototypeAction=actionsForClip.knownActions[0],null===clipObject&&(clipObject=prototypeAction._clip)}if(null===clipObject)return null;const newAction=new AnimationAction(this,clipObject,optionalRoot,blendMode);return this._bindAction(newAction,prototypeAction),this._addInactiveAction(newAction,clipUuid,rootUuid),newAction}existingAction(clip,optionalRoot){const root=optionalRoot||this._root,rootUuid=root.uuid,clipObject="string"==typeof clip?AnimationClip.findByName(root,clip):clip,actionsForClip=this._actionsByClip[clipObject?clipObject.uuid:clip];return void 0!==actionsForClip&&actionsForClip.actionByRoot[rootUuid]||null}stopAllAction(){const actions=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)actions[i].stop();return this}update(deltaTime){const actions=this._actions,nActions=this._nActiveActions,time=this.time+=deltaTime*=this.timeScale,timeDirection=Math.sign(deltaTime),accuIndex=this._accuIndex^=1;for(let i=0;i!==nActions;++i)actions[i]._update(time,deltaTime,timeDirection,accuIndex);const bindings=this._bindings,nBindings=this._nActiveBindings;for(let i=0;i!==nBindings;++i)bindings[i].apply(accuIndex);return this}setTime(timeInSeconds){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(timeInSeconds)}getRoot(){return this._root}uncacheClip(clip){const actions=this._actions,clipUuid=clip.uuid,actionsByClip=this._actionsByClip,actionsForClip=actionsByClip[clipUuid];if(void 0!==actionsForClip){const actionsToRemove=actionsForClip.knownActions;for(let i=0,n=actionsToRemove.length;i!==n;++i){const action=actionsToRemove[i];this._deactivateAction(action);const cacheIndex=action._cacheIndex,lastInactiveAction=actions[actions.length-1];action._cacheIndex=null,action._byClipCacheIndex=null,lastInactiveAction._cacheIndex=cacheIndex,actions[cacheIndex]=lastInactiveAction,actions.pop(),this._removeInactiveBindingsForAction(action)}delete actionsByClip[clipUuid]}}uncacheRoot(root){const rootUuid=root.uuid,actionsByClip=this._actionsByClip;for(const clipUuid in actionsByClip){const action=actionsByClip[clipUuid].actionByRoot[rootUuid];void 0!==action&&(this._deactivateAction(action),this._removeInactiveAction(action))}const bindingByName=this._bindingsByRootAndName[rootUuid];if(void 0!==bindingByName)for(const trackName in bindingByName){const binding=bindingByName[trackName];binding.restoreOriginalState(),this._removeInactiveBinding(binding)}}uncacheAction(clip,optionalRoot){const action=this.existingAction(clip,optionalRoot);null!==action&&(this._deactivateAction(action),this._removeInactiveAction(action))}},"AnimationMixer");class Uniform{constructor(value){this.value=value}clone(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}__name(Uniform,"Uniform");let id=0;__name(class UniformsGroup extends(null){constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:id++}),this.name="",this.usage=35044,this.uniforms=[]}add(uniform){return this.uniforms.push(uniform),this}remove(uniform){const index=this.uniforms.indexOf(uniform);return-1!==index&&this.uniforms.splice(index,1),this}setName(name){return this.name=name,this}setUsage(value){return this.usage=value,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(source){this.name=source.name,this.usage=source.usage;const uniformsSource=source.uniforms;this.uniforms.length=0;for(let i=0,l=uniformsSource.length;i<l;i++)this.uniforms.push(uniformsSource[i].clone());return this}clone(){return(new this.constructor).copy(this)}},"UniformsGroup"),__name(class InstancedInterleavedBuffer extends(null){constructor(array,stride,meshPerAttribute=1){super(array,stride),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=meshPerAttribute}copy(source){return super.copy(source),this.meshPerAttribute=source.meshPerAttribute,this}clone(data){const ib=super.clone(data);return ib.meshPerAttribute=this.meshPerAttribute,ib}toJSON(data){const json=super.toJSON(data);return json.isInstancedInterleavedBuffer=!0,json.meshPerAttribute=this.meshPerAttribute,json}},"InstancedInterleavedBuffer"),__name(class GLBufferAttribute{constructor(buffer,type,itemSize,elementSize,count){this.isGLBufferAttribute=!0,this.buffer=buffer,this.type=type,this.itemSize=itemSize,this.elementSize=elementSize,this.count=count,this.version=0}set needsUpdate(value){!0===value&&this.version++}setBuffer(buffer){return this.buffer=buffer,this}setType(type,elementSize){return this.type=type,this.elementSize=elementSize,this}setItemSize(itemSize){return this.itemSize=itemSize,this}setCount(count){return this.count=count,this}},"GLBufferAttribute");class Raycaster{constructor(origin,direction,near=0,far=1/0){this.ray=new Ray(origin,direction),this.near=near,this.far=far,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(origin,direction){this.ray.set(origin,direction)}setFromCamera(coords,camera){camera.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(camera.matrixWorld),this.ray.direction.set(coords.x,coords.y,.5).unproject(camera).sub(this.ray.origin).normalize(),this.camera=camera):camera.isOrthographicCamera?(this.ray.origin.set(coords.x,coords.y,(camera.near+camera.far)/(camera.near-camera.far)).unproject(camera),this.ray.direction.set(0,0,-1).transformDirection(camera.matrixWorld),this.camera=camera):console.error("THREE.Raycaster: Unsupported camera type: "+camera.type)}intersectObject(object,recursive=!0,intersects2=[]){return intersectObject(object,this,intersects2,recursive),intersects2.sort(ascSort),intersects2}intersectObjects(objects,recursive=!0,intersects2=[]){for(let i=0,l=objects.length;i<l;i++)intersectObject(objects[i],this,intersects2,recursive);return intersects2.sort(ascSort),intersects2}}function ascSort(a,b){return a.distance-b.distance}function intersectObject(object,raycaster,intersects2,recursive){if(object.layers.test(raycaster.layers)&&object.raycast(raycaster,intersects2),!0===recursive){const children=object.children;for(let i=0,l=children.length;i<l;i++)intersectObject(children[i],raycaster,intersects2,!0)}}__name(Raycaster,"Raycaster"),__name(ascSort,"ascSort"),__name(intersectObject,"intersectObject");class Spherical{constructor(radius=1,phi=0,theta=0){return this.radius=radius,this.phi=phi,this.theta=theta,this}set(radius,phi,theta){return this.radius=radius,this.phi=phi,this.theta=theta,this}copy(other){return this.radius=other.radius,this.phi=other.phi,this.theta=other.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(v){return this.setFromCartesianCoords(v.x,v.y,v.z)}setFromCartesianCoords(x,y,z){return this.radius=Math.sqrt(x*x+y*y+z*z),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(x,z),this.phi=Math.acos(clamp(y/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}__name(Spherical,"Spherical"),__name(class Cylindrical{constructor(radius=1,theta=0,y=0){return this.radius=radius,this.theta=theta,this.y=y,this}set(radius,theta,y){return this.radius=radius,this.theta=theta,this.y=y,this}copy(other){return this.radius=other.radius,this.theta=other.theta,this.y=other.y,this}setFromVector3(v){return this.setFromCartesianCoords(v.x,v.y,v.z)}setFromCartesianCoords(x,y,z){return this.radius=Math.sqrt(x*x+z*z),this.theta=Math.atan2(x,z),this.y=y,this}clone(){return(new this.constructor).copy(this)}},"Cylindrical");const _vector$4=new Vector22;__name(class Box2{constructor(min=new Vector22(1/0,1/0),max=new Vector22(-1/0,-1/0)){this.isBox2=!0,this.min=min,this.max=max}set(min,max){return this.min.copy(min),this.max.copy(max),this}setFromPoints(points){this.makeEmpty();for(let i=0,il=points.length;i<il;i++)this.expandByPoint(points[i]);return this}setFromCenterAndSize(center,size){const halfSize=_vector$4.copy(size).multiplyScalar(.5);return this.min.copy(center).sub(halfSize),this.max.copy(center).add(halfSize),this}clone(){return(new this.constructor).copy(this)}copy(box){return this.min.copy(box.min),this.max.copy(box.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(target){return this.isEmpty()?target.set(0,0):target.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(target){return this.isEmpty()?target.set(0,0):target.subVectors(this.max,this.min)}expandByPoint(point){return this.min.min(point),this.max.max(point),this}expandByVector(vector){return this.min.sub(vector),this.max.add(vector),this}expandByScalar(scalar){return this.min.addScalar(-scalar),this.max.addScalar(scalar),this}containsPoint(point){return!(point.x<this.min.x||point.x>this.max.x||point.y<this.min.y||point.y>this.max.y)}containsBox(box){return this.min.x<=box.min.x&&box.max.x<=this.max.x&&this.min.y<=box.min.y&&box.max.y<=this.max.y}getParameter(point,target){return target.set((point.x-this.min.x)/(this.max.x-this.min.x),(point.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(box){return!(box.max.x<this.min.x||box.min.x>this.max.x||box.max.y<this.min.y||box.min.y>this.max.y)}clampPoint(point,target){return target.copy(point).clamp(this.min,this.max)}distanceToPoint(point){return _vector$4.copy(point).clamp(this.min,this.max).sub(point).length()}intersect(box){return this.min.max(box.min),this.max.min(box.max),this}union(box){return this.min.min(box.min),this.max.max(box.max),this}translate(offset){return this.min.add(offset),this.max.add(offset),this}equals(box){return box.min.equals(this.min)&&box.max.equals(this.max)}},"Box2");const _startP=new Vector32,_startEnd=new Vector32;__name(class Line3{constructor(start=new Vector32,end=new Vector32){this.start=start,this.end=end}set(start,end){return this.start.copy(start),this.end.copy(end),this}copy(line){return this.start.copy(line.start),this.end.copy(line.end),this}getCenter(target){return target.addVectors(this.start,this.end).multiplyScalar(.5)}delta(target){return target.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,target){return this.delta(target).multiplyScalar(t).add(this.start)}closestPointToPointParameter(point,clampToLine){_startP.subVectors(point,this.start),_startEnd.subVectors(this.end,this.start);const startEnd2=_startEnd.dot(_startEnd);let t=_startEnd.dot(_startP)/startEnd2;return clampToLine&&(t=clamp(t,0,1)),t}closestPointToPoint(point,clampToLine,target){const t=this.closestPointToPointParameter(point,clampToLine);return this.delta(target).multiplyScalar(t).add(this.start)}applyMatrix4(matrix){return this.start.applyMatrix4(matrix),this.end.applyMatrix4(matrix),this}equals(line){return line.start.equals(this.start)&&line.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},"Line3");const _vector$3=new Vector32;__name(class SpotLightHelper extends(null){constructor(light,color){super(),this.light=light,this.matrix=light.matrixWorld,this.matrixAutoUpdate=!1,this.color=color,this.type="SpotLightHelper";const geometry=new BufferGeometry,positions=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let i=0,j=1,l=32;i<l;i++,j++){const p1=i/l*Math.PI*2,p2=j/l*Math.PI*2;positions.push(Math.cos(p1),Math.sin(p1),1,Math.cos(p2),Math.sin(p2),1)}geometry.setAttribute("position",new Float32BufferAttribute(positions,3));const material=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(geometry,material),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const coneLength=this.light.distance?this.light.distance:1e3,coneWidth=coneLength*Math.tan(this.light.angle);this.cone.scale.set(coneWidth,coneWidth,coneLength),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},"SpotLightHelper");const _vector$2=new Vector32,_boneMatrix=new Matrix42,_matrixWorldInv=new Matrix42;function getBoneList(object){const boneList=[];!0===object.isBone&&boneList.push(object);for(let i=0;i<object.children.length;i++)boneList.push.apply(boneList,getBoneList(object.children[i]));return boneList}__name(class SkeletonHelper extends(null){constructor(object){const bones=getBoneList(object),geometry=new BufferGeometry,vertices=[],colors=[],color1=new Color(0,0,1),color2=new Color(0,1,0);for(let i=0;i<bones.length;i++){const bone=bones[i];bone.parent&&bone.parent.isBone&&(vertices.push(0,0,0),vertices.push(0,0,0),colors.push(color1.r,color1.g,color1.b),colors.push(color2.r,color2.g,color2.b))}geometry.setAttribute("position",new Float32BufferAttribute(vertices,3)),geometry.setAttribute("color",new Float32BufferAttribute(colors,3)),super(geometry,new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=object,this.bones=bones,this.matrix=object.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(force){const bones=this.bones,geometry=this.geometry,position=geometry.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let i=0,j=0;i<bones.length;i++){const bone=bones[i];bone.parent&&bone.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,bone.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),position.setXYZ(j,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,bone.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),position.setXYZ(j+1,_vector$2.x,_vector$2.y,_vector$2.z),j+=2)}geometry.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(force)}dispose(){this.geometry.dispose(),this.material.dispose()}},"SkeletonHelper"),__name(getBoneList,"getBoneList"),__name(class PointLightHelper extends(null){constructor(light,sphereSize,color){super(new SphereGeometry(sphereSize,4,2),new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1})),this.light=light,this.color=color,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},"PointLightHelper");const _vector$1=new Vector32,_color1=new Color,_color2=new Color;__name(class HemisphereLightHelper extends(null){constructor(light,size,color){super(),this.light=light,this.matrix=light.matrixWorld,this.matrixAutoUpdate=!1,this.color=color,this.type="HemisphereLightHelper";const geometry=new OctahedronGeometry(size);geometry.rotateY(.5*Math.PI),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const position=geometry.getAttribute("position"),colors=new Float32Array(3*position.count);geometry.setAttribute("color",new BufferAttribute(colors,3)),this.add(new Mesh2(geometry,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const mesh=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const colors=mesh.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let i=0,l=colors.count;i<l;i++){const color=i<l/2?_color1:_color2;colors.setXYZ(i,color.r,color.g,color.b)}colors.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),mesh.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}},"HemisphereLightHelper"),__name(class GridHelper extends(null){constructor(size=10,divisions=10,color1=4473924,color2=8947848){color1=new Color(color1),color2=new Color(color2);const center=divisions/2,step=size/divisions,halfSize=size/2,vertices=[],colors=[];for(let i=0,j=0,k=-halfSize;i<=divisions;i++,k+=step){vertices.push(-halfSize,0,k,halfSize,0,k),vertices.push(k,0,-halfSize,k,0,halfSize);const color=i===center?color1:color2;color.toArray(colors,j),j+=3,color.toArray(colors,j),j+=3,color.toArray(colors,j),j+=3,color.toArray(colors,j),j+=3}const geometry=new BufferGeometry;geometry.setAttribute("position",new Float32BufferAttribute(vertices,3)),geometry.setAttribute("color",new Float32BufferAttribute(colors,3)),super(geometry,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},"GridHelper"),__name(class PolarGridHelper extends(null){constructor(radius=10,sectors=16,rings=8,divisions=64,color1=4473924,color2=8947848){color1=new Color(color1),color2=new Color(color2);const vertices=[],colors=[];if(sectors>1)for(let i=0;i<sectors;i++){const v=i/sectors*(2*Math.PI),x=Math.sin(v)*radius,z=Math.cos(v)*radius;vertices.push(0,0,0),vertices.push(x,0,z);const color=1&i?color1:color2;colors.push(color.r,color.g,color.b),colors.push(color.r,color.g,color.b)}for(let i=0;i<rings;i++){const color=1&i?color1:color2,r=radius-radius/rings*i;for(let j=0;j<divisions;j++){let v=j/divisions*(2*Math.PI),x=Math.sin(v)*r,z=Math.cos(v)*r;vertices.push(x,0,z),colors.push(color.r,color.g,color.b),v=(j+1)/divisions*(2*Math.PI),x=Math.sin(v)*r,z=Math.cos(v)*r,vertices.push(x,0,z),colors.push(color.r,color.g,color.b)}}const geometry=new BufferGeometry;geometry.setAttribute("position",new Float32BufferAttribute(vertices,3)),geometry.setAttribute("color",new Float32BufferAttribute(colors,3)),super(geometry,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},"PolarGridHelper");const _v1=new Vector32,_v2=new Vector32,_v3=new Vector32;__name(class DirectionalLightHelper extends(null){constructor(light,size,color){super(),this.light=light,this.matrix=light.matrixWorld,this.matrixAutoUpdate=!1,this.color=color,this.type="DirectionalLightHelper",void 0===size&&(size=1);let geometry=new BufferGeometry;geometry.setAttribute("position",new Float32BufferAttribute([-size,size,0,size,size,0,size,-size,0,-size,-size,0,-size,size,0],3));const material=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(geometry,material),this.add(this.lightPlane),geometry=new BufferGeometry,geometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(geometry,material),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}},"DirectionalLightHelper");const _vector=new Vector32,_camera=new Camera;function setPoint(point,pointMap,geometry,camera,x,y,z){_vector.set(x,y,z).unproject(camera);const points=pointMap[point];if(void 0!==points){const position=geometry.getAttribute("position");for(let i=0,l=points.length;i<l;i++)position.setXYZ(points[i],_vector.x,_vector.y,_vector.z)}}__name(class CameraHelper extends(null){constructor(camera){const geometry=new BufferGeometry,material=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),vertices=[],colors=[],pointMap={};function addLine(a,b){addPoint(a),addPoint(b)}function addPoint(id2){vertices.push(0,0,0),colors.push(0,0,0),void 0===pointMap[id2]&&(pointMap[id2]=[]),pointMap[id2].push(vertices.length/3-1)}addLine("n1","n2"),addLine("n2","n4"),addLine("n4","n3"),addLine("n3","n1"),addLine("f1","f2"),addLine("f2","f4"),addLine("f4","f3"),addLine("f3","f1"),addLine("n1","f1"),addLine("n2","f2"),addLine("n3","f3"),addLine("n4","f4"),addLine("p","n1"),addLine("p","n2"),addLine("p","n3"),addLine("p","n4"),addLine("u1","u2"),addLine("u2","u3"),addLine("u3","u1"),addLine("c","t"),addLine("p","c"),addLine("cn1","cn2"),addLine("cn3","cn4"),addLine("cf1","cf2"),addLine("cf3","cf4"),__name(addLine,"addLine"),__name(addPoint,"addPoint"),geometry.setAttribute("position",new Float32BufferAttribute(vertices,3)),geometry.setAttribute("color",new Float32BufferAttribute(colors,3)),super(geometry,material),this.type="CameraHelper",this.camera=camera,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=camera.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=pointMap,this.update();const colorFrustum=new Color(16755200),colorCone=new Color(16711680),colorUp=new Color(43775),colorTarget=new Color(16777215),colorCross=new Color(3355443);this.setColors(colorFrustum,colorCone,colorUp,colorTarget,colorCross)}setColors(frustum,cone,up,target,cross){const colorAttribute=this.geometry.getAttribute("color");colorAttribute.setXYZ(0,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(1,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(2,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(3,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(4,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(5,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(6,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(7,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(8,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(9,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(10,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(11,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(12,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(13,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(14,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(15,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(16,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(17,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(18,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(19,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(20,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(21,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(22,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(23,frustum.r,frustum.g,frustum.b),colorAttribute.setXYZ(24,cone.r,cone.g,cone.b),colorAttribute.setXYZ(25,cone.r,cone.g,cone.b),colorAttribute.setXYZ(26,cone.r,cone.g,cone.b),colorAttribute.setXYZ(27,cone.r,cone.g,cone.b),colorAttribute.setXYZ(28,cone.r,cone.g,cone.b),colorAttribute.setXYZ(29,cone.r,cone.g,cone.b),colorAttribute.setXYZ(30,cone.r,cone.g,cone.b),colorAttribute.setXYZ(31,cone.r,cone.g,cone.b),colorAttribute.setXYZ(32,up.r,up.g,up.b),colorAttribute.setXYZ(33,up.r,up.g,up.b),colorAttribute.setXYZ(34,up.r,up.g,up.b),colorAttribute.setXYZ(35,up.r,up.g,up.b),colorAttribute.setXYZ(36,up.r,up.g,up.b),colorAttribute.setXYZ(37,up.r,up.g,up.b),colorAttribute.setXYZ(38,target.r,target.g,target.b),colorAttribute.setXYZ(39,target.r,target.g,target.b),colorAttribute.setXYZ(40,cross.r,cross.g,cross.b),colorAttribute.setXYZ(41,cross.r,cross.g,cross.b),colorAttribute.setXYZ(42,cross.r,cross.g,cross.b),colorAttribute.setXYZ(43,cross.r,cross.g,cross.b),colorAttribute.setXYZ(44,cross.r,cross.g,cross.b),colorAttribute.setXYZ(45,cross.r,cross.g,cross.b),colorAttribute.setXYZ(46,cross.r,cross.g,cross.b),colorAttribute.setXYZ(47,cross.r,cross.g,cross.b),colorAttribute.setXYZ(48,cross.r,cross.g,cross.b),colorAttribute.setXYZ(49,cross.r,cross.g,cross.b),colorAttribute.needsUpdate=!0}update(){const geometry=this.geometry,pointMap=this.pointMap;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",pointMap,geometry,_camera,0,0,-1),setPoint("t",pointMap,geometry,_camera,0,0,1),setPoint("n1",pointMap,geometry,_camera,-1,-1,-1),setPoint("n2",pointMap,geometry,_camera,1,-1,-1),setPoint("n3",pointMap,geometry,_camera,-1,1,-1),setPoint("n4",pointMap,geometry,_camera,1,1,-1),setPoint("f1",pointMap,geometry,_camera,-1,-1,1),setPoint("f2",pointMap,geometry,_camera,1,-1,1),setPoint("f3",pointMap,geometry,_camera,-1,1,1),setPoint("f4",pointMap,geometry,_camera,1,1,1),setPoint("u1",pointMap,geometry,_camera,.7,1.1,-1),setPoint("u2",pointMap,geometry,_camera,-.7,1.1,-1),setPoint("u3",pointMap,geometry,_camera,0,2,-1),setPoint("cf1",pointMap,geometry,_camera,-1,0,1),setPoint("cf2",pointMap,geometry,_camera,1,0,1),setPoint("cf3",pointMap,geometry,_camera,0,-1,1),setPoint("cf4",pointMap,geometry,_camera,0,1,1),setPoint("cn1",pointMap,geometry,_camera,-1,0,-1),setPoint("cn2",pointMap,geometry,_camera,1,0,-1),setPoint("cn3",pointMap,geometry,_camera,0,-1,-1),setPoint("cn4",pointMap,geometry,_camera,0,1,-1),geometry.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},"CameraHelper"),__name(setPoint,"setPoint");const _box=new Box3;__name(class BoxHelper extends(null){constructor(object,color=16776960){const indices=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),positions=new Float32Array(24),geometry=new BufferGeometry;geometry.setIndex(new BufferAttribute(indices,1)),geometry.setAttribute("position",new BufferAttribute(positions,3)),super(geometry,new LineBasicMaterial({color,toneMapped:!1})),this.object=object,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(object){if(void 0!==object&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&_box.setFromObject(this.object),_box.isEmpty())return;const min=_box.min,max=_box.max,position=this.geometry.attributes.position,array=position.array;array[0]=max.x,array[1]=max.y,array[2]=max.z,array[3]=min.x,array[4]=max.y,array[5]=max.z,array[6]=min.x,array[7]=min.y,array[8]=max.z,array[9]=max.x,array[10]=min.y,array[11]=max.z,array[12]=max.x,array[13]=max.y,array[14]=min.z,array[15]=min.x,array[16]=max.y,array[17]=min.z,array[18]=min.x,array[19]=min.y,array[20]=min.z,array[21]=max.x,array[22]=min.y,array[23]=min.z,position.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(object){return this.object=object,this.update(),this}copy(source,recursive){return super.copy(source,recursive),this.object=source.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},"BoxHelper"),__name(class Box3Helper extends(null){constructor(box,color=16776960){const indices=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),geometry=new BufferGeometry;geometry.setIndex(new BufferAttribute(indices,1)),geometry.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(geometry,new LineBasicMaterial({color,toneMapped:!1})),this.box=box,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(force){const box=this.box;box.isEmpty()||(box.getCenter(this.position),box.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(force))}dispose(){this.geometry.dispose(),this.material.dispose()}},"Box3Helper"),__name(class PlaneHelper extends(null){constructor(plane,size=1,hex=16776960){const color=hex,geometry=new BufferGeometry;geometry.setAttribute("position",new Float32BufferAttribute([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),geometry.computeBoundingSphere(),super(geometry,new LineBasicMaterial({color,toneMapped:!1})),this.type="PlaneHelper",this.plane=plane,this.size=size;const geometry2=new BufferGeometry;geometry2.setAttribute("position",new Float32BufferAttribute([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),geometry2.computeBoundingSphere(),this.add(new Mesh2(geometry2,new MeshBasicMaterial({color,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(force){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(force)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},"PlaneHelper");const _axis=new Vector32;let _lineGeometry,_coneGeometry;__name(class ArrowHelper extends(null){constructor(dir=new Vector32(0,0,1),origin=new Vector32(0,0,0),length=1,color=16776960,headLength=.2*length,headWidth=.2*headLength){super(),this.type="ArrowHelper",void 0===_lineGeometry&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry2(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(origin),this.line=new Line(_lineGeometry,new LineBasicMaterial({color,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh2(_coneGeometry,new MeshBasicMaterial({color,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(dir),this.setLength(length,headLength,headWidth)}setDirection(dir){if(dir.y>.99999)this.quaternion.set(0,0,0,1);else if(dir.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(dir.z,0,-dir.x).normalize();const radians=Math.acos(dir.y);this.quaternion.setFromAxisAngle(_axis,radians)}}setLength(length,headLength=.2*length,headWidth=.2*headLength){this.line.scale.set(1,Math.max(1e-4,length-headLength),1),this.line.updateMatrix(),this.cone.scale.set(headWidth,headLength,headWidth),this.cone.position.y=length,this.cone.updateMatrix()}setColor(color){this.line.material.color.set(color),this.cone.material.color.set(color)}copy(source){return super.copy(source,!1),this.line.copy(source.line),this.cone.copy(source.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},"ArrowHelper"),__name(class AxesHelper extends(null){constructor(size=1){const vertices=[0,0,0,size,0,0,0,0,0,0,size,0,0,0,0,0,0,size],geometry=new BufferGeometry;geometry.setAttribute("position",new Float32BufferAttribute(vertices,3)),geometry.setAttribute("color",new Float32BufferAttribute([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(geometry,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(xAxisColor,yAxisColor,zAxisColor){const color=new Color,array=this.geometry.attributes.color.array;return color.set(xAxisColor),color.toArray(array,0),color.toArray(array,3),color.set(yAxisColor),color.toArray(array,6),color.toArray(array,9),color.set(zAxisColor),color.toArray(array,12),color.toArray(array,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},"AxesHelper"),__name(class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(x,y){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(x,y),this}lineTo(x,y){return this.currentPath.lineTo(x,y),this}quadraticCurveTo(aCPx,aCPy,aX,aY){return this.currentPath.quadraticCurveTo(aCPx,aCPy,aX,aY),this}bezierCurveTo(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY){return this.currentPath.bezierCurveTo(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY),this}splineThru(pts){return this.currentPath.splineThru(pts),this}toShapes(isCCW){function toShapesNoHoles(inSubpaths){const shapes2=[];for(let i=0,l=inSubpaths.length;i<l;i++){const tmpPath2=inSubpaths[i],tmpShape2=new Shape;tmpShape2.curves=tmpPath2.curves,shapes2.push(tmpShape2)}return shapes2}function isPointInsidePolygon(inPt,inPolygon){const polyLen=inPolygon.length;let inside=!1;for(let p=polyLen-1,q=0;q<polyLen;p=q++){let edgeLowPt=inPolygon[p],edgeHighPt=inPolygon[q],edgeDx=edgeHighPt.x-edgeLowPt.x,edgeDy=edgeHighPt.y-edgeLowPt.y;if(Math.abs(edgeDy)>Number.EPSILON){if(edgeDy<0&&(edgeLowPt=inPolygon[q],edgeDx=-edgeDx,edgeHighPt=inPolygon[p],edgeDy=-edgeDy),inPt.y<edgeLowPt.y||inPt.y>edgeHighPt.y)continue;if(inPt.y===edgeLowPt.y){if(inPt.x===edgeLowPt.x)return!0}else{const perpEdge=edgeDy*(inPt.x-edgeLowPt.x)-edgeDx*(inPt.y-edgeLowPt.y);if(0===perpEdge)return!0;if(perpEdge<0)continue;inside=!inside}}else{if(inPt.y!==edgeLowPt.y)continue;if(edgeHighPt.x<=inPt.x&&inPt.x<=edgeLowPt.x||edgeLowPt.x<=inPt.x&&inPt.x<=edgeHighPt.x)return!0}}return inside}__name(toShapesNoHoles,"toShapesNoHoles"),__name(isPointInsidePolygon,"isPointInsidePolygon");const isClockWise=ShapeUtils.isClockWise,subPaths=this.subPaths;if(0===subPaths.length)return[];let solid,tmpPath,tmpShape;const shapes=[];if(1===subPaths.length)return tmpPath=subPaths[0],tmpShape=new Shape,tmpShape.curves=tmpPath.curves,shapes.push(tmpShape),shapes;let holesFirst=!isClockWise(subPaths[0].getPoints());holesFirst=isCCW?!holesFirst:holesFirst;const betterShapeHoles=[],newShapes=[];let tmpPoints,tmpHoles,newShapeHoles=[],mainIdx=0;newShapes[mainIdx]=void 0,newShapeHoles[mainIdx]=[];for(let i=0,l=subPaths.length;i<l;i++)tmpPath=subPaths[i],tmpPoints=tmpPath.getPoints(),solid=isClockWise(tmpPoints),solid=isCCW?!solid:solid,solid?(!holesFirst&&newShapes[mainIdx]&&mainIdx++,newShapes[mainIdx]={s:new Shape,p:tmpPoints},newShapes[mainIdx].s.curves=tmpPath.curves,holesFirst&&mainIdx++,newShapeHoles[mainIdx]=[]):newShapeHoles[mainIdx].push({h:tmpPath,p:tmpPoints[0]});if(!newShapes[0])return toShapesNoHoles(subPaths);if(newShapes.length>1){let ambiguous=!1,toChange=0;for(let sIdx=0,sLen=newShapes.length;sIdx<sLen;sIdx++)betterShapeHoles[sIdx]=[];for(let sIdx=0,sLen=newShapes.length;sIdx<sLen;sIdx++){const sho=newShapeHoles[sIdx];for(let hIdx=0;hIdx<sho.length;hIdx++){const ho=sho[hIdx];let hole_unassigned=!0;for(let s2Idx=0;s2Idx<newShapes.length;s2Idx++)isPointInsidePolygon(ho.p,newShapes[s2Idx].p)&&(sIdx!==s2Idx&&toChange++,hole_unassigned?(hole_unassigned=!1,betterShapeHoles[s2Idx].push(ho)):ambiguous=!0);hole_unassigned&&betterShapeHoles[sIdx].push(ho)}}toChange>0&&!1===ambiguous&&(newShapeHoles=betterShapeHoles)}for(let i=0,il=newShapes.length;i<il;i++){tmpShape=newShapes[i].s,shapes.push(tmpShape),tmpHoles=newShapeHoles[i];for(let j=0,jl=tmpHoles.length;j<jl;j++)tmpShape.holes.push(tmpHoles[j].h)}return shapes}},"ShapePath");const _tables=_generateTables();function _generateTables(){const buffer=new ArrayBuffer(4),floatView=new Float32Array(buffer),uint32View=new Uint32Array(buffer),baseTable=new Uint32Array(512),shiftTable=new Uint32Array(512);for(let i=0;i<256;++i){const e=i-127;e<-27?(baseTable[i]=0,baseTable[256|i]=32768,shiftTable[i]=24,shiftTable[256|i]=24):e<-14?(baseTable[i]=1024>>-e-14,baseTable[256|i]=1024>>-e-14|32768,shiftTable[i]=-e-1,shiftTable[256|i]=-e-1):e<=15?(baseTable[i]=e+15<<10,baseTable[256|i]=e+15<<10|32768,shiftTable[i]=13,shiftTable[256|i]=13):e<128?(baseTable[i]=31744,baseTable[256|i]=64512,shiftTable[i]=24,shiftTable[256|i]=24):(baseTable[i]=31744,baseTable[256|i]=64512,shiftTable[i]=13,shiftTable[256|i]=13)}const mantissaTable=new Uint32Array(2048),exponentTable=new Uint32Array(64),offsetTable=new Uint32Array(64);for(let i=1;i<1024;++i){let m=i<<13,e=0;for(;!(8388608&m);)m<<=1,e-=8388608;m&=-8388609,e+=947912704,mantissaTable[i]=m|e}for(let i=1024;i<2048;++i)mantissaTable[i]=939524096+(i-1024<<13);for(let i=1;i<31;++i)exponentTable[i]=i<<23;exponentTable[31]=1199570944,exponentTable[32]=2147483648;for(let i=33;i<63;++i)exponentTable[i]=2147483648+(i-32<<23);exponentTable[63]=3347054592;for(let i=1;i<64;++i)32!==i&&(offsetTable[i]=1024);return{floatView,uint32View,baseTable,shiftTable,mantissaTable,exponentTable,offsetTable}}__name(_generateTables,"_generateTables"),__name(function toHalfFloat(val){Math.abs(val)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),val=clamp(val,-65504,65504),_tables.floatView[0]=val;const f=_tables.uint32View[0],e=f>>23&511;return _tables.baseTable[e]+((8388607&f)>>_tables.shiftTable[e])},"toHalfFloat"),__name(function fromHalfFloat(val){const m=val>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[m]+(1023&val)]+_tables.exponentTable[m],_tables.floatView[0]},"fromHalfFloat"),__name(function ImmediateRenderObject(){console.error("THREE.ImmediateRenderObject has been removed.")},"ImmediateRenderObject"),__name(class WebGLMultisampleRenderTarget extends(null){constructor(width,height,options){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(width,height,options),this.samples=4}},"WebGLMultisampleRenderTarget"),__name(class DataTexture2DArray extends(null){constructor(data,width,height,depth){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(data,width,height,depth)}},"DataTexture2DArray"),__name(class DataTexture3D extends(null){constructor(data,width,height,depth){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(data,width,height,depth)}},"DataTexture3D"),__name(class BoxBufferGeometry extends(null){constructor(width,height,depth,widthSegments,heightSegments,depthSegments){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(width,height,depth,widthSegments,heightSegments,depthSegments)}},"BoxBufferGeometry"),__name(class CapsuleBufferGeometry extends(null){constructor(radius,length,capSegments,radialSegments){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(radius,length,capSegments,radialSegments)}},"CapsuleBufferGeometry"),__name(class CircleBufferGeometry extends(null){constructor(radius,segments,thetaStart,thetaLength){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(radius,segments,thetaStart,thetaLength)}},"CircleBufferGeometry"),__name(class ConeBufferGeometry extends(null){constructor(radius,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(radius,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength)}},"ConeBufferGeometry"),__name(class CylinderBufferGeometry extends(null){constructor(radiusTop,radiusBottom,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(radiusTop,radiusBottom,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength)}},"CylinderBufferGeometry"),__name(class DodecahedronBufferGeometry extends(null){constructor(radius,detail){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(radius,detail)}},"DodecahedronBufferGeometry"),__name(class ExtrudeBufferGeometry extends(null){constructor(shapes,options){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(shapes,options)}},"ExtrudeBufferGeometry"),__name(class IcosahedronBufferGeometry extends(null){constructor(radius,detail){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(radius,detail)}},"IcosahedronBufferGeometry"),__name(class LatheBufferGeometry extends(null){constructor(points,segments,phiStart,phiLength){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(points,segments,phiStart,phiLength)}},"LatheBufferGeometry"),__name(class OctahedronBufferGeometry extends(null){constructor(radius,detail){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(radius,detail)}},"OctahedronBufferGeometry"),__name(class PlaneBufferGeometry extends(null){constructor(width,height,widthSegments,heightSegments){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(width,height,widthSegments,heightSegments)}},"PlaneBufferGeometry"),__name(class PolyhedronBufferGeometry extends(null){constructor(vertices,indices,radius,detail){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(vertices,indices,radius,detail)}},"PolyhedronBufferGeometry"),__name(class RingBufferGeometry extends(null){constructor(innerRadius,outerRadius,thetaSegments,phiSegments,thetaStart,thetaLength){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(innerRadius,outerRadius,thetaSegments,phiSegments,thetaStart,thetaLength)}},"RingBufferGeometry"),__name(class ShapeBufferGeometry extends(null){constructor(shapes,curveSegments){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(shapes,curveSegments)}},"ShapeBufferGeometry"),__name(class SphereBufferGeometry extends(null){constructor(radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength)}},"SphereBufferGeometry"),__name(class TetrahedronBufferGeometry extends(null){constructor(radius,detail){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(radius,detail)}},"TetrahedronBufferGeometry"),__name(class TorusBufferGeometry extends(null){constructor(radius,tube,radialSegments,tubularSegments,arc){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(radius,tube,radialSegments,tubularSegments,arc)}},"TorusBufferGeometry"),__name(class TorusKnotBufferGeometry extends(null){constructor(radius,tube,tubularSegments,radialSegments,p,q){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(radius,tube,tubularSegments,radialSegments,p,q)}},"TorusKnotBufferGeometry"),__name(class TubeBufferGeometry extends(null){constructor(path,tubularSegments,radius,radialSegments,closed){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(path,tubularSegments,radius,radialSegments,closed)}},"TubeBufferGeometry"),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION)},9018:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>EffectComposer});var three_module=__webpack_require__(6682),CopyShader=__webpack_require__(9097),ShaderPass=__webpack_require__(9263),Pass=__webpack_require__(8648);class MaskPass extends Pass.w{constructor(scene,camera){super(),this.scene=scene,this.camera=camera,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(renderer,writeBuffer,readBuffer){const context=renderer.getContext(),state=renderer.state;let writeValue,clearValue;state.buffers.color.setMask(!1),state.buffers.depth.setMask(!1),state.buffers.color.setLocked(!0),state.buffers.depth.setLocked(!0),this.inverse?(writeValue=0,clearValue=1):(writeValue=1,clearValue=0),state.buffers.stencil.setTest(!0),state.buffers.stencil.setOp(context.REPLACE,context.REPLACE,context.REPLACE),state.buffers.stencil.setFunc(context.ALWAYS,writeValue,4294967295),state.buffers.stencil.setClear(clearValue),state.buffers.stencil.setLocked(!0),renderer.setRenderTarget(readBuffer),this.clear&&renderer.clear(),renderer.render(this.scene,this.camera),renderer.setRenderTarget(writeBuffer),this.clear&&renderer.clear(),renderer.render(this.scene,this.camera),state.buffers.color.setLocked(!1),state.buffers.depth.setLocked(!1),state.buffers.stencil.setLocked(!1),state.buffers.stencil.setFunc(context.EQUAL,1,4294967295),state.buffers.stencil.setOp(context.KEEP,context.KEEP,context.KEEP),state.buffers.stencil.setLocked(!0)}}__name(MaskPass,"MaskPass");class ClearMaskPass extends Pass.w{constructor(){super(),this.needsSwap=!1}render(renderer){renderer.state.buffers.stencil.setLocked(!1),renderer.state.buffers.stencil.setTest(!1)}}__name(ClearMaskPass,"ClearMaskPass");class EffectComposer{constructor(renderer,renderTarget){if(this.renderer=renderer,void 0===renderTarget){const size=renderer.getSize(new three_module.FM8);this._pixelRatio=renderer.getPixelRatio(),this._width=size.width,this._height=size.height,(renderTarget=new three_module.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=renderTarget.width,this._height=renderTarget.height;this.renderTarget1=renderTarget,this.renderTarget2=renderTarget.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ShaderPass.T(CopyShader.C),this.clock=new three_module.SUY}swapBuffers(){const tmp=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=tmp}addPass(pass){this.passes.push(pass),pass.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(pass,index){this.passes.splice(index,0,pass),pass.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(pass){const index=this.passes.indexOf(pass);-1!==index&&this.passes.splice(index,1)}isLastEnabledPass(passIndex){for(let i=passIndex+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}render(deltaTime){void 0===deltaTime&&(deltaTime=this.clock.getDelta());const currentRenderTarget=this.renderer.getRenderTarget();let maskActive=!1;for(let i=0,il=this.passes.length;i<il;i++){const pass=this.passes[i];if(!1!==pass.enabled){if(pass.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),pass.render(this.renderer,this.writeBuffer,this.readBuffer,deltaTime,maskActive),pass.needsSwap){if(maskActive){const context=this.renderer.getContext(),stencil=this.renderer.state.buffers.stencil;stencil.setFunc(context.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,deltaTime),stencil.setFunc(context.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==MaskPass&&(pass instanceof MaskPass?maskActive=!0:pass instanceof ClearMaskPass&&(maskActive=!1))}}this.renderer.setRenderTarget(currentRenderTarget)}reset(renderTarget){if(void 0===renderTarget){const size=this.renderer.getSize(new three_module.FM8);this._pixelRatio=this.renderer.getPixelRatio(),this._width=size.width,this._height=size.height,(renderTarget=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=renderTarget,this.renderTarget2=renderTarget.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(width,height){this._width=width,this._height=height;const effectiveWidth=this._width*this._pixelRatio,effectiveHeight=this._height*this._pixelRatio;this.renderTarget1.setSize(effectiveWidth,effectiveHeight),this.renderTarget2.setSize(effectiveWidth,effectiveHeight);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(effectiveWidth,effectiveHeight)}setPixelRatio(pixelRatio){this._pixelRatio=pixelRatio,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}__name(EffectComposer,"EffectComposer")},8648:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>FullScreenQuad,w:()=>Pass});var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6682);class Pass{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}__name(Pass,"Pass");const _camera=new three__WEBPACK_IMPORTED_MODULE_0__.iKG(-1,1,1,-1,0,1),_geometry=new three__WEBPACK_IMPORTED_MODULE_0__.u9r;_geometry.setAttribute("position",new three__WEBPACK_IMPORTED_MODULE_0__.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),_geometry.setAttribute("uv",new three__WEBPACK_IMPORTED_MODULE_0__.a$l([0,2,0,0,2,0],2));class FullScreenQuad{constructor(material){this._mesh=new three__WEBPACK_IMPORTED_MODULE_0__.Kj0(_geometry,material)}dispose(){this._mesh.geometry.dispose()}render(renderer){renderer.render(this._mesh,_camera)}get material(){return this._mesh.material}set material(value){this._mesh.material=value}}__name(FullScreenQuad,"FullScreenQuad")},321:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>RenderPass});var three__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6682),_Pass_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8648);class RenderPass extends _Pass_js__WEBPACK_IMPORTED_MODULE_0__.w{constructor(scene,camera,overrideMaterial,clearColor,clearAlpha){super(),this.scene=scene,this.camera=camera,this.overrideMaterial=overrideMaterial,this.clearColor=clearColor,this.clearAlpha=void 0!==clearAlpha?clearAlpha:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new three__WEBPACK_IMPORTED_MODULE_1__.Ilk}render(renderer,writeBuffer,readBuffer){const oldAutoClear=renderer.autoClear;let oldClearAlpha,oldOverrideMaterial;renderer.autoClear=!1,void 0!==this.overrideMaterial&&(oldOverrideMaterial=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(renderer.getClearColor(this._oldClearColor),oldClearAlpha=renderer.getClearAlpha(),renderer.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&renderer.clearDepth(),renderer.setRenderTarget(this.renderToScreen?null:readBuffer),this.clear&&renderer.clear(renderer.autoClearColor,renderer.autoClearDepth,renderer.autoClearStencil),renderer.render(this.scene,this.camera),this.clearColor&&renderer.setClearColor(this._oldClearColor,oldClearAlpha),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=oldOverrideMaterial),renderer.autoClear=oldAutoClear}}__name(RenderPass,"RenderPass")},9263:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>ShaderPass});var three__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6682),_Pass_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8648);class ShaderPass extends _Pass_js__WEBPACK_IMPORTED_MODULE_0__.w{constructor(shader,textureID){super(),this.textureID=void 0!==textureID?textureID:"tDiffuse",shader instanceof three__WEBPACK_IMPORTED_MODULE_1__.jyz?(this.uniforms=shader.uniforms,this.material=shader):shader&&(this.uniforms=three__WEBPACK_IMPORTED_MODULE_1__.rDY.clone(shader.uniforms),this.material=new three__WEBPACK_IMPORTED_MODULE_1__.jyz({defines:Object.assign({},shader.defines),uniforms:this.uniforms,vertexShader:shader.vertexShader,fragmentShader:shader.fragmentShader})),this.fsQuad=new _Pass_js__WEBPACK_IMPORTED_MODULE_0__.T(this.material)}render(renderer,writeBuffer,readBuffer){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=readBuffer.texture),this.fsQuad.material=this.material,this.renderToScreen?(renderer.setRenderTarget(null),this.fsQuad.render(renderer)):(renderer.setRenderTarget(writeBuffer),this.clear&&renderer.clear(renderer.autoClearColor,renderer.autoClearDepth,renderer.autoClearStencil),this.fsQuad.render(renderer))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}__name(ShaderPass,"ShaderPass")},4882:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>UnrealBloomPass});var three_module=__webpack_require__(6682),Pass=__webpack_require__(8648),CopyShader=__webpack_require__(9097);const LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new three_module.Ilk(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class UnrealBloomPass extends Pass.w{constructor(resolution,strength,radius,threshold){super(),this.strength=void 0!==strength?strength:1,this.radius=radius,this.threshold=threshold,this.resolution=void 0!==resolution?new three_module.FM8(resolution.x,resolution.y):new three_module.FM8(256,256),this.clearColor=new three_module.Ilk(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let resx=Math.round(this.resolution.x/2),resy=Math.round(this.resolution.y/2);this.renderTargetBright=new three_module.dd2(resx,resy),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let i=0;i<this.nMips;i++){const renderTargetHorizonal=new three_module.dd2(resx,resy);renderTargetHorizonal.texture.name="UnrealBloomPass.h"+i,renderTargetHorizonal.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(renderTargetHorizonal);const renderTargetVertical=new three_module.dd2(resx,resy);renderTargetVertical.texture.name="UnrealBloomPass.v"+i,renderTargetVertical.texture.generateMipmaps=!1,this.renderTargetsVertical.push(renderTargetVertical),resx=Math.round(resx/2),resy=Math.round(resy/2)}const highPassShader=LuminosityHighPassShader;this.highPassUniforms=three_module.rDY.clone(highPassShader.uniforms),this.highPassUniforms.luminosityThreshold.value=threshold,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new three_module.jyz({uniforms:this.highPassUniforms,vertexShader:highPassShader.vertexShader,fragmentShader:highPassShader.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const kernelSizeArray=[3,5,7,9,11];resx=Math.round(this.resolution.x/2),resy=Math.round(this.resolution.y/2);for(let i=0;i<this.nMips;i++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(kernelSizeArray[i])),this.separableBlurMaterials[i].uniforms.texSize.value=new three_module.FM8(resx,resy),resx=Math.round(resx/2),resy=Math.round(resy/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=strength,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new three_module.Pa4(1,1,1),new three_module.Pa4(1,1,1),new three_module.Pa4(1,1,1),new three_module.Pa4(1,1,1),new three_module.Pa4(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const copyShader=CopyShader.C;this.copyUniforms=three_module.rDY.clone(copyShader.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new three_module.jyz({uniforms:this.copyUniforms,vertexShader:copyShader.vertexShader,fragmentShader:copyShader.fragmentShader,blending:three_module.WMw,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new three_module.Ilk,this.oldClearAlpha=1,this.basic=new three_module.vBJ,this.fsQuad=new Pass.T(null)}dispose(){for(let i=0;i<this.renderTargetsHorizontal.length;i++)this.renderTargetsHorizontal[i].dispose();for(let i=0;i<this.renderTargetsVertical.length;i++)this.renderTargetsVertical[i].dispose();this.renderTargetBright.dispose();for(let i=0;i<this.separableBlurMaterials.length;i++)this.separableBlurMaterials[i].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(width,height){let resx=Math.round(width/2),resy=Math.round(height/2);this.renderTargetBright.setSize(resx,resy);for(let i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(resx,resy),this.renderTargetsVertical[i].setSize(resx,resy),this.separableBlurMaterials[i].uniforms.texSize.value=new three_module.FM8(resx,resy),resx=Math.round(resx/2),resy=Math.round(resy/2)}render(renderer,writeBuffer,readBuffer,deltaTime,maskActive){renderer.getClearColor(this._oldClearColor),this.oldClearAlpha=renderer.getClearAlpha();const oldAutoClear=renderer.autoClear;renderer.autoClear=!1,renderer.setClearColor(this.clearColor,0),maskActive&&renderer.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=readBuffer.texture,renderer.setRenderTarget(null),renderer.clear(),this.fsQuad.render(renderer)),this.highPassUniforms.tDiffuse.value=readBuffer.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,renderer.setRenderTarget(this.renderTargetBright),renderer.clear(),this.fsQuad.render(renderer);let inputRenderTarget=this.renderTargetBright;for(let i=0;i<this.nMips;i++)this.fsQuad.material=this.separableBlurMaterials[i],this.separableBlurMaterials[i].uniforms.colorTexture.value=inputRenderTarget.texture,this.separableBlurMaterials[i].uniforms.direction.value=UnrealBloomPass.BlurDirectionX,renderer.setRenderTarget(this.renderTargetsHorizontal[i]),renderer.clear(),this.fsQuad.render(renderer),this.separableBlurMaterials[i].uniforms.colorTexture.value=this.renderTargetsHorizontal[i].texture,this.separableBlurMaterials[i].uniforms.direction.value=UnrealBloomPass.BlurDirectionY,renderer.setRenderTarget(this.renderTargetsVertical[i]),renderer.clear(),this.fsQuad.render(renderer),inputRenderTarget=this.renderTargetsVertical[i];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,renderer.setRenderTarget(this.renderTargetsHorizontal[0]),renderer.clear(),this.fsQuad.render(renderer),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,maskActive&&renderer.state.buffers.stencil.setTest(!0),this.renderToScreen?(renderer.setRenderTarget(null),this.fsQuad.render(renderer)):(renderer.setRenderTarget(readBuffer),this.fsQuad.render(renderer)),renderer.setClearColor(this._oldClearColor,this.oldClearAlpha),renderer.autoClear=oldAutoClear}getSeperableBlurMaterial(kernelRadius){return new three_module.jyz({defines:{KERNEL_RADIUS:kernelRadius,SIGMA:kernelRadius},uniforms:{colorTexture:{value:null},texSize:{value:new three_module.FM8(.5,.5)},direction:{value:new three_module.FM8(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(nMips){return new three_module.jyz({defines:{NUM_MIPS:nMips},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}__name(UnrealBloomPass,"UnrealBloomPass"),UnrealBloomPass.BlurDirectionX=new three_module.FM8(1,0),UnrealBloomPass.BlurDirectionY=new three_module.FM8(0,1)},278:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>CSS2DRenderer,j:()=>CSS2DObject});var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6682);class CSS2DObject extends three__WEBPACK_IMPORTED_MODULE_0__.Tme{constructor(element=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=element,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(object){object.element instanceof Element&&null!==object.element.parentNode&&object.element.parentNode.removeChild(object.element)})})}copy(source,recursive){return super.copy(source,recursive),this.element=source.element.cloneNode(!0),this}}__name(CSS2DObject,"CSS2DObject");const _vector=new three__WEBPACK_IMPORTED_MODULE_0__.Pa4,_viewMatrix=new three__WEBPACK_IMPORTED_MODULE_0__.yGw,_viewProjectionMatrix=new three__WEBPACK_IMPORTED_MODULE_0__.yGw,_a=new three__WEBPACK_IMPORTED_MODULE_0__.Pa4,_b=new three__WEBPACK_IMPORTED_MODULE_0__.Pa4;class CSS2DRenderer{constructor(parameters={}){const _this=this;let _width,_height,_widthHalf,_heightHalf;const cache={objects:new WeakMap},domElement=void 0!==parameters.element?parameters.element:document.createElement("div");function renderObject(object,scene,camera){if(object.isCSS2DObject){_vector.setFromMatrixPosition(object.matrixWorld),_vector.applyMatrix4(_viewProjectionMatrix);const visible=!0===object.visible&&_vector.z>=-1&&_vector.z<=1&&!0===object.layers.test(camera.layers);if(object.element.style.display=!0===visible?"":"none",!0===visible){object.onBeforeRender(_this,scene,camera);const element=object.element;element.style.transform="translate(-50%,-50%) translate("+(_vector.x*_widthHalf+_widthHalf)+"px,"+(-_vector.y*_heightHalf+_heightHalf)+"px)",element.parentNode!==domElement&&domElement.appendChild(element),object.onAfterRender(_this,scene,camera)}const objectData={distanceToCameraSquared:getDistanceToSquared(camera,object)};cache.objects.set(object,objectData)}for(let i=0,l=object.children.length;i<l;i++)renderObject(object.children[i],scene,camera)}function getDistanceToSquared(object1,object2){return _a.setFromMatrixPosition(object1.matrixWorld),_b.setFromMatrixPosition(object2.matrixWorld),_a.distanceToSquared(_b)}function filterAndFlatten(scene){const result=[];return scene.traverse(function(object){object.isCSS2DObject&&result.push(object)}),result}function zOrder(scene){const sorted=filterAndFlatten(scene).sort(function(a,b){return a.renderOrder!==b.renderOrder?b.renderOrder-a.renderOrder:cache.objects.get(a).distanceToCameraSquared-cache.objects.get(b).distanceToCameraSquared}),zMax=sorted.length;for(let i=0,l=sorted.length;i<l;i++)sorted[i].element.style.zIndex=zMax-i}domElement.style.overflow="hidden",this.domElement=domElement,this.getSize=function(){return{width:_width,height:_height}},this.render=function(scene,camera){!0===scene.matrixWorldAutoUpdate&&scene.updateMatrixWorld(),null===camera.parent&&!0===camera.matrixWorldAutoUpdate&&camera.updateMatrixWorld(),_viewMatrix.copy(camera.matrixWorldInverse),_viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix,_viewMatrix),renderObject(scene,scene,camera),zOrder(scene)},this.setSize=function(width,height){_width=width,_height=height,_widthHalf=_width/2,_heightHalf=_height/2,domElement.style.width=width+"px",domElement.style.height=height+"px"},__name(renderObject,"renderObject"),__name(getDistanceToSquared,"getDistanceToSquared"),__name(filterAndFlatten,"filterAndFlatten"),__name(zOrder,"zOrder")}}__name(CSS2DRenderer,"CSS2DRenderer")},9097:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>CopyShader});const CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"}},5200:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>Camera});var _math_Matrix4_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7971),_core_Object3D_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4130);class Camera extends _core_Object3D_js__WEBPACK_IMPORTED_MODULE_0__.T{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _math_Matrix4_js__WEBPACK_IMPORTED_MODULE_1__.y,this.projectionMatrix=new _math_Matrix4_js__WEBPACK_IMPORTED_MODULE_1__.y,this.projectionMatrixInverse=new _math_Matrix4_js__WEBPACK_IMPORTED_MODULE_1__.y}copy(source,recursive){return super.copy(source,recursive),this.matrixWorldInverse.copy(source.matrixWorldInverse),this.projectionMatrix.copy(source.projectionMatrix),this.projectionMatrixInverse.copy(source.projectionMatrixInverse),this}getWorldDirection(target){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return target.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(force){super.updateMatrixWorld(force),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(updateParents,updateChildren){super.updateWorldMatrix(updateParents,updateChildren),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}__name(Camera,"Camera")},9449:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>PerspectiveCamera});var _Camera_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5200),_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4090);class PerspectiveCamera extends _Camera_js__WEBPACK_IMPORTED_MODULE_0__.V{constructor(fov=50,aspect=1,near=.1,far=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=fov,this.zoom=1,this.near=near,this.far=far,this.focus=10,this.aspect=aspect,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(source,recursive){return super.copy(source,recursive),this.fov=source.fov,this.zoom=source.zoom,this.near=source.near,this.far=source.far,this.focus=source.focus,this.aspect=source.aspect,this.view=null===source.view?null:Object.assign({},source.view),this.filmGauge=source.filmGauge,this.filmOffset=source.filmOffset,this}setFocalLength(focalLength){const vExtentSlope=.5*this.getFilmHeight()/focalLength;this.fov=2*_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_1__.I3*Math.atan(vExtentSlope),this.updateProjectionMatrix()}getFocalLength(){const vExtentSlope=Math.tan(.5*_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_1__.qW*this.fov);return.5*this.getFilmHeight()/vExtentSlope}getEffectiveFOV(){return 2*_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_1__.I3*Math.atan(Math.tan(.5*_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_1__.qW*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(fullWidth,fullHeight,x,y,width,height){this.aspect=fullWidth/fullHeight,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=fullWidth,this.view.fullHeight=fullHeight,this.view.offsetX=x,this.view.offsetY=y,this.view.width=width,this.view.height=height,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const near=this.near;let top=near*Math.tan(.5*_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_1__.qW*this.fov)/this.zoom,height=2*top,width=this.aspect*height,left=-.5*width;const view=this.view;if(null!==this.view&&this.view.enabled){const fullWidth=view.fullWidth,fullHeight=view.fullHeight;left+=view.offsetX*width/fullWidth,top-=view.offsetY*height/fullHeight,width*=view.width/fullWidth,height*=view.height/fullHeight}const skew=this.filmOffset;0!==skew&&(left+=near*skew/this.getFilmWidth()),this.projectionMatrix.makePerspective(left,left+width,top,top-height,near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(meta){const data=super.toJSON(meta);return data.object.fov=this.fov,data.object.zoom=this.zoom,data.object.near=this.near,data.object.far=this.far,data.object.focus=this.focus,data.object.aspect=this.aspect,null!==this.view&&(data.object.view=Object.assign({},this.view)),data.object.filmGauge=this.filmGauge,data.object.filmOffset=this.filmOffset,data}}__name(PerspectiveCamera,"PerspectiveCamera")},8007:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{BFQ:()=>RGBA_S3TC_DXT1_Format,BG$:()=>RGBA_ASTC_8x5_Format,BVF:()=>NeverDepth,Bf4:()=>EquirectangularRefractionMapping,CaW:()=>RGBA_PVRTC_2BPPV1_Format,CdI:()=>ReinhardToneMapping,CtA:()=>RGIntegerFormat,D1R:()=>LinearMipmapLinearFilter,D9w:()=>RedIntegerFormat,Djp:()=>RGBA_ASTC_6x6_Format,E2K:()=>RGBAIntegerFormat,EoG:()=>LinearToneMapping,FDw:()=>LinearMipMapLinearFilter,FUD:()=>RGBA_ASTC_10x10_Format,GG6:()=>RGBA_ASTC_10x6_Format,GUF:()=>LinearSRGBColorSpace,Gih:()=>RGBA_ASTC_10x8_Format,Hy8:()=>OneMinusDstAlphaFactor,ILR:()=>RGBA_S3TC_DXT5_Format,IOt:()=>TangentSpaceNormalMap,JQ4:()=>UnsignedIntType,KI_:()=>SRGBColorSpace,KhW:()=>SrcColorFactor,Kz5:()=>IntType,LSk:()=>GLSL3,LY2:()=>ACESFilmicToneMapping,L_r:()=>_SRGBAFormat,LgZ:()=>OneMinusSrcAlphaFactor,LsT:()=>UnsignedShortType,M5h:()=>MultiplyBlending,M6v:()=>NotEqualDepth,N4l:()=>SubtractiveBlending,NDo:()=>AddOperation,NYV:()=>RGBA_ASTC_8x6_Format,Ns1:()=>MultiplyOperation,OTo:()=>AlphaFormat,OoA:()=>MirroredRepeatWrapping,PA7:()=>ObjectSpaceNormalMap,PeU:()=>CullFaceNone,RlZ:()=>SrcAlphaSaturateFactor,S2y:()=>CullFaceFront,Se2:()=>AlwaysDepth,Sm8:()=>MaxEquation,SvJ:()=>RGBA_ASTC_12x12_Format,T95:()=>ByteType,TyD:()=>NearestFilter,UCm:()=>RGBFormat,UZH:()=>REVISION,Vdb:()=>DstColorFactor,VzW:()=>FloatType,W2J:()=>StaticDrawUsage,WMw:()=>AdditiveBlending,Wbm:()=>SubtractEquation,Wl3:()=>FrontSide,Wpd:()=>OneMinusDstColorFactor,Xaj:()=>CustomBlending,Y8D:()=>LuminanceFormat,YGz:()=>CineonToneMapping,YLQ:()=>NearestMipmapNearestFilter,Zr5:()=>LessDepth,_AM:()=>RGB_PVRTC_4BPPV1_Format,_Li:()=>BackSide,_iA:()=>PCFShadowMap,aH4:()=>NearestMipmapLinearFilter,av9:()=>RGFormat,bGH:()=>AddEquation,bdR:()=>NormalBlending,brP:()=>DepthStencilFormat,bsb:()=>RGBA_BPTC_Format,c8b:()=>ZeroFactor,cLu:()=>HalfFloatType,cRx:()=>LuminanceAlphaFormat,cum:()=>AlwaysStencilFunc,dSO:()=>EquirectangularReflectionMapping,dZ3:()=>CustomToneMapping,dwk:()=>VSMShadowMap,eD:()=>EqualDepth,eaV:()=>RGBA_PVRTC_4BPPV1_Format,ehD:()=>DoubleSide,ekQ:()=>RGBA_ETC2_EAC_Format,fSK:()=>DstAlphaFactor,fY$:()=>CubeReflectionMapping,fto:()=>RGB_ETC1_Format,g8_:()=>CubeUVReflectionMapping,ghN:()=>OneFactor,gi4:()=>RGBA_ASTC_6x5_Format,hEm:()=>RedFormat,iAb:()=>ShortType,iWC:()=>OneMinusSrcColorFactor,iiP:()=>RGBA_ASTC_12x10_Format,irR:()=>UnsignedShort5551Type,jFi:()=>NoBlending,jZA:()=>RGBA_ASTC_5x4_Format,k0A:()=>UnsignedShort4444Type,k74:()=>SrcAlphaFactor,knz:()=>sRGBEncoding,ksN:()=>GreaterEqualDepth,l0P:()=>RGB_ETC2_Format,mSO:()=>RGBADepthPacking,ntZ:()=>PCFSoftShadowMap,pKu:()=>RGBA_ASTC_10x5_Format,ptH:()=>RGBA_ASTC_4x4_Format,qhX:()=>MixOperation,qkB:()=>DepthFormat,qyh:()=>LinearMipmapNearestFilter,rOj:()=>ReverseSubtractEquation,r_:()=>MinEquation,rnI:()=>LinearEncoding,rpg:()=>RepeatWrapping,tm_:()=>CullFaceBack,uL9:()=>NoToneMapping,uWy:()=>ClampToEdgeWrapping,ub3:()=>TwoPassDoubleSide,v3W:()=>RGBA_S3TC_DXT3_Format,vCF:()=>LessEqualDepth,vCx:()=>RGB_PVRTC_2BPPV1_Format,vxC:()=>CubeRefractionMapping,w$m:()=>GreaterDepth,wJv:()=>UnsignedInt248Type,wem:()=>LinearFilter,wk1:()=>RGBAFormat,wuA:()=>RGB_S3TC_DXT1_Format,x5V:()=>KeepStencilOp,xJs:()=>RGBA_ASTC_8x8_Format,xfE:()=>UVMapping,y2t:()=>RGBA_ASTC_5x5_Format,ywz:()=>UnsignedByteType,z81:()=>BasicDepthPacking});const REVISION="148",CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=3,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",KeepStencilOp=7680,AlwaysStencilFunc=519,StaticDrawUsage=35044,GLSL3="300 es",_SRGBAFormat=1035},6192:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Tl:()=>BufferAttribute,a$:()=>Float32BufferAttribute,lC:()=>Uint32BufferAttribute,ql:()=>Uint16BufferAttribute});var _math_Vector3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3104),_math_Vector2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2319),_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4090),_constants_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8007);const _vector=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_vector2=new _math_Vector2_js__WEBPACK_IMPORTED_MODULE_1__.F;class BufferAttribute{constructor(array,itemSize,normalized=!1){if(Array.isArray(array))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=array,this.itemSize=itemSize,this.count=void 0!==array?array.length/itemSize:0,this.normalized=normalized,this.usage=_constants_js__WEBPACK_IMPORTED_MODULE_2__.W2J,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(value){!0===value&&this.version++}setUsage(value){return this.usage=value,this}copy(source){return this.name=source.name,this.array=new source.array.constructor(source.array),this.itemSize=source.itemSize,this.count=source.count,this.normalized=source.normalized,this.usage=source.usage,this}copyAt(index1,attribute,index2){index1*=this.itemSize,index2*=attribute.itemSize;for(let i=0,l=this.itemSize;i<l;i++)this.array[index1+i]=attribute.array[index2+i];return this}copyArray(array){return this.array.set(array),this}applyMatrix3(m){if(2===this.itemSize)for(let i=0,l=this.count;i<l;i++)_vector2.fromBufferAttribute(this,i),_vector2.applyMatrix3(m),this.setXY(i,_vector2.x,_vector2.y);else if(3===this.itemSize)for(let i=0,l=this.count;i<l;i++)_vector.fromBufferAttribute(this,i),_vector.applyMatrix3(m),this.setXYZ(i,_vector.x,_vector.y,_vector.z);return this}applyMatrix4(m){for(let i=0,l=this.count;i<l;i++)_vector.fromBufferAttribute(this,i),_vector.applyMatrix4(m),this.setXYZ(i,_vector.x,_vector.y,_vector.z);return this}applyNormalMatrix(m){for(let i=0,l=this.count;i<l;i++)_vector.fromBufferAttribute(this,i),_vector.applyNormalMatrix(m),this.setXYZ(i,_vector.x,_vector.y,_vector.z);return this}transformDirection(m){for(let i=0,l=this.count;i<l;i++)_vector.fromBufferAttribute(this,i),_vector.transformDirection(m),this.setXYZ(i,_vector.x,_vector.y,_vector.z);return this}set(value,offset=0){return this.array.set(value,offset),this}getX(index){let x=this.array[index*this.itemSize];return this.normalized&&(x=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.cY)(x,this.array)),x}setX(index,x){return this.normalized&&(x=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(x,this.array)),this.array[index*this.itemSize]=x,this}getY(index){let y=this.array[index*this.itemSize+1];return this.normalized&&(y=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.cY)(y,this.array)),y}setY(index,y){return this.normalized&&(y=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(y,this.array)),this.array[index*this.itemSize+1]=y,this}getZ(index){let z=this.array[index*this.itemSize+2];return this.normalized&&(z=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.cY)(z,this.array)),z}setZ(index,z){return this.normalized&&(z=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(z,this.array)),this.array[index*this.itemSize+2]=z,this}getW(index){let w=this.array[index*this.itemSize+3];return this.normalized&&(w=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.cY)(w,this.array)),w}setW(index,w){return this.normalized&&(w=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(w,this.array)),this.array[index*this.itemSize+3]=w,this}setXY(index,x,y){return index*=this.itemSize,this.normalized&&(x=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(x,this.array),y=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(y,this.array)),this.array[index+0]=x,this.array[index+1]=y,this}setXYZ(index,x,y,z){return index*=this.itemSize,this.normalized&&(x=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(x,this.array),y=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(y,this.array),z=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(z,this.array)),this.array[index+0]=x,this.array[index+1]=y,this.array[index+2]=z,this}setXYZW(index,x,y,z,w){return index*=this.itemSize,this.normalized&&(x=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(x,this.array),y=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(y,this.array),z=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(z,this.array),w=(0,_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.Fv)(w,this.array)),this.array[index+0]=x,this.array[index+1]=y,this.array[index+2]=z,this.array[index+3]=w,this}onUpload(callback){return this.onUploadCallback=callback,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const data={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(data.name=this.name),this.usage!==_constants_js__WEBPACK_IMPORTED_MODULE_2__.W2J&&(data.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(data.updateRange=this.updateRange),data}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}__name(BufferAttribute,"BufferAttribute"),__name(class Int8BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Int8Array(array),itemSize,normalized)}},"Int8BufferAttribute"),__name(class Uint8BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Uint8Array(array),itemSize,normalized)}},"Uint8BufferAttribute"),__name(class Uint8ClampedBufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Uint8ClampedArray(array),itemSize,normalized)}},"Uint8ClampedBufferAttribute"),__name(class Int16BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Int16Array(array),itemSize,normalized)}},"Int16BufferAttribute");class Uint16BufferAttribute extends BufferAttribute{constructor(array,itemSize,normalized){super(new Uint16Array(array),itemSize,normalized)}}__name(Uint16BufferAttribute,"Uint16BufferAttribute"),__name(class Int32BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Int32Array(array),itemSize,normalized)}},"Int32BufferAttribute");class Uint32BufferAttribute extends BufferAttribute{constructor(array,itemSize,normalized){super(new Uint32Array(array),itemSize,normalized)}}__name(Uint32BufferAttribute,"Uint32BufferAttribute"),__name(class Float16BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Uint16Array(array),itemSize,normalized),this.isFloat16BufferAttribute=!0}},"Float16BufferAttribute");class Float32BufferAttribute extends BufferAttribute{constructor(array,itemSize,normalized){super(new Float32Array(array),itemSize,normalized)}}__name(Float32BufferAttribute,"Float32BufferAttribute"),__name(class Float64BufferAttribute extends(null){constructor(array,itemSize,normalized){super(new Float64Array(array),itemSize,normalized)}},"Float64BufferAttribute")},875:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>BufferGeometry});var _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3104),_math_Vector2_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2319),_math_Box3_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7206),_EventDispatcher_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1168),_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6192),_math_Sphere_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3174),_Object3D_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4130),_math_Matrix4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7971),_math_Matrix3_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6113),_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4090),_utils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3436);let _id=0;const _m1=new _math_Matrix4_js__WEBPACK_IMPORTED_MODULE_0__.y,_obj=new _Object3D_js__WEBPACK_IMPORTED_MODULE_1__.T,_offset=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,_box=new _math_Box3_js__WEBPACK_IMPORTED_MODULE_3__.Z,_boxMorphTargets=new _math_Box3_js__WEBPACK_IMPORTED_MODULE_3__.Z,_vector=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P;class BufferGeometry extends _EventDispatcher_js__WEBPACK_IMPORTED_MODULE_4__.p{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id++}),this.uuid=_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_5__.DO(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(index){return this.index=Array.isArray(index)?new((0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.H7)(index)?_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_7__.lC:_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_7__.ql)(index,1):index,this}getAttribute(name){return this.attributes[name]}setAttribute(name,attribute){return this.attributes[name]=attribute,this}deleteAttribute(name){return delete this.attributes[name],this}hasAttribute(name){return void 0!==this.attributes[name]}addGroup(start,count,materialIndex=0){this.groups.push({start,count,materialIndex})}clearGroups(){this.groups=[]}setDrawRange(start,count){this.drawRange.start=start,this.drawRange.count=count}applyMatrix4(matrix){const position=this.attributes.position;void 0!==position&&(position.applyMatrix4(matrix),position.needsUpdate=!0);const normal=this.attributes.normal;if(void 0!==normal){const normalMatrix=(new _math_Matrix3_js__WEBPACK_IMPORTED_MODULE_8__.V).getNormalMatrix(matrix);normal.applyNormalMatrix(normalMatrix),normal.needsUpdate=!0}const tangent=this.attributes.tangent;return void 0!==tangent&&(tangent.transformDirection(matrix),tangent.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(q){return _m1.makeRotationFromQuaternion(q),this.applyMatrix4(_m1),this}rotateX(angle){return _m1.makeRotationX(angle),this.applyMatrix4(_m1),this}rotateY(angle){return _m1.makeRotationY(angle),this.applyMatrix4(_m1),this}rotateZ(angle){return _m1.makeRotationZ(angle),this.applyMatrix4(_m1),this}translate(x,y,z){return _m1.makeTranslation(x,y,z),this.applyMatrix4(_m1),this}scale(x,y,z){return _m1.makeScale(x,y,z),this.applyMatrix4(_m1),this}lookAt(vector){return _obj.lookAt(vector),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(points){const position=[];for(let i=0,l=points.length;i<l;i++){const point=points[i];position.push(point.x,point.y,point.z||0)}return this.setAttribute("position",new _BufferAttribute_js__WEBPACK_IMPORTED_MODULE_7__.a$(position,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new _math_Box3_js__WEBPACK_IMPORTED_MODULE_3__.Z);const position=this.attributes.position,morphAttributesPosition=this.morphAttributes.position;if(position&&position.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P(-1/0,-1/0,-1/0),new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P(1/0,1/0,1/0));if(void 0!==position){if(this.boundingBox.setFromBufferAttribute(position),morphAttributesPosition)for(let i=0,il=morphAttributesPosition.length;i<il;i++)_box.setFromBufferAttribute(morphAttributesPosition[i]),this.morphTargetsRelative?(_vector.addVectors(this.boundingBox.min,_box.min),this.boundingBox.expandByPoint(_vector),_vector.addVectors(this.boundingBox.max,_box.max),this.boundingBox.expandByPoint(_vector)):(this.boundingBox.expandByPoint(_box.min),this.boundingBox.expandByPoint(_box.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new _math_Sphere_js__WEBPACK_IMPORTED_MODULE_9__.a);const position=this.attributes.position,morphAttributesPosition=this.morphAttributes.position;if(position&&position.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,1/0);if(position){const center=this.boundingSphere.center;if(_box.setFromBufferAttribute(position),morphAttributesPosition)for(let i=0,il=morphAttributesPosition.length;i<il;i++)_boxMorphTargets.setFromBufferAttribute(morphAttributesPosition[i]),this.morphTargetsRelative?(_vector.addVectors(_box.min,_boxMorphTargets.min),_box.expandByPoint(_vector),_vector.addVectors(_box.max,_boxMorphTargets.max),_box.expandByPoint(_vector)):(_box.expandByPoint(_boxMorphTargets.min),_box.expandByPoint(_boxMorphTargets.max));_box.getCenter(center);let maxRadiusSq=0;for(let i=0,il=position.count;i<il;i++)_vector.fromBufferAttribute(position,i),maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(_vector));if(morphAttributesPosition)for(let i=0,il=morphAttributesPosition.length;i<il;i++){const morphAttribute=morphAttributesPosition[i],morphTargetsRelative=this.morphTargetsRelative;for(let j=0,jl=morphAttribute.count;j<jl;j++)_vector.fromBufferAttribute(morphAttribute,j),morphTargetsRelative&&(_offset.fromBufferAttribute(position,j),_vector.add(_offset)),maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(_vector))}this.boundingSphere.radius=Math.sqrt(maxRadiusSq),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const index=this.index,attributes=this.attributes;if(null===index||void 0===attributes.position||void 0===attributes.normal||void 0===attributes.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const indices=index.array,positions=attributes.position.array,normals=attributes.normal.array,uvs=attributes.uv.array,nVertices=positions.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new _BufferAttribute_js__WEBPACK_IMPORTED_MODULE_7__.Tl(new Float32Array(4*nVertices),4));const tangents=this.getAttribute("tangent").array,tan1=[],tan2=[];for(let i=0;i<nVertices;i++)tan1[i]=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,tan2[i]=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P;const vA=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,vB=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,vC=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,uvA=new _math_Vector2_js__WEBPACK_IMPORTED_MODULE_10__.F,uvB=new _math_Vector2_js__WEBPACK_IMPORTED_MODULE_10__.F,uvC=new _math_Vector2_js__WEBPACK_IMPORTED_MODULE_10__.F,sdir=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,tdir=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P;function handleTriangle(a,b,c){vA.fromArray(positions,3*a),vB.fromArray(positions,3*b),vC.fromArray(positions,3*c),uvA.fromArray(uvs,2*a),uvB.fromArray(uvs,2*b),uvC.fromArray(uvs,2*c),vB.sub(vA),vC.sub(vA),uvB.sub(uvA),uvC.sub(uvA);const r=1/(uvB.x*uvC.y-uvC.x*uvB.y);isFinite(r)&&(sdir.copy(vB).multiplyScalar(uvC.y).addScaledVector(vC,-uvB.y).multiplyScalar(r),tdir.copy(vC).multiplyScalar(uvB.x).addScaledVector(vB,-uvC.x).multiplyScalar(r),tan1[a].add(sdir),tan1[b].add(sdir),tan1[c].add(sdir),tan2[a].add(tdir),tan2[b].add(tdir),tan2[c].add(tdir))}__name(handleTriangle,"handleTriangle");let groups=this.groups;0===groups.length&&(groups=[{start:0,count:indices.length}]);for(let i=0,il=groups.length;i<il;++i){const group=groups[i],start=group.start;for(let j=start,jl=start+group.count;j<jl;j+=3)handleTriangle(indices[j+0],indices[j+1],indices[j+2])}const tmp=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,tmp2=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,n=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,n2=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P;function handleVertex(v){n.fromArray(normals,3*v),n2.copy(n);const t=tan1[v];tmp.copy(t),tmp.sub(n.multiplyScalar(n.dot(t))).normalize(),tmp2.crossVectors(n2,t);const w=tmp2.dot(tan2[v])<0?-1:1;tangents[4*v]=tmp.x,tangents[4*v+1]=tmp.y,tangents[4*v+2]=tmp.z,tangents[4*v+3]=w}__name(handleVertex,"handleVertex");for(let i=0,il=groups.length;i<il;++i){const group=groups[i],start=group.start;for(let j=start,jl=start+group.count;j<jl;j+=3)handleVertex(indices[j+0]),handleVertex(indices[j+1]),handleVertex(indices[j+2])}}computeVertexNormals(){const index=this.index,positionAttribute=this.getAttribute("position");if(void 0!==positionAttribute){let normalAttribute=this.getAttribute("normal");if(void 0===normalAttribute)normalAttribute=new _BufferAttribute_js__WEBPACK_IMPORTED_MODULE_7__.Tl(new Float32Array(3*positionAttribute.count),3),this.setAttribute("normal",normalAttribute);else for(let i=0,il=normalAttribute.count;i<il;i++)normalAttribute.setXYZ(i,0,0,0);const pA=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,pB=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,pC=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,nA=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,nB=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,nC=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,cb=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P,ab=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P;if(index)for(let i=0,il=index.count;i<il;i+=3){const vA=index.getX(i+0),vB=index.getX(i+1),vC=index.getX(i+2);pA.fromBufferAttribute(positionAttribute,vA),pB.fromBufferAttribute(positionAttribute,vB),pC.fromBufferAttribute(positionAttribute,vC),cb.subVectors(pC,pB),ab.subVectors(pA,pB),cb.cross(ab),nA.fromBufferAttribute(normalAttribute,vA),nB.fromBufferAttribute(normalAttribute,vB),nC.fromBufferAttribute(normalAttribute,vC),nA.add(cb),nB.add(cb),nC.add(cb),normalAttribute.setXYZ(vA,nA.x,nA.y,nA.z),normalAttribute.setXYZ(vB,nB.x,nB.y,nB.z),normalAttribute.setXYZ(vC,nC.x,nC.y,nC.z)}else for(let i=0,il=positionAttribute.count;i<il;i+=3)pA.fromBufferAttribute(positionAttribute,i+0),pB.fromBufferAttribute(positionAttribute,i+1),pC.fromBufferAttribute(positionAttribute,i+2),cb.subVectors(pC,pB),ab.subVectors(pA,pB),cb.cross(ab),normalAttribute.setXYZ(i+0,cb.x,cb.y,cb.z),normalAttribute.setXYZ(i+1,cb.x,cb.y,cb.z),normalAttribute.setXYZ(i+2,cb.x,cb.y,cb.z);this.normalizeNormals(),normalAttribute.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const normals=this.attributes.normal;for(let i=0,il=normals.count;i<il;i++)_vector.fromBufferAttribute(normals,i),_vector.normalize(),normals.setXYZ(i,_vector.x,_vector.y,_vector.z)}toNonIndexed(){function convertBufferAttribute(attribute,indices2){const array=attribute.array,itemSize=attribute.itemSize,normalized=attribute.normalized,array2=new array.constructor(indices2.length*itemSize);let index=0,index2=0;for(let i=0,l=indices2.length;i<l;i++){index=attribute.isInterleavedBufferAttribute?indices2[i]*attribute.data.stride+attribute.offset:indices2[i]*itemSize;for(let j=0;j<itemSize;j++)array2[index2++]=array[index++]}return new _BufferAttribute_js__WEBPACK_IMPORTED_MODULE_7__.Tl(array2,itemSize,normalized)}if(__name(convertBufferAttribute,"convertBufferAttribute"),null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const geometry2=new BufferGeometry,indices=this.index.array,attributes=this.attributes;for(const name in attributes){const newAttribute=convertBufferAttribute(attributes[name],indices);geometry2.setAttribute(name,newAttribute)}const morphAttributes=this.morphAttributes;for(const name in morphAttributes){const morphArray=[],morphAttribute=morphAttributes[name];for(let i=0,il=morphAttribute.length;i<il;i++){const newAttribute=convertBufferAttribute(morphAttribute[i],indices);morphArray.push(newAttribute)}geometry2.morphAttributes[name]=morphArray}geometry2.morphTargetsRelative=this.morphTargetsRelative;const groups=this.groups;for(let i=0,l=groups.length;i<l;i++){const group=groups[i];geometry2.addGroup(group.start,group.count,group.materialIndex)}return geometry2}toJSON(){const data={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),Object.keys(this.userData).length>0&&(data.userData=this.userData),void 0!==this.parameters){const parameters=this.parameters;for(const key in parameters)void 0!==parameters[key]&&(data[key]=parameters[key]);return data}data.data={attributes:{}};const index=this.index;null!==index&&(data.data.index={type:index.array.constructor.name,array:Array.prototype.slice.call(index.array)});const attributes=this.attributes;for(const key in attributes)data.data.attributes[key]=attributes[key].toJSON(data.data);const morphAttributes={};let hasMorphAttributes=!1;for(const key in this.morphAttributes){const attributeArray=this.morphAttributes[key],array=[];for(let i=0,il=attributeArray.length;i<il;i++)array.push(attributeArray[i].toJSON(data.data));array.length>0&&(morphAttributes[key]=array,hasMorphAttributes=!0)}hasMorphAttributes&&(data.data.morphAttributes=morphAttributes,data.data.morphTargetsRelative=this.morphTargetsRelative);const groups=this.groups;groups.length>0&&(data.data.groups=JSON.parse(JSON.stringify(groups)));const boundingSphere=this.boundingSphere;return null!==boundingSphere&&(data.data.boundingSphere={center:boundingSphere.center.toArray(),radius:boundingSphere.radius}),data}clone(){return(new this.constructor).copy(this)}copy(source){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const data={};this.name=source.name;const index=source.index;null!==index&&this.setIndex(index.clone(data));const attributes=source.attributes;for(const name in attributes)this.setAttribute(name,attributes[name].clone(data));const morphAttributes=source.morphAttributes;for(const name in morphAttributes){const array=[],morphAttribute=morphAttributes[name];for(let i=0,l=morphAttribute.length;i<l;i++)array.push(morphAttribute[i].clone(data));this.morphAttributes[name]=array}this.morphTargetsRelative=source.morphTargetsRelative;const groups=source.groups;for(let i=0,l=groups.length;i<l;i++){const group=groups[i];this.addGroup(group.start,group.count,group.materialIndex)}const boundingBox=source.boundingBox;null!==boundingBox&&(this.boundingBox=boundingBox.clone());const boundingSphere=source.boundingSphere;return null!==boundingSphere&&(this.boundingSphere=boundingSphere.clone()),this.drawRange.start=source.drawRange.start,this.drawRange.count=source.drawRange.count,this.userData=source.userData,void 0!==source.parameters&&(this.parameters=Object.assign({},source.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}__name(BufferGeometry,"BufferGeometry")},1164:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>Clock});class Clock{constructor(autoStart=!0){this.autoStart=autoStart,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let diff=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const newTime=now();diff=(newTime-this.oldTime)/1e3,this.oldTime=newTime,this.elapsedTime+=diff}return diff}}function now(){return(typeof performance>"u"?Date:performance).now()}__name(Clock,"Clock"),__name(now,"now")},1168:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{p:()=>EventDispatcher});class EventDispatcher{addEventListener(type,listener){void 0===this._listeners&&(this._listeners={});const listeners=this._listeners;void 0===listeners[type]&&(listeners[type]=[]),-1===listeners[type].indexOf(listener)&&listeners[type].push(listener)}hasEventListener(type,listener){if(void 0===this._listeners)return!1;const listeners=this._listeners;return void 0!==listeners[type]&&-1!==listeners[type].indexOf(listener)}removeEventListener(type,listener){if(void 0===this._listeners)return;const listenerArray=this._listeners[type];if(void 0!==listenerArray){const index=listenerArray.indexOf(listener);-1!==index&&listenerArray.splice(index,1)}}dispatchEvent(event){if(void 0===this._listeners)return;const listenerArray=this._listeners[event.type];if(void 0!==listenerArray){event.target=this;const array=listenerArray.slice(0);for(let i=0,l=array.length;i<l;i++)array[i].call(this,event);event.target=null}}}__name(EventDispatcher,"EventDispatcher")},3784:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>Layers});class Layers{constructor(){this.mask=1}set(channel){this.mask=(1<<channel|0)>>>0}enable(channel){this.mask|=1<<channel|0}enableAll(){this.mask=-1}toggle(channel){this.mask^=1<<channel|0}disable(channel){this.mask&=~(1<<channel|0)}disableAll(){this.mask=0}test(layers){return 0!=(this.mask&layers.mask)}isEnabled(channel){return 0!=(this.mask&(1<<channel|0))}}__name(Layers,"Layers")},4130:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>Object3D});var Quaternion=__webpack_require__(3972),Vector32=__webpack_require__(3104),Matrix42=__webpack_require__(7971),EventDispatcher=__webpack_require__(1168),MathUtils=__webpack_require__(4090);const _matrix=new Matrix42.y,_quaternion=new Quaternion._;let Euler=(()=>{class Euler2{constructor(x=0,y=0,z=0,order=Euler2.DefaultOrder){this.isEuler=!0,this._x=x,this._y=y,this._z=z,this._order=order}get x(){return this._x}set x(value){this._x=value,this._onChangeCallback()}get y(){return this._y}set y(value){this._y=value,this._onChangeCallback()}get z(){return this._z}set z(value){this._z=value,this._onChangeCallback()}get order(){return this._order}set order(value){this._order=value,this._onChangeCallback()}set(x,y,z,order=this._order){return this._x=x,this._y=y,this._z=z,this._order=order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(euler){return this._x=euler._x,this._y=euler._y,this._z=euler._z,this._order=euler._order,this._onChangeCallback(),this}setFromRotationMatrix(m,order=this._order,update=!0){const te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10];switch(order){case"XYZ":this._y=Math.asin((0,MathUtils.uZ)(m13,-1,1)),Math.abs(m13)<.9999999?(this._x=Math.atan2(-m23,m33),this._z=Math.atan2(-m12,m11)):(this._x=Math.atan2(m32,m22),this._z=0);break;case"YXZ":this._x=Math.asin(-(0,MathUtils.uZ)(m23,-1,1)),Math.abs(m23)<.9999999?(this._y=Math.atan2(m13,m33),this._z=Math.atan2(m21,m22)):(this._y=Math.atan2(-m31,m11),this._z=0);break;case"ZXY":this._x=Math.asin((0,MathUtils.uZ)(m32,-1,1)),Math.abs(m32)<.9999999?(this._y=Math.atan2(-m31,m33),this._z=Math.atan2(-m12,m22)):(this._y=0,this._z=Math.atan2(m21,m11));break;case"ZYX":this._y=Math.asin(-(0,MathUtils.uZ)(m31,-1,1)),Math.abs(m31)<.9999999?(this._x=Math.atan2(m32,m33),this._z=Math.atan2(m21,m11)):(this._x=0,this._z=Math.atan2(-m12,m22));break;case"YZX":this._z=Math.asin((0,MathUtils.uZ)(m21,-1,1)),Math.abs(m21)<.9999999?(this._x=Math.atan2(-m23,m22),this._y=Math.atan2(-m31,m11)):(this._x=0,this._y=Math.atan2(m13,m33));break;case"XZY":this._z=Math.asin(-(0,MathUtils.uZ)(m12,-1,1)),Math.abs(m12)<.9999999?(this._x=Math.atan2(m32,m22),this._y=Math.atan2(m13,m11)):(this._x=Math.atan2(-m23,m33),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+order)}return this._order=order,!0===update&&this._onChangeCallback(),this}setFromQuaternion(q,order,update){return _matrix.makeRotationFromQuaternion(q),this.setFromRotationMatrix(_matrix,order,update)}setFromVector3(v,order=this._order){return this.set(v.x,v.y,v.z,order)}reorder(newOrder){return _quaternion.setFromEuler(this),this.setFromQuaternion(_quaternion,newOrder)}equals(euler){return euler._x===this._x&&euler._y===this._y&&euler._z===this._z&&euler._order===this._order}fromArray(array){return this._x=array[0],this._y=array[1],this._z=array[2],void 0!==array[3]&&(this._order=array[3]),this._onChangeCallback(),this}toArray(array=[],offset=0){return array[offset]=this._x,array[offset+1]=this._y,array[offset+2]=this._z,array[offset+3]=this._order,array}_onChange(callback){return this._onChangeCallback=callback,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return __name(Euler2,"Euler"),Euler2.DefaultOrder="XYZ",Euler2.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Euler2})();var Layers=__webpack_require__(3784),Matrix3=__webpack_require__(6113);let _object3DId=0;const _v1=new Vector32.P,_q1=new Quaternion._,_m1=new Matrix42.y,_target=new Vector32.P,_position=new Vector32.P,_scale=new Vector32.P,Object3D_quaternion=new Quaternion._,_xAxis=new Vector32.P(1,0,0),_yAxis=new Vector32.P(0,1,0),_zAxis=new Vector32.P(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};let Object3D=(()=>{class Object3D2 extends EventDispatcher.p{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.DO(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D2.DefaultUp.clone();const position=new Vector32.P,rotation=new Euler,quaternion=new Quaternion._,scale=new Vector32.P(1,1,1);function onRotationChange(){quaternion.setFromEuler(rotation,!1)}function onQuaternionChange(){rotation.setFromQuaternion(quaternion,void 0,!1)}__name(onRotationChange,"onRotationChange"),__name(onQuaternionChange,"onQuaternionChange"),rotation._onChange(onRotationChange),quaternion._onChange(onQuaternionChange),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:position},rotation:{configurable:!0,enumerable:!0,value:rotation},quaternion:{configurable:!0,enumerable:!0,value:quaternion},scale:{configurable:!0,enumerable:!0,value:scale},modelViewMatrix:{value:new Matrix42.y},normalMatrix:{value:new Matrix3.V}}),this.matrix=new Matrix42.y,this.matrixWorld=new Matrix42.y,this.matrixAutoUpdate=Object3D2.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D2.DefaultMatrixWorldAutoUpdate,this.layers=new Layers.S,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(matrix){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(q){return this.quaternion.premultiply(q),this}setRotationFromAxisAngle(axis,angle){this.quaternion.setFromAxisAngle(axis,angle)}setRotationFromEuler(euler){this.quaternion.setFromEuler(euler,!0)}setRotationFromMatrix(m){this.quaternion.setFromRotationMatrix(m)}setRotationFromQuaternion(q){this.quaternion.copy(q)}rotateOnAxis(axis,angle){return _q1.setFromAxisAngle(axis,angle),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(axis,angle){return _q1.setFromAxisAngle(axis,angle),this.quaternion.premultiply(_q1),this}rotateX(angle){return this.rotateOnAxis(_xAxis,angle)}rotateY(angle){return this.rotateOnAxis(_yAxis,angle)}rotateZ(angle){return this.rotateOnAxis(_zAxis,angle)}translateOnAxis(axis,distance){return _v1.copy(axis).applyQuaternion(this.quaternion),this.position.add(_v1.multiplyScalar(distance)),this}translateX(distance){return this.translateOnAxis(_xAxis,distance)}translateY(distance){return this.translateOnAxis(_yAxis,distance)}translateZ(distance){return this.translateOnAxis(_zAxis,distance)}localToWorld(vector){return this.updateWorldMatrix(!0,!1),vector.applyMatrix4(this.matrixWorld)}worldToLocal(vector){return this.updateWorldMatrix(!0,!1),vector.applyMatrix4(_m1.copy(this.matrixWorld).invert())}lookAt(x,y,z){x.isVector3?_target.copy(x):_target.set(x,y,z);const parent=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1.lookAt(_position,_target,this.up):_m1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1),parent&&(_m1.extractRotation(parent.matrixWorld),_q1.setFromRotationMatrix(_m1),this.quaternion.premultiply(_q1.invert()))}add(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return object===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",object),this):(object&&object.isObject3D?(null!==object.parent&&object.parent.remove(object),object.parent=this,this.children.push(object),object.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",object),this)}remove(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const index=this.children.indexOf(object);return-1!==index&&(object.parent=null,this.children.splice(index,1),object.dispatchEvent(_removedEvent)),this}removeFromParent(){const parent=this.parent;return null!==parent&&parent.remove(this),this}clear(){for(let i=0;i<this.children.length;i++){const object=this.children[i];object.parent=null,object.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(object){return this.updateWorldMatrix(!0,!1),_m1.copy(this.matrixWorld).invert(),null!==object.parent&&(object.parent.updateWorldMatrix(!0,!1),_m1.multiply(object.parent.matrixWorld)),object.applyMatrix4(_m1),this.add(object),object.updateWorldMatrix(!1,!0),this}getObjectById(id){return this.getObjectByProperty("id",id)}getObjectByName(name){return this.getObjectByProperty("name",name)}getObjectByProperty(name,value){if(this[name]===value)return this;for(let i=0,l=this.children.length;i<l;i++){const object=this.children[i].getObjectByProperty(name,value);if(void 0!==object)return object}}getObjectsByProperty(name,value){let result=[];this[name]===value&&result.push(this);for(let i=0,l=this.children.length;i<l;i++){const childResult=this.children[i].getObjectsByProperty(name,value);childResult.length>0&&(result=result.concat(childResult))}return result}getWorldPosition(target){return this.updateWorldMatrix(!0,!1),target.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(target){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position,target,_scale),target}getWorldScale(target){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position,Object3D_quaternion,target),target}getWorldDirection(target){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return target.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(callback){callback(this);const children=this.children;for(let i=0,l=children.length;i<l;i++)children[i].traverse(callback)}traverseVisible(callback){if(!1===this.visible)return;callback(this);const children=this.children;for(let i=0,l=children.length;i<l;i++)children[i].traverseVisible(callback)}traverseAncestors(callback){const parent=this.parent;null!==parent&&(callback(parent),parent.traverseAncestors(callback))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(force){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||force)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,force=!0);const children=this.children;for(let i=0,l=children.length;i<l;i++){const child=children[i];(!0===child.matrixWorldAutoUpdate||!0===force)&&child.updateMatrixWorld(force)}}updateWorldMatrix(updateParents,updateChildren){const parent=this.parent;if(!0===updateParents&&null!==parent&&!0===parent.matrixWorldAutoUpdate&&parent.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===updateChildren){const children=this.children;for(let i=0,l=children.length;i<l;i++){const child=children[i];!0===child.matrixWorldAutoUpdate&&child.updateWorldMatrix(!1,!0)}}}toJSON(meta){const isRootObject=void 0===meta||"string"==typeof meta,output={};isRootObject&&(meta={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},output.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const object={};function serialize(library,element){return void 0===library[element.uuid]&&(library[element.uuid]=element.toJSON(meta)),element.uuid}if(object.uuid=this.uuid,object.type=this.type,""!==this.name&&(object.name=this.name),!0===this.castShadow&&(object.castShadow=!0),!0===this.receiveShadow&&(object.receiveShadow=!0),!1===this.visible&&(object.visible=!1),!1===this.frustumCulled&&(object.frustumCulled=!1),0!==this.renderOrder&&(object.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(object.userData=this.userData),object.layers=this.layers.mask,object.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(object.matrixAutoUpdate=!1),this.isInstancedMesh&&(object.type="InstancedMesh",object.count=this.count,object.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(object.instanceColor=this.instanceColor.toJSON())),__name(serialize,"serialize"),this.isScene)this.background&&(this.background.isColor?object.background=this.background.toJSON():this.background.isTexture&&(object.background=this.background.toJSON(meta).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(object.environment=this.environment.toJSON(meta).uuid);else if(this.isMesh||this.isLine||this.isPoints){object.geometry=serialize(meta.geometries,this.geometry);const parameters=this.geometry.parameters;if(void 0!==parameters&&void 0!==parameters.shapes){const shapes=parameters.shapes;if(Array.isArray(shapes))for(let i=0,l=shapes.length;i<l;i++)serialize(meta.shapes,shapes[i]);else serialize(meta.shapes,shapes)}}if(this.isSkinnedMesh&&(object.bindMode=this.bindMode,object.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(meta.skeletons,this.skeleton),object.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const uuids=[];for(let i=0,l=this.material.length;i<l;i++)uuids.push(serialize(meta.materials,this.material[i]));object.material=uuids}else object.material=serialize(meta.materials,this.material);if(this.children.length>0){object.children=[];for(let i=0;i<this.children.length;i++)object.children.push(this.children[i].toJSON(meta).object)}if(this.animations.length>0){object.animations=[];for(let i=0;i<this.animations.length;i++)object.animations.push(serialize(meta.animations,this.animations[i]))}if(isRootObject){const geometries=extractFromCache(meta.geometries),materials=extractFromCache(meta.materials),textures=extractFromCache(meta.textures),images=extractFromCache(meta.images),shapes=extractFromCache(meta.shapes),skeletons=extractFromCache(meta.skeletons),animations=extractFromCache(meta.animations),nodes=extractFromCache(meta.nodes);geometries.length>0&&(output.geometries=geometries),materials.length>0&&(output.materials=materials),textures.length>0&&(output.textures=textures),images.length>0&&(output.images=images),shapes.length>0&&(output.shapes=shapes),skeletons.length>0&&(output.skeletons=skeletons),animations.length>0&&(output.animations=animations),nodes.length>0&&(output.nodes=nodes)}return output.object=object,output;function extractFromCache(cache){const values=[];for(const key in cache){const data=cache[key];delete data.metadata,values.push(data)}return values}}clone(recursive){return(new this.constructor).copy(this,recursive)}copy(source,recursive=!0){if(this.name=source.name,this.up.copy(source.up),this.position.copy(source.position),this.rotation.order=source.rotation.order,this.quaternion.copy(source.quaternion),this.scale.copy(source.scale),this.matrix.copy(source.matrix),this.matrixWorld.copy(source.matrixWorld),this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=source.matrixWorldAutoUpdate,this.layers.mask=source.layers.mask,this.visible=source.visible,this.castShadow=source.castShadow,this.receiveShadow=source.receiveShadow,this.frustumCulled=source.frustumCulled,this.renderOrder=source.renderOrder,this.userData=JSON.parse(JSON.stringify(source.userData)),!0===recursive)for(let i=0;i<source.children.length;i++)this.add(source.children[i].clone());return this}}return __name(Object3D2,"Object3D"),Object3D2.DefaultUp=new Vector32.P(0,1,0),Object3D2.DefaultMatrixAutoUpdate=!0,Object3D2.DefaultMatrixWorldAutoUpdate=!0,Object3D2})()},600:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>Raycaster});var _math_Ray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4524),_Layers_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3784);class Raycaster{constructor(origin,direction,near=0,far=1/0){this.ray=new _math_Ray_js__WEBPACK_IMPORTED_MODULE_0__.z(origin,direction),this.near=near,this.far=far,this.camera=null,this.layers=new _Layers_js__WEBPACK_IMPORTED_MODULE_1__.S,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(origin,direction){this.ray.set(origin,direction)}setFromCamera(coords,camera){camera.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(camera.matrixWorld),this.ray.direction.set(coords.x,coords.y,.5).unproject(camera).sub(this.ray.origin).normalize(),this.camera=camera):camera.isOrthographicCamera?(this.ray.origin.set(coords.x,coords.y,(camera.near+camera.far)/(camera.near-camera.far)).unproject(camera),this.ray.direction.set(0,0,-1).transformDirection(camera.matrixWorld),this.camera=camera):console.error("THREE.Raycaster: Unsupported camera type: "+camera.type)}intersectObject(object,recursive=!0,intersects=[]){return intersectObject(object,this,intersects,recursive),intersects.sort(ascSort),intersects}intersectObjects(objects,recursive=!0,intersects=[]){for(let i=0,l=objects.length;i<l;i++)intersectObject(objects[i],this,intersects,recursive);return intersects.sort(ascSort),intersects}}function ascSort(a,b){return a.distance-b.distance}function intersectObject(object,raycaster,intersects,recursive){if(object.layers.test(raycaster.layers)&&object.raycast(raycaster,intersects),!0===recursive){const children=object.children;for(let i=0,l=children.length;i<l;i++)intersectObject(children[i],raycaster,intersects,!0)}}__name(Raycaster,"Raycaster"),__name(ascSort,"ascSort"),__name(intersectObject,"intersectObject")},1423:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>ImageUtils});var _utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3436),_math_Color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(186);let _canvas;class ImageUtils{static getDataURL(image){if(/^data:/i.test(image.src)||typeof HTMLCanvasElement>"u")return image.src;let canvas;if(image instanceof HTMLCanvasElement)canvas=image;else{void 0===_canvas&&(_canvas=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.c)("canvas")),_canvas.width=image.width,_canvas.height=image.height;const context=_canvas.getContext("2d");image instanceof ImageData?context.putImageData(image,0,0):context.drawImage(image,0,0,image.width,image.height),canvas=_canvas}return canvas.width>2048||canvas.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",image),canvas.toDataURL("image/jpeg",.6)):canvas.toDataURL("image/png")}static sRGBToLinear(image){if(typeof HTMLImageElement<"u"&&image instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&image instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&image instanceof ImageBitmap){const canvas=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.c)("canvas");canvas.width=image.width,canvas.height=image.height;const context=canvas.getContext("2d");context.drawImage(image,0,0,image.width,image.height);const imageData=context.getImageData(0,0,image.width,image.height),data=imageData.data;for(let i=0;i<data.length;i++)data[i]=255*(0,_math_Color_js__WEBPACK_IMPORTED_MODULE_1__.PB)(data[i]/255);return context.putImageData(imageData,0,0),canvas}if(image.data){const data=image.data.slice(0);for(let i=0;i<data.length;i++)data[i]=data instanceof Uint8Array||data instanceof Uint8ClampedArray?Math.floor(255*(0,_math_Color_js__WEBPACK_IMPORTED_MODULE_1__.PB)(data[i]/255)):(0,_math_Color_js__WEBPACK_IMPORTED_MODULE_1__.PB)(data[i]);return{data,width:image.width,height:image.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),image}}__name(ImageUtils,"ImageUtils")},7310:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>BoxGeometry});var _core_BufferGeometry_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(875),_core_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6192),_math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3104);class BoxGeometry extends _core_BufferGeometry_js__WEBPACK_IMPORTED_MODULE_0__.u{constructor(width=1,height=1,depth=1,widthSegments=1,heightSegments=1,depthSegments=1){super(),this.type="BoxGeometry",this.parameters={width,height,depth,widthSegments,heightSegments,depthSegments};const scope=this;widthSegments=Math.floor(widthSegments),heightSegments=Math.floor(heightSegments),depthSegments=Math.floor(depthSegments);const indices=[],vertices=[],normals=[],uvs=[];let numberOfVertices=0,groupStart=0;function buildPlane(u,v,w,udir,vdir,width2,height2,depth2,gridX,gridY,materialIndex){const segmentWidth=width2/gridX,segmentHeight=height2/gridY,widthHalf=width2/2,heightHalf=height2/2,depthHalf=depth2/2,gridX1=gridX+1,gridY1=gridY+1;let vertexCounter=0,groupCount=0;const vector=new _math_Vector3_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let iy=0;iy<gridY1;iy++){const y=iy*segmentHeight-heightHalf;for(let ix=0;ix<gridX1;ix++)vector[u]=(ix*segmentWidth-widthHalf)*udir,vector[v]=y*vdir,vector[w]=depthHalf,vertices.push(vector.x,vector.y,vector.z),vector[u]=0,vector[v]=0,vector[w]=depth2>0?1:-1,normals.push(vector.x,vector.y,vector.z),uvs.push(ix/gridX),uvs.push(1-iy/gridY),vertexCounter+=1}for(let iy=0;iy<gridY;iy++)for(let ix=0;ix<gridX;ix++){const b=numberOfVertices+ix+gridX1*(iy+1),c=numberOfVertices+(ix+1)+gridX1*(iy+1),d=numberOfVertices+(ix+1)+gridX1*iy;indices.push(numberOfVertices+ix+gridX1*iy,b,d),indices.push(b,c,d),groupCount+=6}scope.addGroup(groupStart,groupCount,materialIndex),groupStart+=groupCount,numberOfVertices+=vertexCounter}buildPlane("z","y","x",-1,-1,depth,height,width,depthSegments,heightSegments,0),buildPlane("z","y","x",1,-1,depth,height,-width,depthSegments,heightSegments,1),buildPlane("x","z","y",1,1,width,depth,height,widthSegments,depthSegments,2),buildPlane("x","z","y",1,-1,width,depth,-height,widthSegments,depthSegments,3),buildPlane("x","y","z",1,-1,width,height,depth,widthSegments,heightSegments,4),buildPlane("x","y","z",-1,-1,width,height,-depth,widthSegments,heightSegments,5),this.setIndex(indices),this.setAttribute("position",new _core_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_1__.a$(vertices,3)),this.setAttribute("normal",new _core_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_1__.a$(normals,3)),this.setAttribute("uv",new _core_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_1__.a$(uvs,2)),__name(buildPlane,"buildPlane")}static fromJSON(data){return new BoxGeometry(data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments)}}__name(BoxGeometry,"BoxGeometry")},5073:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>PlaneGeometry});var _core_BufferGeometry_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(875),_core_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6192);class PlaneGeometry extends _core_BufferGeometry_js__WEBPACK_IMPORTED_MODULE_0__.u{constructor(width=1,height=1,widthSegments=1,heightSegments=1){super(),this.type="PlaneGeometry",this.parameters={width,height,widthSegments,heightSegments};const width_half=width/2,height_half=height/2,gridX=Math.floor(widthSegments),gridY=Math.floor(heightSegments),gridX1=gridX+1,gridY1=gridY+1,segment_width=width/gridX,segment_height=height/gridY,indices=[],vertices=[],normals=[],uvs=[];for(let iy=0;iy<gridY1;iy++){const y=iy*segment_height-height_half;for(let ix=0;ix<gridX1;ix++)vertices.push(ix*segment_width-width_half,-y,0),normals.push(0,0,1),uvs.push(ix/gridX),uvs.push(1-iy/gridY)}for(let iy=0;iy<gridY;iy++)for(let ix=0;ix<gridX;ix++){const b=ix+gridX1*(iy+1),c=ix+1+gridX1*(iy+1),d=ix+1+gridX1*iy;indices.push(ix+gridX1*iy,b,d),indices.push(b,c,d)}this.setIndex(indices),this.setAttribute("position",new _core_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_1__.a$(vertices,3)),this.setAttribute("normal",new _core_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_1__.a$(normals,3)),this.setAttribute("uv",new _core_BufferAttribute_js__WEBPACK_IMPORTED_MODULE_1__.a$(uvs,2))}static fromJSON(data){return new PlaneGeometry(data.width,data.height,data.widthSegments,data.heightSegments)}}__name(PlaneGeometry,"PlaneGeometry")},5249:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>TextureLoader});const Cache={enabled:!1,files:{},add:function(key,file){!1!==this.enabled&&(this.files[key]=file)},get:function(key){if(!1!==this.enabled)return this.files[key]},remove:function(key){delete this.files[key]},clear:function(){this.files={}}};class LoadingManager{constructor(onLoad,onProgress,onError){const scope=this;let urlModifier,isLoading=!1,itemsLoaded=0,itemsTotal=0;const handlers=[];this.onStart=void 0,this.onLoad=onLoad,this.onProgress=onProgress,this.onError=onError,this.itemStart=function(url){itemsTotal++,!1===isLoading&&void 0!==scope.onStart&&scope.onStart(url,itemsLoaded,itemsTotal),isLoading=!0},this.itemEnd=function(url){itemsLoaded++,void 0!==scope.onProgress&&scope.onProgress(url,itemsLoaded,itemsTotal),itemsLoaded===itemsTotal&&(isLoading=!1,void 0!==scope.onLoad&&scope.onLoad())},this.itemError=function(url){void 0!==scope.onError&&scope.onError(url)},this.resolveURL=function(url){return urlModifier?urlModifier(url):url},this.setURLModifier=function(transform){return urlModifier=transform,this},this.addHandler=function(regex,loader){return handlers.push(regex,loader),this},this.removeHandler=function(regex){const index=handlers.indexOf(regex);return-1!==index&&handlers.splice(index,2),this},this.getHandler=function(file){for(let i=0,l=handlers.length;i<l;i+=2){const regex=handlers[i],loader=handlers[i+1];if(regex.global&&(regex.lastIndex=0),regex.test(file))return loader}return null}}}__name(LoadingManager,"LoadingManager");const DefaultLoadingManager=new LoadingManager;class Loader{constructor(manager){this.manager=void 0!==manager?manager:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(url,onProgress){const scope=this;return new Promise(function(resolve,reject){scope.load(url,resolve,onProgress,reject)})}parse(){}setCrossOrigin(crossOrigin){return this.crossOrigin=crossOrigin,this}setWithCredentials(value){return this.withCredentials=value,this}setPath(path){return this.path=path,this}setResourcePath(resourcePath){return this.resourcePath=resourcePath,this}setRequestHeader(requestHeader){return this.requestHeader=requestHeader,this}}__name(Loader,"Loader");var utils=__webpack_require__(3436);class ImageLoader extends Loader{constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){void 0!==this.path&&(url=this.path+url),url=this.manager.resolveURL(url);const scope=this,cached=Cache.get(url);if(void 0!==cached)return scope.manager.itemStart(url),setTimeout(function(){onLoad&&onLoad(cached),scope.manager.itemEnd(url)},0),cached;const image=(0,utils.c)("img");function onImageLoad(){removeEventListeners(),Cache.add(url,this),onLoad&&onLoad(this),scope.manager.itemEnd(url)}function onImageError(event){removeEventListeners(),onError&&onError(event),scope.manager.itemError(url),scope.manager.itemEnd(url)}function removeEventListeners(){image.removeEventListener("load",onImageLoad,!1),image.removeEventListener("error",onImageError,!1)}return __name(onImageLoad,"onImageLoad"),__name(onImageError,"onImageError"),__name(removeEventListeners,"removeEventListeners"),image.addEventListener("load",onImageLoad,!1),image.addEventListener("error",onImageError,!1),"data:"!==url.slice(0,5)&&void 0!==this.crossOrigin&&(image.crossOrigin=this.crossOrigin),scope.manager.itemStart(url),image.src=url,image}}__name(ImageLoader,"ImageLoader");var Texture=__webpack_require__(5346);class TextureLoader extends Loader{constructor(manager){super(manager)}load(url,onLoad,onProgress,onError){const texture=new Texture.x,loader=new ImageLoader(this.manager);return loader.setCrossOrigin(this.crossOrigin),loader.setPath(this.path),loader.load(url,function(image){texture.image=image,texture.needsUpdate=!0,void 0!==onLoad&&onLoad(texture)},onProgress,onError),texture}}__name(TextureLoader,"TextureLoader")},8252:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>LineBasicMaterial});var _Material_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7589),_math_Color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2746);class LineBasicMaterial extends _Material_js__WEBPACK_IMPORTED_MODULE_0__.F{constructor(parameters){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _math_Color_js__WEBPACK_IMPORTED_MODULE_1__.I(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.linewidth=source.linewidth,this.linecap=source.linecap,this.linejoin=source.linejoin,this.fog=source.fog,this}}__name(LineBasicMaterial,"LineBasicMaterial")},7589:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>Material});var _core_EventDispatcher_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1168),_constants_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8007),_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4090);let materialId=0;class Material extends _core_EventDispatcher_js__WEBPACK_IMPORTED_MODULE_0__.p{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_1__.DO(),this.name="",this.type="Material",this.blending=_constants_js__WEBPACK_IMPORTED_MODULE_2__.bdR,this.side=_constants_js__WEBPACK_IMPORTED_MODULE_2__.Wl3,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=_constants_js__WEBPACK_IMPORTED_MODULE_2__.k74,this.blendDst=_constants_js__WEBPACK_IMPORTED_MODULE_2__.LgZ,this.blendEquation=_constants_js__WEBPACK_IMPORTED_MODULE_2__.bGH,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=_constants_js__WEBPACK_IMPORTED_MODULE_2__.vCF,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_constants_js__WEBPACK_IMPORTED_MODULE_2__.cum,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_constants_js__WEBPACK_IMPORTED_MODULE_2__.x5V,this.stencilZFail=_constants_js__WEBPACK_IMPORTED_MODULE_2__.x5V,this.stencilZPass=_constants_js__WEBPACK_IMPORTED_MODULE_2__.x5V,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(value){this._alphaTest>0!=value>0&&this.version++,this._alphaTest=value}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(values){if(void 0!==values)for(const key in values){const newValue=values[key];if(void 0===newValue){console.warn("THREE.Material: '"+key+"' parameter is undefined.");continue}const currentValue=this[key];void 0!==currentValue?currentValue&&currentValue.isColor?currentValue.set(newValue):currentValue&&currentValue.isVector3&&newValue&&newValue.isVector3?currentValue.copy(newValue):this[key]=newValue:console.warn("THREE."+this.type+": '"+key+"' is not a property of this material.")}}toJSON(meta){const isRootObject=void 0===meta||"string"==typeof meta;isRootObject&&(meta={textures:{},images:{}});const data={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function extractFromCache(cache){const values=[];for(const key in cache){const data2=cache[key];delete data2.metadata,values.push(data2)}return values}if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.color&&this.color.isColor&&(data.color=this.color.getHex()),void 0!==this.roughness&&(data.roughness=this.roughness),void 0!==this.metalness&&(data.metalness=this.metalness),void 0!==this.sheen&&(data.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(data.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(data.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(data.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(data.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(data.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(data.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(data.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(data.shininess=this.shininess),void 0!==this.clearcoat&&(data.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(data.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(data.clearcoatMap=this.clearcoatMap.toJSON(meta).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(data.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(meta).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(data.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(meta).uuid,data.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(data.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(data.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(data.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(data.iridescenceMap=this.iridescenceMap.toJSON(meta).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(data.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(meta).uuid),this.map&&this.map.isTexture&&(data.map=this.map.toJSON(meta).uuid),this.matcap&&this.matcap.isTexture&&(data.matcap=this.matcap.toJSON(meta).uuid),this.alphaMap&&this.alphaMap.isTexture&&(data.alphaMap=this.alphaMap.toJSON(meta).uuid),this.lightMap&&this.lightMap.isTexture&&(data.lightMap=this.lightMap.toJSON(meta).uuid,data.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(data.aoMap=this.aoMap.toJSON(meta).uuid,data.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(data.bumpMap=this.bumpMap.toJSON(meta).uuid,data.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(data.normalMap=this.normalMap.toJSON(meta).uuid,data.normalMapType=this.normalMapType,data.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(data.displacementMap=this.displacementMap.toJSON(meta).uuid,data.displacementScale=this.displacementScale,data.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(data.roughnessMap=this.roughnessMap.toJSON(meta).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(data.metalnessMap=this.metalnessMap.toJSON(meta).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(data.emissiveMap=this.emissiveMap.toJSON(meta).uuid),this.specularMap&&this.specularMap.isTexture&&(data.specularMap=this.specularMap.toJSON(meta).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(data.specularIntensityMap=this.specularIntensityMap.toJSON(meta).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(data.specularColorMap=this.specularColorMap.toJSON(meta).uuid),this.envMap&&this.envMap.isTexture&&(data.envMap=this.envMap.toJSON(meta).uuid,void 0!==this.combine&&(data.combine=this.combine)),void 0!==this.envMapIntensity&&(data.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(data.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(data.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(data.gradientMap=this.gradientMap.toJSON(meta).uuid),void 0!==this.transmission&&(data.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(data.transmissionMap=this.transmissionMap.toJSON(meta).uuid),void 0!==this.thickness&&(data.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(data.thicknessMap=this.thicknessMap.toJSON(meta).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(data.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(data.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(data.size=this.size),null!==this.shadowSide&&(data.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(data.sizeAttenuation=this.sizeAttenuation),this.blending!==_constants_js__WEBPACK_IMPORTED_MODULE_2__.bdR&&(data.blending=this.blending),this.side!==_constants_js__WEBPACK_IMPORTED_MODULE_2__.Wl3&&(data.side=this.side),this.vertexColors&&(data.vertexColors=!0),this.opacity<1&&(data.opacity=this.opacity),!0===this.transparent&&(data.transparent=this.transparent),data.depthFunc=this.depthFunc,data.depthTest=this.depthTest,data.depthWrite=this.depthWrite,data.colorWrite=this.colorWrite,data.stencilWrite=this.stencilWrite,data.stencilWriteMask=this.stencilWriteMask,data.stencilFunc=this.stencilFunc,data.stencilRef=this.stencilRef,data.stencilFuncMask=this.stencilFuncMask,data.stencilFail=this.stencilFail,data.stencilZFail=this.stencilZFail,data.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(data.rotation=this.rotation),!0===this.polygonOffset&&(data.polygonOffset=!0),0!==this.polygonOffsetFactor&&(data.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(data.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(data.linewidth=this.linewidth),void 0!==this.dashSize&&(data.dashSize=this.dashSize),void 0!==this.gapSize&&(data.gapSize=this.gapSize),void 0!==this.scale&&(data.scale=this.scale),!0===this.dithering&&(data.dithering=!0),this.alphaTest>0&&(data.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(data.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(data.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(data.wireframe=this.wireframe),this.wireframeLinewidth>1&&(data.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(data.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(data.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(data.flatShading=this.flatShading),!1===this.visible&&(data.visible=!1),!1===this.toneMapped&&(data.toneMapped=!1),!1===this.fog&&(data.fog=!1),Object.keys(this.userData).length>0&&(data.userData=this.userData),__name(extractFromCache,"extractFromCache"),isRootObject){const textures=extractFromCache(meta.textures),images=extractFromCache(meta.images);textures.length>0&&(data.textures=textures),images.length>0&&(data.images=images)}return data}clone(){return(new this.constructor).copy(this)}copy(source){this.name=source.name,this.blending=source.blending,this.side=source.side,this.vertexColors=source.vertexColors,this.opacity=source.opacity,this.transparent=source.transparent,this.blendSrc=source.blendSrc,this.blendDst=source.blendDst,this.blendEquation=source.blendEquation,this.blendSrcAlpha=source.blendSrcAlpha,this.blendDstAlpha=source.blendDstAlpha,this.blendEquationAlpha=source.blendEquationAlpha,this.depthFunc=source.depthFunc,this.depthTest=source.depthTest,this.depthWrite=source.depthWrite,this.stencilWriteMask=source.stencilWriteMask,this.stencilFunc=source.stencilFunc,this.stencilRef=source.stencilRef,this.stencilFuncMask=source.stencilFuncMask,this.stencilFail=source.stencilFail,this.stencilZFail=source.stencilZFail,this.stencilZPass=source.stencilZPass,this.stencilWrite=source.stencilWrite;const srcPlanes=source.clippingPlanes;let dstPlanes=null;if(null!==srcPlanes){const n=srcPlanes.length;dstPlanes=new Array(n);for(let i=0;i!==n;++i)dstPlanes[i]=srcPlanes[i].clone()}return this.clippingPlanes=dstPlanes,this.clipIntersection=source.clipIntersection,this.clipShadows=source.clipShadows,this.shadowSide=source.shadowSide,this.colorWrite=source.colorWrite,this.precision=source.precision,this.polygonOffset=source.polygonOffset,this.polygonOffsetFactor=source.polygonOffsetFactor,this.polygonOffsetUnits=source.polygonOffsetUnits,this.dithering=source.dithering,this.alphaTest=source.alphaTest,this.alphaToCoverage=source.alphaToCoverage,this.premultipliedAlpha=source.premultipliedAlpha,this.visible=source.visible,this.toneMapped=source.toneMapped,this.userData=JSON.parse(JSON.stringify(source.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(value){!0===value&&this.version++}}__name(Material,"Material")},4691:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>MeshBasicMaterial});var _Material_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7589),_constants_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8007),_math_Color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2746);class MeshBasicMaterial extends _Material_js__WEBPACK_IMPORTED_MODULE_0__.F{constructor(parameters){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _math_Color_js__WEBPACK_IMPORTED_MODULE_1__.I(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_constants_js__WEBPACK_IMPORTED_MODULE_2__.Ns1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.fog=source.fog,this}}__name(MeshBasicMaterial,"MeshBasicMaterial")},8946:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>MeshStandardMaterial});var _constants_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8007),_Material_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7589),_math_Vector2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2319),_math_Color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2746);class MeshStandardMaterial extends _Material_js__WEBPACK_IMPORTED_MODULE_0__.F{constructor(parameters){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _math_Color_js__WEBPACK_IMPORTED_MODULE_1__.I(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _math_Color_js__WEBPACK_IMPORTED_MODULE_1__.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_constants_js__WEBPACK_IMPORTED_MODULE_2__.IOt,this.normalScale=new _math_Vector2_js__WEBPACK_IMPORTED_MODULE_3__.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(parameters)}copy(source){return super.copy(source),this.defines={STANDARD:""},this.color.copy(source.color),this.roughness=source.roughness,this.metalness=source.metalness,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.roughnessMap=source.roughnessMap,this.metalnessMap=source.metalnessMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapIntensity=source.envMapIntensity,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}__name(MeshStandardMaterial,"MeshStandardMaterial")},7206:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Box3});var _Vector3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3104);class Box3{constructor(min=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P(1/0,1/0,1/0),max=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=min,this.max=max}set(min,max){return this.min.copy(min),this.max.copy(max),this}setFromArray(array){let minX=1/0,minY=1/0,minZ=1/0,maxX=-1/0,maxY=-1/0,maxZ=-1/0;for(let i=0,l=array.length;i<l;i+=3){const x=array[i],y=array[i+1],z=array[i+2];x<minX&&(minX=x),y<minY&&(minY=y),z<minZ&&(minZ=z),x>maxX&&(maxX=x),y>maxY&&(maxY=y),z>maxZ&&(maxZ=z)}return this.min.set(minX,minY,minZ),this.max.set(maxX,maxY,maxZ),this}setFromBufferAttribute(attribute){let minX=1/0,minY=1/0,minZ=1/0,maxX=-1/0,maxY=-1/0,maxZ=-1/0;for(let i=0,l=attribute.count;i<l;i++){const x=attribute.getX(i),y=attribute.getY(i),z=attribute.getZ(i);x<minX&&(minX=x),y<minY&&(minY=y),z<minZ&&(minZ=z),x>maxX&&(maxX=x),y>maxY&&(maxY=y),z>maxZ&&(maxZ=z)}return this.min.set(minX,minY,minZ),this.max.set(maxX,maxY,maxZ),this}setFromPoints(points){this.makeEmpty();for(let i=0,il=points.length;i<il;i++)this.expandByPoint(points[i]);return this}setFromCenterAndSize(center,size){const halfSize=_vector.copy(size).multiplyScalar(.5);return this.min.copy(center).sub(halfSize),this.max.copy(center).add(halfSize),this}setFromObject(object,precise=!1){return this.makeEmpty(),this.expandByObject(object,precise)}clone(){return(new this.constructor).copy(this)}copy(box){return this.min.copy(box.min),this.max.copy(box.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(target){return this.isEmpty()?target.set(0,0,0):target.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(target){return this.isEmpty()?target.set(0,0,0):target.subVectors(this.max,this.min)}expandByPoint(point){return this.min.min(point),this.max.max(point),this}expandByVector(vector){return this.min.sub(vector),this.max.add(vector),this}expandByScalar(scalar){return this.min.addScalar(-scalar),this.max.addScalar(scalar),this}expandByObject(object,precise=!1){object.updateWorldMatrix(!1,!1);const geometry=object.geometry;if(void 0!==geometry)if(precise&&null!=geometry.attributes&&void 0!==geometry.attributes.position){const position=geometry.attributes.position;for(let i=0,l=position.count;i<l;i++)_vector.fromBufferAttribute(position,i).applyMatrix4(object.matrixWorld),this.expandByPoint(_vector)}else null===geometry.boundingBox&&geometry.computeBoundingBox(),_box.copy(geometry.boundingBox),_box.applyMatrix4(object.matrixWorld),this.union(_box);const children=object.children;for(let i=0,l=children.length;i<l;i++)this.expandByObject(children[i],precise);return this}containsPoint(point){return!(point.x<this.min.x||point.x>this.max.x||point.y<this.min.y||point.y>this.max.y||point.z<this.min.z||point.z>this.max.z)}containsBox(box){return this.min.x<=box.min.x&&box.max.x<=this.max.x&&this.min.y<=box.min.y&&box.max.y<=this.max.y&&this.min.z<=box.min.z&&box.max.z<=this.max.z}getParameter(point,target){return target.set((point.x-this.min.x)/(this.max.x-this.min.x),(point.y-this.min.y)/(this.max.y-this.min.y),(point.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(box){return!(box.max.x<this.min.x||box.min.x>this.max.x||box.max.y<this.min.y||box.min.y>this.max.y||box.max.z<this.min.z||box.min.z>this.max.z)}intersectsSphere(sphere){return this.clampPoint(sphere.center,_vector),_vector.distanceToSquared(sphere.center)<=sphere.radius*sphere.radius}intersectsPlane(plane){let min,max;return plane.normal.x>0?(min=plane.normal.x*this.min.x,max=plane.normal.x*this.max.x):(min=plane.normal.x*this.max.x,max=plane.normal.x*this.min.x),plane.normal.y>0?(min+=plane.normal.y*this.min.y,max+=plane.normal.y*this.max.y):(min+=plane.normal.y*this.max.y,max+=plane.normal.y*this.min.y),plane.normal.z>0?(min+=plane.normal.z*this.min.z,max+=plane.normal.z*this.max.z):(min+=plane.normal.z*this.max.z,max+=plane.normal.z*this.min.z),min<=-plane.constant&&max>=-plane.constant}intersectsTriangle(triangle){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(triangle.a,_center),_v1.subVectors(triangle.b,_center),_v2.subVectors(triangle.c,_center),_f0.subVectors(_v1,_v0),_f1.subVectors(_v2,_v1),_f2.subVectors(_v0,_v2);let axes=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!(!satForAxes(axes,_v0,_v1,_v2,_extents)||(axes=[1,0,0,0,1,0,0,0,1],!satForAxes(axes,_v0,_v1,_v2,_extents)))&&(_triangleNormal.crossVectors(_f0,_f1),axes=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(axes,_v0,_v1,_v2,_extents))}clampPoint(point,target){return target.copy(point).clamp(this.min,this.max)}distanceToPoint(point){return _vector.copy(point).clamp(this.min,this.max).sub(point).length()}getBoundingSphere(target){return this.getCenter(target.center),target.radius=.5*this.getSize(_vector).length(),target}intersect(box){return this.min.max(box.min),this.max.min(box.max),this.isEmpty()&&this.makeEmpty(),this}union(box){return this.min.min(box.min),this.max.max(box.max),this}applyMatrix4(matrix){return this.isEmpty()||(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(matrix),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(matrix),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(matrix),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(matrix),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(matrix),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(matrix),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(matrix),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(matrix),this.setFromPoints(_points)),this}translate(offset){return this.min.add(offset),this.max.add(offset),this}equals(box){return box.min.equals(this.min)&&box.max.equals(this.max)}}__name(Box3,"Box3");const _points=[new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P],_vector=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_box=new Box3,_v0=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_v1=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_v2=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_f0=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_f1=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_f2=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_center=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_extents=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_triangleNormal=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_testAxis=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P;function satForAxes(axes,v0,v1,v2,extents){for(let i=0,j=axes.length-3;i<=j;i+=3){_testAxis.fromArray(axes,i);const r=extents.x*Math.abs(_testAxis.x)+extents.y*Math.abs(_testAxis.y)+extents.z*Math.abs(_testAxis.z),p0=v0.dot(_testAxis),p1=v1.dot(_testAxis),p2=v2.dot(_testAxis);if(Math.max(-Math.max(p0,p1,p2),Math.min(p0,p1,p2))>r)return!1}return!0}__name(satForAxes,"satForAxes")},2746:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>Color});var _MathUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4090),_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(186),_constants_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8007);const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_rgb={r:0,g:0,b:0},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+6*(q-p)*(2/3-t):p}function toComponents(source,target){return target.r=source.r,target.g=source.g,target.b=source.b,target}__name(hue2rgb,"hue2rgb"),__name(toComponents,"toComponents");let Color=(()=>{class Color2{constructor(r,g,b){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===g&&void 0===b?this.set(r):this.setRGB(r,g,b)}set(value){return value&&value.isColor?this.copy(value):"number"==typeof value?this.setHex(value):"string"==typeof value&&this.setStyle(value),this}setScalar(scalar){return this.r=scalar,this.g=scalar,this.b=scalar,this}setHex(hex,colorSpace=_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_){return hex=Math.floor(hex),this.r=(hex>>16&255)/255,this.g=(hex>>8&255)/255,this.b=(255&hex)/255,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.toWorkingColorSpace(this,colorSpace),this}setRGB(r,g,b,colorSpace=_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.workingColorSpace){return this.r=r,this.g=g,this.b=b,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.toWorkingColorSpace(this,colorSpace),this}setHSL(h,s,l,colorSpace=_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.workingColorSpace){if(h=(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.kz)(h,1),s=(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.uZ)(s,0,1),l=(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.uZ)(l,0,1),0===s)this.r=this.g=this.b=l;else{const p=l<=.5?l*(1+s):l+s-l*s,q=2*l-p;this.r=hue2rgb(q,p,h+1/3),this.g=hue2rgb(q,p,h),this.b=hue2rgb(q,p,h-1/3)}return _ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.toWorkingColorSpace(this,colorSpace),this}setStyle(style,colorSpace=_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_){function handleAlpha(string){void 0!==string&&parseFloat(string)<1&&console.warn("THREE.Color: Alpha component of "+style+" will be ignored.")}let m;if(__name(handleAlpha,"handleAlpha"),m=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(style)){let color;const components=m[2];switch(m[1]){case"rgb":case"rgba":if(color=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(components))return this.r=Math.min(255,parseInt(color[1],10))/255,this.g=Math.min(255,parseInt(color[2],10))/255,this.b=Math.min(255,parseInt(color[3],10))/255,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.toWorkingColorSpace(this,colorSpace),handleAlpha(color[4]),this;if(color=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(components))return this.r=Math.min(100,parseInt(color[1],10))/100,this.g=Math.min(100,parseInt(color[2],10))/100,this.b=Math.min(100,parseInt(color[3],10))/100,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.toWorkingColorSpace(this,colorSpace),handleAlpha(color[4]),this;break;case"hsl":case"hsla":if(color=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(components)){const h=parseFloat(color[1])/360,s=parseFloat(color[2])/100,l=parseFloat(color[3])/100;return handleAlpha(color[4]),this.setHSL(h,s,l,colorSpace)}}}else if(m=/^\#([A-Fa-f\d]+)$/.exec(style)){const hex=m[1],size=hex.length;if(3===size)return this.r=parseInt(hex.charAt(0)+hex.charAt(0),16)/255,this.g=parseInt(hex.charAt(1)+hex.charAt(1),16)/255,this.b=parseInt(hex.charAt(2)+hex.charAt(2),16)/255,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.toWorkingColorSpace(this,colorSpace),this;if(6===size)return this.r=parseInt(hex.charAt(0)+hex.charAt(1),16)/255,this.g=parseInt(hex.charAt(2)+hex.charAt(3),16)/255,this.b=parseInt(hex.charAt(4)+hex.charAt(5),16)/255,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.toWorkingColorSpace(this,colorSpace),this}return style&&style.length>0?this.setColorName(style,colorSpace):this}setColorName(style,colorSpace=_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_){const hex=_colorKeywords[style.toLowerCase()];return void 0!==hex?this.setHex(hex,colorSpace):console.warn("THREE.Color: Unknown color "+style),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(color){return this.r=color.r,this.g=color.g,this.b=color.b,this}copySRGBToLinear(color){return this.r=(0,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.PB)(color.r),this.g=(0,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.PB)(color.g),this.b=(0,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.PB)(color.b),this}copyLinearToSRGB(color){return this.r=(0,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.QP)(color.r),this.g=(0,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.QP)(color.g),this.b=(0,_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.QP)(color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(colorSpace=_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_){return _ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.fromWorkingColorSpace(toComponents(this,_rgb),colorSpace),(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.uZ)(255*_rgb.r,0,255)<<16^(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.uZ)(255*_rgb.g,0,255)<<8^(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.uZ)(255*_rgb.b,0,255)<<0}getHexString(colorSpace=_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_){return("000000"+this.getHex(colorSpace).toString(16)).slice(-6)}getHSL(target,colorSpace=_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.workingColorSpace){_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.fromWorkingColorSpace(toComponents(this,_rgb),colorSpace);const r=_rgb.r,g=_rgb.g,b=_rgb.b,max=Math.max(r,g,b),min=Math.min(r,g,b);let hue,saturation;const lightness=(min+max)/2;if(min===max)hue=0,saturation=0;else{const delta=max-min;switch(saturation=lightness<=.5?delta/(max+min):delta/(2-max-min),max){case r:hue=(g-b)/delta+(g<b?6:0);break;case g:hue=(b-r)/delta+2;break;case b:hue=(r-g)/delta+4}hue/=6}return target.h=hue,target.s=saturation,target.l=lightness,target}getRGB(target,colorSpace=_ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.workingColorSpace){return _ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.fromWorkingColorSpace(toComponents(this,_rgb),colorSpace),target.r=_rgb.r,target.g=_rgb.g,target.b=_rgb.b,target}getStyle(colorSpace=_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_){return _ColorManagement_js__WEBPACK_IMPORTED_MODULE_1__.ep.fromWorkingColorSpace(toComponents(this,_rgb),colorSpace),colorSpace!==_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_?`color(${colorSpace} ${_rgb.r} ${_rgb.g} ${_rgb.b})`:`rgb(${255*_rgb.r|0},${255*_rgb.g|0},${255*_rgb.b|0})`}offsetHSL(h,s,l){return this.getHSL(_hslA),_hslA.h+=h,_hslA.s+=s,_hslA.l+=l,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(color){return this.r+=color.r,this.g+=color.g,this.b+=color.b,this}addColors(color1,color2){return this.r=color1.r+color2.r,this.g=color1.g+color2.g,this.b=color1.b+color2.b,this}addScalar(s){return this.r+=s,this.g+=s,this.b+=s,this}sub(color){return this.r=Math.max(0,this.r-color.r),this.g=Math.max(0,this.g-color.g),this.b=Math.max(0,this.b-color.b),this}multiply(color){return this.r*=color.r,this.g*=color.g,this.b*=color.b,this}multiplyScalar(s){return this.r*=s,this.g*=s,this.b*=s,this}lerp(color,alpha){return this.r+=(color.r-this.r)*alpha,this.g+=(color.g-this.g)*alpha,this.b+=(color.b-this.b)*alpha,this}lerpColors(color1,color2,alpha){return this.r=color1.r+(color2.r-color1.r)*alpha,this.g=color1.g+(color2.g-color1.g)*alpha,this.b=color1.b+(color2.b-color1.b)*alpha,this}lerpHSL(color,alpha){this.getHSL(_hslA),color.getHSL(_hslB);const h=(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.t7)(_hslA.h,_hslB.h,alpha),s=(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.t7)(_hslA.s,_hslB.s,alpha),l=(0,_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.t7)(_hslA.l,_hslB.l,alpha);return this.setHSL(h,s,l),this}equals(c){return c.r===this.r&&c.g===this.g&&c.b===this.b}fromArray(array,offset=0){return this.r=array[offset],this.g=array[offset+1],this.b=array[offset+2],this}toArray(array=[],offset=0){return array[offset]=this.r,array[offset+1]=this.g,array[offset+2]=this.b,array}fromBufferAttribute(attribute,index){return this.r=attribute.getX(index),this.g=attribute.getY(index),this.b=attribute.getZ(index),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return __name(Color2,"Color"),Color2.NAMES=_colorKeywords,Color2})()},186:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{PB:()=>SRGBToLinear,QP:()=>LinearToSRGB,ep:()=>ColorManagement});var _constants_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8007);function SRGBToLinear(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function LinearToSRGB(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}__name(SRGBToLinear,"SRGBToLinear"),__name(LinearToSRGB,"LinearToSRGB");const FN={[_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_]:{[_constants_js__WEBPACK_IMPORTED_MODULE_0__.GUF]:SRGBToLinear},[_constants_js__WEBPACK_IMPORTED_MODULE_0__.GUF]:{[_constants_js__WEBPACK_IMPORTED_MODULE_0__.KI_]:LinearToSRGB}},ColorManagement={legacyMode:!0,get workingColorSpace(){return _constants_js__WEBPACK_IMPORTED_MODULE_0__.GUF},set workingColorSpace(colorSpace){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(color,sourceColorSpace,targetColorSpace){if(this.legacyMode||sourceColorSpace===targetColorSpace||!sourceColorSpace||!targetColorSpace)return color;if(FN[sourceColorSpace]&&void 0!==FN[sourceColorSpace][targetColorSpace]){const fn=FN[sourceColorSpace][targetColorSpace];return color.r=fn(color.r),color.g=fn(color.g),color.b=fn(color.b),color}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(color,targetColorSpace){return this.convert(color,this.workingColorSpace,targetColorSpace)},toWorkingColorSpace:function(color,sourceColorSpace){return this.convert(color,sourceColorSpace,this.workingColorSpace)}}},4090:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{DO:()=>generateUUID,Fv:()=>normalize,I3:()=>RAD2DEG,Id:()=>degToRad,cY:()=>denormalize,gy:()=>floorPowerOfTwo,kz:()=>euclideanModulo,qW:()=>DEG2RAD,t7:()=>lerp,uZ:()=>clamp,wt:()=>isPowerOfTwo});const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const d0=4294967295*Math.random()|0,d1=4294967295*Math.random()|0,d2=4294967295*Math.random()|0,d3=4294967295*Math.random()|0;return(_lut[255&d0]+_lut[d0>>8&255]+_lut[d0>>16&255]+_lut[d0>>24&255]+"-"+_lut[255&d1]+_lut[d1>>8&255]+"-"+_lut[d1>>16&15|64]+_lut[d1>>24&255]+"-"+_lut[63&d2|128]+_lut[d2>>8&255]+"-"+_lut[d2>>16&255]+_lut[d2>>24&255]+_lut[255&d3]+_lut[d3>>8&255]+_lut[d3>>16&255]+_lut[d3>>24&255]).toLowerCase()}function clamp(value,min,max){return Math.max(min,Math.min(max,value))}function euclideanModulo(n,m){return(n%m+m)%m}function lerp(x,y,t){return(1-t)*x+t*y}function degToRad(degrees){return degrees*DEG2RAD}function isPowerOfTwo(value){return 0==(value&value-1)&&0!==value}function floorPowerOfTwo(value){return Math.pow(2,Math.floor(Math.log(value)/Math.LN2))}function denormalize(value,array){switch(array.constructor){case Float32Array:return value;case Uint16Array:return value/65535;case Uint8Array:return value/255;case Int16Array:return Math.max(value/32767,-1);case Int8Array:return Math.max(value/127,-1);default:throw new Error("Invalid component type.")}}function normalize(value,array){switch(array.constructor){case Float32Array:return value;case Uint16Array:return Math.round(65535*value);case Uint8Array:return Math.round(255*value);case Int16Array:return Math.round(32767*value);case Int8Array:return Math.round(127*value);default:throw new Error("Invalid component type.")}}__name(generateUUID,"generateUUID"),__name(clamp,"clamp"),__name(euclideanModulo,"euclideanModulo"),__name(function mapLinear(x,a1,a2,b1,b2){return b1+(x-a1)*(b2-b1)/(a2-a1)},"mapLinear"),__name(function inverseLerp(x,y,value){return x!==y?(value-x)/(y-x):0},"inverseLerp"),__name(lerp,"lerp"),__name(function damp(x,y,lambda,dt){return lerp(x,y,1-Math.exp(-lambda*dt))},"damp"),__name(function pingpong(x,length=1){return length-Math.abs(euclideanModulo(x,2*length)-length)},"pingpong"),__name(function smoothstep(x,min,max){return x<=min?0:x>=max?1:(x=(x-min)/(max-min))*x*(3-2*x)},"smoothstep"),__name(function smootherstep(x,min,max){return x<=min?0:x>=max?1:(x=(x-min)/(max-min))*x*x*(x*(6*x-15)+10)},"smootherstep"),__name(function randInt(low,high){return low+Math.floor(Math.random()*(high-low+1))},"randInt"),__name(function randFloat(low,high){return low+Math.random()*(high-low)},"randFloat"),__name(function randFloatSpread(range){return range*(.5-Math.random())},"randFloatSpread"),__name(function seededRandom(s){void 0!==s&&(_seed=s);let t=_seed+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},"seededRandom"),__name(degToRad,"degToRad"),__name(function radToDeg(radians){return radians*RAD2DEG},"radToDeg"),__name(isPowerOfTwo,"isPowerOfTwo"),__name(function ceilPowerOfTwo(value){return Math.pow(2,Math.ceil(Math.log(value)/Math.LN2))},"ceilPowerOfTwo"),__name(floorPowerOfTwo,"floorPowerOfTwo"),__name(function setQuaternionFromProperEuler(q,a,b,c,order){const cos=Math.cos,sin=Math.sin,c2=cos(b/2),s2=sin(b/2),c13=cos((a+c)/2),s13=sin((a+c)/2),c1_3=cos((a-c)/2),s1_3=sin((a-c)/2),c3_1=cos((c-a)/2),s3_1=sin((c-a)/2);switch(order){case"XYX":q.set(c2*s13,s2*c1_3,s2*s1_3,c2*c13);break;case"YZY":q.set(s2*s1_3,c2*s13,s2*c1_3,c2*c13);break;case"ZXZ":q.set(s2*c1_3,s2*s1_3,c2*s13,c2*c13);break;case"XZX":q.set(c2*s13,s2*s3_1,s2*c3_1,c2*c13);break;case"YXY":q.set(s2*c3_1,c2*s13,s2*s3_1,c2*c13);break;case"ZYZ":q.set(s2*s3_1,s2*c3_1,c2*s13,c2*c13);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+order)}},"setQuaternionFromProperEuler"),__name(denormalize,"denormalize"),__name(normalize,"normalize")},6113:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>Matrix3});class Matrix3{constructor(){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(n11,n12,n13,n21,n22,n23,n31,n32,n33){const te=this.elements;return te[0]=n11,te[1]=n21,te[2]=n31,te[3]=n12,te[4]=n22,te[5]=n32,te[6]=n13,te[7]=n23,te[8]=n33,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(m){const te=this.elements,me=m.elements;return te[0]=me[0],te[1]=me[1],te[2]=me[2],te[3]=me[3],te[4]=me[4],te[5]=me[5],te[6]=me[6],te[7]=me[7],te[8]=me[8],this}extractBasis(xAxis,yAxis,zAxis){return xAxis.setFromMatrix3Column(this,0),yAxis.setFromMatrix3Column(this,1),zAxis.setFromMatrix3Column(this,2),this}setFromMatrix4(m){const me=m.elements;return this.set(me[0],me[4],me[8],me[1],me[5],me[9],me[2],me[6],me[10]),this}multiply(m){return this.multiplyMatrices(this,m)}premultiply(m){return this.multiplyMatrices(m,this)}multiplyMatrices(a,b){const ae=a.elements,be=b.elements,te=this.elements,a11=ae[0],a12=ae[3],a13=ae[6],a21=ae[1],a22=ae[4],a23=ae[7],a31=ae[2],a32=ae[5],a33=ae[8],b11=be[0],b12=be[3],b13=be[6],b21=be[1],b22=be[4],b23=be[7],b31=be[2],b32=be[5],b33=be[8];return te[0]=a11*b11+a12*b21+a13*b31,te[3]=a11*b12+a12*b22+a13*b32,te[6]=a11*b13+a12*b23+a13*b33,te[1]=a21*b11+a22*b21+a23*b31,te[4]=a21*b12+a22*b22+a23*b32,te[7]=a21*b13+a22*b23+a23*b33,te[2]=a31*b11+a32*b21+a33*b31,te[5]=a31*b12+a32*b22+a33*b32,te[8]=a31*b13+a32*b23+a33*b33,this}multiplyScalar(s){const te=this.elements;return te[0]*=s,te[3]*=s,te[6]*=s,te[1]*=s,te[4]*=s,te[7]*=s,te[2]*=s,te[5]*=s,te[8]*=s,this}determinant(){const te=this.elements,a=te[0],b=te[1],c=te[2],d=te[3],e=te[4],f=te[5],g=te[6],h=te[7],i=te[8];return a*e*i-a*f*h-b*d*i+b*f*g+c*d*h-c*e*g}invert(){const te=this.elements,n11=te[0],n21=te[1],n31=te[2],n12=te[3],n22=te[4],n32=te[5],n13=te[6],n23=te[7],n33=te[8],t11=n33*n22-n32*n23,t12=n32*n13-n33*n12,t13=n23*n12-n22*n13,det=n11*t11+n21*t12+n31*t13;if(0===det)return this.set(0,0,0,0,0,0,0,0,0);const detInv=1/det;return te[0]=t11*detInv,te[1]=(n31*n23-n33*n21)*detInv,te[2]=(n32*n21-n31*n22)*detInv,te[3]=t12*detInv,te[4]=(n33*n11-n31*n13)*detInv,te[5]=(n31*n12-n32*n11)*detInv,te[6]=t13*detInv,te[7]=(n21*n13-n23*n11)*detInv,te[8]=(n22*n11-n21*n12)*detInv,this}transpose(){let tmp;const m=this.elements;return tmp=m[1],m[1]=m[3],m[3]=tmp,tmp=m[2],m[2]=m[6],m[6]=tmp,tmp=m[5],m[5]=m[7],m[7]=tmp,this}getNormalMatrix(matrix4){return this.setFromMatrix4(matrix4).invert().transpose()}transposeIntoArray(r){const m=this.elements;return r[0]=m[0],r[1]=m[3],r[2]=m[6],r[3]=m[1],r[4]=m[4],r[5]=m[7],r[6]=m[2],r[7]=m[5],r[8]=m[8],this}setUvTransform(tx,ty,sx,sy,rotation,cx,cy){const c=Math.cos(rotation),s=Math.sin(rotation);return this.set(sx*c,sx*s,-sx*(c*cx+s*cy)+cx+tx,-sy*s,sy*c,-sy*(-s*cx+c*cy)+cy+ty,0,0,1),this}scale(sx,sy){return this.premultiply(_m3.makeScale(sx,sy)),this}rotate(theta){return this.premultiply(_m3.makeRotation(-theta)),this}translate(tx,ty){return this.premultiply(_m3.makeTranslation(tx,ty)),this}makeTranslation(x,y){return this.set(1,0,x,0,1,y,0,0,1),this}makeRotation(theta){const c=Math.cos(theta),s=Math.sin(theta);return this.set(c,-s,0,s,c,0,0,0,1),this}makeScale(x,y){return this.set(x,0,0,0,y,0,0,0,1),this}equals(matrix){const te=this.elements,me=matrix.elements;for(let i=0;i<9;i++)if(te[i]!==me[i])return!1;return!0}fromArray(array,offset=0){for(let i=0;i<9;i++)this.elements[i]=array[i+offset];return this}toArray(array=[],offset=0){const te=this.elements;return array[offset]=te[0],array[offset+1]=te[1],array[offset+2]=te[2],array[offset+3]=te[3],array[offset+4]=te[4],array[offset+5]=te[5],array[offset+6]=te[6],array[offset+7]=te[7],array[offset+8]=te[8],array}clone(){return(new this.constructor).fromArray(this.elements)}}__name(Matrix3,"Matrix3");const _m3=new Matrix3},7971:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>Matrix42});var _Vector3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3104);class Matrix42{constructor(){Matrix42.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){const te=this.elements;return te[0]=n11,te[4]=n12,te[8]=n13,te[12]=n14,te[1]=n21,te[5]=n22,te[9]=n23,te[13]=n24,te[2]=n31,te[6]=n32,te[10]=n33,te[14]=n34,te[3]=n41,te[7]=n42,te[11]=n43,te[15]=n44,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix42).fromArray(this.elements)}copy(m){const te=this.elements,me=m.elements;return te[0]=me[0],te[1]=me[1],te[2]=me[2],te[3]=me[3],te[4]=me[4],te[5]=me[5],te[6]=me[6],te[7]=me[7],te[8]=me[8],te[9]=me[9],te[10]=me[10],te[11]=me[11],te[12]=me[12],te[13]=me[13],te[14]=me[14],te[15]=me[15],this}copyPosition(m){const te=this.elements,me=m.elements;return te[12]=me[12],te[13]=me[13],te[14]=me[14],this}setFromMatrix3(m){const me=m.elements;return this.set(me[0],me[3],me[6],0,me[1],me[4],me[7],0,me[2],me[5],me[8],0,0,0,0,1),this}extractBasis(xAxis,yAxis,zAxis){return xAxis.setFromMatrixColumn(this,0),yAxis.setFromMatrixColumn(this,1),zAxis.setFromMatrixColumn(this,2),this}makeBasis(xAxis,yAxis,zAxis){return this.set(xAxis.x,yAxis.x,zAxis.x,0,xAxis.y,yAxis.y,zAxis.y,0,xAxis.z,yAxis.z,zAxis.z,0,0,0,0,1),this}extractRotation(m){const te=this.elements,me=m.elements,scaleX=1/_v1.setFromMatrixColumn(m,0).length(),scaleY=1/_v1.setFromMatrixColumn(m,1).length(),scaleZ=1/_v1.setFromMatrixColumn(m,2).length();return te[0]=me[0]*scaleX,te[1]=me[1]*scaleX,te[2]=me[2]*scaleX,te[3]=0,te[4]=me[4]*scaleY,te[5]=me[5]*scaleY,te[6]=me[6]*scaleY,te[7]=0,te[8]=me[8]*scaleZ,te[9]=me[9]*scaleZ,te[10]=me[10]*scaleZ,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}makeRotationFromEuler(euler){const te=this.elements,x=euler.x,y=euler.y,z=euler.z,a=Math.cos(x),b=Math.sin(x),c=Math.cos(y),d=Math.sin(y),e=Math.cos(z),f=Math.sin(z);if("XYZ"===euler.order){const ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e,te[4]=-c*f,te[8]=d,te[1]=af+be*d,te[5]=ae-bf*d,te[9]=-b*c,te[2]=bf-ae*d,te[6]=be+af*d,te[10]=a*c}else if("YXZ"===euler.order){const ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce+df*b,te[4]=de*b-cf,te[8]=a*d,te[1]=a*f,te[5]=a*e,te[9]=-b,te[2]=cf*b-de,te[6]=df+ce*b,te[10]=a*c}else if("ZXY"===euler.order){const ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce-df*b,te[4]=-a*f,te[8]=de+cf*b,te[1]=cf+de*b,te[5]=a*e,te[9]=df-ce*b,te[2]=-a*d,te[6]=b,te[10]=a*c}else if("ZYX"===euler.order){const ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e,te[4]=be*d-af,te[8]=ae*d+bf,te[1]=c*f,te[5]=bf*d+ae,te[9]=af*d-be,te[2]=-d,te[6]=b*c,te[10]=a*c}else if("YZX"===euler.order){const ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e,te[4]=bd-ac*f,te[8]=bc*f+ad,te[1]=f,te[5]=a*e,te[9]=-b*e,te[2]=-d*e,te[6]=ad*f+bc,te[10]=ac-bd*f}else if("XZY"===euler.order){const ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e,te[4]=-f,te[8]=d*e,te[1]=ac*f+bd,te[5]=a*e,te[9]=ad*f-bc,te[2]=bc*f-ad,te[6]=b*e,te[10]=bd*f+ac}return te[3]=0,te[7]=0,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}makeRotationFromQuaternion(q){return this.compose(_zero,q,_one)}lookAt(eye,target,up){const te=this.elements;return _z.subVectors(eye,target),0===_z.lengthSq()&&(_z.z=1),_z.normalize(),_x.crossVectors(up,_z),0===_x.lengthSq()&&(1===Math.abs(up.z)?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(up,_z)),_x.normalize(),_y.crossVectors(_z,_x),te[0]=_x.x,te[4]=_y.x,te[8]=_z.x,te[1]=_x.y,te[5]=_y.y,te[9]=_z.y,te[2]=_x.z,te[6]=_y.z,te[10]=_z.z,this}multiply(m){return this.multiplyMatrices(this,m)}premultiply(m){return this.multiplyMatrices(m,this)}multiplyMatrices(a,b){const ae=a.elements,be=b.elements,te=this.elements,a11=ae[0],a12=ae[4],a13=ae[8],a14=ae[12],a21=ae[1],a22=ae[5],a23=ae[9],a24=ae[13],a31=ae[2],a32=ae[6],a33=ae[10],a34=ae[14],a41=ae[3],a42=ae[7],a43=ae[11],a44=ae[15],b11=be[0],b12=be[4],b13=be[8],b14=be[12],b21=be[1],b22=be[5],b23=be[9],b24=be[13],b31=be[2],b32=be[6],b33=be[10],b34=be[14],b41=be[3],b42=be[7],b43=be[11],b44=be[15];return te[0]=a11*b11+a12*b21+a13*b31+a14*b41,te[4]=a11*b12+a12*b22+a13*b32+a14*b42,te[8]=a11*b13+a12*b23+a13*b33+a14*b43,te[12]=a11*b14+a12*b24+a13*b34+a14*b44,te[1]=a21*b11+a22*b21+a23*b31+a24*b41,te[5]=a21*b12+a22*b22+a23*b32+a24*b42,te[9]=a21*b13+a22*b23+a23*b33+a24*b43,te[13]=a21*b14+a22*b24+a23*b34+a24*b44,te[2]=a31*b11+a32*b21+a33*b31+a34*b41,te[6]=a31*b12+a32*b22+a33*b32+a34*b42,te[10]=a31*b13+a32*b23+a33*b33+a34*b43,te[14]=a31*b14+a32*b24+a33*b34+a34*b44,te[3]=a41*b11+a42*b21+a43*b31+a44*b41,te[7]=a41*b12+a42*b22+a43*b32+a44*b42,te[11]=a41*b13+a42*b23+a43*b33+a44*b43,te[15]=a41*b14+a42*b24+a43*b34+a44*b44,this}multiplyScalar(s){const te=this.elements;return te[0]*=s,te[4]*=s,te[8]*=s,te[12]*=s,te[1]*=s,te[5]*=s,te[9]*=s,te[13]*=s,te[2]*=s,te[6]*=s,te[10]*=s,te[14]*=s,te[3]*=s,te[7]*=s,te[11]*=s,te[15]*=s,this}determinant(){const te=this.elements,n11=te[0],n12=te[4],n13=te[8],n14=te[12],n21=te[1],n22=te[5],n23=te[9],n24=te[13],n31=te[2],n32=te[6],n33=te[10],n34=te[14];return te[3]*(+n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34)+te[7]*(+n11*n23*n34-n11*n24*n33+n14*n21*n33-n13*n21*n34+n13*n24*n31-n14*n23*n31)+te[11]*(+n11*n24*n32-n11*n22*n34-n14*n21*n32+n12*n21*n34+n14*n22*n31-n12*n24*n31)+te[15]*(-n13*n22*n31-n11*n23*n32+n11*n22*n33+n13*n21*n32-n12*n21*n33+n12*n23*n31)}transpose(){const te=this.elements;let tmp;return tmp=te[1],te[1]=te[4],te[4]=tmp,tmp=te[2],te[2]=te[8],te[8]=tmp,tmp=te[6],te[6]=te[9],te[9]=tmp,tmp=te[3],te[3]=te[12],te[12]=tmp,tmp=te[7],te[7]=te[13],te[13]=tmp,tmp=te[11],te[11]=te[14],te[14]=tmp,this}setPosition(x,y,z){const te=this.elements;return x.isVector3?(te[12]=x.x,te[13]=x.y,te[14]=x.z):(te[12]=x,te[13]=y,te[14]=z),this}invert(){const te=this.elements,n11=te[0],n21=te[1],n31=te[2],n41=te[3],n12=te[4],n22=te[5],n32=te[6],n42=te[7],n13=te[8],n23=te[9],n33=te[10],n43=te[11],n14=te[12],n24=te[13],n34=te[14],n44=te[15],t11=n23*n34*n42-n24*n33*n42+n24*n32*n43-n22*n34*n43-n23*n32*n44+n22*n33*n44,t12=n14*n33*n42-n13*n34*n42-n14*n32*n43+n12*n34*n43+n13*n32*n44-n12*n33*n44,t13=n13*n24*n42-n14*n23*n42+n14*n22*n43-n12*n24*n43-n13*n22*n44+n12*n23*n44,t14=n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34,det=n11*t11+n21*t12+n31*t13+n41*t14;if(0===det)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const detInv=1/det;return te[0]=t11*detInv,te[1]=(n24*n33*n41-n23*n34*n41-n24*n31*n43+n21*n34*n43+n23*n31*n44-n21*n33*n44)*detInv,te[2]=(n22*n34*n41-n24*n32*n41+n24*n31*n42-n21*n34*n42-n22*n31*n44+n21*n32*n44)*detInv,te[3]=(n23*n32*n41-n22*n33*n41-n23*n31*n42+n21*n33*n42+n22*n31*n43-n21*n32*n43)*detInv,te[4]=t12*detInv,te[5]=(n13*n34*n41-n14*n33*n41+n14*n31*n43-n11*n34*n43-n13*n31*n44+n11*n33*n44)*detInv,te[6]=(n14*n32*n41-n12*n34*n41-n14*n31*n42+n11*n34*n42+n12*n31*n44-n11*n32*n44)*detInv,te[7]=(n12*n33*n41-n13*n32*n41+n13*n31*n42-n11*n33*n42-n12*n31*n43+n11*n32*n43)*detInv,te[8]=t13*detInv,te[9]=(n14*n23*n41-n13*n24*n41-n14*n21*n43+n11*n24*n43+n13*n21*n44-n11*n23*n44)*detInv,te[10]=(n12*n24*n41-n14*n22*n41+n14*n21*n42-n11*n24*n42-n12*n21*n44+n11*n22*n44)*detInv,te[11]=(n13*n22*n41-n12*n23*n41-n13*n21*n42+n11*n23*n42+n12*n21*n43-n11*n22*n43)*detInv,te[12]=t14*detInv,te[13]=(n13*n24*n31-n14*n23*n31+n14*n21*n33-n11*n24*n33-n13*n21*n34+n11*n23*n34)*detInv,te[14]=(n14*n22*n31-n12*n24*n31-n14*n21*n32+n11*n24*n32+n12*n21*n34-n11*n22*n34)*detInv,te[15]=(n12*n23*n31-n13*n22*n31+n13*n21*n32-n11*n23*n32-n12*n21*n33+n11*n22*n33)*detInv,this}scale(v){const te=this.elements,x=v.x,y=v.y,z=v.z;return te[0]*=x,te[4]*=y,te[8]*=z,te[1]*=x,te[5]*=y,te[9]*=z,te[2]*=x,te[6]*=y,te[10]*=z,te[3]*=x,te[7]*=y,te[11]*=z,this}getMaxScaleOnAxis(){const te=this.elements;return Math.sqrt(Math.max(te[0]*te[0]+te[1]*te[1]+te[2]*te[2],te[4]*te[4]+te[5]*te[5]+te[6]*te[6],te[8]*te[8]+te[9]*te[9]+te[10]*te[10]))}makeTranslation(x,y,z){return this.set(1,0,0,x,0,1,0,y,0,0,1,z,0,0,0,1),this}makeRotationX(theta){const c=Math.cos(theta),s=Math.sin(theta);return this.set(1,0,0,0,0,c,-s,0,0,s,c,0,0,0,0,1),this}makeRotationY(theta){const c=Math.cos(theta),s=Math.sin(theta);return this.set(c,0,s,0,0,1,0,0,-s,0,c,0,0,0,0,1),this}makeRotationZ(theta){const c=Math.cos(theta),s=Math.sin(theta);return this.set(c,-s,0,0,s,c,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(axis,angle){const c=Math.cos(angle),s=Math.sin(angle),t=1-c,x=axis.x,y=axis.y,z=axis.z,tx=t*x,ty=t*y;return this.set(tx*x+c,tx*y-s*z,tx*z+s*y,0,tx*y+s*z,ty*y+c,ty*z-s*x,0,tx*z-s*y,ty*z+s*x,t*z*z+c,0,0,0,0,1),this}makeScale(x,y,z){return this.set(x,0,0,0,0,y,0,0,0,0,z,0,0,0,0,1),this}makeShear(xy,xz,yx,yz,zx,zy){return this.set(1,yx,zx,0,xy,1,zy,0,xz,yz,1,0,0,0,0,1),this}compose(position,quaternion,scale){const te=this.elements,x=quaternion._x,y=quaternion._y,z=quaternion._z,w=quaternion._w,x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=scale.x,sy=scale.y,sz=scale.z;return te[0]=(1-(yy+zz))*sx,te[1]=(xy+wz)*sx,te[2]=(xz-wy)*sx,te[3]=0,te[4]=(xy-wz)*sy,te[5]=(1-(xx+zz))*sy,te[6]=(yz+wx)*sy,te[7]=0,te[8]=(xz+wy)*sz,te[9]=(yz-wx)*sz,te[10]=(1-(xx+yy))*sz,te[11]=0,te[12]=position.x,te[13]=position.y,te[14]=position.z,te[15]=1,this}decompose(position,quaternion,scale){const te=this.elements;let sx=_v1.set(te[0],te[1],te[2]).length();const sy=_v1.set(te[4],te[5],te[6]).length(),sz=_v1.set(te[8],te[9],te[10]).length();this.determinant()<0&&(sx=-sx),position.x=te[12],position.y=te[13],position.z=te[14],_m1.copy(this);const invSX=1/sx,invSY=1/sy,invSZ=1/sz;return _m1.elements[0]*=invSX,_m1.elements[1]*=invSX,_m1.elements[2]*=invSX,_m1.elements[4]*=invSY,_m1.elements[5]*=invSY,_m1.elements[6]*=invSY,_m1.elements[8]*=invSZ,_m1.elements[9]*=invSZ,_m1.elements[10]*=invSZ,quaternion.setFromRotationMatrix(_m1),scale.x=sx,scale.y=sy,scale.z=sz,this}makePerspective(left,right,top,bottom,near,far){const te=this.elements,y=2*near/(top-bottom),a=(right+left)/(right-left),b=(top+bottom)/(top-bottom),c=-(far+near)/(far-near),d=-2*far*near/(far-near);return te[0]=2*near/(right-left),te[4]=0,te[8]=a,te[12]=0,te[1]=0,te[5]=y,te[9]=b,te[13]=0,te[2]=0,te[6]=0,te[10]=c,te[14]=d,te[3]=0,te[7]=0,te[11]=-1,te[15]=0,this}makeOrthographic(left,right,top,bottom,near,far){const te=this.elements,w=1/(right-left),h=1/(top-bottom),p=1/(far-near),x=(right+left)*w,y=(top+bottom)*h,z=(far+near)*p;return te[0]=2*w,te[4]=0,te[8]=0,te[12]=-x,te[1]=0,te[5]=2*h,te[9]=0,te[13]=-y,te[2]=0,te[6]=0,te[10]=-2*p,te[14]=-z,te[3]=0,te[7]=0,te[11]=0,te[15]=1,this}equals(matrix){const te=this.elements,me=matrix.elements;for(let i=0;i<16;i++)if(te[i]!==me[i])return!1;return!0}fromArray(array,offset=0){for(let i=0;i<16;i++)this.elements[i]=array[i+offset];return this}toArray(array=[],offset=0){const te=this.elements;return array[offset]=te[0],array[offset+1]=te[1],array[offset+2]=te[2],array[offset+3]=te[3],array[offset+4]=te[4],array[offset+5]=te[5],array[offset+6]=te[6],array[offset+7]=te[7],array[offset+8]=te[8],array[offset+9]=te[9],array[offset+10]=te[10],array[offset+11]=te[11],array[offset+12]=te[12],array[offset+13]=te[13],array[offset+14]=te[14],array[offset+15]=te[15],array}}__name(Matrix42,"Matrix4");const _v1=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_m1=new Matrix42,_zero=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P(0,0,0),_one=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P(1,1,1),_x=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_y=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_z=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P},3972:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>Quaternion});var _MathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4090);class Quaternion{constructor(x=0,y=0,z=0,w=1){this.isQuaternion=!0,this._x=x,this._y=y,this._z=z,this._w=w}static slerpFlat(dst,dstOffset,src0,srcOffset0,src1,srcOffset1,t){let x0=src0[srcOffset0+0],y0=src0[srcOffset0+1],z0=src0[srcOffset0+2],w0=src0[srcOffset0+3];const x1=src1[srcOffset1+0],y1=src1[srcOffset1+1],z1=src1[srcOffset1+2],w1=src1[srcOffset1+3];if(0===t)return dst[dstOffset+0]=x0,dst[dstOffset+1]=y0,dst[dstOffset+2]=z0,void(dst[dstOffset+3]=w0);if(1===t)return dst[dstOffset+0]=x1,dst[dstOffset+1]=y1,dst[dstOffset+2]=z1,void(dst[dstOffset+3]=w1);if(w0!==w1||x0!==x1||y0!==y1||z0!==z1){let s=1-t;const cos=x0*x1+y0*y1+z0*z1+w0*w1,dir=cos>=0?1:-1,sqrSin=1-cos*cos;if(sqrSin>Number.EPSILON){const sin=Math.sqrt(sqrSin),len=Math.atan2(sin,cos*dir);s=Math.sin(s*len)/sin,t=Math.sin(t*len)/sin}const tDir=t*dir;if(x0=x0*s+x1*tDir,y0=y0*s+y1*tDir,z0=z0*s+z1*tDir,w0=w0*s+w1*tDir,s===1-t){const f=1/Math.sqrt(x0*x0+y0*y0+z0*z0+w0*w0);x0*=f,y0*=f,z0*=f,w0*=f}}dst[dstOffset]=x0,dst[dstOffset+1]=y0,dst[dstOffset+2]=z0,dst[dstOffset+3]=w0}static multiplyQuaternionsFlat(dst,dstOffset,src0,srcOffset0,src1,srcOffset1){const x0=src0[srcOffset0],y0=src0[srcOffset0+1],z0=src0[srcOffset0+2],w0=src0[srcOffset0+3],x1=src1[srcOffset1],y1=src1[srcOffset1+1],z1=src1[srcOffset1+2],w1=src1[srcOffset1+3];return dst[dstOffset]=x0*w1+w0*x1+y0*z1-z0*y1,dst[dstOffset+1]=y0*w1+w0*y1+z0*x1-x0*z1,dst[dstOffset+2]=z0*w1+w0*z1+x0*y1-y0*x1,dst[dstOffset+3]=w0*w1-x0*x1-y0*y1-z0*z1,dst}get x(){return this._x}set x(value){this._x=value,this._onChangeCallback()}get y(){return this._y}set y(value){this._y=value,this._onChangeCallback()}get z(){return this._z}set z(value){this._z=value,this._onChangeCallback()}get w(){return this._w}set w(value){this._w=value,this._onChangeCallback()}set(x,y,z,w){return this._x=x,this._y=y,this._z=z,this._w=w,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(quaternion){return this._x=quaternion.x,this._y=quaternion.y,this._z=quaternion.z,this._w=quaternion.w,this._onChangeCallback(),this}setFromEuler(euler,update){const x=euler._x,y=euler._y,z=euler._z,order=euler._order,cos=Math.cos,sin=Math.sin,c1=cos(x/2),c2=cos(y/2),c3=cos(z/2),s1=sin(x/2),s2=sin(y/2),s3=sin(z/2);switch(order){case"XYZ":this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3;break;case"YXZ":this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3;break;case"ZXY":this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3;break;case"ZYX":this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3;break;case"YZX":this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3;break;case"XZY":this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+order)}return!1!==update&&this._onChangeCallback(),this}setFromAxisAngle(axis,angle){const halfAngle=angle/2,s=Math.sin(halfAngle);return this._x=axis.x*s,this._y=axis.y*s,this._z=axis.z*s,this._w=Math.cos(halfAngle),this._onChangeCallback(),this}setFromRotationMatrix(m){const te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10],trace=m11+m22+m33;if(trace>0){const s=.5/Math.sqrt(trace+1);this._w=.25/s,this._x=(m32-m23)*s,this._y=(m13-m31)*s,this._z=(m21-m12)*s}else if(m11>m22&&m11>m33){const s=2*Math.sqrt(1+m11-m22-m33);this._w=(m32-m23)/s,this._x=.25*s,this._y=(m12+m21)/s,this._z=(m13+m31)/s}else if(m22>m33){const s=2*Math.sqrt(1+m22-m11-m33);this._w=(m13-m31)/s,this._x=(m12+m21)/s,this._y=.25*s,this._z=(m23+m32)/s}else{const s=2*Math.sqrt(1+m33-m11-m22);this._w=(m21-m12)/s,this._x=(m13+m31)/s,this._y=(m23+m32)/s,this._z=.25*s}return this._onChangeCallback(),this}setFromUnitVectors(vFrom,vTo){let r=vFrom.dot(vTo)+1;return r<Number.EPSILON?(r=0,Math.abs(vFrom.x)>Math.abs(vFrom.z)?(this._x=-vFrom.y,this._y=vFrom.x,this._z=0,this._w=r):(this._x=0,this._y=-vFrom.z,this._z=vFrom.y,this._w=r)):(this._x=vFrom.y*vTo.z-vFrom.z*vTo.y,this._y=vFrom.z*vTo.x-vFrom.x*vTo.z,this._z=vFrom.x*vTo.y-vFrom.y*vTo.x,this._w=r),this.normalize()}angleTo(q){return 2*Math.acos(Math.abs(_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__.uZ(this.dot(q),-1,1)))}rotateTowards(q,step){const angle=this.angleTo(q);if(0===angle)return this;const t=Math.min(1,step/angle);return this.slerp(q,t),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(v){return this._x*v._x+this._y*v._y+this._z*v._z+this._w*v._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let l=this.length();return 0===l?(this._x=0,this._y=0,this._z=0,this._w=1):(l=1/l,this._x=this._x*l,this._y=this._y*l,this._z=this._z*l,this._w=this._w*l),this._onChangeCallback(),this}multiply(q){return this.multiplyQuaternions(this,q)}premultiply(q){return this.multiplyQuaternions(q,this)}multiplyQuaternions(a,b){const qax=a._x,qay=a._y,qaz=a._z,qaw=a._w,qbx=b._x,qby=b._y,qbz=b._z,qbw=b._w;return this._x=qax*qbw+qaw*qbx+qay*qbz-qaz*qby,this._y=qay*qbw+qaw*qby+qaz*qbx-qax*qbz,this._z=qaz*qbw+qaw*qbz+qax*qby-qay*qbx,this._w=qaw*qbw-qax*qbx-qay*qby-qaz*qbz,this._onChangeCallback(),this}slerp(qb,t){if(0===t)return this;if(1===t)return this.copy(qb);const x=this._x,y=this._y,z=this._z,w=this._w;let cosHalfTheta=w*qb._w+x*qb._x+y*qb._y+z*qb._z;if(cosHalfTheta<0?(this._w=-qb._w,this._x=-qb._x,this._y=-qb._y,this._z=-qb._z,cosHalfTheta=-cosHalfTheta):this.copy(qb),cosHalfTheta>=1)return this._w=w,this._x=x,this._y=y,this._z=z,this;const sqrSinHalfTheta=1-cosHalfTheta*cosHalfTheta;if(sqrSinHalfTheta<=Number.EPSILON){const s=1-t;return this._w=s*w+t*this._w,this._x=s*x+t*this._x,this._y=s*y+t*this._y,this._z=s*z+t*this._z,this.normalize(),this._onChangeCallback(),this}const sinHalfTheta=Math.sqrt(sqrSinHalfTheta),halfTheta=Math.atan2(sinHalfTheta,cosHalfTheta),ratioA=Math.sin((1-t)*halfTheta)/sinHalfTheta,ratioB=Math.sin(t*halfTheta)/sinHalfTheta;return this._w=w*ratioA+this._w*ratioB,this._x=x*ratioA+this._x*ratioB,this._y=y*ratioA+this._y*ratioB,this._z=z*ratioA+this._z*ratioB,this._onChangeCallback(),this}slerpQuaternions(qa,qb,t){return this.copy(qa).slerp(qb,t)}random(){const u1=Math.random(),sqrt1u1=Math.sqrt(1-u1),sqrtu1=Math.sqrt(u1),u2=2*Math.PI*Math.random(),u3=2*Math.PI*Math.random();return this.set(sqrt1u1*Math.cos(u2),sqrtu1*Math.sin(u3),sqrtu1*Math.cos(u3),sqrt1u1*Math.sin(u2))}equals(quaternion){return quaternion._x===this._x&&quaternion._y===this._y&&quaternion._z===this._z&&quaternion._w===this._w}fromArray(array,offset=0){return this._x=array[offset],this._y=array[offset+1],this._z=array[offset+2],this._w=array[offset+3],this._onChangeCallback(),this}toArray(array=[],offset=0){return array[offset]=this._x,array[offset+1]=this._y,array[offset+2]=this._z,array[offset+3]=this._w,array}fromBufferAttribute(attribute,index){return this._x=attribute.getX(index),this._y=attribute.getY(index),this._z=attribute.getZ(index),this._w=attribute.getW(index),this}_onChange(callback){return this._onChangeCallback=callback,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}__name(Quaternion,"Quaternion")},4524:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>Ray});var _Vector3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3104);const _vector=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_segCenter=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_segDir=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_diff=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_edge1=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_edge2=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,_normal=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P;class Ray{constructor(origin=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P,direction=new _Vector3_js__WEBPACK_IMPORTED_MODULE_0__.P(0,0,-1)){this.origin=origin,this.direction=direction}set(origin,direction){return this.origin.copy(origin),this.direction.copy(direction),this}copy(ray){return this.origin.copy(ray.origin),this.direction.copy(ray.direction),this}at(t,target){return target.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(v){return this.direction.copy(v).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,_vector)),this}closestPointToPoint(point,target){target.subVectors(point,this.origin);const directionDistance=target.dot(this.direction);return directionDistance<0?target.copy(this.origin):target.copy(this.direction).multiplyScalar(directionDistance).add(this.origin)}distanceToPoint(point){return Math.sqrt(this.distanceSqToPoint(point))}distanceSqToPoint(point){const directionDistance=_vector.subVectors(point,this.origin).dot(this.direction);return directionDistance<0?this.origin.distanceToSquared(point):(_vector.copy(this.direction).multiplyScalar(directionDistance).add(this.origin),_vector.distanceToSquared(point))}distanceSqToSegment(v0,v1,optionalPointOnRay,optionalPointOnSegment){_segCenter.copy(v0).add(v1).multiplyScalar(.5),_segDir.copy(v1).sub(v0).normalize(),_diff.copy(this.origin).sub(_segCenter);const segExtent=.5*v0.distanceTo(v1),a01=-this.direction.dot(_segDir),b0=_diff.dot(this.direction),b1=-_diff.dot(_segDir),c=_diff.lengthSq(),det=Math.abs(1-a01*a01);let s0,s1,sqrDist,extDet;if(det>0)if(s0=a01*b1-b0,s1=a01*b0-b1,extDet=segExtent*det,s0>=0)if(s1>=-extDet)if(s1<=extDet){const invDet=1/det;s0*=invDet,s1*=invDet,sqrDist=s0*(s0+a01*s1+2*b0)+s1*(a01*s0+s1+2*b1)+c}else s1=segExtent,s0=Math.max(0,-(a01*s1+b0)),sqrDist=-s0*s0+s1*(s1+2*b1)+c;else s1=-segExtent,s0=Math.max(0,-(a01*s1+b0)),sqrDist=-s0*s0+s1*(s1+2*b1)+c;else s1<=-extDet?(s0=Math.max(0,-(-a01*segExtent+b0)),s1=s0>0?-segExtent:Math.min(Math.max(-segExtent,-b1),segExtent),sqrDist=-s0*s0+s1*(s1+2*b1)+c):s1<=extDet?(s0=0,s1=Math.min(Math.max(-segExtent,-b1),segExtent),sqrDist=s1*(s1+2*b1)+c):(s0=Math.max(0,-(a01*segExtent+b0)),s1=s0>0?segExtent:Math.min(Math.max(-segExtent,-b1),segExtent),sqrDist=-s0*s0+s1*(s1+2*b1)+c);else s1=a01>0?-segExtent:segExtent,s0=Math.max(0,-(a01*s1+b0)),sqrDist=-s0*s0+s1*(s1+2*b1)+c;return optionalPointOnRay&&optionalPointOnRay.copy(this.direction).multiplyScalar(s0).add(this.origin),optionalPointOnSegment&&optionalPointOnSegment.copy(_segDir).multiplyScalar(s1).add(_segCenter),sqrDist}intersectSphere(sphere,target){_vector.subVectors(sphere.center,this.origin);const tca=_vector.dot(this.direction),d2=_vector.dot(_vector)-tca*tca,radius2=sphere.radius*sphere.radius;if(d2>radius2)return null;const thc=Math.sqrt(radius2-d2),t0=tca-thc,t1=tca+thc;return t0<0&&t1<0?null:this.at(t0<0?t1:t0,target)}intersectsSphere(sphere){return this.distanceSqToPoint(sphere.center)<=sphere.radius*sphere.radius}distanceToPlane(plane){const denominator=plane.normal.dot(this.direction);if(0===denominator)return 0===plane.distanceToPoint(this.origin)?0:null;const t=-(this.origin.dot(plane.normal)+plane.constant)/denominator;return t>=0?t:null}intersectPlane(plane,target){const t=this.distanceToPlane(plane);return null===t?null:this.at(t,target)}intersectsPlane(plane){const distToPoint=plane.distanceToPoint(this.origin);return 0===distToPoint||plane.normal.dot(this.direction)*distToPoint<0}intersectBox(box,target){let tmin,tmax,tymin,tymax,tzmin,tzmax;const invdirx=1/this.direction.x,invdiry=1/this.direction.y,invdirz=1/this.direction.z,origin=this.origin;return invdirx>=0?(tmin=(box.min.x-origin.x)*invdirx,tmax=(box.max.x-origin.x)*invdirx):(tmin=(box.max.x-origin.x)*invdirx,tmax=(box.min.x-origin.x)*invdirx),invdiry>=0?(tymin=(box.min.y-origin.y)*invdiry,tymax=(box.max.y-origin.y)*invdiry):(tymin=(box.max.y-origin.y)*invdiry,tymax=(box.min.y-origin.y)*invdiry),tmin>tymax||tymin>tmax||((tymin>tmin||isNaN(tmin))&&(tmin=tymin),(tymax<tmax||isNaN(tmax))&&(tmax=tymax),invdirz>=0?(tzmin=(box.min.z-origin.z)*invdirz,tzmax=(box.max.z-origin.z)*invdirz):(tzmin=(box.max.z-origin.z)*invdirz,tzmax=(box.min.z-origin.z)*invdirz),tmin>tzmax||tzmin>tmax)||((tzmin>tmin||tmin!=tmin)&&(tmin=tzmin),(tzmax<tmax||tmax!=tmax)&&(tmax=tzmax),tmax<0)?null:this.at(tmin>=0?tmin:tmax,target)}intersectsBox(box){return null!==this.intersectBox(box,_vector)}intersectTriangle(a,b,c,backfaceCulling,target){_edge1.subVectors(b,a),_edge2.subVectors(c,a),_normal.crossVectors(_edge1,_edge2);let sign,DdN=this.direction.dot(_normal);if(DdN>0){if(backfaceCulling)return null;sign=1}else{if(!(DdN<0))return null;sign=-1,DdN=-DdN}_diff.subVectors(this.origin,a);const DdQxE2=sign*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(DdQxE2<0)return null;const DdE1xQ=sign*this.direction.dot(_edge1.cross(_diff));if(DdE1xQ<0||DdQxE2+DdE1xQ>DdN)return null;const QdN=-sign*_diff.dot(_normal);return QdN<0?null:this.at(QdN/DdN,target)}applyMatrix4(matrix4){return this.origin.applyMatrix4(matrix4),this.direction.transformDirection(matrix4),this}equals(ray){return ray.origin.equals(this.origin)&&ray.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}__name(Ray,"Ray")},3174:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>Sphere});var _Box3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7206),_Vector3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3104);const _box=new _Box3_js__WEBPACK_IMPORTED_MODULE_0__.Z,_v1=new _Vector3_js__WEBPACK_IMPORTED_MODULE_1__.P,_v2=new _Vector3_js__WEBPACK_IMPORTED_MODULE_1__.P;class Sphere{constructor(center=new _Vector3_js__WEBPACK_IMPORTED_MODULE_1__.P,radius=-1){this.center=center,this.radius=radius}set(center,radius){return this.center.copy(center),this.radius=radius,this}setFromPoints(points,optionalCenter){const center=this.center;void 0!==optionalCenter?center.copy(optionalCenter):_box.setFromPoints(points).getCenter(center);let maxRadiusSq=0;for(let i=0,il=points.length;i<il;i++)maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(points[i]));return this.radius=Math.sqrt(maxRadiusSq),this}copy(sphere){return this.center.copy(sphere.center),this.radius=sphere.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(point){return point.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(point){return point.distanceTo(this.center)-this.radius}intersectsSphere(sphere){const radiusSum=this.radius+sphere.radius;return sphere.center.distanceToSquared(this.center)<=radiusSum*radiusSum}intersectsBox(box){return box.intersectsSphere(this)}intersectsPlane(plane){return Math.abs(plane.distanceToPoint(this.center))<=this.radius}clampPoint(point,target){const deltaLengthSq=this.center.distanceToSquared(point);return target.copy(point),deltaLengthSq>this.radius*this.radius&&(target.sub(this.center).normalize(),target.multiplyScalar(this.radius).add(this.center)),target}getBoundingBox(target){return this.isEmpty()?(target.makeEmpty(),target):(target.set(this.center,this.center),target.expandByScalar(this.radius),target)}applyMatrix4(matrix){return this.center.applyMatrix4(matrix),this.radius=this.radius*matrix.getMaxScaleOnAxis(),this}translate(offset){return this.center.add(offset),this}expandByPoint(point){if(this.isEmpty())return this.center.copy(point),this.radius=0,this;_v1.subVectors(point,this.center);const lengthSq=_v1.lengthSq();if(lengthSq>this.radius*this.radius){const length=Math.sqrt(lengthSq),delta=.5*(length-this.radius);this.center.addScaledVector(_v1,delta/length),this.radius+=delta}return this}union(sphere){return sphere.isEmpty()?this:this.isEmpty()?(this.copy(sphere),this):(!0===this.center.equals(sphere.center)?this.radius=Math.max(this.radius,sphere.radius):(_v2.subVectors(sphere.center,this.center).setLength(sphere.radius),this.expandByPoint(_v1.copy(sphere.center).add(_v2)),this.expandByPoint(_v1.copy(sphere.center).sub(_v2))),this)}equals(sphere){return sphere.center.equals(this.center)&&sphere.radius===this.radius}clone(){return(new this.constructor).copy(this)}}__name(Sphere,"Sphere")},2319:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>Vector22});class Vector22{constructor(x=0,y=0){Vector22.prototype.isVector2=!0,this.x=x,this.y=y}get width(){return this.x}set width(value){this.x=value}get height(){return this.y}set height(value){this.y=value}set(x,y){return this.x=x,this.y=y,this}setScalar(scalar){return this.x=scalar,this.y=scalar,this}setX(x){return this.x=x,this}setY(y){return this.y=y,this}setComponent(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;default:throw new Error("index is out of range: "+index)}return this}getComponent(index){switch(index){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+index)}}clone(){return new this.constructor(this.x,this.y)}copy(v){return this.x=v.x,this.y=v.y,this}add(v){return this.x+=v.x,this.y+=v.y,this}addScalar(s){return this.x+=s,this.y+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this}addScaledVector(v,s){return this.x+=v.x*s,this.y+=v.y*s,this}sub(v){return this.x-=v.x,this.y-=v.y,this}subScalar(s){return this.x-=s,this.y-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this}multiply(v){return this.x*=v.x,this.y*=v.y,this}multiplyScalar(scalar){return this.x*=scalar,this.y*=scalar,this}divide(v){return this.x/=v.x,this.y/=v.y,this}divideScalar(scalar){return this.multiplyScalar(1/scalar)}applyMatrix3(m){const x=this.x,y=this.y,e=m.elements;return this.x=e[0]*x+e[3]*y+e[6],this.y=e[1]*x+e[4]*y+e[7],this}min(v){return this.x=Math.min(this.x,v.x),this.y=Math.min(this.y,v.y),this}max(v){return this.x=Math.max(this.x,v.x),this.y=Math.max(this.y,v.y),this}clamp(min,max){return this.x=Math.max(min.x,Math.min(max.x,this.x)),this.y=Math.max(min.y,Math.min(max.y,this.y)),this}clampScalar(minVal,maxVal){return this.x=Math.max(minVal,Math.min(maxVal,this.x)),this.y=Math.max(minVal,Math.min(maxVal,this.y)),this}clampLength(min,max){const length=this.length();return this.divideScalar(length||1).multiplyScalar(Math.max(min,Math.min(max,length)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(v){return this.x*v.x+this.y*v.y}cross(v){return this.x*v.y-this.y*v.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(v){return Math.sqrt(this.distanceToSquared(v))}distanceToSquared(v){const dx=this.x-v.x,dy=this.y-v.y;return dx*dx+dy*dy}manhattanDistanceTo(v){return Math.abs(this.x-v.x)+Math.abs(this.y-v.y)}setLength(length){return this.normalize().multiplyScalar(length)}lerp(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this}lerpVectors(v1,v2,alpha){return this.x=v1.x+(v2.x-v1.x)*alpha,this.y=v1.y+(v2.y-v1.y)*alpha,this}equals(v){return v.x===this.x&&v.y===this.y}fromArray(array,offset=0){return this.x=array[offset],this.y=array[offset+1],this}toArray(array=[],offset=0){return array[offset]=this.x,array[offset+1]=this.y,array}fromBufferAttribute(attribute,index){return this.x=attribute.getX(index),this.y=attribute.getY(index),this}rotateAround(center,angle){const c=Math.cos(angle),s=Math.sin(angle),x=this.x-center.x,y=this.y-center.y;return this.x=x*c-y*s+center.x,this.y=x*s+y*c+center.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}__name(Vector22,"Vector2")},3104:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>Vector32});var _MathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4090),_Quaternion_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3972);class Vector32{constructor(x=0,y=0,z=0){Vector32.prototype.isVector3=!0,this.x=x,this.y=y,this.z=z}set(x,y,z){return void 0===z&&(z=this.z),this.x=x,this.y=y,this.z=z,this}setScalar(scalar){return this.x=scalar,this.y=scalar,this.z=scalar,this}setX(x){return this.x=x,this}setY(y){return this.y=y,this}setZ(z){return this.z=z,this}setComponent(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;default:throw new Error("index is out of range: "+index)}return this}getComponent(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+index)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(v){return this.x=v.x,this.y=v.y,this.z=v.z,this}add(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this}addScaledVector(v,s){return this.x+=v.x*s,this.y+=v.y*s,this.z+=v.z*s,this}sub(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this}multiply(v){return this.x*=v.x,this.y*=v.y,this.z*=v.z,this}multiplyScalar(scalar){return this.x*=scalar,this.y*=scalar,this.z*=scalar,this}multiplyVectors(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this}applyEuler(euler){return this.applyQuaternion(_quaternion.setFromEuler(euler))}applyAxisAngle(axis,angle){return this.applyQuaternion(_quaternion.setFromAxisAngle(axis,angle))}applyMatrix3(m){const x=this.x,y=this.y,z=this.z,e=m.elements;return this.x=e[0]*x+e[3]*y+e[6]*z,this.y=e[1]*x+e[4]*y+e[7]*z,this.z=e[2]*x+e[5]*y+e[8]*z,this}applyNormalMatrix(m){return this.applyMatrix3(m).normalize()}applyMatrix4(m){const x=this.x,y=this.y,z=this.z,e=m.elements,w=1/(e[3]*x+e[7]*y+e[11]*z+e[15]);return this.x=(e[0]*x+e[4]*y+e[8]*z+e[12])*w,this.y=(e[1]*x+e[5]*y+e[9]*z+e[13])*w,this.z=(e[2]*x+e[6]*y+e[10]*z+e[14])*w,this}applyQuaternion(q){const x=this.x,y=this.y,z=this.z,qx=q.x,qy=q.y,qz=q.z,qw=q.w,ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return this.x=ix*qw+iw*-qx+iy*-qz-iz*-qy,this.y=iy*qw+iw*-qy+iz*-qx-ix*-qz,this.z=iz*qw+iw*-qz+ix*-qy-iy*-qx,this}project(camera){return this.applyMatrix4(camera.matrixWorldInverse).applyMatrix4(camera.projectionMatrix)}unproject(camera){return this.applyMatrix4(camera.projectionMatrixInverse).applyMatrix4(camera.matrixWorld)}transformDirection(m){const x=this.x,y=this.y,z=this.z,e=m.elements;return this.x=e[0]*x+e[4]*y+e[8]*z,this.y=e[1]*x+e[5]*y+e[9]*z,this.z=e[2]*x+e[6]*y+e[10]*z,this.normalize()}divide(v){return this.x/=v.x,this.y/=v.y,this.z/=v.z,this}divideScalar(scalar){return this.multiplyScalar(1/scalar)}min(v){return this.x=Math.min(this.x,v.x),this.y=Math.min(this.y,v.y),this.z=Math.min(this.z,v.z),this}max(v){return this.x=Math.max(this.x,v.x),this.y=Math.max(this.y,v.y),this.z=Math.max(this.z,v.z),this}clamp(min,max){return this.x=Math.max(min.x,Math.min(max.x,this.x)),this.y=Math.max(min.y,Math.min(max.y,this.y)),this.z=Math.max(min.z,Math.min(max.z,this.z)),this}clampScalar(minVal,maxVal){return this.x=Math.max(minVal,Math.min(maxVal,this.x)),this.y=Math.max(minVal,Math.min(maxVal,this.y)),this.z=Math.max(minVal,Math.min(maxVal,this.z)),this}clampLength(min,max){const length=this.length();return this.divideScalar(length||1).multiplyScalar(Math.max(min,Math.min(max,length)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(v){return this.x*v.x+this.y*v.y+this.z*v.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(length){return this.normalize().multiplyScalar(length)}lerp(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this.z+=(v.z-this.z)*alpha,this}lerpVectors(v1,v2,alpha){return this.x=v1.x+(v2.x-v1.x)*alpha,this.y=v1.y+(v2.y-v1.y)*alpha,this.z=v1.z+(v2.z-v1.z)*alpha,this}cross(v){return this.crossVectors(this,v)}crossVectors(a,b){const ax=a.x,ay=a.y,az=a.z,bx=b.x,by=b.y,bz=b.z;return this.x=ay*bz-az*by,this.y=az*bx-ax*bz,this.z=ax*by-ay*bx,this}projectOnVector(v){const denominator=v.lengthSq();if(0===denominator)return this.set(0,0,0);const scalar=v.dot(this)/denominator;return this.copy(v).multiplyScalar(scalar)}projectOnPlane(planeNormal){return _vector.copy(this).projectOnVector(planeNormal),this.sub(_vector)}reflect(normal){return this.sub(_vector.copy(normal).multiplyScalar(2*this.dot(normal)))}angleTo(v){const denominator=Math.sqrt(this.lengthSq()*v.lengthSq());if(0===denominator)return Math.PI/2;const theta=this.dot(v)/denominator;return Math.acos(_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__.uZ(theta,-1,1))}distanceTo(v){return Math.sqrt(this.distanceToSquared(v))}distanceToSquared(v){const dx=this.x-v.x,dy=this.y-v.y,dz=this.z-v.z;return dx*dx+dy*dy+dz*dz}manhattanDistanceTo(v){return Math.abs(this.x-v.x)+Math.abs(this.y-v.y)+Math.abs(this.z-v.z)}setFromSpherical(s){return this.setFromSphericalCoords(s.radius,s.phi,s.theta)}setFromSphericalCoords(radius,phi,theta){const sinPhiRadius=Math.sin(phi)*radius;return this.x=sinPhiRadius*Math.sin(theta),this.y=Math.cos(phi)*radius,this.z=sinPhiRadius*Math.cos(theta),this}setFromCylindrical(c){return this.setFromCylindricalCoords(c.radius,c.theta,c.y)}setFromCylindricalCoords(radius,theta,y){return this.x=radius*Math.sin(theta),this.y=y,this.z=radius*Math.cos(theta),this}setFromMatrixPosition(m){const e=m.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(m){const sx=this.setFromMatrixColumn(m,0).length(),sy=this.setFromMatrixColumn(m,1).length(),sz=this.setFromMatrixColumn(m,2).length();return this.x=sx,this.y=sy,this.z=sz,this}setFromMatrixColumn(m,index){return this.fromArray(m.elements,4*index)}setFromMatrix3Column(m,index){return this.fromArray(m.elements,3*index)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(v){return v.x===this.x&&v.y===this.y&&v.z===this.z}fromArray(array,offset=0){return this.x=array[offset],this.y=array[offset+1],this.z=array[offset+2],this}toArray(array=[],offset=0){return array[offset]=this.x,array[offset+1]=this.y,array[offset+2]=this.z,array}fromBufferAttribute(attribute,index){return this.x=attribute.getX(index),this.y=attribute.getY(index),this.z=attribute.getZ(index),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const u=2*(Math.random()-.5),t=Math.random()*Math.PI*2,f=Math.sqrt(1-u**2);return this.x=f*Math.cos(t),this.y=f*Math.sin(t),this.z=u,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}__name(Vector32,"Vector3");const _vector=new Vector32,_quaternion=new _Quaternion_js__WEBPACK_IMPORTED_MODULE_1__._},2131:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>Vector4});class Vector4{constructor(x=0,y=0,z=0,w=1){Vector4.prototype.isVector4=!0,this.x=x,this.y=y,this.z=z,this.w=w}get width(){return this.z}set width(value){this.z=value}get height(){return this.w}set height(value){this.w=value}set(x,y,z,w){return this.x=x,this.y=y,this.z=z,this.w=w,this}setScalar(scalar){return this.x=scalar,this.y=scalar,this.z=scalar,this.w=scalar,this}setX(x){return this.x=x,this}setY(y){return this.y=y,this}setZ(z){return this.z=z,this}setW(w){return this.w=w,this}setComponent(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;case 3:this.w=value;break;default:throw new Error("index is out of range: "+index)}return this}getComponent(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+index)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(v){return this.x=v.x,this.y=v.y,this.z=v.z,this.w=void 0!==v.w?v.w:1,this}add(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z,this.w+=v.w,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this}addScaledVector(v,s){return this.x+=v.x*s,this.y+=v.y*s,this.z+=v.z*s,this.w+=v.w*s,this}sub(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z,this.w-=v.w,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this}multiply(v){return this.x*=v.x,this.y*=v.y,this.z*=v.z,this.w*=v.w,this}multiplyScalar(scalar){return this.x*=scalar,this.y*=scalar,this.z*=scalar,this.w*=scalar,this}applyMatrix4(m){const x=this.x,y=this.y,z=this.z,w=this.w,e=m.elements;return this.x=e[0]*x+e[4]*y+e[8]*z+e[12]*w,this.y=e[1]*x+e[5]*y+e[9]*z+e[13]*w,this.z=e[2]*x+e[6]*y+e[10]*z+e[14]*w,this.w=e[3]*x+e[7]*y+e[11]*z+e[15]*w,this}divideScalar(scalar){return this.multiplyScalar(1/scalar)}setAxisAngleFromQuaternion(q){this.w=2*Math.acos(q.w);const s=Math.sqrt(1-q.w*q.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=q.x/s,this.y=q.y/s,this.z=q.z/s),this}setAxisAngleFromRotationMatrix(m){let angle,x,y,z;const te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10];if(Math.abs(m12-m21)<.01&&Math.abs(m13-m31)<.01&&Math.abs(m23-m32)<.01){if(Math.abs(m12+m21)<.1&&Math.abs(m13+m31)<.1&&Math.abs(m23+m32)<.1&&Math.abs(m11+m22+m33-3)<.1)return this.set(1,0,0,0),this;angle=Math.PI;const xx=(m11+1)/2,yy=(m22+1)/2,zz=(m33+1)/2,xy=(m12+m21)/4,xz=(m13+m31)/4,yz=(m23+m32)/4;return xx>yy&&xx>zz?xx<.01?(x=0,y=.707106781,z=.707106781):(x=Math.sqrt(xx),y=xy/x,z=xz/x):yy>zz?yy<.01?(x=.707106781,y=0,z=.707106781):(y=Math.sqrt(yy),x=xy/y,z=yz/y):zz<.01?(x=.707106781,y=.707106781,z=0):(z=Math.sqrt(zz),x=xz/z,y=yz/z),this.set(x,y,z,angle),this}let s=Math.sqrt((m32-m23)*(m32-m23)+(m13-m31)*(m13-m31)+(m21-m12)*(m21-m12));return Math.abs(s)<.001&&(s=1),this.x=(m32-m23)/s,this.y=(m13-m31)/s,this.z=(m21-m12)/s,this.w=Math.acos((m11+m22+m33-1)/2),this}min(v){return this.x=Math.min(this.x,v.x),this.y=Math.min(this.y,v.y),this.z=Math.min(this.z,v.z),this.w=Math.min(this.w,v.w),this}max(v){return this.x=Math.max(this.x,v.x),this.y=Math.max(this.y,v.y),this.z=Math.max(this.z,v.z),this.w=Math.max(this.w,v.w),this}clamp(min,max){return this.x=Math.max(min.x,Math.min(max.x,this.x)),this.y=Math.max(min.y,Math.min(max.y,this.y)),this.z=Math.max(min.z,Math.min(max.z,this.z)),this.w=Math.max(min.w,Math.min(max.w,this.w)),this}clampScalar(minVal,maxVal){return this.x=Math.max(minVal,Math.min(maxVal,this.x)),this.y=Math.max(minVal,Math.min(maxVal,this.y)),this.z=Math.max(minVal,Math.min(maxVal,this.z)),this.w=Math.max(minVal,Math.min(maxVal,this.w)),this}clampLength(min,max){const length=this.length();return this.divideScalar(length||1).multiplyScalar(Math.max(min,Math.min(max,length)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(length){return this.normalize().multiplyScalar(length)}lerp(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this.z+=(v.z-this.z)*alpha,this.w+=(v.w-this.w)*alpha,this}lerpVectors(v1,v2,alpha){return this.x=v1.x+(v2.x-v1.x)*alpha,this.y=v1.y+(v2.y-v1.y)*alpha,this.z=v1.z+(v2.z-v1.z)*alpha,this.w=v1.w+(v2.w-v1.w)*alpha,this}equals(v){return v.x===this.x&&v.y===this.y&&v.z===this.z&&v.w===this.w}fromArray(array,offset=0){return this.x=array[offset],this.y=array[offset+1],this.z=array[offset+2],this.w=array[offset+3],this}toArray(array=[],offset=0){return array[offset]=this.x,array[offset+1]=this.y,array[offset+2]=this.z,array[offset+3]=this.w,array}fromBufferAttribute(attribute,index){return this.x=attribute.getX(index),this.y=attribute.getY(index),this.z=attribute.getZ(index),this.w=attribute.getW(index),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}__name(Vector4,"Vector4")},2043:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Group});var _core_Object3D_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4130);class Group extends _core_Object3D_js__WEBPACK_IMPORTED_MODULE_0__.T{constructor(){super(),this.isGroup=!0,this.type="Group"}}__name(Group,"Group")},4540:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>InstancedMesh});var BufferAttribute=__webpack_require__(6192);class InstancedBufferAttribute extends BufferAttribute.Tl{constructor(array,itemSize,normalized,meshPerAttribute=1){super(array,itemSize,normalized),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=meshPerAttribute}copy(source){return super.copy(source),this.meshPerAttribute=source.meshPerAttribute,this}toJSON(){const data=super.toJSON();return data.meshPerAttribute=this.meshPerAttribute,data.isInstancedBufferAttribute=!0,data}}__name(InstancedBufferAttribute,"InstancedBufferAttribute");var Mesh2=__webpack_require__(5932),Matrix42=__webpack_require__(7971);const _instanceLocalMatrix=new Matrix42.y,_instanceWorldMatrix=new Matrix42.y,_instanceIntersects=[],_identity=new Matrix42.y,_mesh=new Mesh2.K;class InstancedMesh extends Mesh2.K{constructor(geometry,material,count){super(geometry,material),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(16*count),16),this.instanceColor=null,this.count=count,this.frustumCulled=!1;for(let i=0;i<count;i++)this.setMatrixAt(i,_identity)}copy(source,recursive){return super.copy(source,recursive),this.instanceMatrix.copy(source.instanceMatrix),null!==source.instanceColor&&(this.instanceColor=source.instanceColor.clone()),this.count=source.count,this}getColorAt(index,color){color.fromArray(this.instanceColor.array,3*index)}getMatrixAt(index,matrix){matrix.fromArray(this.instanceMatrix.array,16*index)}raycast(raycaster,intersects){const matrixWorld=this.matrixWorld,raycastTimes=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,void 0!==_mesh.material)for(let instanceId=0;instanceId<raycastTimes;instanceId++){this.getMatrixAt(instanceId,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(matrixWorld,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(raycaster,_instanceIntersects);for(let i=0,l=_instanceIntersects.length;i<l;i++){const intersect=_instanceIntersects[i];intersect.instanceId=instanceId,intersect.object=this,intersects.push(intersect)}_instanceIntersects.length=0}}setColorAt(index,color){null===this.instanceColor&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),color.toArray(this.instanceColor.array,3*index)}setMatrixAt(index,matrix){matrix.toArray(this.instanceMatrix.array,16*index)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}__name(InstancedMesh,"InstancedMesh")},3633:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>LineSegments});var Sphere=__webpack_require__(3174),Ray=__webpack_require__(4524),Matrix42=__webpack_require__(7971),Object3D=__webpack_require__(4130),Vector32=__webpack_require__(3104),LineBasicMaterial=__webpack_require__(8252),BufferGeometry=__webpack_require__(875),BufferAttribute=__webpack_require__(6192);const _start=new Vector32.P,_end=new Vector32.P,_inverseMatrix=new Matrix42.y,_ray=new Ray.z,_sphere=new Sphere.a;class Line extends Object3D.T{constructor(geometry=new BufferGeometry.u,material=new LineBasicMaterial.n){super(),this.isLine=!0,this.type="Line",this.geometry=geometry,this.material=material,this.updateMorphTargets()}copy(source,recursive){return super.copy(source,recursive),this.material=source.material,this.geometry=source.geometry,this}computeLineDistances(){const geometry=this.geometry;if(null===geometry.index){const positionAttribute=geometry.attributes.position,lineDistances=[0];for(let i=1,l=positionAttribute.count;i<l;i++)_start.fromBufferAttribute(positionAttribute,i-1),_end.fromBufferAttribute(positionAttribute,i),lineDistances[i]=lineDistances[i-1],lineDistances[i]+=_start.distanceTo(_end);geometry.setAttribute("lineDistance",new BufferAttribute.a$(lineDistances,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(raycaster,intersects){const geometry=this.geometry,matrixWorld=this.matrixWorld,threshold=raycaster.params.Line.threshold,drawRange=geometry.drawRange;if(null===geometry.boundingSphere&&geometry.computeBoundingSphere(),_sphere.copy(geometry.boundingSphere),_sphere.applyMatrix4(matrixWorld),_sphere.radius+=threshold,!1===raycaster.ray.intersectsSphere(_sphere))return;_inverseMatrix.copy(matrixWorld).invert(),_ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix);const localThreshold=threshold/((this.scale.x+this.scale.y+this.scale.z)/3),localThresholdSq=localThreshold*localThreshold,vStart=new Vector32.P,vEnd=new Vector32.P,interSegment=new Vector32.P,interRay=new Vector32.P,step=this.isLineSegments?2:1,index=geometry.index,positionAttribute=geometry.attributes.position;if(null!==index)for(let i=Math.max(0,drawRange.start),l=Math.min(index.count,drawRange.start+drawRange.count)-1;i<l;i+=step){const a=index.getX(i),b=index.getX(i+1);if(vStart.fromBufferAttribute(positionAttribute,a),vEnd.fromBufferAttribute(positionAttribute,b),_ray.distanceSqToSegment(vStart,vEnd,interRay,interSegment)>localThresholdSq)continue;interRay.applyMatrix4(this.matrixWorld);const distance=raycaster.ray.origin.distanceTo(interRay);distance<raycaster.near||distance>raycaster.far||intersects.push({distance,point:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}else for(let i=Math.max(0,drawRange.start),l=Math.min(positionAttribute.count,drawRange.start+drawRange.count)-1;i<l;i+=step){if(vStart.fromBufferAttribute(positionAttribute,i),vEnd.fromBufferAttribute(positionAttribute,i+1),_ray.distanceSqToSegment(vStart,vEnd,interRay,interSegment)>localThresholdSq)continue;interRay.applyMatrix4(this.matrixWorld);const distance=raycaster.ray.origin.distanceTo(interRay);distance<raycaster.near||distance>raycaster.far||intersects.push({distance,point:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const morphAttributes=this.geometry.morphAttributes,keys=Object.keys(morphAttributes);if(keys.length>0){const morphAttribute=morphAttributes[keys[0]];if(void 0!==morphAttribute){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,ml=morphAttribute.length;m<ml;m++){const name=morphAttribute[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[name]=m}}}}}__name(Line,"Line");const LineSegments_start=new Vector32.P,LineSegments_end=new Vector32.P;class LineSegments extends Line{constructor(geometry,material){super(geometry,material),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const geometry=this.geometry;if(null===geometry.index){const positionAttribute=geometry.attributes.position,lineDistances=[];for(let i=0,l=positionAttribute.count;i<l;i+=2)LineSegments_start.fromBufferAttribute(positionAttribute,i),LineSegments_end.fromBufferAttribute(positionAttribute,i+1),lineDistances[i]=0===i?0:lineDistances[i-1],lineDistances[i+1]=lineDistances[i]+LineSegments_start.distanceTo(LineSegments_end);geometry.setAttribute("lineDistance",new BufferAttribute.a$(lineDistances,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}__name(LineSegments,"LineSegments")},5932:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>Mesh2});var Vector32=__webpack_require__(3104),Vector22=__webpack_require__(2319),Sphere=__webpack_require__(3174),Ray=__webpack_require__(4524),Matrix42=__webpack_require__(7971),Object3D=__webpack_require__(4130);const _v0=new Vector32.P,_v1=new Vector32.P,_v2=new Vector32.P,_v3=new Vector32.P,_vab=new Vector32.P,_vac=new Vector32.P,_vbc=new Vector32.P,_vap=new Vector32.P,_vbp=new Vector32.P,_vcp=new Vector32.P;class Triangle{constructor(a=new Vector32.P,b=new Vector32.P,c=new Vector32.P){this.a=a,this.b=b,this.c=c}static getNormal(a,b,c,target){target.subVectors(c,b),_v0.subVectors(a,b),target.cross(_v0);const targetLengthSq=target.lengthSq();return targetLengthSq>0?target.multiplyScalar(1/Math.sqrt(targetLengthSq)):target.set(0,0,0)}static getBarycoord(point,a,b,c,target){_v0.subVectors(c,a),_v1.subVectors(b,a),_v2.subVectors(point,a);const dot00=_v0.dot(_v0),dot01=_v0.dot(_v1),dot02=_v0.dot(_v2),dot11=_v1.dot(_v1),dot12=_v1.dot(_v2),denom=dot00*dot11-dot01*dot01;if(0===denom)return target.set(-2,-1,-1);const invDenom=1/denom,u=(dot11*dot02-dot01*dot12)*invDenom,v=(dot00*dot12-dot01*dot02)*invDenom;return target.set(1-u-v,v,u)}static containsPoint(point,a,b,c){return this.getBarycoord(point,a,b,c,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1}static getUV(point,p1,p2,p3,uv1,uv2,uv3,target){return this.getBarycoord(point,p1,p2,p3,_v3),target.set(0,0),target.addScaledVector(uv1,_v3.x),target.addScaledVector(uv2,_v3.y),target.addScaledVector(uv3,_v3.z),target}static isFrontFacing(a,b,c,direction){return _v0.subVectors(c,b),_v1.subVectors(a,b),_v0.cross(_v1).dot(direction)<0}set(a,b,c){return this.a.copy(a),this.b.copy(b),this.c.copy(c),this}setFromPointsAndIndices(points,i02,i1,i2){return this.a.copy(points[i02]),this.b.copy(points[i1]),this.c.copy(points[i2]),this}setFromAttributeAndIndices(attribute,i02,i1,i2){return this.a.fromBufferAttribute(attribute,i02),this.b.fromBufferAttribute(attribute,i1),this.c.fromBufferAttribute(attribute,i2),this}clone(){return(new this.constructor).copy(this)}copy(triangle){return this.a.copy(triangle.a),this.b.copy(triangle.b),this.c.copy(triangle.c),this}getArea(){return _v0.subVectors(this.c,this.b),_v1.subVectors(this.a,this.b),.5*_v0.cross(_v1).length()}getMidpoint(target){return target.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(target){return Triangle.getNormal(this.a,this.b,this.c,target)}getPlane(target){return target.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(point,target){return Triangle.getBarycoord(point,this.a,this.b,this.c,target)}getUV(point,uv1,uv2,uv3,target){return Triangle.getUV(point,this.a,this.b,this.c,uv1,uv2,uv3,target)}containsPoint(point){return Triangle.containsPoint(point,this.a,this.b,this.c)}isFrontFacing(direction){return Triangle.isFrontFacing(this.a,this.b,this.c,direction)}intersectsBox(box){return box.intersectsTriangle(this)}closestPointToPoint(p,target){const a=this.a,b=this.b,c=this.c;let v,w;_vab.subVectors(b,a),_vac.subVectors(c,a),_vap.subVectors(p,a);const d1=_vab.dot(_vap),d2=_vac.dot(_vap);if(d1<=0&&d2<=0)return target.copy(a);_vbp.subVectors(p,b);const d3=_vab.dot(_vbp),d4=_vac.dot(_vbp);if(d3>=0&&d4<=d3)return target.copy(b);const vc=d1*d4-d3*d2;if(vc<=0&&d1>=0&&d3<=0)return v=d1/(d1-d3),target.copy(a).addScaledVector(_vab,v);_vcp.subVectors(p,c);const d5=_vab.dot(_vcp),d6=_vac.dot(_vcp);if(d6>=0&&d5<=d6)return target.copy(c);const vb=d5*d2-d1*d6;if(vb<=0&&d2>=0&&d6<=0)return w=d2/(d2-d6),target.copy(a).addScaledVector(_vac,w);const va=d3*d6-d5*d4;if(va<=0&&d4-d3>=0&&d5-d6>=0)return _vbc.subVectors(c,b),w=(d4-d3)/(d4-d3+(d5-d6)),target.copy(b).addScaledVector(_vbc,w);const denom=1/(va+vb+vc);return v=vb*denom,w=vc*denom,target.copy(a).addScaledVector(_vab,v).addScaledVector(_vac,w)}equals(triangle){return triangle.a.equals(this.a)&&triangle.b.equals(this.b)&&triangle.c.equals(this.c)}}__name(Triangle,"Triangle");var constants=__webpack_require__(8007),MeshBasicMaterial=__webpack_require__(4691),BufferGeometry=__webpack_require__(875);const _inverseMatrix=new Matrix42.y,_ray=new Ray.z,_sphere=new Sphere.a,_vA=new Vector32.P,_vB=new Vector32.P,_vC=new Vector32.P,_tempA=new Vector32.P,_morphA=new Vector32.P,_uvA=new Vector22.F,_uvB=new Vector22.F,_uvC=new Vector22.F,_intersectionPoint=new Vector32.P,_intersectionPointWorld=new Vector32.P;class Mesh2 extends Object3D.T{constructor(geometry=new BufferGeometry.u,material=new MeshBasicMaterial.v){super(),this.isMesh=!0,this.type="Mesh",this.geometry=geometry,this.material=material,this.updateMorphTargets()}copy(source,recursive){return super.copy(source,recursive),void 0!==source.morphTargetInfluences&&(this.morphTargetInfluences=source.morphTargetInfluences.slice()),void 0!==source.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},source.morphTargetDictionary)),this.material=source.material,this.geometry=source.geometry,this}updateMorphTargets(){const morphAttributes=this.geometry.morphAttributes,keys=Object.keys(morphAttributes);if(keys.length>0){const morphAttribute=morphAttributes[keys[0]];if(void 0!==morphAttribute){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,ml=morphAttribute.length;m<ml;m++){const name=morphAttribute[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[name]=m}}}}getVertexPosition(vert,target){const geometry=this.geometry,morphPosition=geometry.morphAttributes.position,morphTargetsRelative=geometry.morphTargetsRelative;target.fromBufferAttribute(geometry.attributes.position,vert);const morphInfluences=this.morphTargetInfluences;if(morphPosition&&morphInfluences){_morphA.set(0,0,0);for(let i=0,il=morphPosition.length;i<il;i++){const influence=morphInfluences[i];0!==influence&&(_tempA.fromBufferAttribute(morphPosition[i],vert),_morphA.addScaledVector(morphTargetsRelative?_tempA:_tempA.sub(target),influence))}target.add(_morphA)}return this.isSkinnedMesh&&this.boneTransform(vert,target),target}raycast(raycaster,intersects){const geometry=this.geometry,material=this.material,matrixWorld=this.matrixWorld;if(void 0===material||(null===geometry.boundingSphere&&geometry.computeBoundingSphere(),_sphere.copy(geometry.boundingSphere),_sphere.applyMatrix4(matrixWorld),!1===raycaster.ray.intersectsSphere(_sphere))||(_inverseMatrix.copy(matrixWorld).invert(),_ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix),null!==geometry.boundingBox&&!1===_ray.intersectsBox(geometry.boundingBox)))return;let intersection;const index=geometry.index,position=geometry.attributes.position,uv=geometry.attributes.uv,uv2=geometry.attributes.uv2,groups=geometry.groups,drawRange=geometry.drawRange;if(null!==index)if(Array.isArray(material))for(let i=0,il=groups.length;i<il;i++){const group=groups[i],groupMaterial=material[group.materialIndex];for(let j=Math.max(group.start,drawRange.start),jl=Math.min(index.count,Math.min(group.start+group.count,drawRange.start+drawRange.count));j<jl;j+=3){const a=index.getX(j),b=index.getX(j+1),c=index.getX(j+2);intersection=checkBufferGeometryIntersection(this,groupMaterial,raycaster,_ray,uv,uv2,a,b,c),intersection&&(intersection.faceIndex=Math.floor(j/3),intersection.face.materialIndex=group.materialIndex,intersects.push(intersection))}}else for(let i=Math.max(0,drawRange.start),il=Math.min(index.count,drawRange.start+drawRange.count);i<il;i+=3){const a=index.getX(i),b=index.getX(i+1),c=index.getX(i+2);intersection=checkBufferGeometryIntersection(this,material,raycaster,_ray,uv,uv2,a,b,c),intersection&&(intersection.faceIndex=Math.floor(i/3),intersects.push(intersection))}else if(void 0!==position)if(Array.isArray(material))for(let i=0,il=groups.length;i<il;i++){const group=groups[i],groupMaterial=material[group.materialIndex];for(let j=Math.max(group.start,drawRange.start),jl=Math.min(position.count,Math.min(group.start+group.count,drawRange.start+drawRange.count));j<jl;j+=3)intersection=checkBufferGeometryIntersection(this,groupMaterial,raycaster,_ray,uv,uv2,j,j+1,j+2),intersection&&(intersection.faceIndex=Math.floor(j/3),intersection.face.materialIndex=group.materialIndex,intersects.push(intersection))}else for(let i=Math.max(0,drawRange.start),il=Math.min(position.count,drawRange.start+drawRange.count);i<il;i+=3)intersection=checkBufferGeometryIntersection(this,material,raycaster,_ray,uv,uv2,i,i+1,i+2),intersection&&(intersection.faceIndex=Math.floor(i/3),intersects.push(intersection))}}function checkIntersection(object,material,raycaster,ray,pA,pB,pC,point){let intersect;if(intersect=material.side===constants._Li?ray.intersectTriangle(pC,pB,pA,!0,point):ray.intersectTriangle(pA,pB,pC,material.side===constants.Wl3,point),null===intersect)return null;_intersectionPointWorld.copy(point),_intersectionPointWorld.applyMatrix4(object.matrixWorld);const distance=raycaster.ray.origin.distanceTo(_intersectionPointWorld);return distance<raycaster.near||distance>raycaster.far?null:{distance,point:_intersectionPointWorld.clone(),object}}function checkBufferGeometryIntersection(object,material,raycaster,ray,uv,uv2,a,b,c){object.getVertexPosition(a,_vA),object.getVertexPosition(b,_vB),object.getVertexPosition(c,_vC);const intersection=checkIntersection(object,material,raycaster,ray,_vA,_vB,_vC,_intersectionPoint);if(intersection){uv&&(_uvA.fromBufferAttribute(uv,a),_uvB.fromBufferAttribute(uv,b),_uvC.fromBufferAttribute(uv,c),intersection.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector22.F)),uv2&&(_uvA.fromBufferAttribute(uv2,a),_uvB.fromBufferAttribute(uv2,b),_uvC.fromBufferAttribute(uv2,c),intersection.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector22.F));const face={a,b,c,normal:new Vector32.P,materialIndex:0};Triangle.getNormal(_vA,_vB,_vC,face.normal),intersection.face=face}return intersection}__name(Mesh2,"Mesh"),__name(checkIntersection,"checkIntersection"),__name(checkBufferGeometryIntersection,"checkBufferGeometryIntersection")},6080:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>WebGLRenderer});var constants=__webpack_require__(8007),MathUtils=__webpack_require__(4090),Vector32=__webpack_require__(3104),Sphere=__webpack_require__(3174),Matrix3=__webpack_require__(6113);const _vector1=new Vector32.P,_vector2=new Vector32.P,_normalMatrix=new Matrix3.V;class Plane{constructor(normal=new Vector32.P(1,0,0),constant=0){this.isPlane=!0,this.normal=normal,this.constant=constant}set(normal,constant){return this.normal.copy(normal),this.constant=constant,this}setComponents(x,y,z,w){return this.normal.set(x,y,z),this.constant=w,this}setFromNormalAndCoplanarPoint(normal,point){return this.normal.copy(normal),this.constant=-point.dot(this.normal),this}setFromCoplanarPoints(a,b,c){const normal=_vector1.subVectors(c,b).cross(_vector2.subVectors(a,b)).normalize();return this.setFromNormalAndCoplanarPoint(normal,a),this}copy(plane){return this.normal.copy(plane.normal),this.constant=plane.constant,this}normalize(){const inverseNormalLength=1/this.normal.length();return this.normal.multiplyScalar(inverseNormalLength),this.constant*=inverseNormalLength,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(point){return this.normal.dot(point)+this.constant}distanceToSphere(sphere){return this.distanceToPoint(sphere.center)-sphere.radius}projectPoint(point,target){return target.copy(this.normal).multiplyScalar(-this.distanceToPoint(point)).add(point)}intersectLine(line,target){const direction=line.delta(_vector1),denominator=this.normal.dot(direction);if(0===denominator)return 0===this.distanceToPoint(line.start)?target.copy(line.start):null;const t=-(line.start.dot(this.normal)+this.constant)/denominator;return t<0||t>1?null:target.copy(direction).multiplyScalar(t).add(line.start)}intersectsLine(line){const startSign=this.distanceToPoint(line.start),endSign=this.distanceToPoint(line.end);return startSign<0&&endSign>0||endSign<0&&startSign>0}intersectsBox(box){return box.intersectsPlane(this)}intersectsSphere(sphere){return sphere.intersectsPlane(this)}coplanarPoint(target){return target.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(matrix,optionalNormalMatrix){const normalMatrix=optionalNormalMatrix||_normalMatrix.getNormalMatrix(matrix),referencePoint=this.coplanarPoint(_vector1).applyMatrix4(matrix),normal=this.normal.applyMatrix3(normalMatrix).normalize();return this.constant=-referencePoint.dot(normal),this}translate(offset){return this.constant-=offset.dot(this.normal),this}equals(plane){return plane.normal.equals(this.normal)&&plane.constant===this.constant}clone(){return(new this.constructor).copy(this)}}__name(Plane,"Plane");const _sphere=new Sphere.a,_vector=new Vector32.P;class Frustum{constructor(p0=new Plane,p1=new Plane,p2=new Plane,p3=new Plane,p4=new Plane,p5=new Plane){this.planes=[p0,p1,p2,p3,p4,p5]}set(p0,p1,p2,p3,p4,p5){const planes=this.planes;return planes[0].copy(p0),planes[1].copy(p1),planes[2].copy(p2),planes[3].copy(p3),planes[4].copy(p4),planes[5].copy(p5),this}copy(frustum){const planes=this.planes;for(let i=0;i<6;i++)planes[i].copy(frustum.planes[i]);return this}setFromProjectionMatrix(m){const planes=this.planes,me=m.elements,me0=me[0],me1=me[1],me2=me[2],me3=me[3],me4=me[4],me5=me[5],me6=me[6],me7=me[7],me8=me[8],me9=me[9],me10=me[10],me11=me[11],me12=me[12],me13=me[13],me14=me[14],me15=me[15];return planes[0].setComponents(me3-me0,me7-me4,me11-me8,me15-me12).normalize(),planes[1].setComponents(me3+me0,me7+me4,me11+me8,me15+me12).normalize(),planes[2].setComponents(me3+me1,me7+me5,me11+me9,me15+me13).normalize(),planes[3].setComponents(me3-me1,me7-me5,me11-me9,me15-me13).normalize(),planes[4].setComponents(me3-me2,me7-me6,me11-me10,me15-me14).normalize(),planes[5].setComponents(me3+me2,me7+me6,me11+me10,me15+me14).normalize(),this}intersectsObject(object){const geometry=object.geometry;return null===geometry.boundingSphere&&geometry.computeBoundingSphere(),_sphere.copy(geometry.boundingSphere).applyMatrix4(object.matrixWorld),this.intersectsSphere(_sphere)}intersectsSprite(sprite){return _sphere.center.set(0,0,0),_sphere.radius=.7071067811865476,_sphere.applyMatrix4(sprite.matrixWorld),this.intersectsSphere(_sphere)}intersectsSphere(sphere){const planes=this.planes,center=sphere.center,negRadius=-sphere.radius;for(let i=0;i<6;i++)if(planes[i].distanceToPoint(center)<negRadius)return!1;return!0}intersectsBox(box){const planes=this.planes;for(let i=0;i<6;i++){const plane=planes[i];if(_vector.x=plane.normal.x>0?box.max.x:box.min.x,_vector.y=plane.normal.y>0?box.max.y:box.min.y,_vector.z=plane.normal.z>0?box.max.z:box.min.z,plane.distanceToPoint(_vector)<0)return!1}return!0}containsPoint(point){const planes=this.planes;for(let i=0;i<6;i++)if(planes[i].distanceToPoint(point)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}__name(Frustum,"Frustum");var Matrix42=__webpack_require__(7971),Vector22=__webpack_require__(2319),Vector4=__webpack_require__(2131);function WebGLAnimation(){let context=null,isAnimating=!1,animationLoop=null,requestId=null;function onAnimationFrame(time,frame){animationLoop(time,frame),requestId=context.requestAnimationFrame(onAnimationFrame)}return __name(onAnimationFrame,"onAnimationFrame"),{start:function(){!0!==isAnimating&&null!==animationLoop&&(requestId=context.requestAnimationFrame(onAnimationFrame),isAnimating=!0)},stop:function(){context.cancelAnimationFrame(requestId),isAnimating=!1},setAnimationLoop:function(callback){animationLoop=callback},setContext:function(value){context=value}}}function WebGLAttributes(gl,capabilities){const isWebGL2=capabilities.isWebGL2,buffers=new WeakMap;function createBuffer(attribute,bufferType){const array=attribute.array,usage=attribute.usage,buffer=gl.createBuffer();let type;if(gl.bindBuffer(bufferType,buffer),gl.bufferData(bufferType,array,usage),attribute.onUploadCallback(),array instanceof Float32Array)type=gl.FLOAT;else if(array instanceof Uint16Array)if(attribute.isFloat16BufferAttribute){if(!isWebGL2)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");type=gl.HALF_FLOAT}else type=gl.UNSIGNED_SHORT;else if(array instanceof Int16Array)type=gl.SHORT;else if(array instanceof Uint32Array)type=gl.UNSIGNED_INT;else if(array instanceof Int32Array)type=gl.INT;else if(array instanceof Int8Array)type=gl.BYTE;else if(array instanceof Uint8Array)type=gl.UNSIGNED_BYTE;else{if(!(array instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+array);type=gl.UNSIGNED_BYTE}return{buffer,type,bytesPerElement:array.BYTES_PER_ELEMENT,version:attribute.version}}function updateBuffer(buffer,attribute,bufferType){const array=attribute.array,updateRange=attribute.updateRange;gl.bindBuffer(bufferType,buffer),-1===updateRange.count?gl.bufferSubData(bufferType,0,array):(isWebGL2?gl.bufferSubData(bufferType,updateRange.offset*array.BYTES_PER_ELEMENT,array,updateRange.offset,updateRange.count):gl.bufferSubData(bufferType,updateRange.offset*array.BYTES_PER_ELEMENT,array.subarray(updateRange.offset,updateRange.offset+updateRange.count)),updateRange.count=-1),attribute.onUploadCallback()}function get(attribute){return attribute.isInterleavedBufferAttribute&&(attribute=attribute.data),buffers.get(attribute)}function remove(attribute){attribute.isInterleavedBufferAttribute&&(attribute=attribute.data);const data=buffers.get(attribute);data&&(gl.deleteBuffer(data.buffer),buffers.delete(attribute))}function update(attribute,bufferType){if(attribute.isGLBufferAttribute){const cached=buffers.get(attribute);return void((!cached||cached.version<attribute.version)&&buffers.set(attribute,{buffer:attribute.buffer,type:attribute.type,bytesPerElement:attribute.elementSize,version:attribute.version}))}attribute.isInterleavedBufferAttribute&&(attribute=attribute.data);const data=buffers.get(attribute);void 0===data?buffers.set(attribute,createBuffer(attribute,bufferType)):data.version<attribute.version&&(updateBuffer(data.buffer,attribute,bufferType),data.version=attribute.version)}return __name(createBuffer,"createBuffer"),__name(updateBuffer,"updateBuffer"),__name(get,"get"),__name(remove,"remove"),__name(update,"update"),{get,remove,update}}__name(WebGLAnimation,"WebGLAnimation"),__name(WebGLAttributes,"WebGLAttributes");var BoxGeometry=__webpack_require__(7310),PlaneGeometry=__webpack_require__(5073),Material=__webpack_require__(7589);function cloneUniforms(src){const dst={};for(const u in src){dst[u]={};for(const p in src[u]){const property=src[u][p];dst[u][p]=property&&(property.isColor||property.isMatrix3||property.isMatrix4||property.isVector2||property.isVector3||property.isVector4||property.isTexture||property.isQuaternion)?property.clone():Array.isArray(property)?property.slice():property}}return dst}function mergeUniforms(uniforms){const merged={};for(let u=0;u<uniforms.length;u++){const tmp=cloneUniforms(uniforms[u]);for(const p in tmp)merged[p]=tmp[p]}return merged}function cloneUniformsGroups(src){const dst=[];for(let u=0;u<src.length;u++)dst.push(src[u].clone());return dst}function getUnlitUniformColorSpace(renderer){return null===renderer.getRenderTarget()&&renderer.outputEncoding===constants.knz?constants.KI_:constants.GUF}__name(cloneUniforms,"cloneUniforms"),__name(mergeUniforms,"mergeUniforms"),__name(cloneUniformsGroups,"cloneUniformsGroups"),__name(getUnlitUniformColorSpace,"getUnlitUniformColorSpace");const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};class ShaderMaterial extends Material.F{constructor(parameters){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",this.fragmentShader="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==parameters&&this.setValues(parameters)}copy(source){return super.copy(source),this.fragmentShader=source.fragmentShader,this.vertexShader=source.vertexShader,this.uniforms=cloneUniforms(source.uniforms),this.uniformsGroups=cloneUniformsGroups(source.uniformsGroups),this.defines=Object.assign({},source.defines),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.fog=source.fog,this.lights=source.lights,this.clipping=source.clipping,this.extensions=Object.assign({},source.extensions),this.glslVersion=source.glslVersion,this}toJSON(meta){const data=super.toJSON(meta);data.glslVersion=this.glslVersion,data.uniforms={};for(const name in this.uniforms){const value=this.uniforms[name].value;data.uniforms[name]=value&&value.isTexture?{type:"t",value:value.toJSON(meta).uuid}:value&&value.isColor?{type:"c",value:value.getHex()}:value&&value.isVector2?{type:"v2",value:value.toArray()}:value&&value.isVector3?{type:"v3",value:value.toArray()}:value&&value.isVector4?{type:"v4",value:value.toArray()}:value&&value.isMatrix3?{type:"m3",value:value.toArray()}:value&&value.isMatrix4?{type:"m4",value:value.toArray()}:{value}}Object.keys(this.defines).length>0&&(data.defines=this.defines),data.vertexShader=this.vertexShader,data.fragmentShader=this.fragmentShader;const extensions={};for(const key in this.extensions)!0===this.extensions[key]&&(extensions[key]=!0);return Object.keys(extensions).length>0&&(data.extensions=extensions),data}}__name(ShaderMaterial,"ShaderMaterial");var Color=__webpack_require__(2746),Mesh2=__webpack_require__(5932);const ShaderChunk={alphamap_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",alphamap_pars_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",alphatest_fragment:"\n#ifdef USE_ALPHATEST\n\n\tif ( diffuseColor.a < alphaTest ) discard;\n\n#endif\n",alphatest_pars_fragment:"\n#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif\n",aomap_fragment:"\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\n\t#endif\n\n#endif\n",aomap_pars_fragment:"\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n",bsdfs:"\n\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney\u2019s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( V * D );\n\n}\n\n#ifdef USE_IRIDESCENCE\n\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\n\t\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\t\tfloat D = D_GGX( alpha, dotNH );\n\n\t\treturn F * ( V * D );\n\n\t}\n\n#endif\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nfloat D_Charlie( float roughness, float dotNH ) {\n\n\tfloat alpha = pow2( roughness );\n\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 ); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n\n}\n\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\n\treturn sheenColor * ( D * V );\n\n}\n\n#endif\n",iridescence_fragment:"\n\n#ifdef USE_IRIDESCENCE\n\n\t// XYZ to linear-sRGB color space\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\n\t// Assume air interface for top\n\t// Note: We don't handle the case fresnel0 == 1\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\n\t}\n\n\t// Conversion FO/IOR\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\n\t}\n\n\t// ior is a value between 1.0 and 3.0. 1.0 is air interface\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\n\t}\n\n\t// Fresnel equations for dielectric/dielectric interfaces.\n\t// Ref: https://belcour.github.io/blog/research/2017/05/01/brdf-thin-film.html\n\t// Evaluation XYZ sensitivity curves in Fourier space\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\n\t}\n\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\n\t\tvec3 I;\n\n\t\t// Force iridescenceIOR -> outsideIOR when thinFilmThickness -> 0.0\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\t// Evaluate the cosTheta on the base layer (Snell law)\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\n\t\t// Handle TIR:\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\n\t\t\t return vec3( 1.0 );\n\n\t\t}\n\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\n\t\t// First interface\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\n\t\t// Second interface\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) ); // guard against 1.0\n\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\n\t\t// Phase shift\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\n\t\t// Compound terms\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\n\t\t// Reflectance term for m = 0 (DC term amplitude)\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\n\t\t// Reflectance term for m > 0 (pairs of diracs)\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\n\t\t}\n\n\t\t// Since out of gamut colors might be produced, negative color values are clamped to 0.\n\t\treturn max( I, vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n",bumpmap_pars_fragment:"\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// https://mmikk.github.io/papers3d/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm; // normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",clipping_planes_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",clipping_planes_pars_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",clipping_planes_pars_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n",clipping_planes_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n",color_fragment:"\n#if defined( USE_COLOR_ALPHA )\n\n\tdiffuseColor *= vColor;\n\n#elif defined( USE_COLOR )\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",color_pars_fragment:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvarying vec4 vColor;\n\n#elif defined( USE_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n",color_pars_vertex:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvarying vec4 vColor;\n\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n",color_vertex:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvColor = vec4( 1.0 );\n\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvColor = vec3( 1.0 );\n\n#endif\n\n#ifdef USE_COLOR\n\n\tvColor *= color;\n\n#endif\n\n#ifdef USE_INSTANCING_COLOR\n\n\tvColor.xyz *= instanceColor.xyz;\n\n#endif\n",common:"\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\n\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\n\treturn fract( sin( sn ) * c );\n\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\nfloat luminance( const in vec3 rgb ) {\n\n\t// assumes rgb is in linear color space with sRGB primaries and D65 white point\n\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\n\treturn dot( weights, rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n\treturn m[ 2 ][ 3 ] == - 1.0;\n\n}\n\nvec2 equirectUv( in vec3 dir ) {\n\n\t// dir is assumed to be unit length\n\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\treturn vec2( u, v );\n\n}\n",cube_uv_reflection_fragment:"\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\n\t// These shader functions convert between the UV coordinates of a single face of\n\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t// sampling a textureCube (not generally normalized ).\n\n\tfloat getFace( vec3 direction ) {\n\n\t\tvec3 absDirection = abs( direction );\n\n\t\tfloat face = - 1.0;\n\n\t\tif ( absDirection.x > absDirection.z ) {\n\n\t\t\tif ( absDirection.x > absDirection.y )\n\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t} else {\n\n\t\t\tif ( absDirection.z > absDirection.y )\n\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n\t// RH coordinate system; PMREM face-indexing convention\n\tvec2 getUV( vec3 direction, float face ) {\n\n\t\tvec2 uv;\n\n\t\tif ( face == 0.0 ) {\n\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\n\t\t} else if ( face == 1.0 ) {\n\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\n\t\t} else if ( face == 2.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\n\t\t} else if ( face == 3.0 ) {\n\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\n\t\t} else if ( face == 4.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\n\t\t} else {\n\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\n\t\t}\n\n\t\treturn 0.5 * ( uv + 1.0 );\n\n\t}\n\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\n\t\tfloat face = getFace( direction );\n\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\n\t\tfloat faceSize = exp2( mipInt );\n\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0; // #25071\n\n\t\tif ( face > 2.0 ) {\n\n\t\t\tuv.y += faceSize;\n\n\t\t\tface -= 3.0;\n\n\t\t}\n\n\t\tuv.x += face * faceSize;\n\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\n\t\t#ifdef texture2DGradEXT\n\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb; // disable anisotropic filtering\n\n\t\t#else\n\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\n\t\t#endif\n\n\t}\n\n\t// These defines must match with PMREMGenerator\n\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\n\tfloat roughnessToMip( float roughness ) {\n\n\t\tfloat mip = 0.0;\n\n\t\tif ( roughness >= cubeUV_r1 ) {\n\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\n\t\t} else {\n\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t}\n\n\t\treturn mip;\n\n\t}\n\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\n\t\tfloat mipF = fract( mip );\n\n\t\tfloat mipInt = floor( mip );\n\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\n\t\tif ( mipF == 0.0 ) {\n\n\t\t\treturn vec4( color0, 1.0 );\n\n\t\t} else {\n\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\n\t\t}\n\n\t}\n\n#endif\n",defaultnormal_vertex:"\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n",displacementmap_pars_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",displacementmap_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n",emissivemap_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",emissivemap_pars_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",encodings_fragment:"\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\n",envmap_fragment:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",envmap_common_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n",envmap_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",envmap_pars_vertex:"\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",envmap_physical_pars_fragment:"\n#if defined( USE_ENVMAP )\n\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t\t#else\n\n\t\t\treturn vec3( 0.0 );\n\n\t\t#endif\n\n\t}\n\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\n\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t\t#else\n\n\t\t\treturn vec3( 0.0 );\n\n\t\t#endif\n\n\t}\n\n#endif\n",envmap_vertex:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\n\n\tvFogDepth = - mvPosition.z;\n\n#endif\n",fog_pars_vertex:"\n#ifdef USE_FOG\n\n\tvarying float vFogDepth;\n\n#endif\n",fog_fragment:"\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",fog_pars_fragment:"\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",gradientmap_pars_fragment:"\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\n\t#else\n\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\n\t#endif\n\n}\n",lightmap_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n\n#endif\n",lightmap_pars_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",lights_lambert_fragment:"\nLambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;\n",lights_lambert_pars_fragment:"\nvarying vec3 vViewPosition;\n\nstruct LambertMaterial {\n\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n",lights_pars_begin:"\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\treturn irradiance;\n\n}\n\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t\t// page 32, equation 26: E[window1]\n\t\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\t\tif ( cutoffDistance > 0.0 ) {\n\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t\t}\n\n\t\treturn distanceFalloff;\n\n\t#else\n\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t\t}\n\n\t\treturn 1.0;\n\n\t#endif\n\n}\n\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// light is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\n\t\tlight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// light is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\n\t\tlight.direction = normalize( lVector );\n\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\tif ( spotAttenuation > 0.0 ) {\n\n\t\t\tfloat lightDistance = length( lVector );\n\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\n\t\t} else {\n\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\n\t\t}\n\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",lights_toon_fragment:"\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\n",lights_toon_pars_fragment:"\nvarying vec3 vViewPosition;\n\nstruct ToonMaterial {\n\n\tvec3 diffuseColor;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n",lights_phong_fragment:"\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"\nvarying vec3 vViewPosition;\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n",lights_physical_fragment:"\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.roughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n\n#ifdef IOR\n\n\tmaterial.ior = ior;\n\n\t#ifdef SPECULAR\n\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\n\t\t#endif\n\n\t\t#ifdef USE_SPECULARCOLORMAP\n\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\n\t\t#endif\n\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\n\t#else\n\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\n\t#endif\n\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n\n#endif\n\n#ifdef USE_CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_IRIDESCENCE\n\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\n\t#ifdef USE_IRIDESCENCEMAP\n\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\n\t#endif\n\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\n\t#else\n\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\n\t#endif\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheenColor;\n\n\t#ifdef USE_SHEENCOLORMAP\n\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\n\t#endif\n\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\n\t#ifdef USE_SHEENROUGHNESSMAP\n\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\n\t#endif\n\n#endif\n",lights_physical_pars_fragment:'\nstruct PhysicalMaterial {\n\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\n};\n\n// temporary\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\n\n// This is a curve-fit approxmation to the "Charlie sheen" BRDF integrated over the hemisphere from \n// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF". The analysis can be found\n// in the Sheen section of https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tfloat r2 = roughness * roughness;\n\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\n\treturn saturate( DG * RECIPROCAL_PI );\n\n}\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\n\treturn fab;\n\n}\n\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\treturn specularColor * fab.x + specularF90 * fab.y;\n\n}\n\n// Fdez-Ag\xfcera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\n\t#else\n\n\t\tvec3 Fr = specularColor;\n\n\t#endif\n\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\n\t#endif\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\n\t#else\n\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\n\t#endif\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\n\t#else\n\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\n\t#endif\n\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n',lights_fragment_begin:"\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef USE_CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\n#ifdef USE_IRIDESCENCE\n\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\n\tif ( material.iridescenceThickness == 0.0 ) {\n\n\t\tmaterial.iridescence = 0.0;\n\n\t} else {\n\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\n\t}\n\n\tif ( material.iridescence > 0.0 ) {\n\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\n\t\t// Iridescence F0 approximation\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\n\t}\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\n\t\t// spot lights are ordered [shadows with maps, shadows without maps, maps without shadows, none]\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",lights_fragment_maps:"\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\n\t#endif\n\n#endif\n",lights_fragment_end:"\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",logdepthbuf_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",logdepthbuf_pars_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n",logdepthbuf_pars_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",logdepthbuf_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n",map_fragment:"\n#ifdef USE_MAP\n\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\n\t#ifdef DECODE_VIDEO_TEXTURE\n\n\t\t// inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\n\t#endif\n\n\tdiffuseColor *= sampledDiffuseColor;\n\n#endif\n",map_pars_fragment:"\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",map_particle_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, uv );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n",map_particle_pars_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",metalnessmap_fragment:"\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",metalnessmap_pars_fragment:"\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",morphcolor_vertex:"\n#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tvColor *= morphTargetBaseInfluence;\n\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t#if defined( USE_COLOR_ALPHA )\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\n\t\t#elif defined( USE_COLOR )\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\n\t\t#endif\n\n\t}\n\n#endif\n",morphnormal_vertex:"\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\n\t\t}\n\n\t#else\n\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n\t#endif\n\n#endif\n",morphtarget_pars_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\n\t\t}\n\n\t#else\n\n\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\n\t\t#else\n\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",morphtarget_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\n\t\t}\n\n\t#else\n\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",normal_fragment_begin:"\nfloat faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n\n#ifdef FLAT_SHADED\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n",normal_fragment_maps:"\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n\n#endif\n",normal_pars_fragment:"\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n",normal_pars_vertex:"\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n",normal_vertex:"\n#ifndef FLAT_SHADED // normal is computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n",normalmap_pars_fragment:"\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Normal Mapping Without Precomputed Tangents\n\t// http://www.thetenthplanet.de/archives/1180\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 N = surf_norm; // normalized\n\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\n\t}\n\n#endif\n",clearcoat_normal_fragment_begin:"\n#ifdef USE_CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n",clearcoat_normal_fragment_maps:"\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\n\t#endif\n\n#endif\n",clearcoat_pars_fragment:"\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n",iridescence_pars_fragment:"\n\n#ifdef USE_IRIDESCENCEMAP\n\n\tuniform sampler2D iridescenceMap;\n\n#endif\n\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\tuniform sampler2D iridescenceThicknessMap;\n\n#endif\n",output_fragment:"\n#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n\n// https://github.com/mrdoob/three.js/pull/22425\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\n\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n",packing:"\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\n\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\n\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\n// NOTE: https://twitter.com/gonnavis/status/1377183786949959682\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",project_vertex:"\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",dithering_pars_fragment:"\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift according to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",roughnessmap_fragment:"\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",roughnessmap_pars_fragment:"\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",shadowmap_pars_fragment:"\n#if NUM_SPOT_LIGHT_COORDS > 0\n\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n\n#endif\n\n#if NUM_SPOT_LIGHT_MAPS > 0\n\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",shadowmap_pars_vertex:"\n\n#if NUM_SPOT_LIGHT_COORDS > 0\n\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",shadowmap_vertex:"\n#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\t// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\n\t#endif\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",shadowmask_pars_fragment:"\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",skinbase_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",skinning_pars_vertex:"\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\n\tmat4 getBoneMatrix( const in float i ) {\n\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\ty = dy * ( y + 0.5 );\n\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\treturn bone;\n\n\t}\n\n#endif\n",skinning_vertex:"\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",skinnormal_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n",specularmap_fragment:"\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",specularmap_pars_fragment:"\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",tonemapping_fragment:"\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",tonemapping_pars_fragment:"\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/docs/techreports/2002/pdf/UUCS-02-001.pdf\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs\nvec3 RRTAndODTFit( vec3 v ) {\n\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n\n}\n\n// this implementation of ACES is modified to accommodate a brighter viewing environment.\n// the scale factor of 1/0.6 is subjective. see discussion in #19621.\n\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\t// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ), // transposed from source\n\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\n\t// ODT_SAT => XYZ => D60_2_D65 => sRGB\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ), // transposed from source\n\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\n\tcolor *= toneMappingExposure / 0.6;\n\n\tcolor = ACESInputMat * color;\n\n\t// Apply RRT and ODT\n\tcolor = RRTAndODTFit( color );\n\n\tcolor = ACESOutputMat * color;\n\n\t// Clamp to [0, 1]\n\treturn saturate( color );\n\n}\n\nvec3 CustomToneMapping( vec3 color ) { return color; }\n",transmission_fragment:"\n#ifdef USE_TRANSMISSION\n\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\n\t#ifdef USE_TRANSMISSIONMAP\n\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\n\t#endif\n\n\t#ifdef USE_THICKNESSMAP\n\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\n\t#endif\n\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n\n#endif\n",transmission_pars_fragment:"\n#ifdef USE_TRANSMISSION\n\n\t// Transmission code is based on glTF-Sampler-Viewer\n\t// https://github.com/KhronosGroup/glTF-Sample-Viewer\n\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\n\t#ifdef USE_TRANSMISSIONMAP\n\n\t\tuniform sampler2D transmissionMap;\n\n\t#endif\n\n\t#ifdef USE_THICKNESSMAP\n\n\t\tuniform sampler2D thicknessMap;\n\n\t#endif\n\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec3 vWorldPosition;\n\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\n\t\t// Direction of refracted light.\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\n\t\t// Compute rotation-independant scaling of the model matrix.\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t// The thickness is specified in local space.\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\n\t}\n\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\n\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\n\t}\n\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\n\t\t#ifdef texture2DLodEXT\n\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\n\t\t#else\n\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\n\t\t#endif\n\n\t}\n\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\n\t\tif ( isinf( attenuationDistance ) ) {\n\n\t\t\t// Attenuation distance is +\u221e, i.e. the transmitted color is not attenuated at all.\n\t\t\treturn radiance;\n\n\t\t} else {\n\n\t\t\t// Compute light attenuation using Beer's law.\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law\n\t\t\treturn transmittance * radiance;\n\n\t\t}\n\n\t}\n\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\n\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\n\t\t// Get the specular component.\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\n\t}\n#endif\n",uv_pars_fragment:"\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n",uv_pars_vertex:"\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n",uv_vertex:"\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",uv2_pars_fragment:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",uv2_pars_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n",uv2_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n",worldpos_vertex:"\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n",background_vert:"\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",background_frag:"\nuniform sampler2D t2D;\nuniform float backgroundIntensity;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\t#ifdef DECODE_VIDEO_TEXTURE\n\n\t\t// inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\n\t#endif\n\n\ttexColor.rgb *= backgroundIntensity;\n\n\tgl_FragColor = texColor;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",backgroundCube_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",backgroundCube_frag:"\n\n#ifdef ENVMAP_TYPE_CUBE\n\n\tuniform samplerCube envMap;\n\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\tuniform sampler2D envMap;\n\n#endif\n\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\n\t#else\n\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t#endif\n\n\ttexColor.rgb *= backgroundIntensity;\n\n\tgl_FragColor = texColor;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",cube_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",cube_frag:"\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\nvoid main() {\n\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",depth_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n",depth_frag:"\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n",distanceRGBA_vert:"\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",distanceRGBA_frag:"\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",equirect_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",equirect_frag:"\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV = equirectUv( direction );\n\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",linedashed_vert:"\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",linedashed_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",meshbasic_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshbasic_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshlambert_vert:"\n#define LAMBERT\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshlambert_frag:"\n#define LAMBERT\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshmatcap_vert:"\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",meshmatcap_frag:"\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 ); // default if matcap is missing\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshnormal_vert:"\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",meshnormal_frag:"\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n\t#ifdef OPAQUE\n\n\t\tgl_FragColor.a = 1.0;\n\n\t#endif\n\n}\n",meshphong_vert:"\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshphong_frag:"\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshphysical_vert:"\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifdef USE_TRANSMISSION\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n#ifdef USE_TRANSMISSION\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n}\n",meshphysical_frag:"\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef IOR\n\tuniform float ior;\n#endif\n\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n\t#include <transmission_fragment>\n\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n\t#ifdef USE_SHEEN\n\n\t\t// Sheen energy compensation approximation calculation can be found at the end of\n\t\t// https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\n\t#endif\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshtoon_vert:"\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshtoon_frag:"\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",points_vert:"\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",points_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",shadow_vert:"\n#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",shadow_frag:"\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",sprite_vert:"\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",sprite_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},UniformsLib={common:{diffuse:{value:new Color.I(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3.V},uv2Transform:{value:new Matrix3.V},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector22.F(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color.I(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color.I(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3.V}},sprite:{diffuse:{value:new Color.I(16777215)},opacity:{value:1},center:{value:new Vector22.F(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3.V}}},ShaderLib2={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color.I(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color.I(0)},specular:{value:new Color.I(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color.I(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color.I(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3.V},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector32.P},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color.I(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib2.physical={uniforms:mergeUniforms([ShaderLib2.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector22.F(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color.I(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector22.F},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color.I(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color.I(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(renderer,cubemaps,cubeuvmaps,state,objects,alpha,premultipliedAlpha){const clearColor=new Color.I(0);let planeMesh,boxMesh,clearAlpha=!0===alpha?0:1,currentBackground=null,currentBackgroundVersion=0,currentTonemapping=null;function render(renderList,scene){let forceClear=!1,background=!0===scene.isScene?scene.background:null;background&&background.isTexture&&(background=(scene.backgroundBlurriness>0?cubeuvmaps:cubemaps).get(background));const xr=renderer.xr,session=xr.getSession&&xr.getSession();session&&"additive"===session.environmentBlendMode&&(background=null),null===background?setClear(clearColor,clearAlpha):background&&background.isColor&&(setClear(background,1),forceClear=!0),(renderer.autoClear||forceClear)&&renderer.clear(renderer.autoClearColor,renderer.autoClearDepth,renderer.autoClearStencil),background&&(background.isCubeTexture||background.mapping===constants.g8_)?(void 0===boxMesh&&(boxMesh=new Mesh2.K(new BoxGeometry.D(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib2.backgroundCube.uniforms),vertexShader:ShaderLib2.backgroundCube.vertexShader,fragmentShader:ShaderLib2.backgroundCube.fragmentShader,side:constants._Li,depthTest:!1,depthWrite:!1,fog:!1})),boxMesh.geometry.deleteAttribute("normal"),boxMesh.geometry.deleteAttribute("uv"),boxMesh.onBeforeRender=function(renderer2,scene2,camera){this.matrixWorld.copyPosition(camera.matrixWorld)},Object.defineProperty(boxMesh.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),objects.update(boxMesh)),boxMesh.material.uniforms.envMap.value=background,boxMesh.material.uniforms.flipEnvMap.value=background.isCubeTexture&&!1===background.isRenderTargetTexture?-1:1,boxMesh.material.uniforms.backgroundBlurriness.value=scene.backgroundBlurriness,boxMesh.material.uniforms.backgroundIntensity.value=scene.backgroundIntensity,boxMesh.material.toneMapped=background.encoding!==constants.knz,(currentBackground!==background||currentBackgroundVersion!==background.version||currentTonemapping!==renderer.toneMapping)&&(boxMesh.material.needsUpdate=!0,currentBackground=background,currentBackgroundVersion=background.version,currentTonemapping=renderer.toneMapping),boxMesh.layers.enableAll(),renderList.unshift(boxMesh,boxMesh.geometry,boxMesh.material,0,0,null)):background&&background.isTexture&&(void 0===planeMesh&&(planeMesh=new Mesh2.K(new PlaneGeometry._(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib2.background.uniforms),vertexShader:ShaderLib2.background.vertexShader,fragmentShader:ShaderLib2.background.fragmentShader,side:constants.Wl3,depthTest:!1,depthWrite:!1,fog:!1})),planeMesh.geometry.deleteAttribute("normal"),Object.defineProperty(planeMesh.material,"map",{get:function(){return this.uniforms.t2D.value}}),objects.update(planeMesh)),planeMesh.material.uniforms.t2D.value=background,planeMesh.material.uniforms.backgroundIntensity.value=scene.backgroundIntensity,planeMesh.material.toneMapped=background.encoding!==constants.knz,!0===background.matrixAutoUpdate&&background.updateMatrix(),planeMesh.material.uniforms.uvTransform.value.copy(background.matrix),(currentBackground!==background||currentBackgroundVersion!==background.version||currentTonemapping!==renderer.toneMapping)&&(planeMesh.material.needsUpdate=!0,currentBackground=background,currentBackgroundVersion=background.version,currentTonemapping=renderer.toneMapping),planeMesh.layers.enableAll(),renderList.unshift(planeMesh,planeMesh.geometry,planeMesh.material,0,0,null))}function setClear(color,alpha2){color.getRGB(_rgb,getUnlitUniformColorSpace(renderer)),state.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,alpha2,premultipliedAlpha)}return __name(render,"render"),__name(setClear,"setClear"),{getClearColor:function(){return clearColor},setClearColor:function(color,alpha2=1){clearColor.set(color),clearAlpha=alpha2,setClear(clearColor,clearAlpha)},getClearAlpha:function(){return clearAlpha},setClearAlpha:function(alpha2){clearAlpha=alpha2,setClear(clearColor,clearAlpha)},render}}function WebGLBindingStates(gl,extensions,attributes,capabilities){const maxVertexAttributes=gl.getParameter(gl.MAX_VERTEX_ATTRIBS),extension=capabilities.isWebGL2?null:extensions.get("OES_vertex_array_object"),vaoAvailable=capabilities.isWebGL2||null!==extension,bindingStates={},defaultState=createBindingState(null);let currentState=defaultState,forceUpdate=!1;function setup(object,material,program,geometry,index){let updateBuffers=!1;if(vaoAvailable){const state=getBindingState(geometry,program,material);currentState!==state&&(currentState=state,bindVertexArrayObject(currentState.object)),updateBuffers=needsUpdate(object,geometry,program,index),updateBuffers&&saveCache(object,geometry,program,index)}else{const wireframe=!0===material.wireframe;(currentState.geometry!==geometry.id||currentState.program!==program.id||currentState.wireframe!==wireframe)&&(currentState.geometry=geometry.id,currentState.program=program.id,currentState.wireframe=wireframe,updateBuffers=!0)}null!==index&&attributes.update(index,gl.ELEMENT_ARRAY_BUFFER),(updateBuffers||forceUpdate)&&(forceUpdate=!1,setupVertexAttributes(object,material,program,geometry),null!==index&&gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,attributes.get(index).buffer))}function createVertexArrayObject(){return capabilities.isWebGL2?gl.createVertexArray():extension.createVertexArrayOES()}function bindVertexArrayObject(vao){return capabilities.isWebGL2?gl.bindVertexArray(vao):extension.bindVertexArrayOES(vao)}function deleteVertexArrayObject(vao){return capabilities.isWebGL2?gl.deleteVertexArray(vao):extension.deleteVertexArrayOES(vao)}function getBindingState(geometry,program,material){const wireframe=!0===material.wireframe;let programMap=bindingStates[geometry.id];void 0===programMap&&(programMap={},bindingStates[geometry.id]=programMap);let stateMap=programMap[program.id];void 0===stateMap&&(stateMap={},programMap[program.id]=stateMap);let state=stateMap[wireframe];return void 0===state&&(state=createBindingState(createVertexArrayObject()),stateMap[wireframe]=state),state}function createBindingState(vao){const newAttributes=[],enabledAttributes=[],attributeDivisors=[];for(let i=0;i<maxVertexAttributes;i++)newAttributes[i]=0,enabledAttributes[i]=0,attributeDivisors[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes,enabledAttributes,attributeDivisors,object:vao,attributes:{},index:null}}function needsUpdate(object,geometry,program,index){const cachedAttributes=currentState.attributes,geometryAttributes=geometry.attributes;let attributesNum=0;const programAttributes=program.getAttributes();for(const name in programAttributes)if(programAttributes[name].location>=0){const cachedAttribute=cachedAttributes[name];let geometryAttribute=geometryAttributes[name];if(void 0===geometryAttribute&&("instanceMatrix"===name&&object.instanceMatrix&&(geometryAttribute=object.instanceMatrix),"instanceColor"===name&&object.instanceColor&&(geometryAttribute=object.instanceColor)),void 0===cachedAttribute||cachedAttribute.attribute!==geometryAttribute||geometryAttribute&&cachedAttribute.data!==geometryAttribute.data)return!0;attributesNum++}return currentState.attributesNum!==attributesNum||currentState.index!==index}function saveCache(object,geometry,program,index){const cache={},attributes2=geometry.attributes;let attributesNum=0;const programAttributes=program.getAttributes();for(const name in programAttributes)if(programAttributes[name].location>=0){let attribute=attributes2[name];void 0===attribute&&("instanceMatrix"===name&&object.instanceMatrix&&(attribute=object.instanceMatrix),"instanceColor"===name&&object.instanceColor&&(attribute=object.instanceColor));const data={};data.attribute=attribute,attribute&&attribute.data&&(data.data=attribute.data),cache[name]=data,attributesNum++}currentState.attributes=cache,currentState.attributesNum=attributesNum,currentState.index=index}function initAttributes(){const newAttributes=currentState.newAttributes;for(let i=0,il=newAttributes.length;i<il;i++)newAttributes[i]=0}function enableAttribute(attribute){enableAttributeAndDivisor(attribute,0)}function enableAttributeAndDivisor(attribute,meshPerAttribute){const enabledAttributes=currentState.enabledAttributes,attributeDivisors=currentState.attributeDivisors;currentState.newAttributes[attribute]=1,0===enabledAttributes[attribute]&&(gl.enableVertexAttribArray(attribute),enabledAttributes[attribute]=1),attributeDivisors[attribute]!==meshPerAttribute&&((capabilities.isWebGL2?gl:extensions.get("ANGLE_instanced_arrays"))[capabilities.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](attribute,meshPerAttribute),attributeDivisors[attribute]=meshPerAttribute)}function disableUnusedAttributes(){const newAttributes=currentState.newAttributes,enabledAttributes=currentState.enabledAttributes;for(let i=0,il=enabledAttributes.length;i<il;i++)enabledAttributes[i]!==newAttributes[i]&&(gl.disableVertexAttribArray(i),enabledAttributes[i]=0)}function vertexAttribPointer(index,size,type,normalized,stride,offset){!0!==capabilities.isWebGL2||type!==gl.INT&&type!==gl.UNSIGNED_INT?gl.vertexAttribPointer(index,size,type,normalized,stride,offset):gl.vertexAttribIPointer(index,size,type,stride,offset)}function setupVertexAttributes(object,material,program,geometry){if(!1===capabilities.isWebGL2&&(object.isInstancedMesh||geometry.isInstancedBufferGeometry)&&null===extensions.get("ANGLE_instanced_arrays"))return;initAttributes();const geometryAttributes=geometry.attributes,programAttributes=program.getAttributes(),materialDefaultAttributeValues=material.defaultAttributeValues;for(const name in programAttributes){const programAttribute=programAttributes[name];if(programAttribute.location>=0){let geometryAttribute=geometryAttributes[name];if(void 0===geometryAttribute&&("instanceMatrix"===name&&object.instanceMatrix&&(geometryAttribute=object.instanceMatrix),"instanceColor"===name&&object.instanceColor&&(geometryAttribute=object.instanceColor)),void 0!==geometryAttribute){const normalized=geometryAttribute.normalized,size=geometryAttribute.itemSize,attribute=attributes.get(geometryAttribute);if(void 0===attribute)continue;const buffer=attribute.buffer,type=attribute.type,bytesPerElement=attribute.bytesPerElement;if(geometryAttribute.isInterleavedBufferAttribute){const data=geometryAttribute.data,stride=data.stride,offset=geometryAttribute.offset;if(data.isInstancedInterleavedBuffer){for(let i=0;i<programAttribute.locationSize;i++)enableAttributeAndDivisor(programAttribute.location+i,data.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===geometry._maxInstanceCount&&(geometry._maxInstanceCount=data.meshPerAttribute*data.count)}else for(let i=0;i<programAttribute.locationSize;i++)enableAttribute(programAttribute.location+i);gl.bindBuffer(gl.ARRAY_BUFFER,buffer);for(let i=0;i<programAttribute.locationSize;i++)vertexAttribPointer(programAttribute.location+i,size/programAttribute.locationSize,type,normalized,stride*bytesPerElement,(offset+size/programAttribute.locationSize*i)*bytesPerElement)}else{if(geometryAttribute.isInstancedBufferAttribute){for(let i=0;i<programAttribute.locationSize;i++)enableAttributeAndDivisor(programAttribute.location+i,geometryAttribute.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===geometry._maxInstanceCount&&(geometry._maxInstanceCount=geometryAttribute.meshPerAttribute*geometryAttribute.count)}else for(let i=0;i<programAttribute.locationSize;i++)enableAttribute(programAttribute.location+i);gl.bindBuffer(gl.ARRAY_BUFFER,buffer);for(let i=0;i<programAttribute.locationSize;i++)vertexAttribPointer(programAttribute.location+i,size/programAttribute.locationSize,type,normalized,size*bytesPerElement,size/programAttribute.locationSize*i*bytesPerElement)}}else if(void 0!==materialDefaultAttributeValues){const value=materialDefaultAttributeValues[name];if(void 0!==value)switch(value.length){case 2:gl.vertexAttrib2fv(programAttribute.location,value);break;case 3:gl.vertexAttrib3fv(programAttribute.location,value);break;case 4:gl.vertexAttrib4fv(programAttribute.location,value);break;default:gl.vertexAttrib1fv(programAttribute.location,value)}}}}disableUnusedAttributes()}function dispose(){reset();for(const geometryId in bindingStates){const programMap=bindingStates[geometryId];for(const programId in programMap){const stateMap=programMap[programId];for(const wireframe in stateMap)deleteVertexArrayObject(stateMap[wireframe].object),delete stateMap[wireframe];delete programMap[programId]}delete bindingStates[geometryId]}}function releaseStatesOfGeometry(geometry){if(void 0===bindingStates[geometry.id])return;const programMap=bindingStates[geometry.id];for(const programId in programMap){const stateMap=programMap[programId];for(const wireframe in stateMap)deleteVertexArrayObject(stateMap[wireframe].object),delete stateMap[wireframe];delete programMap[programId]}delete bindingStates[geometry.id]}function releaseStatesOfProgram(program){for(const geometryId in bindingStates){const programMap=bindingStates[geometryId];if(void 0===programMap[program.id])continue;const stateMap=programMap[program.id];for(const wireframe in stateMap)deleteVertexArrayObject(stateMap[wireframe].object),delete stateMap[wireframe];delete programMap[program.id]}}function reset(){resetDefaultState(),forceUpdate=!0,currentState!==defaultState&&(currentState=defaultState,bindVertexArrayObject(currentState.object))}function resetDefaultState(){defaultState.geometry=null,defaultState.program=null,defaultState.wireframe=!1}return __name(setup,"setup"),__name(createVertexArrayObject,"createVertexArrayObject"),__name(bindVertexArrayObject,"bindVertexArrayObject"),__name(deleteVertexArrayObject,"deleteVertexArrayObject"),__name(getBindingState,"getBindingState"),__name(createBindingState,"createBindingState"),__name(needsUpdate,"needsUpdate"),__name(saveCache,"saveCache"),__name(initAttributes,"initAttributes"),__name(enableAttribute,"enableAttribute"),__name(enableAttributeAndDivisor,"enableAttributeAndDivisor"),__name(disableUnusedAttributes,"disableUnusedAttributes"),__name(vertexAttribPointer,"vertexAttribPointer"),__name(setupVertexAttributes,"setupVertexAttributes"),__name(dispose,"dispose"),__name(releaseStatesOfGeometry,"releaseStatesOfGeometry"),__name(releaseStatesOfProgram,"releaseStatesOfProgram"),__name(reset,"reset"),__name(resetDefaultState,"resetDefaultState"),{setup,reset,resetDefaultState,dispose,releaseStatesOfGeometry,releaseStatesOfProgram,initAttributes,enableAttribute,disableUnusedAttributes}}function WebGLBufferRenderer(gl,extensions,info,capabilities){const isWebGL2=capabilities.isWebGL2;let mode;function setMode(value){mode=value}function render(start,count){gl.drawArrays(mode,start,count),info.update(count,mode,1)}function renderInstances(start,count,primcount){if(0===primcount)return;let extension,methodName;if(isWebGL2)extension=gl,methodName="drawArraysInstanced";else if(extension=extensions.get("ANGLE_instanced_arrays"),methodName="drawArraysInstancedANGLE",null===extension)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");extension[methodName](mode,start,count,primcount),info.update(count,mode,primcount)}__name(setMode,"setMode"),__name(render,"render"),__name(renderInstances,"renderInstances"),this.setMode=setMode,this.render=render,this.renderInstances=renderInstances}function WebGLCapabilities(gl,extensions,parameters){let maxAnisotropy;function getMaxAnisotropy(){if(void 0!==maxAnisotropy)return maxAnisotropy;if(!0===extensions.has("EXT_texture_filter_anisotropic")){const extension=extensions.get("EXT_texture_filter_anisotropic");maxAnisotropy=gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else maxAnisotropy=0;return maxAnisotropy}function getMaxPrecision(precision2){if("highp"===precision2){if(gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).precision>0&&gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).precision>0)return"highp";precision2="mediump"}return"mediump"===precision2&&gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).precision>0&&gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}__name(getMaxAnisotropy,"getMaxAnisotropy"),__name(getMaxPrecision,"getMaxPrecision");const isWebGL2=typeof WebGL2RenderingContext<"u"&&gl instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&gl instanceof WebGL2ComputeRenderingContext;let precision=void 0!==parameters.precision?parameters.precision:"highp";const maxPrecision=getMaxPrecision(precision);maxPrecision!==precision&&(console.warn("THREE.WebGLRenderer:",precision,"not supported, using",maxPrecision,"instead."),precision=maxPrecision);const drawBuffers=isWebGL2||extensions.has("WEBGL_draw_buffers"),logarithmicDepthBuffer=!0===parameters.logarithmicDepthBuffer,maxTextures=gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS),maxVertexTextures=gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxTextureSize=gl.getParameter(gl.MAX_TEXTURE_SIZE),maxCubemapSize=gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes=gl.getParameter(gl.MAX_VERTEX_ATTRIBS),maxVertexUniforms=gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings=gl.getParameter(gl.MAX_VARYING_VECTORS),maxFragmentUniforms=gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures=maxVertexTextures>0,floatFragmentTextures=isWebGL2||extensions.has("OES_texture_float");return{isWebGL2,drawBuffers,getMaxAnisotropy,getMaxPrecision,precision,logarithmicDepthBuffer,maxTextures,maxVertexTextures,maxTextureSize,maxCubemapSize,maxAttributes,maxVertexUniforms,maxVaryings,maxFragmentUniforms,vertexTextures,floatFragmentTextures,floatVertexTextures:vertexTextures&&floatFragmentTextures,maxSamples:isWebGL2?gl.getParameter(gl.MAX_SAMPLES):0}}function WebGLClipping(properties){const scope=this;let globalState=null,numGlobalPlanes=0,localClippingEnabled=!1,renderingShadows=!1;const plane=new Plane,viewNormalMatrix=new Matrix3.V,uniform={value:null,needsUpdate:!1};function resetGlobalState(){uniform.value!==globalState&&(uniform.value=globalState,uniform.needsUpdate=numGlobalPlanes>0),scope.numPlanes=numGlobalPlanes,scope.numIntersection=0}function projectPlanes(planes,camera,dstOffset,skipTransform){const nPlanes=null!==planes?planes.length:0;let dstArray=null;if(0!==nPlanes){if(dstArray=uniform.value,!0!==skipTransform||null===dstArray){const flatSize=dstOffset+4*nPlanes,viewMatrix=camera.matrixWorldInverse;viewNormalMatrix.getNormalMatrix(viewMatrix),(null===dstArray||dstArray.length<flatSize)&&(dstArray=new Float32Array(flatSize));for(let i=0,i4=dstOffset;i!==nPlanes;++i,i4+=4)plane.copy(planes[i]).applyMatrix4(viewMatrix,viewNormalMatrix),plane.normal.toArray(dstArray,i4),dstArray[i4+3]=plane.constant}uniform.value=dstArray,uniform.needsUpdate=!0}return scope.numPlanes=nPlanes,scope.numIntersection=0,dstArray}this.uniform=uniform,this.numPlanes=0,this.numIntersection=0,this.init=function(planes,enableLocalClipping,camera){const enabled=0!==planes.length||enableLocalClipping||0!==numGlobalPlanes||localClippingEnabled;return localClippingEnabled=enableLocalClipping,globalState=projectPlanes(planes,camera,0),numGlobalPlanes=planes.length,enabled},this.beginShadows=function(){renderingShadows=!0,projectPlanes(null)},this.endShadows=function(){renderingShadows=!1,resetGlobalState()},this.setState=function(material,camera,useCache){const planes=material.clippingPlanes,clipIntersection=material.clipIntersection,clipShadows=material.clipShadows,materialProperties=properties.get(material);if(!localClippingEnabled||null===planes||0===planes.length||renderingShadows&&!clipShadows)renderingShadows?projectPlanes(null):resetGlobalState();else{const nGlobal=renderingShadows?0:numGlobalPlanes,lGlobal=4*nGlobal;let dstArray=materialProperties.clippingState||null;uniform.value=dstArray,dstArray=projectPlanes(planes,camera,lGlobal,useCache);for(let i=0;i!==lGlobal;++i)dstArray[i]=globalState[i];materialProperties.clippingState=dstArray,this.numIntersection=clipIntersection?this.numPlanes:0,this.numPlanes+=nGlobal}},__name(resetGlobalState,"resetGlobalState"),__name(projectPlanes,"projectPlanes")}__name(WebGLBackground,"WebGLBackground"),__name(WebGLBindingStates,"WebGLBindingStates"),__name(WebGLBufferRenderer,"WebGLBufferRenderer"),__name(WebGLCapabilities,"WebGLCapabilities"),__name(WebGLClipping,"WebGLClipping");var EventDispatcher=__webpack_require__(1168),Texture=__webpack_require__(5346),Source=__webpack_require__(2901);class WebGLRenderTarget extends EventDispatcher.p{constructor(width=1,height=1,options={}){super(),this.isWebGLRenderTarget=!0,this.width=width,this.height=height,this.depth=1,this.scissor=new Vector4.L(0,0,width,height),this.scissorTest=!1,this.viewport=new Vector4.L(0,0,width,height),this.texture=new Texture.x({width,height,depth:1},options.mapping,options.wrapS,options.wrapT,options.magFilter,options.minFilter,options.format,options.type,options.anisotropy,options.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==options.generateMipmaps&&options.generateMipmaps,this.texture.internalFormat=void 0!==options.internalFormat?options.internalFormat:null,this.texture.minFilter=void 0!==options.minFilter?options.minFilter:constants.wem,this.depthBuffer=void 0===options.depthBuffer||options.depthBuffer,this.stencilBuffer=void 0!==options.stencilBuffer&&options.stencilBuffer,this.depthTexture=void 0!==options.depthTexture?options.depthTexture:null,this.samples=void 0!==options.samples?options.samples:0}setSize(width,height,depth=1){(this.width!==width||this.height!==height||this.depth!==depth)&&(this.width=width,this.height=height,this.depth=depth,this.texture.image.width=width,this.texture.image.height=height,this.texture.image.depth=depth,this.dispose()),this.viewport.set(0,0,width,height),this.scissor.set(0,0,width,height)}clone(){return(new this.constructor).copy(this)}copy(source){this.width=source.width,this.height=source.height,this.depth=source.depth,this.viewport.copy(source.viewport),this.texture=source.texture.clone(),this.texture.isRenderTargetTexture=!0;const image=Object.assign({},source.texture.image);return this.texture.source=new Source.H(image),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,null!==source.depthTexture&&(this.depthTexture=source.depthTexture.clone()),this.samples=source.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}__name(WebGLRenderTarget,"WebGLRenderTarget");var Object3D=__webpack_require__(4130),PerspectiveCamera=__webpack_require__(9449);class CubeCamera extends Object3D.T{constructor(near,far,renderTarget){super(),this.type="CubeCamera",this.renderTarget=renderTarget;const cameraPX=new PerspectiveCamera.c(-90,1,near,far);cameraPX.layers=this.layers,cameraPX.up.set(0,1,0),cameraPX.lookAt(1,0,0),this.add(cameraPX);const cameraNX=new PerspectiveCamera.c(-90,1,near,far);cameraNX.layers=this.layers,cameraNX.up.set(0,1,0),cameraNX.lookAt(-1,0,0),this.add(cameraNX);const cameraPY=new PerspectiveCamera.c(-90,1,near,far);cameraPY.layers=this.layers,cameraPY.up.set(0,0,-1),cameraPY.lookAt(0,1,0),this.add(cameraPY);const cameraNY=new PerspectiveCamera.c(-90,1,near,far);cameraNY.layers=this.layers,cameraNY.up.set(0,0,1),cameraNY.lookAt(0,-1,0),this.add(cameraNY);const cameraPZ=new PerspectiveCamera.c(-90,1,near,far);cameraPZ.layers=this.layers,cameraPZ.up.set(0,1,0),cameraPZ.lookAt(0,0,1),this.add(cameraPZ);const cameraNZ=new PerspectiveCamera.c(-90,1,near,far);cameraNZ.layers=this.layers,cameraNZ.up.set(0,1,0),cameraNZ.lookAt(0,0,-1),this.add(cameraNZ)}update(renderer,scene){null===this.parent&&this.updateMatrixWorld();const renderTarget=this.renderTarget,[cameraPX,cameraNX,cameraPY,cameraNY,cameraPZ,cameraNZ]=this.children,currentRenderTarget=renderer.getRenderTarget(),currentToneMapping=renderer.toneMapping,currentXrEnabled=renderer.xr.enabled;renderer.toneMapping=constants.uL9,renderer.xr.enabled=!1;const generateMipmaps=renderTarget.texture.generateMipmaps;renderTarget.texture.generateMipmaps=!1,renderer.setRenderTarget(renderTarget,0),renderer.render(scene,cameraPX),renderer.setRenderTarget(renderTarget,1),renderer.render(scene,cameraNX),renderer.setRenderTarget(renderTarget,2),renderer.render(scene,cameraPY),renderer.setRenderTarget(renderTarget,3),renderer.render(scene,cameraNY),renderer.setRenderTarget(renderTarget,4),renderer.render(scene,cameraPZ),renderTarget.texture.generateMipmaps=generateMipmaps,renderer.setRenderTarget(renderTarget,5),renderer.render(scene,cameraNZ),renderer.setRenderTarget(currentRenderTarget),renderer.toneMapping=currentToneMapping,renderer.xr.enabled=currentXrEnabled,renderTarget.texture.needsPMREMUpdate=!0}}__name(CubeCamera,"CubeCamera");var CubeTexture=__webpack_require__(8508);class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(size=1,options={}){super(size,size,options),this.isWebGLCubeRenderTarget=!0;const image={width:size,height:size,depth:1};this.texture=new CubeTexture.B([image,image,image,image,image,image],options.mapping,options.wrapS,options.wrapT,options.magFilter,options.minFilter,options.format,options.type,options.anisotropy,options.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==options.generateMipmaps&&options.generateMipmaps,this.texture.minFilter=void 0!==options.minFilter?options.minFilter:constants.wem}fromEquirectangularTexture(renderer,texture){this.texture.type=texture.type,this.texture.encoding=texture.encoding,this.texture.generateMipmaps=texture.generateMipmaps,this.texture.minFilter=texture.minFilter,this.texture.magFilter=texture.magFilter;const shader_uniforms={tEquirect:{value:null}},shader_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",shader_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",geometry=new BoxGeometry.D(5,5,5),material=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(shader_uniforms),vertexShader:shader_vertexShader,fragmentShader:shader_fragmentShader,side:constants._Li,blending:constants.jFi});material.uniforms.tEquirect.value=texture;const mesh=new Mesh2.K(geometry,material),currentMinFilter=texture.minFilter;return texture.minFilter===constants.D1R&&(texture.minFilter=constants.wem),new CubeCamera(1,10,this).update(renderer,mesh),texture.minFilter=currentMinFilter,mesh.geometry.dispose(),mesh.material.dispose(),this}clear(renderer,color,depth,stencil){const currentRenderTarget=renderer.getRenderTarget();for(let i=0;i<6;i++)renderer.setRenderTarget(this,i),renderer.clear(color,depth,stencil);renderer.setRenderTarget(currentRenderTarget)}}function WebGLCubeMaps(renderer){let cubemaps=new WeakMap;function mapTextureMapping(texture,mapping){return mapping===constants.dSO?texture.mapping=constants.fY$:mapping===constants.Bf4&&(texture.mapping=constants.vxC),texture}function get(texture){if(texture&&texture.isTexture&&!1===texture.isRenderTargetTexture){const mapping=texture.mapping;if(mapping===constants.dSO||mapping===constants.Bf4){if(cubemaps.has(texture))return mapTextureMapping(cubemaps.get(texture).texture,texture.mapping);{const image=texture.image;if(image&&image.height>0){const renderTarget=new WebGLCubeRenderTarget(image.height/2);return renderTarget.fromEquirectangularTexture(renderer,texture),cubemaps.set(texture,renderTarget),texture.addEventListener("dispose",onTextureDispose),mapTextureMapping(renderTarget.texture,texture.mapping)}return null}}}return texture}function onTextureDispose(event){const texture=event.target;texture.removeEventListener("dispose",onTextureDispose);const cubemap=cubemaps.get(texture);void 0!==cubemap&&(cubemaps.delete(texture),cubemap.dispose())}function dispose(){cubemaps=new WeakMap}return __name(mapTextureMapping,"mapTextureMapping"),__name(get,"get"),__name(onTextureDispose,"onTextureDispose"),__name(dispose,"dispose"),{get,dispose}}__name(WebGLCubeRenderTarget,"WebGLCubeRenderTarget"),__name(WebGLCubeMaps,"WebGLCubeMaps");var BufferAttribute=__webpack_require__(6192),BufferGeometry=__webpack_require__(875),Camera=__webpack_require__(5200);class OrthographicCamera extends Camera.V{constructor(left=-1,right=1,top=1,bottom=-1,near=.1,far=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=left,this.right=right,this.top=top,this.bottom=bottom,this.near=near,this.far=far,this.updateProjectionMatrix()}copy(source,recursive){return super.copy(source,recursive),this.left=source.left,this.right=source.right,this.top=source.top,this.bottom=source.bottom,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this.view=null===source.view?null:Object.assign({},source.view),this}setViewOffset(fullWidth,fullHeight,x,y,width,height){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=fullWidth,this.view.fullHeight=fullHeight,this.view.offsetX=x,this.view.offsetY=y,this.view.width=width,this.view.height=height,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const dx=(this.right-this.left)/(2*this.zoom),dy=(this.top-this.bottom)/(2*this.zoom),cx=(this.right+this.left)/2,cy=(this.top+this.bottom)/2;let left=cx-dx,right=cx+dx,top=cy+dy,bottom=cy-dy;if(null!==this.view&&this.view.enabled){const scaleW=(this.right-this.left)/this.view.fullWidth/this.zoom,scaleH=(this.top-this.bottom)/this.view.fullHeight/this.zoom;left+=scaleW*this.view.offsetX,right=left+scaleW*this.view.width,top-=scaleH*this.view.offsetY,bottom=top-scaleH*this.view.height}this.projectionMatrix.makeOrthographic(left,right,top,bottom,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(meta){const data=super.toJSON(meta);return data.object.zoom=this.zoom,data.object.left=this.left,data.object.right=this.right,data.object.top=this.top,data.object.bottom=this.bottom,data.object.near=this.near,data.object.far=this.far,null!==this.view&&(data.object.view=Object.assign({},this.view)),data}}__name(OrthographicCamera,"OrthographicCamera");var MeshBasicMaterial=__webpack_require__(4691);const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color.I;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector32.P(1,1,1),new Vector32.P(-1,1,1),new Vector32.P(1,1,-1),new Vector32.P(-1,1,-1),new Vector32.P(0,PHI,INV_PHI),new Vector32.P(0,PHI,-INV_PHI),new Vector32.P(INV_PHI,0,PHI),new Vector32.P(-INV_PHI,0,PHI),new Vector32.P(PHI,INV_PHI,0),new Vector32.P(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(renderer){this._renderer=renderer,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(scene,sigma=0,near=.1,far=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const cubeUVRenderTarget=this._allocateTargets();return cubeUVRenderTarget.depthBuffer=!0,this._sceneToCubeUV(scene,near,far,cubeUVRenderTarget),sigma>0&&this._blur(cubeUVRenderTarget,0,0,sigma),this._applyPMREM(cubeUVRenderTarget),this._cleanup(cubeUVRenderTarget),cubeUVRenderTarget}fromEquirectangular(equirectangular,renderTarget=null){return this._fromTexture(equirectangular,renderTarget)}fromCubemap(cubemap,renderTarget=null){return this._fromTexture(cubemap,renderTarget)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(cubeSize){this._lodMax=Math.floor(Math.log2(cubeSize)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let i=0;i<this._lodPlanes.length;i++)this._lodPlanes[i].dispose()}_cleanup(outputTarget){this._renderer.setRenderTarget(_oldTarget),outputTarget.scissorTest=!1,_setViewport(outputTarget,0,0,outputTarget.width,outputTarget.height)}_fromTexture(texture,renderTarget){this._setSize(texture.mapping===constants.fY$||texture.mapping===constants.vxC?0===texture.image.length?16:texture.image[0].width||texture.image[0].image.width:texture.image.width/4),_oldTarget=this._renderer.getRenderTarget();const cubeUVRenderTarget=renderTarget||this._allocateTargets();return this._textureToCubeUV(texture,cubeUVRenderTarget),this._applyPMREM(cubeUVRenderTarget),this._cleanup(cubeUVRenderTarget),cubeUVRenderTarget}_allocateTargets(){const width=3*Math.max(this._cubeSize,112),height=4*this._cubeSize,params={magFilter:constants.wem,minFilter:constants.wem,generateMipmaps:!1,type:constants.cLu,format:constants.wk1,encoding:constants.rnI,depthBuffer:!1},cubeUVRenderTarget=_createRenderTarget(width,height,params);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==width){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(width,height,params);const{_lodMax}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(_lodMax)),this._blurMaterial=_getBlurShader(_lodMax,width,height)}return cubeUVRenderTarget}_compileMaterial(material){const tmpMesh=new Mesh2.K(this._lodPlanes[0],material);this._renderer.compile(tmpMesh,_flatCamera)}_sceneToCubeUV(scene,near,far,cubeUVRenderTarget){const cubeCamera=new PerspectiveCamera.c(90,1,near,far),upSign=[1,-1,1,1,1,1],forwardSign=[1,1,1,-1,-1,-1],renderer=this._renderer,originalAutoClear=renderer.autoClear,toneMapping=renderer.toneMapping;renderer.getClearColor(_clearColor),renderer.toneMapping=constants.uL9,renderer.autoClear=!1;const backgroundMaterial=new MeshBasicMaterial.v({name:"PMREM.Background",side:constants._Li,depthWrite:!1,depthTest:!1}),backgroundBox=new Mesh2.K(new BoxGeometry.D,backgroundMaterial);let useSolidColor=!1;const background=scene.background;background?background.isColor&&(backgroundMaterial.color.copy(background),scene.background=null,useSolidColor=!0):(backgroundMaterial.color.copy(_clearColor),useSolidColor=!0);for(let i=0;i<6;i++){const col=i%3;0===col?(cubeCamera.up.set(0,upSign[i],0),cubeCamera.lookAt(forwardSign[i],0,0)):1===col?(cubeCamera.up.set(0,0,upSign[i]),cubeCamera.lookAt(0,forwardSign[i],0)):(cubeCamera.up.set(0,upSign[i],0),cubeCamera.lookAt(0,0,forwardSign[i]));const size=this._cubeSize;_setViewport(cubeUVRenderTarget,col*size,i>2?size:0,size,size),renderer.setRenderTarget(cubeUVRenderTarget),useSolidColor&&renderer.render(backgroundBox,cubeCamera),renderer.render(scene,cubeCamera)}backgroundBox.geometry.dispose(),backgroundBox.material.dispose(),renderer.toneMapping=toneMapping,renderer.autoClear=originalAutoClear,scene.background=background}_textureToCubeUV(texture,cubeUVRenderTarget){const renderer=this._renderer,isCubeTexture=texture.mapping===constants.fY$||texture.mapping===constants.vxC;isCubeTexture?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===texture.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());const material=isCubeTexture?this._cubemapMaterial:this._equirectMaterial,mesh=new Mesh2.K(this._lodPlanes[0],material);material.uniforms.envMap.value=texture;const size=this._cubeSize;_setViewport(cubeUVRenderTarget,0,0,3*size,2*size),renderer.setRenderTarget(cubeUVRenderTarget),renderer.render(mesh,_flatCamera)}_applyPMREM(cubeUVRenderTarget){const renderer=this._renderer,autoClear=renderer.autoClear;renderer.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const sigma=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(cubeUVRenderTarget,i-1,i,sigma,_axisDirections[(i-1)%_axisDirections.length])}renderer.autoClear=autoClear}_blur(cubeUVRenderTarget,lodIn,lodOut,sigma,poleAxis){const pingPongRenderTarget=this._pingPongRenderTarget;this._halfBlur(cubeUVRenderTarget,pingPongRenderTarget,lodIn,lodOut,sigma,"latitudinal",poleAxis),this._halfBlur(pingPongRenderTarget,cubeUVRenderTarget,lodOut,lodOut,sigma,"longitudinal",poleAxis)}_halfBlur(targetIn,targetOut,lodIn,lodOut,sigmaRadians,direction,poleAxis){const renderer=this._renderer,blurMaterial=this._blurMaterial;"latitudinal"!==direction&&"longitudinal"!==direction&&console.error("blur direction must be either latitudinal or longitudinal!");const blurMesh=new Mesh2.K(this._lodPlanes[lodOut],blurMaterial),blurUniforms=blurMaterial.uniforms,pixels=this._sizeLods[lodIn]-1,radiansPerPixel=isFinite(sigmaRadians)?Math.PI/(2*pixels):2*Math.PI/(2*MAX_SAMPLES-1),sigmaPixels=sigmaRadians/radiansPerPixel,samples=isFinite(sigmaRadians)?1+Math.floor(3*sigmaPixels):MAX_SAMPLES;samples>MAX_SAMPLES&&console.warn(`sigmaRadians, ${sigmaRadians}, is too large and will clip, as it requested ${samples} samples when the maximum is set to ${MAX_SAMPLES}`);const weights=[];let sum=0;for(let i=0;i<MAX_SAMPLES;++i){const x2=i/sigmaPixels,weight=Math.exp(-x2*x2/2);weights.push(weight),0===i?sum+=weight:i<samples&&(sum+=2*weight)}for(let i=0;i<weights.length;i++)weights[i]=weights[i]/sum;blurUniforms.envMap.value=targetIn.texture,blurUniforms.samples.value=samples,blurUniforms.weights.value=weights,blurUniforms.latitudinal.value="latitudinal"===direction,poleAxis&&(blurUniforms.poleAxis.value=poleAxis);const{_lodMax}=this;blurUniforms.dTheta.value=radiansPerPixel,blurUniforms.mipInt.value=_lodMax-lodIn;const outputSize=this._sizeLods[lodOut];_setViewport(targetOut,3*outputSize*(lodOut>_lodMax-LOD_MIN?lodOut-_lodMax+LOD_MIN:0),4*(this._cubeSize-outputSize),3*outputSize,2*outputSize),renderer.setRenderTarget(targetOut),renderer.render(blurMesh,_flatCamera)}}function _createPlanes(lodMax){const lodPlanes=[],sizeLods=[],sigmas=[];let lod=lodMax;const totalLods=lodMax-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let i=0;i<totalLods;i++){const sizeLod=Math.pow(2,lod);sizeLods.push(sizeLod);let sigma=1/sizeLod;i>lodMax-LOD_MIN?sigma=EXTRA_LOD_SIGMA[i-lodMax+LOD_MIN-1]:0===i&&(sigma=0),sigmas.push(sigma);const texelSize=1/(sizeLod-2),min=-texelSize,max=1+texelSize,uv1=[min,min,max,min,max,max,min,min,max,max,min,max],cubeFaces=6,vertices=6,positionSize=3,uvSize=2,faceIndexSize=1,position=new Float32Array(positionSize*vertices*cubeFaces),uv=new Float32Array(uvSize*vertices*cubeFaces),faceIndex=new Float32Array(faceIndexSize*vertices*cubeFaces);for(let face=0;face<cubeFaces;face++){const x=face%3*2/3-1,y=face>2?0:-1;position.set([x,y,0,x+2/3,y,0,x+2/3,y+1,0,x,y,0,x+2/3,y+1,0,x,y+1,0],positionSize*vertices*face),uv.set(uv1,uvSize*vertices*face),faceIndex.set([face,face,face,face,face,face],faceIndexSize*vertices*face)}const planes=new BufferGeometry.u;planes.setAttribute("position",new BufferAttribute.Tl(position,positionSize)),planes.setAttribute("uv",new BufferAttribute.Tl(uv,uvSize)),planes.setAttribute("faceIndex",new BufferAttribute.Tl(faceIndex,faceIndexSize)),lodPlanes.push(planes),lod>LOD_MIN&&lod--}return{lodPlanes,sizeLods,sigmas}}function _createRenderTarget(width,height,params){const cubeUVRenderTarget=new WebGLRenderTarget(width,height,params);return cubeUVRenderTarget.texture.mapping=constants.g8_,cubeUVRenderTarget.texture.name="PMREM.cubeUv",cubeUVRenderTarget.scissorTest=!0,cubeUVRenderTarget}function _setViewport(target,x,y,width,height){target.viewport.set(x,y,width,height),target.scissor.set(x,y,width,height)}function _getBlurShader(lodMax,width,height){const weights=new Float32Array(MAX_SAMPLES),poleAxis=new Vector32.P(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/width,CUBEUV_TEXEL_HEIGHT:1/height,CUBEUV_MAX_MIP:`${lodMax}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:weights},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:poleAxis}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:constants.jFi,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:constants.jFi,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:constants.jFi,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(renderer){let cubeUVmaps=new WeakMap,pmremGenerator=null;function get(texture){if(texture&&texture.isTexture){const mapping=texture.mapping,isEquirectMap=mapping===constants.dSO||mapping===constants.Bf4,isCubeMap=mapping===constants.fY$||mapping===constants.vxC;if(isEquirectMap||isCubeMap){if(texture.isRenderTargetTexture&&!0===texture.needsPMREMUpdate){texture.needsPMREMUpdate=!1;let renderTarget=cubeUVmaps.get(texture);return null===pmremGenerator&&(pmremGenerator=new PMREMGenerator(renderer)),renderTarget=isEquirectMap?pmremGenerator.fromEquirectangular(texture,renderTarget):pmremGenerator.fromCubemap(texture,renderTarget),cubeUVmaps.set(texture,renderTarget),renderTarget.texture}if(cubeUVmaps.has(texture))return cubeUVmaps.get(texture).texture;{const image=texture.image;if(isEquirectMap&&image&&image.height>0||isCubeMap&&image&&isCubeTextureComplete(image)){null===pmremGenerator&&(pmremGenerator=new PMREMGenerator(renderer));const renderTarget=isEquirectMap?pmremGenerator.fromEquirectangular(texture):pmremGenerator.fromCubemap(texture);return cubeUVmaps.set(texture,renderTarget),texture.addEventListener("dispose",onTextureDispose),renderTarget.texture}return null}}}return texture}function isCubeTextureComplete(image){let count=0;for(let i=0;i<6;i++)void 0!==image[i]&&count++;return 6===count}function onTextureDispose(event){const texture=event.target;texture.removeEventListener("dispose",onTextureDispose);const cubemapUV=cubeUVmaps.get(texture);void 0!==cubemapUV&&(cubeUVmaps.delete(texture),cubemapUV.dispose())}function dispose(){cubeUVmaps=new WeakMap,null!==pmremGenerator&&(pmremGenerator.dispose(),pmremGenerator=null)}return __name(get,"get"),__name(isCubeTextureComplete,"isCubeTextureComplete"),__name(onTextureDispose,"onTextureDispose"),__name(dispose,"dispose"),{get,dispose}}function WebGLExtensions(gl){const extensions={};function getExtension(name){if(void 0!==extensions[name])return extensions[name];let extension;switch(name){case"WEBGL_depth_texture":extension=gl.getExtension("WEBGL_depth_texture")||gl.getExtension("MOZ_WEBGL_depth_texture")||gl.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":extension=gl.getExtension("EXT_texture_filter_anisotropic")||gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":extension=gl.getExtension("WEBGL_compressed_texture_s3tc")||gl.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":extension=gl.getExtension("WEBGL_compressed_texture_pvrtc")||gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:extension=gl.getExtension(name)}return extensions[name]=extension,extension}return __name(getExtension,"getExtension"),{has:function(name){return null!==getExtension(name)},init:function(capabilities){capabilities.isWebGL2?getExtension("EXT_color_buffer_float"):(getExtension("WEBGL_depth_texture"),getExtension("OES_texture_float"),getExtension("OES_texture_half_float"),getExtension("OES_texture_half_float_linear"),getExtension("OES_standard_derivatives"),getExtension("OES_element_index_uint"),getExtension("OES_vertex_array_object"),getExtension("ANGLE_instanced_arrays")),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float"),getExtension("WEBGL_multisampled_render_to_texture")},get:function(name){const extension=getExtension(name);return null===extension&&console.warn("THREE.WebGLRenderer: "+name+" extension not supported."),extension}}}__name(PMREMGenerator,"PMREMGenerator"),__name(_createPlanes,"_createPlanes"),__name(_createRenderTarget,"_createRenderTarget"),__name(_setViewport,"_setViewport"),__name(_getBlurShader,"_getBlurShader"),__name(_getEquirectMaterial,"_getEquirectMaterial"),__name(_getCubemapMaterial,"_getCubemapMaterial"),__name(_getCommonVertexShader,"_getCommonVertexShader"),__name(WebGLCubeUVMaps,"WebGLCubeUVMaps"),__name(WebGLExtensions,"WebGLExtensions");var src_utils=__webpack_require__(3436);function WebGLGeometries(gl,attributes,info,bindingStates){const geometries={},wireframeAttributes=new WeakMap;function onGeometryDispose(event){const geometry=event.target;null!==geometry.index&&attributes.remove(geometry.index);for(const name in geometry.attributes)attributes.remove(geometry.attributes[name]);geometry.removeEventListener("dispose",onGeometryDispose),delete geometries[geometry.id];const attribute=wireframeAttributes.get(geometry);attribute&&(attributes.remove(attribute),wireframeAttributes.delete(geometry)),bindingStates.releaseStatesOfGeometry(geometry),!0===geometry.isInstancedBufferGeometry&&delete geometry._maxInstanceCount,info.memory.geometries--}function get(object,geometry){return!0===geometries[geometry.id]||(geometry.addEventListener("dispose",onGeometryDispose),geometries[geometry.id]=!0,info.memory.geometries++),geometry}function update(geometry){const geometryAttributes=geometry.attributes;for(const name in geometryAttributes)attributes.update(geometryAttributes[name],gl.ARRAY_BUFFER);const morphAttributes=geometry.morphAttributes;for(const name in morphAttributes){const array=morphAttributes[name];for(let i=0,l=array.length;i<l;i++)attributes.update(array[i],gl.ARRAY_BUFFER)}}function updateWireframeAttribute(geometry){const indices=[],geometryIndex=geometry.index,geometryPosition=geometry.attributes.position;let version=0;if(null!==geometryIndex){const array=geometryIndex.array;version=geometryIndex.version;for(let i=0,l=array.length;i<l;i+=3){const a=array[i+0],b=array[i+1],c=array[i+2];indices.push(a,b,b,c,c,a)}}else{version=geometryPosition.version;for(let i=0,l=geometryPosition.array.length/3-1;i<l;i+=3){const a=i+0,b=i+1,c=i+2;indices.push(a,b,b,c,c,a)}}const attribute=new((0,src_utils.H7)(indices)?BufferAttribute.lC:BufferAttribute.ql)(indices,1);attribute.version=version;const previousAttribute=wireframeAttributes.get(geometry);previousAttribute&&attributes.remove(previousAttribute),wireframeAttributes.set(geometry,attribute)}function getWireframeAttribute(geometry){const currentAttribute=wireframeAttributes.get(geometry);if(currentAttribute){const geometryIndex=geometry.index;null!==geometryIndex&&currentAttribute.version<geometryIndex.version&&updateWireframeAttribute(geometry)}else updateWireframeAttribute(geometry);return wireframeAttributes.get(geometry)}return __name(onGeometryDispose,"onGeometryDispose"),__name(get,"get"),__name(update,"update"),__name(updateWireframeAttribute,"updateWireframeAttribute"),__name(getWireframeAttribute,"getWireframeAttribute"),{get,update,getWireframeAttribute}}function WebGLIndexedBufferRenderer(gl,extensions,info,capabilities){const isWebGL2=capabilities.isWebGL2;let mode,type,bytesPerElement;function setMode(value){mode=value}function setIndex(value){type=value.type,bytesPerElement=value.bytesPerElement}function render(start,count){gl.drawElements(mode,count,type,start*bytesPerElement),info.update(count,mode,1)}function renderInstances(start,count,primcount){if(0===primcount)return;let extension,methodName;if(isWebGL2)extension=gl,methodName="drawElementsInstanced";else if(extension=extensions.get("ANGLE_instanced_arrays"),methodName="drawElementsInstancedANGLE",null===extension)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");extension[methodName](mode,count,type,start*bytesPerElement,primcount),info.update(count,mode,primcount)}__name(setMode,"setMode"),__name(setIndex,"setIndex"),__name(render,"render"),__name(renderInstances,"renderInstances"),this.setMode=setMode,this.setIndex=setIndex,this.render=render,this.renderInstances=renderInstances}function WebGLInfo(gl){const render={frame:0,calls:0,triangles:0,points:0,lines:0};function update(count,mode,instanceCount){switch(render.calls++,mode){case gl.TRIANGLES:render.triangles+=instanceCount*(count/3);break;case gl.LINES:render.lines+=instanceCount*(count/2);break;case gl.LINE_STRIP:render.lines+=instanceCount*(count-1);break;case gl.LINE_LOOP:render.lines+=instanceCount*count;break;case gl.POINTS:render.points+=instanceCount*count;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",mode)}}function reset(){render.frame++,render.calls=0,render.triangles=0,render.points=0,render.lines=0}return __name(update,"update"),__name(reset,"reset"),{memory:{geometries:0,textures:0},render,programs:null,autoReset:!0,reset,update}}__name(WebGLGeometries,"WebGLGeometries"),__name(WebGLIndexedBufferRenderer,"WebGLIndexedBufferRenderer"),__name(WebGLInfo,"WebGLInfo");class DataArrayTexture extends Texture.x{constructor(data=null,width=1,height=1,depth=1){super(null),this.isDataArrayTexture=!0,this.image={data,width,height,depth},this.magFilter=constants.TyD,this.minFilter=constants.TyD,this.wrapR=constants.uWy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function numericalSort(a,b){return a[0]-b[0]}function absNumericalSort(a,b){return Math.abs(b[1])-Math.abs(a[1])}function WebGLMorphtargets(gl,capabilities,textures){const influencesList={},morphInfluences=new Float32Array(8),morphTextures=new WeakMap,morph=new Vector4.L,workInfluences=[];for(let i=0;i<8;i++)workInfluences[i]=[i,0];function update(object,geometry,material,program){const objectInfluences=object.morphTargetInfluences;if(!0===capabilities.isWebGL2){const morphAttribute=geometry.morphAttributes.position||geometry.morphAttributes.normal||geometry.morphAttributes.color,morphTargetsCount=void 0!==morphAttribute?morphAttribute.length:0;let entry=morphTextures.get(geometry);if(void 0===entry||entry.count!==morphTargetsCount){let disposeTexture=function(){texture.dispose(),morphTextures.delete(geometry),geometry.removeEventListener("dispose",disposeTexture)};__name(disposeTexture,"disposeTexture"),void 0!==entry&&entry.texture.dispose();const hasMorphPosition=void 0!==geometry.morphAttributes.position,hasMorphNormals=void 0!==geometry.morphAttributes.normal,hasMorphColors=void 0!==geometry.morphAttributes.color,morphTargets=geometry.morphAttributes.position||[],morphNormals=geometry.morphAttributes.normal||[],morphColors=geometry.morphAttributes.color||[];let vertexDataCount=0;!0===hasMorphPosition&&(vertexDataCount=1),!0===hasMorphNormals&&(vertexDataCount=2),!0===hasMorphColors&&(vertexDataCount=3);let width=geometry.attributes.position.count*vertexDataCount,height=1;width>capabilities.maxTextureSize&&(height=Math.ceil(width/capabilities.maxTextureSize),width=capabilities.maxTextureSize);const buffer=new Float32Array(width*height*4*morphTargetsCount),texture=new DataArrayTexture(buffer,width,height,morphTargetsCount);texture.type=constants.VzW,texture.needsUpdate=!0;const vertexDataStride=4*vertexDataCount;for(let i=0;i<morphTargetsCount;i++){const morphTarget=morphTargets[i],morphNormal=morphNormals[i],morphColor=morphColors[i],offset=width*height*4*i;for(let j=0;j<morphTarget.count;j++){const stride=j*vertexDataStride;!0===hasMorphPosition&&(morph.fromBufferAttribute(morphTarget,j),buffer[offset+stride+0]=morph.x,buffer[offset+stride+1]=morph.y,buffer[offset+stride+2]=morph.z,buffer[offset+stride+3]=0),!0===hasMorphNormals&&(morph.fromBufferAttribute(morphNormal,j),buffer[offset+stride+4]=morph.x,buffer[offset+stride+5]=morph.y,buffer[offset+stride+6]=morph.z,buffer[offset+stride+7]=0),!0===hasMorphColors&&(morph.fromBufferAttribute(morphColor,j),buffer[offset+stride+8]=morph.x,buffer[offset+stride+9]=morph.y,buffer[offset+stride+10]=morph.z,buffer[offset+stride+11]=4===morphColor.itemSize?morph.w:1)}}entry={count:morphTargetsCount,texture,size:new Vector22.F(width,height)},morphTextures.set(geometry,entry),geometry.addEventListener("dispose",disposeTexture)}let morphInfluencesSum=0;for(let i=0;i<objectInfluences.length;i++)morphInfluencesSum+=objectInfluences[i];const morphBaseInfluence=geometry.morphTargetsRelative?1:1-morphInfluencesSum;program.getUniforms().setValue(gl,"morphTargetBaseInfluence",morphBaseInfluence),program.getUniforms().setValue(gl,"morphTargetInfluences",objectInfluences),program.getUniforms().setValue(gl,"morphTargetsTexture",entry.texture,textures),program.getUniforms().setValue(gl,"morphTargetsTextureSize",entry.size)}else{const length=void 0===objectInfluences?0:objectInfluences.length;let influences=influencesList[geometry.id];if(void 0===influences||influences.length!==length){influences=[];for(let i=0;i<length;i++)influences[i]=[i,0];influencesList[geometry.id]=influences}for(let i=0;i<length;i++){const influence=influences[i];influence[0]=i,influence[1]=objectInfluences[i]}influences.sort(absNumericalSort);for(let i=0;i<8;i++)i<length&&influences[i][1]?(workInfluences[i][0]=influences[i][0],workInfluences[i][1]=influences[i][1]):(workInfluences[i][0]=Number.MAX_SAFE_INTEGER,workInfluences[i][1]=0);workInfluences.sort(numericalSort);const morphTargets=geometry.morphAttributes.position,morphNormals=geometry.morphAttributes.normal;let morphInfluencesSum=0;for(let i=0;i<8;i++){const influence=workInfluences[i],index=influence[0],value=influence[1];index!==Number.MAX_SAFE_INTEGER&&value?(morphTargets&&geometry.getAttribute("morphTarget"+i)!==morphTargets[index]&&geometry.setAttribute("morphTarget"+i,morphTargets[index]),morphNormals&&geometry.getAttribute("morphNormal"+i)!==morphNormals[index]&&geometry.setAttribute("morphNormal"+i,morphNormals[index]),morphInfluences[i]=value,morphInfluencesSum+=value):(morphTargets&&!0===geometry.hasAttribute("morphTarget"+i)&&geometry.deleteAttribute("morphTarget"+i),morphNormals&&!0===geometry.hasAttribute("morphNormal"+i)&&geometry.deleteAttribute("morphNormal"+i),morphInfluences[i]=0)}const morphBaseInfluence=geometry.morphTargetsRelative?1:1-morphInfluencesSum;program.getUniforms().setValue(gl,"morphTargetBaseInfluence",morphBaseInfluence),program.getUniforms().setValue(gl,"morphTargetInfluences",morphInfluences)}}return __name(update,"update"),{update}}function WebGLObjects(gl,geometries,attributes,info){let updateMap=new WeakMap;function update(object){const frame=info.render.frame,buffergeometry=geometries.get(object,object.geometry);return updateMap.get(buffergeometry)!==frame&&(geometries.update(buffergeometry),updateMap.set(buffergeometry,frame)),object.isInstancedMesh&&(!1===object.hasEventListener("dispose",onInstancedMeshDispose)&&object.addEventListener("dispose",onInstancedMeshDispose),attributes.update(object.instanceMatrix,gl.ARRAY_BUFFER),null!==object.instanceColor&&attributes.update(object.instanceColor,gl.ARRAY_BUFFER)),buffergeometry}function dispose(){updateMap=new WeakMap}function onInstancedMeshDispose(event){const instancedMesh=event.target;instancedMesh.removeEventListener("dispose",onInstancedMeshDispose),attributes.remove(instancedMesh.instanceMatrix),null!==instancedMesh.instanceColor&&attributes.remove(instancedMesh.instanceColor)}return __name(update,"update"),__name(dispose,"dispose"),__name(onInstancedMeshDispose,"onInstancedMeshDispose"),{update,dispose}}__name(DataArrayTexture,"DataArrayTexture"),__name(numericalSort,"numericalSort"),__name(absNumericalSort,"absNumericalSort"),__name(WebGLMorphtargets,"WebGLMorphtargets"),__name(WebGLObjects,"WebGLObjects");var Layers=__webpack_require__(3784);class Data3DTexture extends Texture.x{constructor(data=null,width=1,height=1,depth=1){super(null),this.isData3DTexture=!0,this.image={data,width,height,depth},this.magFilter=constants.TyD,this.minFilter=constants.TyD,this.wrapR=constants.uWy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}__name(Data3DTexture,"Data3DTexture");const emptyTexture=new Texture.x,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture.B,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(array,nBlocks,blockSize){const firstElem=array[0];if(firstElem<=0||firstElem>0)return array;const n=nBlocks*blockSize;let r=arrayCacheF32[n];if(void 0===r&&(r=new Float32Array(n),arrayCacheF32[n]=r),0!==nBlocks){firstElem.toArray(r,0);for(let i=1,offset=0;i!==nBlocks;++i)offset+=blockSize,array[i].toArray(r,offset)}return r}function arraysEqual(a,b){if(a.length!==b.length)return!1;for(let i=0,l=a.length;i<l;i++)if(a[i]!==b[i])return!1;return!0}function copyArray(a,b){for(let i=0,l=b.length;i<l;i++)a[i]=b[i]}function allocTexUnits(textures,n){let r=arrayCacheI32[n];void 0===r&&(r=new Int32Array(n),arrayCacheI32[n]=r);for(let i=0;i!==n;++i)r[i]=textures.allocateTextureUnit();return r}function setValueV1f(gl,v){const cache=this.cache;cache[0]!==v&&(gl.uniform1f(this.addr,v),cache[0]=v)}function setValueV2f(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y)&&(gl.uniform2f(this.addr,v.x,v.y),cache[0]=v.x,cache[1]=v.y);else{if(arraysEqual(cache,v))return;gl.uniform2fv(this.addr,v),copyArray(cache,v)}}function setValueV3f(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z)&&(gl.uniform3f(this.addr,v.x,v.y,v.z),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z);else if(void 0!==v.r)(cache[0]!==v.r||cache[1]!==v.g||cache[2]!==v.b)&&(gl.uniform3f(this.addr,v.r,v.g,v.b),cache[0]=v.r,cache[1]=v.g,cache[2]=v.b);else{if(arraysEqual(cache,v))return;gl.uniform3fv(this.addr,v),copyArray(cache,v)}}function setValueV4f(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z||cache[3]!==v.w)&&(gl.uniform4f(this.addr,v.x,v.y,v.z,v.w),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z,cache[3]=v.w);else{if(arraysEqual(cache,v))return;gl.uniform4fv(this.addr,v),copyArray(cache,v)}}function setValueM2(gl,v){const cache=this.cache,elements=v.elements;if(void 0===elements){if(arraysEqual(cache,v))return;gl.uniformMatrix2fv(this.addr,!1,v),copyArray(cache,v)}else{if(arraysEqual(cache,elements))return;mat2array.set(elements),gl.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(cache,elements)}}function setValueM3(gl,v){const cache=this.cache,elements=v.elements;if(void 0===elements){if(arraysEqual(cache,v))return;gl.uniformMatrix3fv(this.addr,!1,v),copyArray(cache,v)}else{if(arraysEqual(cache,elements))return;mat3array.set(elements),gl.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(cache,elements)}}function setValueM4(gl,v){const cache=this.cache,elements=v.elements;if(void 0===elements){if(arraysEqual(cache,v))return;gl.uniformMatrix4fv(this.addr,!1,v),copyArray(cache,v)}else{if(arraysEqual(cache,elements))return;mat4array.set(elements),gl.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(cache,elements)}}function setValueV1i(gl,v){const cache=this.cache;cache[0]!==v&&(gl.uniform1i(this.addr,v),cache[0]=v)}function setValueV2i(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y)&&(gl.uniform2i(this.addr,v.x,v.y),cache[0]=v.x,cache[1]=v.y);else{if(arraysEqual(cache,v))return;gl.uniform2iv(this.addr,v),copyArray(cache,v)}}function setValueV3i(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z)&&(gl.uniform3i(this.addr,v.x,v.y,v.z),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z);else{if(arraysEqual(cache,v))return;gl.uniform3iv(this.addr,v),copyArray(cache,v)}}function setValueV4i(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z||cache[3]!==v.w)&&(gl.uniform4i(this.addr,v.x,v.y,v.z,v.w),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z,cache[3]=v.w);else{if(arraysEqual(cache,v))return;gl.uniform4iv(this.addr,v),copyArray(cache,v)}}function setValueV1ui(gl,v){const cache=this.cache;cache[0]!==v&&(gl.uniform1ui(this.addr,v),cache[0]=v)}function setValueV2ui(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y)&&(gl.uniform2ui(this.addr,v.x,v.y),cache[0]=v.x,cache[1]=v.y);else{if(arraysEqual(cache,v))return;gl.uniform2uiv(this.addr,v),copyArray(cache,v)}}function setValueV3ui(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z)&&(gl.uniform3ui(this.addr,v.x,v.y,v.z),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z);else{if(arraysEqual(cache,v))return;gl.uniform3uiv(this.addr,v),copyArray(cache,v)}}function setValueV4ui(gl,v){const cache=this.cache;if(void 0!==v.x)(cache[0]!==v.x||cache[1]!==v.y||cache[2]!==v.z||cache[3]!==v.w)&&(gl.uniform4ui(this.addr,v.x,v.y,v.z,v.w),cache[0]=v.x,cache[1]=v.y,cache[2]=v.z,cache[3]=v.w);else{if(arraysEqual(cache,v))return;gl.uniform4uiv(this.addr,v),copyArray(cache,v)}}function setValueT1(gl,v,textures){const cache=this.cache,unit=textures.allocateTextureUnit();cache[0]!==unit&&(gl.uniform1i(this.addr,unit),cache[0]=unit),textures.setTexture2D(v||emptyTexture,unit)}function setValueT3D1(gl,v,textures){const cache=this.cache,unit=textures.allocateTextureUnit();cache[0]!==unit&&(gl.uniform1i(this.addr,unit),cache[0]=unit),textures.setTexture3D(v||empty3dTexture,unit)}function setValueT6(gl,v,textures){const cache=this.cache,unit=textures.allocateTextureUnit();cache[0]!==unit&&(gl.uniform1i(this.addr,unit),cache[0]=unit),textures.setTextureCube(v||emptyCubeTexture,unit)}function setValueT2DArray1(gl,v,textures){const cache=this.cache,unit=textures.allocateTextureUnit();cache[0]!==unit&&(gl.uniform1i(this.addr,unit),cache[0]=unit),textures.setTexture2DArray(v||emptyArrayTexture,unit)}function getSingularSetter(type){switch(type){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(gl,v){gl.uniform1fv(this.addr,v)}function setValueV2fArray(gl,v){const data=flatten(v,this.size,2);gl.uniform2fv(this.addr,data)}function setValueV3fArray(gl,v){const data=flatten(v,this.size,3);gl.uniform3fv(this.addr,data)}function setValueV4fArray(gl,v){const data=flatten(v,this.size,4);gl.uniform4fv(this.addr,data)}function setValueM2Array(gl,v){const data=flatten(v,this.size,4);gl.uniformMatrix2fv(this.addr,!1,data)}function setValueM3Array(gl,v){const data=flatten(v,this.size,9);gl.uniformMatrix3fv(this.addr,!1,data)}function setValueM4Array(gl,v){const data=flatten(v,this.size,16);gl.uniformMatrix4fv(this.addr,!1,data)}function setValueV1iArray(gl,v){gl.uniform1iv(this.addr,v)}function setValueV2iArray(gl,v){gl.uniform2iv(this.addr,v)}function setValueV3iArray(gl,v){gl.uniform3iv(this.addr,v)}function setValueV4iArray(gl,v){gl.uniform4iv(this.addr,v)}function setValueV1uiArray(gl,v){gl.uniform1uiv(this.addr,v)}function setValueV2uiArray(gl,v){gl.uniform2uiv(this.addr,v)}function setValueV3uiArray(gl,v){gl.uniform3uiv(this.addr,v)}function setValueV4uiArray(gl,v){gl.uniform4uiv(this.addr,v)}function setValueT1Array(gl,v,textures){const cache=this.cache,n=v.length,units=allocTexUnits(textures,n);arraysEqual(cache,units)||(gl.uniform1iv(this.addr,units),copyArray(cache,units));for(let i=0;i!==n;++i)textures.setTexture2D(v[i]||emptyTexture,units[i])}function setValueT3DArray(gl,v,textures){const cache=this.cache,n=v.length,units=allocTexUnits(textures,n);arraysEqual(cache,units)||(gl.uniform1iv(this.addr,units),copyArray(cache,units));for(let i=0;i!==n;++i)textures.setTexture3D(v[i]||empty3dTexture,units[i])}function setValueT6Array(gl,v,textures){const cache=this.cache,n=v.length,units=allocTexUnits(textures,n);arraysEqual(cache,units)||(gl.uniform1iv(this.addr,units),copyArray(cache,units));for(let i=0;i!==n;++i)textures.setTextureCube(v[i]||emptyCubeTexture,units[i])}function setValueT2DArrayArray(gl,v,textures){const cache=this.cache,n=v.length,units=allocTexUnits(textures,n);arraysEqual(cache,units)||(gl.uniform1iv(this.addr,units),copyArray(cache,units));for(let i=0;i!==n;++i)textures.setTexture2DArray(v[i]||emptyArrayTexture,units[i])}function getPureArraySetter(type){switch(type){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}__name(flatten,"flatten"),__name(arraysEqual,"arraysEqual"),__name(copyArray,"copyArray"),__name(allocTexUnits,"allocTexUnits"),__name(setValueV1f,"setValueV1f"),__name(setValueV2f,"setValueV2f"),__name(setValueV3f,"setValueV3f"),__name(setValueV4f,"setValueV4f"),__name(setValueM2,"setValueM2"),__name(setValueM3,"setValueM3"),__name(setValueM4,"setValueM4"),__name(setValueV1i,"setValueV1i"),__name(setValueV2i,"setValueV2i"),__name(setValueV3i,"setValueV3i"),__name(setValueV4i,"setValueV4i"),__name(setValueV1ui,"setValueV1ui"),__name(setValueV2ui,"setValueV2ui"),__name(setValueV3ui,"setValueV3ui"),__name(setValueV4ui,"setValueV4ui"),__name(setValueT1,"setValueT1"),__name(setValueT3D1,"setValueT3D1"),__name(setValueT6,"setValueT6"),__name(setValueT2DArray1,"setValueT2DArray1"),__name(getSingularSetter,"getSingularSetter"),__name(setValueV1fArray,"setValueV1fArray"),__name(setValueV2fArray,"setValueV2fArray"),__name(setValueV3fArray,"setValueV3fArray"),__name(setValueV4fArray,"setValueV4fArray"),__name(setValueM2Array,"setValueM2Array"),__name(setValueM3Array,"setValueM3Array"),__name(setValueM4Array,"setValueM4Array"),__name(setValueV1iArray,"setValueV1iArray"),__name(setValueV2iArray,"setValueV2iArray"),__name(setValueV3iArray,"setValueV3iArray"),__name(setValueV4iArray,"setValueV4iArray"),__name(setValueV1uiArray,"setValueV1uiArray"),__name(setValueV2uiArray,"setValueV2uiArray"),__name(setValueV3uiArray,"setValueV3uiArray"),__name(setValueV4uiArray,"setValueV4uiArray"),__name(setValueT1Array,"setValueT1Array"),__name(setValueT3DArray,"setValueT3DArray"),__name(setValueT6Array,"setValueT6Array"),__name(setValueT2DArrayArray,"setValueT2DArrayArray"),__name(getPureArraySetter,"getPureArraySetter");class SingleUniform{constructor(id,activeInfo,addr){this.id=id,this.addr=addr,this.cache=[],this.setValue=getSingularSetter(activeInfo.type)}}__name(SingleUniform,"SingleUniform");class PureArrayUniform{constructor(id,activeInfo,addr){this.id=id,this.addr=addr,this.cache=[],this.size=activeInfo.size,this.setValue=getPureArraySetter(activeInfo.type)}}__name(PureArrayUniform,"PureArrayUniform");class StructuredUniform{constructor(id){this.id=id,this.seq=[],this.map={}}setValue(gl,value,textures){const seq=this.seq;for(let i=0,n=seq.length;i!==n;++i){const u=seq[i];u.setValue(gl,value[u.id],textures)}}}__name(StructuredUniform,"StructuredUniform");const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(container,uniformObject){container.seq.push(uniformObject),container.map[uniformObject.id]=uniformObject}function parseUniform(activeInfo,addr,container){const path=activeInfo.name,pathLength=path.length;for(RePathPart.lastIndex=0;;){const match=RePathPart.exec(path);let id=match[1];const subscript=match[3];if("]"===match[2]&&(id|=0),void 0===subscript||"["===subscript&&RePathPart.lastIndex+2===pathLength){addUniform(container,void 0===subscript?new SingleUniform(id,activeInfo,addr):new PureArrayUniform(id,activeInfo,addr));break}{let next=container.map[id];void 0===next&&(next=new StructuredUniform(id),addUniform(container,next)),container=next}}}__name(addUniform,"addUniform"),__name(parseUniform,"parseUniform");class WebGLUniforms{constructor(gl,program){this.seq=[],this.map={};const n=gl.getProgramParameter(program,gl.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const info=gl.getActiveUniform(program,i);parseUniform(info,gl.getUniformLocation(program,info.name),this)}}setValue(gl,name,value,textures){const u=this.map[name];void 0!==u&&u.setValue(gl,value,textures)}setOptional(gl,object,name){const v=object[name];void 0!==v&&this.setValue(gl,name,v)}static upload(gl,seq,values,textures){for(let i=0,n=seq.length;i!==n;++i){const u=seq[i],v=values[u.id];!1!==v.needsUpdate&&u.setValue(gl,v.value,textures)}}static seqWithValue(seq,values){const r=[];for(let i=0,n=seq.length;i!==n;++i){const u=seq[i];u.id in values&&r.push(u)}return r}}function WebGLShader(gl,type,string){const shader=gl.createShader(type);return gl.shaderSource(shader,string),gl.compileShader(shader),shader}__name(WebGLUniforms,"WebGLUniforms"),__name(WebGLShader,"WebGLShader");let programIdCount=0;function handleSource(string,errorLine){const lines=string.split("\n"),lines2=[],from=Math.max(errorLine-6,0),to=Math.min(errorLine+6,lines.length);for(let i=from;i<to;i++){const line=i+1;lines2.push(`${line===errorLine?">":" "} ${line}: ${lines[i]}`)}return lines2.join("\n")}function getEncodingComponents(encoding){switch(encoding){case constants.rnI:return["Linear","( value )"];case constants.knz:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",encoding),["Linear","( value )"]}}function getShaderErrors(gl,shader,type){const status=gl.getShaderParameter(shader,gl.COMPILE_STATUS),errors=gl.getShaderInfoLog(shader).trim();if(status&&""===errors)return"";const errorMatches=/ERROR: 0:(\d+)/.exec(errors);if(errorMatches){const errorLine=parseInt(errorMatches[1]);return type.toUpperCase()+"\n\n"+errors+"\n\n"+handleSource(gl.getShaderSource(shader),errorLine)}return errors}function getTexelEncodingFunction(functionName,encoding){const components=getEncodingComponents(encoding);return"vec4 "+functionName+"( vec4 value ) { return LinearTo"+components[0]+components[1]+"; }"}function getToneMappingFunction(functionName,toneMapping){let toneMappingName;switch(toneMapping){case constants.EoG:toneMappingName="Linear";break;case constants.CdI:toneMappingName="Reinhard";break;case constants.YGz:toneMappingName="OptimizedCineon";break;case constants.LY2:toneMappingName="ACESFilmic";break;case constants.dZ3:toneMappingName="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",toneMapping),toneMappingName="Linear"}return"vec3 "+functionName+"( vec3 color ) { return "+toneMappingName+"ToneMapping( color ); }"}function generateExtensions(parameters){return[parameters.extensionDerivatives||parameters.envMapCubeUVHeight||parameters.bumpMap||parameters.tangentSpaceNormalMap||parameters.clearcoatNormalMap||parameters.flatShading||"physical"===parameters.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(parameters.extensionFragDepth||parameters.logarithmicDepthBuffer)&&parameters.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",parameters.extensionDrawBuffers&&parameters.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(parameters.extensionShaderTextureLOD||parameters.envMap||parameters.transmission)&&parameters.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}function generateDefines(defines){const chunks=[];for(const name in defines){const value=defines[name];!1!==value&&chunks.push("#define "+name+" "+value)}return chunks.join("\n")}function fetchAttributeLocations(gl,program){const attributes={},n=gl.getProgramParameter(program,gl.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const info=gl.getActiveAttrib(program,i),name=info.name;let locationSize=1;info.type===gl.FLOAT_MAT2&&(locationSize=2),info.type===gl.FLOAT_MAT3&&(locationSize=3),info.type===gl.FLOAT_MAT4&&(locationSize=4),attributes[name]={type:info.type,location:gl.getAttribLocation(program,name),locationSize}}return attributes}function filterEmptyLine(string){return""!==string}function replaceLightNums(string,parameters){const numSpotLightCoords=parameters.numSpotLightShadows+parameters.numSpotLightMaps-parameters.numSpotLightShadowsWithMaps;return string.replace(/NUM_DIR_LIGHTS/g,parameters.numDirLights).replace(/NUM_SPOT_LIGHTS/g,parameters.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,parameters.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,numSpotLightCoords).replace(/NUM_RECT_AREA_LIGHTS/g,parameters.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,parameters.numPointLights).replace(/NUM_HEMI_LIGHTS/g,parameters.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,parameters.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,parameters.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,parameters.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,parameters.numPointLightShadows)}function replaceClippingPlaneNums(string,parameters){return string.replace(/NUM_CLIPPING_PLANES/g,parameters.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,parameters.numClippingPlanes-parameters.numClipIntersection)}__name(handleSource,"handleSource"),__name(getEncodingComponents,"getEncodingComponents"),__name(getShaderErrors,"getShaderErrors"),__name(getTexelEncodingFunction,"getTexelEncodingFunction"),__name(getToneMappingFunction,"getToneMappingFunction"),__name(generateExtensions,"generateExtensions"),__name(generateDefines,"generateDefines"),__name(fetchAttributeLocations,"fetchAttributeLocations"),__name(filterEmptyLine,"filterEmptyLine"),__name(replaceLightNums,"replaceLightNums"),__name(replaceClippingPlaneNums,"replaceClippingPlaneNums");const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(string){return string.replace(includePattern,includeReplacer)}function includeReplacer(match,include){const string=ShaderChunk[include];if(void 0===string)throw new Error("Can not resolve #include <"+include+">");return resolveIncludes(string)}__name(resolveIncludes,"resolveIncludes"),__name(includeReplacer,"includeReplacer");const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(string){return string.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(match,start,end,snippet){let string="";for(let i=parseInt(start);i<parseInt(end);i++)string+=snippet.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return string}function generatePrecision(parameters){let precisionstring="precision "+parameters.precision+" float;\nprecision "+parameters.precision+" int;";return"highp"===parameters.precision?precisionstring+="\n#define HIGH_PRECISION":"mediump"===parameters.precision?precisionstring+="\n#define MEDIUM_PRECISION":"lowp"===parameters.precision&&(precisionstring+="\n#define LOW_PRECISION"),precisionstring}function generateShadowMapTypeDefine(parameters){let shadowMapTypeDefine="SHADOWMAP_TYPE_BASIC";return parameters.shadowMapType===constants._iA?shadowMapTypeDefine="SHADOWMAP_TYPE_PCF":parameters.shadowMapType===constants.ntZ?shadowMapTypeDefine="SHADOWMAP_TYPE_PCF_SOFT":parameters.shadowMapType===constants.dwk&&(shadowMapTypeDefine="SHADOWMAP_TYPE_VSM"),shadowMapTypeDefine}function generateEnvMapTypeDefine(parameters){let envMapTypeDefine="ENVMAP_TYPE_CUBE";if(parameters.envMap)switch(parameters.envMapMode){case constants.fY$:case constants.vxC:envMapTypeDefine="ENVMAP_TYPE_CUBE";break;case constants.g8_:envMapTypeDefine="ENVMAP_TYPE_CUBE_UV"}return envMapTypeDefine}function generateEnvMapModeDefine(parameters){let envMapModeDefine="ENVMAP_MODE_REFLECTION";return parameters.envMap&&parameters.envMapMode===constants.vxC&&(envMapModeDefine="ENVMAP_MODE_REFRACTION"),envMapModeDefine}function generateEnvMapBlendingDefine(parameters){let envMapBlendingDefine="ENVMAP_BLENDING_NONE";if(parameters.envMap)switch(parameters.combine){case constants.Ns1:envMapBlendingDefine="ENVMAP_BLENDING_MULTIPLY";break;case constants.qhX:envMapBlendingDefine="ENVMAP_BLENDING_MIX";break;case constants.NDo:envMapBlendingDefine="ENVMAP_BLENDING_ADD"}return envMapBlendingDefine}function generateCubeUVSize(parameters){const imageHeight=parameters.envMapCubeUVHeight;if(null===imageHeight)return null;const maxMip=Math.log2(imageHeight)-2,texelHeight=1/imageHeight;return{texelWidth:1/(3*Math.max(Math.pow(2,maxMip),112)),texelHeight,maxMip}}function WebGLProgram(renderer,cacheKey,parameters,bindingStates){const gl=renderer.getContext(),defines=parameters.defines;let vertexShader=parameters.vertexShader,fragmentShader=parameters.fragmentShader;const shadowMapTypeDefine=generateShadowMapTypeDefine(parameters),envMapTypeDefine=generateEnvMapTypeDefine(parameters),envMapModeDefine=generateEnvMapModeDefine(parameters),envMapBlendingDefine=generateEnvMapBlendingDefine(parameters),envMapCubeUVSize=generateCubeUVSize(parameters),customExtensions=parameters.isWebGL2?"":generateExtensions(parameters),customDefines=generateDefines(defines),program=gl.createProgram();let prefixVertex,prefixFragment,versionString=parameters.glslVersion?"#version "+parameters.glslVersion+"\n":"";parameters.isRawShaderMaterial?(prefixVertex=[customDefines].filter(filterEmptyLine).join("\n"),prefixVertex.length>0&&(prefixVertex+="\n"),prefixFragment=[customExtensions,customDefines].filter(filterEmptyLine).join("\n"),prefixFragment.length>0&&(prefixFragment+="\n")):(prefixVertex=[generatePrecision(parameters),"#define SHADER_NAME "+parameters.shaderName,customDefines,parameters.instancing?"#define USE_INSTANCING":"",parameters.instancingColor?"#define USE_INSTANCING_COLOR":"",parameters.supportsVertexTextures?"#define VERTEX_TEXTURES":"",parameters.useFog&&parameters.fog?"#define USE_FOG":"",parameters.useFog&&parameters.fogExp2?"#define FOG_EXP2":"",parameters.map?"#define USE_MAP":"",parameters.envMap?"#define USE_ENVMAP":"",parameters.envMap?"#define "+envMapModeDefine:"",parameters.lightMap?"#define USE_LIGHTMAP":"",parameters.aoMap?"#define USE_AOMAP":"",parameters.emissiveMap?"#define USE_EMISSIVEMAP":"",parameters.bumpMap?"#define USE_BUMPMAP":"",parameters.normalMap?"#define USE_NORMALMAP":"",parameters.normalMap&&parameters.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",parameters.normalMap&&parameters.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",parameters.clearcoatMap?"#define USE_CLEARCOATMAP":"",parameters.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",parameters.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",parameters.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",parameters.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",parameters.displacementMap&&parameters.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",parameters.specularMap?"#define USE_SPECULARMAP":"",parameters.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",parameters.specularColorMap?"#define USE_SPECULARCOLORMAP":"",parameters.roughnessMap?"#define USE_ROUGHNESSMAP":"",parameters.metalnessMap?"#define USE_METALNESSMAP":"",parameters.alphaMap?"#define USE_ALPHAMAP":"",parameters.transmission?"#define USE_TRANSMISSION":"",parameters.transmissionMap?"#define USE_TRANSMISSIONMAP":"",parameters.thicknessMap?"#define USE_THICKNESSMAP":"",parameters.sheenColorMap?"#define USE_SHEENCOLORMAP":"",parameters.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",parameters.vertexTangents?"#define USE_TANGENT":"",parameters.vertexColors?"#define USE_COLOR":"",parameters.vertexAlphas?"#define USE_COLOR_ALPHA":"",parameters.vertexUvs?"#define USE_UV":"",parameters.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",parameters.flatShading?"#define FLAT_SHADED":"",parameters.skinning?"#define USE_SKINNING":"",parameters.morphTargets?"#define USE_MORPHTARGETS":"",parameters.morphNormals&&!1===parameters.flatShading?"#define USE_MORPHNORMALS":"",parameters.morphColors&&parameters.isWebGL2?"#define USE_MORPHCOLORS":"",parameters.morphTargetsCount>0&&parameters.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",parameters.morphTargetsCount>0&&parameters.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+parameters.morphTextureStride:"",parameters.morphTargetsCount>0&&parameters.isWebGL2?"#define MORPHTARGETS_COUNT "+parameters.morphTargetsCount:"",parameters.doubleSided?"#define DOUBLE_SIDED":"",parameters.flipSided?"#define FLIP_SIDED":"",parameters.shadowMapEnabled?"#define USE_SHADOWMAP":"",parameters.shadowMapEnabled?"#define "+shadowMapTypeDefine:"",parameters.sizeAttenuation?"#define USE_SIZEATTENUATION":"",parameters.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",parameters.logarithmicDepthBuffer&&parameters.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),prefixFragment=[customExtensions,generatePrecision(parameters),"#define SHADER_NAME "+parameters.shaderName,customDefines,parameters.useFog&&parameters.fog?"#define USE_FOG":"",parameters.useFog&&parameters.fogExp2?"#define FOG_EXP2":"",parameters.map?"#define USE_MAP":"",parameters.matcap?"#define USE_MATCAP":"",parameters.envMap?"#define USE_ENVMAP":"",parameters.envMap?"#define "+envMapTypeDefine:"",parameters.envMap?"#define "+envMapModeDefine:"",parameters.envMap?"#define "+envMapBlendingDefine:"",envMapCubeUVSize?"#define CUBEUV_TEXEL_WIDTH "+envMapCubeUVSize.texelWidth:"",envMapCubeUVSize?"#define CUBEUV_TEXEL_HEIGHT "+envMapCubeUVSize.texelHeight:"",envMapCubeUVSize?"#define CUBEUV_MAX_MIP "+envMapCubeUVSize.maxMip+".0":"",parameters.lightMap?"#define USE_LIGHTMAP":"",parameters.aoMap?"#define USE_AOMAP":"",parameters.emissiveMap?"#define USE_EMISSIVEMAP":"",parameters.bumpMap?"#define USE_BUMPMAP":"",parameters.normalMap?"#define USE_NORMALMAP":"",parameters.normalMap&&parameters.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",parameters.normalMap&&parameters.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",parameters.clearcoat?"#define USE_CLEARCOAT":"",parameters.clearcoatMap?"#define USE_CLEARCOATMAP":"",parameters.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",parameters.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",parameters.iridescence?"#define USE_IRIDESCENCE":"",parameters.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",parameters.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",parameters.specularMap?"#define USE_SPECULARMAP":"",parameters.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",parameters.specularColorMap?"#define USE_SPECULARCOLORMAP":"",parameters.roughnessMap?"#define USE_ROUGHNESSMAP":"",parameters.metalnessMap?"#define USE_METALNESSMAP":"",parameters.alphaMap?"#define USE_ALPHAMAP":"",parameters.alphaTest?"#define USE_ALPHATEST":"",parameters.sheen?"#define USE_SHEEN":"",parameters.sheenColorMap?"#define USE_SHEENCOLORMAP":"",parameters.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",parameters.transmission?"#define USE_TRANSMISSION":"",parameters.transmissionMap?"#define USE_TRANSMISSIONMAP":"",parameters.thicknessMap?"#define USE_THICKNESSMAP":"",parameters.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",parameters.vertexTangents?"#define USE_TANGENT":"",parameters.vertexColors||parameters.instancingColor?"#define USE_COLOR":"",parameters.vertexAlphas?"#define USE_COLOR_ALPHA":"",parameters.vertexUvs?"#define USE_UV":"",parameters.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",parameters.gradientMap?"#define USE_GRADIENTMAP":"",parameters.flatShading?"#define FLAT_SHADED":"",parameters.doubleSided?"#define DOUBLE_SIDED":"",parameters.flipSided?"#define FLIP_SIDED":"",parameters.shadowMapEnabled?"#define USE_SHADOWMAP":"",parameters.shadowMapEnabled?"#define "+shadowMapTypeDefine:"",parameters.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",parameters.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",parameters.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",parameters.logarithmicDepthBuffer&&parameters.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",parameters.toneMapping!==constants.uL9?"#define TONE_MAPPING":"",parameters.toneMapping!==constants.uL9?ShaderChunk.tonemapping_pars_fragment:"",parameters.toneMapping!==constants.uL9?getToneMappingFunction("toneMapping",parameters.toneMapping):"",parameters.dithering?"#define DITHERING":"",parameters.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",parameters.outputEncoding),parameters.useDepthPacking?"#define DEPTH_PACKING "+parameters.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),vertexShader=resolveIncludes(vertexShader),vertexShader=replaceLightNums(vertexShader,parameters),vertexShader=replaceClippingPlaneNums(vertexShader,parameters),fragmentShader=resolveIncludes(fragmentShader),fragmentShader=replaceLightNums(fragmentShader,parameters),fragmentShader=replaceClippingPlaneNums(fragmentShader,parameters),vertexShader=unrollLoops(vertexShader),fragmentShader=unrollLoops(fragmentShader),parameters.isWebGL2&&!0!==parameters.isRawShaderMaterial&&(versionString="#version 300 es\n",prefixVertex=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+prefixVertex,prefixFragment=["#define varying in",parameters.glslVersion===constants.LSk?"":"layout(location = 0) out highp vec4 pc_fragColor;",parameters.glslVersion===constants.LSk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+prefixFragment);const fragmentGlsl=versionString+prefixFragment+fragmentShader,glVertexShader=WebGLShader(gl,gl.VERTEX_SHADER,versionString+prefixVertex+vertexShader),glFragmentShader=WebGLShader(gl,gl.FRAGMENT_SHADER,fragmentGlsl);if(gl.attachShader(program,glVertexShader),gl.attachShader(program,glFragmentShader),void 0!==parameters.index0AttributeName?gl.bindAttribLocation(program,0,parameters.index0AttributeName):!0===parameters.morphTargets&&gl.bindAttribLocation(program,0,"position"),gl.linkProgram(program),renderer.debug.checkShaderErrors){const programLog=gl.getProgramInfoLog(program).trim(),vertexLog=gl.getShaderInfoLog(glVertexShader).trim(),fragmentLog=gl.getShaderInfoLog(glFragmentShader).trim();let runnable=!0,haveDiagnostics=!0;if(!1===gl.getProgramParameter(program,gl.LINK_STATUS)){runnable=!1;const vertexErrors=getShaderErrors(gl,glVertexShader,"vertex"),fragmentErrors=getShaderErrors(gl,glFragmentShader,"fragment");console.error("THREE.WebGLProgram: Shader Error "+gl.getError()+" - VALIDATE_STATUS "+gl.getProgramParameter(program,gl.VALIDATE_STATUS)+"\n\nProgram Info Log: "+programLog+"\n"+vertexErrors+"\n"+fragmentErrors)}else""!==programLog?console.warn("THREE.WebGLProgram: Program Info Log:",programLog):(""===vertexLog||""===fragmentLog)&&(haveDiagnostics=!1);haveDiagnostics&&(this.diagnostics={runnable,programLog,vertexShader:{log:vertexLog,prefix:prefixVertex},fragmentShader:{log:fragmentLog,prefix:prefixFragment}})}let cachedUniforms,cachedAttributes;return gl.deleteShader(glVertexShader),gl.deleteShader(glFragmentShader),this.getUniforms=function(){return void 0===cachedUniforms&&(cachedUniforms=new WebGLUniforms(gl,program)),cachedUniforms},this.getAttributes=function(){return void 0===cachedAttributes&&(cachedAttributes=fetchAttributeLocations(gl,program)),cachedAttributes},this.destroy=function(){bindingStates.releaseStatesOfProgram(this),gl.deleteProgram(program),this.program=void 0},this.name=parameters.shaderName,this.id=programIdCount++,this.cacheKey=cacheKey,this.usedTimes=1,this.program=program,this.vertexShader=glVertexShader,this.fragmentShader=glFragmentShader,this}__name(unrollLoops,"unrollLoops"),__name(loopReplacer,"loopReplacer"),__name(generatePrecision,"generatePrecision"),__name(generateShadowMapTypeDefine,"generateShadowMapTypeDefine"),__name(generateEnvMapTypeDefine,"generateEnvMapTypeDefine"),__name(generateEnvMapModeDefine,"generateEnvMapModeDefine"),__name(generateEnvMapBlendingDefine,"generateEnvMapBlendingDefine"),__name(generateCubeUVSize,"generateCubeUVSize"),__name(WebGLProgram,"WebGLProgram");let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(material){const fragmentShader=material.fragmentShader,vertexShaderStage=this._getShaderStage(material.vertexShader),fragmentShaderStage=this._getShaderStage(fragmentShader),materialShaders=this._getShaderCacheForMaterial(material);return!1===materialShaders.has(vertexShaderStage)&&(materialShaders.add(vertexShaderStage),vertexShaderStage.usedTimes++),!1===materialShaders.has(fragmentShaderStage)&&(materialShaders.add(fragmentShaderStage),fragmentShaderStage.usedTimes++),this}remove(material){const materialShaders=this.materialCache.get(material);for(const shaderStage of materialShaders)shaderStage.usedTimes--,0===shaderStage.usedTimes&&this.shaderCache.delete(shaderStage.code);return this.materialCache.delete(material),this}getVertexShaderID(material){return this._getShaderStage(material.vertexShader).id}getFragmentShaderID(material){return this._getShaderStage(material.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(material){const cache=this.materialCache;let set=cache.get(material);return void 0===set&&(set=new Set,cache.set(material,set)),set}_getShaderStage(code){const cache=this.shaderCache;let stage=cache.get(code);return void 0===stage&&(stage=new WebGLShaderStage(code),cache.set(code,stage)),stage}}__name(WebGLShaderCache,"WebGLShaderCache");class WebGLShaderStage{constructor(code){this.id=_id++,this.code=code,this.usedTimes=0}}function WebGLPrograms(renderer,cubemaps,cubeuvmaps,extensions,capabilities,bindingStates,clipping){const _programLayers=new Layers.S,_customShaders=new WebGLShaderCache,programs=[],isWebGL2=capabilities.isWebGL2,logarithmicDepthBuffer=capabilities.logarithmicDepthBuffer,vertexTextures=capabilities.vertexTextures;let precision=capabilities.precision;const shaderIDs={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function getParameters(material,lights,shadows,scene,object){const fog=scene.fog,geometry=object.geometry,envMap=(material.isMeshStandardMaterial?cubeuvmaps:cubemaps).get(material.envMap||(material.isMeshStandardMaterial?scene.environment:null)),envMapCubeUVHeight=envMap&&envMap.mapping===constants.g8_?envMap.image.height:null,shaderID=shaderIDs[material.type];null!==material.precision&&(precision=capabilities.getMaxPrecision(material.precision),precision!==material.precision&&console.warn("THREE.WebGLProgram.getParameters:",material.precision,"not supported, using",precision,"instead."));const morphAttribute=geometry.morphAttributes.position||geometry.morphAttributes.normal||geometry.morphAttributes.color,morphTargetsCount=void 0!==morphAttribute?morphAttribute.length:0;let vertexShader,fragmentShader,customVertexShaderID,customFragmentShaderID,morphTextureStride=0;if(void 0!==geometry.morphAttributes.position&&(morphTextureStride=1),void 0!==geometry.morphAttributes.normal&&(morphTextureStride=2),void 0!==geometry.morphAttributes.color&&(morphTextureStride=3),shaderID){const shader=ShaderLib2[shaderID];vertexShader=shader.vertexShader,fragmentShader=shader.fragmentShader}else vertexShader=material.vertexShader,fragmentShader=material.fragmentShader,_customShaders.update(material),customVertexShaderID=_customShaders.getVertexShaderID(material),customFragmentShaderID=_customShaders.getFragmentShaderID(material);const currentRenderTarget=renderer.getRenderTarget(),useClearcoat=material.clearcoat>0,useIridescence=material.iridescence>0;return{isWebGL2,shaderID,shaderName:material.type,vertexShader,fragmentShader,defines:material.defines,customVertexShaderID,customFragmentShaderID,isRawShaderMaterial:!0===material.isRawShaderMaterial,glslVersion:material.glslVersion,precision,instancing:!0===object.isInstancedMesh,instancingColor:!0===object.isInstancedMesh&&null!==object.instanceColor,supportsVertexTextures:vertexTextures,outputEncoding:null===currentRenderTarget?renderer.outputEncoding:!0===currentRenderTarget.isXRRenderTarget?currentRenderTarget.texture.encoding:constants.rnI,map:!!material.map,matcap:!!material.matcap,envMap:!!envMap,envMapMode:envMap&&envMap.mapping,envMapCubeUVHeight,lightMap:!!material.lightMap,aoMap:!!material.aoMap,emissiveMap:!!material.emissiveMap,bumpMap:!!material.bumpMap,normalMap:!!material.normalMap,objectSpaceNormalMap:material.normalMapType===constants.PA7,tangentSpaceNormalMap:material.normalMapType===constants.IOt,decodeVideoTexture:!!material.map&&!0===material.map.isVideoTexture&&material.map.encoding===constants.knz,clearcoat:useClearcoat,clearcoatMap:useClearcoat&&!!material.clearcoatMap,clearcoatRoughnessMap:useClearcoat&&!!material.clearcoatRoughnessMap,clearcoatNormalMap:useClearcoat&&!!material.clearcoatNormalMap,iridescence:useIridescence,iridescenceMap:useIridescence&&!!material.iridescenceMap,iridescenceThicknessMap:useIridescence&&!!material.iridescenceThicknessMap,displacementMap:!!material.displacementMap,roughnessMap:!!material.roughnessMap,metalnessMap:!!material.metalnessMap,specularMap:!!material.specularMap,specularIntensityMap:!!material.specularIntensityMap,specularColorMap:!!material.specularColorMap,opaque:!1===material.transparent&&material.blending===constants.bdR,alphaMap:!!material.alphaMap,alphaTest:material.alphaTest>0,gradientMap:!!material.gradientMap,sheen:material.sheen>0,sheenColorMap:!!material.sheenColorMap,sheenRoughnessMap:!!material.sheenRoughnessMap,transmission:material.transmission>0,transmissionMap:!!material.transmissionMap,thicknessMap:!!material.thicknessMap,combine:material.combine,vertexTangents:!!material.normalMap&&!!geometry.attributes.tangent,vertexColors:material.vertexColors,vertexAlphas:!0===material.vertexColors&&!!geometry.attributes.color&&4===geometry.attributes.color.itemSize,vertexUvs:!!(material.map||material.bumpMap||material.normalMap||material.specularMap||material.alphaMap||material.emissiveMap||material.roughnessMap||material.metalnessMap||material.clearcoatMap||material.clearcoatRoughnessMap||material.clearcoatNormalMap||material.iridescenceMap||material.iridescenceThicknessMap||material.displacementMap||material.transmissionMap||material.thicknessMap||material.specularIntensityMap||material.specularColorMap||material.sheenColorMap||material.sheenRoughnessMap),uvsVertexOnly:!(material.map||material.bumpMap||material.normalMap||material.specularMap||material.alphaMap||material.emissiveMap||material.roughnessMap||material.metalnessMap||material.clearcoatNormalMap||material.iridescenceMap||material.iridescenceThicknessMap||material.transmission>0||material.transmissionMap||material.thicknessMap||material.specularIntensityMap||material.specularColorMap||material.sheen>0||material.sheenColorMap||material.sheenRoughnessMap||!material.displacementMap),fog:!!fog,useFog:!0===material.fog,fogExp2:fog&&fog.isFogExp2,flatShading:!!material.flatShading,sizeAttenuation:material.sizeAttenuation,logarithmicDepthBuffer,skinning:!0===object.isSkinnedMesh,morphTargets:void 0!==geometry.morphAttributes.position,morphNormals:void 0!==geometry.morphAttributes.normal,morphColors:void 0!==geometry.morphAttributes.color,morphTargetsCount,morphTextureStride,numDirLights:lights.directional.length,numPointLights:lights.point.length,numSpotLights:lights.spot.length,numSpotLightMaps:lights.spotLightMap.length,numRectAreaLights:lights.rectArea.length,numHemiLights:lights.hemi.length,numDirLightShadows:lights.directionalShadowMap.length,numPointLightShadows:lights.pointShadowMap.length,numSpotLightShadows:lights.spotShadowMap.length,numSpotLightShadowsWithMaps:lights.numSpotLightShadowsWithMaps,numClippingPlanes:clipping.numPlanes,numClipIntersection:clipping.numIntersection,dithering:material.dithering,shadowMapEnabled:renderer.shadowMap.enabled&&shadows.length>0,shadowMapType:renderer.shadowMap.type,toneMapping:material.toneMapped?renderer.toneMapping:constants.uL9,physicallyCorrectLights:renderer.physicallyCorrectLights,premultipliedAlpha:material.premultipliedAlpha,doubleSided:material.side===constants.ehD,flipSided:material.side===constants._Li,useDepthPacking:!!material.depthPacking,depthPacking:material.depthPacking||0,index0AttributeName:material.index0AttributeName,extensionDerivatives:material.extensions&&material.extensions.derivatives,extensionFragDepth:material.extensions&&material.extensions.fragDepth,extensionDrawBuffers:material.extensions&&material.extensions.drawBuffers,extensionShaderTextureLOD:material.extensions&&material.extensions.shaderTextureLOD,rendererExtensionFragDepth:isWebGL2||extensions.has("EXT_frag_depth"),rendererExtensionDrawBuffers:isWebGL2||extensions.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:isWebGL2||extensions.has("EXT_shader_texture_lod"),customProgramCacheKey:material.customProgramCacheKey()}}function getProgramCacheKey(parameters){const array=[];if(parameters.shaderID?array.push(parameters.shaderID):(array.push(parameters.customVertexShaderID),array.push(parameters.customFragmentShaderID)),void 0!==parameters.defines)for(const name in parameters.defines)array.push(name),array.push(parameters.defines[name]);return!1===parameters.isRawShaderMaterial&&(getProgramCacheKeyParameters(array,parameters),getProgramCacheKeyBooleans(array,parameters),array.push(renderer.outputEncoding)),array.push(parameters.customProgramCacheKey),array.join()}function getProgramCacheKeyParameters(array,parameters){array.push(parameters.precision),array.push(parameters.outputEncoding),array.push(parameters.envMapMode),array.push(parameters.envMapCubeUVHeight),array.push(parameters.combine),array.push(parameters.vertexUvs),array.push(parameters.fogExp2),array.push(parameters.sizeAttenuation),array.push(parameters.morphTargetsCount),array.push(parameters.morphAttributeCount),array.push(parameters.numDirLights),array.push(parameters.numPointLights),array.push(parameters.numSpotLights),array.push(parameters.numSpotLightMaps),array.push(parameters.numHemiLights),array.push(parameters.numRectAreaLights),array.push(parameters.numDirLightShadows),array.push(parameters.numPointLightShadows),array.push(parameters.numSpotLightShadows),array.push(parameters.numSpotLightShadowsWithMaps),array.push(parameters.shadowMapType),array.push(parameters.toneMapping),array.push(parameters.numClippingPlanes),array.push(parameters.numClipIntersection),array.push(parameters.depthPacking)}function getProgramCacheKeyBooleans(array,parameters){_programLayers.disableAll(),parameters.isWebGL2&&_programLayers.enable(0),parameters.supportsVertexTextures&&_programLayers.enable(1),parameters.instancing&&_programLayers.enable(2),parameters.instancingColor&&_programLayers.enable(3),parameters.map&&_programLayers.enable(4),parameters.matcap&&_programLayers.enable(5),parameters.envMap&&_programLayers.enable(6),parameters.lightMap&&_programLayers.enable(7),parameters.aoMap&&_programLayers.enable(8),parameters.emissiveMap&&_programLayers.enable(9),parameters.bumpMap&&_programLayers.enable(10),parameters.normalMap&&_programLayers.enable(11),parameters.objectSpaceNormalMap&&_programLayers.enable(12),parameters.tangentSpaceNormalMap&&_programLayers.enable(13),parameters.clearcoat&&_programLayers.enable(14),parameters.clearcoatMap&&_programLayers.enable(15),parameters.clearcoatRoughnessMap&&_programLayers.enable(16),parameters.clearcoatNormalMap&&_programLayers.enable(17),parameters.iridescence&&_programLayers.enable(18),parameters.iridescenceMap&&_programLayers.enable(19),parameters.iridescenceThicknessMap&&_programLayers.enable(20),parameters.displacementMap&&_programLayers.enable(21),parameters.specularMap&&_programLayers.enable(22),parameters.roughnessMap&&_programLayers.enable(23),parameters.metalnessMap&&_programLayers.enable(24),parameters.gradientMap&&_programLayers.enable(25),parameters.alphaMap&&_programLayers.enable(26),parameters.alphaTest&&_programLayers.enable(27),parameters.vertexColors&&_programLayers.enable(28),parameters.vertexAlphas&&_programLayers.enable(29),parameters.vertexUvs&&_programLayers.enable(30),parameters.vertexTangents&&_programLayers.enable(31),parameters.uvsVertexOnly&&_programLayers.enable(32),array.push(_programLayers.mask),_programLayers.disableAll(),parameters.fog&&_programLayers.enable(0),parameters.useFog&&_programLayers.enable(1),parameters.flatShading&&_programLayers.enable(2),parameters.logarithmicDepthBuffer&&_programLayers.enable(3),parameters.skinning&&_programLayers.enable(4),parameters.morphTargets&&_programLayers.enable(5),parameters.morphNormals&&_programLayers.enable(6),parameters.morphColors&&_programLayers.enable(7),parameters.premultipliedAlpha&&_programLayers.enable(8),parameters.shadowMapEnabled&&_programLayers.enable(9),parameters.physicallyCorrectLights&&_programLayers.enable(10),parameters.doubleSided&&_programLayers.enable(11),parameters.flipSided&&_programLayers.enable(12),parameters.useDepthPacking&&_programLayers.enable(13),parameters.dithering&&_programLayers.enable(14),parameters.specularIntensityMap&&_programLayers.enable(15),parameters.specularColorMap&&_programLayers.enable(16),parameters.transmission&&_programLayers.enable(17),parameters.transmissionMap&&_programLayers.enable(18),parameters.thicknessMap&&_programLayers.enable(19),parameters.sheen&&_programLayers.enable(20),parameters.sheenColorMap&&_programLayers.enable(21),parameters.sheenRoughnessMap&&_programLayers.enable(22),parameters.decodeVideoTexture&&_programLayers.enable(23),parameters.opaque&&_programLayers.enable(24),array.push(_programLayers.mask)}function getUniforms(material){const shaderID=shaderIDs[material.type];let uniforms;return uniforms=shaderID?UniformsUtils.clone(ShaderLib2[shaderID].uniforms):material.uniforms,uniforms}function acquireProgram(parameters,cacheKey){let program;for(let p=0,pl=programs.length;p<pl;p++){const preexistingProgram=programs[p];if(preexistingProgram.cacheKey===cacheKey){program=preexistingProgram,++program.usedTimes;break}}return void 0===program&&(program=new WebGLProgram(renderer,cacheKey,parameters,bindingStates),programs.push(program)),program}function releaseProgram(program){if(0==--program.usedTimes){const i=programs.indexOf(program);programs[i]=programs[programs.length-1],programs.pop(),program.destroy()}}function releaseShaderCache(material){_customShaders.remove(material)}function dispose(){_customShaders.dispose()}return __name(getParameters,"getParameters"),__name(getProgramCacheKey,"getProgramCacheKey"),__name(getProgramCacheKeyParameters,"getProgramCacheKeyParameters"),__name(getProgramCacheKeyBooleans,"getProgramCacheKeyBooleans"),__name(getUniforms,"getUniforms"),__name(acquireProgram,"acquireProgram"),__name(releaseProgram,"releaseProgram"),__name(releaseShaderCache,"releaseShaderCache"),__name(dispose,"dispose"),{getParameters,getProgramCacheKey,getUniforms,acquireProgram,releaseProgram,releaseShaderCache,programs,dispose}}function WebGLProperties(){let properties=new WeakMap;function get(object){let map=properties.get(object);return void 0===map&&(map={},properties.set(object,map)),map}function remove(object){properties.delete(object)}function update(object,key,value){properties.get(object)[key]=value}function dispose(){properties=new WeakMap}return __name(get,"get"),__name(remove,"remove"),__name(update,"update"),__name(dispose,"dispose"),{get,remove,update,dispose}}function painterSortStable(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function reversePainterSortStable(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function WebGLRenderList(){const renderItems=[];let renderItemsIndex=0;const opaque=[],transmissive=[],transparent=[];function init(){renderItemsIndex=0,opaque.length=0,transmissive.length=0,transparent.length=0}function getNextRenderItem(object,geometry,material,groupOrder,z,group){let renderItem=renderItems[renderItemsIndex];return void 0===renderItem?(renderItem={id:object.id,object,geometry,material,groupOrder,renderOrder:object.renderOrder,z,group},renderItems[renderItemsIndex]=renderItem):(renderItem.id=object.id,renderItem.object=object,renderItem.geometry=geometry,renderItem.material=material,renderItem.groupOrder=groupOrder,renderItem.renderOrder=object.renderOrder,renderItem.z=z,renderItem.group=group),renderItemsIndex++,renderItem}function push(object,geometry,material,groupOrder,z,group){const renderItem=getNextRenderItem(object,geometry,material,groupOrder,z,group);material.transmission>0?transmissive.push(renderItem):!0===material.transparent?transparent.push(renderItem):opaque.push(renderItem)}function unshift(object,geometry,material,groupOrder,z,group){const renderItem=getNextRenderItem(object,geometry,material,groupOrder,z,group);material.transmission>0?transmissive.unshift(renderItem):!0===material.transparent?transparent.unshift(renderItem):opaque.unshift(renderItem)}function sort(customOpaqueSort,customTransparentSort){opaque.length>1&&opaque.sort(customOpaqueSort||painterSortStable),transmissive.length>1&&transmissive.sort(customTransparentSort||reversePainterSortStable),transparent.length>1&&transparent.sort(customTransparentSort||reversePainterSortStable)}function finish(){for(let i=renderItemsIndex,il=renderItems.length;i<il;i++){const renderItem=renderItems[i];if(null===renderItem.id)break;renderItem.id=null,renderItem.object=null,renderItem.geometry=null,renderItem.material=null,renderItem.group=null}}return __name(init,"init"),__name(getNextRenderItem,"getNextRenderItem"),__name(push,"push"),__name(unshift,"unshift"),__name(sort,"sort"),__name(finish,"finish"),{opaque,transmissive,transparent,init,push,unshift,finish,sort}}function WebGLRenderLists(){let lists=new WeakMap;function get(scene,renderCallDepth){const listArray=lists.get(scene);let list;return void 0===listArray?(list=new WebGLRenderList,lists.set(scene,[list])):renderCallDepth>=listArray.length?(list=new WebGLRenderList,listArray.push(list)):list=listArray[renderCallDepth],list}function dispose(){lists=new WeakMap}return __name(get,"get"),__name(dispose,"dispose"),{get,dispose}}function UniformsCache(){const lights={};return{get:function(light){if(void 0!==lights[light.id])return lights[light.id];let uniforms;switch(light.type){case"DirectionalLight":uniforms={direction:new Vector32.P,color:new Color.I};break;case"SpotLight":uniforms={position:new Vector32.P,direction:new Vector32.P,color:new Color.I,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":uniforms={position:new Vector32.P,color:new Color.I,distance:0,decay:0};break;case"HemisphereLight":uniforms={direction:new Vector32.P,skyColor:new Color.I,groundColor:new Color.I};break;case"RectAreaLight":uniforms={color:new Color.I,position:new Vector32.P,halfWidth:new Vector32.P,halfHeight:new Vector32.P}}return lights[light.id]=uniforms,uniforms}}}function ShadowUniformsCache(){const lights={};return{get:function(light){if(void 0!==lights[light.id])return lights[light.id];let uniforms;switch(light.type){case"DirectionalLight":case"SpotLight":uniforms={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector22.F};break;case"PointLight":uniforms={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector22.F,shadowCameraNear:1,shadowCameraFar:1e3}}return lights[light.id]=uniforms,uniforms}}}__name(WebGLShaderStage,"WebGLShaderStage"),__name(WebGLPrograms,"WebGLPrograms"),__name(WebGLProperties,"WebGLProperties"),__name(painterSortStable,"painterSortStable"),__name(reversePainterSortStable,"reversePainterSortStable"),__name(WebGLRenderList,"WebGLRenderList"),__name(WebGLRenderLists,"WebGLRenderLists"),__name(UniformsCache,"UniformsCache"),__name(ShadowUniformsCache,"ShadowUniformsCache");let nextVersion=0;function shadowCastingAndTexturingLightsFirst(lightA,lightB){return(lightB.castShadow?2:0)-(lightA.castShadow?2:0)+(lightB.map?1:0)-(lightA.map?1:0)}function WebGLLights(extensions,capabilities){const cache=new UniformsCache,shadowCache=ShadowUniformsCache(),state={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let i=0;i<9;i++)state.probe.push(new Vector32.P);const vector3=new Vector32.P,matrix4=new Matrix42.y,matrix42=new Matrix42.y;function setup(lights,physicallyCorrectLights){let r=0,g=0,b=0;for(let i=0;i<9;i++)state.probe[i].set(0,0,0);let directionalLength=0,pointLength=0,spotLength=0,rectAreaLength=0,hemiLength=0,numDirectionalShadows=0,numPointShadows=0,numSpotShadows=0,numSpotMaps=0,numSpotShadowsWithMaps=0;lights.sort(shadowCastingAndTexturingLightsFirst);const scaleFactor=!0!==physicallyCorrectLights?Math.PI:1;for(let i=0,l=lights.length;i<l;i++){const light=lights[i],color=light.color,intensity=light.intensity,distance=light.distance,shadowMap=light.shadow&&light.shadow.map?light.shadow.map.texture:null;if(light.isAmbientLight)r+=color.r*intensity*scaleFactor,g+=color.g*intensity*scaleFactor,b+=color.b*intensity*scaleFactor;else if(light.isLightProbe)for(let j=0;j<9;j++)state.probe[j].addScaledVector(light.sh.coefficients[j],intensity);else if(light.isDirectionalLight){const uniforms=cache.get(light);if(uniforms.color.copy(light.color).multiplyScalar(light.intensity*scaleFactor),light.castShadow){const shadow=light.shadow,shadowUniforms=shadowCache.get(light);shadowUniforms.shadowBias=shadow.bias,shadowUniforms.shadowNormalBias=shadow.normalBias,shadowUniforms.shadowRadius=shadow.radius,shadowUniforms.shadowMapSize=shadow.mapSize,state.directionalShadow[directionalLength]=shadowUniforms,state.directionalShadowMap[directionalLength]=shadowMap,state.directionalShadowMatrix[directionalLength]=light.shadow.matrix,numDirectionalShadows++}state.directional[directionalLength]=uniforms,directionalLength++}else if(light.isSpotLight){const uniforms=cache.get(light);uniforms.position.setFromMatrixPosition(light.matrixWorld),uniforms.color.copy(color).multiplyScalar(intensity*scaleFactor),uniforms.distance=distance,uniforms.coneCos=Math.cos(light.angle),uniforms.penumbraCos=Math.cos(light.angle*(1-light.penumbra)),uniforms.decay=light.decay,state.spot[spotLength]=uniforms;const shadow=light.shadow;if(light.map&&(state.spotLightMap[numSpotMaps]=light.map,numSpotMaps++,shadow.updateMatrices(light),light.castShadow&&numSpotShadowsWithMaps++),state.spotLightMatrix[spotLength]=shadow.matrix,light.castShadow){const shadowUniforms=shadowCache.get(light);shadowUniforms.shadowBias=shadow.bias,shadowUniforms.shadowNormalBias=shadow.normalBias,shadowUniforms.shadowRadius=shadow.radius,shadowUniforms.shadowMapSize=shadow.mapSize,state.spotShadow[spotLength]=shadowUniforms,state.spotShadowMap[spotLength]=shadowMap,numSpotShadows++}spotLength++}else if(light.isRectAreaLight){const uniforms=cache.get(light);uniforms.color.copy(color).multiplyScalar(intensity),uniforms.halfWidth.set(.5*light.width,0,0),uniforms.halfHeight.set(0,.5*light.height,0),state.rectArea[rectAreaLength]=uniforms,rectAreaLength++}else if(light.isPointLight){const uniforms=cache.get(light);if(uniforms.color.copy(light.color).multiplyScalar(light.intensity*scaleFactor),uniforms.distance=light.distance,uniforms.decay=light.decay,light.castShadow){const shadow=light.shadow,shadowUniforms=shadowCache.get(light);shadowUniforms.shadowBias=shadow.bias,shadowUniforms.shadowNormalBias=shadow.normalBias,shadowUniforms.shadowRadius=shadow.radius,shadowUniforms.shadowMapSize=shadow.mapSize,shadowUniforms.shadowCameraNear=shadow.camera.near,shadowUniforms.shadowCameraFar=shadow.camera.far,state.pointShadow[pointLength]=shadowUniforms,state.pointShadowMap[pointLength]=shadowMap,state.pointShadowMatrix[pointLength]=light.shadow.matrix,numPointShadows++}state.point[pointLength]=uniforms,pointLength++}else if(light.isHemisphereLight){const uniforms=cache.get(light);uniforms.skyColor.copy(light.color).multiplyScalar(intensity*scaleFactor),uniforms.groundColor.copy(light.groundColor).multiplyScalar(intensity*scaleFactor),state.hemi[hemiLength]=uniforms,hemiLength++}}rectAreaLength>0&&(capabilities.isWebGL2||!0===extensions.has("OES_texture_float_linear")?(state.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,state.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):!0===extensions.has("OES_texture_half_float_linear")?(state.rectAreaLTC1=UniformsLib.LTC_HALF_1,state.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),state.ambient[0]=r,state.ambient[1]=g,state.ambient[2]=b;const hash=state.hash;(hash.directionalLength!==directionalLength||hash.pointLength!==pointLength||hash.spotLength!==spotLength||hash.rectAreaLength!==rectAreaLength||hash.hemiLength!==hemiLength||hash.numDirectionalShadows!==numDirectionalShadows||hash.numPointShadows!==numPointShadows||hash.numSpotShadows!==numSpotShadows||hash.numSpotMaps!==numSpotMaps)&&(state.directional.length=directionalLength,state.spot.length=spotLength,state.rectArea.length=rectAreaLength,state.point.length=pointLength,state.hemi.length=hemiLength,state.directionalShadow.length=numDirectionalShadows,state.directionalShadowMap.length=numDirectionalShadows,state.pointShadow.length=numPointShadows,state.pointShadowMap.length=numPointShadows,state.spotShadow.length=numSpotShadows,state.spotShadowMap.length=numSpotShadows,state.directionalShadowMatrix.length=numDirectionalShadows,state.pointShadowMatrix.length=numPointShadows,state.spotLightMatrix.length=numSpotShadows+numSpotMaps-numSpotShadowsWithMaps,state.spotLightMap.length=numSpotMaps,state.numSpotLightShadowsWithMaps=numSpotShadowsWithMaps,hash.directionalLength=directionalLength,hash.pointLength=pointLength,hash.spotLength=spotLength,hash.rectAreaLength=rectAreaLength,hash.hemiLength=hemiLength,hash.numDirectionalShadows=numDirectionalShadows,hash.numPointShadows=numPointShadows,hash.numSpotShadows=numSpotShadows,hash.numSpotMaps=numSpotMaps,state.version=nextVersion++)}function setupView(lights,camera){let directionalLength=0,pointLength=0,spotLength=0,rectAreaLength=0,hemiLength=0;const viewMatrix=camera.matrixWorldInverse;for(let i=0,l=lights.length;i<l;i++){const light=lights[i];if(light.isDirectionalLight){const uniforms=state.directional[directionalLength];uniforms.direction.setFromMatrixPosition(light.matrixWorld),vector3.setFromMatrixPosition(light.target.matrixWorld),uniforms.direction.sub(vector3),uniforms.direction.transformDirection(viewMatrix),directionalLength++}else if(light.isSpotLight){const uniforms=state.spot[spotLength];uniforms.position.setFromMatrixPosition(light.matrixWorld),uniforms.position.applyMatrix4(viewMatrix),uniforms.direction.setFromMatrixPosition(light.matrixWorld),vector3.setFromMatrixPosition(light.target.matrixWorld),uniforms.direction.sub(vector3),uniforms.direction.transformDirection(viewMatrix),spotLength++}else if(light.isRectAreaLight){const uniforms=state.rectArea[rectAreaLength];uniforms.position.setFromMatrixPosition(light.matrixWorld),uniforms.position.applyMatrix4(viewMatrix),matrix42.identity(),matrix4.copy(light.matrixWorld),matrix4.premultiply(viewMatrix),matrix42.extractRotation(matrix4),uniforms.halfWidth.set(.5*light.width,0,0),uniforms.halfHeight.set(0,.5*light.height,0),uniforms.halfWidth.applyMatrix4(matrix42),uniforms.halfHeight.applyMatrix4(matrix42),rectAreaLength++}else if(light.isPointLight){const uniforms=state.point[pointLength];uniforms.position.setFromMatrixPosition(light.matrixWorld),uniforms.position.applyMatrix4(viewMatrix),pointLength++}else if(light.isHemisphereLight){const uniforms=state.hemi[hemiLength];uniforms.direction.setFromMatrixPosition(light.matrixWorld),uniforms.direction.transformDirection(viewMatrix),hemiLength++}}}return __name(setup,"setup"),__name(setupView,"setupView"),{setup,setupView,state}}function WebGLRenderState(extensions,capabilities){const lights=new WebGLLights(extensions,capabilities),lightsArray=[],shadowsArray=[];function init(){lightsArray.length=0,shadowsArray.length=0}function pushLight(light){lightsArray.push(light)}function pushShadow(shadowLight){shadowsArray.push(shadowLight)}function setupLights(physicallyCorrectLights){lights.setup(lightsArray,physicallyCorrectLights)}function setupLightsView(camera){lights.setupView(lightsArray,camera)}return __name(init,"init"),__name(pushLight,"pushLight"),__name(pushShadow,"pushShadow"),__name(setupLights,"setupLights"),__name(setupLightsView,"setupLightsView"),{init,state:{lightsArray,shadowsArray,lights},setupLights,setupLightsView,pushLight,pushShadow}}function WebGLRenderStates(extensions,capabilities){let renderStates=new WeakMap;function get(scene,renderCallDepth=0){const renderStateArray=renderStates.get(scene);let renderState;return void 0===renderStateArray?(renderState=new WebGLRenderState(extensions,capabilities),renderStates.set(scene,[renderState])):renderCallDepth>=renderStateArray.length?(renderState=new WebGLRenderState(extensions,capabilities),renderStateArray.push(renderState)):renderState=renderStateArray[renderCallDepth],renderState}function dispose(){renderStates=new WeakMap}return __name(get,"get"),__name(dispose,"dispose"),{get,dispose}}__name(shadowCastingAndTexturingLightsFirst,"shadowCastingAndTexturingLightsFirst"),__name(WebGLLights,"WebGLLights"),__name(WebGLRenderState,"WebGLRenderState"),__name(WebGLRenderStates,"WebGLRenderStates");class MeshDepthMaterial extends Material.F{constructor(parameters){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=constants.z81,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(parameters)}copy(source){return super.copy(source),this.depthPacking=source.depthPacking,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this}}__name(MeshDepthMaterial,"MeshDepthMaterial");class MeshDistanceMaterial extends Material.F{constructor(parameters){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector32.P,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(parameters)}copy(source){return super.copy(source),this.referencePosition.copy(source.referencePosition),this.nearDistance=source.nearDistance,this.farDistance=source.farDistance,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this}}__name(MeshDistanceMaterial,"MeshDistanceMaterial");const vsm_glsl_vertex="\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",vsm_glsl_fragment="\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n\tconst float samples = float( VSM_SAMPLES );\n\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\n\t\t#ifdef HORIZONTAL_PASS\n\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n\t\t#else\n\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\n\t\t#endif\n\n\t}\n\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n";function WebGLShadowMap(_renderer,_objects,_capabilities){let _frustum=new Frustum;const _shadowMapSize=new Vector22.F,_viewportSize=new Vector22.F,_viewport=new Vector4.L,_depthMaterial=new MeshDepthMaterial({depthPacking:constants.mSO}),_distanceMaterial=new MeshDistanceMaterial,_materialCache={},_maxTextureSize=_capabilities.maxTextureSize,shadowSide={0:constants._Li,1:constants.Wl3,2:constants.ehD},shadowMaterialVertical=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector22.F},radius:{value:4}},vertexShader:vsm_glsl_vertex,fragmentShader:vsm_glsl_fragment}),shadowMaterialHorizontal=shadowMaterialVertical.clone();shadowMaterialHorizontal.defines.HORIZONTAL_PASS=1;const fullScreenTri=new BufferGeometry.u;fullScreenTri.setAttribute("position",new BufferAttribute.Tl(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const fullScreenMesh=new Mesh2.K(fullScreenTri,shadowMaterialVertical),scope=this;function VSMPass(shadow,camera){const geometry=_objects.update(fullScreenMesh);shadowMaterialVertical.defines.VSM_SAMPLES!==shadow.blurSamples&&(shadowMaterialVertical.defines.VSM_SAMPLES=shadow.blurSamples,shadowMaterialHorizontal.defines.VSM_SAMPLES=shadow.blurSamples,shadowMaterialVertical.needsUpdate=!0,shadowMaterialHorizontal.needsUpdate=!0),null===shadow.mapPass&&(shadow.mapPass=new WebGLRenderTarget(_shadowMapSize.x,_shadowMapSize.y)),shadowMaterialVertical.uniforms.shadow_pass.value=shadow.map.texture,shadowMaterialVertical.uniforms.resolution.value=shadow.mapSize,shadowMaterialVertical.uniforms.radius.value=shadow.radius,_renderer.setRenderTarget(shadow.mapPass),_renderer.clear(),_renderer.renderBufferDirect(camera,null,geometry,shadowMaterialVertical,fullScreenMesh,null),shadowMaterialHorizontal.uniforms.shadow_pass.value=shadow.mapPass.texture,shadowMaterialHorizontal.uniforms.resolution.value=shadow.mapSize,shadowMaterialHorizontal.uniforms.radius.value=shadow.radius,_renderer.setRenderTarget(shadow.map),_renderer.clear(),_renderer.renderBufferDirect(camera,null,geometry,shadowMaterialHorizontal,fullScreenMesh,null)}function getDepthMaterial(object,material,light,shadowCameraNear,shadowCameraFar,type){let result=null;const customMaterial=!0===light.isPointLight?object.customDistanceMaterial:object.customDepthMaterial;if(void 0!==customMaterial)result=customMaterial;else if(result=!0===light.isPointLight?_distanceMaterial:_depthMaterial,_renderer.localClippingEnabled&&!0===material.clipShadows&&Array.isArray(material.clippingPlanes)&&0!==material.clippingPlanes.length||material.displacementMap&&0!==material.displacementScale||material.alphaMap&&material.alphaTest>0||material.map&&material.alphaTest>0){const keyA=result.uuid,keyB=material.uuid;let materialsForVariant=_materialCache[keyA];void 0===materialsForVariant&&(materialsForVariant={},_materialCache[keyA]=materialsForVariant);let cachedMaterial=materialsForVariant[keyB];void 0===cachedMaterial&&(cachedMaterial=result.clone(),materialsForVariant[keyB]=cachedMaterial),result=cachedMaterial}return result.visible=material.visible,result.wireframe=material.wireframe,result.side=type===constants.dwk?null!==material.shadowSide?material.shadowSide:material.side:null!==material.shadowSide?material.shadowSide:shadowSide[material.side],result.alphaMap=material.alphaMap,result.alphaTest=material.alphaTest,result.map=material.map,result.clipShadows=material.clipShadows,result.clippingPlanes=material.clippingPlanes,result.clipIntersection=material.clipIntersection,result.displacementMap=material.displacementMap,result.displacementScale=material.displacementScale,result.displacementBias=material.displacementBias,result.wireframeLinewidth=material.wireframeLinewidth,result.linewidth=material.linewidth,!0===light.isPointLight&&!0===result.isMeshDistanceMaterial&&(result.referencePosition.setFromMatrixPosition(light.matrixWorld),result.nearDistance=shadowCameraNear,result.farDistance=shadowCameraFar),result}function renderObject(object,camera,shadowCamera,light,type){if(!1===object.visible)return;if(object.layers.test(camera.layers)&&(object.isMesh||object.isLine||object.isPoints)&&(object.castShadow||object.receiveShadow&&type===constants.dwk)&&(!object.frustumCulled||_frustum.intersectsObject(object))){object.modelViewMatrix.multiplyMatrices(shadowCamera.matrixWorldInverse,object.matrixWorld);const geometry=_objects.update(object),material=object.material;if(Array.isArray(material)){const groups=geometry.groups;for(let k=0,kl=groups.length;k<kl;k++){const group=groups[k],groupMaterial=material[group.materialIndex];if(groupMaterial&&groupMaterial.visible){const depthMaterial=getDepthMaterial(object,groupMaterial,light,shadowCamera.near,shadowCamera.far,type);_renderer.renderBufferDirect(shadowCamera,null,geometry,depthMaterial,object,group)}}}else if(material.visible){const depthMaterial=getDepthMaterial(object,material,light,shadowCamera.near,shadowCamera.far,type);_renderer.renderBufferDirect(shadowCamera,null,geometry,depthMaterial,object,null)}}const children=object.children;for(let i=0,l=children.length;i<l;i++)renderObject(children[i],camera,shadowCamera,light,type)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=constants._iA,this.render=function(lights,scene,camera){if(!1===scope.enabled||!1===scope.autoUpdate&&!1===scope.needsUpdate||0===lights.length)return;const currentRenderTarget=_renderer.getRenderTarget(),activeCubeFace=_renderer.getActiveCubeFace(),activeMipmapLevel=_renderer.getActiveMipmapLevel(),_state=_renderer.state;_state.setBlending(constants.jFi),_state.buffers.color.setClear(1,1,1,1),_state.buffers.depth.setTest(!0),_state.setScissorTest(!1);for(let i=0,il=lights.length;i<il;i++){const light=lights[i],shadow=light.shadow;if(void 0===shadow){console.warn("THREE.WebGLShadowMap:",light,"has no shadow.");continue}if(!1===shadow.autoUpdate&&!1===shadow.needsUpdate)continue;_shadowMapSize.copy(shadow.mapSize);const shadowFrameExtents=shadow.getFrameExtents();_shadowMapSize.multiply(shadowFrameExtents),_viewportSize.copy(shadow.mapSize),(_shadowMapSize.x>_maxTextureSize||_shadowMapSize.y>_maxTextureSize)&&(_shadowMapSize.x>_maxTextureSize&&(_viewportSize.x=Math.floor(_maxTextureSize/shadowFrameExtents.x),_shadowMapSize.x=_viewportSize.x*shadowFrameExtents.x,shadow.mapSize.x=_viewportSize.x),_shadowMapSize.y>_maxTextureSize&&(_viewportSize.y=Math.floor(_maxTextureSize/shadowFrameExtents.y),_shadowMapSize.y=_viewportSize.y*shadowFrameExtents.y,shadow.mapSize.y=_viewportSize.y)),null===shadow.map&&(shadow.map=new WebGLRenderTarget(_shadowMapSize.x,_shadowMapSize.y,this.type!==constants.dwk?{minFilter:constants.TyD,magFilter:constants.TyD}:{}),shadow.map.texture.name=light.name+".shadowMap",shadow.camera.updateProjectionMatrix()),_renderer.setRenderTarget(shadow.map),_renderer.clear();const viewportCount=shadow.getViewportCount();for(let vp=0;vp<viewportCount;vp++){const viewport=shadow.getViewport(vp);_viewport.set(_viewportSize.x*viewport.x,_viewportSize.y*viewport.y,_viewportSize.x*viewport.z,_viewportSize.y*viewport.w),_state.viewport(_viewport),shadow.updateMatrices(light,vp),_frustum=shadow.getFrustum(),renderObject(scene,camera,shadow.camera,light,this.type)}!0!==shadow.isPointLightShadow&&this.type===constants.dwk&&VSMPass(shadow,camera),shadow.needsUpdate=!1}scope.needsUpdate=!1,_renderer.setRenderTarget(currentRenderTarget,activeCubeFace,activeMipmapLevel)},__name(VSMPass,"VSMPass"),__name(getDepthMaterial,"getDepthMaterial"),__name(renderObject,"renderObject")}function WebGLState(gl,extensions,capabilities){const isWebGL2=capabilities.isWebGL2;function ColorBuffer(){let locked=!1;const color=new Vector4.L;let currentColorMask=null;const currentColorClear=new Vector4.L(0,0,0,0);return{setMask:function(colorMask){currentColorMask!==colorMask&&!locked&&(gl.colorMask(colorMask,colorMask,colorMask,colorMask),currentColorMask=colorMask)},setLocked:function(lock){locked=lock},setClear:function(r,g,b,a,premultipliedAlpha){!0===premultipliedAlpha&&(r*=a,g*=a,b*=a),color.set(r,g,b,a),!1===currentColorClear.equals(color)&&(gl.clearColor(r,g,b,a),currentColorClear.copy(color))},reset:function(){locked=!1,currentColorMask=null,currentColorClear.set(-1,0,0,0)}}}function DepthBuffer(){let locked=!1,currentDepthMask=null,currentDepthFunc=null,currentDepthClear=null;return{setTest:function(depthTest){depthTest?enable(gl.DEPTH_TEST):disable(gl.DEPTH_TEST)},setMask:function(depthMask){currentDepthMask!==depthMask&&!locked&&(gl.depthMask(depthMask),currentDepthMask=depthMask)},setFunc:function(depthFunc){if(currentDepthFunc!==depthFunc){switch(depthFunc){case constants.BVF:gl.depthFunc(gl.NEVER);break;case constants.Se2:gl.depthFunc(gl.ALWAYS);break;case constants.Zr5:gl.depthFunc(gl.LESS);break;case constants.vCF:gl.depthFunc(gl.LEQUAL);break;case constants.eD:gl.depthFunc(gl.EQUAL);break;case constants.ksN:gl.depthFunc(gl.GEQUAL);break;case constants.w$m:gl.depthFunc(gl.GREATER);break;case constants.M6v:gl.depthFunc(gl.NOTEQUAL);break;default:gl.depthFunc(gl.LEQUAL)}currentDepthFunc=depthFunc}},setLocked:function(lock){locked=lock},setClear:function(depth){currentDepthClear!==depth&&(gl.clearDepth(depth),currentDepthClear=depth)},reset:function(){locked=!1,currentDepthMask=null,currentDepthFunc=null,currentDepthClear=null}}}function StencilBuffer(){let locked=!1,currentStencilMask=null,currentStencilFunc=null,currentStencilRef=null,currentStencilFuncMask=null,currentStencilFail=null,currentStencilZFail=null,currentStencilZPass=null,currentStencilClear=null;return{setTest:function(stencilTest){locked||(stencilTest?enable(gl.STENCIL_TEST):disable(gl.STENCIL_TEST))},setMask:function(stencilMask){currentStencilMask!==stencilMask&&!locked&&(gl.stencilMask(stencilMask),currentStencilMask=stencilMask)},setFunc:function(stencilFunc,stencilRef,stencilMask){(currentStencilFunc!==stencilFunc||currentStencilRef!==stencilRef||currentStencilFuncMask!==stencilMask)&&(gl.stencilFunc(stencilFunc,stencilRef,stencilMask),currentStencilFunc=stencilFunc,currentStencilRef=stencilRef,currentStencilFuncMask=stencilMask)},setOp:function(stencilFail,stencilZFail,stencilZPass){(currentStencilFail!==stencilFail||currentStencilZFail!==stencilZFail||currentStencilZPass!==stencilZPass)&&(gl.stencilOp(stencilFail,stencilZFail,stencilZPass),currentStencilFail=stencilFail,currentStencilZFail=stencilZFail,currentStencilZPass=stencilZPass)},setLocked:function(lock){locked=lock},setClear:function(stencil){currentStencilClear!==stencil&&(gl.clearStencil(stencil),currentStencilClear=stencil)},reset:function(){locked=!1,currentStencilMask=null,currentStencilFunc=null,currentStencilRef=null,currentStencilFuncMask=null,currentStencilFail=null,currentStencilZFail=null,currentStencilZPass=null,currentStencilClear=null}}}__name(ColorBuffer,"ColorBuffer"),__name(DepthBuffer,"DepthBuffer"),__name(StencilBuffer,"StencilBuffer");const colorBuffer=new ColorBuffer,depthBuffer=new DepthBuffer,stencilBuffer=new StencilBuffer,uboBindings=new WeakMap,uboProgramMap=new WeakMap;let enabledCapabilities={},currentBoundFramebuffers={},currentDrawbuffers=new WeakMap,defaultDrawbuffers=[],currentProgram=null,currentBlendingEnabled=!1,currentBlending=null,currentBlendEquation=null,currentBlendSrc=null,currentBlendDst=null,currentBlendEquationAlpha=null,currentBlendSrcAlpha=null,currentBlendDstAlpha=null,currentPremultipledAlpha=!1,currentFlipSided=null,currentCullFace=null,currentLineWidth=null,currentPolygonOffsetFactor=null,currentPolygonOffsetUnits=null;const maxTextures=gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let lineWidthAvailable=!1,version=0;const glVersion=gl.getParameter(gl.VERSION);-1!==glVersion.indexOf("WebGL")?(version=parseFloat(/^WebGL (\d)/.exec(glVersion)[1]),lineWidthAvailable=version>=1):-1!==glVersion.indexOf("OpenGL ES")&&(version=parseFloat(/^OpenGL ES (\d)/.exec(glVersion)[1]),lineWidthAvailable=version>=2);let currentTextureSlot=null,currentBoundTextures={};const scissorParam=gl.getParameter(gl.SCISSOR_BOX),viewportParam=gl.getParameter(gl.VIEWPORT),currentScissor=(new Vector4.L).fromArray(scissorParam),currentViewport=(new Vector4.L).fromArray(viewportParam);function createTexture(type,target,count){const data=new Uint8Array(4),texture=gl.createTexture();gl.bindTexture(type,texture),gl.texParameteri(type,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(type,gl.TEXTURE_MAG_FILTER,gl.NEAREST);for(let i=0;i<count;i++)gl.texImage2D(target+i,0,gl.RGBA,1,1,0,gl.RGBA,gl.UNSIGNED_BYTE,data);return texture}__name(createTexture,"createTexture");const emptyTextures={};function enable(id){!0!==enabledCapabilities[id]&&(gl.enable(id),enabledCapabilities[id]=!0)}function disable(id){!1!==enabledCapabilities[id]&&(gl.disable(id),enabledCapabilities[id]=!1)}function bindFramebuffer(target,framebuffer){return currentBoundFramebuffers[target]!==framebuffer&&(gl.bindFramebuffer(target,framebuffer),currentBoundFramebuffers[target]=framebuffer,isWebGL2&&(target===gl.DRAW_FRAMEBUFFER&&(currentBoundFramebuffers[gl.FRAMEBUFFER]=framebuffer),target===gl.FRAMEBUFFER&&(currentBoundFramebuffers[gl.DRAW_FRAMEBUFFER]=framebuffer)),!0)}function drawBuffers(renderTarget,framebuffer){let drawBuffers2=defaultDrawbuffers,needsUpdate=!1;if(renderTarget)if(drawBuffers2=currentDrawbuffers.get(framebuffer),void 0===drawBuffers2&&(drawBuffers2=[],currentDrawbuffers.set(framebuffer,drawBuffers2)),renderTarget.isWebGLMultipleRenderTargets){const textures=renderTarget.texture;if(drawBuffers2.length!==textures.length||drawBuffers2[0]!==gl.COLOR_ATTACHMENT0){for(let i=0,il=textures.length;i<il;i++)drawBuffers2[i]=gl.COLOR_ATTACHMENT0+i;drawBuffers2.length=textures.length,needsUpdate=!0}}else drawBuffers2[0]!==gl.COLOR_ATTACHMENT0&&(drawBuffers2[0]=gl.COLOR_ATTACHMENT0,needsUpdate=!0);else drawBuffers2[0]!==gl.BACK&&(drawBuffers2[0]=gl.BACK,needsUpdate=!0);needsUpdate&&(capabilities.isWebGL2?gl.drawBuffers(drawBuffers2):extensions.get("WEBGL_draw_buffers").drawBuffersWEBGL(drawBuffers2))}function useProgram(program){return currentProgram!==program&&(gl.useProgram(program),currentProgram=program,!0)}emptyTextures[gl.TEXTURE_2D]=createTexture(gl.TEXTURE_2D,gl.TEXTURE_2D,1),emptyTextures[gl.TEXTURE_CUBE_MAP]=createTexture(gl.TEXTURE_CUBE_MAP,gl.TEXTURE_CUBE_MAP_POSITIVE_X,6),colorBuffer.setClear(0,0,0,1),depthBuffer.setClear(1),stencilBuffer.setClear(0),enable(gl.DEPTH_TEST),depthBuffer.setFunc(constants.vCF),setFlipSided(!1),setCullFace(constants.tm_),enable(gl.CULL_FACE),setBlending(constants.jFi),__name(enable,"enable"),__name(disable,"disable"),__name(bindFramebuffer,"bindFramebuffer"),__name(drawBuffers,"drawBuffers"),__name(useProgram,"useProgram");const equationToGL={[constants.bGH]:gl.FUNC_ADD,[constants.Wbm]:gl.FUNC_SUBTRACT,[constants.rOj]:gl.FUNC_REVERSE_SUBTRACT};if(isWebGL2)equationToGL[constants.r_]=gl.MIN,equationToGL[constants.Sm8]=gl.MAX;else{const extension=extensions.get("EXT_blend_minmax");null!==extension&&(equationToGL[constants.r_]=extension.MIN_EXT,equationToGL[constants.Sm8]=extension.MAX_EXT)}const factorToGL={[constants.c8b]:gl.ZERO,[constants.ghN]:gl.ONE,[constants.KhW]:gl.SRC_COLOR,[constants.k74]:gl.SRC_ALPHA,[constants.RlZ]:gl.SRC_ALPHA_SATURATE,[constants.Vdb]:gl.DST_COLOR,[constants.fSK]:gl.DST_ALPHA,[constants.iWC]:gl.ONE_MINUS_SRC_COLOR,[constants.LgZ]:gl.ONE_MINUS_SRC_ALPHA,[constants.Wpd]:gl.ONE_MINUS_DST_COLOR,[constants.Hy8]:gl.ONE_MINUS_DST_ALPHA};function setBlending(blending,blendEquation,blendSrc,blendDst,blendEquationAlpha,blendSrcAlpha,blendDstAlpha,premultipliedAlpha){if(blending!==constants.jFi){if(!1===currentBlendingEnabled&&(enable(gl.BLEND),currentBlendingEnabled=!0),blending===constants.Xaj)blendEquationAlpha=blendEquationAlpha||blendEquation,blendSrcAlpha=blendSrcAlpha||blendSrc,blendDstAlpha=blendDstAlpha||blendDst,(blendEquation!==currentBlendEquation||blendEquationAlpha!==currentBlendEquationAlpha)&&(gl.blendEquationSeparate(equationToGL[blendEquation],equationToGL[blendEquationAlpha]),currentBlendEquation=blendEquation,currentBlendEquationAlpha=blendEquationAlpha),(blendSrc!==currentBlendSrc||blendDst!==currentBlendDst||blendSrcAlpha!==currentBlendSrcAlpha||blendDstAlpha!==currentBlendDstAlpha)&&(gl.blendFuncSeparate(factorToGL[blendSrc],factorToGL[blendDst],factorToGL[blendSrcAlpha],factorToGL[blendDstAlpha]),currentBlendSrc=blendSrc,currentBlendDst=blendDst,currentBlendSrcAlpha=blendSrcAlpha,currentBlendDstAlpha=blendDstAlpha),currentBlending=blending,currentPremultipledAlpha=!1;else if(blending!==currentBlending||premultipliedAlpha!==currentPremultipledAlpha){if((currentBlendEquation!==constants.bGH||currentBlendEquationAlpha!==constants.bGH)&&(gl.blendEquation(gl.FUNC_ADD),currentBlendEquation=constants.bGH,currentBlendEquationAlpha=constants.bGH),premultipliedAlpha)switch(blending){case constants.bdR:gl.blendFuncSeparate(gl.ONE,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA);break;case constants.WMw:gl.blendFunc(gl.ONE,gl.ONE);break;case constants.N4l:gl.blendFuncSeparate(gl.ZERO,gl.ONE_MINUS_SRC_COLOR,gl.ZERO,gl.ONE);break;case constants.M5h:gl.blendFuncSeparate(gl.ZERO,gl.SRC_COLOR,gl.ZERO,gl.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",blending)}else switch(blending){case constants.bdR:gl.blendFuncSeparate(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA);break;case constants.WMw:gl.blendFunc(gl.SRC_ALPHA,gl.ONE);break;case constants.N4l:gl.blendFuncSeparate(gl.ZERO,gl.ONE_MINUS_SRC_COLOR,gl.ZERO,gl.ONE);break;case constants.M5h:gl.blendFunc(gl.ZERO,gl.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",blending)}currentBlendSrc=null,currentBlendDst=null,currentBlendSrcAlpha=null,currentBlendDstAlpha=null,currentBlending=blending,currentPremultipledAlpha=premultipliedAlpha}}else!0===currentBlendingEnabled&&(disable(gl.BLEND),currentBlendingEnabled=!1)}function setMaterial(material,frontFaceCW){material.side===constants.ehD?disable(gl.CULL_FACE):enable(gl.CULL_FACE);let flipSided=material.side===constants._Li;frontFaceCW&&(flipSided=!flipSided),setFlipSided(flipSided),material.blending===constants.bdR&&!1===material.transparent?setBlending(constants.jFi):setBlending(material.blending,material.blendEquation,material.blendSrc,material.blendDst,material.blendEquationAlpha,material.blendSrcAlpha,material.blendDstAlpha,material.premultipliedAlpha),depthBuffer.setFunc(material.depthFunc),depthBuffer.setTest(material.depthTest),depthBuffer.setMask(material.depthWrite),colorBuffer.setMask(material.colorWrite);const stencilWrite=material.stencilWrite;stencilBuffer.setTest(stencilWrite),stencilWrite&&(stencilBuffer.setMask(material.stencilWriteMask),stencilBuffer.setFunc(material.stencilFunc,material.stencilRef,material.stencilFuncMask),stencilBuffer.setOp(material.stencilFail,material.stencilZFail,material.stencilZPass)),setPolygonOffset(material.polygonOffset,material.polygonOffsetFactor,material.polygonOffsetUnits),!0===material.alphaToCoverage?enable(gl.SAMPLE_ALPHA_TO_COVERAGE):disable(gl.SAMPLE_ALPHA_TO_COVERAGE)}function setFlipSided(flipSided){currentFlipSided!==flipSided&&(gl.frontFace(flipSided?gl.CW:gl.CCW),currentFlipSided=flipSided)}function setCullFace(cullFace){cullFace!==constants.PeU?(enable(gl.CULL_FACE),cullFace!==currentCullFace&&gl.cullFace(cullFace===constants.tm_?gl.BACK:cullFace===constants.S2y?gl.FRONT:gl.FRONT_AND_BACK)):disable(gl.CULL_FACE),currentCullFace=cullFace}function setLineWidth(width){width!==currentLineWidth&&(lineWidthAvailable&&gl.lineWidth(width),currentLineWidth=width)}function setPolygonOffset(polygonOffset,factor,units){polygonOffset?(enable(gl.POLYGON_OFFSET_FILL),(currentPolygonOffsetFactor!==factor||currentPolygonOffsetUnits!==units)&&(gl.polygonOffset(factor,units),currentPolygonOffsetFactor=factor,currentPolygonOffsetUnits=units)):disable(gl.POLYGON_OFFSET_FILL)}function setScissorTest(scissorTest){scissorTest?enable(gl.SCISSOR_TEST):disable(gl.SCISSOR_TEST)}function activeTexture(webglSlot){void 0===webglSlot&&(webglSlot=gl.TEXTURE0+maxTextures-1),currentTextureSlot!==webglSlot&&(gl.activeTexture(webglSlot),currentTextureSlot=webglSlot)}function bindTexture(webglType,webglTexture,webglSlot){void 0===webglSlot&&(webglSlot=null===currentTextureSlot?gl.TEXTURE0+maxTextures-1:currentTextureSlot);let boundTexture=currentBoundTextures[webglSlot];void 0===boundTexture&&(boundTexture={type:void 0,texture:void 0},currentBoundTextures[webglSlot]=boundTexture),(boundTexture.type!==webglType||boundTexture.texture!==webglTexture)&&(currentTextureSlot!==webglSlot&&(gl.activeTexture(webglSlot),currentTextureSlot=webglSlot),gl.bindTexture(webglType,webglTexture||emptyTextures[webglType]),boundTexture.type=webglType,boundTexture.texture=webglTexture)}function unbindTexture(){const boundTexture=currentBoundTextures[currentTextureSlot];void 0!==boundTexture&&void 0!==boundTexture.type&&(gl.bindTexture(boundTexture.type,null),boundTexture.type=void 0,boundTexture.texture=void 0)}function compressedTexImage2D(){try{gl.compressedTexImage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function compressedTexImage3D(){try{gl.compressedTexImage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texSubImage2D(){try{gl.texSubImage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texSubImage3D(){try{gl.texSubImage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function compressedTexSubImage2D(){try{gl.compressedTexSubImage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function compressedTexSubImage3D(){try{gl.compressedTexSubImage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texStorage2D(){try{gl.texStorage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texStorage3D(){try{gl.texStorage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texImage2D(){try{gl.texImage2D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function texImage3D(){try{gl.texImage3D.apply(gl,arguments)}catch(error){console.error("THREE.WebGLState:",error)}}function scissor(scissor2){!1===currentScissor.equals(scissor2)&&(gl.scissor(scissor2.x,scissor2.y,scissor2.z,scissor2.w),currentScissor.copy(scissor2))}function viewport(viewport2){!1===currentViewport.equals(viewport2)&&(gl.viewport(viewport2.x,viewport2.y,viewport2.z,viewport2.w),currentViewport.copy(viewport2))}function updateUBOMapping(uniformsGroup,program){let mapping=uboProgramMap.get(program);void 0===mapping&&(mapping=new WeakMap,uboProgramMap.set(program,mapping));let blockIndex=mapping.get(uniformsGroup);void 0===blockIndex&&(blockIndex=gl.getUniformBlockIndex(program,uniformsGroup.name),mapping.set(uniformsGroup,blockIndex))}function uniformBlockBinding(uniformsGroup,program){const blockIndex=uboProgramMap.get(program).get(uniformsGroup);uboBindings.get(program)!==blockIndex&&(gl.uniformBlockBinding(program,blockIndex,uniformsGroup.__bindingPointIndex),uboBindings.set(program,blockIndex))}function reset(){gl.disable(gl.BLEND),gl.disable(gl.CULL_FACE),gl.disable(gl.DEPTH_TEST),gl.disable(gl.POLYGON_OFFSET_FILL),gl.disable(gl.SCISSOR_TEST),gl.disable(gl.STENCIL_TEST),gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE),gl.blendEquation(gl.FUNC_ADD),gl.blendFunc(gl.ONE,gl.ZERO),gl.blendFuncSeparate(gl.ONE,gl.ZERO,gl.ONE,gl.ZERO),gl.colorMask(!0,!0,!0,!0),gl.clearColor(0,0,0,0),gl.depthMask(!0),gl.depthFunc(gl.LESS),gl.clearDepth(1),gl.stencilMask(4294967295),gl.stencilFunc(gl.ALWAYS,0,4294967295),gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP),gl.clearStencil(0),gl.cullFace(gl.BACK),gl.frontFace(gl.CCW),gl.polygonOffset(0,0),gl.activeTexture(gl.TEXTURE0),gl.bindFramebuffer(gl.FRAMEBUFFER,null),!0===isWebGL2&&(gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER,null),gl.bindFramebuffer(gl.READ_FRAMEBUFFER,null)),gl.useProgram(null),gl.lineWidth(1),gl.scissor(0,0,gl.canvas.width,gl.canvas.height),gl.viewport(0,0,gl.canvas.width,gl.canvas.height),enabledCapabilities={},currentTextureSlot=null,currentBoundTextures={},currentBoundFramebuffers={},currentDrawbuffers=new WeakMap,defaultDrawbuffers=[],currentProgram=null,currentBlendingEnabled=!1,currentBlending=null,currentBlendEquation=null,currentBlendSrc=null,currentBlendDst=null,currentBlendEquationAlpha=null,currentBlendSrcAlpha=null,currentBlendDstAlpha=null,currentPremultipledAlpha=!1,currentFlipSided=null,currentCullFace=null,currentLineWidth=null,currentPolygonOffsetFactor=null,currentPolygonOffsetUnits=null,currentScissor.set(0,0,gl.canvas.width,gl.canvas.height),currentViewport.set(0,0,gl.canvas.width,gl.canvas.height),colorBuffer.reset(),depthBuffer.reset(),stencilBuffer.reset()}return __name(setBlending,"setBlending"),__name(setMaterial,"setMaterial"),__name(setFlipSided,"setFlipSided"),__name(setCullFace,"setCullFace"),__name(setLineWidth,"setLineWidth"),__name(setPolygonOffset,"setPolygonOffset"),__name(setScissorTest,"setScissorTest"),__name(activeTexture,"activeTexture"),__name(bindTexture,"bindTexture"),__name(unbindTexture,"unbindTexture"),__name(compressedTexImage2D,"compressedTexImage2D"),__name(compressedTexImage3D,"compressedTexImage3D"),__name(texSubImage2D,"texSubImage2D"),__name(texSubImage3D,"texSubImage3D"),__name(compressedTexSubImage2D,"compressedTexSubImage2D"),__name(compressedTexSubImage3D,"compressedTexSubImage3D"),__name(texStorage2D,"texStorage2D"),__name(texStorage3D,"texStorage3D"),__name(texImage2D,"texImage2D"),__name(texImage3D,"texImage3D"),__name(scissor,"scissor"),__name(viewport,"viewport"),__name(updateUBOMapping,"updateUBOMapping"),__name(uniformBlockBinding,"uniformBlockBinding"),__name(reset,"reset"),{buffers:{color:colorBuffer,depth:depthBuffer,stencil:stencilBuffer},enable,disable,bindFramebuffer,drawBuffers,useProgram,setBlending,setMaterial,setFlipSided,setCullFace,setLineWidth,setPolygonOffset,setScissorTest,activeTexture,bindTexture,unbindTexture,compressedTexImage2D,compressedTexImage3D,texImage2D,texImage3D,updateUBOMapping,uniformBlockBinding,texStorage2D,texStorage3D,texSubImage2D,texSubImage3D,compressedTexSubImage2D,compressedTexSubImage3D,scissor,viewport,reset}}__name(WebGLShadowMap,"WebGLShadowMap"),__name(WebGLState,"WebGLState");var ImageUtils=__webpack_require__(1423);function WebGLTextures(_gl,extensions,state,properties,capabilities,utils,info){const isWebGL2=capabilities.isWebGL2,maxTextures=capabilities.maxTextures,maxCubemapSize=capabilities.maxCubemapSize,maxTextureSize=capabilities.maxTextureSize,maxSamples=capabilities.maxSamples,multisampledRTTExt=extensions.has("WEBGL_multisampled_render_to_texture")?extensions.get("WEBGL_multisampled_render_to_texture"):null,supportsInvalidateFramebuffer=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),_videoTextures=new WeakMap;let _canvas;const _sources=new WeakMap;let useOffscreenCanvas=!1;try{useOffscreenCanvas=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function createCanvas(width,height){return useOffscreenCanvas?new OffscreenCanvas(width,height):(0,src_utils.c)("canvas")}function resizeImage(image,needsPowerOfTwo,needsNewCanvas,maxSize){let scale=1;if((image.width>maxSize||image.height>maxSize)&&(scale=maxSize/Math.max(image.width,image.height)),scale<1||!0===needsPowerOfTwo){if(typeof HTMLImageElement<"u"&&image instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&image instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&image instanceof ImageBitmap){const floor=needsPowerOfTwo?MathUtils.gy:Math.floor,width=floor(scale*image.width),height=floor(scale*image.height);void 0===_canvas&&(_canvas=createCanvas(width,height));const canvas=needsNewCanvas?createCanvas(width,height):_canvas;return canvas.width=width,canvas.height=height,canvas.getContext("2d").drawImage(image,0,0,width,height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+image.width+"x"+image.height+") to ("+width+"x"+height+")."),canvas}return"data"in image&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+image.width+"x"+image.height+")."),image}return image}function isPowerOfTwo(image){return MathUtils.wt(image.width)&&MathUtils.wt(image.height)}function textureNeedsPowerOfTwo(texture){return!isWebGL2&&(texture.wrapS!==constants.uWy||texture.wrapT!==constants.uWy||texture.minFilter!==constants.TyD&&texture.minFilter!==constants.wem)}function textureNeedsGenerateMipmaps(texture,supportsMips){return texture.generateMipmaps&&supportsMips&&texture.minFilter!==constants.TyD&&texture.minFilter!==constants.wem}function generateMipmap(target){_gl.generateMipmap(target)}function getInternalFormat(internalFormatName,glFormat,glType,encoding,forceLinearEncoding=!1){if(!1===isWebGL2)return glFormat;if(null!==internalFormatName){if(void 0!==_gl[internalFormatName])return _gl[internalFormatName];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+internalFormatName+"'")}let internalFormat=glFormat;return glFormat===_gl.RED&&(glType===_gl.FLOAT&&(internalFormat=_gl.R32F),glType===_gl.HALF_FLOAT&&(internalFormat=_gl.R16F),glType===_gl.UNSIGNED_BYTE&&(internalFormat=_gl.R8)),glFormat===_gl.RG&&(glType===_gl.FLOAT&&(internalFormat=_gl.RG32F),glType===_gl.HALF_FLOAT&&(internalFormat=_gl.RG16F),glType===_gl.UNSIGNED_BYTE&&(internalFormat=_gl.RG8)),glFormat===_gl.RGBA&&(glType===_gl.FLOAT&&(internalFormat=_gl.RGBA32F),glType===_gl.HALF_FLOAT&&(internalFormat=_gl.RGBA16F),glType===_gl.UNSIGNED_BYTE&&(internalFormat=encoding===constants.knz&&!1===forceLinearEncoding?_gl.SRGB8_ALPHA8:_gl.RGBA8),glType===_gl.UNSIGNED_SHORT_4_4_4_4&&(internalFormat=_gl.RGBA4),glType===_gl.UNSIGNED_SHORT_5_5_5_1&&(internalFormat=_gl.RGB5_A1)),(internalFormat===_gl.R16F||internalFormat===_gl.R32F||internalFormat===_gl.RG16F||internalFormat===_gl.RG32F||internalFormat===_gl.RGBA16F||internalFormat===_gl.RGBA32F)&&extensions.get("EXT_color_buffer_float"),internalFormat}function getMipLevels(texture,image,supportsMips){return!0===textureNeedsGenerateMipmaps(texture,supportsMips)||texture.isFramebufferTexture&&texture.minFilter!==constants.TyD&&texture.minFilter!==constants.wem?Math.log2(Math.max(image.width,image.height))+1:void 0!==texture.mipmaps&&texture.mipmaps.length>0?texture.mipmaps.length:texture.isCompressedTexture&&Array.isArray(texture.image)?image.mipmaps.length:1}function filterFallback(f){return f===constants.TyD||f===constants.YLQ||f===constants.aH4?_gl.NEAREST:_gl.LINEAR}function onTextureDispose(event){const texture=event.target;texture.removeEventListener("dispose",onTextureDispose),deallocateTexture(texture),texture.isVideoTexture&&_videoTextures.delete(texture)}function onRenderTargetDispose(event){const renderTarget=event.target;renderTarget.removeEventListener("dispose",onRenderTargetDispose),deallocateRenderTarget(renderTarget)}function deallocateTexture(texture){const textureProperties=properties.get(texture);if(void 0===textureProperties.__webglInit)return;const source=texture.source,webglTextures=_sources.get(source);if(webglTextures){const webglTexture=webglTextures[textureProperties.__cacheKey];webglTexture.usedTimes--,0===webglTexture.usedTimes&&deleteTexture(texture),0===Object.keys(webglTextures).length&&_sources.delete(source)}properties.remove(texture)}function deleteTexture(texture){const textureProperties=properties.get(texture);_gl.deleteTexture(textureProperties.__webglTexture),delete _sources.get(texture.source)[textureProperties.__cacheKey],info.memory.textures--}function deallocateRenderTarget(renderTarget){const texture=renderTarget.texture,renderTargetProperties=properties.get(renderTarget),textureProperties=properties.get(texture);if(void 0!==textureProperties.__webglTexture&&(_gl.deleteTexture(textureProperties.__webglTexture),info.memory.textures--),renderTarget.depthTexture&&renderTarget.depthTexture.dispose(),renderTarget.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)_gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer[i]),renderTargetProperties.__webglDepthbuffer&&_gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer[i]);else{if(_gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer),renderTargetProperties.__webglDepthbuffer&&_gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer),renderTargetProperties.__webglMultisampledFramebuffer&&_gl.deleteFramebuffer(renderTargetProperties.__webglMultisampledFramebuffer),renderTargetProperties.__webglColorRenderbuffer)for(let i=0;i<renderTargetProperties.__webglColorRenderbuffer.length;i++)renderTargetProperties.__webglColorRenderbuffer[i]&&_gl.deleteRenderbuffer(renderTargetProperties.__webglColorRenderbuffer[i]);renderTargetProperties.__webglDepthRenderbuffer&&_gl.deleteRenderbuffer(renderTargetProperties.__webglDepthRenderbuffer)}if(renderTarget.isWebGLMultipleRenderTargets)for(let i=0,il=texture.length;i<il;i++){const attachmentProperties=properties.get(texture[i]);attachmentProperties.__webglTexture&&(_gl.deleteTexture(attachmentProperties.__webglTexture),info.memory.textures--),properties.remove(texture[i])}properties.remove(texture),properties.remove(renderTarget)}__name(createCanvas,"createCanvas"),__name(resizeImage,"resizeImage"),__name(isPowerOfTwo,"isPowerOfTwo"),__name(textureNeedsPowerOfTwo,"textureNeedsPowerOfTwo"),__name(textureNeedsGenerateMipmaps,"textureNeedsGenerateMipmaps"),__name(generateMipmap,"generateMipmap"),__name(getInternalFormat,"getInternalFormat"),__name(getMipLevels,"getMipLevels"),__name(filterFallback,"filterFallback"),__name(onTextureDispose,"onTextureDispose"),__name(onRenderTargetDispose,"onRenderTargetDispose"),__name(deallocateTexture,"deallocateTexture"),__name(deleteTexture,"deleteTexture"),__name(deallocateRenderTarget,"deallocateRenderTarget");let textureUnits=0;function resetTextureUnits(){textureUnits=0}function allocateTextureUnit(){const textureUnit=textureUnits;return textureUnit>=maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+textureUnit+" texture units while this GPU supports only "+maxTextures),textureUnits+=1,textureUnit}function getTextureCacheKey(texture){const array=[];return array.push(texture.wrapS),array.push(texture.wrapT),array.push(texture.wrapR||0),array.push(texture.magFilter),array.push(texture.minFilter),array.push(texture.anisotropy),array.push(texture.internalFormat),array.push(texture.format),array.push(texture.type),array.push(texture.generateMipmaps),array.push(texture.premultiplyAlpha),array.push(texture.flipY),array.push(texture.unpackAlignment),array.push(texture.encoding),array.join()}function setTexture2D(texture,slot){const textureProperties=properties.get(texture);if(texture.isVideoTexture&&updateVideoTexture(texture),!1===texture.isRenderTargetTexture&&texture.version>0&&textureProperties.__version!==texture.version){const image=texture.image;if(null===image)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==image.complete)return void uploadTexture(textureProperties,texture,slot);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}state.bindTexture(_gl.TEXTURE_2D,textureProperties.__webglTexture,_gl.TEXTURE0+slot)}function setTexture2DArray(texture,slot){const textureProperties=properties.get(texture);texture.version>0&&textureProperties.__version!==texture.version?uploadTexture(textureProperties,texture,slot):state.bindTexture(_gl.TEXTURE_2D_ARRAY,textureProperties.__webglTexture,_gl.TEXTURE0+slot)}function setTexture3D(texture,slot){const textureProperties=properties.get(texture);texture.version>0&&textureProperties.__version!==texture.version?uploadTexture(textureProperties,texture,slot):state.bindTexture(_gl.TEXTURE_3D,textureProperties.__webglTexture,_gl.TEXTURE0+slot)}function setTextureCube(texture,slot){const textureProperties=properties.get(texture);texture.version>0&&textureProperties.__version!==texture.version?uploadCubeTexture(textureProperties,texture,slot):state.bindTexture(_gl.TEXTURE_CUBE_MAP,textureProperties.__webglTexture,_gl.TEXTURE0+slot)}__name(resetTextureUnits,"resetTextureUnits"),__name(allocateTextureUnit,"allocateTextureUnit"),__name(getTextureCacheKey,"getTextureCacheKey"),__name(setTexture2D,"setTexture2D"),__name(setTexture2DArray,"setTexture2DArray"),__name(setTexture3D,"setTexture3D"),__name(setTextureCube,"setTextureCube");const wrappingToGL={[constants.rpg]:_gl.REPEAT,[constants.uWy]:_gl.CLAMP_TO_EDGE,[constants.OoA]:_gl.MIRRORED_REPEAT},filterToGL={[constants.TyD]:_gl.NEAREST,[constants.YLQ]:_gl.NEAREST_MIPMAP_NEAREST,[constants.aH4]:_gl.NEAREST_MIPMAP_LINEAR,[constants.wem]:_gl.LINEAR,[constants.qyh]:_gl.LINEAR_MIPMAP_NEAREST,[constants.D1R]:_gl.LINEAR_MIPMAP_LINEAR};function setTextureParameters(textureType,texture,supportsMips){if(supportsMips?(_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_S,wrappingToGL[texture.wrapS]),_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_T,wrappingToGL[texture.wrapT]),(textureType===_gl.TEXTURE_3D||textureType===_gl.TEXTURE_2D_ARRAY)&&_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_R,wrappingToGL[texture.wrapR]),_gl.texParameteri(textureType,_gl.TEXTURE_MAG_FILTER,filterToGL[texture.magFilter]),_gl.texParameteri(textureType,_gl.TEXTURE_MIN_FILTER,filterToGL[texture.minFilter])):(_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_S,_gl.CLAMP_TO_EDGE),_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_T,_gl.CLAMP_TO_EDGE),(textureType===_gl.TEXTURE_3D||textureType===_gl.TEXTURE_2D_ARRAY)&&_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_R,_gl.CLAMP_TO_EDGE),(texture.wrapS!==constants.uWy||texture.wrapT!==constants.uWy)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_gl.texParameteri(textureType,_gl.TEXTURE_MAG_FILTER,filterFallback(texture.magFilter)),_gl.texParameteri(textureType,_gl.TEXTURE_MIN_FILTER,filterFallback(texture.minFilter)),texture.minFilter!==constants.TyD&&texture.minFilter!==constants.wem&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===extensions.has("EXT_texture_filter_anisotropic")){const extension=extensions.get("EXT_texture_filter_anisotropic");if(texture.magFilter===constants.TyD||texture.minFilter!==constants.aH4&&texture.minFilter!==constants.D1R||texture.type===constants.VzW&&!1===extensions.has("OES_texture_float_linear")||!1===isWebGL2&&texture.type===constants.cLu&&!1===extensions.has("OES_texture_half_float_linear"))return;(texture.anisotropy>1||properties.get(texture).__currentAnisotropy)&&(_gl.texParameterf(textureType,extension.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(texture.anisotropy,capabilities.getMaxAnisotropy())),properties.get(texture).__currentAnisotropy=texture.anisotropy)}}function initTexture(textureProperties,texture){let forceUpload=!1;void 0===textureProperties.__webglInit&&(textureProperties.__webglInit=!0,texture.addEventListener("dispose",onTextureDispose));const source=texture.source;let webglTextures=_sources.get(source);void 0===webglTextures&&(webglTextures={},_sources.set(source,webglTextures));const textureCacheKey=getTextureCacheKey(texture);if(textureCacheKey!==textureProperties.__cacheKey){void 0===webglTextures[textureCacheKey]&&(webglTextures[textureCacheKey]={texture:_gl.createTexture(),usedTimes:0},info.memory.textures++,forceUpload=!0),webglTextures[textureCacheKey].usedTimes++;const webglTexture=webglTextures[textureProperties.__cacheKey];void 0!==webglTexture&&(webglTextures[textureProperties.__cacheKey].usedTimes--,0===webglTexture.usedTimes&&deleteTexture(texture)),textureProperties.__cacheKey=textureCacheKey,textureProperties.__webglTexture=webglTextures[textureCacheKey].texture}return forceUpload}function uploadTexture(textureProperties,texture,slot){let textureType=_gl.TEXTURE_2D;(texture.isDataArrayTexture||texture.isCompressedArrayTexture)&&(textureType=_gl.TEXTURE_2D_ARRAY),texture.isData3DTexture&&(textureType=_gl.TEXTURE_3D);const forceUpload=initTexture(textureProperties,texture),source=texture.source;state.bindTexture(textureType,textureProperties.__webglTexture,_gl.TEXTURE0+slot);const sourceProperties=properties.get(source);if(source.version!==sourceProperties.__version||!0===forceUpload){state.activeTexture(_gl.TEXTURE0+slot),_gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL,texture.flipY),_gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultiplyAlpha),_gl.pixelStorei(_gl.UNPACK_ALIGNMENT,texture.unpackAlignment),_gl.pixelStorei(_gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,_gl.NONE);const needsPowerOfTwo=textureNeedsPowerOfTwo(texture)&&!1===isPowerOfTwo(texture.image);let image=resizeImage(texture.image,needsPowerOfTwo,!1,maxTextureSize);image=verifyColorSpace(texture,image);const supportsMips=isPowerOfTwo(image)||isWebGL2,glFormat=utils.convert(texture.format,texture.encoding);let mipmap,glType=utils.convert(texture.type),glInternalFormat=getInternalFormat(texture.internalFormat,glFormat,glType,texture.encoding,texture.isVideoTexture);setTextureParameters(textureType,texture,supportsMips);const mipmaps=texture.mipmaps,useTexStorage=isWebGL2&&!0!==texture.isVideoTexture,allocateMemory=void 0===sourceProperties.__version||!0===forceUpload,levels=getMipLevels(texture,image,supportsMips);if(texture.isDepthTexture)glInternalFormat=_gl.DEPTH_COMPONENT,isWebGL2?glInternalFormat=texture.type===constants.VzW?_gl.DEPTH_COMPONENT32F:texture.type===constants.JQ4?_gl.DEPTH_COMPONENT24:texture.type===constants.wJv?_gl.DEPTH24_STENCIL8:_gl.DEPTH_COMPONENT16:texture.type===constants.VzW&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),texture.format===constants.qkB&&glInternalFormat===_gl.DEPTH_COMPONENT&&texture.type!==constants.LsT&&texture.type!==constants.JQ4&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),texture.type=constants.JQ4,glType=utils.convert(texture.type)),texture.format===constants.brP&&glInternalFormat===_gl.DEPTH_COMPONENT&&(glInternalFormat=_gl.DEPTH_STENCIL,texture.type!==constants.wJv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),texture.type=constants.wJv,glType=utils.convert(texture.type))),allocateMemory&&(useTexStorage?state.texStorage2D(_gl.TEXTURE_2D,1,glInternalFormat,image.width,image.height):state.texImage2D(_gl.TEXTURE_2D,0,glInternalFormat,image.width,image.height,0,glFormat,glType,null));else if(texture.isDataTexture)if(mipmaps.length>0&&supportsMips){useTexStorage&&allocateMemory&&state.texStorage2D(_gl.TEXTURE_2D,levels,glInternalFormat,mipmaps[0].width,mipmaps[0].height);for(let i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],useTexStorage?state.texSubImage2D(_gl.TEXTURE_2D,i,0,0,mipmap.width,mipmap.height,glFormat,glType,mipmap.data):state.texImage2D(_gl.TEXTURE_2D,i,glInternalFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data);texture.generateMipmaps=!1}else useTexStorage?(allocateMemory&&state.texStorage2D(_gl.TEXTURE_2D,levels,glInternalFormat,image.width,image.height),state.texSubImage2D(_gl.TEXTURE_2D,0,0,0,image.width,image.height,glFormat,glType,image.data)):state.texImage2D(_gl.TEXTURE_2D,0,glInternalFormat,image.width,image.height,0,glFormat,glType,image.data);else if(texture.isCompressedTexture)if(texture.isCompressedArrayTexture){useTexStorage&&allocateMemory&&state.texStorage3D(_gl.TEXTURE_2D_ARRAY,levels,glInternalFormat,mipmaps[0].width,mipmaps[0].height,image.depth);for(let i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],texture.format!==constants.wk1?null!==glFormat?useTexStorage?state.compressedTexSubImage3D(_gl.TEXTURE_2D_ARRAY,i,0,0,0,mipmap.width,mipmap.height,image.depth,glFormat,mipmap.data,0,0):state.compressedTexImage3D(_gl.TEXTURE_2D_ARRAY,i,glInternalFormat,mipmap.width,mipmap.height,image.depth,0,mipmap.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):useTexStorage?state.texSubImage3D(_gl.TEXTURE_2D_ARRAY,i,0,0,0,mipmap.width,mipmap.height,image.depth,glFormat,glType,mipmap.data):state.texImage3D(_gl.TEXTURE_2D_ARRAY,i,glInternalFormat,mipmap.width,mipmap.height,image.depth,0,glFormat,glType,mipmap.data)}else{useTexStorage&&allocateMemory&&state.texStorage2D(_gl.TEXTURE_2D,levels,glInternalFormat,mipmaps[0].width,mipmaps[0].height);for(let i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],texture.format!==constants.wk1?null!==glFormat?useTexStorage?state.compressedTexSubImage2D(_gl.TEXTURE_2D,i,0,0,mipmap.width,mipmap.height,glFormat,mipmap.data):state.compressedTexImage2D(_gl.TEXTURE_2D,i,glInternalFormat,mipmap.width,mipmap.height,0,mipmap.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):useTexStorage?state.texSubImage2D(_gl.TEXTURE_2D,i,0,0,mipmap.width,mipmap.height,glFormat,glType,mipmap.data):state.texImage2D(_gl.TEXTURE_2D,i,glInternalFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data)}else if(texture.isDataArrayTexture)useTexStorage?(allocateMemory&&state.texStorage3D(_gl.TEXTURE_2D_ARRAY,levels,glInternalFormat,image.width,image.height,image.depth),state.texSubImage3D(_gl.TEXTURE_2D_ARRAY,0,0,0,0,image.width,image.height,image.depth,glFormat,glType,image.data)):state.texImage3D(_gl.TEXTURE_2D_ARRAY,0,glInternalFormat,image.width,image.height,image.depth,0,glFormat,glType,image.data);else if(texture.isData3DTexture)useTexStorage?(allocateMemory&&state.texStorage3D(_gl.TEXTURE_3D,levels,glInternalFormat,image.width,image.height,image.depth),state.texSubImage3D(_gl.TEXTURE_3D,0,0,0,0,image.width,image.height,image.depth,glFormat,glType,image.data)):state.texImage3D(_gl.TEXTURE_3D,0,glInternalFormat,image.width,image.height,image.depth,0,glFormat,glType,image.data);else if(texture.isFramebufferTexture){if(allocateMemory)if(useTexStorage)state.texStorage2D(_gl.TEXTURE_2D,levels,glInternalFormat,image.width,image.height);else{let width=image.width,height=image.height;for(let i=0;i<levels;i++)state.texImage2D(_gl.TEXTURE_2D,i,glInternalFormat,width,height,0,glFormat,glType,null),width>>=1,height>>=1}}else if(mipmaps.length>0&&supportsMips){useTexStorage&&allocateMemory&&state.texStorage2D(_gl.TEXTURE_2D,levels,glInternalFormat,mipmaps[0].width,mipmaps[0].height);for(let i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],useTexStorage?state.texSubImage2D(_gl.TEXTURE_2D,i,0,0,glFormat,glType,mipmap):state.texImage2D(_gl.TEXTURE_2D,i,glInternalFormat,glFormat,glType,mipmap);texture.generateMipmaps=!1}else useTexStorage?(allocateMemory&&state.texStorage2D(_gl.TEXTURE_2D,levels,glInternalFormat,image.width,image.height),state.texSubImage2D(_gl.TEXTURE_2D,0,0,0,glFormat,glType,image)):state.texImage2D(_gl.TEXTURE_2D,0,glInternalFormat,glFormat,glType,image);textureNeedsGenerateMipmaps(texture,supportsMips)&&generateMipmap(textureType),sourceProperties.__version=source.version,texture.onUpdate&&texture.onUpdate(texture)}textureProperties.__version=texture.version}function uploadCubeTexture(textureProperties,texture,slot){if(6!==texture.image.length)return;const forceUpload=initTexture(textureProperties,texture),source=texture.source;state.bindTexture(_gl.TEXTURE_CUBE_MAP,textureProperties.__webglTexture,_gl.TEXTURE0+slot);const sourceProperties=properties.get(source);if(source.version!==sourceProperties.__version||!0===forceUpload){state.activeTexture(_gl.TEXTURE0+slot),_gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL,texture.flipY),_gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultiplyAlpha),_gl.pixelStorei(_gl.UNPACK_ALIGNMENT,texture.unpackAlignment),_gl.pixelStorei(_gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,_gl.NONE);const isCompressed=texture.isCompressedTexture||texture.image[0].isCompressedTexture,isDataTexture=texture.image[0]&&texture.image[0].isDataTexture,cubeImage=[];for(let i=0;i<6;i++)cubeImage[i]=isCompressed||isDataTexture?isDataTexture?texture.image[i].image:texture.image[i]:resizeImage(texture.image[i],!1,!0,maxCubemapSize),cubeImage[i]=verifyColorSpace(texture,cubeImage[i]);const image=cubeImage[0],supportsMips=isPowerOfTwo(image)||isWebGL2,glFormat=utils.convert(texture.format,texture.encoding),glType=utils.convert(texture.type),glInternalFormat=getInternalFormat(texture.internalFormat,glFormat,glType,texture.encoding),useTexStorage=isWebGL2&&!0!==texture.isVideoTexture,allocateMemory=void 0===sourceProperties.__version||!0===forceUpload;let mipmaps,levels=getMipLevels(texture,image,supportsMips);if(setTextureParameters(_gl.TEXTURE_CUBE_MAP,texture,supportsMips),isCompressed){useTexStorage&&allocateMemory&&state.texStorage2D(_gl.TEXTURE_CUBE_MAP,levels,glInternalFormat,image.width,image.height);for(let i=0;i<6;i++){mipmaps=cubeImage[i].mipmaps;for(let j=0;j<mipmaps.length;j++){const mipmap=mipmaps[j];texture.format!==constants.wk1?null!==glFormat?useTexStorage?state.compressedTexSubImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j,0,0,mipmap.width,mipmap.height,glFormat,mipmap.data):state.compressedTexImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j,glInternalFormat,mipmap.width,mipmap.height,0,mipmap.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):useTexStorage?state.texSubImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j,0,0,mipmap.width,mipmap.height,glFormat,glType,mipmap.data):state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j,glInternalFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data)}}}else{mipmaps=texture.mipmaps,useTexStorage&&allocateMemory&&(mipmaps.length>0&&levels++,state.texStorage2D(_gl.TEXTURE_CUBE_MAP,levels,glInternalFormat,cubeImage[0].width,cubeImage[0].height));for(let i=0;i<6;i++)if(isDataTexture){useTexStorage?state.texSubImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,cubeImage[i].width,cubeImage[i].height,glFormat,glType,cubeImage[i].data):state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,glInternalFormat,cubeImage[i].width,cubeImage[i].height,0,glFormat,glType,cubeImage[i].data);for(let j=0;j<mipmaps.length;j++){const mipmapImage=mipmaps[j].image[i].image;useTexStorage?state.texSubImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j+1,0,0,mipmapImage.width,mipmapImage.height,glFormat,glType,mipmapImage.data):state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j+1,glInternalFormat,mipmapImage.width,mipmapImage.height,0,glFormat,glType,mipmapImage.data)}}else{useTexStorage?state.texSubImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,glFormat,glType,cubeImage[i]):state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,glInternalFormat,glFormat,glType,cubeImage[i]);for(let j=0;j<mipmaps.length;j++){const mipmap=mipmaps[j];useTexStorage?state.texSubImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j+1,0,0,glFormat,glType,mipmap.image[i]):state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j+1,glInternalFormat,glFormat,glType,mipmap.image[i])}}}textureNeedsGenerateMipmaps(texture,supportsMips)&&generateMipmap(_gl.TEXTURE_CUBE_MAP),sourceProperties.__version=source.version,texture.onUpdate&&texture.onUpdate(texture)}textureProperties.__version=texture.version}function setupFrameBufferTexture(framebuffer,renderTarget,texture,attachment,textureTarget){const glFormat=utils.convert(texture.format,texture.encoding),glType=utils.convert(texture.type),glInternalFormat=getInternalFormat(texture.internalFormat,glFormat,glType,texture.encoding);properties.get(renderTarget).__hasExternalTextures||(textureTarget===_gl.TEXTURE_3D||textureTarget===_gl.TEXTURE_2D_ARRAY?state.texImage3D(textureTarget,0,glInternalFormat,renderTarget.width,renderTarget.height,renderTarget.depth,0,glFormat,glType,null):state.texImage2D(textureTarget,0,glInternalFormat,renderTarget.width,renderTarget.height,0,glFormat,glType,null)),state.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer),useMultisampledRTT(renderTarget)?multisampledRTTExt.framebufferTexture2DMultisampleEXT(_gl.FRAMEBUFFER,attachment,textureTarget,properties.get(texture).__webglTexture,0,getRenderTargetSamples(renderTarget)):(textureTarget===_gl.TEXTURE_2D||textureTarget>=_gl.TEXTURE_CUBE_MAP_POSITIVE_X&&textureTarget<=_gl.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&_gl.framebufferTexture2D(_gl.FRAMEBUFFER,attachment,textureTarget,properties.get(texture).__webglTexture,0),state.bindFramebuffer(_gl.FRAMEBUFFER,null)}function setupRenderBufferStorage(renderbuffer,renderTarget,isMultisample){if(_gl.bindRenderbuffer(_gl.RENDERBUFFER,renderbuffer),renderTarget.depthBuffer&&!renderTarget.stencilBuffer){let glInternalFormat=_gl.DEPTH_COMPONENT16;if(isMultisample||useMultisampledRTT(renderTarget)){const depthTexture=renderTarget.depthTexture;depthTexture&&depthTexture.isDepthTexture&&(depthTexture.type===constants.VzW?glInternalFormat=_gl.DEPTH_COMPONENT32F:depthTexture.type===constants.JQ4&&(glInternalFormat=_gl.DEPTH_COMPONENT24));const samples=getRenderTargetSamples(renderTarget);useMultisampledRTT(renderTarget)?multisampledRTTExt.renderbufferStorageMultisampleEXT(_gl.RENDERBUFFER,samples,glInternalFormat,renderTarget.width,renderTarget.height):_gl.renderbufferStorageMultisample(_gl.RENDERBUFFER,samples,glInternalFormat,renderTarget.width,renderTarget.height)}else _gl.renderbufferStorage(_gl.RENDERBUFFER,glInternalFormat,renderTarget.width,renderTarget.height);_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.DEPTH_ATTACHMENT,_gl.RENDERBUFFER,renderbuffer)}else if(renderTarget.depthBuffer&&renderTarget.stencilBuffer){const samples=getRenderTargetSamples(renderTarget);isMultisample&&!1===useMultisampledRTT(renderTarget)?_gl.renderbufferStorageMultisample(_gl.RENDERBUFFER,samples,_gl.DEPTH24_STENCIL8,renderTarget.width,renderTarget.height):useMultisampledRTT(renderTarget)?multisampledRTTExt.renderbufferStorageMultisampleEXT(_gl.RENDERBUFFER,samples,_gl.DEPTH24_STENCIL8,renderTarget.width,renderTarget.height):_gl.renderbufferStorage(_gl.RENDERBUFFER,_gl.DEPTH_STENCIL,renderTarget.width,renderTarget.height),_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.DEPTH_STENCIL_ATTACHMENT,_gl.RENDERBUFFER,renderbuffer)}else{const textures=!0===renderTarget.isWebGLMultipleRenderTargets?renderTarget.texture:[renderTarget.texture];for(let i=0;i<textures.length;i++){const texture=textures[i],glFormat=utils.convert(texture.format,texture.encoding),glType=utils.convert(texture.type),glInternalFormat=getInternalFormat(texture.internalFormat,glFormat,glType,texture.encoding),samples=getRenderTargetSamples(renderTarget);isMultisample&&!1===useMultisampledRTT(renderTarget)?_gl.renderbufferStorageMultisample(_gl.RENDERBUFFER,samples,glInternalFormat,renderTarget.width,renderTarget.height):useMultisampledRTT(renderTarget)?multisampledRTTExt.renderbufferStorageMultisampleEXT(_gl.RENDERBUFFER,samples,glInternalFormat,renderTarget.width,renderTarget.height):_gl.renderbufferStorage(_gl.RENDERBUFFER,glInternalFormat,renderTarget.width,renderTarget.height)}}_gl.bindRenderbuffer(_gl.RENDERBUFFER,null)}function setupDepthTexture(framebuffer,renderTarget){if(renderTarget&&renderTarget.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(state.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer),!renderTarget.depthTexture||!renderTarget.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!properties.get(renderTarget.depthTexture).__webglTexture||renderTarget.depthTexture.image.width!==renderTarget.width||renderTarget.depthTexture.image.height!==renderTarget.height)&&(renderTarget.depthTexture.image.width=renderTarget.width,renderTarget.depthTexture.image.height=renderTarget.height,renderTarget.depthTexture.needsUpdate=!0),setTexture2D(renderTarget.depthTexture,0);const webglDepthTexture=properties.get(renderTarget.depthTexture).__webglTexture,samples=getRenderTargetSamples(renderTarget);if(renderTarget.depthTexture.format===constants.qkB)useMultisampledRTT(renderTarget)?multisampledRTTExt.framebufferTexture2DMultisampleEXT(_gl.FRAMEBUFFER,_gl.DEPTH_ATTACHMENT,_gl.TEXTURE_2D,webglDepthTexture,0,samples):_gl.framebufferTexture2D(_gl.FRAMEBUFFER,_gl.DEPTH_ATTACHMENT,_gl.TEXTURE_2D,webglDepthTexture,0);else{if(renderTarget.depthTexture.format!==constants.brP)throw new Error("Unknown depthTexture format");useMultisampledRTT(renderTarget)?multisampledRTTExt.framebufferTexture2DMultisampleEXT(_gl.FRAMEBUFFER,_gl.DEPTH_STENCIL_ATTACHMENT,_gl.TEXTURE_2D,webglDepthTexture,0,samples):_gl.framebufferTexture2D(_gl.FRAMEBUFFER,_gl.DEPTH_STENCIL_ATTACHMENT,_gl.TEXTURE_2D,webglDepthTexture,0)}}function setupDepthRenderbuffer(renderTarget){const renderTargetProperties=properties.get(renderTarget),isCube=!0===renderTarget.isWebGLCubeRenderTarget;if(renderTarget.depthTexture&&!renderTargetProperties.__autoAllocateDepthBuffer){if(isCube)throw new Error("target.depthTexture not supported in Cube render targets");setupDepthTexture(renderTargetProperties.__webglFramebuffer,renderTarget)}else if(isCube){renderTargetProperties.__webglDepthbuffer=[];for(let i=0;i<6;i++)state.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglFramebuffer[i]),renderTargetProperties.__webglDepthbuffer[i]=_gl.createRenderbuffer(),setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer[i],renderTarget,!1)}else state.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglFramebuffer),renderTargetProperties.__webglDepthbuffer=_gl.createRenderbuffer(),setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer,renderTarget,!1);state.bindFramebuffer(_gl.FRAMEBUFFER,null)}function rebindTextures(renderTarget,colorTexture,depthTexture){const renderTargetProperties=properties.get(renderTarget);void 0!==colorTexture&&setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer,renderTarget,renderTarget.texture,_gl.COLOR_ATTACHMENT0,_gl.TEXTURE_2D),void 0!==depthTexture&&setupDepthRenderbuffer(renderTarget)}function setupRenderTarget(renderTarget){const texture=renderTarget.texture,renderTargetProperties=properties.get(renderTarget),textureProperties=properties.get(texture);renderTarget.addEventListener("dispose",onRenderTargetDispose),!0!==renderTarget.isWebGLMultipleRenderTargets&&(void 0===textureProperties.__webglTexture&&(textureProperties.__webglTexture=_gl.createTexture()),textureProperties.__version=texture.version,info.memory.textures++);const isCube=!0===renderTarget.isWebGLCubeRenderTarget,isMultipleRenderTargets=!0===renderTarget.isWebGLMultipleRenderTargets,supportsMips=isPowerOfTwo(renderTarget)||isWebGL2;if(isCube){renderTargetProperties.__webglFramebuffer=[];for(let i=0;i<6;i++)renderTargetProperties.__webglFramebuffer[i]=_gl.createFramebuffer()}else{if(renderTargetProperties.__webglFramebuffer=_gl.createFramebuffer(),isMultipleRenderTargets)if(capabilities.drawBuffers){const textures=renderTarget.texture;for(let i=0,il=textures.length;i<il;i++){const attachmentProperties=properties.get(textures[i]);void 0===attachmentProperties.__webglTexture&&(attachmentProperties.__webglTexture=_gl.createTexture(),info.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(isWebGL2&&renderTarget.samples>0&&!1===useMultisampledRTT(renderTarget)){const textures=isMultipleRenderTargets?texture:[texture];renderTargetProperties.__webglMultisampledFramebuffer=_gl.createFramebuffer(),renderTargetProperties.__webglColorRenderbuffer=[],state.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglMultisampledFramebuffer);for(let i=0;i<textures.length;i++){const texture2=textures[i];renderTargetProperties.__webglColorRenderbuffer[i]=_gl.createRenderbuffer(),_gl.bindRenderbuffer(_gl.RENDERBUFFER,renderTargetProperties.__webglColorRenderbuffer[i]);const glFormat=utils.convert(texture2.format,texture2.encoding),glType=utils.convert(texture2.type),glInternalFormat=getInternalFormat(texture2.internalFormat,glFormat,glType,texture2.encoding,!0===renderTarget.isXRRenderTarget),samples=getRenderTargetSamples(renderTarget);_gl.renderbufferStorageMultisample(_gl.RENDERBUFFER,samples,glInternalFormat,renderTarget.width,renderTarget.height),_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.COLOR_ATTACHMENT0+i,_gl.RENDERBUFFER,renderTargetProperties.__webglColorRenderbuffer[i])}_gl.bindRenderbuffer(_gl.RENDERBUFFER,null),renderTarget.depthBuffer&&(renderTargetProperties.__webglDepthRenderbuffer=_gl.createRenderbuffer(),setupRenderBufferStorage(renderTargetProperties.__webglDepthRenderbuffer,renderTarget,!0)),state.bindFramebuffer(_gl.FRAMEBUFFER,null)}}if(isCube){state.bindTexture(_gl.TEXTURE_CUBE_MAP,textureProperties.__webglTexture),setTextureParameters(_gl.TEXTURE_CUBE_MAP,texture,supportsMips);for(let i=0;i<6;i++)setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer[i],renderTarget,texture,_gl.COLOR_ATTACHMENT0,_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i);textureNeedsGenerateMipmaps(texture,supportsMips)&&generateMipmap(_gl.TEXTURE_CUBE_MAP),state.unbindTexture()}else if(isMultipleRenderTargets){const textures=renderTarget.texture;for(let i=0,il=textures.length;i<il;i++){const attachment=textures[i],attachmentProperties=properties.get(attachment);state.bindTexture(_gl.TEXTURE_2D,attachmentProperties.__webglTexture),setTextureParameters(_gl.TEXTURE_2D,attachment,supportsMips),setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer,renderTarget,attachment,_gl.COLOR_ATTACHMENT0+i,_gl.TEXTURE_2D),textureNeedsGenerateMipmaps(attachment,supportsMips)&&generateMipmap(_gl.TEXTURE_2D)}state.unbindTexture()}else{let glTextureType=_gl.TEXTURE_2D;(renderTarget.isWebGL3DRenderTarget||renderTarget.isWebGLArrayRenderTarget)&&(isWebGL2?glTextureType=renderTarget.isWebGL3DRenderTarget?_gl.TEXTURE_3D:_gl.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),state.bindTexture(glTextureType,textureProperties.__webglTexture),setTextureParameters(glTextureType,texture,supportsMips),setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer,renderTarget,texture,_gl.COLOR_ATTACHMENT0,glTextureType),textureNeedsGenerateMipmaps(texture,supportsMips)&&generateMipmap(glTextureType),state.unbindTexture()}renderTarget.depthBuffer&&setupDepthRenderbuffer(renderTarget)}function updateRenderTargetMipmap(renderTarget){const supportsMips=isPowerOfTwo(renderTarget)||isWebGL2,textures=!0===renderTarget.isWebGLMultipleRenderTargets?renderTarget.texture:[renderTarget.texture];for(let i=0,il=textures.length;i<il;i++){const texture=textures[i];if(textureNeedsGenerateMipmaps(texture,supportsMips)){const target=renderTarget.isWebGLCubeRenderTarget?_gl.TEXTURE_CUBE_MAP:_gl.TEXTURE_2D,webglTexture=properties.get(texture).__webglTexture;state.bindTexture(target,webglTexture),generateMipmap(target),state.unbindTexture()}}}function updateMultisampleRenderTarget(renderTarget){if(isWebGL2&&renderTarget.samples>0&&!1===useMultisampledRTT(renderTarget)){const textures=renderTarget.isWebGLMultipleRenderTargets?renderTarget.texture:[renderTarget.texture],width=renderTarget.width,height=renderTarget.height;let mask=_gl.COLOR_BUFFER_BIT;const invalidationArray=[],depthStyle=renderTarget.stencilBuffer?_gl.DEPTH_STENCIL_ATTACHMENT:_gl.DEPTH_ATTACHMENT,renderTargetProperties=properties.get(renderTarget),isMultipleRenderTargets=!0===renderTarget.isWebGLMultipleRenderTargets;if(isMultipleRenderTargets)for(let i=0;i<textures.length;i++)state.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglMultisampledFramebuffer),_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.COLOR_ATTACHMENT0+i,_gl.RENDERBUFFER,null),state.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglFramebuffer),_gl.framebufferTexture2D(_gl.DRAW_FRAMEBUFFER,_gl.COLOR_ATTACHMENT0+i,_gl.TEXTURE_2D,null,0);state.bindFramebuffer(_gl.READ_FRAMEBUFFER,renderTargetProperties.__webglMultisampledFramebuffer),state.bindFramebuffer(_gl.DRAW_FRAMEBUFFER,renderTargetProperties.__webglFramebuffer);for(let i=0;i<textures.length;i++){invalidationArray.push(_gl.COLOR_ATTACHMENT0+i),renderTarget.depthBuffer&&invalidationArray.push(depthStyle);const ignoreDepthValues=void 0!==renderTargetProperties.__ignoreDepthValues&&renderTargetProperties.__ignoreDepthValues;if(!1===ignoreDepthValues&&(renderTarget.depthBuffer&&(mask|=_gl.DEPTH_BUFFER_BIT),renderTarget.stencilBuffer&&(mask|=_gl.STENCIL_BUFFER_BIT)),isMultipleRenderTargets&&_gl.framebufferRenderbuffer(_gl.READ_FRAMEBUFFER,_gl.COLOR_ATTACHMENT0,_gl.RENDERBUFFER,renderTargetProperties.__webglColorRenderbuffer[i]),!0===ignoreDepthValues&&(_gl.invalidateFramebuffer(_gl.READ_FRAMEBUFFER,[depthStyle]),_gl.invalidateFramebuffer(_gl.DRAW_FRAMEBUFFER,[depthStyle])),isMultipleRenderTargets){const webglTexture=properties.get(textures[i]).__webglTexture;_gl.framebufferTexture2D(_gl.DRAW_FRAMEBUFFER,_gl.COLOR_ATTACHMENT0,_gl.TEXTURE_2D,webglTexture,0)}_gl.blitFramebuffer(0,0,width,height,0,0,width,height,mask,_gl.NEAREST),supportsInvalidateFramebuffer&&_gl.invalidateFramebuffer(_gl.READ_FRAMEBUFFER,invalidationArray)}if(state.bindFramebuffer(_gl.READ_FRAMEBUFFER,null),state.bindFramebuffer(_gl.DRAW_FRAMEBUFFER,null),isMultipleRenderTargets)for(let i=0;i<textures.length;i++){state.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglMultisampledFramebuffer),_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.COLOR_ATTACHMENT0+i,_gl.RENDERBUFFER,renderTargetProperties.__webglColorRenderbuffer[i]);const webglTexture=properties.get(textures[i]).__webglTexture;state.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglFramebuffer),_gl.framebufferTexture2D(_gl.DRAW_FRAMEBUFFER,_gl.COLOR_ATTACHMENT0+i,_gl.TEXTURE_2D,webglTexture,0)}state.bindFramebuffer(_gl.DRAW_FRAMEBUFFER,renderTargetProperties.__webglMultisampledFramebuffer)}}function getRenderTargetSamples(renderTarget){return Math.min(maxSamples,renderTarget.samples)}function useMultisampledRTT(renderTarget){const renderTargetProperties=properties.get(renderTarget);return isWebGL2&&renderTarget.samples>0&&!0===extensions.has("WEBGL_multisampled_render_to_texture")&&!1!==renderTargetProperties.__useRenderToTexture}function updateVideoTexture(texture){const frame=info.render.frame;_videoTextures.get(texture)!==frame&&(_videoTextures.set(texture,frame),texture.update())}function verifyColorSpace(texture,image){const encoding=texture.encoding,format=texture.format,type=texture.type;return!0===texture.isCompressedTexture||!0===texture.isVideoTexture||texture.format===constants.L_r||encoding!==constants.rnI&&(encoding===constants.knz?!1===isWebGL2?!0===extensions.has("EXT_sRGB")&&format===constants.wk1?(texture.format=constants.L_r,texture.minFilter=constants.wem,texture.generateMipmaps=!1):image=ImageUtils.P.sRGBToLinear(image):(format!==constants.wk1||type!==constants.ywz)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",encoding)),image}__name(setTextureParameters,"setTextureParameters"),__name(initTexture,"initTexture"),__name(uploadTexture,"uploadTexture"),__name(uploadCubeTexture,"uploadCubeTexture"),__name(setupFrameBufferTexture,"setupFrameBufferTexture"),__name(setupRenderBufferStorage,"setupRenderBufferStorage"),__name(setupDepthTexture,"setupDepthTexture"),__name(setupDepthRenderbuffer,"setupDepthRenderbuffer"),__name(rebindTextures,"rebindTextures"),__name(setupRenderTarget,"setupRenderTarget"),__name(updateRenderTargetMipmap,"updateRenderTargetMipmap"),__name(updateMultisampleRenderTarget,"updateMultisampleRenderTarget"),__name(getRenderTargetSamples,"getRenderTargetSamples"),__name(useMultisampledRTT,"useMultisampledRTT"),__name(updateVideoTexture,"updateVideoTexture"),__name(verifyColorSpace,"verifyColorSpace"),this.allocateTextureUnit=allocateTextureUnit,this.resetTextureUnits=resetTextureUnits,this.setTexture2D=setTexture2D,this.setTexture2DArray=setTexture2DArray,this.setTexture3D=setTexture3D,this.setTextureCube=setTextureCube,this.rebindTextures=rebindTextures,this.setupRenderTarget=setupRenderTarget,this.updateRenderTargetMipmap=updateRenderTargetMipmap,this.updateMultisampleRenderTarget=updateMultisampleRenderTarget,this.setupDepthRenderbuffer=setupDepthRenderbuffer,this.setupFrameBufferTexture=setupFrameBufferTexture,this.useMultisampledRTT=useMultisampledRTT}function WebGLUtils(gl,extensions,capabilities){const isWebGL2=capabilities.isWebGL2;function convert(p,encoding=null){let extension;if(p===constants.ywz)return gl.UNSIGNED_BYTE;if(p===constants.k0A)return gl.UNSIGNED_SHORT_4_4_4_4;if(p===constants.irR)return gl.UNSIGNED_SHORT_5_5_5_1;if(p===constants.T95)return gl.BYTE;if(p===constants.iAb)return gl.SHORT;if(p===constants.LsT)return gl.UNSIGNED_SHORT;if(p===constants.Kz5)return gl.INT;if(p===constants.JQ4)return gl.UNSIGNED_INT;if(p===constants.VzW)return gl.FLOAT;if(p===constants.cLu)return isWebGL2?gl.HALF_FLOAT:(extension=extensions.get("OES_texture_half_float"),null!==extension?extension.HALF_FLOAT_OES:null);if(p===constants.OTo)return gl.ALPHA;if(p===constants.wk1)return gl.RGBA;if(p===constants.Y8D)return gl.LUMINANCE;if(p===constants.cRx)return gl.LUMINANCE_ALPHA;if(p===constants.qkB)return gl.DEPTH_COMPONENT;if(p===constants.brP)return gl.DEPTH_STENCIL;if(p===constants.UCm)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),gl.RGBA;if(p===constants.L_r)return extension=extensions.get("EXT_sRGB"),null!==extension?extension.SRGB_ALPHA_EXT:null;if(p===constants.hEm)return gl.RED;if(p===constants.D9w)return gl.RED_INTEGER;if(p===constants.av9)return gl.RG;if(p===constants.CtA)return gl.RG_INTEGER;if(p===constants.E2K)return gl.RGBA_INTEGER;if(p===constants.wuA||p===constants.BFQ||p===constants.v3W||p===constants.ILR)if(encoding===constants.knz){if(extension=extensions.get("WEBGL_compressed_texture_s3tc_srgb"),null===extension)return null;if(p===constants.wuA)return extension.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(p===constants.BFQ)return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(p===constants.v3W)return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(p===constants.ILR)return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(extension=extensions.get("WEBGL_compressed_texture_s3tc"),null===extension)return null;if(p===constants.wuA)return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===constants.BFQ)return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===constants.v3W)return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===constants.ILR)return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(p===constants._AM||p===constants.vCx||p===constants.eaV||p===constants.CaW){if(extension=extensions.get("WEBGL_compressed_texture_pvrtc"),null===extension)return null;if(p===constants._AM)return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===constants.vCx)return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===constants.eaV)return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===constants.CaW)return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(p===constants.fto)return extension=extensions.get("WEBGL_compressed_texture_etc1"),null!==extension?extension.COMPRESSED_RGB_ETC1_WEBGL:null;if(p===constants.l0P||p===constants.ekQ){if(extension=extensions.get("WEBGL_compressed_texture_etc"),null===extension)return null;if(p===constants.l0P)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ETC2:extension.COMPRESSED_RGB8_ETC2;if(p===constants.ekQ)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:extension.COMPRESSED_RGBA8_ETC2_EAC}if(p===constants.ptH||p===constants.jZA||p===constants.y2t||p===constants.gi4||p===constants.Djp||p===constants.BG$||p===constants.NYV||p===constants.xJs||p===constants.pKu||p===constants.GG6||p===constants.Gih||p===constants.FUD||p===constants.iiP||p===constants.SvJ){if(extension=extensions.get("WEBGL_compressed_texture_astc"),null===extension)return null;if(p===constants.ptH)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:extension.COMPRESSED_RGBA_ASTC_4x4_KHR;if(p===constants.jZA)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:extension.COMPRESSED_RGBA_ASTC_5x4_KHR;if(p===constants.y2t)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:extension.COMPRESSED_RGBA_ASTC_5x5_KHR;if(p===constants.gi4)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:extension.COMPRESSED_RGBA_ASTC_6x5_KHR;if(p===constants.Djp)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:extension.COMPRESSED_RGBA_ASTC_6x6_KHR;if(p===constants.BG$)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:extension.COMPRESSED_RGBA_ASTC_8x5_KHR;if(p===constants.NYV)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:extension.COMPRESSED_RGBA_ASTC_8x6_KHR;if(p===constants.xJs)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:extension.COMPRESSED_RGBA_ASTC_8x8_KHR;if(p===constants.pKu)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:extension.COMPRESSED_RGBA_ASTC_10x5_KHR;if(p===constants.GG6)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:extension.COMPRESSED_RGBA_ASTC_10x6_KHR;if(p===constants.Gih)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:extension.COMPRESSED_RGBA_ASTC_10x8_KHR;if(p===constants.FUD)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:extension.COMPRESSED_RGBA_ASTC_10x10_KHR;if(p===constants.iiP)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:extension.COMPRESSED_RGBA_ASTC_12x10_KHR;if(p===constants.SvJ)return encoding===constants.knz?extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:extension.COMPRESSED_RGBA_ASTC_12x12_KHR}if(p===constants.bsb){if(extension=extensions.get("EXT_texture_compression_bptc"),null===extension)return null;if(p===constants.bsb)return encoding===constants.knz?extension.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:extension.COMPRESSED_RGBA_BPTC_UNORM_EXT}return p===constants.wJv?isWebGL2?gl.UNSIGNED_INT_24_8:(extension=extensions.get("WEBGL_depth_texture"),null!==extension?extension.UNSIGNED_INT_24_8_WEBGL:null):void 0!==gl[p]?gl[p]:null}return __name(convert,"convert"),{convert}}__name(WebGLTextures,"WebGLTextures"),__name(WebGLUtils,"WebGLUtils");var asyncToGenerator=__webpack_require__(9671);class ArrayCamera extends PerspectiveCamera.c{constructor(array=[]){super(),this.isArrayCamera=!0,this.cameras=array}}__name(ArrayCamera,"ArrayCamera");var Group=__webpack_require__(2043);const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group.Z,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group.Z,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector32.P,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector32.P),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group.Z,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector32.P,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector32.P),this._grip}dispatchEvent(event){return null!==this._targetRay&&this._targetRay.dispatchEvent(event),null!==this._grip&&this._grip.dispatchEvent(event),null!==this._hand&&this._hand.dispatchEvent(event),this}connect(inputSource){if(inputSource&&inputSource.hand){const hand=this._hand;if(hand)for(const inputjoint of inputSource.hand.values())this._getHandJoint(hand,inputjoint)}return this.dispatchEvent({type:"connected",data:inputSource}),this}disconnect(inputSource){return this.dispatchEvent({type:"disconnected",data:inputSource}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(inputSource,frame,referenceSpace){let inputPose=null,gripPose=null,handPose=null;const targetRay=this._targetRay,grip=this._grip,hand=this._hand;if(inputSource&&"visible-blurred"!==frame.session.visibilityState){if(hand&&inputSource.hand){handPose=!0;for(const inputjoint of inputSource.hand.values()){const jointPose=frame.getJointPose(inputjoint,referenceSpace),joint=this._getHandJoint(hand,inputjoint);null!==jointPose&&(joint.matrix.fromArray(jointPose.transform.matrix),joint.matrix.decompose(joint.position,joint.rotation,joint.scale),joint.jointRadius=jointPose.radius),joint.visible=null!==jointPose}const distance=hand.joints["index-finger-tip"].position.distanceTo(hand.joints["thumb-tip"].position),distanceToPinch=.02,threshold=.005;hand.inputState.pinching&&distance>distanceToPinch+threshold?(hand.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:inputSource.handedness,target:this})):!hand.inputState.pinching&&distance<=distanceToPinch-threshold&&(hand.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:inputSource.handedness,target:this}))}else null!==grip&&inputSource.gripSpace&&(gripPose=frame.getPose(inputSource.gripSpace,referenceSpace),null!==gripPose&&(grip.matrix.fromArray(gripPose.transform.matrix),grip.matrix.decompose(grip.position,grip.rotation,grip.scale),gripPose.linearVelocity?(grip.hasLinearVelocity=!0,grip.linearVelocity.copy(gripPose.linearVelocity)):grip.hasLinearVelocity=!1,gripPose.angularVelocity?(grip.hasAngularVelocity=!0,grip.angularVelocity.copy(gripPose.angularVelocity)):grip.hasAngularVelocity=!1));null!==targetRay&&(inputPose=frame.getPose(inputSource.targetRaySpace,referenceSpace),null===inputPose&&null!==gripPose&&(inputPose=gripPose),null!==inputPose&&(targetRay.matrix.fromArray(inputPose.transform.matrix),targetRay.matrix.decompose(targetRay.position,targetRay.rotation,targetRay.scale),inputPose.linearVelocity?(targetRay.hasLinearVelocity=!0,targetRay.linearVelocity.copy(inputPose.linearVelocity)):targetRay.hasLinearVelocity=!1,inputPose.angularVelocity?(targetRay.hasAngularVelocity=!0,targetRay.angularVelocity.copy(inputPose.angularVelocity)):targetRay.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return null!==targetRay&&(targetRay.visible=null!==inputPose),null!==grip&&(grip.visible=null!==gripPose),null!==hand&&(hand.visible=null!==handPose),this}_getHandJoint(hand,inputjoint){if(void 0===hand.joints[inputjoint.jointName]){const joint=new Group.Z;joint.matrixAutoUpdate=!1,joint.visible=!1,hand.joints[inputjoint.jointName]=joint,hand.add(joint)}return hand.joints[inputjoint.jointName]}}__name(WebXRController,"WebXRController");class DepthTexture extends Texture.x{constructor(width,height,type,mapping,wrapS,wrapT,magFilter,minFilter,anisotropy,format){if((format=void 0!==format?format:constants.qkB)!==constants.qkB&&format!==constants.brP)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===type&&format===constants.qkB&&(type=constants.JQ4),void 0===type&&format===constants.brP&&(type=constants.wJv),super(null,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.isDepthTexture=!0,this.image={width,height},this.magFilter=void 0!==magFilter?magFilter:constants.TyD,this.minFilter=void 0!==minFilter?minFilter:constants.TyD,this.flipY=!1,this.generateMipmaps=!1}}__name(DepthTexture,"DepthTexture");class WebXRManager extends EventDispatcher.p{constructor(renderer,gl){super();const scope=this;let session=null,framebufferScaleFactor=1,referenceSpace=null,referenceSpaceType="local-floor",customReferenceSpace=null,pose=null,glBinding=null,glProjLayer=null,glBaseLayer=null,xrFrame=null;const attributes=gl.getContextAttributes();let initialRenderTarget=null,newRenderTarget=null;const controllers=[],controllerInputSources=[],planes=new Set,planesLastChangedTimes=new Map,cameraL=new PerspectiveCamera.c;cameraL.layers.enable(1),cameraL.viewport=new Vector4.L;const cameraR=new PerspectiveCamera.c;cameraR.layers.enable(2),cameraR.viewport=new Vector4.L;const cameras=[cameraL,cameraR],cameraVR=new ArrayCamera;cameraVR.layers.enable(1),cameraVR.layers.enable(2);let _currentDepthNear=null,_currentDepthFar=null;function onSessionEvent(event){const controllerIndex=controllerInputSources.indexOf(event.inputSource);if(-1===controllerIndex)return;const controller=controllers[controllerIndex];void 0!==controller&&controller.dispatchEvent({type:event.type,data:event.inputSource})}function onSessionEnd(){session.removeEventListener("select",onSessionEvent),session.removeEventListener("selectstart",onSessionEvent),session.removeEventListener("selectend",onSessionEvent),session.removeEventListener("squeeze",onSessionEvent),session.removeEventListener("squeezestart",onSessionEvent),session.removeEventListener("squeezeend",onSessionEvent),session.removeEventListener("end",onSessionEnd),session.removeEventListener("inputsourceschange",onInputSourcesChange);for(let i=0;i<controllers.length;i++){const inputSource=controllerInputSources[i];null!==inputSource&&(controllerInputSources[i]=null,controllers[i].disconnect(inputSource))}_currentDepthNear=null,_currentDepthFar=null,renderer.setRenderTarget(initialRenderTarget),glBaseLayer=null,glProjLayer=null,glBinding=null,session=null,newRenderTarget=null,animation.stop(),scope.isPresenting=!1,scope.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(event){for(let i=0;i<event.removed.length;i++){const inputSource=event.removed[i],index=controllerInputSources.indexOf(inputSource);index>=0&&(controllerInputSources[index]=null,controllers[index].disconnect(inputSource))}for(let i=0;i<event.added.length;i++){const inputSource=event.added[i];let controllerIndex=controllerInputSources.indexOf(inputSource);if(-1===controllerIndex){for(let i2=0;i2<controllers.length;i2++){if(i2>=controllerInputSources.length){controllerInputSources.push(inputSource),controllerIndex=i2;break}if(null===controllerInputSources[i2]){controllerInputSources[i2]=inputSource,controllerIndex=i2;break}}if(-1===controllerIndex)break}const controller=controllers[controllerIndex];controller&&controller.connect(inputSource)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(index){let controller=controllers[index];return void 0===controller&&(controller=new WebXRController,controllers[index]=controller),controller.getTargetRaySpace()},this.getControllerGrip=function(index){let controller=controllers[index];return void 0===controller&&(controller=new WebXRController,controllers[index]=controller),controller.getGripSpace()},this.getHand=function(index){let controller=controllers[index];return void 0===controller&&(controller=new WebXRController,controllers[index]=controller),controller.getHandSpace()},__name(onSessionEvent,"onSessionEvent"),__name(onSessionEnd,"onSessionEnd"),this.setFramebufferScaleFactor=function(value){framebufferScaleFactor=value,!0===scope.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(value){referenceSpaceType=value,!0===scope.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return customReferenceSpace||referenceSpace},this.setReferenceSpace=function(space){customReferenceSpace=space},this.getBaseLayer=function(){return null!==glProjLayer?glProjLayer:glBaseLayer},this.getBinding=function(){return glBinding},this.getFrame=function(){return xrFrame},this.getSession=function(){return session},this.setSession=function(){var _ref=(0,asyncToGenerator.Z)(function*(value){if(session=value,null!==session){if(initialRenderTarget=renderer.getRenderTarget(),session.addEventListener("select",onSessionEvent),session.addEventListener("selectstart",onSessionEvent),session.addEventListener("selectend",onSessionEvent),session.addEventListener("squeeze",onSessionEvent),session.addEventListener("squeezestart",onSessionEvent),session.addEventListener("squeezeend",onSessionEvent),session.addEventListener("end",onSessionEnd),session.addEventListener("inputsourceschange",onInputSourcesChange),!0!==attributes.xrCompatible&&(yield gl.makeXRCompatible()),void 0===session.renderState.layers||!1===renderer.capabilities.isWebGL2)glBaseLayer=new XRWebGLLayer(session,gl,{antialias:void 0!==session.renderState.layers||attributes.antialias,alpha:attributes.alpha,depth:attributes.depth,stencil:attributes.stencil,framebufferScaleFactor}),session.updateRenderState({baseLayer:glBaseLayer}),newRenderTarget=new WebGLRenderTarget(glBaseLayer.framebufferWidth,glBaseLayer.framebufferHeight,{format:constants.wk1,type:constants.ywz,encoding:renderer.outputEncoding,stencilBuffer:attributes.stencil});else{let depthFormat=null,depthType=null,glDepthFormat=null;attributes.depth&&(glDepthFormat=attributes.stencil?gl.DEPTH24_STENCIL8:gl.DEPTH_COMPONENT24,depthFormat=attributes.stencil?constants.brP:constants.qkB,depthType=attributes.stencil?constants.wJv:constants.JQ4);const projectionlayerInit={colorFormat:gl.RGBA8,depthFormat:glDepthFormat,scaleFactor:framebufferScaleFactor};glBinding=new XRWebGLBinding(session,gl),glProjLayer=glBinding.createProjectionLayer(projectionlayerInit),session.updateRenderState({layers:[glProjLayer]}),newRenderTarget=new WebGLRenderTarget(glProjLayer.textureWidth,glProjLayer.textureHeight,{format:constants.wk1,type:constants.ywz,depthTexture:new DepthTexture(glProjLayer.textureWidth,glProjLayer.textureHeight,depthType,void 0,void 0,void 0,void 0,void 0,void 0,depthFormat),stencilBuffer:attributes.stencil,encoding:renderer.outputEncoding,samples:attributes.antialias?4:0}),renderer.properties.get(newRenderTarget).__ignoreDepthValues=glProjLayer.ignoreDepthValues}newRenderTarget.isXRRenderTarget=!0,this.setFoveation(1),customReferenceSpace=null,referenceSpace=yield session.requestReferenceSpace(referenceSpaceType),animation.setContext(session),animation.start(),scope.isPresenting=!0,scope.dispatchEvent({type:"sessionstart"})}});return function(_x){return _ref.apply(this,arguments)}}(),__name(onInputSourcesChange,"onInputSourcesChange");const cameraLPos=new Vector32.P,cameraRPos=new Vector32.P;function setProjectionFromUnion(camera,cameraL2,cameraR2){cameraLPos.setFromMatrixPosition(cameraL2.matrixWorld),cameraRPos.setFromMatrixPosition(cameraR2.matrixWorld);const ipd=cameraLPos.distanceTo(cameraRPos),projL=cameraL2.projectionMatrix.elements,projR=cameraR2.projectionMatrix.elements,near=projL[14]/(projL[10]-1),far=projL[14]/(projL[10]+1),topFov=(projL[9]+1)/projL[5],bottomFov=(projL[9]-1)/projL[5],leftFov=(projL[8]-1)/projL[0],rightFov=(projR[8]+1)/projR[0],left=near*leftFov,right=near*rightFov,zOffset=ipd/(-leftFov+rightFov),xOffset=zOffset*-leftFov;cameraL2.matrixWorld.decompose(camera.position,camera.quaternion,camera.scale),camera.translateX(xOffset),camera.translateZ(zOffset),camera.matrixWorld.compose(camera.position,camera.quaternion,camera.scale),camera.matrixWorldInverse.copy(camera.matrixWorld).invert();const near2=near+zOffset,far2=far+zOffset;camera.projectionMatrix.makePerspective(left-xOffset,right+(ipd-xOffset),topFov*far/far2*near2,bottomFov*far/far2*near2,near2,far2)}function updateCamera(camera,parent){null===parent?camera.matrixWorld.copy(camera.matrix):camera.matrixWorld.multiplyMatrices(parent.matrixWorld,camera.matrix),camera.matrixWorldInverse.copy(camera.matrixWorld).invert()}__name(setProjectionFromUnion,"setProjectionFromUnion"),__name(updateCamera,"updateCamera"),this.updateCamera=function(camera){if(null===session)return;cameraVR.near=cameraR.near=cameraL.near=camera.near,cameraVR.far=cameraR.far=cameraL.far=camera.far,(_currentDepthNear!==cameraVR.near||_currentDepthFar!==cameraVR.far)&&(session.updateRenderState({depthNear:cameraVR.near,depthFar:cameraVR.far}),_currentDepthNear=cameraVR.near,_currentDepthFar=cameraVR.far);const parent=camera.parent,cameras2=cameraVR.cameras;updateCamera(cameraVR,parent);for(let i=0;i<cameras2.length;i++)updateCamera(cameras2[i],parent);cameraVR.matrixWorld.decompose(cameraVR.position,cameraVR.quaternion,cameraVR.scale),camera.matrix.copy(cameraVR.matrix),camera.matrix.decompose(camera.position,camera.quaternion,camera.scale);const children=camera.children;for(let i=0,l=children.length;i<l;i++)children[i].updateMatrixWorld(!0);2===cameras2.length?setProjectionFromUnion(cameraVR,cameraL,cameraR):cameraVR.projectionMatrix.copy(cameraL.projectionMatrix)},this.getCamera=function(){return cameraVR},this.getFoveation=function(){return null!==glProjLayer?glProjLayer.fixedFoveation:null!==glBaseLayer?glBaseLayer.fixedFoveation:void 0},this.setFoveation=function(foveation){null!==glProjLayer&&(glProjLayer.fixedFoveation=foveation),null!==glBaseLayer&&void 0!==glBaseLayer.fixedFoveation&&(glBaseLayer.fixedFoveation=foveation)},this.getPlanes=function(){return planes};let onAnimationFrameCallback=null;function onAnimationFrame(time,frame){if(pose=frame.getViewerPose(customReferenceSpace||referenceSpace),xrFrame=frame,null!==pose){const views=pose.views;null!==glBaseLayer&&(renderer.setRenderTargetFramebuffer(newRenderTarget,glBaseLayer.framebuffer),renderer.setRenderTarget(newRenderTarget));let cameraVRNeedsUpdate=!1;views.length!==cameraVR.cameras.length&&(cameraVR.cameras.length=0,cameraVRNeedsUpdate=!0);for(let i=0;i<views.length;i++){const view=views[i];let viewport=null;if(null!==glBaseLayer)viewport=glBaseLayer.getViewport(view);else{const glSubImage=glBinding.getViewSubImage(glProjLayer,view);viewport=glSubImage.viewport,0===i&&(renderer.setRenderTargetTextures(newRenderTarget,glSubImage.colorTexture,glProjLayer.ignoreDepthValues?void 0:glSubImage.depthStencilTexture),renderer.setRenderTarget(newRenderTarget))}let camera=cameras[i];void 0===camera&&(camera=new PerspectiveCamera.c,camera.layers.enable(i),camera.viewport=new Vector4.L,cameras[i]=camera),camera.matrix.fromArray(view.transform.matrix),camera.projectionMatrix.fromArray(view.projectionMatrix),camera.viewport.set(viewport.x,viewport.y,viewport.width,viewport.height),0===i&&cameraVR.matrix.copy(camera.matrix),!0===cameraVRNeedsUpdate&&cameraVR.cameras.push(camera)}}for(let i=0;i<controllers.length;i++){const inputSource=controllerInputSources[i],controller=controllers[i];null!==inputSource&&void 0!==controller&&controller.update(inputSource,frame,customReferenceSpace||referenceSpace)}if(onAnimationFrameCallback&&onAnimationFrameCallback(time,frame),frame.detectedPlanes){scope.dispatchEvent({type:"planesdetected",data:frame.detectedPlanes});let planesToRemove=null;for(const plane of planes)frame.detectedPlanes.has(plane)||(null===planesToRemove&&(planesToRemove=[]),planesToRemove.push(plane));if(null!==planesToRemove)for(const plane of planesToRemove)planes.delete(plane),planesLastChangedTimes.delete(plane),scope.dispatchEvent({type:"planeremoved",data:plane});for(const plane of frame.detectedPlanes)if(planes.has(plane)){const lastKnownTime=planesLastChangedTimes.get(plane);plane.lastChangedTime>lastKnownTime&&(planesLastChangedTimes.set(plane,plane.lastChangedTime),scope.dispatchEvent({type:"planechanged",data:plane}))}else planes.add(plane),planesLastChangedTimes.set(plane,frame.lastChangedTime),scope.dispatchEvent({type:"planeadded",data:plane})}xrFrame=null}__name(onAnimationFrame,"onAnimationFrame");const animation=new WebGLAnimation;animation.setAnimationLoop(onAnimationFrame),this.setAnimationLoop=function(callback){onAnimationFrameCallback=callback},this.dispose=function(){}}}function WebGLMaterials(renderer,properties){function refreshFogUniforms(uniforms,fog){fog.color.getRGB(uniforms.fogColor.value,getUnlitUniformColorSpace(renderer)),fog.isFog?(uniforms.fogNear.value=fog.near,uniforms.fogFar.value=fog.far):fog.isFogExp2&&(uniforms.fogDensity.value=fog.density)}function refreshMaterialUniforms(uniforms,material,pixelRatio,height,transmissionRenderTarget){material.isMeshBasicMaterial||material.isMeshLambertMaterial?refreshUniformsCommon(uniforms,material):material.isMeshToonMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsToon(uniforms,material)):material.isMeshPhongMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsPhong(uniforms,material)):material.isMeshStandardMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsStandard(uniforms,material),material.isMeshPhysicalMaterial&&refreshUniformsPhysical(uniforms,material,transmissionRenderTarget)):material.isMeshMatcapMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsMatcap(uniforms,material)):material.isMeshDepthMaterial?refreshUniformsCommon(uniforms,material):material.isMeshDistanceMaterial?(refreshUniformsCommon(uniforms,material),refreshUniformsDistance(uniforms,material)):material.isMeshNormalMaterial?refreshUniformsCommon(uniforms,material):material.isLineBasicMaterial?(refreshUniformsLine(uniforms,material),material.isLineDashedMaterial&&refreshUniformsDash(uniforms,material)):material.isPointsMaterial?refreshUniformsPoints(uniforms,material,pixelRatio,height):material.isSpriteMaterial?refreshUniformsSprites(uniforms,material):material.isShadowMaterial?(uniforms.color.value.copy(material.color),uniforms.opacity.value=material.opacity):material.isShaderMaterial&&(material.uniformsNeedUpdate=!1)}function refreshUniformsCommon(uniforms,material){uniforms.opacity.value=material.opacity,material.color&&uniforms.diffuse.value.copy(material.color),material.emissive&&uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity),material.map&&(uniforms.map.value=material.map),material.alphaMap&&(uniforms.alphaMap.value=material.alphaMap),material.bumpMap&&(uniforms.bumpMap.value=material.bumpMap,uniforms.bumpScale.value=material.bumpScale,material.side===constants._Li&&(uniforms.bumpScale.value*=-1)),material.displacementMap&&(uniforms.displacementMap.value=material.displacementMap,uniforms.displacementScale.value=material.displacementScale,uniforms.displacementBias.value=material.displacementBias),material.emissiveMap&&(uniforms.emissiveMap.value=material.emissiveMap),material.normalMap&&(uniforms.normalMap.value=material.normalMap,uniforms.normalScale.value.copy(material.normalScale),material.side===constants._Li&&uniforms.normalScale.value.negate()),material.specularMap&&(uniforms.specularMap.value=material.specularMap),material.alphaTest>0&&(uniforms.alphaTest.value=material.alphaTest);const envMap=properties.get(material).envMap;if(envMap&&(uniforms.envMap.value=envMap,uniforms.flipEnvMap.value=envMap.isCubeTexture&&!1===envMap.isRenderTargetTexture?-1:1,uniforms.reflectivity.value=material.reflectivity,uniforms.ior.value=material.ior,uniforms.refractionRatio.value=material.refractionRatio),material.lightMap){uniforms.lightMap.value=material.lightMap;const scaleFactor=!0!==renderer.physicallyCorrectLights?Math.PI:1;uniforms.lightMapIntensity.value=material.lightMapIntensity*scaleFactor}let uvScaleMap,uv2ScaleMap;material.aoMap&&(uniforms.aoMap.value=material.aoMap,uniforms.aoMapIntensity.value=material.aoMapIntensity),material.map?uvScaleMap=material.map:material.specularMap?uvScaleMap=material.specularMap:material.displacementMap?uvScaleMap=material.displacementMap:material.normalMap?uvScaleMap=material.normalMap:material.bumpMap?uvScaleMap=material.bumpMap:material.roughnessMap?uvScaleMap=material.roughnessMap:material.metalnessMap?uvScaleMap=material.metalnessMap:material.alphaMap?uvScaleMap=material.alphaMap:material.emissiveMap?uvScaleMap=material.emissiveMap:material.clearcoatMap?uvScaleMap=material.clearcoatMap:material.clearcoatNormalMap?uvScaleMap=material.clearcoatNormalMap:material.clearcoatRoughnessMap?uvScaleMap=material.clearcoatRoughnessMap:material.iridescenceMap?uvScaleMap=material.iridescenceMap:material.iridescenceThicknessMap?uvScaleMap=material.iridescenceThicknessMap:material.specularIntensityMap?uvScaleMap=material.specularIntensityMap:material.specularColorMap?uvScaleMap=material.specularColorMap:material.transmissionMap?uvScaleMap=material.transmissionMap:material.thicknessMap?uvScaleMap=material.thicknessMap:material.sheenColorMap?uvScaleMap=material.sheenColorMap:material.sheenRoughnessMap&&(uvScaleMap=material.sheenRoughnessMap),void 0!==uvScaleMap&&(uvScaleMap.isWebGLRenderTarget&&(uvScaleMap=uvScaleMap.texture),!0===uvScaleMap.matrixAutoUpdate&&uvScaleMap.updateMatrix(),uniforms.uvTransform.value.copy(uvScaleMap.matrix)),material.aoMap?uv2ScaleMap=material.aoMap:material.lightMap&&(uv2ScaleMap=material.lightMap),void 0!==uv2ScaleMap&&(uv2ScaleMap.isWebGLRenderTarget&&(uv2ScaleMap=uv2ScaleMap.texture),!0===uv2ScaleMap.matrixAutoUpdate&&uv2ScaleMap.updateMatrix(),uniforms.uv2Transform.value.copy(uv2ScaleMap.matrix))}function refreshUniformsLine(uniforms,material){uniforms.diffuse.value.copy(material.color),uniforms.opacity.value=material.opacity}function refreshUniformsDash(uniforms,material){uniforms.dashSize.value=material.dashSize,uniforms.totalSize.value=material.dashSize+material.gapSize,uniforms.scale.value=material.scale}function refreshUniformsPoints(uniforms,material,pixelRatio,height){let uvScaleMap;uniforms.diffuse.value.copy(material.color),uniforms.opacity.value=material.opacity,uniforms.size.value=material.size*pixelRatio,uniforms.scale.value=.5*height,material.map&&(uniforms.map.value=material.map),material.alphaMap&&(uniforms.alphaMap.value=material.alphaMap),material.alphaTest>0&&(uniforms.alphaTest.value=material.alphaTest),material.map?uvScaleMap=material.map:material.alphaMap&&(uvScaleMap=material.alphaMap),void 0!==uvScaleMap&&(!0===uvScaleMap.matrixAutoUpdate&&uvScaleMap.updateMatrix(),uniforms.uvTransform.value.copy(uvScaleMap.matrix))}function refreshUniformsSprites(uniforms,material){let uvScaleMap;uniforms.diffuse.value.copy(material.color),uniforms.opacity.value=material.opacity,uniforms.rotation.value=material.rotation,material.map&&(uniforms.map.value=material.map),material.alphaMap&&(uniforms.alphaMap.value=material.alphaMap),material.alphaTest>0&&(uniforms.alphaTest.value=material.alphaTest),material.map?uvScaleMap=material.map:material.alphaMap&&(uvScaleMap=material.alphaMap),void 0!==uvScaleMap&&(!0===uvScaleMap.matrixAutoUpdate&&uvScaleMap.updateMatrix(),uniforms.uvTransform.value.copy(uvScaleMap.matrix))}function refreshUniformsPhong(uniforms,material){uniforms.specular.value.copy(material.specular),uniforms.shininess.value=Math.max(material.shininess,1e-4)}function refreshUniformsToon(uniforms,material){material.gradientMap&&(uniforms.gradientMap.value=material.gradientMap)}function refreshUniformsStandard(uniforms,material){uniforms.roughness.value=material.roughness,uniforms.metalness.value=material.metalness,material.roughnessMap&&(uniforms.roughnessMap.value=material.roughnessMap),material.metalnessMap&&(uniforms.metalnessMap.value=material.metalnessMap),properties.get(material).envMap&&(uniforms.envMapIntensity.value=material.envMapIntensity)}function refreshUniformsPhysical(uniforms,material,transmissionRenderTarget){uniforms.ior.value=material.ior,material.sheen>0&&(uniforms.sheenColor.value.copy(material.sheenColor).multiplyScalar(material.sheen),uniforms.sheenRoughness.value=material.sheenRoughness,material.sheenColorMap&&(uniforms.sheenColorMap.value=material.sheenColorMap),material.sheenRoughnessMap&&(uniforms.sheenRoughnessMap.value=material.sheenRoughnessMap)),material.clearcoat>0&&(uniforms.clearcoat.value=material.clearcoat,uniforms.clearcoatRoughness.value=material.clearcoatRoughness,material.clearcoatMap&&(uniforms.clearcoatMap.value=material.clearcoatMap),material.clearcoatRoughnessMap&&(uniforms.clearcoatRoughnessMap.value=material.clearcoatRoughnessMap),material.clearcoatNormalMap&&(uniforms.clearcoatNormalScale.value.copy(material.clearcoatNormalScale),uniforms.clearcoatNormalMap.value=material.clearcoatNormalMap,material.side===constants._Li&&uniforms.clearcoatNormalScale.value.negate())),material.iridescence>0&&(uniforms.iridescence.value=material.iridescence,uniforms.iridescenceIOR.value=material.iridescenceIOR,uniforms.iridescenceThicknessMinimum.value=material.iridescenceThicknessRange[0],uniforms.iridescenceThicknessMaximum.value=material.iridescenceThicknessRange[1],material.iridescenceMap&&(uniforms.iridescenceMap.value=material.iridescenceMap),material.iridescenceThicknessMap&&(uniforms.iridescenceThicknessMap.value=material.iridescenceThicknessMap)),material.transmission>0&&(uniforms.transmission.value=material.transmission,uniforms.transmissionSamplerMap.value=transmissionRenderTarget.texture,uniforms.transmissionSamplerSize.value.set(transmissionRenderTarget.width,transmissionRenderTarget.height),material.transmissionMap&&(uniforms.transmissionMap.value=material.transmissionMap),uniforms.thickness.value=material.thickness,material.thicknessMap&&(uniforms.thicknessMap.value=material.thicknessMap),uniforms.attenuationDistance.value=material.attenuationDistance,uniforms.attenuationColor.value.copy(material.attenuationColor)),uniforms.specularIntensity.value=material.specularIntensity,uniforms.specularColor.value.copy(material.specularColor),material.specularIntensityMap&&(uniforms.specularIntensityMap.value=material.specularIntensityMap),material.specularColorMap&&(uniforms.specularColorMap.value=material.specularColorMap)}function refreshUniformsMatcap(uniforms,material){material.matcap&&(uniforms.matcap.value=material.matcap)}function refreshUniformsDistance(uniforms,material){uniforms.referencePosition.value.copy(material.referencePosition),uniforms.nearDistance.value=material.nearDistance,uniforms.farDistance.value=material.farDistance}return __name(refreshFogUniforms,"refreshFogUniforms"),__name(refreshMaterialUniforms,"refreshMaterialUniforms"),__name(refreshUniformsCommon,"refreshUniformsCommon"),__name(refreshUniformsLine,"refreshUniformsLine"),__name(refreshUniformsDash,"refreshUniformsDash"),__name(refreshUniformsPoints,"refreshUniformsPoints"),__name(refreshUniformsSprites,"refreshUniformsSprites"),__name(refreshUniformsPhong,"refreshUniformsPhong"),__name(refreshUniformsToon,"refreshUniformsToon"),__name(refreshUniformsStandard,"refreshUniformsStandard"),__name(refreshUniformsPhysical,"refreshUniformsPhysical"),__name(refreshUniformsMatcap,"refreshUniformsMatcap"),__name(refreshUniformsDistance,"refreshUniformsDistance"),{refreshFogUniforms,refreshMaterialUniforms}}function WebGLUniformsGroups(gl,info,capabilities,state){let buffers={},updateList={},allocatedBindingPoints=[];const maxBindingPoints=capabilities.isWebGL2?gl.getParameter(gl.MAX_UNIFORM_BUFFER_BINDINGS):0;function bind(uniformsGroup,program){state.uniformBlockBinding(uniformsGroup,program.program)}function update(uniformsGroup,program){let buffer=buffers[uniformsGroup.id];void 0===buffer&&(prepareUniformsGroup(uniformsGroup),buffer=createBuffer(uniformsGroup),buffers[uniformsGroup.id]=buffer,uniformsGroup.addEventListener("dispose",onUniformsGroupsDispose)),state.updateUBOMapping(uniformsGroup,program.program);const frame=info.render.frame;updateList[uniformsGroup.id]!==frame&&(updateBufferData(uniformsGroup),updateList[uniformsGroup.id]=frame)}function createBuffer(uniformsGroup){const bindingPointIndex=allocateBindingPointIndex();uniformsGroup.__bindingPointIndex=bindingPointIndex;const buffer=gl.createBuffer(),size=uniformsGroup.__size,usage=uniformsGroup.usage;return gl.bindBuffer(gl.UNIFORM_BUFFER,buffer),gl.bufferData(gl.UNIFORM_BUFFER,size,usage),gl.bindBuffer(gl.UNIFORM_BUFFER,null),gl.bindBufferBase(gl.UNIFORM_BUFFER,bindingPointIndex,buffer),buffer}function allocateBindingPointIndex(){for(let i=0;i<maxBindingPoints;i++)if(-1===allocatedBindingPoints.indexOf(i))return allocatedBindingPoints.push(i),i;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function updateBufferData(uniformsGroup){const uniforms=uniformsGroup.uniforms,cache=uniformsGroup.__cache;gl.bindBuffer(gl.UNIFORM_BUFFER,buffers[uniformsGroup.id]);for(let i=0,il=uniforms.length;i<il;i++){const uniform=uniforms[i];if(!0===hasUniformChanged(uniform,i,cache)){const offset=uniform.__offset,values=Array.isArray(uniform.value)?uniform.value:[uniform.value];let arrayOffset=0;for(let i2=0;i2<values.length;i2++){const value=values[i2],info2=getUniformSize(value);"number"==typeof value?(uniform.__data[0]=value,gl.bufferSubData(gl.UNIFORM_BUFFER,offset+arrayOffset,uniform.__data)):value.isMatrix3?(uniform.__data[0]=value.elements[0],uniform.__data[1]=value.elements[1],uniform.__data[2]=value.elements[2],uniform.__data[3]=value.elements[0],uniform.__data[4]=value.elements[3],uniform.__data[5]=value.elements[4],uniform.__data[6]=value.elements[5],uniform.__data[7]=value.elements[0],uniform.__data[8]=value.elements[6],uniform.__data[9]=value.elements[7],uniform.__data[10]=value.elements[8],uniform.__data[11]=value.elements[0]):(value.toArray(uniform.__data,arrayOffset),arrayOffset+=info2.storage/Float32Array.BYTES_PER_ELEMENT)}gl.bufferSubData(gl.UNIFORM_BUFFER,offset,uniform.__data)}}gl.bindBuffer(gl.UNIFORM_BUFFER,null)}function hasUniformChanged(uniform,index,cache){const value=uniform.value;if(void 0===cache[index]){if("number"==typeof value)cache[index]=value;else{const values=Array.isArray(value)?value:[value],tempValues=[];for(let i=0;i<values.length;i++)tempValues.push(values[i].clone());cache[index]=tempValues}return!0}if("number"==typeof value){if(cache[index]!==value)return cache[index]=value,!0}else{const cachedObjects=Array.isArray(cache[index])?cache[index]:[cache[index]],values=Array.isArray(value)?value:[value];for(let i=0;i<cachedObjects.length;i++){const cachedObject=cachedObjects[i];if(!1===cachedObject.equals(values[i]))return cachedObject.copy(values[i]),!0}}return!1}function prepareUniformsGroup(uniformsGroup){const uniforms=uniformsGroup.uniforms;let offset=0,chunkOffset=0;for(let i=0,l=uniforms.length;i<l;i++){const uniform=uniforms[i],infos={boundary:0,storage:0},values=Array.isArray(uniform.value)?uniform.value:[uniform.value];for(let j=0,jl=values.length;j<jl;j++){const info2=getUniformSize(values[j]);infos.boundary+=info2.boundary,infos.storage+=info2.storage}uniform.__data=new Float32Array(infos.storage/Float32Array.BYTES_PER_ELEMENT),uniform.__offset=offset,i>0&&(chunkOffset=offset%16,0!==chunkOffset&&16-chunkOffset-infos.boundary<0&&(offset+=16-chunkOffset,uniform.__offset=offset)),offset+=infos.storage}return chunkOffset=offset%16,chunkOffset>0&&(offset+=16-chunkOffset),uniformsGroup.__size=offset,uniformsGroup.__cache={},this}function getUniformSize(value){const info2={boundary:0,storage:0};return"number"==typeof value?(info2.boundary=4,info2.storage=4):value.isVector2?(info2.boundary=8,info2.storage=8):value.isVector3||value.isColor?(info2.boundary=16,info2.storage=12):value.isVector4?(info2.boundary=16,info2.storage=16):value.isMatrix3?(info2.boundary=48,info2.storage=48):value.isMatrix4?(info2.boundary=64,info2.storage=64):value.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",value),info2}function onUniformsGroupsDispose(event){const uniformsGroup=event.target;uniformsGroup.removeEventListener("dispose",onUniformsGroupsDispose);const index=allocatedBindingPoints.indexOf(uniformsGroup.__bindingPointIndex);allocatedBindingPoints.splice(index,1),gl.deleteBuffer(buffers[uniformsGroup.id]),delete buffers[uniformsGroup.id],delete updateList[uniformsGroup.id]}function dispose(){for(const id in buffers)gl.deleteBuffer(buffers[id]);allocatedBindingPoints=[],buffers={},updateList={}}return __name(bind,"bind"),__name(update,"update"),__name(createBuffer,"createBuffer"),__name(allocateBindingPointIndex,"allocateBindingPointIndex"),__name(updateBufferData,"updateBufferData"),__name(hasUniformChanged,"hasUniformChanged"),__name(prepareUniformsGroup,"prepareUniformsGroup"),__name(getUniformSize,"getUniformSize"),__name(onUniformsGroupsDispose,"onUniformsGroupsDispose"),__name(dispose,"dispose"),{bind,update,dispose}}function createCanvasElement(){const canvas=(0,src_utils.c)("canvas");return canvas.style.display="block",canvas}function WebGLRenderer(parameters={}){this.isWebGLRenderer=!0;const _canvas=void 0!==parameters.canvas?parameters.canvas:createCanvasElement(),_context=void 0!==parameters.context?parameters.context:null,_depth=void 0===parameters.depth||parameters.depth,_stencil=void 0===parameters.stencil||parameters.stencil,_antialias=void 0!==parameters.antialias&&parameters.antialias,_premultipliedAlpha=void 0===parameters.premultipliedAlpha||parameters.premultipliedAlpha,_preserveDrawingBuffer=void 0!==parameters.preserveDrawingBuffer&&parameters.preserveDrawingBuffer,_powerPreference=void 0!==parameters.powerPreference?parameters.powerPreference:"default",_failIfMajorPerformanceCaveat=void 0!==parameters.failIfMajorPerformanceCaveat&&parameters.failIfMajorPerformanceCaveat;let _alpha;_alpha=null!==_context?_context.getContextAttributes().alpha:void 0!==parameters.alpha&&parameters.alpha;let currentRenderList=null,currentRenderState=null;const renderListStack=[],renderStateStack=[];this.domElement=_canvas,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=constants.rnI,this.physicallyCorrectLights=!1,this.toneMapping=constants.uL9,this.toneMappingExposure=1;const _this=this;let _isContextLost=!1,_currentActiveCubeFace=0,_currentActiveMipmapLevel=0,_currentRenderTarget=null,_currentMaterialId=-1,_currentCamera=null;const _currentViewport=new Vector4.L,_currentScissor=new Vector4.L;let _currentScissorTest=null,_width=_canvas.width,_height=_canvas.height,_pixelRatio=1,_opaqueSort=null,_transparentSort=null;const _viewport=new Vector4.L(0,0,_width,_height),_scissor=new Vector4.L(0,0,_width,_height);let _scissorTest=!1;const _frustum=new Frustum;let _clippingEnabled=!1,_localClippingEnabled=!1,_transmissionRenderTarget=null;const _projScreenMatrix=new Matrix42.y,_vector22=new Vector22.F,_vector3=new Vector32.P,_emptyScene={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function getTargetPixelRatio(){return null===_currentRenderTarget?_pixelRatio:1}__name(getTargetPixelRatio,"getTargetPixelRatio");let extensions,capabilities,state,info,properties,textures,cubemaps,cubeuvmaps,attributes,geometries,objects,programCache,materials,renderLists,renderStates,clipping,shadowMap,background,morphtargets,bufferRenderer,indexedBufferRenderer,utils,bindingStates,uniformsGroups,_gl=_context;function getContext(contextNames,contextAttributes){for(let i=0;i<contextNames.length;i++){const context=_canvas.getContext(contextNames[i],contextAttributes);if(null!==context)return context}return null}__name(getContext,"getContext");try{const contextAttributes={alpha:!0,depth:_depth,stencil:_stencil,antialias:_antialias,premultipliedAlpha:_premultipliedAlpha,preserveDrawingBuffer:_preserveDrawingBuffer,powerPreference:_powerPreference,failIfMajorPerformanceCaveat:_failIfMajorPerformanceCaveat};if("setAttribute"in _canvas&&_canvas.setAttribute("data-engine",`three.js r${constants.UZH}`),_canvas.addEventListener("webglcontextlost",onContextLost,!1),_canvas.addEventListener("webglcontextrestored",onContextRestore,!1),_canvas.addEventListener("webglcontextcreationerror",onContextCreationError,!1),null===_gl){const contextNames=["webgl2","webgl","experimental-webgl"];if(!0===_this.isWebGL1Renderer&&contextNames.shift(),_gl=getContext(contextNames,contextAttributes),null===_gl)throw getContext(contextNames)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===_gl.getShaderPrecisionFormat&&(_gl.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(error){throw console.error("THREE.WebGLRenderer: "+error.message),error}function initGLContext(){extensions=new WebGLExtensions(_gl),capabilities=new WebGLCapabilities(_gl,extensions,parameters),extensions.init(capabilities),utils=new WebGLUtils(_gl,extensions,capabilities),state=new WebGLState(_gl,extensions,capabilities),info=new WebGLInfo(_gl),properties=new WebGLProperties,textures=new WebGLTextures(_gl,extensions,state,properties,capabilities,utils,info),cubemaps=new WebGLCubeMaps(_this),cubeuvmaps=new WebGLCubeUVMaps(_this),attributes=new WebGLAttributes(_gl,capabilities),bindingStates=new WebGLBindingStates(_gl,extensions,attributes,capabilities),geometries=new WebGLGeometries(_gl,attributes,info,bindingStates),objects=new WebGLObjects(_gl,geometries,attributes,info),morphtargets=new WebGLMorphtargets(_gl,capabilities,textures),clipping=new WebGLClipping(properties),programCache=new WebGLPrograms(_this,cubemaps,cubeuvmaps,extensions,capabilities,bindingStates,clipping),materials=new WebGLMaterials(_this,properties),renderLists=new WebGLRenderLists,renderStates=new WebGLRenderStates(extensions,capabilities),background=new WebGLBackground(_this,cubemaps,cubeuvmaps,state,objects,_alpha,_premultipliedAlpha),shadowMap=new WebGLShadowMap(_this,objects,capabilities),uniformsGroups=new WebGLUniformsGroups(_gl,info,capabilities,state),bufferRenderer=new WebGLBufferRenderer(_gl,extensions,info,capabilities),indexedBufferRenderer=new WebGLIndexedBufferRenderer(_gl,extensions,info,capabilities),info.programs=programCache.programs,_this.capabilities=capabilities,_this.extensions=extensions,_this.properties=properties,_this.renderLists=renderLists,_this.shadowMap=shadowMap,_this.state=state,_this.info=info}__name(initGLContext,"initGLContext"),initGLContext();const xr=new WebXRManager(_this,_gl);function onContextLost(event){event.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_isContextLost=!0}function onContextRestore(){console.log("THREE.WebGLRenderer: Context Restored."),_isContextLost=!1;const infoAutoReset=info.autoReset,shadowMapEnabled=shadowMap.enabled,shadowMapAutoUpdate=shadowMap.autoUpdate,shadowMapNeedsUpdate=shadowMap.needsUpdate,shadowMapType=shadowMap.type;initGLContext(),info.autoReset=infoAutoReset,shadowMap.enabled=shadowMapEnabled,shadowMap.autoUpdate=shadowMapAutoUpdate,shadowMap.needsUpdate=shadowMapNeedsUpdate,shadowMap.type=shadowMapType}function onContextCreationError(event){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",event.statusMessage)}function onMaterialDispose(event){const material=event.target;material.removeEventListener("dispose",onMaterialDispose),deallocateMaterial(material)}function deallocateMaterial(material){releaseMaterialProgramReferences(material),properties.remove(material)}function releaseMaterialProgramReferences(material){const programs=properties.get(material).programs;void 0!==programs&&(programs.forEach(function(program){programCache.releaseProgram(program)}),material.isShaderMaterial&&programCache.releaseShaderCache(material))}this.xr=xr,this.getContext=function(){return _gl},this.getContextAttributes=function(){return _gl.getContextAttributes()},this.forceContextLoss=function(){const extension=extensions.get("WEBGL_lose_context");extension&&extension.loseContext()},this.forceContextRestore=function(){const extension=extensions.get("WEBGL_lose_context");extension&&extension.restoreContext()},this.getPixelRatio=function(){return _pixelRatio},this.setPixelRatio=function(value){void 0!==value&&(_pixelRatio=value,this.setSize(_width,_height,!1))},this.getSize=function(target){return target.set(_width,_height)},this.setSize=function(width,height,updateStyle){xr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(_width=width,_height=height,_canvas.width=Math.floor(width*_pixelRatio),_canvas.height=Math.floor(height*_pixelRatio),!1!==updateStyle&&(_canvas.style.width=width+"px",_canvas.style.height=height+"px"),this.setViewport(0,0,width,height))},this.getDrawingBufferSize=function(target){return target.set(_width*_pixelRatio,_height*_pixelRatio).floor()},this.setDrawingBufferSize=function(width,height,pixelRatio){_width=width,_height=height,_pixelRatio=pixelRatio,_canvas.width=Math.floor(width*pixelRatio),_canvas.height=Math.floor(height*pixelRatio),this.setViewport(0,0,width,height)},this.getCurrentViewport=function(target){return target.copy(_currentViewport)},this.getViewport=function(target){return target.copy(_viewport)},this.setViewport=function(x,y,width,height){x.isVector4?_viewport.set(x.x,x.y,x.z,x.w):_viewport.set(x,y,width,height),state.viewport(_currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor())},this.getScissor=function(target){return target.copy(_scissor)},this.setScissor=function(x,y,width,height){x.isVector4?_scissor.set(x.x,x.y,x.z,x.w):_scissor.set(x,y,width,height),state.scissor(_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor())},this.getScissorTest=function(){return _scissorTest},this.setScissorTest=function(boolean){state.setScissorTest(_scissorTest=boolean)},this.setOpaqueSort=function(method){_opaqueSort=method},this.setTransparentSort=function(method){_transparentSort=method},this.getClearColor=function(target){return target.copy(background.getClearColor())},this.setClearColor=function(){background.setClearColor.apply(background,arguments)},this.getClearAlpha=function(){return background.getClearAlpha()},this.setClearAlpha=function(){background.setClearAlpha.apply(background,arguments)},this.clear=function(color=!0,depth=!0,stencil=!0){let bits=0;color&&(bits|=_gl.COLOR_BUFFER_BIT),depth&&(bits|=_gl.DEPTH_BUFFER_BIT),stencil&&(bits|=_gl.STENCIL_BUFFER_BIT),_gl.clear(bits)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){_canvas.removeEventListener("webglcontextlost",onContextLost,!1),_canvas.removeEventListener("webglcontextrestored",onContextRestore,!1),_canvas.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),renderLists.dispose(),renderStates.dispose(),properties.dispose(),cubemaps.dispose(),cubeuvmaps.dispose(),objects.dispose(),bindingStates.dispose(),uniformsGroups.dispose(),programCache.dispose(),xr.dispose(),xr.removeEventListener("sessionstart",onXRSessionStart),xr.removeEventListener("sessionend",onXRSessionEnd),_transmissionRenderTarget&&(_transmissionRenderTarget.dispose(),_transmissionRenderTarget=null),animation.stop()},__name(onContextLost,"onContextLost"),__name(onContextRestore,"onContextRestore"),__name(onContextCreationError,"onContextCreationError"),__name(onMaterialDispose,"onMaterialDispose"),__name(deallocateMaterial,"deallocateMaterial"),__name(releaseMaterialProgramReferences,"releaseMaterialProgramReferences"),this.renderBufferDirect=function(camera,scene,geometry,material,object,group){null===scene&&(scene=_emptyScene);const frontFaceCW=object.isMesh&&object.matrixWorld.determinant()<0,program=setProgram(camera,scene,geometry,material,object);state.setMaterial(material,frontFaceCW);let index=geometry.index,rangeFactor=1;!0===material.wireframe&&(index=geometries.getWireframeAttribute(geometry),rangeFactor=2);const drawRange=geometry.drawRange,position=geometry.attributes.position;let drawStart=drawRange.start*rangeFactor,drawEnd=(drawRange.start+drawRange.count)*rangeFactor;null!==group&&(drawStart=Math.max(drawStart,group.start*rangeFactor),drawEnd=Math.min(drawEnd,(group.start+group.count)*rangeFactor)),null!==index?(drawStart=Math.max(drawStart,0),drawEnd=Math.min(drawEnd,index.count)):null!=position&&(drawStart=Math.max(drawStart,0),drawEnd=Math.min(drawEnd,position.count));const drawCount=drawEnd-drawStart;if(drawCount<0||drawCount===1/0)return;bindingStates.setup(object,material,program,geometry,index);let attribute,renderer=bufferRenderer;if(null!==index&&(attribute=attributes.get(index),renderer=indexedBufferRenderer,renderer.setIndex(attribute)),object.isMesh)!0===material.wireframe?(state.setLineWidth(material.wireframeLinewidth*getTargetPixelRatio()),renderer.setMode(_gl.LINES)):renderer.setMode(_gl.TRIANGLES);else if(object.isLine){let lineWidth=material.linewidth;void 0===lineWidth&&(lineWidth=1),state.setLineWidth(lineWidth*getTargetPixelRatio()),renderer.setMode(object.isLineSegments?_gl.LINES:object.isLineLoop?_gl.LINE_LOOP:_gl.LINE_STRIP)}else object.isPoints?renderer.setMode(_gl.POINTS):object.isSprite&&renderer.setMode(_gl.TRIANGLES);if(object.isInstancedMesh)renderer.renderInstances(drawStart,drawCount,object.count);else if(geometry.isInstancedBufferGeometry){const instanceCount=Math.min(geometry.instanceCount,void 0!==geometry._maxInstanceCount?geometry._maxInstanceCount:1/0);renderer.renderInstances(drawStart,drawCount,instanceCount)}else renderer.render(drawStart,drawCount)},this.compile=function(scene,camera){function prepare(material,scene2,object){!0===material.transparent&&material.side===constants.ub3?(material.side=constants._Li,material.needsUpdate=!0,getProgram(material,scene2,object),material.side=constants.Wl3,material.needsUpdate=!0,getProgram(material,scene2,object),material.side=constants.ub3):getProgram(material,scene2,object)}__name(prepare,"prepare"),currentRenderState=renderStates.get(scene),currentRenderState.init(),renderStateStack.push(currentRenderState),scene.traverseVisible(function(object){object.isLight&&object.layers.test(camera.layers)&&(currentRenderState.pushLight(object),object.castShadow&&currentRenderState.pushShadow(object))}),currentRenderState.setupLights(_this.physicallyCorrectLights),scene.traverse(function(object){const material=object.material;if(material)if(Array.isArray(material))for(let i=0;i<material.length;i++)prepare(material[i],scene,object);else prepare(material,scene,object)}),renderStateStack.pop(),currentRenderState=null};let onAnimationFrameCallback=null;function onAnimationFrame(time){onAnimationFrameCallback&&onAnimationFrameCallback(time)}function onXRSessionStart(){animation.stop()}function onXRSessionEnd(){animation.start()}__name(onAnimationFrame,"onAnimationFrame"),__name(onXRSessionStart,"onXRSessionStart"),__name(onXRSessionEnd,"onXRSessionEnd");const animation=new WebGLAnimation;function projectObject(object,camera,groupOrder,sortObjects){if(!1===object.visible)return;if(object.layers.test(camera.layers))if(object.isGroup)groupOrder=object.renderOrder;else if(object.isLOD)!0===object.autoUpdate&&object.update(camera);else if(object.isLight)currentRenderState.pushLight(object),object.castShadow&&currentRenderState.pushShadow(object);else if(object.isSprite){if(!object.frustumCulled||_frustum.intersectsSprite(object)){sortObjects&&_vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix);const geometry=objects.update(object),material=object.material;material.visible&&currentRenderList.push(object,geometry,material,groupOrder,_vector3.z,null)}}else if((object.isMesh||object.isLine||object.isPoints)&&(object.isSkinnedMesh&&object.skeleton.frame!==info.render.frame&&(object.skeleton.update(),object.skeleton.frame=info.render.frame),!object.frustumCulled||_frustum.intersectsObject(object))){sortObjects&&_vector3.setFromMatrixPosition(object.matrixWorld).applyMatrix4(_projScreenMatrix);const geometry=objects.update(object),material=object.material;if(Array.isArray(material)){const groups=geometry.groups;for(let i=0,l=groups.length;i<l;i++){const group=groups[i],groupMaterial=material[group.materialIndex];groupMaterial&&groupMaterial.visible&&currentRenderList.push(object,geometry,groupMaterial,groupOrder,_vector3.z,group)}}else material.visible&&currentRenderList.push(object,geometry,material,groupOrder,_vector3.z,null)}const children=object.children;for(let i=0,l=children.length;i<l;i++)projectObject(children[i],camera,groupOrder,sortObjects)}function renderScene(currentRenderList2,scene,camera,viewport){const opaqueObjects=currentRenderList2.opaque,transmissiveObjects=currentRenderList2.transmissive,transparentObjects=currentRenderList2.transparent;currentRenderState.setupLightsView(camera),transmissiveObjects.length>0&&renderTransmissionPass(opaqueObjects,scene,camera),viewport&&state.viewport(_currentViewport.copy(viewport)),opaqueObjects.length>0&&renderObjects(opaqueObjects,scene,camera),transmissiveObjects.length>0&&renderObjects(transmissiveObjects,scene,camera),transparentObjects.length>0&&renderObjects(transparentObjects,scene,camera),state.buffers.depth.setTest(!0),state.buffers.depth.setMask(!0),state.buffers.color.setMask(!0),state.setPolygonOffset(!1)}function renderTransmissionPass(opaqueObjects,scene,camera){const isWebGL2=capabilities.isWebGL2;null===_transmissionRenderTarget&&(_transmissionRenderTarget=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:extensions.has("EXT_color_buffer_half_float")?constants.cLu:constants.ywz,minFilter:constants.D1R,samples:isWebGL2&&!0===_antialias?4:0})),_this.getDrawingBufferSize(_vector22),isWebGL2?_transmissionRenderTarget.setSize(_vector22.x,_vector22.y):_transmissionRenderTarget.setSize((0,MathUtils.gy)(_vector22.x),(0,MathUtils.gy)(_vector22.y));const currentRenderTarget=_this.getRenderTarget();_this.setRenderTarget(_transmissionRenderTarget),_this.clear();const currentToneMapping=_this.toneMapping;_this.toneMapping=constants.uL9,renderObjects(opaqueObjects,scene,camera),_this.toneMapping=currentToneMapping,textures.updateMultisampleRenderTarget(_transmissionRenderTarget),textures.updateRenderTargetMipmap(_transmissionRenderTarget),_this.setRenderTarget(currentRenderTarget)}function renderObjects(renderList,scene,camera){const overrideMaterial=!0===scene.isScene?scene.overrideMaterial:null;for(let i=0,l=renderList.length;i<l;i++){const renderItem=renderList[i],object=renderItem.object,geometry=renderItem.geometry,material=null===overrideMaterial?renderItem.material:overrideMaterial,group=renderItem.group;object.layers.test(camera.layers)&&renderObject(object,scene,camera,geometry,material,group)}}function renderObject(object,scene,camera,geometry,material,group){object.onBeforeRender(_this,scene,camera,geometry,material,group),object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,object.matrixWorld),object.normalMatrix.getNormalMatrix(object.modelViewMatrix),material.onBeforeRender(_this,scene,camera,geometry,object,group),!0===material.transparent&&material.side===constants.ub3?(material.side=constants._Li,material.needsUpdate=!0,_this.renderBufferDirect(camera,scene,geometry,material,object,group),material.side=constants.Wl3,material.needsUpdate=!0,_this.renderBufferDirect(camera,scene,geometry,material,object,group),material.side=constants.ub3):_this.renderBufferDirect(camera,scene,geometry,material,object,group),object.onAfterRender(_this,scene,camera,geometry,material,group)}function getProgram(material,scene,object){!0!==scene.isScene&&(scene=_emptyScene);const materialProperties=properties.get(material),lights=currentRenderState.state.lights,lightsStateVersion=lights.state.version,parameters2=programCache.getParameters(material,lights.state,currentRenderState.state.shadowsArray,scene,object),programCacheKey=programCache.getProgramCacheKey(parameters2);let programs=materialProperties.programs;materialProperties.environment=material.isMeshStandardMaterial?scene.environment:null,materialProperties.fog=scene.fog,materialProperties.envMap=(material.isMeshStandardMaterial?cubeuvmaps:cubemaps).get(material.envMap||materialProperties.environment),void 0===programs&&(material.addEventListener("dispose",onMaterialDispose),programs=new Map,materialProperties.programs=programs);let program=programs.get(programCacheKey);if(void 0!==program){if(materialProperties.currentProgram===program&&materialProperties.lightsStateVersion===lightsStateVersion)return updateCommonMaterialProperties(material,parameters2),program}else parameters2.uniforms=programCache.getUniforms(material),material.onBuild(object,parameters2,_this),material.onBeforeCompile(parameters2,_this),program=programCache.acquireProgram(parameters2,programCacheKey),programs.set(programCacheKey,program),materialProperties.uniforms=parameters2.uniforms;const uniforms=materialProperties.uniforms;(!material.isShaderMaterial&&!material.isRawShaderMaterial||!0===material.clipping)&&(uniforms.clippingPlanes=clipping.uniform),updateCommonMaterialProperties(material,parameters2),materialProperties.needsLights=materialNeedsLights(material),materialProperties.lightsStateVersion=lightsStateVersion,materialProperties.needsLights&&(uniforms.ambientLightColor.value=lights.state.ambient,uniforms.lightProbe.value=lights.state.probe,uniforms.directionalLights.value=lights.state.directional,uniforms.directionalLightShadows.value=lights.state.directionalShadow,uniforms.spotLights.value=lights.state.spot,uniforms.spotLightShadows.value=lights.state.spotShadow,uniforms.rectAreaLights.value=lights.state.rectArea,uniforms.ltc_1.value=lights.state.rectAreaLTC1,uniforms.ltc_2.value=lights.state.rectAreaLTC2,uniforms.pointLights.value=lights.state.point,uniforms.pointLightShadows.value=lights.state.pointShadow,uniforms.hemisphereLights.value=lights.state.hemi,uniforms.directionalShadowMap.value=lights.state.directionalShadowMap,uniforms.directionalShadowMatrix.value=lights.state.directionalShadowMatrix,uniforms.spotShadowMap.value=lights.state.spotShadowMap,uniforms.spotLightMatrix.value=lights.state.spotLightMatrix,uniforms.spotLightMap.value=lights.state.spotLightMap,uniforms.pointShadowMap.value=lights.state.pointShadowMap,uniforms.pointShadowMatrix.value=lights.state.pointShadowMatrix);const progUniforms=program.getUniforms(),uniformsList=WebGLUniforms.seqWithValue(progUniforms.seq,uniforms);return materialProperties.currentProgram=program,materialProperties.uniformsList=uniformsList,program}function updateCommonMaterialProperties(material,parameters2){const materialProperties=properties.get(material);materialProperties.outputEncoding=parameters2.outputEncoding,materialProperties.instancing=parameters2.instancing,materialProperties.skinning=parameters2.skinning,materialProperties.morphTargets=parameters2.morphTargets,materialProperties.morphNormals=parameters2.morphNormals,materialProperties.morphColors=parameters2.morphColors,materialProperties.morphTargetsCount=parameters2.morphTargetsCount,materialProperties.numClippingPlanes=parameters2.numClippingPlanes,materialProperties.numIntersection=parameters2.numClipIntersection,materialProperties.vertexAlphas=parameters2.vertexAlphas,materialProperties.vertexTangents=parameters2.vertexTangents,materialProperties.toneMapping=parameters2.toneMapping}function setProgram(camera,scene,geometry,material,object){!0!==scene.isScene&&(scene=_emptyScene),textures.resetTextureUnits();const fog=scene.fog,encoding=null===_currentRenderTarget?_this.outputEncoding:!0===_currentRenderTarget.isXRRenderTarget?_currentRenderTarget.texture.encoding:constants.rnI,envMap=(material.isMeshStandardMaterial?cubeuvmaps:cubemaps).get(material.envMap||(material.isMeshStandardMaterial?scene.environment:null)),vertexAlphas=!0===material.vertexColors&&!!geometry.attributes.color&&4===geometry.attributes.color.itemSize,vertexTangents=!!material.normalMap&&!!geometry.attributes.tangent,morphTargets=!!geometry.morphAttributes.position,morphNormals=!!geometry.morphAttributes.normal,morphColors=!!geometry.morphAttributes.color,toneMapping=material.toneMapped?_this.toneMapping:constants.uL9,morphAttribute=geometry.morphAttributes.position||geometry.morphAttributes.normal||geometry.morphAttributes.color,morphTargetsCount=void 0!==morphAttribute?morphAttribute.length:0,materialProperties=properties.get(material),lights=currentRenderState.state.lights;!0!==_clippingEnabled||!0!==_localClippingEnabled&&camera===_currentCamera||clipping.setState(material,camera,camera===_currentCamera&&material.id===_currentMaterialId);let needsProgramChange=!1;material.version===materialProperties.__version?(materialProperties.needsLights&&materialProperties.lightsStateVersion!==lights.state.version||materialProperties.outputEncoding!==encoding||object.isInstancedMesh&&!1===materialProperties.instancing||!object.isInstancedMesh&&!0===materialProperties.instancing||object.isSkinnedMesh&&!1===materialProperties.skinning||!object.isSkinnedMesh&&!0===materialProperties.skinning||materialProperties.envMap!==envMap||!0===material.fog&&materialProperties.fog!==fog||void 0!==materialProperties.numClippingPlanes&&(materialProperties.numClippingPlanes!==clipping.numPlanes||materialProperties.numIntersection!==clipping.numIntersection)||materialProperties.vertexAlphas!==vertexAlphas||materialProperties.vertexTangents!==vertexTangents||materialProperties.morphTargets!==morphTargets||materialProperties.morphNormals!==morphNormals||materialProperties.morphColors!==morphColors||materialProperties.toneMapping!==toneMapping||!0===capabilities.isWebGL2&&materialProperties.morphTargetsCount!==morphTargetsCount)&&(needsProgramChange=!0):(needsProgramChange=!0,materialProperties.__version=material.version);let program=materialProperties.currentProgram;!0===needsProgramChange&&(program=getProgram(material,scene,object));let refreshProgram=!1,refreshMaterial=!1,refreshLights=!1;const p_uniforms=program.getUniforms(),m_uniforms=materialProperties.uniforms;if(state.useProgram(program.program)&&(refreshProgram=!0,refreshMaterial=!0,refreshLights=!0),material.id!==_currentMaterialId&&(_currentMaterialId=material.id,refreshMaterial=!0),refreshProgram||_currentCamera!==camera){if(p_uniforms.setValue(_gl,"projectionMatrix",camera.projectionMatrix),capabilities.logarithmicDepthBuffer&&p_uniforms.setValue(_gl,"logDepthBufFC",2/(Math.log(camera.far+1)/Math.LN2)),_currentCamera!==camera&&(_currentCamera=camera,refreshMaterial=!0,refreshLights=!0),material.isShaderMaterial||material.isMeshPhongMaterial||material.isMeshToonMaterial||material.isMeshStandardMaterial||material.envMap){const uCamPos=p_uniforms.map.cameraPosition;void 0!==uCamPos&&uCamPos.setValue(_gl,_vector3.setFromMatrixPosition(camera.matrixWorld))}(material.isMeshPhongMaterial||material.isMeshToonMaterial||material.isMeshLambertMaterial||material.isMeshBasicMaterial||material.isMeshStandardMaterial||material.isShaderMaterial)&&p_uniforms.setValue(_gl,"isOrthographic",!0===camera.isOrthographicCamera),(material.isMeshPhongMaterial||material.isMeshToonMaterial||material.isMeshLambertMaterial||material.isMeshBasicMaterial||material.isMeshStandardMaterial||material.isShaderMaterial||material.isShadowMaterial||object.isSkinnedMesh)&&p_uniforms.setValue(_gl,"viewMatrix",camera.matrixWorldInverse)}if(object.isSkinnedMesh){p_uniforms.setOptional(_gl,object,"bindMatrix"),p_uniforms.setOptional(_gl,object,"bindMatrixInverse");const skeleton=object.skeleton;skeleton&&(capabilities.floatVertexTextures?(null===skeleton.boneTexture&&skeleton.computeBoneTexture(),p_uniforms.setValue(_gl,"boneTexture",skeleton.boneTexture,textures),p_uniforms.setValue(_gl,"boneTextureSize",skeleton.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const morphAttributes=geometry.morphAttributes;if((void 0!==morphAttributes.position||void 0!==morphAttributes.normal||void 0!==morphAttributes.color&&!0===capabilities.isWebGL2)&&morphtargets.update(object,geometry,material,program),(refreshMaterial||materialProperties.receiveShadow!==object.receiveShadow)&&(materialProperties.receiveShadow=object.receiveShadow,p_uniforms.setValue(_gl,"receiveShadow",object.receiveShadow)),material.isMeshGouraudMaterial&&null!==material.envMap&&(m_uniforms.envMap.value=envMap,m_uniforms.flipEnvMap.value=envMap.isCubeTexture&&!1===envMap.isRenderTargetTexture?-1:1),refreshMaterial&&(p_uniforms.setValue(_gl,"toneMappingExposure",_this.toneMappingExposure),materialProperties.needsLights&&markUniformsLightsNeedsUpdate(m_uniforms,refreshLights),fog&&!0===material.fog&&materials.refreshFogUniforms(m_uniforms,fog),materials.refreshMaterialUniforms(m_uniforms,material,_pixelRatio,_height,_transmissionRenderTarget),WebGLUniforms.upload(_gl,materialProperties.uniformsList,m_uniforms,textures)),material.isShaderMaterial&&!0===material.uniformsNeedUpdate&&(WebGLUniforms.upload(_gl,materialProperties.uniformsList,m_uniforms,textures),material.uniformsNeedUpdate=!1),material.isSpriteMaterial&&p_uniforms.setValue(_gl,"center",object.center),p_uniforms.setValue(_gl,"modelViewMatrix",object.modelViewMatrix),p_uniforms.setValue(_gl,"normalMatrix",object.normalMatrix),p_uniforms.setValue(_gl,"modelMatrix",object.matrixWorld),material.isShaderMaterial||material.isRawShaderMaterial){const groups=material.uniformsGroups;for(let i=0,l=groups.length;i<l;i++)if(capabilities.isWebGL2){const group=groups[i];uniformsGroups.update(group,program),uniformsGroups.bind(group,program)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return program}function markUniformsLightsNeedsUpdate(uniforms,value){uniforms.ambientLightColor.needsUpdate=value,uniforms.lightProbe.needsUpdate=value,uniforms.directionalLights.needsUpdate=value,uniforms.directionalLightShadows.needsUpdate=value,uniforms.pointLights.needsUpdate=value,uniforms.pointLightShadows.needsUpdate=value,uniforms.spotLights.needsUpdate=value,uniforms.spotLightShadows.needsUpdate=value,uniforms.rectAreaLights.needsUpdate=value,uniforms.hemisphereLights.needsUpdate=value}function materialNeedsLights(material){return material.isMeshLambertMaterial||material.isMeshToonMaterial||material.isMeshPhongMaterial||material.isMeshStandardMaterial||material.isShadowMaterial||material.isShaderMaterial&&!0===material.lights}animation.setAnimationLoop(onAnimationFrame),typeof self<"u"&&animation.setContext(self),this.setAnimationLoop=function(callback){onAnimationFrameCallback=callback,xr.setAnimationLoop(callback),null===callback?animation.stop():animation.start()},xr.addEventListener("sessionstart",onXRSessionStart),xr.addEventListener("sessionend",onXRSessionEnd),this.render=function(scene,camera){if(void 0===camera||!0===camera.isCamera){if(!0!==_isContextLost){if(!0===scene.matrixWorldAutoUpdate&&scene.updateMatrixWorld(),null===camera.parent&&!0===camera.matrixWorldAutoUpdate&&camera.updateMatrixWorld(),!0===xr.enabled&&!0===xr.isPresenting&&(!0===xr.cameraAutoUpdate&&xr.updateCamera(camera),camera=xr.getCamera()),!0===scene.isScene&&scene.onBeforeRender(_this,scene,camera,_currentRenderTarget),currentRenderState=renderStates.get(scene,renderStateStack.length),currentRenderState.init(),renderStateStack.push(currentRenderState),_projScreenMatrix.multiplyMatrices(camera.projectionMatrix,camera.matrixWorldInverse),_frustum.setFromProjectionMatrix(_projScreenMatrix),_localClippingEnabled=this.localClippingEnabled,_clippingEnabled=clipping.init(this.clippingPlanes,_localClippingEnabled,camera),currentRenderList=renderLists.get(scene,renderListStack.length),currentRenderList.init(),renderListStack.push(currentRenderList),projectObject(scene,camera,0,_this.sortObjects),currentRenderList.finish(),!0===_this.sortObjects&&currentRenderList.sort(_opaqueSort,_transparentSort),!0===_clippingEnabled&&clipping.beginShadows(),shadowMap.render(currentRenderState.state.shadowsArray,scene,camera),!0===_clippingEnabled&&clipping.endShadows(),!0===this.info.autoReset&&this.info.reset(),background.render(currentRenderList,scene),currentRenderState.setupLights(_this.physicallyCorrectLights),camera.isArrayCamera){const cameras=camera.cameras;for(let i=0,l=cameras.length;i<l;i++){const camera2=cameras[i];renderScene(currentRenderList,scene,camera2,camera2.viewport)}}else renderScene(currentRenderList,scene,camera);null!==_currentRenderTarget&&(textures.updateMultisampleRenderTarget(_currentRenderTarget),textures.updateRenderTargetMipmap(_currentRenderTarget)),!0===scene.isScene&&scene.onAfterRender(_this,scene,camera),bindingStates.resetDefaultState(),_currentMaterialId=-1,_currentCamera=null,renderStateStack.pop(),currentRenderState=renderStateStack.length>0?renderStateStack[renderStateStack.length-1]:null,renderListStack.pop(),currentRenderList=renderListStack.length>0?renderListStack[renderListStack.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},__name(projectObject,"projectObject"),__name(renderScene,"renderScene"),__name(renderTransmissionPass,"renderTransmissionPass"),__name(renderObjects,"renderObjects"),__name(renderObject,"renderObject"),__name(getProgram,"getProgram"),__name(updateCommonMaterialProperties,"updateCommonMaterialProperties"),__name(setProgram,"setProgram"),__name(markUniformsLightsNeedsUpdate,"markUniformsLightsNeedsUpdate"),__name(materialNeedsLights,"materialNeedsLights"),this.getActiveCubeFace=function(){return _currentActiveCubeFace},this.getActiveMipmapLevel=function(){return _currentActiveMipmapLevel},this.getRenderTarget=function(){return _currentRenderTarget},this.setRenderTargetTextures=function(renderTarget,colorTexture,depthTexture){properties.get(renderTarget.texture).__webglTexture=colorTexture,properties.get(renderTarget.depthTexture).__webglTexture=depthTexture;const renderTargetProperties=properties.get(renderTarget);renderTargetProperties.__hasExternalTextures=!0,renderTargetProperties.__hasExternalTextures&&(renderTargetProperties.__autoAllocateDepthBuffer=void 0===depthTexture,renderTargetProperties.__autoAllocateDepthBuffer||!0===extensions.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),renderTargetProperties.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(renderTarget,defaultFramebuffer){const renderTargetProperties=properties.get(renderTarget);renderTargetProperties.__webglFramebuffer=defaultFramebuffer,renderTargetProperties.__useDefaultFramebuffer=void 0===defaultFramebuffer},this.setRenderTarget=function(renderTarget,activeCubeFace=0,activeMipmapLevel=0){_currentRenderTarget=renderTarget,_currentActiveCubeFace=activeCubeFace,_currentActiveMipmapLevel=activeMipmapLevel;let useDefaultFramebuffer=!0,framebuffer=null,isCube=!1,isRenderTarget3D=!1;if(renderTarget){const renderTargetProperties=properties.get(renderTarget);void 0!==renderTargetProperties.__useDefaultFramebuffer?(state.bindFramebuffer(_gl.FRAMEBUFFER,null),useDefaultFramebuffer=!1):void 0===renderTargetProperties.__webglFramebuffer?textures.setupRenderTarget(renderTarget):renderTargetProperties.__hasExternalTextures&&textures.rebindTextures(renderTarget,properties.get(renderTarget.texture).__webglTexture,properties.get(renderTarget.depthTexture).__webglTexture);const texture=renderTarget.texture;(texture.isData3DTexture||texture.isDataArrayTexture||texture.isCompressedArrayTexture)&&(isRenderTarget3D=!0);const __webglFramebuffer=properties.get(renderTarget).__webglFramebuffer;renderTarget.isWebGLCubeRenderTarget?(framebuffer=__webglFramebuffer[activeCubeFace],isCube=!0):framebuffer=capabilities.isWebGL2&&renderTarget.samples>0&&!1===textures.useMultisampledRTT(renderTarget)?properties.get(renderTarget).__webglMultisampledFramebuffer:__webglFramebuffer,_currentViewport.copy(renderTarget.viewport),_currentScissor.copy(renderTarget.scissor),_currentScissorTest=renderTarget.scissorTest}else _currentViewport.copy(_viewport).multiplyScalar(_pixelRatio).floor(),_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio).floor(),_currentScissorTest=_scissorTest;if(state.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer)&&capabilities.drawBuffers&&useDefaultFramebuffer&&state.drawBuffers(renderTarget,framebuffer),state.viewport(_currentViewport),state.scissor(_currentScissor),state.setScissorTest(_currentScissorTest),isCube){const textureProperties=properties.get(renderTarget.texture);_gl.framebufferTexture2D(_gl.FRAMEBUFFER,_gl.COLOR_ATTACHMENT0,_gl.TEXTURE_CUBE_MAP_POSITIVE_X+activeCubeFace,textureProperties.__webglTexture,activeMipmapLevel)}else if(isRenderTarget3D){const textureProperties=properties.get(renderTarget.texture);_gl.framebufferTextureLayer(_gl.FRAMEBUFFER,_gl.COLOR_ATTACHMENT0,textureProperties.__webglTexture,activeMipmapLevel||0,activeCubeFace||0)}_currentMaterialId=-1},this.readRenderTargetPixels=function(renderTarget,x,y,width,height,buffer,activeCubeFaceIndex){if(!renderTarget||!renderTarget.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let framebuffer=properties.get(renderTarget).__webglFramebuffer;if(renderTarget.isWebGLCubeRenderTarget&&void 0!==activeCubeFaceIndex&&(framebuffer=framebuffer[activeCubeFaceIndex]),framebuffer){state.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer);try{const texture=renderTarget.texture,textureFormat=texture.format,textureType=texture.type;if(textureFormat!==constants.wk1&&utils.convert(textureFormat)!==_gl.getParameter(_gl.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const halfFloatSupportedByExt=textureType===constants.cLu&&(extensions.has("EXT_color_buffer_half_float")||capabilities.isWebGL2&&extensions.has("EXT_color_buffer_float"));if(!(textureType===constants.ywz||utils.convert(textureType)===_gl.getParameter(_gl.IMPLEMENTATION_COLOR_READ_TYPE)||textureType===constants.VzW&&(capabilities.isWebGL2||extensions.has("OES_texture_float")||extensions.has("WEBGL_color_buffer_float"))||halfFloatSupportedByExt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");x>=0&&x<=renderTarget.width-width&&y>=0&&y<=renderTarget.height-height&&_gl.readPixels(x,y,width,height,utils.convert(textureFormat),utils.convert(textureType),buffer)}finally{const framebuffer2=null!==_currentRenderTarget?properties.get(_currentRenderTarget).__webglFramebuffer:null;state.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer2)}}},this.copyFramebufferToTexture=function(position,texture,level=0){const levelScale=Math.pow(2,-level),width=Math.floor(texture.image.width*levelScale),height=Math.floor(texture.image.height*levelScale);textures.setTexture2D(texture,0),_gl.copyTexSubImage2D(_gl.TEXTURE_2D,level,0,0,position.x,position.y,width,height),state.unbindTexture()},this.copyTextureToTexture=function(position,srcTexture,dstTexture,level=0){const width=srcTexture.image.width,height=srcTexture.image.height,glFormat=utils.convert(dstTexture.format),glType=utils.convert(dstTexture.type);textures.setTexture2D(dstTexture,0),_gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL,dstTexture.flipY),_gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,dstTexture.premultiplyAlpha),_gl.pixelStorei(_gl.UNPACK_ALIGNMENT,dstTexture.unpackAlignment),srcTexture.isDataTexture?_gl.texSubImage2D(_gl.TEXTURE_2D,level,position.x,position.y,width,height,glFormat,glType,srcTexture.image.data):srcTexture.isCompressedTexture?_gl.compressedTexSubImage2D(_gl.TEXTURE_2D,level,position.x,position.y,srcTexture.mipmaps[0].width,srcTexture.mipmaps[0].height,glFormat,srcTexture.mipmaps[0].data):_gl.texSubImage2D(_gl.TEXTURE_2D,level,position.x,position.y,glFormat,glType,srcTexture.image),0===level&&dstTexture.generateMipmaps&&_gl.generateMipmap(_gl.TEXTURE_2D),state.unbindTexture()},this.copyTextureToTexture3D=function(sourceBox,position,srcTexture,dstTexture,level=0){if(_this.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const width=sourceBox.max.x-sourceBox.min.x+1,height=sourceBox.max.y-sourceBox.min.y+1,depth=sourceBox.max.z-sourceBox.min.z+1,glFormat=utils.convert(dstTexture.format),glType=utils.convert(dstTexture.type);let glTarget;if(dstTexture.isData3DTexture)textures.setTexture3D(dstTexture,0),glTarget=_gl.TEXTURE_3D;else{if(!dstTexture.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");textures.setTexture2DArray(dstTexture,0),glTarget=_gl.TEXTURE_2D_ARRAY}_gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL,dstTexture.flipY),_gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,dstTexture.premultiplyAlpha),_gl.pixelStorei(_gl.UNPACK_ALIGNMENT,dstTexture.unpackAlignment);const unpackRowLen=_gl.getParameter(_gl.UNPACK_ROW_LENGTH),unpackImageHeight=_gl.getParameter(_gl.UNPACK_IMAGE_HEIGHT),unpackSkipPixels=_gl.getParameter(_gl.UNPACK_SKIP_PIXELS),unpackSkipRows=_gl.getParameter(_gl.UNPACK_SKIP_ROWS),unpackSkipImages=_gl.getParameter(_gl.UNPACK_SKIP_IMAGES),image=srcTexture.isCompressedTexture?srcTexture.mipmaps[0]:srcTexture.image;_gl.pixelStorei(_gl.UNPACK_ROW_LENGTH,image.width),_gl.pixelStorei(_gl.UNPACK_IMAGE_HEIGHT,image.height),_gl.pixelStorei(_gl.UNPACK_SKIP_PIXELS,sourceBox.min.x),_gl.pixelStorei(_gl.UNPACK_SKIP_ROWS,sourceBox.min.y),_gl.pixelStorei(_gl.UNPACK_SKIP_IMAGES,sourceBox.min.z),srcTexture.isDataTexture||srcTexture.isData3DTexture?_gl.texSubImage3D(glTarget,level,position.x,position.y,position.z,width,height,depth,glFormat,glType,image.data):srcTexture.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),_gl.compressedTexSubImage3D(glTarget,level,position.x,position.y,position.z,width,height,depth,glFormat,image.data)):_gl.texSubImage3D(glTarget,level,position.x,position.y,position.z,width,height,depth,glFormat,glType,image),_gl.pixelStorei(_gl.UNPACK_ROW_LENGTH,unpackRowLen),_gl.pixelStorei(_gl.UNPACK_IMAGE_HEIGHT,unpackImageHeight),_gl.pixelStorei(_gl.UNPACK_SKIP_PIXELS,unpackSkipPixels),_gl.pixelStorei(_gl.UNPACK_SKIP_ROWS,unpackSkipRows),_gl.pixelStorei(_gl.UNPACK_SKIP_IMAGES,unpackSkipImages),0===level&&dstTexture.generateMipmaps&&_gl.generateMipmap(glTarget),state.unbindTexture()},this.initTexture=function(texture){texture.isCubeTexture?textures.setTextureCube(texture,0):texture.isData3DTexture?textures.setTexture3D(texture,0):texture.isDataArrayTexture||texture.isCompressedArrayTexture?textures.setTexture2DArray(texture,0):textures.setTexture2D(texture,0),state.unbindTexture()},this.resetState=function(){_currentActiveCubeFace=0,_currentActiveMipmapLevel=0,_currentRenderTarget=null,state.reset(),bindingStates.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}__name(WebXRManager,"WebXRManager"),__name(WebGLMaterials,"WebGLMaterials"),__name(WebGLUniformsGroups,"WebGLUniformsGroups"),__name(createCanvasElement,"createCanvasElement"),__name(WebGLRenderer,"WebGLRenderer")},6267:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>Scene});var _core_Object3D_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4130);class Scene extends _core_Object3D_js__WEBPACK_IMPORTED_MODULE_0__.T{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(source,recursive){return super.copy(source,recursive),null!==source.background&&(this.background=source.background.clone()),null!==source.environment&&(this.environment=source.environment.clone()),null!==source.fog&&(this.fog=source.fog.clone()),this.backgroundBlurriness=source.backgroundBlurriness,this.backgroundIntensity=source.backgroundIntensity,null!==source.overrideMaterial&&(this.overrideMaterial=source.overrideMaterial.clone()),this.matrixAutoUpdate=source.matrixAutoUpdate,this}toJSON(meta){const data=super.toJSON(meta);return null!==this.fog&&(data.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(data.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(data.backgroundIntensity=this.backgroundIntensity),data}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(value){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=value}}__name(Scene,"Scene")},8508:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>CubeTexture});var _Texture_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5346),_constants_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8007);class CubeTexture extends _Texture_js__WEBPACK_IMPORTED_MODULE_0__.x{constructor(images,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding){super(images=void 0!==images?images:[],mapping=void 0!==mapping?mapping:_constants_js__WEBPACK_IMPORTED_MODULE_1__.fY$,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(value){this.image=value}}__name(CubeTexture,"CubeTexture")},2901:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>Source});var _extras_ImageUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1423),_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4090);class Source{constructor(data=null){this.isSource=!0,this.uuid=_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_0__.DO(),this.data=data,this.version=0}set needsUpdate(value){!0===value&&this.version++}toJSON(meta){const isRootObject=void 0===meta||"string"==typeof meta;if(!isRootObject&&void 0!==meta.images[this.uuid])return meta.images[this.uuid];const output={uuid:this.uuid,url:""},data=this.data;if(null!==data){let url;if(Array.isArray(data)){url=[];for(let i=0,l=data.length;i<l;i++)url.push(serializeImage(data[i].isDataTexture?data[i].image:data[i]))}else url=serializeImage(data);output.url=url}return isRootObject||(meta.images[this.uuid]=output),output}}function serializeImage(image){return typeof HTMLImageElement<"u"&&image instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&image instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&image instanceof ImageBitmap?_extras_ImageUtils_js__WEBPACK_IMPORTED_MODULE_1__.P.getDataURL(image):image.data?{data:Array.from(image.data),width:image.width,height:image.height,type:image.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}__name(Source,"Source"),__name(serializeImage,"serializeImage")},5346:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>Texture});var _core_EventDispatcher_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1168),_constants_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8007),_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4090),_math_Vector2_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2319),_math_Matrix3_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6113),_Source_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2901);let textureId=0,Texture=(()=>{class Texture2 extends _core_EventDispatcher_js__WEBPACK_IMPORTED_MODULE_0__.p{constructor(image=Texture2.DEFAULT_IMAGE,mapping=Texture2.DEFAULT_MAPPING,wrapS=_constants_js__WEBPACK_IMPORTED_MODULE_1__.uWy,wrapT=_constants_js__WEBPACK_IMPORTED_MODULE_1__.uWy,magFilter=_constants_js__WEBPACK_IMPORTED_MODULE_1__.wem,minFilter=_constants_js__WEBPACK_IMPORTED_MODULE_1__.D1R,format=_constants_js__WEBPACK_IMPORTED_MODULE_1__.wk1,type=_constants_js__WEBPACK_IMPORTED_MODULE_1__.ywz,anisotropy=Texture2.DEFAULT_ANISOTROPY,encoding=_constants_js__WEBPACK_IMPORTED_MODULE_1__.rnI){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_2__.DO(),this.name="",this.source=new _Source_js__WEBPACK_IMPORTED_MODULE_3__.H(image),this.mipmaps=[],this.mapping=mapping,this.wrapS=wrapS,this.wrapT=wrapT,this.magFilter=magFilter,this.minFilter=minFilter,this.anisotropy=anisotropy,this.format=format,this.internalFormat=null,this.type=type,this.offset=new _math_Vector2_js__WEBPACK_IMPORTED_MODULE_4__.F(0,0),this.repeat=new _math_Vector2_js__WEBPACK_IMPORTED_MODULE_4__.F(1,1),this.center=new _math_Vector2_js__WEBPACK_IMPORTED_MODULE_4__.F(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _math_Matrix3_js__WEBPACK_IMPORTED_MODULE_5__.V,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=encoding,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(value){this.source.data=value}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(source){return this.name=source.name,this.source=source.source,this.mipmaps=source.mipmaps.slice(0),this.mapping=source.mapping,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.format=source.format,this.internalFormat=source.internalFormat,this.type=source.type,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.center.copy(source.center),this.rotation=source.rotation,this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrix.copy(source.matrix),this.generateMipmaps=source.generateMipmaps,this.premultiplyAlpha=source.premultiplyAlpha,this.flipY=source.flipY,this.unpackAlignment=source.unpackAlignment,this.encoding=source.encoding,this.userData=JSON.parse(JSON.stringify(source.userData)),this.needsUpdate=!0,this}toJSON(meta){const isRootObject=void 0===meta||"string"==typeof meta;if(!isRootObject&&void 0!==meta.textures[this.uuid])return meta.textures[this.uuid];const output={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(meta).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(output.userData=this.userData),isRootObject||(meta.textures[this.uuid]=output),output}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(uv){if(this.mapping!==_constants_js__WEBPACK_IMPORTED_MODULE_1__.xfE)return uv;if(uv.applyMatrix3(this.matrix),uv.x<0||uv.x>1)switch(this.wrapS){case _constants_js__WEBPACK_IMPORTED_MODULE_1__.rpg:uv.x=uv.x-Math.floor(uv.x);break;case _constants_js__WEBPACK_IMPORTED_MODULE_1__.uWy:uv.x=uv.x<0?0:1;break;case _constants_js__WEBPACK_IMPORTED_MODULE_1__.OoA:uv.x=1===Math.abs(Math.floor(uv.x)%2)?Math.ceil(uv.x)-uv.x:uv.x-Math.floor(uv.x)}if(uv.y<0||uv.y>1)switch(this.wrapT){case _constants_js__WEBPACK_IMPORTED_MODULE_1__.rpg:uv.y=uv.y-Math.floor(uv.y);break;case _constants_js__WEBPACK_IMPORTED_MODULE_1__.uWy:uv.y=uv.y<0?0:1;break;case _constants_js__WEBPACK_IMPORTED_MODULE_1__.OoA:uv.y=1===Math.abs(Math.floor(uv.y)%2)?Math.ceil(uv.y)-uv.y:uv.y-Math.floor(uv.y)}return this.flipY&&(uv.y=1-uv.y),uv}set needsUpdate(value){!0===value&&(this.version++,this.source.needsUpdate=!0)}}return __name(Texture2,"Texture"),Texture2.DEFAULT_IMAGE=null,Texture2.DEFAULT_MAPPING=_constants_js__WEBPACK_IMPORTED_MODULE_1__.xfE,Texture2.DEFAULT_ANISOTROPY=1,Texture2})()},3436:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";function arrayNeedsUint32(array){for(let i=array.length-1;i>=0;--i)if(array[i]>=65535)return!0;return!1}__webpack_require__.d(__webpack_exports__,{H7:()=>arrayNeedsUint32,c:()=>createElementNS}),__name(function arrayMin(array){if(0===array.length)return 1/0;let min=array[0];for(let i=1,l=array.length;i<l;++i)array[i]<min&&(min=array[i]);return min},"arrayMin"),__name(function arrayMax(array){if(0===array.length)return-1/0;let max=array[0];for(let i=1,l=array.length;i<l;++i)array[i]>max&&(max=array[i]);return max},"arrayMax"),__name(arrayNeedsUint32,"arrayNeedsUint32");const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function createElementNS(name){return document.createElementNS("http://www.w3.org/1999/xhtml",name)}__name(function getTypedArray(type,buffer){return new TYPED_ARRAYS[type](buffer)},"getTypedArray"),__name(createElementNS,"createElementNS")}}]);